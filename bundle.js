/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e,t,n={1906:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>a(l,n))c<i&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<i&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function _(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,I(w);else{var t=r(u);null!==t&&k(_,t.startTime-e)}}function w(e,n){m=!1,g&&(g=!1,y(E),E=-1),p=!0;var a=f;try{for(x(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!R());){var o=h.callback;if("function"==typeof o){h.callback=null,f=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"==typeof s?h.callback=s:h===r(c)&&i(c),x(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&k(_,d.startTime-n),l=!1}return l}finally{h=null,f=a,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var M,S=!1,A=null,E=-1,C=5,T=-1;function R(){return!(t.unstable_now()-T<C)}function P(){if(null!==A){var e=t.unstable_now();T=e;var n=!0;try{n=A(!0,e)}finally{n?M():(S=!1,A=null)}}else S=!1}if("function"==typeof b)M=function(){b(P)};else if("undefined"!=typeof MessageChannel){var L=new MessageChannel,D=L.port2;L.port1.onmessage=P,M=function(){D.postMessage(null)}}else M=function(){v(P,0)};function I(e){A=e,S||(S=!0,M())}function k(e,n){E=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,I(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?o+a:o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(u,e),null===r(c)&&e===r(u)&&(g?(y(E),E=-1):g=!0,k(_,a-o))):(e.sortIndex=s,n(c,e),m||p||(m=!0,I(w))),e},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},5431:(e,t,n)=>{"use strict";e.exports=n(1906)},4099:(e,t,n)=>{"use strict";n.r(t),n.d(t,{extractTLE:()=>y,generateTLE:()=>b,getCorsFreeUrl:()=>_,getDistance:()=>T,getEarthRotationAngle:()=>C,getOrbitAtTime:()=>A,getSunPosition:()=>E,loadTLEs:()=>S,loadTLEsJSON:()=>M,parseTLEs:()=>w,twoline2satrec:()=>x});var r=n(6150),i=n(5793),a=n(5931),o=Math.PI,s=2*o,l=6378.137,c=60/Math.sqrt(650944.0944816993),u=l*c/60,d=.00108262998905,h=-253215306e-14/d;function f(e,t,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;return 367*e-Math.floor(7*(e+Math.floor((t+9)/12))*.25)+Math.floor(275*t/9)+n+1721013.5+((o/6e4+a/60+i)/60+r)/24}function p(e,t,n,r,i,a,o){if(e instanceof Date){var s=e;return f(s.getUTCFullYear(),s.getUTCMonth()+1,s.getUTCDate(),s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds())}return f(e,t,n,r,i,a,o)}function m(e,t){var n,r,i,a,f,p,m,g,v,y,b,x,_,w,M,S,A,E,C,T,R,P,L,D,I,k;e.t=t,e.error=0;var B=e.mo+e.mdot*e.t,F=e.argpo+e.argpdot*e.t,N=e.nodeo+e.nodedot*e.t;g=F,T=B;var O=e.t*e.t;if(P=N+e.nodecf*O,S=1-e.cc1*e.t,A=e.bstar*e.cc4*e.t,E=e.t2cof*O,1!==e.isimp){p=e.omgcof*e.t;var z=1+e.eta*Math.cos(B);T=B+(M=p+e.xmcof*(z*z*z-e.delmo)),g=F-M,x=(b=O*e.t)*e.t,S=S-e.d2*O-e.d3*b-e.d4*x,A+=e.bstar*e.cc5*(Math.sin(T)-e.sinmao),E=E+e.t3cof*b+x*(e.t4cof+e.t*e.t5cof)}R=e.no;var U=e.ecco;if(C=e.inclo,"d"===e.method){_=e.t;var H=function(e){var t,n,r,i,a,o,l,c,u=e.irez,d=e.d2201,h=e.d2211,f=e.d3210,p=e.d3222,m=e.d4410,g=e.d4422,v=e.d5220,y=e.d5232,b=e.d5421,x=e.d5433,_=e.del1,w=e.del2,M=e.del3,S=e.argpo,A=e.argpdot,E=e.t,C=e.xfact,T=e.xlamo,R=e.no,P=e.atime,L=e.em,D=e.argpm,I=e.inclm,k=e.xli,B=e.mm,F=e.xni,N=e.nodem,O=e.nm,z=.13130908,U=2.8843198,H=.37448087,G=5.7686396,V=.95240898,j=1.8014998,W=1.050833,X=4.4108898,q=259200,Y=0,Z=0,J=(e.gsto+.0043752690880113*e.tc)%s;if(L+=e.dedt*E,I+=e.didt*E,D+=e.domdt*E,N+=e.dnodt*E,B+=e.dmdt*E,0!==u){(0===P||E*P<=0||Math.abs(E)<Math.abs(P))&&(P=0,F=R,k=T),t=E>0?720:-720;for(var $=381;381===$;)2!==u?(l=_*Math.sin(k-z)+w*Math.sin(2*(k-U))+M*Math.sin(3*(k-H)),a=F+C,o=_*Math.cos(k-z)+2*w*Math.cos(2*(k-U))+3*M*Math.cos(3*(k-H)),o*=a):(r=(c=S+A*P)+c,n=k+k,l=d*Math.sin(r+k-G)+h*Math.sin(k-G)+f*Math.sin(c+k-V)+p*Math.sin(-c+k-V)+m*Math.sin(r+n-j)+g*Math.sin(n-j)+v*Math.sin(c+k-W)+y*Math.sin(-c+k-W)+b*Math.sin(c+n-X)+x*Math.sin(-c+n-X),a=F+C,o=d*Math.cos(r+k-G)+h*Math.cos(k-G)+f*Math.cos(c+k-V)+p*Math.cos(-c+k-V)+v*Math.cos(c+k-W)+y*Math.cos(-c+k-W)+2*m*Math.cos(r+n-j)+g*Math.cos(n-j)+b*Math.cos(c+n-X)+x*Math.cos(-c+n-X),o*=a),Math.abs(E-P)>=720?$=381:(Z=E-P,$=0),381===$&&(k+=a*t+l*q,F+=l*t+o*q,P+=t);O=F+l*Z+o*Z*Z*.5,i=k+a*Z+l*Z*Z*.5,1!==u?(B=i-2*N+2*J,Y=O-R):(B=i-N-D+J,Y=O-R),O=R+Y}return{atime:P,em:L,argpm:D,inclm:I,xli:k,mm:B,xni:F,nodem:N,dndt:Y,nm:O}}({irez:e.irez,d2201:e.d2201,d2211:e.d2211,d3210:e.d3210,d3222:e.d3222,d4410:e.d4410,d4422:e.d4422,d5220:e.d5220,d5232:e.d5232,d5421:e.d5421,d5433:e.d5433,dedt:e.dedt,del1:e.del1,del2:e.del2,del3:e.del3,didt:e.didt,dmdt:e.dmdt,dnodt:e.dnodt,domdt:e.domdt,argpo:e.argpo,argpdot:e.argpdot,t:e.t,tc:_,gsto:e.gsto,xfact:e.xfact,xlamo:e.xlamo,no:e.no,atime:e.atime,em:U,argpm:g,inclm:C,xli:e.xli,mm:T,xni:e.xni,nodem:P,nm:R});U=H.em,g=H.argpm,C=H.inclm,T=H.mm,P=H.nodem,R=H.nm}if(R<=0)return e.error=2,[!1,!1];var G=Math.pow(c/R,.6666666666666666)*S*S;if(R=c/Math.pow(G,1.5),(U-=A)>=1||U<-.001)return e.error=1,[!1,!1];U<1e-6&&(U=1e-6),D=(T+=e.no*E)+g+P;var V=U;if(L=C,v=g%=s,k=P%=s,I=T=((D%=s)-g-P)%s,a=Math.sin(C),i=Math.cos(C),"d"===e.method){var j=function(e,t){var n,r,i,a,l,c,u,d,h,f,p,m,g,v,y,b,x,_,w=e.e3,M=e.ee2,S=e.peo,A=e.pgho,E=e.pho,C=e.pinco,T=e.plo,R=e.se2,P=e.se3,L=e.sgh2,D=e.sgh3,I=e.sgh4,k=e.sh2,B=e.sh3,F=e.si2,N=e.si3,O=e.sl2,z=e.sl3,U=e.sl4,H=e.t,G=e.xgh2,V=e.xgh3,j=e.xgh4,W=e.xh2,X=e.xh3,q=e.xi2,Y=e.xi3,Z=e.xl2,J=e.xl3,$=e.xl4,K=e.zmol,Q=e.zmos,ee=t.init,te=t.opsmode,ne=t.ep,re=t.inclp,ie=t.nodep,ae=t.argpp,oe=t.mp;_=Q+119459e-10*H,"y"===ee&&(_=Q),x=_+.0335*Math.sin(_);var se=R*(u=.5*(v=Math.sin(x))*v-.25)+P*(d=-.5*v*Math.cos(x)),le=F*u+N*d,ce=O*u+z*d+U*v,ue=L*u+D*d+I*v,de=k*u+B*d;return _=K+.00015835218*H,"y"===ee&&(_=K),x=_+.1098*Math.sin(_),h=se+(M*(u=.5*(v=Math.sin(x))*v-.25)+w*(d=-.5*v*Math.cos(x))),m=le+(q*u+Y*d),g=ce+(Z*u+J*d+$*v),f=ue+(G*u+V*d+j*v),p=de+(W*u+X*d),"n"===ee&&(g-=T,f-=A,p-=E,re+=m-=C,ne+=h-=S,a=Math.sin(re),i=Math.cos(re),re>=.2?(ae+=f-=i*(p/=a),ie+=p,oe+=g):(n=a*(c=Math.sin(ie)),r=a*(l=Math.cos(ie)),n+=p*l+m*i*c,r+=-p*c+m*i*l,(ie%=s)<0&&"a"===te&&(ie+=s),y=oe+ae+i*ie,y+=g+f-m*ie*a,b=ie,(ie=Math.atan2(n,r))<0&&"a"===te&&(ie+=s),Math.abs(b-ie)>o&&(ie<b?ie+=s:ie-=s),ae=y-(oe+=g)-i*ie)),{ep:ne,inclp:re,nodep:ie,argpp:ae,mp:oe}}(e,{inclo:e.inclo,init:"n",ep:V,inclp:L,nodep:k,argpp:v,mp:I,opsmode:e.operationmode});if(V=j.ep,k=j.nodep,v=j.argpp,I=j.mp,(L=j.inclp)<0&&(L=-L,k+=o,v-=o),V<0||V>1)return e.error=3,[!1,!1]}"d"===e.method&&(a=Math.sin(L),i=Math.cos(L),e.aycof=-.5*h*a,Math.abs(i+1)>15e-13?e.xlcof=-.25*h*a*(3+5*i)/(1+i):e.xlcof=-.25*h*a*(3+5*i)/15e-13);var W=V*Math.cos(v);M=1/(G*(1-V*V));var X=V*Math.sin(v)+M*e.aycof,q=(I+v+k+M*e.xlcof*W-k)%s;m=q,w=9999.9;for(var Y=1;Math.abs(w)>=1e-12&&Y<=10;)r=Math.sin(m),w=(q-X*(n=Math.cos(m))+W*r-m)/(w=1-n*W-r*X),Math.abs(w)>=.95&&(w=w>0?.95:-.95),m+=w,Y+=1;var Z=W*n+X*r,J=W*r-X*n,$=W*W+X*X,K=G*(1-$);if(K<0)return e.error=4,[!1,!1];var Q=G*(1-Z),ee=Math.sqrt(G)*J/Q,te=Math.sqrt(K)/Q,ne=Math.sqrt(1-$),re=G/Q*(r-X-W*(M=J/(1+ne))),ie=G/Q*(n-W+X*M);y=Math.atan2(re,ie);var ae=(ie+ie)*re,oe=1-2*re*re,se=.5*d*(M=1/K),le=se*M;"d"===e.method&&(f=i*i,e.con41=3*f-1,e.x1mth2=1-f,e.x7thm1=7*f-1);var ce=Q*(1-1.5*le*ne*e.con41)+.5*se*e.x1mth2*oe;if(ce<1)return e.error=6,{position:!1,velocity:!1};y-=.25*le*e.x7thm1*ae;var ue=k+1.5*le*i*ae,de=L+1.5*le*i*a*oe,he=ee-R*se*e.x1mth2*ae/c,fe=te+R*se*(e.x1mth2*oe+1.5*e.con41)/c,pe=Math.sin(y),me=Math.cos(y),ge=Math.sin(ue),ve=Math.cos(ue),ye=Math.sin(de),be=Math.cos(de),xe=-ge*be,_e=ve*be,we=xe*pe+ve*me,Me=_e*pe+ge*me,Se=ye*pe;return{position:{x:ce*we*l,y:ce*Me*l,z:ce*Se*l},velocity:{x:(he*we+fe*(xe*me-ve*pe))*u,y:(he*Me+fe*(_e*me-ge*pe))*u,z:(he*Se+fe*(ye*me))*u}}}function g(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){const n={};let r;n.epochYear=parseInt(e.substring(18,20),10),n.epochDays=parseFloat(e.substring(20,32)),n.meanMotionDot=parseFloat(e.substring(33,43)),n.meanMotionDoubleDot=parseFloat(`.${parseInt(e.substring(44,50),10)}E${e.substring(50,52)}`),n.bstar=parseFloat(`${e.substring(53,54)}.${parseInt(e.substring(54,59),10)}E${e.substring(59,61)}`),n.inclination=parseFloat(t.substring(8,16)),n.rightAscension=parseFloat(t.substring(17,25)),n.eccentricity=parseFloat(`.${t.substring(26,33)}`),n.perigee=parseFloat(t.substring(34,42)),n.meanAnomaly=parseFloat(t.substring(43,51)),n.meanMotion=parseFloat(t.substring(52,63)),r=n.epochYear<57?n.epochYear+2e3:n.epochYear+1900;const a=(0,i.days2mdhms)(r,n.epochDays),{mon:o,day:s,hr:l,minute:c,sec:u}=a;return n.epoch=new Date(r,o,s,l,c,u),n}function b(e){const{epoch:t,meanMotionDot:n,bstar:r,inclination:i,rightAscension:a,eccentricity:o,perigee:s,meanAnomaly:l,meanMotion:c}=e;let u=String(t.getYear());u>100&&(u=u.substring(1));let d=(h=t,(Date.UTC(h.getFullYear(),h.getMonth(),h.getDate())-Date.UTC(h.getFullYear(),0,0))/24/60/60/1e3);var h;d<100&&(d=`0${d}`);const f=String((t.getHours()/24+t.getMinutes()/1440+t.getSeconds()/86400).toFixed(8)).substring(1);let p=String(n.toFixed(8)).substring(1);n<0&&(p=`-${p.substring(1)}`),n>=0&&(p=` ${p}`);let m=String(r.toExponential(5)).split(".").join("").substring(0,6);r>0&&(m=` ${m.substring(0,5)}`);const g=`1 00000C 00000A   ${u}${d}${f} ${p}  00000-0 ${m}${Math.ceil(Math.log10(Math.abs(r)))} 0  0000`;let v=String(i.toFixed(4));i<100&&(v=` ${v}`);let y=String(a.toFixed(4));a<100&&(y=` ${y}`);const b=String(o.toFixed(7)).substring(2);let x=String(s.toFixed(4));s<100&&(x=` ${x}`);let _=String(l.toFixed(4));return _<100&&(_=` ${_}`),{tle1:g,tle2:`2 00000 ${v} ${y} ${b} ${x} ${_} ${String(c.toPrecision(10))}    00`}}function x(e,t){const n=1440/(2*r.pi);let o=0;const s={error:0};s.satnum=e.substring(2,7),s.epochyr=parseInt(e.substring(18,20),10),s.epochdays=parseFloat(e.substring(20,32)),s.ndot=parseFloat(e.substring(33,43)),s.nddot=parseFloat(`.${parseInt(e.substring(44,50),10)}E${e.substring(50,52)}`),s.bstar=parseFloat(`${e.substring(53,54)}.${parseInt(e.substring(54,59),10)}E${e.substring(59,61)}`),s.inclo=parseFloat(t.substring(8,16)),s.nodeo=parseFloat(t.substring(17,25)),s.ecco=parseFloat(`.${t.substring(26,33)}`),s.argpo=parseFloat(t.substring(34,42)),s.mo=parseFloat(t.substring(43,51)),s.no=parseFloat(t.substring(52,63)),s.notle=s.no,s.no/=n,s.a=(s.no*r.tumin)**(-2/3),s.ndottle=s.ndot,s.ndot/=1440*n,s.nddot/=1440*n*1440,s.inclotle=s.inclo,s.inclo*=r.deg2rad,s.nodeotle=s.nodeo,s.nodeo*=r.deg2rad,s.argpotle=s.argpo,s.argpo*=r.deg2rad,s.motle=s.mo,s.mo*=r.deg2rad,s.alta=s.a*(1+s.ecco)-1,s.altp=s.a*(1-s.ecco)-1,o=s.epochyr<57?s.epochyr+2e3:s.epochyr+1900;const l=(0,i.days2mdhms)(o,s.epochdays),{mon:c,day:u,hr:d,minute:h,sec:f}=l;return s.jdsatepoch=(0,i.jday)(o,c,u,d,h,f),s.epochdate=new Date(o,c,u,d,h,f),s.epochdatetimelocal=new Date(s.epochdate.getTime()-6e4*s.epochdate.getTimezoneOffset()).toISOString().substring(0,19),(0,a.Z)(s,{opsmode:"i",satn:s.satnum,epoch:s.jdsatepoch-2433281.5,xbstar:s.bstar,xecco:s.ecco,xargpo:s.argpo,xinclo:s.inclo,xmo:s.mo,xno:s.no,xnodeo:s.nodeo}),s}function _(e){return`https://api.allorigins.win/raw?url=${e}`}function w(e){const t=[],n=e.split("\n");let r=null;for(let e=0;e<n.length;++e){const i=n[e].trim();0!==i.length&&("1"!==i[0]&&"2"!==i[0]?r={name:i}:"1"===i[0]?r={...r,tles:{...r.tles,tle1:i}}:"2"===i[0]&&(r={...r,tles:{...r.tles,tle2:i}},t.push(r)))}return t}function M(e){return fetch(e).then((e=>{if(e.ok)return e.text().then((e=>JSON.parse(e)))}))}function S(e){return fetch(e).then((e=>{if(e.ok)return e.text().then((e=>w(e)))}))}function A(e,t){const n=function(e,t){const n=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=Array.prototype.slice.call(t,1);return m(r,1440*(p.apply(void 0,g(i))-r.jdsatepoch))}(e.orbit,t);return{x:(i=n.position).x/r.earthRadius,y:i.z/r.earthRadius,z:-i.y/r.earthRadius};var i}(e,t);return{x:n.x,y:n.y,z:n.z}}function E(e){const t=e.getTime()/864e5+2440587-2451545;let n=4.89495042+.0172027923937*t;n>2*Math.PI&&(n-=2*Math.PI);let i=6.240040768+.0172019703436*t;i>2*Math.PI&&(i-=2*Math.PI);const a=n+.033423055*Math.sin(i)+.0003490659*Math.sin(i),o=1.00014-.01671*Math.cos(i)-14e-5*Math.cos(2*i)*(149597870.7/r.earthRadius),s=.40907027-6.981317008e-9*t,l=o*Math.sin(s)*Math.sin(a);return{x:o*Math.cos(a),y:l,z:-o*Math.cos(s)*Math.sin(a)}}function C(e){const t=e/864e5+2440587-2451545;return 2*Math.PI*(.779057273264+1.002737811911355*t)}function T(e,t){const n=e.x-t.x,r=e.y-t.y,i=e.z-t.z;return Math.sqrt(n*n+r*r+i*i)}},949:e=>{e.exports={SIM_LENGTH:1728e5,MIN_SPEED:600,FRAMES:34560,BEAM_DISTANCE:1e3}},549:(e,t,n)=>{const r=n(5232),{earthRadius:i}=n(6150),{SIM_LENGTH:a,FRAMES:o}=n(949),s=new r.Vector3(0,0,0),l=new r.Vector3,c=new r.Vector3,u=new r.Vector3,d=new r.Vector3;function h(e,t,n){return e.load.powerProfiles[t][n]}e.exports={isEclipsed:function(e,t){l.fromArray([t.x,t.y,t.z]),c.fromArray([e.x,e.y,e.z]),u.subVectors(s,l),d.subVectors(c,s);const n=u.angleTo(d),r=l.distanceTo(s),a=l.distanceTo(c);return!(n>Math.atan2(i,r)||a<r)},getChargeState:function(e,t,n,r,i){const a=h(e,n,t),{capacity:o}=e.battery;return r>=1&&a>=0?1:r<=0&&a<=0?0:(r*o+i*a)/o},getNetCurrent:h}},640:(e,t,n)=>{"use strict";var r=n(1742),i={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var n,a,o,s,l,c,u=!1;t||(t={}),n=t.debug||!1;try{if(o=r(),s=document.createRange(),l=document.getSelection(),(c=document.createElement("span")).textContent=e,c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",c.addEventListener("copy",(function(r){if(r.stopPropagation(),t.format)if(r.preventDefault(),void 0===r.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var a=i[t.format]||i.default;window.clipboardData.setData(a,e)}else r.clipboardData.clearData(),r.clipboardData.setData(t.format,e);t.onCopy&&(r.preventDefault(),t.onCopy(r.clipboardData))})),document.body.appendChild(c),s.selectNodeContents(c),l.addRange(s),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");u=!0}catch(r){n&&console.error("unable to copy using execCommand: ",r),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),u=!0}catch(r){n&&console.error("unable to copy using clipboardData: ",r),n&&console.error("falling back to prompt"),a=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(a,e)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(s):l.removeAllRanges()),c&&document.body.removeChild(c),o()}return u}},8690:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(7537),i=n.n(r),a=n(3645),o=n.n(a),s=n(1667),l=n.n(s),c=new URL(n(1652),n.b),u=new URL(n(9501),n.b),d=new URL(n(7319),n.b),h=o()(i()),f=l()(c),p=l()(u),m=l()(d);h.push([e.id,'@font-face{font-family:"Azeret Mono";font-style:normal;font-display:swap;font-weight:400;src:url('+f+') format("woff2"),url('+p+') format("woff");unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:"Azeret Mono";font-style:normal;font-display:swap;font-weight:400;src:url('+m+') format("woff2"),url('+p+') format("woff");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}',"",{version:3,sources:["webpack://./node_modules/@fontsource/azeret-mono/index.css"],names:[],mappings:"AACA,WACE,yBAAA,CACA,iBAAA,CACA,iBAAA,CACA,eAAA,CACA,kHAAA,CACA,0GAAA,CAGF,WACE,yBAAA,CACA,iBAAA,CACA,iBAAA,CACA,eAAA,CACA,kHAAA,CACA,wJAAA",sourcesContent:["/* azeret-mono-latin-ext-400-normal*/\n@font-face {\n  font-family: 'Azeret Mono';\n  font-style: normal;\n  font-display: swap;\n  font-weight: 400;\n  src: url('./files/azeret-mono-latin-ext-400-normal.woff2') format('woff2'), url('./files/azeret-mono-all-400-normal.woff') format('woff');\n  unicode-range: U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;\n}\n/* azeret-mono-latin-400-normal*/\n@font-face {\n  font-family: 'Azeret Mono';\n  font-style: normal;\n  font-display: swap;\n  font-weight: 400;\n  src: url('./files/azeret-mono-latin-400-normal.woff2') format('woff2'), url('./files/azeret-mono-all-400-normal.woff') format('woff');\n  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;\n}\n"],sourceRoot:""}]);const g=h},9:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n(7537),i=n.n(r),a=n(3645),o=n.n(a),s=n(1667),l=n.n(s),c=new URL(n(7467),n.b),u=new URL(n(4332),n.b),d=new URL(n(8853),n.b),h=new URL(n(6753),n.b),f=o()(i()),p=l()(c),m=l()(u),g=l()(d),v=l()(h);f.push([e.id,'@font-face{font-family:"Barlow";font-style:normal;font-display:swap;font-weight:400;src:url('+p+') format("woff2"),url('+m+') format("woff");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:"Barlow";font-style:normal;font-display:swap;font-weight:400;src:url('+g+') format("woff2"),url('+m+') format("woff");unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:"Barlow";font-style:normal;font-display:swap;font-weight:400;src:url('+v+') format("woff2"),url('+m+') format("woff");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}',"",{version:3,sources:["webpack://./node_modules/@fontsource/barlow/400.css"],names:[],mappings:"AACA,WACE,oBAAA,CACA,iBAAA,CACA,iBAAA,CACA,eAAA,CACA,kHAAA,CACA,wGAAA,CAGF,WACE,oBAAA,CACA,iBAAA,CACA,iBAAA,CACA,eAAA,CACA,kHAAA,CACA,0GAAA,CAGF,WACE,oBAAA,CACA,iBAAA,CACA,iBAAA,CACA,eAAA,CACA,kHAAA,CACA,wJAAA",sourcesContent:["/* barlow-vietnamese-400-normal*/\n@font-face {\n  font-family: 'Barlow';\n  font-style: normal;\n  font-display: swap;\n  font-weight: 400;\n  src: url('./files/barlow-vietnamese-400-normal.woff2') format('woff2'), url('./files/barlow-all-400-normal.woff') format('woff');\n  unicode-range: U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB;\n}\n/* barlow-latin-ext-400-normal*/\n@font-face {\n  font-family: 'Barlow';\n  font-style: normal;\n  font-display: swap;\n  font-weight: 400;\n  src: url('./files/barlow-latin-ext-400-normal.woff2') format('woff2'), url('./files/barlow-all-400-normal.woff') format('woff');\n  unicode-range: U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;\n}\n/* barlow-latin-400-normal*/\n@font-face {\n  font-family: 'Barlow';\n  font-style: normal;\n  font-display: swap;\n  font-weight: 400;\n  src: url('./files/barlow-latin-400-normal.woff2') format('woff2'), url('./files/barlow-all-400-normal.woff') format('woff');\n  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;\n}\n"],sourceRoot:""}]);const y=f},1566:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n(7537),i=n.n(r),a=n(3645),o=n.n(a),s=n(1667),l=n.n(s),c=new URL(n(2391),n.b),u=new URL(n(7717),n.b),d=new URL(n(4319),n.b),h=new URL(n(2529),n.b),f=o()(i()),p=l()(c),m=l()(u),g=l()(d),v=l()(h);f.push([e.id,'@font-face{font-family:"Barlow";font-style:normal;font-display:swap;font-weight:700;src:url('+p+') format("woff2"),url('+m+') format("woff");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:"Barlow";font-style:normal;font-display:swap;font-weight:700;src:url('+g+') format("woff2"),url('+m+') format("woff");unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:"Barlow";font-style:normal;font-display:swap;font-weight:700;src:url('+v+') format("woff2"),url('+m+') format("woff");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}',"",{version:3,sources:["webpack://./node_modules/@fontsource/barlow/700.css"],names:[],mappings:"AACA,WACE,oBAAA,CACA,iBAAA,CACA,iBAAA,CACA,eAAA,CACA,kHAAA,CACA,wGAAA,CAGF,WACE,oBAAA,CACA,iBAAA,CACA,iBAAA,CACA,eAAA,CACA,kHAAA,CACA,0GAAA,CAGF,WACE,oBAAA,CACA,iBAAA,CACA,iBAAA,CACA,eAAA,CACA,kHAAA,CACA,wJAAA",sourcesContent:["/* barlow-vietnamese-700-normal*/\n@font-face {\n  font-family: 'Barlow';\n  font-style: normal;\n  font-display: swap;\n  font-weight: 700;\n  src: url('./files/barlow-vietnamese-700-normal.woff2') format('woff2'), url('./files/barlow-all-700-normal.woff') format('woff');\n  unicode-range: U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB;\n}\n/* barlow-latin-ext-700-normal*/\n@font-face {\n  font-family: 'Barlow';\n  font-style: normal;\n  font-display: swap;\n  font-weight: 700;\n  src: url('./files/barlow-latin-ext-700-normal.woff2') format('woff2'), url('./files/barlow-all-700-normal.woff') format('woff');\n  unicode-range: U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;\n}\n/* barlow-latin-700-normal*/\n@font-face {\n  font-family: 'Barlow';\n  font-style: normal;\n  font-display: swap;\n  font-weight: 700;\n  src: url('./files/barlow-latin-700-normal.woff2') format('woff2'), url('./files/barlow-all-700-normal.woff') format('woff');\n  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;\n}\n"],sourceRoot:""}]);const y=f},9089:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(7537),i=n.n(r),a=n(3645),o=n.n(a)()(i());o.push([e.id,".hide{display:none}","",{version:3,sources:["webpack://./src/UI/HUD/HUD.css"],names:[],mappings:"AAAA,MACE,YAAA",sourcesContent:[".hide {\n  display: none;\n}"],sourceRoot:""}]);const s=o},270:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(7537),i=n.n(r),a=n(3645),o=n.n(a)()(i());o.push([e.id,'.gridline-x,.gridline-y{z-index:4;stroke:#fff;stroke-width:.1}.webgl-plot-area{background-color:#381e48}.domain{stroke:#fff}.tick>text{stroke:#fff;fill:#fff;outline:0;font-family:"Barlow","sans-serif";stroke-width:0}.tick>path{stroke:#fff;fill:#fff}.selected{background-color:rgba(255,255,255,.1)}#legend{position:relative;display:block;stroke:#fff;fill:#fff;stroke-width:0px;font-size:.75rem}',"",{version:3,sources:["webpack://./src/UI/PerformanceView/Charts.css"],names:[],mappings:"AACA,wBACE,SAAA,CACA,WAAA,CACA,eAAA,CAGF,iBACE,wBAAA,CAIF,QACE,WAAA,CAGF,WACE,WAAA,CACA,SAAA,CACA,SAAA,CACA,iCAAA,CACA,cAAA,CAEF,WACE,WAAA,CACA,SAAA,CAOF,UACE,qCAAA,CAGF,QACE,iBAAA,CACA,aAAA,CACA,WAAA,CACA,SAAA,CACA,gBAAA,CACA,gBAAA",sourcesContent:["\n.gridline-x, .gridline-y {\n  z-index: 4;\n  stroke: white;\n  stroke-width: 0.1;\n}\n\n.webgl-plot-area {\n  background-color: hsl(276.9,41.9%,20%);\n\n}\n\n.domain {\n  stroke: white;\n}\n\n.tick > text {\n  stroke: white;\n  fill: white;\n  outline: 0;\n  font-family: 'Barlow', 'sans-serif';\n  stroke-width: 0;\n}\n.tick > path{\n  stroke: white;\n  fill: white;\n}\n\n/* .y-label {\n  transform: rotate(-90)\n} */\n\n.selected {\n  background-color: rgba(255,255,255,0.1),\n};\n\n#legend {\n  position: relative;\n  display: block;\n  stroke: white;\n  fill: white;\n  stroke-width: 0px;\n  font-size: 0.75rem;\n}\n\n"],sourceRoot:""}]);const s=o},3645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,i,a){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(o[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);r&&o[u[0]]||(void 0!==a&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=a),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),t.push(u))}},t}},1667:e=>{"use strict";e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},7537:e=>{"use strict";e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),a="/*# ".concat(i," */"),o=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[t].concat(o).concat([a]).join("\n")}return[t].join("\n")}},1077:(e,t,n)=>{"use strict";function r(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}n.d(t,{Z:()=>r})},4355:(e,t,n)=>{"use strict";n.d(t,{Nw:()=>l,ZP:()=>u,ZR:()=>c,ml:()=>s});var r=n(1077),i=n(9173),a=n(2921);const o=(0,i.Z)(r.Z),s=o.right,l=o.left,c=(0,i.Z)(a.Z).center,u=s},9173:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(1077);function i(e){let t=e,n=e;function i(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const a=r+i>>>1;n(e[a],t)<0?r=a+1:i=a}return r}return 1===e.length&&(t=(t,n)=>e(t)-n,n=function(e){return(t,n)=>(0,r.Z)(e(t),n)}(e)),{left:i,center:function(e,n,r,a){null==r&&(r=0),null==a&&(a=e.length);const o=i(e,n,r,a-1);return o>r&&t(e[o-1],n)>-t(e[o],n)?o-1:o},right:function(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const a=r+i>>>1;n(e[a],t)>0?i=a:r=a+1}return r}}}},4204:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Adder:()=>g,InternMap:()=>b.L,InternSet:()=>b.H,ascending:()=>i.Z,bin:()=>O,bisect:()=>r.ZP,bisectCenter:()=>r.ZR,bisectLeft:()=>r.Nw,bisectRight:()=>r.ml,bisector:()=>a.Z,count:()=>o,cross:()=>u,cumsum:()=>d,descending:()=>h,deviation:()=>p,difference:()=>ge,disjoint:()=>ve,every:()=>ue,extent:()=>m,fcumsum:()=>y,filter:()=>he,fsum:()=>v,greatest:()=>te,greatestIndex:()=>ne,group:()=>_,groupSort:()=>L,groups:()=>w,histogram:()=>O,index:()=>A,indexes:()=>E,intersection:()=>be,least:()=>Q,leastIndex:()=>ee,map:()=>fe,max:()=>G.Z,maxIndex:()=>V,mean:()=>j,median:()=>W,merge:()=>X,min:()=>q.Z,minIndex:()=>Y,nice:()=>F,pairs:()=>Z,permute:()=>R,quantile:()=>z.Z,quantileSorted:()=>z.s,quickselect:()=>$.Z,range:()=>K.Z,reduce:()=>pe,reverse:()=>me,rollup:()=>M,rollups:()=>S,scan:()=>re,shuffle:()=>ie,shuffler:()=>ae,some:()=>de,sort:()=>P,subset:()=>_e,sum:()=>oe,superset:()=>xe,thresholdFreedmanDiaconis:()=>U,thresholdScott:()=>H,thresholdSturges:()=>N,tickIncrement:()=>B.G9,tickStep:()=>B.ly,ticks:()=>B.ZP,transpose:()=>se,union:()=>we,variance:()=>f,zip:()=>ce});var r=n(4355),i=n(1077),a=n(9173);function o(e,t){let n=0;if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&++n;else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(i=+i)>=i&&++n}return n}function s(e){return 0|e.length}function l(e){return!(e>0)}function c(e){return"object"!=typeof e||"length"in e?e:Array.from(e)}function u(...e){const t="function"==typeof e[e.length-1]&&function(e){return t=>e(...t)}(e.pop()),n=(e=e.map(c)).map(s),r=e.length-1,i=new Array(r+1).fill(0),a=[];if(r<0||n.some(l))return a;for(;;){a.push(i.map(((t,n)=>e[n][t])));let o=r;for(;++i[o]===n[o];){if(0===o)return t?a.map(t):a;i[o--]=0}}}function d(e,t){var n=0,r=0;return Float64Array.from(e,void 0===t?e=>n+=+e||0:i=>n+=+t(i,r++,e)||0)}function h(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function f(e,t){let n,r=0,i=0,a=0;if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(n=t-i,i+=n/++r,a+=n*(t-i));else{let o=-1;for(let s of e)null!=(s=t(s,++o,e))&&(s=+s)>=s&&(n=s-i,i+=n/++r,a+=n*(s-i))}if(r>1)return a/(r-1)}function p(e,t){const n=f(e,t);return n?Math.sqrt(n):n}function m(e,t){let n,r;if(void 0===t)for(const t of e)null!=t&&(void 0===n?t>=t&&(n=r=t):(n>t&&(n=t),r<t&&(r=t)));else{let i=-1;for(let a of e)null!=(a=t(a,++i,e))&&(void 0===n?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class g{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const t=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=t[r],a=e+i,o=Math.abs(e)<Math.abs(i)?e-(a-i):i-(a-e);o&&(t[n++]=o),e=a}return t[n]=e,this._n=n+1,this}valueOf(){const e=this._partials;let t,n,r,i=this._n,a=0;if(i>0){for(a=e[--i];i>0&&(t=a,n=e[--i],a=t+n,r=n-(a-t),!r););i>0&&(r<0&&e[i-1]<0||r>0&&e[i-1]>0)&&(n=2*r,t=a+n,n==t-a&&(a=t))}return a}}function v(e,t){const n=new g;if(void 0===t)for(let t of e)(t=+t)&&n.add(t);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&n.add(i)}return+n}function y(e,t){const n=new g;let r=-1;return Float64Array.from(e,void 0===t?e=>n.add(+e||0):i=>n.add(+t(i,++r,e)||0))}var b=n(8419);function x(e){return e}function _(e,...t){return T(e,x,x,t)}function w(e,...t){return T(e,Array.from,x,t)}function M(e,t,...n){return T(e,x,t,n)}function S(e,t,...n){return T(e,Array.from,t,n)}function A(e,...t){return T(e,x,C,t)}function E(e,...t){return T(e,Array.from,C,t)}function C(e){if(1!==e.length)throw new Error("duplicate key");return e[0]}function T(e,t,n,r){return function e(i,a){if(a>=r.length)return n(i);const o=new b.L,s=r[a++];let l=-1;for(const e of i){const t=s(e,++l,i),n=o.get(t);n?n.push(e):o.set(t,[e])}for(const[t,n]of o)o.set(t,e(n,a));return t(o)}(e,0)}function R(e,t){return Array.from(t,(t=>e[t]))}function P(e,...t){if("function"!=typeof e[Symbol.iterator])throw new TypeError("values is not iterable");e=Array.from(e);let[n=i.Z]=t;if(1===n.length||t.length>1){const r=Uint32Array.from(e,((e,t)=>t));return t.length>1?(t=t.map((t=>e.map(t))),r.sort(((e,n)=>{for(const r of t){const t=(0,i.Z)(r[e],r[n]);if(t)return t}}))):(n=e.map(n),r.sort(((e,t)=>(0,i.Z)(n[e],n[t])))),R(e,r)}return e.sort(n)}function L(e,t,n){return(1===t.length?P(M(e,t,n),(([e,t],[n,r])=>(0,i.Z)(t,r)||(0,i.Z)(e,n))):P(_(e,n),(([e,n],[r,a])=>t(n,a)||(0,i.Z)(e,r)))).map((([e])=>e))}var D=Array.prototype,I=D.slice;function k(e){return function(){return e}}D.map;var B=n(7614);function F(e,t,n){let r;for(;;){const i=(0,B.G9)(e,t,n);if(i===r||0===i||!isFinite(i))return[e,t];i>0?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),r=i}}function N(e){return Math.ceil(Math.log(o(e))/Math.LN2)+1}function O(){var e=x,t=m,n=N;function i(i){Array.isArray(i)||(i=Array.from(i));var a,o,s=i.length,l=new Array(s);for(a=0;a<s;++a)l[a]=e(i[a],a,i);var c=t(l),u=c[0],d=c[1],h=n(l,u,d);if(!Array.isArray(h)){const e=d,n=+h;if(t===m&&([u,d]=F(u,d,n)),(h=(0,B.ZP)(u,d,n))[h.length-1]>=d)if(e>=d&&t===m){const e=(0,B.G9)(u,d,n);isFinite(e)&&(e>0?d=(Math.floor(d/e)+1)*e:e<0&&(d=(Math.ceil(d*-e)+1)/-e))}else h.pop()}for(var f=h.length;h[0]<=u;)h.shift(),--f;for(;h[f-1]>d;)h.pop(),--f;var p,g=new Array(f+1);for(a=0;a<=f;++a)(p=g[a]=[]).x0=a>0?h[a-1]:u,p.x1=a<f?h[a]:d;for(a=0;a<s;++a)u<=(o=l[a])&&o<=d&&g[(0,r.ZP)(h,o,0,f)].push(i[a]);return g}return i.value=function(t){return arguments.length?(e="function"==typeof t?t:k(t),i):e},i.domain=function(e){return arguments.length?(t="function"==typeof e?e:k([e[0],e[1]]),i):t},i.thresholds=function(e){return arguments.length?(n="function"==typeof e?e:Array.isArray(e)?k(I.call(e)):k(e),i):n},i}var z=n(1461);function U(e,t,n){return Math.ceil((n-t)/(2*((0,z.Z)(e,.75)-(0,z.Z)(e,.25))*Math.pow(o(e),-1/3)))}function H(e,t,n){return Math.ceil((n-t)/(3.5*p(e)*Math.pow(o(e),-1/3)))}var G=n(8823);function V(e,t){let n,r=-1,i=-1;if(void 0===t)for(const t of e)++i,null!=t&&(n<t||void 0===n&&t>=t)&&(n=t,r=i);else for(let a of e)null!=(a=t(a,++i,e))&&(n<a||void 0===n&&a>=a)&&(n=a,r=i);return r}function j(e,t){let n=0,r=0;if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(++n,r+=t);else{let i=-1;for(let a of e)null!=(a=t(a,++i,e))&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n}function W(e,t){return(0,z.Z)(e,.5,t)}function X(e){return Array.from(function*(e){for(const t of e)yield*t}(e))}var q=n(7622);function Y(e,t){let n,r=-1,i=-1;if(void 0===t)for(const t of e)++i,null!=t&&(n>t||void 0===n&&t>=t)&&(n=t,r=i);else for(let a of e)null!=(a=t(a,++i,e))&&(n>a||void 0===n&&a>=a)&&(n=a,r=i);return r}function Z(e,t=J){const n=[];let r,i=!1;for(const a of e)i&&n.push(t(r,a)),r=a,i=!0;return n}function J(e,t){return[e,t]}var $=n(4781),K=n(4893);function Q(e,t=i.Z){let n,r=!1;if(1===t.length){let a;for(const o of e){const e=t(o);(r?(0,i.Z)(e,a)<0:0===(0,i.Z)(e,e))&&(n=o,a=e,r=!0)}}else for(const i of e)(r?t(i,n)<0:0===t(i,i))&&(n=i,r=!0);return n}function ee(e,t=i.Z){if(1===t.length)return Y(e,t);let n,r=-1,a=-1;for(const i of e)++a,(r<0?0===t(i,i):t(i,n)<0)&&(n=i,r=a);return r}function te(e,t=i.Z){let n,r=!1;if(1===t.length){let a;for(const o of e){const e=t(o);(r?(0,i.Z)(e,a)>0:0===(0,i.Z)(e,e))&&(n=o,a=e,r=!0)}}else for(const i of e)(r?t(i,n)>0:0===t(i,i))&&(n=i,r=!0);return n}function ne(e,t=i.Z){if(1===t.length)return V(e,t);let n,r=-1,a=-1;for(const i of e)++a,(r<0?0===t(i,i):t(i,n)>0)&&(n=i,r=a);return r}function re(e,t){const n=ee(e,t);return n<0?void 0:n}const ie=ae(Math.random);function ae(e){return function(t,n=0,r=t.length){let i=r-(n=+n);for(;i;){const r=e()*i--|0,a=t[i+n];t[i+n]=t[r+n],t[r+n]=a}return t}}function oe(e,t){let n=0;if(void 0===t)for(let t of e)(t=+t)&&(n+=t);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function se(e){if(!(i=e.length))return[];for(var t=-1,n=(0,q.Z)(e,le),r=new Array(n);++t<n;)for(var i,a=-1,o=r[t]=new Array(i);++a<i;)o[a]=e[a][t];return r}function le(e){return e.length}function ce(){return se(arguments)}function ue(e,t){if("function"!=typeof t)throw new TypeError("test is not a function");let n=-1;for(const r of e)if(!t(r,++n,e))return!1;return!0}function de(e,t){if("function"!=typeof t)throw new TypeError("test is not a function");let n=-1;for(const r of e)if(t(r,++n,e))return!0;return!1}function he(e,t){if("function"!=typeof t)throw new TypeError("test is not a function");const n=[];let r=-1;for(const i of e)t(i,++r,e)&&n.push(i);return n}function fe(e,t){if("function"!=typeof e[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof t)throw new TypeError("mapper is not a function");return Array.from(e,((n,r)=>t(n,r,e)))}function pe(e,t,n){if("function"!=typeof t)throw new TypeError("reducer is not a function");const r=e[Symbol.iterator]();let i,a,o=-1;if(arguments.length<3){if(({done:i,value:n}=r.next()),i)return;++o}for(;({done:i,value:a}=r.next()),!i;)n=t(n,a,++o,e);return n}function me(e){if("function"!=typeof e[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(e).reverse()}function ge(e,...t){e=new Set(e);for(const n of t)for(const t of n)e.delete(t);return e}function ve(e,t){const n=t[Symbol.iterator](),r=new Set;for(const t of e){if(r.has(t))return!1;let e,i;for(;({value:e,done:i}=n.next())&&!i;){if(Object.is(t,e))return!1;r.add(e)}}return!0}function ye(e){return e instanceof Set?e:new Set(e)}function be(e,...t){e=new Set(e),t=t.map(ye);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function xe(e,t){const n=e[Symbol.iterator](),r=new Set;for(const e of t){if(r.has(e))continue;let t,i;for(;({value:t,done:i}=n.next());){if(i)return!1;if(r.add(t),Object.is(e,t))break}}return!0}function _e(e,t){return xe(t,e)}function we(...e){const t=new Set;for(const n of e)for(const e of n)t.add(e);return t}},8823:(e,t,n)=>{"use strict";function r(e,t){let n;if(void 0===t)for(const t of e)null!=t&&(n<t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}n.d(t,{Z:()=>r})},7622:(e,t,n)=>{"use strict";function r(e,t){let n;if(void 0===t)for(const t of e)null!=t&&(n>t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}n.d(t,{Z:()=>r})},2921:(e,t,n)=>{"use strict";function r(e){return null===e?NaN:+e}function*i(e,t){if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(yield t);else{let n=-1;for(let r of e)null!=(r=t(r,++n,e))&&(r=+r)>=r&&(yield r)}}n.d(t,{K:()=>i,Z:()=>r})},1461:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s,s:()=>l});var r=n(8823),i=n(7622),a=n(4781),o=n(2921);function s(e,t,n){if(s=(e=Float64Array.from((0,o.K)(e,n))).length){if((t=+t)<=0||s<2)return(0,i.Z)(e);if(t>=1)return(0,r.Z)(e);var s,l=(s-1)*t,c=Math.floor(l),u=(0,r.Z)((0,a.Z)(e,c).subarray(0,c+1));return u+((0,i.Z)(e.subarray(c+1))-u)*(l-c)}}function l(e,t,n=o.Z){if(r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),s=+n(e[a],a,e);return s+(+n(e[a+1],a+1,e)-s)*(i-a)}}},4781:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(1077);function i(e,t,n=0,o=e.length-1,s=r.Z){for(;o>n;){if(o-n>600){const r=o-n+1,a=t-n+1,l=Math.log(r),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(r-c)/r)*(a-r/2<0?-1:1);i(e,t,Math.max(n,Math.floor(t-a*c/r+u)),Math.min(o,Math.floor(t+(r-a)*c/r+u)),s)}const r=e[t];let l=n,c=o;for(a(e,n,t),s(e[o],r)>0&&a(e,n,o);l<c;){for(a(e,l,c),++l,--c;s(e[l],r)<0;)++l;for(;s(e[c],r)>0;)--c}0===s(e[n],r)?a(e,n,c):(++c,a(e,c,o)),c<=t&&(n=c+1),t<=c&&(o=c-1)}return e}function a(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}},4893:(e,t,n)=>{"use strict";function r(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),a=new Array(i);++r<i;)a[r]=e+r*n;return a}n.d(t,{Z:()=>r})},7614:(e,t,n)=>{"use strict";n.d(t,{G9:()=>s,ZP:()=>o,ly:()=>l});var r=Math.sqrt(50),i=Math.sqrt(10),a=Math.sqrt(2);function o(e,t,n){var r,i,a,o,l=-1;if(n=+n,(e=+e)==(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(o=s(e,t,n))||!isFinite(o))return[];if(o>0){let n=Math.round(e/o),r=Math.round(t/o);for(n*o<e&&++n,r*o>t&&--r,a=new Array(i=r-n+1);++l<i;)a[l]=(n+l)*o}else{o=-o;let n=Math.round(e*o),r=Math.round(t*o);for(n/o<e&&++n,r/o>t&&--r,a=new Array(i=r-n+1);++l<i;)a[l]=(n+l)/o}return r&&a.reverse(),a}function s(e,t,n){var o=(t-e)/Math.max(0,n),s=Math.floor(Math.log(o)/Math.LN10),l=o/Math.pow(10,s);return s>=0?(l>=r?10:l>=i?5:l>=a?2:1)*Math.pow(10,s):-Math.pow(10,-s)/(l>=r?10:l>=i?5:l>=a?2:1)}function l(e,t,n){var o=Math.abs(t-e)/Math.max(0,n),s=Math.pow(10,Math.floor(Math.log(o)/Math.LN10)),l=o/s;return l>=r?s*=10:l>=i?s*=5:l>=a&&(s*=2),t<e?-s:s}},6372:(e,t,n)=>{"use strict";n.d(t,{B8:()=>S,Il:()=>i,J5:()=>o,SU:()=>M,Ss:()=>A,ZP:()=>x,xV:()=>a});var r=n(4087);function i(){}var a=.7,o=1/a,s="\\s*([+-]?\\d+)\\s*",l="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",c="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",u=/^#([0-9a-f]{3,8})$/,d=new RegExp("^rgb\\("+[s,s,s]+"\\)$"),h=new RegExp("^rgb\\("+[c,c,c]+"\\)$"),f=new RegExp("^rgba\\("+[s,s,s,l]+"\\)$"),p=new RegExp("^rgba\\("+[c,c,c,l]+"\\)$"),m=new RegExp("^hsl\\("+[l,c,c]+"\\)$"),g=new RegExp("^hsla\\("+[l,c,c,l]+"\\)$"),v={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function y(){return this.rgb().formatHex()}function b(){return this.rgb().formatRgb()}function x(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=u.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?_(t):3===n?new A(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?w(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?w(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=d.exec(e))?new A(t[1],t[2],t[3],1):(t=h.exec(e))?new A(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=f.exec(e))?w(t[1],t[2],t[3],t[4]):(t=p.exec(e))?w(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=m.exec(e))?R(t[1],t[2]/100,t[3]/100,1):(t=g.exec(e))?R(t[1],t[2]/100,t[3]/100,t[4]):v.hasOwnProperty(e)?_(v[e]):"transparent"===e?new A(NaN,NaN,NaN,0):null}function _(e){return new A(e>>16&255,e>>8&255,255&e,1)}function w(e,t,n,r){return r<=0&&(e=t=n=NaN),new A(e,t,n,r)}function M(e){return e instanceof i||(e=x(e)),e?new A((e=e.rgb()).r,e.g,e.b,e.opacity):new A}function S(e,t,n,r){return 1===arguments.length?M(e):new A(e,t,n,null==r?1:r)}function A(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function E(){return"#"+T(this.r)+T(this.g)+T(this.b)}function C(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function T(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function R(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new L(e,t,n,r)}function P(e){if(e instanceof L)return new L(e.h,e.s,e.l,e.opacity);if(e instanceof i||(e=x(e)),!e)return new L;if(e instanceof L)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,l=o-a,c=(o+a)/2;return l?(s=t===o?(n-r)/l+6*(n<r):n===o?(r-t)/l+2:(t-n)/l+4,l/=c<.5?o+a:2-o-a,s*=60):l=c>0&&c<1?0:s,new L(s,l,c,e.opacity)}function L(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function D(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}(0,r.Z)(i,x,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:y,formatHex:y,formatHsl:function(){return P(this).formatHsl()},formatRgb:b,toString:b}),(0,r.Z)(A,S,(0,r.l)(i,{brighter:function(e){return e=null==e?o:Math.pow(o,e),new A(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?a:Math.pow(a,e),new A(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:E,formatHex:E,formatRgb:C,toString:C})),(0,r.Z)(L,(function(e,t,n,r){return 1===arguments.length?P(e):new L(e,t,n,null==r?1:r)}),(0,r.l)(i,{brighter:function(e){return e=null==e?o:Math.pow(o,e),new L(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?a:Math.pow(a,e),new L(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new A(D(e>=240?e-240:e+120,i,r),D(e,i,r),D(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}))},3861:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(4087),i=n(6372),a=Math.PI/180,o=180/Math.PI,s=-.14861,l=1.78277,c=-.29227,u=-.90649,d=1.97294,h=d*u,f=d*l,p=l*c-u*s;function m(e){if(e instanceof v)return new v(e.h,e.s,e.l,e.opacity);e instanceof i.Ss||(e=(0,i.SU)(e));var t=e.r/255,n=e.g/255,r=e.b/255,a=(p*r+h*t-f*n)/(p+h-f),s=r-a,l=(d*(n-a)-c*s)/u,m=Math.sqrt(l*l+s*s)/(d*a*(1-a)),g=m?Math.atan2(l,s)*o-120:NaN;return new v(g<0?g+360:g,m,a,e.opacity)}function g(e,t,n,r){return 1===arguments.length?m(e):new v(e,t,n,null==r?1:r)}function v(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}(0,r.Z)(v,g,(0,r.l)(i.Il,{brighter:function(e){return e=null==e?i.J5:Math.pow(i.J5,e),new v(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?i.xV:Math.pow(i.xV,e),new v(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*a,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),o=Math.sin(e);return new i.Ss(255*(t+n*(s*r+l*o)),255*(t+n*(c*r+u*o)),255*(t+n*(d*r)),this.opacity)}}))},4087:(e,t,n)=>{"use strict";function r(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function i(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}n.d(t,{Z:()=>r,l:()=>i})},2626:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r={value:function(){}};function i(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new a(r)}function a(e){this._=e}function o(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function s(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function l(e,t,n){for(var i=0,a=e.length;i<a;++i)if(e[i].name===t){e[i]=r,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=n&&e.push({name:t,value:n}),e}a.prototype=i.prototype={constructor:a,on:function(e,t){var n,r=this._,i=o(e+"",r),a=-1,c=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<c;)if(n=(e=i[a]).type)r[n]=l(r[n],e.name,t);else if(null==t)for(n in r)r[n]=l(r[n],e.name,null);return this}for(;++a<c;)if((n=(e=i[a]).type)&&(n=s(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new a(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,n=(r=this._[e]).length;a<n;++a)r[a].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};const c=i},8258:(e,t,n)=>{"use strict";n.r(t),n.d(t,{dispatch:()=>r.Z});var r=n(2626)},5910:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>s,wx:()=>a,yi:()=>o});var r=n(5302);function i(e,t){return function(n){return e+n*t}}function a(e,t){var n=t-e;return n?i(e,n>180||n<-180?n-360*Math.round(n/360):n):(0,r.Z)(isNaN(e)?t:e)}function o(e){return 1==(e=+e)?s:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):(0,r.Z)(isNaN(t)?n:t)}}function s(e,t){var n=t-e;return n?i(e,n):(0,r.Z)(isNaN(e)?t:e)}},5302:(e,t,n)=>{"use strict";function r(e){return function(){return e}}n.d(t,{Z:()=>r})},8499:(e,t,n)=>{"use strict";n.d(t,{B:()=>o});var r=n(3861),i=n(5910);function a(e){return function t(n){function a(t,a){var o=e((t=(0,r.Z)(t)).h,(a=(0,r.Z)(a)).h),s=(0,i.ZP)(t.s,a.s),l=(0,i.ZP)(t.l,a.l),c=(0,i.ZP)(t.opacity,a.opacity);return function(e){return t.h=o(e),t.s=s(e),t.l=l(Math.pow(e,n)),t.opacity=c(e),t+""}}return n=+n,a.gamma=t,a}(1)}a(i.wx);var o=a(i.ZP)},3626:(e,t,n)=>{"use strict";function r(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}n.d(t,{Z:()=>r})},3474:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>o,hD:()=>l});var r=n(6372);function i(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}var a=n(5910);const o=function e(t){var n=(0,a.yi)(t);function i(e,t){var i=n((e=(0,r.B8)(e)).r,(t=(0,r.B8)(t)).r),o=n(e.g,t.g),s=n(e.b,t.b),l=(0,a.ZP)(e.opacity,t.opacity);return function(t){return e.r=i(t),e.g=o(t),e.b=s(t),e.opacity=l(t),e+""}}return i.gamma=e,i}(1);function s(e){return function(t){var n,i,a=t.length,o=new Array(a),s=new Array(a),l=new Array(a);for(n=0;n<a;++n)i=(0,r.B8)(t[n]),o[n]=i.r||0,s[n]=i.g||0,l[n]=i.b||0;return o=e(o),s=e(s),l=e(l),i.opacity=1,function(e){return i.r=o(e),i.g=s(e),i.b=l(e),i+""}}}var l=s((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[r],o=e[r+1],s=r>0?e[r-1]:2*a-o,l=r<t-1?e[r+2]:2*o-a;return i((n-r/t)*t,s,a,o,l)}}));s((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),a=e[(r+t-1)%t],o=e[r%t],s=e[(r+1)%t],l=e[(r+2)%t];return i((n-r/t)*t,a,o,s,l)}}))},5720:(e,t,n)=>{"use strict";function r(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}n.d(t,{Z:()=>r})},9843:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(3626),i=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,a=new RegExp(i.source,"g");function o(e,t){var n,o,s,l=i.lastIndex=a.lastIndex=0,c=-1,u=[],d=[];for(e+="",t+="";(n=i.exec(e))&&(o=a.exec(t));)(s=o.index)>l&&(s=t.slice(l,s),u[c]?u[c]+=s:u[++c]=s),(n=n[0])===(o=o[0])?u[c]?u[c]+=o:u[++c]=o:(u[++c]=null,d.push({i:c,x:(0,r.Z)(n,o)})),l=a.lastIndex;return l<t.length&&(s=t.slice(l),u[c]?u[c]+=s:u[++c]=s),u.length<2?d[0]?function(e){return function(t){return e(t)+""}}(d[0].x):function(e){return function(){return e}}(t):(t=d.length,function(e){for(var n,r=0;r<t;++r)u[(n=d[r]).i]=n.x(e);return u.join("")})}},3172:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(6372),i=n(3474);function a(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=h(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<i;++n)o[n]=a[n](e);return o}}function o(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}var s=n(3626);function l(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=h(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var c=n(9843),u=n(5302);function d(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(a){for(n=0;n<r;++n)i[n]=e[n]*(1-a)+t[n]*a;return i}}function h(e,t){var n,h,f=typeof t;return null==t||"boolean"===f?(0,u.Z)(t):("number"===f?s.Z:"string"===f?(n=(0,r.ZP)(t))?(t=n,i.ZP):c.Z:t instanceof r.ZP?i.ZP:t instanceof Date?o:(h=t,!ArrayBuffer.isView(h)||h instanceof DataView?Array.isArray(t)?a:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?l:s.Z:d))(e,t)}},208:(e,t,n)=>{"use strict";n.r(t),n.d(t,{path:()=>r.Z});var r=n(1108)},1108:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=Math.PI,i=2*r,a=1e-6,o=i-a;function s(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function l(){return new s}s.prototype=l.prototype={constructor:s,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(e,t,n,i,o){e=+e,t=+t,n=+n,i=+i,o=+o;var s=this._x1,l=this._y1,c=n-e,u=i-t,d=s-e,h=l-t,f=d*d+h*h;if(o<0)throw new Error("negative radius: "+o);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>a)if(Math.abs(h*c-u*d)>a&&o){var p=n-s,m=i-l,g=c*c+u*u,v=p*p+m*m,y=Math.sqrt(g),b=Math.sqrt(f),x=o*Math.tan((r-Math.acos((g+f-v)/(2*y*b)))/2),_=x/b,w=x/y;Math.abs(_-1)>a&&(this._+="L"+(e+_*d)+","+(t+_*h)),this._+="A"+o+","+o+",0,0,"+ +(h*p>d*m)+","+(this._x1=e+w*c)+","+(this._y1=t+w*u)}else this._+="L"+(this._x1=e)+","+(this._y1=t)},arc:function(e,t,n,s,l,c){e=+e,t=+t,c=!!c;var u=(n=+n)*Math.cos(s),d=n*Math.sin(s),h=e+u,f=t+d,p=1^c,m=c?s-l:l-s;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+h+","+f:(Math.abs(this._x1-h)>a||Math.abs(this._y1-f)>a)&&(this._+="L"+h+","+f),n&&(m<0&&(m=m%i+i),m>o?this._+="A"+n+","+n+",0,1,"+p+","+(e-u)+","+(t-d)+"A"+n+","+n+",0,1,"+p+","+(this._x1=h)+","+(this._y1=f):m>a&&(this._+="A"+n+","+n+",0,"+ +(m>=r)+","+p+","+(this._x1=e+n*Math.cos(l))+","+(this._y1=t+n*Math.sin(l))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};const c=l},1832:(e,t,n)=>{"use strict";n.r(t),n.d(t,{randomBates:()=>c,randomBernoulli:()=>h,randomBeta:()=>m,randomBinomial:()=>g,randomCauchy:()=>y,randomExponential:()=>u,randomGamma:()=>p,randomGeometric:()=>f,randomInt:()=>a,randomIrwinHall:()=>l,randomLcg:()=>w,randomLogNormal:()=>s,randomLogistic:()=>b,randomNormal:()=>o,randomPareto:()=>d,randomPoisson:()=>x,randomUniform:()=>i,randomWeibull:()=>v});const r=Math.random,i=function e(t){function n(e,n){return e=null==e?0:+e,n=null==n?1:+n,1===arguments.length?(n=e,e=0):n-=e,function(){return t()*n+e}}return n.source=e,n}(r),a=function e(t){function n(e,n){return arguments.length<2&&(n=e,e=0),e=Math.floor(e),n=Math.floor(n)-e,function(){return Math.floor(t()*n+e)}}return n.source=e,n}(r),o=function e(t){function n(e,n){var r,i;return e=null==e?0:+e,n=null==n?1:+n,function(){var a;if(null!=r)a=r,r=null;else do{r=2*t()-1,a=2*t()-1,i=r*r+a*a}while(!i||i>1);return e+n*a*Math.sqrt(-2*Math.log(i)/i)}}return n.source=e,n}(r),s=function e(t){var n=o.source(t);function r(){var e=n.apply(this,arguments);return function(){return Math.exp(e())}}return r.source=e,r}(r),l=function e(t){function n(e){return(e=+e)<=0?()=>0:function(){for(var n=0,r=e;r>1;--r)n+=t();return n+r*t()}}return n.source=e,n}(r),c=function e(t){var n=l.source(t);function r(e){if(0==(e=+e))return t;var r=n(e);return function(){return r()/e}}return r.source=e,r}(r),u=function e(t){function n(e){return function(){return-Math.log1p(-t())/e}}return n.source=e,n}(r),d=function e(t){function n(e){if((e=+e)<0)throw new RangeError("invalid alpha");return e=1/-e,function(){return Math.pow(1-t(),e)}}return n.source=e,n}(r),h=function e(t){function n(e){if((e=+e)<0||e>1)throw new RangeError("invalid p");return function(){return Math.floor(t()+e)}}return n.source=e,n}(r),f=function e(t){function n(e){if((e=+e)<0||e>1)throw new RangeError("invalid p");return 0===e?()=>1/0:1===e?()=>1:(e=Math.log1p(-e),function(){return 1+Math.floor(Math.log1p(-t())/e)})}return n.source=e,n}(r),p=function e(t){var n=o.source(t)();function r(e,r){if((e=+e)<0)throw new RangeError("invalid k");if(0===e)return()=>0;if(r=null==r?1:+r,1===e)return()=>-Math.log1p(-t())*r;var i=(e<1?e+1:e)-1/3,a=1/(3*Math.sqrt(i)),o=e<1?()=>Math.pow(t(),1/e):()=>1;return function(){do{do{var e=n(),s=1+a*e}while(s<=0);s*=s*s;var l=1-t()}while(l>=1-.0331*e*e*e*e&&Math.log(l)>=.5*e*e+i*(1-s+Math.log(s)));return i*s*o()*r}}return r.source=e,r}(r),m=function e(t){var n=p.source(t);function r(e,t){var r=n(e),i=n(t);return function(){var e=r();return 0===e?0:e/(e+i())}}return r.source=e,r}(r),g=function e(t){var n=f.source(t),r=m.source(t);function i(e,t){return e=+e,(t=+t)>=1?()=>e:t<=0?()=>0:function(){for(var i=0,a=e,o=t;a*o>16&&a*(1-o)>16;){var s=Math.floor((a+1)*o),l=r(s,a-s+1)();l<=o?(i+=s,a-=s,o=(o-l)/(1-l)):(a=s-1,o/=l)}for(var c=o<.5,u=n(c?o:1-o),d=u(),h=0;d<=a;++h)d+=u();return i+(c?h:a-h)}}return i.source=e,i}(r),v=function e(t){function n(e,n,r){var i;return 0==(e=+e)?i=e=>-Math.log(e):(e=1/e,i=t=>Math.pow(t,e)),n=null==n?0:+n,r=null==r?1:+r,function(){return n+r*i(-Math.log1p(-t()))}}return n.source=e,n}(r),y=function e(t){function n(e,n){return e=null==e?0:+e,n=null==n?1:+n,function(){return e+n*Math.tan(Math.PI*t())}}return n.source=e,n}(r),b=function e(t){function n(e,n){return e=null==e?0:+e,n=null==n?1:+n,function(){var r=t();return e+n*Math.log(r/(1-r))}}return n.source=e,n}(r),x=function e(t){var n=p.source(t),r=g.source(t);function i(e){return function(){for(var i=0,a=e;a>16;){var o=Math.floor(.875*a),s=n(o)();if(s>a)return i+r(o-1,a/s)();i+=o,a-=s}for(var l=-Math.log1p(-t()),c=0;l<=a;++c)l-=Math.log1p(-t());return i+c}}return i.source=e,i}(r),_=1/4294967296;function w(e=Math.random()){let t=0|(0<=e&&e<1?e/_:Math.abs(e));return()=>(t=1664525*t+1013904223|0,_*(t>>>0))}},3891:(e,t,n)=>{"use strict";n.r(t),n.d(t,{scaleBand:()=>l,scaleDiverging:()=>mn,scaleDivergingLog:()=>gn,scaleDivergingPow:()=>yn,scaleDivergingSqrt:()=>bn,scaleDivergingSymlog:()=>vn,scaleIdentity:()=>G,scaleImplicit:()=>o,scaleLinear:()=>H,scaleLog:()=>$,scaleOrdinal:()=>s,scalePoint:()=>u,scalePow:()=>oe,scaleQuantile:()=>fe,scaleQuantize:()=>pe,scaleRadial:()=>ue,scaleSequential:()=>sn,scaleSequentialLog:()=>ln,scaleSequentialPow:()=>un,scaleSequentialQuantile:()=>hn,scaleSequentialSqrt:()=>dn,scaleSequentialSymlog:()=>cn,scaleSqrt:()=>se,scaleSymlog:()=>te,scaleThreshold:()=>me,scaleTime:()=>Qt,scaleUtc:()=>rn,tickFormat:()=>z});var r=n(4893);function i(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function a(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}const o=Symbol("implicit");function s(){var e=new Map,t=[],n=[],r=o;function a(i){var a=i+"",s=e.get(a);if(!s){if(r!==o)return r;e.set(a,s=t.push(i))}return n[(s-1)%n.length]}return a.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Map;for(const r of n){const n=r+"";e.has(n)||e.set(n,t.push(r))}return a},a.range=function(e){return arguments.length?(n=Array.from(e),a):n.slice()},a.unknown=function(e){return arguments.length?(r=e,a):r},a.copy=function(){return s(t,n).unknown(r)},i.apply(a,arguments),a}function l(){var e,t,n=s().unknown(void 0),a=n.domain,o=n.range,c=0,u=1,d=!1,h=0,f=0,p=.5;function m(){var n=a().length,i=u<c,s=i?u:c,l=i?c:u;e=(l-s)/Math.max(1,n-h+2*f),d&&(e=Math.floor(e)),s+=(l-s-e*(n-h))*p,t=e*(1-h),d&&(s=Math.round(s),t=Math.round(t));var m=(0,r.Z)(n).map((function(t){return s+e*t}));return o(i?m.reverse():m)}return delete n.unknown,n.domain=function(e){return arguments.length?(a(e),m()):a()},n.range=function(e){return arguments.length?([c,u]=e,c=+c,u=+u,m()):[c,u]},n.rangeRound=function(e){return[c,u]=e,c=+c,u=+u,d=!0,m()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(d=!!e,m()):d},n.padding=function(e){return arguments.length?(h=Math.min(1,f=+e),m()):h},n.paddingInner=function(e){return arguments.length?(h=Math.min(1,e),m()):h},n.paddingOuter=function(e){return arguments.length?(f=+e,m()):f},n.align=function(e){return arguments.length?(p=Math.max(0,Math.min(1,e)),m()):p},n.copy=function(){return l(a(),[c,u]).round(d).paddingInner(h).paddingOuter(f).align(p)},i.apply(m(),arguments)}function c(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return c(t())},e}function u(){return c(l.apply(null,arguments).paddingInner(1))}var d=n(7614),h=n(4355),f=n(3172),p=n(3626),m=n(5720);function g(e){return+e}var v=[0,1];function y(e){return e}function b(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function x(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=b(i,r),a=n(o,a)):(r=b(r,i),a=n(a,o)),function(e){return a(r(e))}}function _(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=b(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(t){var n=(0,h.ZP)(e,t,1,r)-1;return a[n](i[n](t))}}function w(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function M(){var e,t,n,r,i,a,o=v,s=v,l=f.Z,c=y;function u(){var e,t,n,l=Math.min(o.length,s.length);return c!==y&&(e=o[0],t=o[l-1],e>t&&(n=e,e=t,t=n),c=function(n){return Math.max(e,Math.min(t,n))}),r=l>2?_:x,i=a=null,d}function d(t){return null==t||isNaN(t=+t)?n:(i||(i=r(o.map(e),s,l)))(e(c(t)))}return d.invert=function(n){return c(t((a||(a=r(s,o.map(e),p.Z)))(n)))},d.domain=function(e){return arguments.length?(o=Array.from(e,g),u()):o.slice()},d.range=function(e){return arguments.length?(s=Array.from(e),u()):s.slice()},d.rangeRound=function(e){return s=Array.from(e),l=m.Z,u()},d.clamp=function(e){return arguments.length?(c=!!e||y,u()):c!==y},d.interpolate=function(e){return arguments.length?(l=e,u()):l},d.unknown=function(e){return arguments.length?(n=e,d):n},function(n,r){return e=n,t=r,u()}}function S(){return M()(y,y)}var A,E=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function C(e){if(!(t=E.exec(e)))throw new Error("invalid format: "+e);var t;return new T({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function T(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function R(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function P(e){return(e=R(Math.abs(e)))?e[1]:NaN}function L(e,t){var n=R(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}C.prototype=T.prototype,T.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const D={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>L(100*e,t),r:L,s:function(e,t){var n=R(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(A=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+R(e,Math.max(0,t+a-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function I(e){return e}var k,B,F,N=Array.prototype.map,O=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function z(e,t,n,r){var i,a=(0,d.ly)(e,t,n);switch((r=C(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(P(t)/3)))-P(Math.abs(e)))}(a,o))||(r.precision=i),F(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,P(t)-P(e))+1}(a,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-P(Math.abs(e)))}(a))||(r.precision=i-2*("%"===r.type))}return B(r)}function U(e){var t=e.domain;return e.ticks=function(e){var n=t();return(0,d.ZP)(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return z(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,a=t(),o=0,s=a.length-1,l=a[o],c=a[s],u=10;for(c<l&&(i=l,l=c,c=i,i=o,o=s,s=i);u-- >0;){if((i=(0,d.G9)(l,c,n))===r)return a[o]=l,a[s]=c,t(a);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}r=i}return e},e}function H(){var e=S();return e.copy=function(){return w(e,H())},i.apply(e,arguments),U(e)}function G(e){var t;function n(e){return null==e||isNaN(e=+e)?t:e}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=Array.from(t,g),n):e.slice()},n.unknown=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return G(e).unknown(t)},e=arguments.length?Array.from(e,g):[0,1],U(n)}function V(e,t){var n,r=0,i=(e=e.slice()).length-1,a=e[r],o=e[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),e[r]=t.floor(a),e[i]=t.ceil(o),e}function j(e){return Math.log(e)}function W(e){return Math.exp(e)}function X(e){return-Math.log(-e)}function q(e){return-Math.exp(-e)}function Y(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Z(e){return function(t){return-e(-t)}}function J(e){var t,n,r=e(j,W),i=r.domain,a=10;function o(){return t=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}(a),n=function(e){return 10===e?Y:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}(a),i()[0]<0?(t=Z(t),n=Z(n),e(X,q)):e(j,W),r}return r.base=function(e){return arguments.length?(a=+e,o()):a},r.domain=function(e){return arguments.length?(i(e),o()):i()},r.ticks=function(e){var r,o=i(),s=o[0],l=o[o.length-1];(r=l<s)&&(f=s,s=l,l=f);var c,u,h,f=t(s),p=t(l),m=null==e?10:+e,g=[];if(!(a%1)&&p-f<m){if(f=Math.floor(f),p=Math.ceil(p),s>0){for(;f<=p;++f)for(u=1,c=n(f);u<a;++u)if(!((h=c*u)<s)){if(h>l)break;g.push(h)}}else for(;f<=p;++f)for(u=a-1,c=n(f);u>=1;--u)if(!((h=c*u)<s)){if(h>l)break;g.push(h)}2*g.length<m&&(g=(0,d.ZP)(s,l,m))}else g=(0,d.ZP)(f,p,Math.min(p-f,m)).map(n);return r?g.reverse():g},r.tickFormat=function(e,i){if(null==i&&(i=10===a?".0e":","),"function"!=typeof i&&(i=B(i)),e===1/0)return i;null==e&&(e=10);var o=Math.max(1,a*e/r.ticks().length);return function(e){var r=e/n(Math.round(t(e)));return r*a<a-.5&&(r*=a),r<=o?i(e):""}},r.nice=function(){return i(V(i(),{floor:function(e){return n(Math.floor(t(e)))},ceil:function(e){return n(Math.ceil(t(e)))}}))},r}function $(){var e=J(M()).domain([1,10]);return e.copy=function(){return w(e,$()).base(e.base())},i.apply(e,arguments),e}function K(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Q(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function ee(e){var t=1,n=e(K(t),Q(t));return n.constant=function(n){return arguments.length?e(K(t=+n),Q(t)):t},U(n)}function te(){var e=ee(M());return e.copy=function(){return w(e,te()).constant(e.constant())},i.apply(e,arguments)}function ne(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function re(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function ie(e){return e<0?-e*e:e*e}function ae(e){var t=e(y,y),n=1;function r(){return 1===n?e(y,y):.5===n?e(re,ie):e(ne(n),ne(1/n))}return t.exponent=function(e){return arguments.length?(n=+e,r()):n},U(t)}function oe(){var e=ae(M());return e.copy=function(){return w(e,oe()).exponent(e.exponent())},i.apply(e,arguments),e}function se(){return oe.apply(null,arguments).exponent(.5)}function le(e){return Math.sign(e)*e*e}function ce(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function ue(){var e,t=S(),n=[0,1],r=!1;function a(n){var i=ce(t(n));return isNaN(i)?e:r?Math.round(i):i}return a.invert=function(e){return t.invert(le(e))},a.domain=function(e){return arguments.length?(t.domain(e),a):t.domain()},a.range=function(e){return arguments.length?(t.range((n=Array.from(e,g)).map(le)),a):n.slice()},a.rangeRound=function(e){return a.range(e).round(!0)},a.round=function(e){return arguments.length?(r=!!e,a):r},a.clamp=function(e){return arguments.length?(t.clamp(e),a):t.clamp()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return ue(t.domain(),n).round(r).clamp(t.clamp()).unknown(e)},i.apply(a,arguments),U(a)}k=function(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?I:(t=N.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,a=[],o=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(e.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",a=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?I:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(N.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"−":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=C(e)).fill,n=e.align,d=e.sign,h=e.symbol,f=e.zero,p=e.width,m=e.comma,g=e.precision,v=e.trim,y=e.type;"n"===y?(m=!0,y="g"):D[y]||(void 0===g&&(g=12),v=!0,y="g"),(f||"0"===t&&"="===n)&&(f=!0,t="0",n="=");var b="$"===h?i:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===h?a:/[%p]/.test(y)?l:"",_=D[y],w=/[defgprs%]/.test(y);function M(e){var i,a,l,h=b,M=x;if("c"===y)M=_(e)+M,e="";else{var S=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:_(Math.abs(e),g),v&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),S&&0==+e&&"+"!==d&&(S=!1),h=(S?"("===d?d:c:"-"===d||"("===d?"":d)+h,M=("s"===y?O[8+A/3]:"")+M+(S&&"("===d?")":""),w)for(i=-1,a=e.length;++i<a;)if(48>(l=e.charCodeAt(i))||l>57){M=(46===l?o+e.slice(i+1):e.slice(i))+M,e=e.slice(0,i);break}}m&&!f&&(e=r(e,1/0));var E=h.length+e.length+M.length,C=E<p?new Array(p-E+1).join(t):"";switch(m&&f&&(e=r(C+e,C.length?p-M.length:1/0),C=""),n){case"<":e=h+e+M+C;break;case"=":e=h+C+e+M;break;case"^":e=C.slice(0,E=C.length>>1)+h+e+M+C.slice(E);break;default:e=C+h+e+M}return s(e)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),M.toString=function(){return e+""},M}return{format:d,formatPrefix:function(e,t){var n=d(((e=C(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(P(t)/3))),i=Math.pow(10,-r),a=O[8+r/3];return function(e){return n(i*e)+a}}}}({thousands:",",grouping:[3],currency:["$",""]}),B=k.format,F=k.formatPrefix;var de=n(1461),he=n(1077);function fe(){var e,t=[],n=[],r=[];function a(){var e=0,i=Math.max(1,n.length);for(r=new Array(i-1);++e<i;)r[e-1]=(0,de.s)(t,e/i);return o}function o(t){return null==t||isNaN(t=+t)?e:n[(0,h.ZP)(r,t)]}return o.invertExtent=function(e){var i=n.indexOf(e);return i<0?[NaN,NaN]:[i>0?r[i-1]:t[0],i<r.length?r[i]:t[t.length-1]]},o.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(he.Z),a()},o.range=function(e){return arguments.length?(n=Array.from(e),a()):n.slice()},o.unknown=function(t){return arguments.length?(e=t,o):e},o.quantiles=function(){return r.slice()},o.copy=function(){return fe().domain(t).range(n).unknown(e)},i.apply(o,arguments)}function pe(){var e,t=0,n=1,r=1,a=[.5],o=[0,1];function s(t){return null!=t&&t<=t?o[(0,h.ZP)(a,t,0,r)]:e}function l(){var e=-1;for(a=new Array(r);++e<r;)a[e]=((e+1)*n-(e-r)*t)/(r+1);return s}return s.domain=function(e){return arguments.length?([t,n]=e,t=+t,n=+n,l()):[t,n]},s.range=function(e){return arguments.length?(r=(o=Array.from(e)).length-1,l()):o.slice()},s.invertExtent=function(e){var i=o.indexOf(e);return i<0?[NaN,NaN]:i<1?[t,a[0]]:i>=r?[a[r-1],n]:[a[i-1],a[i]]},s.unknown=function(t){return arguments.length?(e=t,s):s},s.thresholds=function(){return a.slice()},s.copy=function(){return pe().domain([t,n]).range(o).unknown(e)},i.apply(U(s),arguments)}function me(){var e,t=[.5],n=[0,1],r=1;function a(i){return null!=i&&i<=i?n[(0,h.ZP)(t,i,0,r)]:e}return a.domain=function(e){return arguments.length?(t=Array.from(e),r=Math.min(t.length,n.length-1),a):t.slice()},a.range=function(e){return arguments.length?(n=Array.from(e),r=Math.min(t.length,n.length-1),a):n.slice()},a.invertExtent=function(e){var r=n.indexOf(e);return[t[r-1],t[r]]},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return me().domain(t).range(n).unknown(e)},i.apply(a,arguments)}var ge=n(1955),ve=n(2209),ye=n(4584),be=n(2776),xe=n(9478),_e=n(2784),we=n(7197),Me=n(5086),Se=n(7326),Ae=n(9692),Ee=n(1181);function Ce(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Te(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Re(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var Pe,Le,De,Ie={"-":"",_:" ",0:"0"},ke=/^\s*\d+/,Be=/^%/,Fe=/[\\^$*+?|[\]().{}]/g;function Ne(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function Oe(e){return e.replace(Fe,"\\$&")}function ze(e){return new RegExp("^(?:"+e.map(Oe).join("|")+")","i")}function Ue(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function He(e,t,n){var r=ke.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Ge(e,t,n){var r=ke.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Ve(e,t,n){var r=ke.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function je(e,t,n){var r=ke.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function We(e,t,n){var r=ke.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Xe(e,t,n){var r=ke.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function qe(e,t,n){var r=ke.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Ye(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Ze(e,t,n){var r=ke.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function Je(e,t,n){var r=ke.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function $e(e,t,n){var r=ke.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Ke(e,t,n){var r=ke.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Qe(e,t,n){var r=ke.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function et(e,t,n){var r=ke.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function tt(e,t,n){var r=ke.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function nt(e,t,n){var r=ke.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function rt(e,t,n){var r=ke.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function it(e,t,n){var r=Be.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function at(e,t,n){var r=ke.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function ot(e,t,n){var r=ke.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function st(e,t){return Ne(e.getDate(),t,2)}function lt(e,t){return Ne(e.getHours(),t,2)}function ct(e,t){return Ne(e.getHours()%12||12,t,2)}function ut(e,t){return Ne(1+xe.Z.count((0,ve.Z)(e),e),t,3)}function dt(e,t){return Ne(e.getMilliseconds(),t,3)}function ht(e,t){return dt(e,t)+"000"}function ft(e,t){return Ne(e.getMonth()+1,t,2)}function pt(e,t){return Ne(e.getMinutes(),t,2)}function mt(e,t){return Ne(e.getSeconds(),t,2)}function gt(e){var t=e.getDay();return 0===t?7:t}function vt(e,t){return Ne(be.OM.count((0,ve.Z)(e)-1,e),t,2)}function yt(e){var t=e.getDay();return t>=4||0===t?(0,be.bL)(e):be.bL.ceil(e)}function bt(e,t){return e=yt(e),Ne(be.bL.count((0,ve.Z)(e),e)+(4===(0,ve.Z)(e).getDay()),t,2)}function xt(e){return e.getDay()}function _t(e,t){return Ne(be.wA.count((0,ve.Z)(e)-1,e),t,2)}function wt(e,t){return Ne(e.getFullYear()%100,t,2)}function Mt(e,t){return Ne((e=yt(e)).getFullYear()%100,t,2)}function St(e,t){return Ne(e.getFullYear()%1e4,t,4)}function At(e,t){var n=e.getDay();return Ne((e=n>=4||0===n?(0,be.bL)(e):be.bL.ceil(e)).getFullYear()%1e4,t,4)}function Et(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ne(t/60|0,"0",2)+Ne(t%60,"0",2)}function Ct(e,t){return Ne(e.getUTCDate(),t,2)}function Tt(e,t){return Ne(e.getUTCHours(),t,2)}function Rt(e,t){return Ne(e.getUTCHours()%12||12,t,2)}function Pt(e,t){return Ne(1+Ae.Z.count((0,Ee.Z)(e),e),t,3)}function Lt(e,t){return Ne(e.getUTCMilliseconds(),t,3)}function Dt(e,t){return Lt(e,t)+"000"}function It(e,t){return Ne(e.getUTCMonth()+1,t,2)}function kt(e,t){return Ne(e.getUTCMinutes(),t,2)}function Bt(e,t){return Ne(e.getUTCSeconds(),t,2)}function Ft(e){var t=e.getUTCDay();return 0===t?7:t}function Nt(e,t){return Ne(Se.Ox.count((0,Ee.Z)(e)-1,e),t,2)}function Ot(e){var t=e.getUTCDay();return t>=4||0===t?(0,Se.hB)(e):Se.hB.ceil(e)}function zt(e,t){return e=Ot(e),Ne(Se.hB.count((0,Ee.Z)(e),e)+(4===(0,Ee.Z)(e).getUTCDay()),t,2)}function Ut(e){return e.getUTCDay()}function Ht(e,t){return Ne(Se.l6.count((0,Ee.Z)(e)-1,e),t,2)}function Gt(e,t){return Ne(e.getUTCFullYear()%100,t,2)}function Vt(e,t){return Ne((e=Ot(e)).getUTCFullYear()%100,t,2)}function jt(e,t){return Ne(e.getUTCFullYear()%1e4,t,4)}function Wt(e,t){var n=e.getUTCDay();return Ne((e=n>=4||0===n?(0,Se.hB)(e):Se.hB.ceil(e)).getUTCFullYear()%1e4,t,4)}function Xt(){return"+0000"}function qt(){return"%"}function Yt(e){return+e}function Zt(e){return Math.floor(+e/1e3)}function Jt(e){return new Date(e)}function $t(e){return e instanceof Date?+e:+new Date(+e)}function Kt(e,t,n,r,i,a,o,s,l,c){var u=S(),d=u.invert,h=u.domain,f=c(".%L"),p=c(":%S"),m=c("%I:%M"),g=c("%I %p"),v=c("%a %d"),y=c("%b %d"),b=c("%B"),x=c("%Y");function _(e){return(l(e)<e?f:s(e)<e?p:o(e)<e?m:a(e)<e?g:r(e)<e?i(e)<e?v:y:n(e)<e?b:x)(e)}return u.invert=function(e){return new Date(d(e))},u.domain=function(e){return arguments.length?h(Array.from(e,$t)):h().map(Jt)},u.ticks=function(t){var n=h();return e(n[0],n[n.length-1],null==t?10:t)},u.tickFormat=function(e,t){return null==t?_:c(t)},u.nice=function(e){var n=h();return e&&"function"==typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?h(V(n,e)):u},u.copy=function(){return w(u,Kt(e,t,n,r,i,a,o,s,l,c))},u}function Qt(){return i.apply(Kt(ge.jK,ge._g,ve.Z,ye.Z,be.OM,xe.Z,_e.Z,we.Z,Me.Z,Le).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}Pe=function(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,s=e.months,l=e.shortMonths,c=ze(i),u=Ue(i),d=ze(a),h=Ue(a),f=ze(o),p=Ue(o),m=ze(s),g=Ue(s),v=ze(l),y=Ue(l),b={a:function(e){return o[e.getDay()]},A:function(e){return a[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:st,e:st,f:ht,g:Mt,G:At,H:lt,I:ct,j:ut,L:dt,m:ft,M:pt,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Yt,s:Zt,S:mt,u:gt,U:vt,V:bt,w:xt,W:_t,x:null,X:null,y:wt,Y:St,Z:Et,"%":qt},x={a:function(e){return o[e.getUTCDay()]},A:function(e){return a[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:Ct,e:Ct,f:Dt,g:Vt,G:Wt,H:Tt,I:Rt,j:Pt,L:Lt,m:It,M:kt,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Yt,s:Zt,S:Bt,u:Ft,U:Nt,V:zt,w:Ut,W:Ht,x:null,X:null,y:Gt,Y:jt,Z:Xt,"%":qt},_={a:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=v.exec(t.slice(n));return r?(e.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return S(e,t,n,r)},d:$e,e:$e,f:rt,g:qe,G:Xe,H:Qe,I:Qe,j:Ke,L:nt,m:Je,M:et,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=u.get(r[0].toLowerCase()),n+r[0].length):-1},q:Ze,Q:at,s:ot,S:tt,u:Ge,U:Ve,V:je,w:He,W:We,x:function(e,t,r){return S(e,n,t,r)},X:function(e,t,n){return S(e,r,t,n)},y:qe,Y:Xe,Z:Ye,"%":it};function w(e,t){return function(n){var r,i,a,o=[],s=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===e.charCodeAt(s)&&(o.push(e.slice(l,s)),null!=(i=Ie[r=e.charAt(++s)])?r=e.charAt(++s):i="e"===r?" ":"0",(a=t[r])&&(r=a(n,i)),o.push(r),l=s+1);return o.push(e.slice(l,s)),o.join("")}}function M(e,t){return function(n){var r,i,a=Re(1900,void 0,1);if(S(a,e,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(t&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=Te(Re(a.y,0,1))).getUTCDay(),r=i>4||0===i?Se.l6.ceil(r):(0,Se.l6)(r),r=Ae.Z.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=Ce(Re(a.y,0,1))).getDay(),r=i>4||0===i?be.wA.ceil(r):(0,be.wA)(r),r=xe.Z.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?Te(Re(a.y,0,1)).getUTCDay():Ce(Re(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,Te(a)):Ce(a)}}function S(e,t,n,r){for(var i,a,o=0,s=t.length,l=n.length;o<s;){if(r>=l)return-1;if(37===(i=t.charCodeAt(o++))){if(i=t.charAt(o++),!(a=_[i in Ie?t.charAt(o++):i])||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=w(n,b),b.X=w(r,b),b.c=w(t,b),x.x=w(n,x),x.X=w(r,x),x.c=w(t,x),{format:function(e){var t=w(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=M(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=M(e+="",!0);return t.toString=function(){return e},t}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Le=Pe.format,Pe.parse,De=Pe.utcFormat,Pe.utcParse;var en=n(7512),tn=n(590),nn=n(4878);function rn(){return i.apply(Kt(ge.WG,ge.jo,Ee.Z,en.Z,Se.Ox,Ae.Z,tn.Z,nn.Z,Me.Z,De).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function an(){var e,t,n,r,i,a=0,o=1,s=y,l=!1;function c(t){return null==t||isNaN(t=+t)?i:s(0===n?.5:(t=(r(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}function u(e){return function(t){var n,r;return arguments.length?([n,r]=t,s=e(n,r),c):[s(0),s(1)]}}return c.domain=function(i){return arguments.length?([a,o]=i,e=r(a=+a),t=r(o=+o),n=e===t?0:1/(t-e),c):[a,o]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(s=e,c):s},c.range=u(f.Z),c.rangeRound=u(m.Z),c.unknown=function(e){return arguments.length?(i=e,c):i},function(i){return r=i,e=i(a),t=i(o),n=e===t?0:1/(t-e),c}}function on(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function sn(){var e=U(an()(y));return e.copy=function(){return on(e,sn())},a.apply(e,arguments)}function ln(){var e=J(an()).domain([1,10]);return e.copy=function(){return on(e,ln()).base(e.base())},a.apply(e,arguments)}function cn(){var e=ee(an());return e.copy=function(){return on(e,cn()).constant(e.constant())},a.apply(e,arguments)}function un(){var e=ae(an());return e.copy=function(){return on(e,un()).exponent(e.exponent())},a.apply(e,arguments)}function dn(){return un.apply(null,arguments).exponent(.5)}function hn(){var e=[],t=y;function n(n){if(null!=n&&!isNaN(n=+n))return t(((0,h.ZP)(e,n,1)-1)/(e.length-1))}return n.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(he.Z),n},n.interpolator=function(e){return arguments.length?(t=e,n):t},n.range=function(){return e.map(((n,r)=>t(r/(e.length-1))))},n.quantiles=function(t){return Array.from({length:t+1},((n,r)=>(0,de.Z)(e,r/t)))},n.copy=function(){return hn(t).domain(e)},a.apply(n,arguments)}function fn(e,t){for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return a[t](e-t)}}function pn(){var e,t,n,r,i,a,o,s=0,l=.5,c=1,u=1,d=y,h=!1;function p(e){return isNaN(e=+e)?o:(e=.5+((e=+a(e))-t)*(u*e<u*t?r:i),d(h?Math.max(0,Math.min(1,e)):e))}function g(e){return function(t){var n,r,i;return arguments.length?([n,r,i]=t,d=fn(e,[n,r,i]),p):[d(0),d(.5),d(1)]}}return p.domain=function(o){return arguments.length?([s,l,c]=o,e=a(s=+s),t=a(l=+l),n=a(c=+c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),u=t<e?-1:1,p):[s,l,c]},p.clamp=function(e){return arguments.length?(h=!!e,p):h},p.interpolator=function(e){return arguments.length?(d=e,p):d},p.range=g(f.Z),p.rangeRound=g(m.Z),p.unknown=function(e){return arguments.length?(o=e,p):o},function(o){return a=o,e=o(s),t=o(l),n=o(c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),u=t<e?-1:1,p}}function mn(){var e=U(pn()(y));return e.copy=function(){return on(e,mn())},a.apply(e,arguments)}function gn(){var e=J(pn()).domain([.1,1,10]);return e.copy=function(){return on(e,gn()).base(e.base())},a.apply(e,arguments)}function vn(){var e=ee(pn());return e.copy=function(){return on(e,vn()).constant(e.constant())},a.apply(e,arguments)}function yn(){var e=ae(pn());return e.copy=function(){return on(e,yn()).exponent(e.exponent())},a.apply(e,arguments)}function bn(){return yn.apply(null,arguments).exponent(.5)}},4537:(e,t,n)=>{"use strict";n.r(t),n.d(t,{arc:()=>A,area:()=>L,areaRadial:()=>U,curveBasis:()=>xe,curveBasisClosed:()=>we,curveBasisOpen:()=>Se,curveBundle:()=>Ee,curveCardinal:()=>Re,curveCardinalClosed:()=>Le,curveCardinalOpen:()=>Ie,curveCatmullRom:()=>Fe,curveCatmullRomClosed:()=>Oe,curveCatmullRomOpen:()=>Ue,curveLinear:()=>C,curveLinearClosed:()=>Ge,curveMonotoneX:()=>Je,curveMonotoneY:()=>$e,curveNatural:()=>et,curveStep:()=>nt,curveStepAfter:()=>it,curveStepBefore:()=>rt,line:()=>P,lineRadial:()=>z,linkHorizontal:()=>Z,linkRadial:()=>$,linkVertical:()=>J,pie:()=>k,pointRadial:()=>H,radialArea:()=>U,radialLine:()=>z,stack:()=>lt,stackOffsetDiverging:()=>ut,stackOffsetExpand:()=>ct,stackOffsetNone:()=>at,stackOffsetSilhouette:()=>dt,stackOffsetWiggle:()=>ht,stackOrderAppearance:()=>ft,stackOrderAscending:()=>mt,stackOrderDescending:()=>vt,stackOrderInsideOut:()=>yt,stackOrderNone:()=>ot,stackOrderReverse:()=>bt,symbol:()=>ge,symbolCircle:()=>K,symbolCross:()=>Q,symbolDiamond:()=>ne,symbolSquare:()=>se,symbolStar:()=>oe,symbolTriangle:()=>ce,symbolWye:()=>pe,symbols:()=>me});var r=n(1108);function i(e){return function(){return e}}var a=Math.abs,o=Math.atan2,s=Math.cos,l=Math.max,c=Math.min,u=Math.sin,d=Math.sqrt,h=1e-12,f=Math.PI,p=f/2,m=2*f;function g(e){return e>1?0:e<-1?f:Math.acos(e)}function v(e){return e>=1?p:e<=-1?-p:Math.asin(e)}function y(e){return e.innerRadius}function b(e){return e.outerRadius}function x(e){return e.startAngle}function _(e){return e.endAngle}function w(e){return e&&e.padAngle}function M(e,t,n,r,i,a,o,s){var l=n-e,c=r-t,u=o-i,d=s-a,f=d*l-u*c;if(!(f*f<h))return[e+(f=(u*(t-a)-d*(e-i))/f)*l,t+f*c]}function S(e,t,n,r,i,a,o){var s=e-n,c=t-r,u=(o?a:-a)/d(s*s+c*c),h=u*c,f=-u*s,p=e+h,m=t+f,g=n+h,v=r+f,y=(p+g)/2,b=(m+v)/2,x=g-p,_=v-m,w=x*x+_*_,M=i-a,S=p*v-g*m,A=(_<0?-1:1)*d(l(0,M*M*w-S*S)),E=(S*_-x*A)/w,C=(-S*x-_*A)/w,T=(S*_+x*A)/w,R=(-S*x+_*A)/w,P=E-y,L=C-b,D=T-y,I=R-b;return P*P+L*L>D*D+I*I&&(E=T,C=R),{cx:E,cy:C,x01:-h,y01:-f,x11:E*(i/M-1),y11:C*(i/M-1)}}function A(){var e=y,t=b,n=i(0),l=null,A=x,E=_,C=w,T=null;function R(){var i,y,b=+e.apply(this,arguments),x=+t.apply(this,arguments),_=A.apply(this,arguments)-p,w=E.apply(this,arguments)-p,R=a(w-_),P=w>_;if(T||(T=i=(0,r.Z)()),x<b&&(y=x,x=b,b=y),x>h)if(R>m-h)T.moveTo(x*s(_),x*u(_)),T.arc(0,0,x,_,w,!P),b>h&&(T.moveTo(b*s(w),b*u(w)),T.arc(0,0,b,w,_,P));else{var L,D,I=_,k=w,B=_,F=w,N=R,O=R,z=C.apply(this,arguments)/2,U=z>h&&(l?+l.apply(this,arguments):d(b*b+x*x)),H=c(a(x-b)/2,+n.apply(this,arguments)),G=H,V=H;if(U>h){var j=v(U/b*u(z)),W=v(U/x*u(z));(N-=2*j)>h?(B+=j*=P?1:-1,F-=j):(N=0,B=F=(_+w)/2),(O-=2*W)>h?(I+=W*=P?1:-1,k-=W):(O=0,I=k=(_+w)/2)}var X=x*s(I),q=x*u(I),Y=b*s(F),Z=b*u(F);if(H>h){var J,$=x*s(k),K=x*u(k),Q=b*s(B),ee=b*u(B);if(R<f&&(J=M(X,q,Q,ee,$,K,Y,Z))){var te=X-J[0],ne=q-J[1],re=$-J[0],ie=K-J[1],ae=1/u(g((te*re+ne*ie)/(d(te*te+ne*ne)*d(re*re+ie*ie)))/2),oe=d(J[0]*J[0]+J[1]*J[1]);G=c(H,(b-oe)/(ae-1)),V=c(H,(x-oe)/(ae+1))}}O>h?V>h?(L=S(Q,ee,X,q,x,V,P),D=S($,K,Y,Z,x,V,P),T.moveTo(L.cx+L.x01,L.cy+L.y01),V<H?T.arc(L.cx,L.cy,V,o(L.y01,L.x01),o(D.y01,D.x01),!P):(T.arc(L.cx,L.cy,V,o(L.y01,L.x01),o(L.y11,L.x11),!P),T.arc(0,0,x,o(L.cy+L.y11,L.cx+L.x11),o(D.cy+D.y11,D.cx+D.x11),!P),T.arc(D.cx,D.cy,V,o(D.y11,D.x11),o(D.y01,D.x01),!P))):(T.moveTo(X,q),T.arc(0,0,x,I,k,!P)):T.moveTo(X,q),b>h&&N>h?G>h?(L=S(Y,Z,$,K,b,-G,P),D=S(X,q,Q,ee,b,-G,P),T.lineTo(L.cx+L.x01,L.cy+L.y01),G<H?T.arc(L.cx,L.cy,G,o(L.y01,L.x01),o(D.y01,D.x01),!P):(T.arc(L.cx,L.cy,G,o(L.y01,L.x01),o(L.y11,L.x11),!P),T.arc(0,0,b,o(L.cy+L.y11,L.cx+L.x11),o(D.cy+D.y11,D.cx+D.x11),P),T.arc(D.cx,D.cy,G,o(D.y11,D.x11),o(D.y01,D.x01),!P))):T.arc(0,0,b,F,B,P):T.lineTo(Y,Z)}else T.moveTo(0,0);if(T.closePath(),i)return T=null,i+""||null}return R.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+A.apply(this,arguments)+ +E.apply(this,arguments))/2-f/2;return[s(r)*n,u(r)*n]},R.innerRadius=function(t){return arguments.length?(e="function"==typeof t?t:i(+t),R):e},R.outerRadius=function(e){return arguments.length?(t="function"==typeof e?e:i(+e),R):t},R.cornerRadius=function(e){return arguments.length?(n="function"==typeof e?e:i(+e),R):n},R.padRadius=function(e){return arguments.length?(l=null==e?null:"function"==typeof e?e:i(+e),R):l},R.startAngle=function(e){return arguments.length?(A="function"==typeof e?e:i(+e),R):A},R.endAngle=function(e){return arguments.length?(E="function"==typeof e?e:i(+e),R):E},R.padAngle=function(e){return arguments.length?(C="function"==typeof e?e:i(+e),R):C},R.context=function(e){return arguments.length?(T=null==e?null:e,R):T},R}function E(e){this._context=e}function C(e){return new E(e)}function T(e){return e[0]}function R(e){return e[1]}function P(){var e=T,t=R,n=i(!0),a=null,o=C,s=null;function l(i){var l,c,u,d=i.length,h=!1;for(null==a&&(s=o(u=(0,r.Z)())),l=0;l<=d;++l)!(l<d&&n(c=i[l],l,i))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(c,l,i),+t(c,l,i));if(u)return s=null,u+""||null}return l.x=function(t){return arguments.length?(e="function"==typeof t?t:i(+t),l):e},l.y=function(e){return arguments.length?(t="function"==typeof e?e:i(+e),l):t},l.defined=function(e){return arguments.length?(n="function"==typeof e?e:i(!!e),l):n},l.curve=function(e){return arguments.length?(o=e,null!=a&&(s=o(a)),l):o},l.context=function(e){return arguments.length?(null==e?a=s=null:s=o(a=e),l):a},l}function L(){var e=T,t=null,n=i(0),a=R,o=i(!0),s=null,l=C,c=null;function u(i){var u,d,h,f,p,m=i.length,g=!1,v=new Array(m),y=new Array(m);for(null==s&&(c=l(p=(0,r.Z)())),u=0;u<=m;++u){if(!(u<m&&o(f=i[u],u,i))===g)if(g=!g)d=u,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),h=u-1;h>=d;--h)c.point(v[h],y[h]);c.lineEnd(),c.areaEnd()}g&&(v[u]=+e(f,u,i),y[u]=+n(f,u,i),c.point(t?+t(f,u,i):v[u],a?+a(f,u,i):y[u]))}if(p)return c=null,p+""||null}function d(){return P().defined(o).curve(l).context(s)}return u.x=function(n){return arguments.length?(e="function"==typeof n?n:i(+n),t=null,u):e},u.x0=function(t){return arguments.length?(e="function"==typeof t?t:i(+t),u):e},u.x1=function(e){return arguments.length?(t=null==e?null:"function"==typeof e?e:i(+e),u):t},u.y=function(e){return arguments.length?(n="function"==typeof e?e:i(+e),a=null,u):n},u.y0=function(e){return arguments.length?(n="function"==typeof e?e:i(+e),u):n},u.y1=function(e){return arguments.length?(a=null==e?null:"function"==typeof e?e:i(+e),u):a},u.lineX0=u.lineY0=function(){return d().x(e).y(n)},u.lineY1=function(){return d().x(e).y(a)},u.lineX1=function(){return d().x(t).y(n)},u.defined=function(e){return arguments.length?(o="function"==typeof e?e:i(!!e),u):o},u.curve=function(e){return arguments.length?(l=e,null!=s&&(c=l(s)),u):l},u.context=function(e){return arguments.length?(null==e?s=c=null:c=l(s=e),u):s},u}function D(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function I(e){return e}function k(){var e=I,t=D,n=null,r=i(0),a=i(m),o=i(0);function s(i){var s,l,c,u,d,h=i.length,f=0,p=new Array(h),g=new Array(h),v=+r.apply(this,arguments),y=Math.min(m,Math.max(-m,a.apply(this,arguments)-v)),b=Math.min(Math.abs(y)/h,o.apply(this,arguments)),x=b*(y<0?-1:1);for(s=0;s<h;++s)(d=g[p[s]=s]=+e(i[s],s,i))>0&&(f+=d);for(null!=t?p.sort((function(e,n){return t(g[e],g[n])})):null!=n&&p.sort((function(e,t){return n(i[e],i[t])})),s=0,c=f?(y-h*x)/f:0;s<h;++s,v=u)l=p[s],u=v+((d=g[l])>0?d*c:0)+x,g[l]={data:i[l],index:s,value:d,startAngle:v,endAngle:u,padAngle:b};return g}return s.value=function(t){return arguments.length?(e="function"==typeof t?t:i(+t),s):e},s.sortValues=function(e){return arguments.length?(t=e,n=null,s):t},s.sort=function(e){return arguments.length?(n=e,t=null,s):n},s.startAngle=function(e){return arguments.length?(r="function"==typeof e?e:i(+e),s):r},s.endAngle=function(e){return arguments.length?(a="function"==typeof e?e:i(+e),s):a},s.padAngle=function(e){return arguments.length?(o="function"==typeof e?e:i(+e),s):o},s}E.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var B=N(C);function F(e){this._curve=e}function N(e){function t(t){return new F(e(t))}return t._curve=e,t}function O(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(e){return arguments.length?t(N(e)):t()._curve},e}function z(){return O(P().curve(B))}function U(){var e=L().curve(B),t=e.curve,n=e.lineX0,r=e.lineX1,i=e.lineY0,a=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return O(n())},delete e.lineX0,e.lineEndAngle=function(){return O(r())},delete e.lineX1,e.lineInnerRadius=function(){return O(i())},delete e.lineY0,e.lineOuterRadius=function(){return O(a())},delete e.lineY1,e.curve=function(e){return arguments.length?t(N(e)):t()._curve},e}function H(e,t){return[(t=+t)*Math.cos(e-=Math.PI/2),t*Math.sin(e)]}F.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};var G=Array.prototype.slice;function V(e){return e.source}function j(e){return e.target}function W(e){var t=V,n=j,a=T,o=R,s=null;function l(){var i,l=G.call(arguments),c=t.apply(this,l),u=n.apply(this,l);if(s||(s=i=(0,r.Z)()),e(s,+a.apply(this,(l[0]=c,l)),+o.apply(this,l),+a.apply(this,(l[0]=u,l)),+o.apply(this,l)),i)return s=null,i+""||null}return l.source=function(e){return arguments.length?(t=e,l):t},l.target=function(e){return arguments.length?(n=e,l):n},l.x=function(e){return arguments.length?(a="function"==typeof e?e:i(+e),l):a},l.y=function(e){return arguments.length?(o="function"==typeof e?e:i(+e),l):o},l.context=function(e){return arguments.length?(s=null==e?null:e,l):s},l}function X(e,t,n,r,i){e.moveTo(t,n),e.bezierCurveTo(t=(t+r)/2,n,t,i,r,i)}function q(e,t,n,r,i){e.moveTo(t,n),e.bezierCurveTo(t,n=(n+i)/2,r,n,r,i)}function Y(e,t,n,r,i){var a=H(t,n),o=H(t,n=(n+i)/2),s=H(r,n),l=H(r,i);e.moveTo(a[0],a[1]),e.bezierCurveTo(o[0],o[1],s[0],s[1],l[0],l[1])}function Z(){return W(X)}function J(){return W(q)}function $(){var e=W(Y);return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e}const K={draw:function(e,t){var n=Math.sqrt(t/f);e.moveTo(n,0),e.arc(0,0,n,0,m)}},Q={draw:function(e,t){var n=Math.sqrt(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}};var ee=Math.sqrt(1/3),te=2*ee;const ne={draw:function(e,t){var n=Math.sqrt(t/te),r=n*ee;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}};var re=Math.sin(f/10)/Math.sin(7*f/10),ie=Math.sin(m/10)*re,ae=-Math.cos(m/10)*re;const oe={draw:function(e,t){var n=Math.sqrt(.8908130915292852*t),r=ie*n,i=ae*n;e.moveTo(0,-n),e.lineTo(r,i);for(var a=1;a<5;++a){var o=m*a/5,s=Math.cos(o),l=Math.sin(o);e.lineTo(l*n,-s*n),e.lineTo(s*r-l*i,l*r+s*i)}e.closePath()}},se={draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}};var le=Math.sqrt(3);const ce={draw:function(e,t){var n=-Math.sqrt(t/(3*le));e.moveTo(0,2*n),e.lineTo(-le*n,-n),e.lineTo(le*n,-n),e.closePath()}};var ue=-.5,de=Math.sqrt(3)/2,he=1/Math.sqrt(12),fe=3*(he/2+1);const pe={draw:function(e,t){var n=Math.sqrt(t/fe),r=n/2,i=n*he,a=r,o=n*he+n,s=-a,l=o;e.moveTo(r,i),e.lineTo(a,o),e.lineTo(s,l),e.lineTo(ue*r-de*i,de*r+ue*i),e.lineTo(ue*a-de*o,de*a+ue*o),e.lineTo(ue*s-de*l,de*s+ue*l),e.lineTo(ue*r+de*i,ue*i-de*r),e.lineTo(ue*a+de*o,ue*o-de*a),e.lineTo(ue*s+de*l,ue*l-de*s),e.closePath()}};var me=[K,Q,ne,se,oe,ce,pe];function ge(){var e=i(K),t=i(64),n=null;function a(){var i;if(n||(n=i=(0,r.Z)()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return a.type=function(t){return arguments.length?(e="function"==typeof t?t:i(t),a):e},a.size=function(e){return arguments.length?(t="function"==typeof e?e:i(+e),a):t},a.context=function(e){return arguments.length?(n=null==e?null:e,a):n},a}function ve(){}function ye(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function be(e){this._context=e}function xe(e){return new be(e)}function _e(e){this._context=e}function we(e){return new _e(e)}function Me(e){this._context=e}function Se(e){return new Me(e)}function Ae(e,t){this._basis=new be(e),this._beta=t}be.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ye(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ye(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},_e.prototype={areaStart:ve,areaEnd:ve,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ye(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Me.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ye(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Ae.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,i=e[0],a=t[0],o=e[n]-i,s=t[n]-a,l=-1;++l<=n;)r=l/n,this._basis.point(this._beta*e[l]+(1-this._beta)*(i+r*o),this._beta*t[l]+(1-this._beta)*(a+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Ee=function e(t){function n(e){return 1===t?new be(e):new Ae(e,t)}return n.beta=function(t){return e(+t)},n}(.85);function Ce(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Te(e,t){this._context=e,this._k=(1-t)/6}Te.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ce(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Ce(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Re=function e(t){function n(e){return new Te(e,t)}return n.tension=function(t){return e(+t)},n}(0);function Pe(e,t){this._context=e,this._k=(1-t)/6}Pe.prototype={areaStart:ve,areaEnd:ve,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Ce(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Le=function e(t){function n(e){return new Pe(e,t)}return n.tension=function(t){return e(+t)},n}(0);function De(e,t){this._context=e,this._k=(1-t)/6}De.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ce(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Ie=function e(t){function n(e){return new De(e,t)}return n.tension=function(t){return e(+t)},n}(0);function ke(e,t,n){var r=e._x1,i=e._y1,a=e._x2,o=e._y2;if(e._l01_a>h){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>h){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*c+e._x1*e._l23_2a-t*e._l12_2a)/u,o=(o*c+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(r,i,a,o,e._x2,e._y2)}function Be(e,t){this._context=e,this._alpha=t}Be.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:ke(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Fe=function e(t){function n(e){return t?new Be(e,t):new Te(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function Ne(e,t){this._context=e,this._alpha=t}Ne.prototype={areaStart:ve,areaEnd:ve,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:ke(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Oe=function e(t){function n(e){return t?new Ne(e,t):new Pe(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function ze(e,t){this._context=e,this._alpha=t}ze.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ke(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Ue=function e(t){function n(e){return t?new ze(e,t):new De(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function He(e){this._context=e}function Ge(e){return new He(e)}function Ve(e){return e<0?-1:1}function je(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(Ve(a)+Ve(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function We(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Xe(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,s=(a-r)/3;e._context.bezierCurveTo(r+s,i+s*t,a-s,o-s*n,a,o)}function qe(e){this._context=e}function Ye(e){this._context=new Ze(e)}function Ze(e){this._context=e}function Je(e){return new qe(e)}function $e(e){return new Ye(e)}function Ke(e){this._context=e}function Qe(e){var t,n,r=e.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/a[t-1],a[t]-=n,o[t]-=n*o[t-1];for(i[r-1]=o[r-1]/a[r-1],t=r-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function et(e){return new Ke(e)}function tt(e,t){this._context=e,this._t=t}function nt(e){return new tt(e,.5)}function rt(e){return new tt(e,0)}function it(e){return new tt(e,1)}function at(e,t){if((i=e.length)>1)for(var n,r,i,a=1,o=e[t[0]],s=o.length;a<i;++a)for(r=o,o=e[t[a]],n=0;n<s;++n)o[n][1]+=o[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function ot(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function st(e,t){return e[t]}function lt(){var e=i([]),t=ot,n=at,r=st;function a(i){var a,o,s=e.apply(this,arguments),l=i.length,c=s.length,u=new Array(c);for(a=0;a<c;++a){for(var d,h=s[a],f=u[a]=new Array(l),p=0;p<l;++p)f[p]=d=[0,+r(i[p],h,p,i)],d.data=i[p];f.key=h}for(a=0,o=t(u);a<c;++a)u[o[a]].index=a;return n(u,o),u}return a.keys=function(t){return arguments.length?(e="function"==typeof t?t:i(G.call(t)),a):e},a.value=function(e){return arguments.length?(r="function"==typeof e?e:i(+e),a):r},a.order=function(e){return arguments.length?(t=null==e?ot:"function"==typeof e?e:i(G.call(e)),a):t},a.offset=function(e){return arguments.length?(n=null==e?at:e,a):n},a}function ct(e,t){if((r=e.length)>0){for(var n,r,i,a=0,o=e[0].length;a<o;++a){for(i=n=0;n<r;++n)i+=e[n][a][1]||0;if(i)for(n=0;n<r;++n)e[n][a][1]/=i}at(e,t)}}function ut(e,t){if((s=e.length)>0)for(var n,r,i,a,o,s,l=0,c=e[t[0]].length;l<c;++l)for(a=o=0,n=0;n<s;++n)(i=(r=e[t[n]][l])[1]-r[0])>0?(r[0]=a,r[1]=a+=i):i<0?(r[1]=o,r[0]=o+=i):(r[0]=0,r[1]=i)}function dt(e,t){if((n=e.length)>0){for(var n,r=0,i=e[t[0]],a=i.length;r<a;++r){for(var o=0,s=0;o<n;++o)s+=e[o][r][1]||0;i[r][1]+=i[r][0]=-s/2}at(e,t)}}function ht(e,t){if((i=e.length)>0&&(r=(n=e[t[0]]).length)>0){for(var n,r,i,a=0,o=1;o<r;++o){for(var s=0,l=0,c=0;s<i;++s){for(var u=e[t[s]],d=u[o][1]||0,h=(d-(u[o-1][1]||0))/2,f=0;f<s;++f){var p=e[t[f]];h+=(p[o][1]||0)-(p[o-1][1]||0)}l+=d,c+=h*d}n[o-1][1]+=n[o-1][0]=a,l&&(a-=c/l)}n[o-1][1]+=n[o-1][0]=a,at(e,t)}}function ft(e){var t=e.map(pt);return ot(e).sort((function(e,n){return t[e]-t[n]}))}function pt(e){for(var t,n=-1,r=0,i=e.length,a=-1/0;++n<i;)(t=+e[n][1])>a&&(a=t,r=n);return r}function mt(e){var t=e.map(gt);return ot(e).sort((function(e,n){return t[e]-t[n]}))}function gt(e){for(var t,n=0,r=-1,i=e.length;++r<i;)(t=+e[r][1])&&(n+=t);return n}function vt(e){return mt(e).reverse()}function yt(e){var t,n,r=e.length,i=e.map(gt),a=ft(e),o=0,s=0,l=[],c=[];for(t=0;t<r;++t)n=a[t],o<s?(o+=i[n],l.push(n)):(s+=i[n],c.push(n));return c.reverse().concat(l)}function bt(e){return ot(e).reverse()}He.prototype={areaStart:ve,areaEnd:ve,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},qe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Xe(this,this._t0,We(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Xe(this,We(this,n=je(this,e,t)),n);break;default:Xe(this,this._t0,n=je(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(Ye.prototype=Object.create(qe.prototype)).point=function(e,t){qe.prototype.point.call(this,t,e)},Ze.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}},Ke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=Qe(e),i=Qe(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},tt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}}},9478:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o,a:()=>s});var r=n(1829),i=n(1222),a=(0,r.Z)((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*i.yB)/i.UD),(e=>e.getDate()-1));const o=a;var s=a.range},1222:(e,t,n)=>{"use strict";n.d(t,{UD:()=>o,Y2:()=>a,Ym:()=>r,iM:()=>s,jz:()=>l,qz:()=>c,yB:()=>i});const r=1e3,i=60*r,a=60*i,o=24*a,s=7*o,l=30*o,c=365*o},2784:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o,i:()=>s});var r=n(1829),i=n(1222),a=(0,r.Z)((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*i.Ym-e.getMinutes()*i.yB)}),(function(e,t){e.setTime(+e+t*i.Y2)}),(function(e,t){return(t-e)/i.Y2}),(function(e){return e.getHours()}));const o=a;var s=a.range},2796:(e,t,n)=>{"use strict";n.r(t),n.d(t,{timeDay:()=>l.Z,timeDays:()=>l.a,timeFriday:()=>c.mC,timeFridays:()=>c.b$,timeHour:()=>s.Z,timeHours:()=>s.i,timeInterval:()=>r.Z,timeMillisecond:()=>i.Z,timeMilliseconds:()=>i.m,timeMinute:()=>o.Z,timeMinutes:()=>o.L,timeMonday:()=>c.wA,timeMondays:()=>c.bJ,timeMonth:()=>u.Z,timeMonths:()=>u.e,timeSaturday:()=>c.EY,timeSaturdays:()=>c.Ff,timeSecond:()=>a.Z,timeSeconds:()=>a.m,timeSunday:()=>c.OM,timeSundays:()=>c.vm,timeThursday:()=>c.bL,timeThursdays:()=>c.$t,timeTickInterval:()=>y._g,timeTicks:()=>y.jK,timeTuesday:()=>c.sy,timeTuesdays:()=>c.aU,timeWednesday:()=>c.zg,timeWednesdays:()=>c.Ld,timeWeek:()=>c.OM,timeWeeks:()=>c.vm,timeYear:()=>d.Z,timeYears:()=>d.g,utcDay:()=>p.Z,utcDays:()=>p.y,utcFriday:()=>m.QQ,utcFridays:()=>m.fz,utcHour:()=>f.Z,utcHours:()=>f.X,utcMillisecond:()=>i.Z,utcMilliseconds:()=>i.m,utcMinute:()=>h.Z,utcMinutes:()=>h.N,utcMonday:()=>m.l6,utcMondays:()=>m.$3,utcMonth:()=>g.Z,utcMonths:()=>g.K,utcSaturday:()=>m.g4,utcSaturdays:()=>m.Q_,utcSecond:()=>a.Z,utcSeconds:()=>a.m,utcSunday:()=>m.Ox,utcSundays:()=>m.SU,utcThursday:()=>m.hB,utcThursdays:()=>m.xj,utcTickInterval:()=>y.jo,utcTicks:()=>y.WG,utcTuesday:()=>m.J1,utcTuesdays:()=>m.DK,utcWednesday:()=>m.b3,utcWednesdays:()=>m.uy,utcWeek:()=>m.Ox,utcWeeks:()=>m.SU,utcYear:()=>v.Z,utcYears:()=>v.D});var r=n(1829),i=n(8179),a=n(5086),o=n(7197),s=n(2784),l=n(9478),c=n(2776),u=n(4584),d=n(2209),h=n(4878),f=n(590),p=n(9692),m=n(7326),g=n(7512),v=n(1181),y=n(1955)},1829:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=new Date,i=new Date;function a(e,t,n,o){function s(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return s.floor=function(t){return e(t=new Date(+t)),t},s.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},s.round=function(e){var t=s(e),n=s.ceil(e);return e-t<n-e?t:n},s.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},s.range=function(n,r,i){var a,o=[];if(n=s.ceil(n),i=null==i?1:Math.floor(i),!(n<r&&i>0))return o;do{o.push(a=new Date(+n)),t(n,i),e(n)}while(a<n&&n<r);return o},s.filter=function(n){return a((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(s.count=function(t,a){return r.setTime(+t),i.setTime(+a),e(r),e(i),Math.floor(n(r,i))},s.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?s.filter(o?function(t){return o(t)%e==0}:function(t){return s.count(0,t)%e==0}):s:null}),s}},8179:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a,m:()=>o});var r=n(1829),i=(0,r.Z)((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?(0,r.Z)((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):i:null};const a=i;var o=i.range},7197:(e,t,n)=>{"use strict";n.d(t,{L:()=>s,Z:()=>o});var r=n(1829),i=n(1222),a=(0,r.Z)((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*i.Ym)}),(function(e,t){e.setTime(+e+t*i.yB)}),(function(e,t){return(t-e)/i.yB}),(function(e){return e.getMinutes()}));const o=a;var s=a.range},4584:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i,e:()=>a});var r=(0,n(1829).Z)((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()}));const i=r;var a=r.range},5086:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o,m:()=>s});var r=n(1829),i=n(1222),a=(0,r.Z)((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*i.Ym)}),(function(e,t){return(t-e)/i.Ym}),(function(e){return e.getUTCSeconds()}));const o=a;var s=a.range},1955:(e,t,n)=>{"use strict";n.d(t,{WG:()=>_,_g:()=>S,jK:()=>M,jo:()=>w});var r=n(9173),i=n(7614),a=n(1222),o=n(8179),s=n(5086),l=n(7197),c=n(2784),u=n(9478),d=n(2776),h=n(4584),f=n(2209),p=n(4878),m=n(590),g=n(9692),v=n(7326),y=n(7512),b=n(1181);function x(e,t,n,l,c,u){const d=[[s.Z,1,a.Ym],[s.Z,5,5*a.Ym],[s.Z,15,15*a.Ym],[s.Z,30,30*a.Ym],[u,1,a.yB],[u,5,5*a.yB],[u,15,15*a.yB],[u,30,30*a.yB],[c,1,a.Y2],[c,3,3*a.Y2],[c,6,6*a.Y2],[c,12,12*a.Y2],[l,1,a.UD],[l,2,2*a.UD],[n,1,a.iM],[t,1,a.jz],[t,3,3*a.jz],[e,1,a.qz]];function h(t,n,s){const l=Math.abs(n-t)/s,c=(0,r.Z)((([,,e])=>e)).right(d,l);if(c===d.length)return e.every((0,i.ly)(t/a.qz,n/a.qz,s));if(0===c)return o.Z.every(Math.max((0,i.ly)(t,n,s),1));const[u,h]=d[l/d[c-1][2]<d[c][2]/l?c-1:c];return u.every(h)}return[function(e,t,n){const r=t<e;r&&([e,t]=[t,e]);const i=n&&"function"==typeof n.range?n:h(e,t,n),a=i?i.range(e,+t+1):[];return r?a.reverse():a},h]}const[_,w]=x(b.Z,y.Z,v.Ox,g.Z,m.Z,p.Z),[M,S]=x(f.Z,h.Z,d.OM,u.Z,c.Z,l.Z)},9692:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o,y:()=>s});var r=n(1829),i=n(1222),a=(0,r.Z)((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/i.UD}),(function(e){return e.getUTCDate()-1}));const o=a;var s=a.range},590:(e,t,n)=>{"use strict";n.d(t,{X:()=>s,Z:()=>o});var r=n(1829),i=n(1222),a=(0,r.Z)((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*i.Y2)}),(function(e,t){return(t-e)/i.Y2}),(function(e){return e.getUTCHours()}));const o=a;var s=a.range},4878:(e,t,n)=>{"use strict";n.d(t,{N:()=>s,Z:()=>o});var r=n(1829),i=n(1222),a=(0,r.Z)((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*i.yB)}),(function(e,t){return(t-e)/i.yB}),(function(e){return e.getUTCMinutes()}));const o=a;var s=a.range},7512:(e,t,n)=>{"use strict";n.d(t,{K:()=>a,Z:()=>i});var r=(0,n(1829).Z)((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()}));const i=r;var a=r.range},7326:(e,t,n)=>{"use strict";n.d(t,{$3:()=>p,DK:()=>m,J1:()=>l,Ox:()=>o,QQ:()=>d,Q_:()=>b,SU:()=>f,b3:()=>c,fz:()=>y,g4:()=>h,hB:()=>u,l6:()=>s,uy:()=>g,xj:()=>v});var r=n(1829),i=n(1222);function a(e){return(0,r.Z)((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/i.iM}))}var o=a(0),s=a(1),l=a(2),c=a(3),u=a(4),d=a(5),h=a(6),f=o.range,p=s.range,m=l.range,g=c.range,v=u.range,y=d.range,b=h.range},1181:(e,t,n)=>{"use strict";n.d(t,{D:()=>o,Z:()=>a});var r=n(1829),i=(0,r.Z)((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));i.every=function(e){return isFinite(e=Math.floor(e))&&e>0?(0,r.Z)((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};const a=i;var o=i.range},2776:(e,t,n)=>{"use strict";n.d(t,{$t:()=>v,EY:()=>h,Ff:()=>b,Ld:()=>g,OM:()=>o,aU:()=>m,b$:()=>y,bJ:()=>p,bL:()=>u,mC:()=>d,sy:()=>l,vm:()=>f,wA:()=>s,zg:()=>c});var r=n(1829),i=n(1222);function a(e){return(0,r.Z)((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*i.yB)/i.iM}))}var o=a(0),s=a(1),l=a(2),c=a(3),u=a(4),d=a(5),h=a(6),f=o.range,p=s.range,m=l.range,g=c.range,v=u.range,y=d.range,b=h.range},2209:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a,g:()=>o});var r=n(1829),i=(0,r.Z)((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));i.every=function(e){return isFinite(e=Math.floor(e))&&e>0?(0,r.Z)((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};const a=i;var o=i.range},2127:function(e,t,n){!function(e,t,n,r,i,a,o,s,l,c,u,d,h){"use strict";var f=function(e,t,n){var r=t[n];if("function"!=typeof r)throw new Error("Attempt to rebind ".concat(n," which isn't a function on the source object"));return function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var o=r.apply(t,i);return o===t?e:o}},p=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];e[s]=f(e,t,s)}return e},m=function(e){return function(t){return e.reduce((function(e,t){return e&&t(e)}),t)}},g=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];for(var a=m(r),o=0,s=Object.keys(t);o<s.length;o++){var l=s[o],c=a(l);c&&(e[c]=f(e,t,l))}return e},v=function(e){return e.map((function(e){return"string"==typeof e?new RegExp("^".concat(e,"$")):e}))},y=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t=v(t),function(e){return t.every((function(t){return!t.test(e)}))&&e}},b=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t=v(t),function(e){return t.some((function(t){return t.test(e)}))&&e}},x=function(e){return function(t){return e[t]}},_=function(e){return function(t){return e+((n=t)[0].toUpperCase()+n.slice(1));var n}};function w(e){return e}function M(e){}function S(e){return"function"==typeof e?e:function(){return e}}function A(e){return"number"==typeof e&&isNaN(e)?void 0:e}function E(){var e=function(){return 10},t=M,n=w,r=function(e){return null!=e},i=function(i){var a=e.apply(this,arguments),o=i.slice(0,a).map(n);return i.map((function(e,i){return i>=a&&(o.shift(),o.push(n(e,i))),i<a-1||o.some((function(e){return!r(e)}))?t(void 0,i):t(o,i)}))};return i.period=function(){return arguments.length?(e=S(arguments.length<=0?void 0:arguments[0]),i):e},i.accumulator=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],i):t},i.defined=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],i):r},i.value=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],i):n},i}function C(){var e=w,n=function(){return 9},r=function(e){var n=[];return function(r){var i;return n.length<e&&(null!=r?n.push(r):n=[]),n.length>=e&&(i=t.mean(n)),i}},i=function(t){var i,a=n.apply(this,arguments),o=2/(a+1),s=r(a);return t.map((function(t,n){var r=e(t,n);return A(i=void 0===i?s(r):r*o+(1-o)*i)}))};return i.period=function(){return arguments.length?(n=S(arguments.length<=0?void 0:arguments[0]),i):n},i.value=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],i):e},i}function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t,n){return t&&P(e.prototype,t),n&&P(e,n),e}function D(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}function k(e,t){return k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},k(e,t)}function B(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function F(e,t,n){return F=B()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&k(i,n.prototype),i},F.apply(null,arguments)}function N(e){var t="function"==typeof Map?new Map:void 0;return N=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return F(e,arguments,I(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),k(r,e)},N(e)}function O(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function z(e){var t=B();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return O(this,n)}}function U(e,t){return G(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}(e,t)||j(e,t)||X()}function H(e){return function(e){if(Array.isArray(e))return W(e)}(e)||V(e)||j(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e){if(Array.isArray(e))return e}function V(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function j(e,t){if(e){if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function X(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function q(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=j(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Y(){var e=E().accumulator((function(e){return e&&t.mean(e)})),n=function(t){return e(t)};return p(n,e,"period","value"),n}function Z(){var e={distance:function(e,t){return t-e},offset:function(e,t){return e instanceof Date?new Date(e.getTime()+t):e+t},clampUp:function(e){return e},clampDown:function(e){return e},copy:function(){return e}};return e}function J(e,t){var n=e.map(t.clampUp);return n.length!==new Set(n.map((function(e){return null==e?void 0:e.valueOf()}))).size&&console.warn("There are multiple ticks that fall within a discontinuity, which has led to them being rendered on top of each other. Consider using scale.ticks to explicitly specify the ticks for the scale."),n}var $=function(e,t,n,r){var i=0,a=1,o=6,s=432e6,l={},c=function(t){return 0===e(t)||6===e(t)};return l.clampDown=function(n){if(n&&c(n)){var r=t.ceil(n);return e(r)===i?t.offset(r,-1):e(r)===a?t.offset(r,-2):r}return n},l.clampUp=function(n){if(n&&c(n)){var r=t.floor(n);return e(r)===o?t.offset(r,2):e(r)===i?t.offset(r,1):r}return n},l.distance=function(e,t){e=l.clampUp(e),t=l.clampDown(t);var r=n.ceil(e);if(t<r)return t.getTime()-e.getTime();var i=r.getTime()-e.getTime(),a=n.ceil(t),o=a.getTime()-t.getTime();return Math.round((a.getTime()-r.getTime())/6048e5)*s+i-o},l.offset=function(e,i){var a=c(e)?l.clampUp(e):e;if(0===i)return a;var o=i<0,u=i>0,d=i,h=o?r.floor(a):n.ceil(a);if(d-=h.getTime()-a.getTime(),o&&d>0||u&&d<0)return new Date(a.getTime()+i);a=o?h:t.offset(h,2);var f=Math.floor(d/s);return a=t.offset(a,7*f),d-=f*s,new Date(a.getTime()+d)},l.copy=function(){return l},l},K=864e5,Q="00:00:00.000";function ee(e){if(1!==arguments.length||"string"!=typeof e)throw"Expected single argument of type string";var t=function(e,t){return!!Number.isInteger(e)&&e>=0&&e<=t},n=[0,0,0,0],r=e.split(":");if(r.length<2||r.length>3)throw"Expected an argument wiht 2 or 3 colon delimited parts.";if(n[0]=t(parseInt(r[0],10),23)?parseInt(r[0],10):function(){throw"'Hours' component must be an int between 0 and 23, but was '".concat(r[0],"'")}(),n[1]=t(parseInt(r[1],10),59)?parseInt(r[1],10):function(){throw"'Minutes' component must be an int between 0 and 59, but was '".concat(r[1],"'")}(),3===r.length){var i=r[2].split(".").map((function(e){return parseInt(e,10)}));n[2]=t(i[0],59)?i[0]:function(){throw"'Seconds' component must be an int between 0 and 59, but was '".concat(i[0],"'")}(),2===i.length&&(n[3]=t(i[1],999)?i[1]:function(){throw"'Miliseconds' component must be an int between 0 and 999, but was '".concat(i[1],"'")}())}return"".concat(n[0].toString(10).padStart(2,"0"),":").concat(n[1].toString(10).padStart(2,"0"),":").concat(n[2].toString(10).padStart(2,"0"),".").concat(n[3].toString(10).padStart(3,"0"))}var te=function(e,t){var n=e.map((function(e){return function(e,t){if(2!=arguments.length||!Array.isArray(e)||2!==e.length||"string"!=typeof e[0]||"string"!=typeof e[1])throw"Expected argument is a single string[] of length 2.";"SOD"===e[0]&&(e[0]=Q),"EOD"===e[1]&&(e[1]=Q);var n=ee(e[0]),r=ee(e[1]);if(r!==Q&&n>r)throw"Time range start time '".concat(n,"' must be before end time '").concat(r,"' or both must equal ").concat(Q);var i={startTime:n,endTime:r,lenghtInMs:t.setTime(new Date(r===Q?K:0),r)-t.setTime(new Date(0),n),isInRange:function(e){var n=t.getTimeString(e);return i.startTime<=n&&(i.endTime===Q||i.endTime>n)}};return i}(e,t)})).sort((function(e,t){return e.startTime<t.startTime?-1:e.startTime>t.startTime?1:0}));return{totalTradingTimeInMiliseconds:K-n.reduce((function(e,t){return e+t.lenghtInMs}),0),nonTradingTimeRanges:n,totalTradingMillisecondsBetween:function(e,r){if(e.getTime()===r.getTime())return 0;if(t.dayInterval(e).getTime()!==t.dayInterval(r).getTime()&&t.getStartOfNextDay(e).getTime()!==r.getTime())throw"tradingDay.totalTradingMillisecondsBetween arguments must be on the same day or intervalEnd must be the start of the next day instead: intervalStart: '".concat(e,"'; intervalEnd: '").concat(r,"'");var i,a=0,o=q(n.filter((function(n){return n.endTime===Q||t.setTime(e,n.endTime)>=e})));try{for(o.s();!(i=o.n()).done;){var s=i.value,l=t.setTime(e,s.startTime),c=s.endTime===Q?t.getStartOfNextDay(e):t.setTime(e,s.endTime);if(e<l&&r<l)return a+t.msInterval.count(e,r);if(e<l&&(a+=t.msInterval.count(e,l)),r<c)return a;e=c}}catch(e){o.e(e)}finally{o.f()}return a+t.msInterval.count(e,r)},offset:function(e,r){if(0===r)return[e,r];var i=t.msInterval.offset(e,r),a=r>0?n.filter((function(n){return t.setTime(e,n.startTime)>=e})):n.filter((function(n){return t.setTime(e,n.startTime)<e})).reverse();if(0===a.length)return[t.msInterval.offset(e,r),0];if(r>0){var o,s=q(a);try{for(s.s();!(o=s.n()).done;){var l=o.value,c=t.setTime(e,l.startTime);c<=i&&(r-=t.msInterval.count(e,c),e=l.endTime===Q?t.getStartOfNextDay(e):t.setTime(e,l.endTime),i=t.msInterval.offset(e,r))}}catch(e){s.e(e)}finally{s.f()}r-=t.msInterval.count(e,i)}else{var u,d=q(a);try{for(d.s();!(u=d.n()).done;){var h=u.value,f=h.endTime===Q?t.getStartOfNextDay(e):t.setTime(e,h.endTime);i<f&&(r+=t.msInterval.count(f,e)+1,e=t.msInterval.offset(t.setTime(e,h.startTime),-1),i=t.msInterval.offset(e,r))}}catch(e){d.e(e)}finally{d.f()}r+=t.msInterval.count(i,e)}if(0!==r)throw"tradingDay.offset was called with an offset that spans more than a day";return[i,r]}}},ne=function(e,t,n,r,i){var a={getTimeComponentArrayFromString:function(e){return[e.slice(0,2),e.slice(3,5),e.slice(6,8),e.slice(9,12)]},getTimeString:function(e){var t=U(n(e).map((function(e){return e.toString(10).padStart(2,"0")})),4),r=t[0],i=t[1],a=t[2],o=t[3];return"".concat(r,":").concat(i,":").concat(a,".").concat(o.padStart(3,"0"))},setTime:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=U(a.getTimeComponentArrayFromString(n),4),s=o[0],l=o[1],c=o[2],u=o[3];return i.offset(e(t,s,l,c,u),r)},getStartOfNextDay:function(e){return r.offset(r.floor(e),1)},getEndOfPreviousDay:function(e){return i.offset(r.floor(e),-1)}};return a.dayInterval=r,a.msInterval=i,a.getDay=t,a},re=ne((function(e,t,n,r,i){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),t,n,r,i)}),(function(e){return e.getDay()}),(function(e){return[e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()]}),r.timeDay,r.timeMillisecond),ie=function(e,t){var n=function(t){return void 0===e[t]?[]:e[t]},r=[te(n("Sunday"),t),te(n("Monday"),t),te(n("Tuesday"),t),te(n("Wednesday"),t),te(n("Thursday"),t),te(n("Friday"),t),te(n("Saturday"),t)],i=r.reduce((function(e,t){return e+t.totalTradingTimeInMiliseconds}),0);if(0===i)throw"Trading pattern must yield at least 1 ms of trading time";var a={tradingDays:r,totalTradingWeekMilliseconds:i,clampUp:function(e){var n,i=q(r[t.getDay(e)].nonTradingTimeRanges);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.isInRange(e))return o.endTime===Q?a.clampUp(t.getStartOfNextDay(e)):t.setTime(e,o.endTime)}}catch(e){i.e(e)}finally{i.f()}return e},clampDown:function(e){var n,i=q(r[t.getDay(e)].nonTradingTimeRanges);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.isInRange(e))return o.startTime===Q?a.clampDown(t.getEndOfPreviousDay(e)):t.setTime(e,o.startTime,-1)}}catch(e){i.e(e)}finally{i.f()}return e},distance:function(e,n){if(e.getTime()===n.getTime())return 0;var r=U(e<=n?[e,n,1]:[n,e,-1],3),i=r[0],o=r[1],s=r[2];if(t.dayInterval(i).getTime()===t.dayInterval(o).getTime())return a.tradingDays[t.getDay(i)].totalTradingMillisecondsBetween(i,o);var l=a.tradingDays[t.getDay(i)].totalTradingMillisecondsBetween(i,t.dayInterval.offset(t.dayInterval(i),1))+a.tradingDays[t.getDay(o)].totalTradingMillisecondsBetween(t.dayInterval(o),o);return 1===t.dayInterval.count(i,o)?l:(i=t.dayInterval.offset(t.dayInterval(i),1),o=t.dayInterval(o),s*t.dayInterval.range(i,o).reduce((function(e,n,r,i){var o=r<i.length-1?i[r+1]:t.dayInterval.offset(n,1),s=o-n!==K,l=a.tradingDays[t.getDay(n)];return e+(s?l.totalTradingMillisecondsBetween(n,o):l.totalTradingTimeInMiliseconds)}),l))},offset:function(e,n){e=n>=0?a.clampUp(e):a.clampDown(e);var r=function(e,n,r){if(r<0){var i=t.dayInterval(n),o=e.totalTradingMillisecondsBetween(i,n);return Math.abs(r)<=o?e.offset(n,r):[a.clampDown(t.msInterval.offset(i,-1)),r+o+1]}var s=t.getStartOfNextDay(n),l=e.totalTradingMillisecondsBetween(n,s);return r<l?e.offset(n,r):[a.clampUp(s),r-l]};if(0===n)return e;var i,o=n<0?function(e,n,r){return[a.clampDown(t.dayInterval.offset(e,-1)),n+r]}:function(e,n,r){return[a.clampUp(t.dayInterval.offset(e)),n-r]},s=a.tradingDays[t.getDay(e)],l=U(r(s,e,n),2);for(e=l[0],n=l[1];0!==n;)if(s=a.tradingDays[t.getDay(e)],i=e,t.dayInterval.offset(i)-t.dayInterval(i)!==K){var c=U(r(s,e,n),2);e=c[0],n=c[1]}else{var u=U(Math.abs(n)>=s.totalTradingTimeInMiliseconds?o(e,n,s.totalTradingTimeInMiliseconds):r(s,e,n),2);e=u[0],n=u[1]}return e},copy:function(){return a}};return a},ae=ne((function(e,t,n,r,i){return new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),t,n,r,i))}),(function(e){return e.getUTCDay()}),(function(e){return[e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()]}),r.utcDay,r.utcMillisecond);function oe(){var e=[function(e){return e}],n=[0,0],r="percent",i=null,a=[],o=function(o){var s,l=new Array(o.length),c=q(e);try{for(c.s();!(s=c.n()).done;)for(var u=s.value,d=0;d<o.length;d++){var h=u(o[d],d);Array.isArray(h)?l.push.apply(l,H(h)):l.push(h)}}catch(e){c.e(e)}finally{c.f()}var f=[t.min(l),t.max(l)];if(f[0]=null==f[0]?t.min(a):t.min([f[0]].concat(H(a))),f[1]=null==f[1]?t.max(a):t.max([f[1]].concat(H(a))),null!=i){var p=Math.max(Math.abs(f[1]-i),Math.abs(f[0]-i));f[0]=i-p,f[1]=i+p}switch(r){case"domain":f[0]-=n[0],f[1]+=n[1];break;case"percent":var m=f[1]-f[0];f[0]-=n[0]*m,f[1]+=n[1]*m;break;default:throw new Error("Unknown padUnit: ".concat(r))}return f};return o.accessors=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],o):e},o.pad=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},o.padUnit=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],o):r},o.include=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],o):a},o.symmetricalAbout=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],o):i},o}function se(){var e=[],t=[0,0],n="percent",r=null,i=[],a=oe(),o=function(e){return null!=e?e.valueOf():null},s=function(s){var l=e.map((function(e){return function(){var t=e.apply(void 0,arguments);return Array.isArray(t)?t.map(o):o(t)}}));return a.accessors(l).pad(t).padUnit(n).symmetricalAbout(null!=r?r.valueOf():null).include(i.map((function(e){return e.valueOf()}))),a(s).map((function(e){return new Date(e)}))};return s.accessors=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],s):e},s.pad=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],s):t},s.padUnit=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],s):n},s.include=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],s):i},s.symmetricalAbout=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],s):r},s}function le(){var e=1,t=20,n=.1,r=.1,a=i.randomNormal(),o=function(){for(var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=e/t,s=[],l=0;l<t+1;l++){s.push(i);var c=a()*Math.sqrt(o)*r+(n-r*r/2)*o;i*=Math.exp(c)}return s};return o.period=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],o):e},o.steps=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],o):t},o.mu=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},o.sigma=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],o):r},o.random=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],o):a},o}function ce(e){return"function"==typeof e?e:function(){return e}}function ue(){var e=10,n=function(n){return e<=1?n.map((function(e){return[e]})):t.range(0,Math.ceil(n.length/e)).map((function(t){return n.slice(t*e,(t+1)*e)}))};return n.bucketSize=function(t){return arguments.length?(e=t,n):e},n}var de=function(e){return"function"==typeof e?e:function(){return e}},he=function(){var e=null,t=function(e){return e.date},n=function(e){return e.open},r=function(e){return e.high},i=function(e){return e.low},a=function(e){return e.close},s="vertical",l=de(3),c=function(c){var u=e||o.path();return c.forEach((function(e,o){var c=t(e,o),d=n(e,o),h=r(e,o),f=i(e,o),p=a(e,o),m=l(e,o)/2;"vertical"===s?(u.moveTo(c,f),u.lineTo(c,h),u.moveTo(c,d),u.lineTo(c-m,d),u.moveTo(c,p),u.lineTo(c+m,p)):(u.moveTo(f,c),u.lineTo(h,c),u.moveTo(d,c),u.lineTo(d,c+m),u.moveTo(p,c),u.lineTo(p,c-m))})),e?null:u.toString()};return c.context=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],c):e},c.x=function(){return arguments.length?(t=de(arguments.length<=0?void 0:arguments[0]),c):t},c.open=function(){return arguments.length?(n=de(arguments.length<=0?void 0:arguments[0]),c):n},c.high=function(){return arguments.length?(r=de(arguments.length<=0?void 0:arguments[0]),c):r},c.low=function(){return arguments.length?(i=de(arguments.length<=0?void 0:arguments[0]),c):i},c.close=function(){return arguments.length?(a=de(arguments.length<=0?void 0:arguments[0]),c):a},c.width=function(){return arguments.length?(l=de(arguments.length<=0?void 0:arguments[0]),c):l},c.orient=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],c):s},c},fe=function(){var e=null,t=function(e){return e.x},n=function(e){return e.y},r="center",i="center",a=function(e){return e.height},s=de(3),l=function(l,c){var u=e||o.path();return l.forEach((function(e,o){var l,d,h=t.call(this,e,c||o),f=n.call(this,e,c||o),p=a.call(this,e,c||o),m=s.call(this,e,c||o);switch(r){case"left":l=m;break;case"right":l=0;break;case"center":l=m/2;break;default:throw new Error("Invalid horizontal alignment "+r)}switch(i){case"bottom":d=-p;break;case"top":d=0;break;case"center":d=p/2;break;default:throw new Error("Invalid vertical alignment "+i)}u.rect(h-l,f-d,m,p)}),this),e?null:u.toString()};return l.context=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],l):e},l.x=function(){return arguments.length?(t=de(arguments.length<=0?void 0:arguments[0]),l):t},l.y=function(){return arguments.length?(n=de(arguments.length<=0?void 0:arguments[0]),l):n},l.width=function(){return arguments.length?(s=de(arguments.length<=0?void 0:arguments[0]),l):s},l.horizontalAlign=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],l):r},l.height=function(){return arguments.length?(a=de(arguments.length<=0?void 0:arguments[0]),l):a},l.verticalAlign=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],l):i},l},pe=function(){var e=null,t=function(e){return e.date},n=function(e){return e.open},r=function(e){return e.high},i=function(e){return e.low},a=function(e){return e.close},s=de(3),l=function(l){var c=e||o.path();return l.forEach((function(e,o){var l=t(e,o),u=n(e,o),d=r(e,o),h=i(e,o),f=a(e,o),p=s(e,o),m=p/2;c.rect(l-m,u,p,f-u),c.moveTo(l,Math.min(f,u)),c.lineTo(l,d),c.moveTo(l,Math.max(f,u)),c.lineTo(l,h)})),e?null:c.toString()};return l.context=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],l):e},l.x=function(){return arguments.length?(t=de(arguments.length<=0?void 0:arguments[0]),l):t},l.open=function(){return arguments.length?(n=de(arguments.length<=0?void 0:arguments[0]),l):n},l.high=function(){return arguments.length?(r=de(arguments.length<=0?void 0:arguments[0]),l):r},l.low=function(){return arguments.length?(i=de(arguments.length<=0?void 0:arguments[0]),l):i},l.close=function(){return arguments.length?(a=de(arguments.length<=0?void 0:arguments[0]),l):a},l.width=function(){return arguments.length?(s=de(arguments.length<=0?void 0:arguments[0]),l):s},l},me=function(){var e=null,t=function(e){return e.value},n=function(e){return e.median},r=function(e){return e.upperQuartile},i=function(e){return e.lowerQuartile},a=function(e){return e.high},s=function(e){return e.low},l="vertical",c=de(5),u=de(.5),d=function(d){var h=e||o.path();return d.forEach((function(e,o){var d=t(e,o),f=c(e,o),p=f/2,m=f*u(e,o)/2,g=a(e,o),v=r(e,o),y=n(e,o),b=i(e,o),x=s(e,o),_=b-v;"vertical"===l?(h.moveTo(d-m,g),h.lineTo(d+m,g),h.moveTo(d,g),h.lineTo(d,v),h.rect(d-p,v,f,_),h.moveTo(d-p,y),h.lineTo(d+p,y),h.moveTo(d,b),h.lineTo(d,x),h.moveTo(d-m,x),h.lineTo(d+m,x)):(h.moveTo(x,d-m),h.lineTo(x,d+m),h.moveTo(x,d),h.lineTo(b,d),h.rect(b,d-p,-_,f),h.moveTo(y,d-p),h.lineTo(y,d+p),h.moveTo(v,d),h.lineTo(g,d),h.moveTo(g,d-m),h.lineTo(g,d+m))})),e?null:h.toString()};return d.context=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],d):e},d.value=function(){return arguments.length?(t=de(arguments.length<=0?void 0:arguments[0]),d):t},d.median=function(){return arguments.length?(n=de(arguments.length<=0?void 0:arguments[0]),d):n},d.upperQuartile=function(){return arguments.length?(r=de(arguments.length<=0?void 0:arguments[0]),d):r},d.lowerQuartile=function(){return arguments.length?(i=de(arguments.length<=0?void 0:arguments[0]),d):i},d.high=function(){return arguments.length?(a=de(arguments.length<=0?void 0:arguments[0]),d):a},d.low=function(){return arguments.length?(s=de(arguments.length<=0?void 0:arguments[0]),d):s},d.width=function(){return arguments.length?(c=de(arguments.length<=0?void 0:arguments[0]),d):c},d.orient=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],d):l},d.cap=function(){return arguments.length?(u=de(arguments.length<=0?void 0:arguments[0]),d):u},d},ge=function(){var e=null,t=function(e){return e.x},n=function(e){return e.high},r=function(e){return e.low},i="vertical",a=de(5),s=function(s){var l=e||o.path();return s.forEach((function(e,o){var s=t(e,o),c=a(e,o)/2,u=n(e,o),d=r(e,o);"vertical"===i?(l.moveTo(s-c,u),l.lineTo(s+c,u),l.moveTo(s,u),l.lineTo(s,d),l.moveTo(s-c,d),l.lineTo(s+c,d)):(l.moveTo(d,s-c),l.lineTo(d,s+c),l.moveTo(d,s),l.lineTo(u,s),l.moveTo(u,s-c),l.lineTo(u,s+c))})),e?null:l.toString()};return s.context=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],s):e},s.value=function(){return arguments.length?(t=de(arguments.length<=0?void 0:arguments[0]),s):t},s.high=function(){return arguments.length?(n=de(arguments.length<=0?void 0:arguments[0]),s):n},s.low=function(){return arguments.length?(r=de(arguments.length<=0?void 0:arguments[0]),s):r},s.width=function(){return arguments.length?(a=de(arguments.length<=0?void 0:arguments[0]),s):a},s.orient=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],s):i},s},ve=function(e){return"function"==typeof e?e:function(){return e}},ye=1e-6,be=function(e){return e.selection()!==e},xe=function(e,t){e=e||"g";var n=function(e,t){return t},r=null,i=function(i,a){a=a||function(e){return e};var o=i.selection(),s=be(i)?i:null,l=o.selectChildren(null==t?e:"".concat(e,".").concat(t)).data(a,n),c=l.enter().append(e).attr("class",t),u=l.exit();l=l.merge(c);var d=s||r;return d&&(l=l.transition(d).style("opacity",1),c.style("opacity",ye),u=u.transition(d).style("opacity",ye)),u.remove(),l.enter=function(){return c},l.exit=function(){return u},l};return i.element=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],i):e},i.className=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],i):t},i.key=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],i):n},i.transition=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],i):r},i},_e=function(e,t){if(function(e,t){return!(e.x>=t.x+t.width||e.x+e.width<=t.x||e.y>=t.y+t.height||e.y+e.height<=t.y)}(e,t)){var n=Math.max(e.x,t.x),r=Math.min(e.x+e.width,t.x+t.width),i=Math.max(e.y,t.y);return(r-n)*(Math.min(e.y+e.height,t.y+t.height)-i)}return 0},we=function(e,n){return t.sum(e.map((function(t,r){return n===r?0:_e(e[n],t)})))},Me=function(e,t,n,r,i){return{x:e,y:t,width:n,height:r,location:i}},Se=function(e){var t=e.x,n=e.y,r=e.width,i=e.height;return[Me(t,n,r,i,"bottom-right"),Me(t-r,n,r,i,"bottom-left"),Me(t-r,n-i,r,i,"top-left"),Me(t,n-i,r,i,"top-right"),Me(t,n-i/2,r,i,"middle-right"),Me(t-r/2,n,r,i,"bottom-center"),Me(t-r,n-i/2,r,i,"middle-left"),Me(t-r/2,n-i,r,i,"top-center")]},Ae=function(e,t,n){return[].concat(H(e.slice(0,t)),[n],H(e.slice(t+1)))},Ee=function(e,t){return e<t},Ce=function e(){var n,r=null,i=Ee,a=function(){return 0},o=function o(s,l){r||(r=t.sum(n.map((function(e,t){return a(e,t,n)}))));var c=function(e,t){return r-a(n[t],t,n)+a(e,t,Ae(n,t,e))}(s,l);return i(c,r)?e().locationScore(a).winningScore(i).score(c).rectangles(Ae(n,l,s)):o};return o.rectangles=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},o.score=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],o):r},o.winningScore=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],o):i},o.locationScore=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],o):a},o},Te=function(e){return Math.floor(Math.random()*e.length)},Re=function(e){return"function"==typeof e?e:function(){return e}};function Pe(){var e=arguments;return function(t,n){for(var r=0,i=e.length;r<i;r++)if(null==e[r](t,n))return!1;return!0}}var Le=function(e,t){switch(e){case"left":return t/2;case"right":return-t/2;default:return 0}},De=function(e){var t=Object.assign({},e),n=function(){};return Object.keys(t).forEach((function(e){n[e]=function(){return arguments.length?(t[e]=arguments.length<=0?void 0:arguments[0],n):t[e]}})),n},Ie=function(){var e=function(){return 0},t=function(e){return e.x},r=function(e){return e.y},i="center",a=function(){return 5},o="vertical",s=De({decorate:function(){},defined:function(n,i){return Pe(e,t,r)(n,i)},xScale:n.scaleIdentity(),yScale:n.scaleIdentity()});return s.values=function(n,l){var c=a(n,l),u=Le(i,c),d=s.xScale(),h=s.yScale();if("vertical"===o){var f=h(r(n,l),l),p=h(e(n,l),l),m=d(t(n,l),l)+u;return{d:n,x:m,y:f,y0:p,width:c,height:f-p,origin:[m,f],baseOrigin:[m,p],transposedX:m,transposedY:f}}var g=d(r(n,l),l),v=d(e(n,l),l),y=h(t(n,l),l)+u;return{d:n,x:y,y:g,y0:v,width:c,height:g-v,origin:[g,y],baseOrigin:[v,y],transposedX:g,transposedY:y}},s.xValues=function(){return"vertical"===o?[t]:[e,r]},s.yValues=function(){return"vertical"!==o?[t]:[e,r]},s.baseValue=function(){return arguments.length?(e=Re(arguments.length<=0?void 0:arguments[0]),s):e},s.crossValue=function(){return arguments.length?(t=Re(arguments.length<=0?void 0:arguments[0]),s):t},s.mainValue=function(){return arguments.length?(r=Re(arguments.length<=0?void 0:arguments[0]),s):r},s.bandwidth=function(){return arguments.length?(a=Re(arguments.length<=0?void 0:arguments[0]),s):a},s.align=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],s):i},s.orient=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],s):o},s},ke="#c60",Be="#6c0",Fe="#000",Ne="#ddd",Oe="#999",ze=function(){var e=Ie(),t=l.line().x((function(t,n){return e.values(t,n).transposedX})).y((function(t,n){return e.values(t,n).transposedY})),n=xe("path","line"),r=function(r){be(r)&&n.transition(r),t.defined(e.defined()),r.each((function(r,i,a){var o=n(s.select(a[i]),[r]);o.enter().attr("fill","none").attr("stroke",Fe),o.attr("d",t),e.decorate()(o,r,i)}))};return g(r,e,y("baseValue","bandwidth","align")),p(r,n,"key"),p(r,t,"curve"),r},Ue=function(){var e=Ie(),t=l.line().x((function(t,n){return e.values(t,n).transposedX})).y((function(t,n){return e.values(t,n).transposedY})),n=function(n){var r=t.context();r.beginPath(),r.strokeStyle=Fe,r.fillStyle="transparent",e.decorate()(r,n),t.defined(e.defined())(n),r.fill(),r.stroke(),r.closePath()};return g(n,e,y("baseValue","bandwidth","align")),p(n,t,"curve","context"),n},He=function(){var e=[0,1],t=[-1,1],n=function(){};return n.domain=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],n):e},n.range=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],n):t},n},Ge=function(){var e={},t={},n=null,r=function(r,i){var a=r.context();Object.keys(e).forEach((function(t){var n=e[t];if("function"!=typeof n)throw new Error("Expected an attribute for ".concat(t,", found ").concat(n));var o=a.getAttribLocation(i,t);n.location(o)(r)})),Object.keys(t).forEach((function(e){var n=t[e];if("function"!=typeof n)throw new Error("Expected a uniform for ".concat(e,", found ").concat(n));var o=a.getUniformLocation(i,e);n.location(o)(r)})),null!==n&&n(r)};return r.flush=function(){Object.values(e).forEach((function(e){return e.clear()})),Object.values(t).forEach((function(e){return e.clear()})),null!==n&&n.clear()},r.attribute=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return 1===n.length?e[n[0]]:(e[n[0]]=n[1],r)},r.uniform=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return 1===n.length?t[n[0]]:(t[n[0]]=n[1],r)},r.elementIndices=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],r):n},r},Ve=function(e){var t=-1,n=e,r=!0,i=function(e){if(r){var i=e.context();if(Array.isArray(n))switch(n.length){case 1:i.uniform1fv(t,n);break;case 2:i.uniform2fv(t,n);break;case 3:i.uniform3fv(t,n);break;case 4:i.uniform4fv(t,n);break;default:throw new Error("Uniform supports up to 4 elements. ".concat(n.length," provided."))}else i.uniform1f(t,n);r=!1}};return i.clear=function(){r=!0},i.location=function(){return arguments.length?(t!==(arguments.length<=0?void 0:arguments[0])&&(t=arguments.length<=0?void 0:arguments[0],r=!0),i):t},i.data=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],r=!0,i):n},i},je=0,We=4,Xe=function(){var e=null,t=null,n=null,r=null,i=null,a=null,o=We,s=0,l=Ge(),c=!1,u=null,d=!0,h=1,f=function f(m){if(null!=e){var g=n(),v=r();if(function(e,t,n){return!(e&&!d)||t!==i||n!==a}(t,g,v)&&(t=function(t,n){var r=p(t,e.VERTEX_SHADER),i=p(n,e.FRAGMENT_SHADER),a=e.createProgram();if(e.attachShader(a,r),e.attachShader(a,i),e.linkProgram(a),c&&!e.getProgramParameter(a,e.LINK_STATUS)){var o=e.getProgramInfoLog(a);throw e.deleteProgram(a),new Error("Failed to link program : ".concat(o,"\n            Vertex Shader : ").concat(t,"\n            Fragment Shader : ").concat(n))}return a}(g,v),i=g,a=v,d=!1),e.useProgram(t),l.uniform("uScreen",Ve([e.canvas.width/h,e.canvas.height/h])),l(f,t),0===s)null==l.elementIndices()?e.drawArrays(o,0,m):e.drawElements(o,m,e.UNSIGNED_SHORT,0);else if(null==l.elementIndices())u.drawArraysInstancedANGLE(o,0,s,m);else{var y=l.elementIndices().data().length;if(s!==y)throw new Error("Expected elementIndices length ".concat(y)+" to match subInstanceCount ".concat(s,"."));u.drawElementsInstancedANGLE(o,s,e.UNSIGNED_SHORT,0,m)}}};return f.extInstancedArrays=function(){return u},f.context=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.length?(null!=n[0]&&n[0]===e||(l.flush(),d=!0),null!=n[0]&&n[0]!==e&&(u=n[0].getExtension("ANGLE_instanced_arrays")),e=n[0],f):e},f.buffers=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],f):l},f.vertexShader=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],f):n},f.fragmentShader=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],f):r},f.mode=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],f):o},f.subInstanceCount=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],f):s},f.debug=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],f):c},f.pixelRatio=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],f):h},f;function p(t,n){var r=e.createShader(n);if(e.shaderSource(r,t),e.compileShader(r),c&&!e.getShaderParameter(r,e.COMPILE_STATUS)){var i=e.getShaderInfoLog(r);throw e.deleteShader(r),new Error("Failed to compile shader : ".concat(i,"\n            Shader : ").concat(t))}return r}},qe=function(e){var t=[],n=[],r=function(){return e(t.join("\n"),n.join("\n"))};function i(e,t){e.push(t)}function a(e,t,n){var r=e.indexOf(n);e.splice(r>=0?r:e.length,0,t)}function o(e,t){-1===e.indexOf(t)&&e.push(t)}return r.appendHeader=function(e){return i(t,e),r},r.insertHeader=function(e,n){return a(t,e,n),r},r.appendHeaderIfNotExists=function(e){return o(t,e),r},r.appendBody=function(e){return i(n,e),r},r.insertBody=function(e,t){return a(n,e,t),r},r.appendBodyIfNotExists=function(e){return o(n,e),r},r},Ye=function(e,t){return"\nprecision mediump float;\nfloat inf = 1.0 / 0.0;\n".concat(e,"\nvoid main() {\n    ").concat(t,"\n}")},Ze=function(e,t){return"\nprecision mediump float;\n".concat(e,"\nvoid main() {\n    gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n    ").concat(t,"\n}")},Je="attribute vec4 aFillColor;\n             varying vec4 vFillColor;",$e="vFillColor = aFillColor;",Ke="attribute vec4 aStrokeColor;\n             varying vec4 vStrokeColor;",Qe="vStrokeColor = aStrokeColor;",et="\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aSize;\n        attribute float aDefined;\n\n        uniform float uStrokeWidth;\n\n        varying float vSize;\n        varying float vDefined;",tt="\n        vDefined = aDefined;\n        vSize = 2.0 * sqrt(aSize / 3.14159);\n        gl_PointSize = vSize + uStrokeWidth + 1.0;\n        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);",nt="\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aSize;\n        attribute float aDefined;\n\n        uniform float uStrokeWidth;\n\n        varying float vSize;\n        varying float vDefined;",rt="\n        vDefined = aDefined;\n        vSize = 4.0 * sqrt(aSize / 3.14159);\n        gl_PointSize = vSize + uStrokeWidth + 1.0;\n        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);",it="\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aSize;\n        attribute float aDefined;\n\n        uniform float uStrokeWidth;\n\n        varying float vSize;\n        varying float vDefined;",at="\n        vDefined = aDefined;\n        vSize = 3.0 * sqrt(aSize / 3.14159);\n        gl_PointSize = vSize + uStrokeWidth + 1.0;\n        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);",ot="\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aSize;\n        attribute float aDefined;\n\n        uniform float uStrokeWidth;\n\n        varying float vSize;\n        varying float vDefined;",st="\n        vDefined = aDefined;\n        vSize = sqrt(aSize);\n        gl_PointSize = vSize + uStrokeWidth + 1.0;\n        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);",lt="\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aSize;\n        attribute float aDefined;\n\n        uniform float uStrokeWidth;\n\n        varying float vSize;\n        varying float vDefined;",ct="\n        vDefined = aDefined;\n        vSize = sqrt(aSize);\n        gl_PointSize = 2.0 * (vSize + uStrokeWidth + 1.0);\n        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);",ut="\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aSize;\n        attribute float aDefined;\n\n        uniform float uStrokeWidth;\n\n        varying float vSize;\n        varying float vDefined;",dt="\n        vDefined = aDefined;\n        vSize = sqrt((16.0 * aSize) / (3.0 * sqrt(3.0)));\n        gl_PointSize = vSize + uStrokeWidth + 1.0;\n        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);",ht="\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aSize;\n        attribute float aDefined;\n\n        uniform float uStrokeWidth;\n\n        varying float vSize;\n        varying float vStrokeWidthRatio;\n        varying float vDefined;",ft="\n        vDefined = aDefined;\n        vSize = 3.0 * sqrt(aSize / 5.0);\n        vStrokeWidthRatio = uStrokeWidth / (vSize + uStrokeWidth + 1.0);\n        gl_PointSize = vSize + uStrokeWidth + 1.0;\n        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);",pt="\n        attribute float aCrossValue;\n        attribute float aBandwidth;\n        attribute float aHighValue;\n        attribute float aOpenValue;\n        attribute float aCloseValue;\n        attribute float aLowValue;\n        attribute vec3 aCorner;\n        attribute float aDefined;\n\n        uniform vec2 uScreen;\n        uniform float uStrokeWidth;\n\n        varying float vColorIndicator;\n        varying float vDefined;",mt="\n        vDefined = aDefined;\n        vColorIndicator = sign(aCloseValue - aOpenValue);\n\n        float isPositiveY = (sign(aCorner.y) + 1.0) / 2.0;\n        float isNotPositiveY = 1.0 - isPositiveY;\n        float isExtremeY = abs(aCorner.y) - 1.0;\n        float isNotExtremeY = 1.0 - isExtremeY;\n        float yValue =\n         (isPositiveY * isExtremeY * aLowValue) +\n         (isPositiveY * isNotExtremeY * aCloseValue) +\n         (isNotPositiveY * isNotExtremeY * aOpenValue) +\n         (isNotPositiveY * isExtremeY * aHighValue);\n\n        float lineWidthXDirection = (isNotExtremeY * aCorner.x) + (isExtremeY * aCorner.z);\n        float lineWidthYDirection = isNotExtremeY * sign(aCloseValue - aOpenValue) * aCorner.y;\n\n        float bandwidthModifier = aBandwidth * aCorner.x / 2.0;\n\n        float xModifier = (uStrokeWidth * lineWidthXDirection / 2.0) + bandwidthModifier;\n        float yModifier = uStrokeWidth * lineWidthYDirection / 2.0;\n\n        gl_Position = vec4(aCrossValue, yValue, 0, 1);",gt="\n        attribute float aCrossValue;\n        attribute float aBandwidth;\n        attribute float aHighValue;\n        attribute float aOpenValue;\n        attribute float aCloseValue;\n        attribute float aLowValue;\n        attribute vec3 aCorner;\n        attribute float aDefined;\n\n        uniform vec2 uScreen;\n        uniform float uStrokeWidth;\n\n        varying float vColorIndicator;\n        varying float vDefined;",vt="\n        vDefined = aDefined;\n        vColorIndicator = sign(aCloseValue - aOpenValue);\n\n        float isPositiveY = (sign(aCorner.y) + 1.0) / 2.0;\n        float isNotPositiveY = 1.0 - isPositiveY;\n        float isExtremeY = abs(aCorner.y) - 1.0;\n        float isNotExtremeY = 1.0 - isExtremeY;\n        float yValue =\n            (isPositiveY * isExtremeY * aLowValue) +\n            (isPositiveY * isNotExtremeY * aCloseValue) +\n            (isNotPositiveY * isNotExtremeY * aOpenValue) +\n            (isNotPositiveY * isExtremeY * aHighValue);\n\n        float lineWidthXDirection = isExtremeY * aCorner.z;\n        float lineWidthYDirection = isNotExtremeY * aCorner.z;\n\n        float bandwidthModifier = isNotExtremeY * aCorner.x * aBandwidth / 2.0;\n\n        float xModifier = (uStrokeWidth * lineWidthXDirection / 2.0) + bandwidthModifier;\n        float yModifier = uStrokeWidth * lineWidthYDirection / 2.0;\n\n        gl_Position = vec4(aCrossValue, yValue, 0, 1);",yt="\n        attribute float aCrossValue;\n        attribute float aBandwidth;\n        attribute float aMainValue;\n        attribute float aBaseValue;\n        attribute vec2 aCorner;\n        attribute float aDefined;\n\n        uniform vec2 uScreen;\n        uniform float uStrokeWidth;\n\n        varying float vDefined;",bt="\n        vDefined = aDefined;\n        float isBaseline = (1.0 - aCorner.y) / 2.0;\n        float yValue = (isBaseline * aBaseValue) + ((1.0 - isBaseline) * aMainValue);\n\n        float xModifier = aCorner.x * (aBandwidth) / 2.0;\n\n        gl_Position = vec4(aCrossValue, yValue, 0, 1);",xt="\n        attribute vec3 aCorner;\n        attribute float aCrossValue;\n        attribute float aBandwidth;\n        attribute float aHighValue;\n        attribute float aLowValue;\n        attribute float aDefined;\n\n        uniform vec2 uScreen;\n        uniform float uStrokeWidth;\n\n        varying float vDefined;",_t="\n        vDefined = aDefined;\n        float isLow = (aCorner.y + 1.0) / 2.0;\n        float yValue = isLow * aLowValue + (1.0 - isLow) * aHighValue;\n\n        float isEdgeCorner = abs(aCorner.x);\n        float lineWidthXDirection = (1.0 - isEdgeCorner) * aCorner.z;\n        float lineWidthYDirection = isEdgeCorner * aCorner.z;\n\n        gl_Position = vec4(aCrossValue, yValue, 0, 1);\n\n        float xModifier = (uStrokeWidth * lineWidthXDirection) + (aBandwidth * aCorner.x / 2.0);\n        float yModifier = (uStrokeWidth * lineWidthYDirection);",wt="\n        attribute vec3 aCorner;\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aCrossNextValue;\n        attribute float aMainNextValue;\n        attribute float aBaseValue;\n        attribute float aBaseNextValue;\n        attribute float aDefined;\n        attribute float aDefinedNext;\n\n        varying float vDefined;\n\n        float when_lt(float a, float b) {\n            return max(sign(b - a), 0.0);\n        }\n\n        float and(float a, float b) {\n            return a * b;\n        }",Mt="\n        vDefined = aDefined * aDefinedNext;\n        gl_Position = vec4(0, 0, 0, 1);\n\n        float hasIntercepted = when_lt((aMainNextValue - aBaseNextValue) * (aMainValue - aBaseValue), 0.0);\n        float useIntercept = and(aCorner.z, hasIntercepted);\n\n        float yGradient = (aMainNextValue - aMainValue) / (aCrossNextValue - aCrossValue);\n        float yConstant = aMainNextValue - (yGradient * aCrossNextValue);\n\n        float y0Gradient = (aBaseNextValue - aBaseValue) / (aCrossNextValue - aCrossValue);\n        float y0Constant = aBaseNextValue - (y0Gradient * aCrossNextValue);\n\n        float denominator = (yGradient - y0Gradient) + step(abs(yGradient - y0Gradient), 0.0);\n        float interceptXValue = (y0Constant - yConstant) / denominator;\n        float interceptYValue = (yGradient * interceptXValue) + yConstant;\n\n        gl_Position = vec4(interceptXValue * useIntercept, interceptYValue * useIntercept, 0, 1);\n\n        gl_Position.x += (1.0 - useIntercept) * ((aCorner.x * aCrossNextValue) + ((1.0 - aCorner.x) * aCrossValue));\n        gl_Position.y += (1.0 - useIntercept) * (1.0 - aCorner.y) * ((aCorner.x * aMainNextValue) + ((1.0 - aCorner.x) * aMainValue));\n        gl_Position.y += (1.0 - useIntercept) * aCorner.y * ((aCorner.x * aBaseNextValue) + ((1.0 - aCorner.x) * aBaseValue));",St="\n        attribute vec4 aCorner;\n        attribute float aCrossValue;\n        attribute float aBandwidth;\n        attribute float aCapWidth;\n        attribute float aHighValue;\n        attribute float aUpperQuartileValue;\n        attribute float aMedianValue;\n        attribute float aLowerQuartileValue;\n        attribute float aLowValue;\n        attribute float aDefined;\n\n        uniform vec2 uScreen;\n        uniform float uStrokeWidth;\n\n        varying float vDefined;\n    ",At="\n        vDefined = aDefined;\n        float isExtremeY = sign(abs(aCorner.y) - 2.0) + 1.0;\n        float isNotExtremeY = 1.0 - isExtremeY;\n\n        float isNonZeroY = abs(sign(aCorner.y));\n        float isZeroY = 1.0 - isNonZeroY;\n\n        float isQuartileY = isNotExtremeY * isNonZeroY;\n\n        float isPositiveY = (sign(aCorner.y + 0.5) + 1.0) / 2.0;\n        float isNegativeY = 1.0 - isPositiveY;\n\n        float yValue =\n          (isExtremeY * isNegativeY) * aHighValue +\n          (isQuartileY * isNegativeY) * aUpperQuartileValue +\n          isZeroY * aMedianValue +\n          (isQuartileY * isPositiveY) * aLowerQuartileValue +\n          (isExtremeY * isPositiveY) * aLowValue;\n\n        gl_Position = vec4(aCrossValue, yValue, 0, 1);\n\n        float isHorizontal = aCorner.w;\n        float isVertical = 1.0 - isHorizontal;\n\n        float xDisplacement = aCorner.x * (isExtremeY * aCapWidth + isNotExtremeY * aBandwidth) / 2.0;\n\n        float xModifier = (isVertical * uStrokeWidth * aCorner.z / 2.0) + xDisplacement;\n        float yModifier = isHorizontal * uStrokeWidth * aCorner.z / 2.0;",Et="\n        varying float vSize;\n        varying float vDefined;",Ct="\n        float canFill = 1.0;\n        float distance = length(2.0 * gl_PointCoord - 1.0);\n        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);\n        if (distance > 1.0 || vDefined < 0.5) {\n            discard;\n            return;\n        }",Tt="\n        varying float vSize;\n        varying float vDefined;\n\n        // anterior, exterior angles\n        float an = 0.628319;\n        vec2 acs = vec2(0.809017, 0.587786); // (cos, sin)\n        float en = 0.952000;\n        vec2 ecs = vec2(0.580055, 0.814577);\n    ",Rt="\n        float canFill = 1.0;\n\n        vec2 p = 2.0 * gl_PointCoord - 1.0;\n        p.y *= -1.0;\n\n        // sector\n        float bn = mod(atan(p.x, p.y), 2.0 * an) - an;\n        p = length(p) * vec2(cos(bn), abs(sin(bn)));\n\n        p -= acs;\n        p += ecs * clamp(-dot(p, ecs), 0.0, acs.y / ecs.y);\n        float d = length(p) * sign(p.x);\n\n        float distance = 1.0 + d;\n        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);\n        if (distance > 1.0 || vDefined < 0.5) {\n            discard;\n            return;\n        }",Pt="\n        varying float vSize;\n        varying float vDefined;\n    ",Lt="\n        float canFill = 1.0;\n\n        vec2 p = 2.0 * gl_PointCoord - 1.0;\n        p.y *= -1.0;\n\n        // sector\n        float an = 3.141593 / 3.0;\n        float bn = mod(atan(p.x, p.y), 2.0 * an) - an;\n        p = length(p) * vec2(cos(bn), abs(sin(bn)));\n\n        // box\n        vec2 d = abs(p) - vec2(0.9, 0.35);\n        float sdf = length(max(d, 0.0)) + min(max(d.x, d.y), 0.0);\n\n        float distance = 1.0 + sdf;\n        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);\n        if (distance > 1.0 || vDefined < 0.5) {\n            discard;\n            return;\n        }",Dt="\n        varying float vSize;\n        varying float vDefined;",It="\n        float canFill = 1.0;\n        if (vDefined < 0.5) {\n            discard;\n        }\n        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;\n        float distance = max(abs(pointCoordTransform.x), abs(pointCoordTransform.y));\n        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);",kt="\n        varying float vSize;\n        varying float vDefined;\n        float a = 0.6;\n        float b = 1.0;\n    ",Bt="\n        if (vDefined < 0.5) {\n            discard;\n        }\n\n        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;\n\n        float x = abs(pointCoordTransform.x);\n        float y = abs(pointCoordTransform.y);\n\n        float X = (a * b * x) / (a * y + b * x);\n        float Y = (a * b * y) / (a * y + b * x);\n\n        float distance = length(vec2(x, y)) / length(vec2(X, Y));\n\n        if (distance > 1.0) {\n            discard;\n        }\n    ",Ft="\n        varying float vSize;\n        varying float vDefined;",Nt="\n        float canFill = 1.0;\n        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;\n        float topEdgesDistance = abs(pointCoordTransform.x) - ((pointCoordTransform.y - 0.6) / sqrt(3.0));\n        float bottomEdgeDistance = pointCoordTransform.y + 0.5;\n        float distance = max(topEdgesDistance, bottomEdgeDistance);\n        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);\n        if (distance > 1.0 || vDefined < 0.5) {\n            discard;\n        }",Ot="\n        varying float vSize;\n        varying float vStrokeWidthRatio;\n        varying float vDefined;",zt="\n        float canFill = 1.0;\n        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;\n        float innerCornerDistance = min(abs(pointCoordTransform.x), abs(pointCoordTransform.y)) + 0.66 - vStrokeWidthRatio;\n        float outerEdgeDistance = max(abs(pointCoordTransform.x), abs(pointCoordTransform.y));\n        float distance = max(innerCornerDistance, outerEdgeDistance);\n        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);\n        if (distance > 1.0 || vDefined < 0.5) {\n            discard;\n        }",Ut="\n        varying float vColorIndicator;\n        varying float vDefined;",Ht="\n        float canFill = 1.0;\n        float canStroke = 0.0;\n        if (vDefined < 0.5) {\n            discard;\n        }\n        gl_FragColor = vec4(0.4, 0.8, 0, 1);\n        if (vColorIndicator < 0.0) {\n            gl_FragColor = vec4(0.8, 0.4, 0, 1);\n        }",Gt="\n        varying float vColorIndicator;\n        varying float vDefined;",Vt="\n        float canFill = 0.0;\n        float canStroke = 1.0;\n        if (vDefined < 0.5) {\n            discard;\n        }\n        gl_FragColor = vec4(0.4, 0.8, 0, 1);\n        if (vColorIndicator < 0.0) {\n            gl_FragColor = vec4(0.8, 0.4, 0, 1);\n        }",jt="\n        varying float vDefined;",Wt="\n        float canFill = 1.0;\n        float canStroke = 0.0;\n        if (vDefined < 0.5) {\n            discard;\n        }\n        gl_FragColor = vec4(0.86, 0.86, 0.86, 1);",Xt="\n        varying float vDefined;\n    ",qt="\n        float canFill = 0.0;\n        float canStroke = 1.0;\n\n        if (vDefined < 0.5) {\n            discard;\n        }",Yt="varying float vDefined;",Zt="\n        float canFill = 0.0;\n        float canStroke = 1.0;\n        if (vDefined < 0.5) {\n            discard;\n        }",Jt="varying float vDefined;",$t="\n        float canFill = 1.0;\n        float canStroke = 0.0;\n\n        gl_FragColor = vec4(0.60, 0.60, 0.60, 1.0);\n\n        if (vDefined < 0.5) {\n            discard;\n        }",Kt="varying vec4 vFillColor;",Qt="gl_FragColor = (canFill * vFillColor) + ((1.0 - canFill) * gl_FragColor);",en="varying vec4 vStrokeColor;",tn="gl_FragColor = (canStroke * vStrokeColor) + ((1.0 - canStroke) * gl_FragColor);",nn=function(){var e=qe(Ye),t=qe(Ze);return e.appendHeader(wt).appendBody(Mt),t.appendHeader(jt).appendBody(Wt),{vertex:function(){return e},fragment:function(){return t}}},rn={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,FLOAT:5126};function an(e){switch(e){case rn.BYTE:case rn.UNSIGNED_BYTE:return 1;case rn.SHORT:case rn.UNSIGNED_SHORT:return 2;case rn.FLOAT:return 4;default:throw new Error("Unknown type ".concat(e))}}function on(e){switch(e){case rn.BYTE:return Int8Array;case rn.UNSIGNED_BYTE:return Uint8Array;case rn.SHORT:return Int16Array;case rn.UNSIGNED_SHORT:return Uint16Array;case rn.FLOAT:return Float32Array;default:throw new Error("Unknown type ".concat(e))}}var sn=function(){var e=-1,t=null,n=1,r=rn.FLOAT,i=!1,a=0,o=0,s=null,l=function(l){var c=l.context();null==t&&(t=c.createBuffer()),c.bindBuffer(c.ARRAY_BUFFER,t),c.vertexAttribPointer(e,n,r,i,a,o),c.enableVertexAttribArray(e),l.extInstancedArrays().vertexAttribDivisorANGLE(e,null!=s?s:l.subInstanceCount()>0?1:0)};return l.location=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],l):e},l.buffer=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],l):t},l.size=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],l):n},l.type=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],l):r},l.normalized=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],l):i},l.stride=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],l):a},l.offset=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],l):o},l.divisor=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],l):s},l},ln=function(){var e=!0,t=1,n=rn.FLOAT,r=function(){var e=rn.FLOAT,t=new Float32Array(0),n=function(n){var r=on(e);return t.length>n?t=new r(t.buffer,0,n):t.length!==n&&(t=new r(n)),t};return n.type=function(){if(!arguments.length)return e;if(e!==(arguments.length<=0?void 0:arguments[0])){var r=on(e=arguments.length<=0?void 0:arguments[0]);t=new r(0)}return n},n}(),i=function(e,t){return e},a=null,o=function(){var o=a.length,s=r.type(n)(o*t);if(t>1)for(var l=0;l<o;l++){var c=i(a[l],l);if(c.length!==t)throw new Error("Expected components array of size ".concat(t,", recieved array with length ").concat(c.length,"."));for(var u=0;u<t;u++)s[l*t+u]=c[u]}else for(var d=0;d<o;d++){var h=i(a[d],d);if(Array.isArray(h))throw new Error("Expected a single component value, recieved array with length ".concat(h.length,"."));s[d]=h}return e=!1,s};return o.dirty=function(){return e},o.clear=function(){e=!0},o.size=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],e=!0,o):t},o.type=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],e=!0,o):n},o.arrayViewFactory=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],e=!0,o):r},o.value=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],e=!0,o):i},o.data=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],e=!0,o):a},o},cn=function(){var e=sn(),t=ln(),n=function n(r){if(e.size(n.size()).type(n.type()),e(r),t.dirty()){var i=t(),a=r.context();a.bindBuffer(a.ARRAY_BUFFER,e.buffer()),a.bufferData(a.ARRAY_BUFFER,i,a.DYNAMIC_DRAW)}};return n.clear=function(){e.buffer(null),t.clear()},p(n,e,"normalized","location","divisor"),p(n,t,"data","value","size","type"),n},un=function(e,t,n,r){for(var i=arguments.length,a=new Array(i>4?i-4:0),o=4;o<i;o++)a[o-4]=arguments[o];e[t]=function(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];var s=n[r].apply(n,a.concat(i));return s===n?e:s}},dn=function(){var e=Xe().mode(We).subInstanceCount(6),t=He(),n=He(),r=function(){},i=cn().divisor(0).size(3).type(rn.UNSIGNED_BYTE).data([[0,0,0],[0,1,0],[1,1,1],[0,0,1],[1,0,0],[1,1,0]]);e.buffers().attribute("aCorner",i);var a=function(i){var a=nn();e.vertexShader(a.vertex()).fragmentShader(a.fragment()),t(e,"gl_Position",0),n(e,"gl_Position",1),r(e),e(i-1)};return a.decorate=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],a):r},a.xScale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],a):t},a.yScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},p(a,e,"context","pixelRatio"),un(a,"crossValueAttribute",e.buffers(),"attribute","aCrossValue"),un(a,"crossNextValueAttribute",e.buffers(),"attribute","aCrossNextValue"),un(a,"mainValueAttribute",e.buffers(),"attribute","aMainValue"),un(a,"mainNextValueAttribute",e.buffers(),"attribute","aMainNextValue"),un(a,"baseValueAttribute",e.buffers(),"attribute","aBaseValue"),un(a,"baseNextValueAttribute",e.buffers(),"attribute","aBaseNextValue"),un(a,"definedAttribute",e.buffers(),"attribute","aDefined"),un(a,"definedNextAttribute",e.buffers(),"attribute","aDefinedNext"),a},hn=function(){var e=qe(Ye),t=qe(Ze);return e.appendHeader(et).appendBody(tt),t.appendHeader(Et).appendBody(Ct),{vertex:function(){return e},fragment:function(){return t}}},fn=function(){var e=Xe().mode(je),t=He(),n=He(),r=hn(),i=function(){},a=function(a){e.vertexShader(r.vertex()).fragmentShader(r.fragment()),t(e,"gl_Position",0),n(e,"gl_Position",1),i(e),e(a)};return a.type=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],a):r},a.decorate=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],a):i},a.xScale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],a):t},a.yScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},p(a,e,"context","pixelRatio"),un(a,"crossValueAttribute",e.buffers(),"attribute","aCrossValue"),un(a,"mainValueAttribute",e.buffers(),"attribute","aMainValue"),un(a,"sizeAttribute",e.buffers(),"attribute","aSize"),un(a,"definedAttribute",e.buffers(),"attribute","aDefined"),a},pn=function(){var e=1,t=function(t){t.buffers().uniform("uStrokeWidth",Ve(e))};return t.lineWidth=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],t):e},t},mn=function(e){var t=null,n=e,r=!0,i=function(e){var i=e.context();null==t&&(t=i.createBuffer()),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t),r&&(i.bufferData(i.ELEMENT_ARRAY_BUFFER,new Uint16Array(n),i.STATIC_DRAW),r=!1)};return i.clear=function(){t=null,r=!0},i.data=function(){return arguments.length?(r=!0,n=arguments.length<=0?void 0:arguments[0],i):n},i},gn=function(){var e=Xe().mode(We).subInstanceCount(6),t=He(),n=He(),r=function(){},i=pn(),a=cn().divisor(0).size(4).type(rn.BYTE).data([[-1,1,1,0],[1,1,0,1],[1,-1,0,1],[-1,-1,1,0]]);e.buffers().elementIndices(mn([0,1,2,2,3,0])).attribute("aCorner",a);var o=function(a){var o=qe(Ye),s=qe(Ze);e.vertexShader(o).fragmentShader(s),o.appendHeader("\n            attribute vec4 aCorner;\n            attribute float aCrossValue;\n            attribute float aCrossNextValue;\n            attribute float aMainValue;\n            attribute float aMainNextValue;\n            attribute float aDefined;\n            attribute float aDefinedNext;\n\n            uniform float uStrokeWidth;\n            uniform vec2 uScreen;\n\n            varying float vLength;\n            varying vec2 vPosition;\n        "),o.appendBody("\n            vec4 value = vec4(aCrossValue, aMainValue, 0.0, 1.0);\n            vec4 nextValue = vec4(aCrossNextValue, aMainNextValue, 0.0, 1.0);\n        "),t(e,"value",0),t(e,"nextValue",0),n(e,"value",1),n(e,"nextValue",1),o.appendBody("\n            vec2 position = aCorner[2] * value.xy + aCorner[3] * nextValue.xy;\n\n            vec2 direction = normalize((nextValue.xy - value.xy) * uScreen);\n            vec2 normal = vec2(direction.y, -direction.x);\n            vec2 padding = ((uStrokeWidth / 2.0) / (uScreen / 2.0));\n            \n            padding *= aDefined * aDefinedNext;\n            position += (aCorner[0] * direction + aCorner[1] * normal) * padding;\n\n            gl_Position = vec4(position.x, position.y, 0.0, 1.0);\n\n            vLength = length((nextValue.xy - value.xy) * (uScreen / 2.0));\n            vPosition = aCorner.xy * (uStrokeWidth / 2.0);\n            vPosition.x += aCorner[3] * vLength;\n        "),s.appendHeader("\n            uniform float uStrokeWidth;\n            varying float vLength;\n            varying vec2 vPosition;\n\n            float canFill = 0.0;\n            float canStroke = 1.0;\n        "),s.appendBody("\n            vec2 position = vPosition;\n            position.x -= clamp(position.x, 0.0, vLength);\n            float sdf = length(position) - uStrokeWidth / 2.0;\n            if (sdf > 0.5) {\n                discard;\n            }\n        "),i(e),r(e),e(a-1)};return o.decorate=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],o):r},o.xScale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],o):t},o.yScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},p(o,e,"context","pixelRatio"),p(o,i,"lineWidth"),un(o,"crossValueAttribute",e.buffers(),"attribute","aCrossValue"),un(o,"crossNextValueAttribute",e.buffers(),"attribute","aCrossNextValue"),un(o,"mainValueAttribute",e.buffers(),"attribute","aMainValue"),un(o,"mainNextValueAttribute",e.buffers(),"attribute","aMainNextValue"),un(o,"definedAttribute",e.buffers(),"attribute","aDefined"),un(o,"definedNextAttribute",e.buffers(),"attribute","aDefinedNext"),o},vn=function(){var e=qe(Ye),t=qe(Ze);return e.appendHeader(gt).appendBody(vt),t.appendHeader(Gt).appendBody(Vt),{vertex:function(){return e},fragment:function(){return t}}},yn=function(){var e=Xe().mode(We).subInstanceCount(18),t=He(),n=He(),r=pn(),i=function(){},a=cn().divisor(0).size(3).type(rn.BYTE).data([[0,-2,-1],[0,-2,1],[0,2,1],[0,2,-1],[-1,-1,-1],[-1,-1,1],[0,-1,1],[0,-1,-1],[1,1,1],[0,1,1],[0,1,-1],[1,1,-1]]);e.buffers().elementIndices(mn([0,1,2,0,3,2,4,5,6,4,7,6,8,9,10,10,11,8])).attribute("aCorner",a);var o=function(a){var o=vn();e.vertexShader(o.vertex()).fragmentShader(o.fragment()),t(e,"gl_Position",0),n(e,"gl_Position",1),r(e),e.vertexShader().appendBody("\n          gl_Position.x += xModifier / uScreen.x * 2.0;\n          gl_Position.y += yModifier / uScreen.y * 2.0;\n        "),i(e),e(a)};return o.decorate=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],o):i},o.xScale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],o):t},o.yScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},p(o,e,"context","pixelRatio"),p(o,r,"lineWidth"),un(o,"crossValueAttribute",e.buffers(),"attribute","aCrossValue"),un(o,"openValueAttribute",e.buffers(),"attribute","aOpenValue"),un(o,"highValueAttribute",e.buffers(),"attribute","aHighValue"),un(o,"lowValueAttribute",e.buffers(),"attribute","aLowValue"),un(o,"closeValueAttribute",e.buffers(),"attribute","aCloseValue"),un(o,"bandwidthAttribute",e.buffers(),"attribute","aBandwidth"),un(o,"definedAttribute",e.buffers(),"attribute","aDefined"),o},bn=function(){var e=qe(Ye),t=qe(Ze);return e.appendHeader(yt).appendBody(bt),t.appendHeader(Jt).appendBody($t),{vertex:function(){return e},fragment:function(){return t}}},xn=function(){var e=Xe().mode(We).subInstanceCount(6),t=He(),n=He(),r=function(){},i=cn().divisor(0).size(2).type(rn.BYTE).data([[-1,-1],[1,1],[-1,1],[1,-1]]);e.buffers().elementIndices(mn([0,1,2,0,1,3])).attribute("aCorner",i);var a=function(i){var a=bn();e.vertexShader(a.vertex()).fragmentShader(a.fragment()),t(e,"gl_Position",0),n(e,"gl_Position",1),e.vertexShader().appendBody("\n            gl_Position.x += xModifier / uScreen.x * 2.0;\n        "),r(e),e(i)};return a.decorate=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],a):r},a.xScale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],a):t},a.yScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},p(a,e,"context","pixelRatio"),un(a,"crossValueAttribute",e.buffers(),"attribute","aCrossValue"),un(a,"mainValueAttribute",e.buffers(),"attribute","aMainValue"),un(a,"baseValueAttribute",e.buffers(),"attribute","aBaseValue"),un(a,"bandwidthAttribute",e.buffers(),"attribute","aBandwidth"),un(a,"definedAttribute",e.buffers(),"attribute","aDefined"),a},_n=function(){var e=qe(Ye),t=qe(Ze);return e.appendHeader(xt).appendBody(_t),t.appendHeader(Yt).appendBody(Zt),{vertex:function(){return e},fragment:function(){return t}}},wn=function(){var e=Xe().mode(We).subInstanceCount(18),t=He(),n=He(),r=function(){},i=pn(),a=cn().divisor(0).size(3).type(rn.BYTE).data([[0,1,1],[0,1,-1],[0,-1,-1],[0,-1,1],[1,-1,1],[1,-1,-1],[-1,-1,-1],[-1,-1,1],[-1,1,-1],[-1,1,1],[1,1,1],[1,1,-1]]);e.buffers().elementIndices(mn([0,1,2,0,3,2,4,5,6,4,7,6,8,9,10,8,11,10])).attribute("aCorner",a);var o=function(a){var o=_n();e.vertexShader(o.vertex()).fragmentShader(o.fragment()),t(e,"gl_Position",0),n(e,"gl_Position",1),i(e),e.vertexShader().appendBody("\n                gl_Position.x += xModifier / uScreen.x * 2.0;\n                gl_Position.y += yModifier / uScreen.y * 2.0;\n            "),r(e),e(a)};return o.decorate=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],o):r},o.xScale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],o):t},o.yScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},p(o,e,"context","pixelRatio"),p(o,i,"lineWidth"),un(o,"crossValueAttribute",e.buffers(),"attribute","aCrossValue"),un(o,"highValueAttribute",e.buffers(),"attribute","aHighValue"),un(o,"lowValueAttribute",e.buffers(),"attribute","aLowValue"),un(o,"bandwidthAttribute",e.buffers(),"attribute","aBandwidth"),un(o,"definedAttribute",e.buffers(),"attribute","aDefined"),o},Mn=function(){var e=qe(Ye),t=qe(Ze);return e.appendHeader(pt).appendBody(mt),t.appendHeader(Ut).appendBody(Ht),{vertex:function(){return e},fragment:function(){return t}}},Sn=function(){var e=Xe().mode(We).subInstanceCount(12),t=He(),n=He(),r=pn(),i=function(){},a=cn().divisor(0).size(3).type(rn.BYTE).data([[0,2,1],[0,2,-1],[0,-2,-1],[0,-2,1],[1,-1,0],[-1,-1,0],[-1,1,0],[1,1,0]]);e.buffers().elementIndices(mn([0,1,2,0,3,2,4,5,6,4,7,6])).attribute("aCorner",a);var o=function(a){var o=Mn();e.vertexShader(o.vertex()).fragmentShader(o.fragment()),t(e,"gl_Position",0),n(e,"gl_Position",1),r(e),e.vertexShader().appendBody("\n          gl_Position.x += xModifier / uScreen.x * 2.0;\n          gl_Position.y += yModifier / uScreen.y * 2.0;\n        "),i(e),e(a)};return o.decorate=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],o):i},o.xScale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],o):t},o.yScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},p(o,e,"context","pixelRatio"),p(o,r,"lineWidth"),un(o,"crossValueAttribute",e.buffers(),"attribute","aCrossValue"),un(o,"openValueAttribute",e.buffers(),"attribute","aOpenValue"),un(o,"highValueAttribute",e.buffers(),"attribute","aHighValue"),un(o,"lowValueAttribute",e.buffers(),"attribute","aLowValue"),un(o,"closeValueAttribute",e.buffers(),"attribute","aCloseValue"),un(o,"bandwidthAttribute",e.buffers(),"attribute","aBandwidth"),un(o,"definedAttribute",e.buffers(),"attribute","aDefined"),o},An=function(){var e=qe(Ye),t=qe(Ze);return e.appendHeader(St).appendBody(At),t.appendHeader(Xt).appendBody(qt),{vertex:function(){return e},fragment:function(){return t}}},En=function(){var e=Xe().mode(We).subInstanceCount(54),t=He(),n=He(),r=function(){},i=pn(),a=cn().divisor(0).size(4).type(rn.BYTE).data([[-1,-2,-1,1],[1,-2,-1,1],[1,-2,1,1],[-1,-2,1,1],[0,-2,-1,0],[0,-2,1,0],[0,-1,1,0],[0,-1,-1,0],[-1,-1,-1,1],[1,-1,-1,1],[1,-1,1,1],[-1,-1,1,1],[-1,0,-1,1],[1,0,-1,1],[1,0,1,1],[-1,0,1,1],[-1,1,-1,1],[1,1,-1,1],[1,1,1,1],[-1,1,1,1],[-1,-1,-1,0],[-1,-1,1,0],[-1,1,1,0],[-1,1,-1,0],[1,-1,-1,0],[1,-1,1,0],[1,1,1,0],[1,1,-1,0],[0,2,-1,0],[0,2,1,0],[0,1,1,0],[0,1,-1,0],[-1,2,-1,1],[1,2,-1,1],[1,2,1,1],[-1,2,1,1]]);e.buffers().elementIndices(mn([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23,24,25,26,24,26,27,28,29,30,28,30,31,32,33,34,32,34,35])).attribute("aCorner",a);var o=function(a){var o=An();e.vertexShader(o.vertex()).fragmentShader(o.fragment()),t(e,"gl_Position",0),n(e,"gl_Position",1),i(e),e.vertexShader().appendBody("\n            gl_Position.x += xModifier / uScreen.x * 2.0;\n            gl_Position.y += yModifier / uScreen.y * 2.0;\n        "),r(e),e(a)};return o.decorate=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],o):r},o.xScale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],o):t},o.yScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},p(o,e,"context","pixelRatio"),p(o,i,"lineWidth"),un(o,"crossValueAttribute",e.buffers(),"attribute","aCrossValue"),un(o,"highValueAttribute",e.buffers(),"attribute","aHighValue"),un(o,"upperQuartileValueAttribute",e.buffers(),"attribute","aUpperQuartileValue"),un(o,"medianValueAttribute",e.buffers(),"attribute","aMedianValue"),un(o,"lowerQuartileValueAttribute",e.buffers(),"attribute","aLowerQuartileValue"),un(o,"lowValueAttribute",e.buffers(),"attribute","aLowValue"),un(o,"bandwidthAttribute",e.buffers(),"attribute","aBandwidth"),un(o,"capAttribute",e.buffers(),"attribute","aCapWidth"),un(o,"definedAttribute",e.buffers(),"attribute","aDefined"),o},Cn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e>0||t<0)throw new Error("Offset values (".concat(e," & ").concat(t,") must straddle 0 "));var n=sn(),r=ln(),i=function i(a){var o=i.size()*an(i.type()),s=Math.abs(e)*o;if(n.offset(s).size(i.size()).type(i.type()),n(a),r.dirty()){var l=r(),c=t*o,u=s+l.length*an(i.type())+c,d=a.context();d.bindBuffer(d.ARRAY_BUFFER,n.buffer()),d.bufferData(d.ARRAY_BUFFER,u,d.DYNAMIC_DRAW),d.bufferSubData(d.ARRAY_BUFFER,s,l)}};return i.offset=function(r){if(e>r||r>t)throw new Error("Requested offset ".concat(r," exceeds bounds (").concat(e," & ").concat(t,") "));var a=function(t){n.offset((r-e)*i.size()*an(i.type())),n(t)};return p(a,i,"clear","location"),a},i.clear=function(){n.buffer(null),r.clear()},p(i,n,"normalized","location","divisor"),p(i,r,"data","value","size","type"),i},Tn=function(){var e=He(),t=function(e){return"linear".concat(e)},n=function(n,r,i){n.vertexShader().appendHeaderIfNotExists("uniform vec4 ".concat(t(i),"Offset;")).appendHeaderIfNotExists("uniform vec4 ".concat(t(i),"Scale;")).appendBody("".concat(r," = ").concat(r," + ").concat(t(i),"Offset;")).appendBody("".concat(r," = ").concat(r," * ").concat(t(i),"Scale;"));var a=e.domain()[1]-e.domain()[0],o=e.range()[1]-e.range()[0],s=e.range()[0]*(a/o)-e.domain()[0],l=o/a,c=[0,0,0,0],u=[1,1,1,1];c[i]=s,u[i]=l,n.buffers().uniform("".concat(t(i),"Offset"),Ve(c)).uniform("".concat(t(i),"Scale"),Ve(u))};return g(n,e),n},Rn=function(){var e=He(),t=10;function n(e,t){return Math.log10(e)/Math.log10(t)}var r=function(e){return"log".concat(e)},i=function(i,a,o){var s="".concat(r(o),"Offset + (").concat(r(o),"Scale * clamp(log(").concat(a,") / log(").concat(r(o),"Base), -inf, inf))");i.vertexShader().appendHeaderIfNotExists("uniform vec4 ".concat(r(o),"Offset;")).appendHeaderIfNotExists("uniform vec4 ".concat(r(o),"Scale;")).appendHeaderIfNotExists("uniform vec4 ".concat(r(o),"Include;")).appendHeaderIfNotExists("uniform float ".concat(r(o),"Base;")).appendBody("".concat(a," = (").concat(r(o),"Include * (").concat(s,")) + ((1.0 - ").concat(r(o),"Include) * ").concat(a,");"));var l=n(e.domain()[1],t)-n(e.domain()[0],t),c=(e.range()[1]-e.range()[0])/l,u=e.range()[0]-c*n(e.domain()[0],t),d=[0,0,0,0],h=[0,0,0,0],f=[0,0,0,0];d[o]=u,h[o]=c,f[o]=1,i.buffers().uniform("".concat(r(o),"Offset"),Ve(d)).uniform("".concat(r(o),"Scale"),Ve(h)).uniform("".concat(r(o),"Include"),Ve(f)).uniform("".concat(r(o),"Base"),Ve(t))};return i.base=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],i):t},g(i,e),i},Pn=function(){var e=He(),t=1;function n(e,t){return Math.sign(e)*Math.pow(Math.abs(e),t)}var r=function(e){return"pow".concat(e)},i=function(i,a,o){var s="".concat(r(o),"Offset + (").concat(r(o),"Scale * sign(").concat(a,") * pow(abs(").concat(a,"), vec4(").concat(r(o),"Exp)))");i.vertexShader().appendHeaderIfNotExists("uniform vec4 ".concat(r(o),"Offset;")).appendHeaderIfNotExists("uniform vec4 ".concat(r(o),"Scale;")).appendHeaderIfNotExists("uniform vec4 ".concat(r(o),"Include;")).appendHeaderIfNotExists("uniform float ".concat(r(o),"Exp;")).appendBody("".concat(a," = (").concat(r(o),"Include * (").concat(s,")) + ((1.0 - ").concat(r(o),"Include) * ").concat(a,");"));var l=n(e.domain()[1],t)-n(e.domain()[0],t),c=(e.range()[1]-e.range()[0])/l,u=e.range()[0]-c*n(e.domain()[0],t),d=[0,0,0,0],h=[0,0,0,0],f=[0,0,0,0];d[o]=u,h[o]=c,f[o]=1,i.buffers().uniform("".concat(r(o),"Offset"),Ve(d)).uniform("".concat(r(o),"Scale"),Ve(h)).uniform("".concat(r(o),"Include"),Ve(f)).uniform("".concat(r(o),"Exp"),Ve(t))};return i.exponent=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],i):t},g(i,e),i},Ln=n.scaleLinear().copy.toString(),Dn=n.scaleLog().copy.toString(),In=n.scalePow().copy.toString(),kn=n.scaleTime().copy.toString(),Bn=n.scaleIdentity(),Fn=Date.now(),Nn=function(e){return e-Fn},On=function(e){switch(e.copy.toString()){case Ln:return{scale:Bn,webglScale:Tn().domain(e.domain())};case kn:return{scale:Nn,webglScale:Tn().domain(e.domain().map(Nn))};case Dn:return{scale:Bn,webglScale:Rn().domain(e.domain()).base(e.base())};case In:return{scale:Bn,webglScale:Pn().domain(e.domain()).exponent(e.exponent())};default:return{scale:e.copy(),webglScale:Tn().domain(e.range())}}},zn=function(e){switch(e){case l.symbolCircle:return hn();case l.symbolSquare:return t=qe(Ye),n=qe(Ze),t.appendHeader(ot).appendBody(st),n.appendHeader(Dt).appendBody(It),{vertex:function(){return t},fragment:function(){return n}};case l.symbolTriangle:return function(){var e=qe(Ye),t=qe(Ze);return e.appendHeader(ut).appendBody(dt),t.appendHeader(Ft).appendBody(Nt),{vertex:function(){return e},fragment:function(){return t}}}();case l.symbolCross:return function(){var e=qe(Ye),t=qe(Ze);return e.appendHeader(ht).appendBody(ft),t.appendHeader(Ot).appendBody(zt),{vertex:function(){return e},fragment:function(){return t}}}();case l.symbolDiamond:return function(){var e=qe(Ye),t=qe(Ze);return e.appendHeader(lt).appendBody(ct),t.appendHeader(kt).appendBody(Bt),{vertex:function(){return e},fragment:function(){return t}}}();case l.symbolStar:return function(){var e=qe(Ye),t=qe(Ze);return e.appendHeader(nt).appendBody(rt),t.appendHeader(Tt).appendBody(Rt),{vertex:function(){return e},fragment:function(){return t}}}();case l.symbolWye:return function(){var e=qe(Ye),t=qe(Ze);return e.appendHeader(it).appendBody(at),t.appendHeader(Pt).appendBody(Lt),{vertex:function(){return e},fragment:function(){return t}}}();default:throw new Error("Unrecognised symbol: ".concat(e))}var t,n},Un=function(e){var t=sn().divisor(1),n=e,r=!0,i=function(e){if(t(e),r){if(!Array.isArray(n))throw new Error("Expected an array, received: ".concat(n));if(n.length!==t.size())throw new Error("Expected array of length: ".concat(t.size(),", recieved array of length: ").concat(n.length));var i=e.context();i["vertexAttrib".concat(n.length,"fv")](t.location(),n),i.disableVertexAttribArray(t.location()),r=!1}};return i.clear=function(){r=!0},i.value=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],r=!0,i):n},p(i,t,"normalized","size","location"),i},Hn=function(){var e=Ie(),t=Cn(0,1),n=t.offset(1),r=Cn(0,1),i=r.offset(1),a=Cn(0,1).type(rn.UNSIGNED_BYTE),o=a.offset(1),s=gn().crossValueAttribute(t).crossNextValueAttribute(n).mainValueAttribute(r).mainNextValueAttribute(i).definedAttribute(a).definedNextAttribute(o),l=function(e,t){return!1},c=On,u=[],d=null,h=null,f=function(n){var i=c(e.xScale()),o=c(e.yScale()),f=!l(u,n);f&&(u=n,a.value((function(t,n){return e.defined()(t,n)})).data(n)),(f||i.scale!==d)&&(d=i.scale,"vertical"===e.orient()?t.value((function(t,n){return i.scale(e.crossValue()(t,n))})).data(n):t.value((function(t,n){return i.scale(e.mainValue()(t,n))})).data(n)),(f||o.scale!==h)&&(h=o.scale,"vertical"===e.orient()?r.value((function(t,n){return o.scale(e.mainValue()(t,n))})).data(n):r.value((function(t,n){return o.scale(e.crossValue()(t,n))})).data(n)),s.xScale(i.webglScale).yScale(o.webglScale).decorate((function(t){return e.decorate()(t,n,0)})),s(n.length)};return f.equals=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],f):l},f.scaleMapper=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],f):c},g(f,e,y("baseValue","bandwidth","align")),p(f,s,"context","lineWidth","pixelRatio"),f},Gn=function(){var e=l.symbol(),t=Ie(),n=xe("g","point"),r=function(e){return"translate("+e[0]+", "+e[1]+")"},i=function(i){be(i)&&n.transition(i),i.each((function(i,a,o){var l=i.filter(t.defined()),c=n(s.select(o[a]),l);c.enter().attr("transform",(function(e,n){return r(t.values(e,n).origin)})).attr("fill",Ne).attr("stroke",Fe).append("path"),c.attr("transform",(function(e,n){return r(t.values(e,n).origin)})).select("path").attr("d",e),t.decorate()(c,i,a)}))};return g(i,t,y("baseValue","bandwidth","align")),p(i,n,"key"),p(i,e,"type","size"),i},Vn=function(){var e=l.symbol(),t=Ie(),n=function(n){var r=n.filter(t.defined()),i=e.context();r.forEach((function(n,r){i.save();var a=t.values(n,r);i.translate(a.origin[0],a.origin[1]),i.beginPath(),i.strokeStyle=Fe,i.fillStyle=Ne,t.decorate()(i,n,r),e(n,r),i.fill(),i.stroke(),i.closePath(),i.restore()}))};return g(n,t,y("baseValue","bandwidth","align")),p(n,e,"size","type","context"),n},jn=function(){var e=function(e){return e.high},t=function(e){return e.low},r=function(e){return e.cross},i="vertical",a="center",o=function(){return 5},s=De({decorate:function(){},defined:function(n,i){return Pe(t,e,r)(n,i)},xScale:n.scaleIdentity(),yScale:n.scaleIdentity()});return s.values=function(n,l){var c=o(n,l),u=Le(a,c),d=s.xScale(),h=s.yScale();if("vertical"===i){var f=h(e(n,l));return{origin:[d(r(n,l))+u,f],high:0,low:h(t(n,l))-f,width:c}}var p=d(t(n,l));return{origin:[p,h(r(n,l))+u],high:d(e(n,l))-p,low:0,width:c}},s.xValues=function(){return"vertical"===i?[r]:[e,t]},s.yValues=function(){return"vertical"!==i?[r]:[e,t]},s.orient=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],s):i},s.lowValue=function(){return arguments.length?(t=Re(arguments.length<=0?void 0:arguments[0]),s):t},s.highValue=function(){return arguments.length?(e=Re(arguments.length<=0?void 0:arguments[0]),s):e},s.crossValue=function(){return arguments.length?(r=Re(arguments.length<=0?void 0:arguments[0]),s):r},s.bandwidth=function(){return arguments.length?(o=Re(arguments.length<=0?void 0:arguments[0]),s):o},s.align=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],s):a},s},Wn=function(){var e,t=function(e){return e.date},r=function(e){return e.open},i=function(e){return e.high},a=function(e){return e.low},o=function(e){return e.close},s=function(){return 5},l="center",c=function(n,r){return e.xScale()(t(n,r))};return(e=De({decorate:function(){},defined:function(e,n){return Pe(t,r,a,i,o)(e,n)},xScale:n.scaleIdentity(),yScale:n.scaleIdentity()})).values=function(t,n){var u=o(t,n),d=r(t,n),h=s(t,n),f=Le(l,h),p="";return u>d?p="up":u<d&&(p="down"),{cross:c(t,n)+f,open:e.yScale()(d),high:e.yScale()(i(t,n)),low:e.yScale()(a(t,n)),close:e.yScale()(u),width:h,direction:p}},e.xValues=function(){return[t]},e.yValues=function(){return[r,i,a,o]},e.crossValue=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],e):t},e.openValue=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],e):r},e.highValue=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],e):i},e.lowValue=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],e):a},e.yValue=e.closeValue=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],e):o},e.bandwidth=function(){return arguments.length?(s=Re(arguments.length<=0?void 0:arguments[0]),e):s},e.align=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],e):l},e},Xn=function(e,t){var n=Wn(),r=xe("g",t),i=function(e){return"translate("+e.cross+", "+e.high+")"},a=function(a){be(a)&&r.transition(a);var o,l=(o=a,function(e){return be(o)?e.transition(o):e});a.each((function(a,o,c){var u=a.filter(n.defined()),d=r(s.select(c[o]),u);d.enter().attr("transform",(function(e,t){return i(n.values(e,t))+" scale(1e-6, 1)"})).append("path"),d.each((function(r,a,o){var c=n.values(r,a),u="up"===c.direction?Be:ke,d=l(s.select(o[a])).attr("class",t+" "+c.direction).attr("stroke",u).attr("fill",u).attr("transform",(function(){return i(c)+" scale(1)"}));e.x(0).width(c.width).open((function(){return c.open-c.high})).high(0).low((function(){return c.low-c.high})).close((function(){return c.close-c.high})),d.select("path").attr("d",e([r]))})),n.decorate()(d,a,o)}))};return p(a,r,"key"),g(a,n),a},qn=function(e){var t=Wn(),n=function(n){var r=n.filter(t.defined()),i=e.context();r.forEach((function(n,r){i.save();var a=t.values(n,r);i.translate(a.cross,a.high),i.beginPath(),e.x(0).open((function(){return a.open-a.high})).width(a.width).high(0).low((function(){return a.low-a.high})).close((function(){return a.close-a.high}))([n]);var o="up"===a.direction?Be:ke;i.strokeStyle=o,i.fillStyle=o,t.decorate()(i,n,r),i.fill(),i.stroke(),i.closePath(),i.restore()}))};return p(n,e,"context"),g(n,t),n},Yn=function(e){var t=Wn(),n=cn(),r=cn(),i=cn(),a=cn(),o=cn(),s=cn().type(rn.UNSIGNED_SHORT),l=cn().type(rn.UNSIGNED_BYTE);e.crossValueAttribute(n).openValueAttribute(r).highValueAttribute(i).lowValueAttribute(a).closeValueAttribute(o).bandwidthAttribute(s).definedAttribute(l);var c=function(e,t){return!1},u=On,d=[],h=null,f=null,m=function(p){var m=u(t.xScale()),g=u(t.yScale()),v=!c(d,p);v&&(d=p,s.value((function(e,n){return t.bandwidth()(e,n)})).data(p),l.value((function(e,n){return t.defined()(e,n)})).data(p)),(v||m.scale!==h)&&(h=m.scale,n.value((function(e,n){return m.scale(t.crossValue()(e,n))})).data(p)),(v||g.scale!==f)&&(f=g.scale,r.value((function(e,n){return g.scale(t.openValue()(e,n))})).data(p),i.value((function(e,n){return g.scale(t.highValue()(e,n))})).data(p),a.value((function(e,n){return g.scale(t.lowValue()(e,n))})).data(p),o.value((function(e,n){return g.scale(t.closeValue()(e,n))})).data(p)),e.xScale(m.webglScale).yScale(g.webglScale).decorate((function(e){return t.decorate()(e,p,0)})),e(p.length)};return m.equals=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],m):c},m.scaleMapper=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],m):u},g(m,t,y("align")),p(m,e,"context","lineWidth","pixelRatio"),m},Zn=function(){var e=function(e){return e.upperQuartile},t=function(e){return e.lowerQuartile},r=function(e){return e.high},i=function(e){return e.low},a=function(e){return e.value},o=function(e){return e.median},s="vertical",l="center",c=function(){return 5},u=De({decorate:function(){},defined:function(n,s){return Pe(i,r,t,e,a,o)(n,s)},xScale:n.scaleIdentity(),yScale:n.scaleIdentity()});return u.values=function(n,d){var h=c(n,d),f=Le(l,h),p=u.xScale(),m=u.yScale();if("vertical"===s){var g=m(r(n,d));return{origin:[p(a(n,d))+f,g],high:0,upperQuartile:m(e(n,d))-g,median:m(o(n,d))-g,lowerQuartile:m(t(n,d))-g,low:m(i(n,d))-g,width:h}}var v=p(i(n,d));return{origin:[v,m(a(n,d))+f],high:p(r(n,d))-v,upperQuartile:p(e(n,d))-v,median:p(o(n,d))-v,lowerQuartile:p(t(n,d))-v,low:0,width:h}},u.xValues=function(){return"vertical"===s?[a]:[e,t,r,i,o]},u.yValues=function(){return"vertical"!==s?[a]:[e,t,r,i,o]},u.orient=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],u):s},u.lowerQuartileValue=function(){return arguments.length?(t=Re(arguments.length<=0?void 0:arguments[0]),u):t},u.upperQuartileValue=function(){return arguments.length?(e=Re(arguments.length<=0?void 0:arguments[0]),u):e},u.lowValue=function(){return arguments.length?(i=Re(arguments.length<=0?void 0:arguments[0]),u):i},u.highValue=function(){return arguments.length?(r=Re(arguments.length<=0?void 0:arguments[0]),u):r},u.crossValue=function(){return arguments.length?(a=Re(arguments.length<=0?void 0:arguments[0]),u):a},u.medianValue=function(){return arguments.length?(o=Re(arguments.length<=0?void 0:arguments[0]),u):o},u.bandwidth=function(){return arguments.length?(c=Re(arguments.length<=0?void 0:arguments[0]),u):c},u.align=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],u):l},u},Jn=function(){var e=[],t=function(e){return e},r=function(e,t){return t},i=De({decorate:function(){},xScale:n.scaleIdentity(),yScale:n.scaleIdentity()});return i.xValues=function(){return e.map((function(e){return e.xValues()})).reduce((function(e,t){return e.concat(t)}))},i.yValues=function(){return e.map((function(e){return e.yValues()})).reduce((function(e,t){return e.concat(t)}))},i.mapping=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],i):t},i.key=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],i):r},i.series=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],i):e},i},$n=function(){var e=Jn(),t=xe("g"),n=xe("g","multi"),r=function(r){be(r)&&(n.transition(r),t.transition(r));var i=e.mapping(),a=e.series(),o=e.xScale(),l=e.yScale();r.each((function(r,c,u){var d=n(s.select(u[c]),a);d.each((function(e,n,c){e.xScale(o).yScale(l);var u=i(r,n,a);t(s.select(c[n]),[u]).call(e)})),d.selection().order(),e.decorate()(d,r,c)}))};return g(r,e),p(r,n,"key"),r},Kn=function(){var e=null,t=Jn(),n=function(n){var r=t.mapping(),i=t.series(),a=t.xScale(),o=t.yScale();i.forEach((function(s,l){var c,u=r(n,l,i);s.context(e).xScale(a).yScale(o),s.decorate?(c=s.decorate(),s.decorate((function(e,r,i){t.decorate()(e,n,l),c(e,r,i)}))):t.decorate()(e,n,l),s(u),c&&s.decorate(c)}))};return n.context=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],n):e},g(n,t),n},Qn=function(){var e=null,t=1,n=Jn(),r=function(r){var i=n.mapping(),a=n.series(),o=n.xScale(),s=n.yScale();a.forEach((function(l,c){var u,d=i(r,c,a);l.context(e).pixelRatio(t).xScale(o).yScale(s),l.decorate?(u=l.decorate(),l.decorate((function(e,t,i){n.decorate()(e,r,c),u(e,t,i)}))):n.decorate()(e,r,c),l(d),u&&l.decorate(u)}))};return r.context=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],r):e},r.pixelRatio=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],r):t},g(r,n),r},er=function(e){var r=function(){return 50},i="center",a=n.scaleBand(),o=De({decorate:function(){},xScale:n.scaleLinear(),yScale:n.scaleLinear()});return o.offsetScaleForDatum=function(e,n,o){var s=r(n,o),l=Le(i,s),c=s/2;return a.domain(t.range(0,e.length)).range([-c+l,c+l])},o.bandwidth=function(){return arguments.length?(r=Re(arguments.length<=0?void 0:arguments[0]),o):r},o.align=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],o):i},g(o,a,x({paddingInner:"paddingOuter"})),o};var tr=function(){var e=function(e){return e.x},r=function(e){return e.y},i=function(e){return e.color},a=function(){return 5},o=function(){return 5},s=c.interpolateViridis,l=De({decorate:function(){},defined:function(t,n){return Pe(e,r,i)(t,n)},xScale:n.scaleIdentity(),yScale:n.scaleIdentity()});return l.pathGenerator=fe().x(0).y(0),l.colorScale=function(e){var r=e.map(i);return n.scaleLinear().domain([t.min(r),t.max(r)])},l.values=function(t,n){return{x:l.xScale()(e(t,n)),y:l.yScale()(r(t,n)),colorValue:i(t,n),width:o(t,n),height:a(t,n)}},l.xValues=function(){return[e]},l.yValues=function(){return[r]},l.xValue=function(){return arguments.length?(e=Re(arguments.length<=0?void 0:arguments[0]),l):e},l.yValue=function(){return arguments.length?(r=Re(arguments.length<=0?void 0:arguments[0]),l):r},l.colorValue=function(){return arguments.length?(i=Re(arguments.length<=0?void 0:arguments[0]),l):i},l.colorInterpolate=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],l):s},l.xBandwidth=function(){return arguments.length?(o=Re(arguments.length<=0?void 0:arguments[0]),l):o},l.yBandwidth=function(){return arguments.length?(a=Re(arguments.length<=0?void 0:arguments[0]),l):a},g(l,l.pathGenerator,x({horizontalAlign:"xAlign",verticalAlign:"yAlign"})),l},nr=function(e){return"function"==typeof e?e:function(){return e}},rr=function(){var e=n.scaleIdentity(),t=n.scaleIdentity(),r=function(e){return e},i=r,a=function(){},o="horizontal",l=xe("g","annotation-line"),c=function(n){if(be(n)&&l.transition(n),"horizontal"!==o&&"vertical"!==o)throw new Error("Invalid orientation");var c="horizontal"===o,u=c?function(e,t){return"translate(".concat(e,", ").concat(t,")")}:function(e,t){return"translate(".concat(t,", ").concat(e,")")},d=c?"x2":"y2",h=c?t:e,f=c?"left-handle":"bottom-handle",p=c?"right-handle":"top-handle",m=c?"9":"0",g=c?"0":"9",v=c?"0.32em":"0.71em",y=c?"start":"middle",b=(c?e:t).range(),x=function(){return u(b[0],h(r.apply(void 0,arguments)))},_=b[1]-b[0];n.each((function(e,t,n){var r=l(s.select(n[t]),e),c=r.enter().attr("transform",x).style("stroke","#bbb");c.append("line").attr(d,_),c.append("g").classed(f,!0).style("stroke","none"),c.append("g").classed(p,!0).style("stroke","none").attr("transform",u(_,0)).append("text").attr("text-anchor",y).attr("x",m).attr("y",g).attr("dy",v),r.attr("class","annotation-line ".concat(o)),r.attr("transform",x),r.select("line").attr(d,_),r.select("g."+p).attr("transform",u(_,0)),r.select("text").text(i),a(r,e,t)}))};return c.xScale=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],c):e},c.yScale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],c):t},c.value=function(){return arguments.length?(r=nr(arguments.length<=0?void 0:arguments[0]),c):r},c.label=function(){return arguments.length?(i=nr(arguments.length<=0?void 0:arguments[0]),c):i},c.decorate=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],c):a},c.orient=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],c):o},c};var ir=function(){var e=n.scaleIdentity(),t=n.scaleIdentity(),r=function(e){return e},i=r,a=function(){},o="horizontal",s=l.line(),c=function(n){if("horizontal"!==o&&"vertical"!==o)throw new Error("Invalid orientation");var l="horizontal"===o,c=s.context(),u=l?e:t,d=l?t:e,h=u.domain(),f=l?9:0,p=l?0:9,m=l?"left":"center",g=l?"middle":"hanging";n.forEach((function(e,t){c.save(),c.beginPath(),c.strokeStyle="#bbb",c.fillStyle="#000",c.textAlign=m,c.textBaseline=g,a(c,e,t),s.context(c)(h.map((function(t){var n=[u(t),d(r(e))];return l?n:n.reverse()})));var n=l?u(h[1]):d(r(e)),o=l?d(r(e)):u(h[1]);c.fillText(i(e),n+f,o+p),c.fill(),c.stroke(),c.closePath(),c.restore()}))};return c.xScale=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],c):e},c.yScale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],c):t},c.value=function(){return arguments.length?(r=nr(arguments.length<=0?void 0:arguments[0]),c):r},c.label=function(){return arguments.length?(i=nr(arguments.length<=0?void 0:arguments[0]),c):i},c.decorate=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],c):a},c.orient=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],c):o},p(c,s,"context"),c},ar=function(){var e=n.scaleIdentity(),t=[10],r=null,i=function(){var n;return null!=r?r:e.ticks?(n=e).ticks.apply(n,H(t)):e.domain()};return i.scale=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],i):e},i.ticks=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=n,i},i.tickArguments=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],i):t},i.tickValues=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],i):r},i},or=function(e){return e},sr=function(e){return e},lr=function(e,t,n,r){return e[t]?e[t].apply(e,n):r},cr=function(e){var t;return null!==(t=e.tickValues())&&void 0!==t?t:lr(e.scale(),"ticks",e.tickArguments(),e.scale().domain())},ur=function(e){var t;return null!==(t=e.tickFormat())&&void 0!==t?t:lr(e.scale(),"tickFormat",e.tickArguments(),sr)},dr=function(e){return e},hr=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[10],i=null,a=function(){},o=null,c=6,u=6,d=3,h=l.line(),f=xe("g","tick").key(dr),p=xe("path","domain"),m=function(){return{offset:[0,u+d]}},g=function(){return{path:[[0,0],[0,u]]}},v=n.labelOffset||m,y=n.tickPath||g,b=function(e,t){var n=0;return e.bandwidth&&(n=e.bandwidth()/2,e.round()&&(n=Math.round(n))),function(r){return t(e(r)+n,0)}},x=function(e,t){return w()?"translate(".concat(t,", ").concat(e,")"):"translate(".concat(e,", ").concat(t,")")},_=function(e){return w()?e.map((function(e){return[e[1],e[0]]})):e},w=function(){return"left"===e||"right"===e},M=function n(r){be(r)&&(f.transition(r),p.transition(r)),r.each((function(r,i,o){var l=o[i],u=s.select(l);l.__scale__||u.attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","right"===e?"start":"left"===e?"end":"middle");var d=l.__scale__||t;l.__scale__=t.copy();var m=cr(n),g=ur(n),M="bottom"===e||"right"===e?1:-1,S=function(e){var t=U(e,2),n=t[0],r=t[1];return[n,M*r]},A=t.range(),E=_([[A[0],M*c],[A[0],0],[A[1],0],[A[1],M*c]]),C=p(u,[r]);C.enter().attr("stroke","#000"),C.attr("d",h(E));var T=f(u,m),R=m.map((function(e,t){return v(e,t,m)})),P=m.map((function(e,t){return y(e,t,m)}));T.enter().attr("transform",b(d,x)).append("path").attr("stroke","#000"),T.enter().append("text").attr("transform",(function(e,t){return x.apply(void 0,H(S(R[t].offset)))})).attr("fill","#000"),T.exit().attr("transform",b(t,x)),T.select("path").attr("visibility",(function(e,t){return P[t].hidden&&"hidden"})).attr("d",(function(e,t){return h(_(P[t].path.map(S)))})),T.select("text").attr("visibility",(function(e,t){return R[t].hidden&&"hidden"})).attr("transform",(function(e,t){return x.apply(void 0,H(S(R[t].offset)))})).attr("dy",(function(){var t="0em";return w()?t="0.32em":"bottom"===e&&(t="0.71em"),t})).text(g),T.attr("transform",b(t,x)),a(T,r,i)}))};return M.tickFormat=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],M):o},M.tickSize=function(){return arguments.length?(u=c=Number(arguments.length<=0?void 0:arguments[0]),M):u},M.tickSizeInner=function(){return arguments.length?(u=Number(arguments.length<=0?void 0:arguments[0]),M):u},M.tickSizeOuter=function(){return arguments.length?(c=Number(arguments.length<=0?void 0:arguments[0]),M):c},M.tickPadding=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],M):d},M.decorate=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],M):a},M.scale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],M):t},M.ticks=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r=[].concat(t),M},M.tickArguments=function(){return arguments.length?(r=null==(arguments.length<=0?void 0:arguments[0])?[]:H(arguments.length<=0?void 0:arguments[0]),M):null!==r?r.slice():null},M.tickValues=function(){return arguments.length?(i=null==(arguments.length<=0?void 0:arguments[0])?[]:H(arguments.length<=0?void 0:arguments[0]),M):null!==i?i.slice():null},M.orient=function(){return e},M},fr=function(e,t){var n=!1,r=hr(e,t,{labelOffset:function(e,i,a){var o=0,s=r.tickSizeInner()+r.tickPadding(),l=!1;if(n){var c=t(e),u=i<a.length-1?t(a[i+1]):t.range()[1];o=(u-c)/2,s=r.tickPadding(),l=i===a.length-1&&c===u}return{offset:[o,s],hidden:l}}}),i=function(e){return r(e)};return i.tickCenterLabel=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],i):n},g(i,r),i},pr=function(e){return fr("top",e)},mr=function(e){return fr("bottom",e)},gr=function(e){return fr("left",e)},vr=function(e){return fr("right",e)},yr=function(e,t){var n=null,r=function(e,n,r){if(t.step)return t.step();var i=t(e);return n<r.length-1?t(r[n+1])/i:2*(t.range()[1]-i)},i=hr(e,t,{labelOffset:function(){return{offset:[0,i.tickPadding()]}},tickPath:function(e,t,a){var o;return{path:[[o=n?n(e,t):r(e,t,a)/2,0],[o,i.tickSizeInner()]],hidden:t===a.length-1}}}),a=function(e){i(e)};return a.tickOffset=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},g(a,i),a},br=function(e){return function(t){var n=cr(e),r=ur(e),i=n.map(r),a=t.append("text"),o=i.map((function(e){return a.text(e).node().getBBox()})),s=Math.max.apply(Math,H(o.map((function(e){return e.height})))),l=Math.max.apply(Math,H(o.map((function(e){return e.width}))));return a.remove(),{maxHeight:s,maxWidth:l,labelCount:i.length}}},xr="__d3fc-elements__",_r=function(e){return e[xr]||{}},wr=function(e,t){e[xr]=t},Mr=function(e){return"D3FC-GROUP"===e.tagName?[e].concat(H(e.querySelectorAll("d3fc-canvas, d3fc-group, d3fc-svg"))):[e]},Sr=function(e){var t=_r(e),n=t.width,r=t.height,i=e.useDevicePixelRatio&&null!=window.devicePixelRatio?window.devicePixelRatio:1,a=e.clientWidth*i,o=e.clientHeight*i,s=a!==n||o!==r,l=e.children[0];wr(e,{pixelRatio:i,width:a,height:o,resized:s,child:l})};if("function"!=typeof CustomEvent)throw new Error("d3fc-element depends on CustomEvent. Make sure that you load a polyfill in older browsers. See README.");var Ar=function(e){var t=_r(e),n=new CustomEvent("measure",{detail:t});e.dispatchEvent(n)},Er=function(e){var t=_r(e),n=new CustomEvent("draw",{detail:t});e.dispatchEvent(n)},Cr=function(e){return _r(e.ownerDocument).queue||[]},Tr=function(e,t){var n=_r(e.ownerDocument).requestId;null==n&&(n=requestAnimationFrame((function(){var t,n=Cr(e);(t=n.map(Mr).reduce((function(e,t){return e.concat(t)}))).forEach(Sr),t.forEach(Ar),t.forEach(Er),Rr(e)}))),wr(e.ownerDocument,{queue:t,requestId:n})},Rr=function(e){return function(e){return delete e[xr]}(e.ownerDocument)},Pr=function(e,t){var n=e;do{if(n.parentNode===t)return!0}while(n=n.parentNode);return!1},Lr=function(e){var t=Cr(e);if(!(t.indexOf(e)>-1||t.some((function(t){return Pr(e,t)})))){var n=t.filter((function(t){return!Pr(t,e)}));n.push(e),Tr(e,n)}};if("function"!=typeof HTMLElement)throw new Error("d3fc-element depends on Custom Elements (v1). Make sure that you load a polyfill in older browsers. See README.");var Dr=function(e,t){return function(n){D(i,n);var r=z(i);function i(){return R(this,i),r.apply(this,arguments)}return L(i,[{key:"attributeChangedCallback",value:function(e){"use-device-pixel-ratio"===e&&this.requestRedraw()}},{key:"connectedCallback",value:function(){0===this.childNodes.length&&this.appendChild(e()),function(e){null==e.__measureListener__&&(e.__measureListener__=function(t){return e.setMeasurements(t.detail)},e.addEventListener("measure",e.__measureListener__))}(this)}},{key:"disconnectedCallback",value:function(){!function(e){null!=e.__measureListener__&&(e.removeEventListener("measure",e.__measureListener__),e.__measureListener__=null)}(this)}},{key:"setMeasurements",value:function(e){var n,r=e.width,i=e.height,a=G(n=this.childNodes)||V(n)||j(n)||X(),o=a[0];if(a.slice(1).length>0)throw new Error("A d3fc-svg/canvas element must only contain a single svg/canvas element.");t(this,o,{width:r,height:i})}},{key:"requestRedraw",value:function(){Lr(this)}},{key:"useDevicePixelRatio",get:function(){return this.hasAttribute("use-device-pixel-ratio")&&"false"!==this.getAttribute("use-device-pixel-ratio")},set:function(e){e&&!this.useDevicePixelRatio?this.setAttribute("use-device-pixel-ratio",""):!e&&this.useDevicePixelRatio&&this.removeAttribute("use-device-pixel-ratio"),this.requestRedraw()}}],[{key:"observedAttributes",get:function(){return["use-device-pixel-ratio"]}}]),i}(N(HTMLElement))},Ir=function(e){D(n,e);var t=z(n);function n(){return R(this,n),t.apply(this,arguments)}return L(n,[{key:"setWebglViewport",get:function(){return this.hasAttribute("set-webgl-viewport")&&"false"!==this.getAttribute("set-webgl-viewport")},set:function(e){e&&!this.setWebglViewport?this.setAttribute("set-webgl-viewport",""):!e&&this.setWebglViewport&&this.removeAttribute("set-webgl-viewport"),this.requestRedraw()}}]),n}(Dr((function(){return document.createElement("canvas")}),(function(e,t,n){var r=n.width,i=n.height;t.setAttribute("width",r),t.setAttribute("height",i),e.setWebglViewport&&t.getContext("webgl").viewport(0,0,r,i)}))),kr=function(e){e.autoResize?Br(e):Fr(e)},Br=function(e){null==e.__autoResizeListener__&&(e.__autoResizeListener__=function(){return Lr(e)},addEventListener("resize",e.__autoResizeListener__))},Fr=function(e){null!=e.__autoResizeListener__&&(removeEventListener("resize",e.__autoResizeListener__),e.__autoResizeListener__=null)},Nr=function(e){D(n,e);var t=z(n);function n(){return R(this,n),t.apply(this,arguments)}return L(n,[{key:"connectedCallback",value:function(){kr(this)}},{key:"disconnectedCallback",value:function(){Fr(this)}},{key:"requestRedraw",value:function(){Lr(this)}},{key:"attributeChangedCallback",value:function(e){"auto-resize"===e&&kr(this)}},{key:"autoResize",get:function(){return this.hasAttribute("auto-resize")&&"false"!==this.getAttribute("auto-resize")},set:function(e){e&&!this.autoResize?this.setAttribute("auto-resize",""):!e&&this.autoResize&&this.removeAttribute("auto-resize"),kr(this)}}],[{key:"observedAttributes",get:function(){return["auto-resize"]}}]),n}(N(HTMLElement)),Or=Dr((function(){return document.createElementNS("http://www.w3.org/2000/svg","svg")}),(function(e,t,n){var r=n.width,i=n.height;t.setAttribute("viewBox","0 0 ".concat(r," ").concat(i))})),zr="d3fc-canvas,d3fc-svg{position:relative;display:block}d3fc-canvas>canvas,d3fc-svg>svg{position:absolute;height:100%;width:100%}d3fc-svg>svg{overflow:visible}",Ur=document.createElement("style");if(Ur.setAttribute("type","text/css"),document.querySelector("head").appendChild(Ur),Ur.styleSheet?Ur.styleSheet.cssText+=zr:Ur.textContent+=zr,"object"!==("undefined"==typeof customElements?"undefined":T(customElements))||"function"!=typeof customElements.define)throw new Error("d3fc-element depends on Custom Elements (v1). Make sure that you load a polyfill in older browsers. See README.");var Hr=[],Gr=function(e,t){customElements.get(e)?Hr.push(e):customElements.define(e,t)};Gr("d3fc-canvas",Ir),Gr("d3fc-group",Nr),Gr("d3fc-svg",Or),Hr.length>0&&console.warn('The d3fc components "'.concat(Hr.join(", "),'" is/are already registered on window. Be aware that this can create compatibility issues if different versions are used.'));var Vr=function(){for(var e={},t=function(t){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];t[i].apply(null,e[i])}return t},n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(var a=function(){var n=s[o];t[n]=function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return i.length?(e[n]=i,t):e[n]}},o=0,s=r;o<s.length;o++)a();return t},jr="d3fc-group.cartesian-chart{width:100%;height:100%;overflow:hidden;display:grid;display:-ms-grid;grid-template-columns:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);-ms-grid-columns:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);grid-template-rows:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);-ms-grid-rows:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);}\nd3fc-group.cartesian-chart>.top-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:3;-ms-grid-column:3;grid-row:1;-ms-grid-row:1;}\nd3fc-group.cartesian-chart>.top-axis{height:2em;grid-column:3;-ms-grid-column:3;grid-row:2;-ms-grid-row:2;}\nd3fc-group.cartesian-chart>.left-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:1;-ms-grid-column:1;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.left-axis{width:3em;grid-column:2;-ms-grid-column:2;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.plot-area{overflow:hidden;grid-column:3;-ms-grid-column:3;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.right-axis{width:3em;grid-column:4;-ms-grid-column:4;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.right-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:5;-ms-grid-column:5;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.bottom-axis{height:2em;grid-column:3;-ms-grid-column:3;grid-row:4;-ms-grid-row:4;}\nd3fc-group.cartesian-chart>.bottom-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:3;-ms-grid-column:3;grid-row:5;-ms-grid-row:5;}\nd3fc-group.cartesian-chart>.y-label{display:flex;transform:rotate(-90deg);width:1em;white-space:nowrap;justify-content:center;}",Wr=document.createElement("style");Wr.setAttribute("type","text/css"),document.querySelector("head").appendChild(Wr),Wr.styleSheet?Wr.styleSheet.cssText+=jr:Wr.textContent+=jr;var Xr=function(e){return"function"==typeof e?e:function(){return e}},qr=function(){var e=Yr.apply(void 0,arguments),t=e.xScale,n=e.yScale,r=e.xAxis,i=e.yAxis,a=Xr(""),o=Xr(""),l=Xr(""),c=Xr(null),u=Xr(null),d=Xr("right"),h=Xr("bottom"),f=null,p=null,m=null,v=!1,b=!0,x=Vr("tickFormat","ticks","tickArguments","tickSize","tickSizeInner","tickSizeOuter","tickValues","tickPadding","tickCenterLabel"),w=function(){},M=Vr("tickFormat","ticks","tickArguments","tickSize","tickSizeInner","tickSizeOuter","tickValues","tickPadding","tickCenterLabel"),S=function(){},A=function(){},E=xe("d3fc-group","cartesian-chart"),C=xe("d3fc-canvas","webgl-plot-area"),T=xe("d3fc-canvas","canvas-plot-area"),R=xe("d3fc-svg","svg-plot-area"),P=xe("d3fc-svg","x-axis").key((function(e){return e})),L=xe("d3fc-svg","y-axis").key((function(e){return e})),D=xe("div","chart-label"),I=xe("div","x-label").key((function(e){return e})),k=xe("div","y-label").key((function(e){return e})),B=function(e){return function(t){return be(e)?t.transition(e):t}},F=function(e){var g=B(e);e.each((function(e,y,_){var B=E(s.select(_[y]),[e]);B.enter().attr("auto-resize",""),D(B,[h(e)]).attr("class",(function(e){return"top"===e?"chart-label bottom-label":"chart-label top-label"})).style("margin-bottom",(function(e){return"top"===e?0:"1em"})).style("margin-top",(function(e){return"top"===e?"1em":0})).text(a(e)),I(B,[h(e)]).attr("class",(function(e){return"x-label ".concat(e,"-label")})).text(o(e)),k(B,[d(e)]).attr("class",(function(e){return"y-label ".concat(e,"-label")})).text(l(e)),C(B,f?[e]:[]).attr("set-webgl-viewport","").classed("plot-area",!0).attr("use-device-pixel-ratio",b).on("draw",(function(e,r){var i=e.detail,a=i.child,o=i.pixelRatio;f.context(v?null:a.getContext("webgl")).pixelRatio(o).xScale(t).yScale(n),f(r)})),B.select(".webgl-plot-area>canvas").on("webglcontextlost",(function(e){console.warn("WebGLRenderingContext lost"),e.preventDefault(),v=!0,B.node().requestRedraw()})).on("webglcontextrestored",(function(){console.info("WebGLRenderingContext restored"),v=!1,B.node().requestRedraw()})),T(B,p?[e]:[]).classed("plot-area",!0).attr("use-device-pixel-ratio",b).on("draw",(function(e,r){var i=e.detail,a=i.child,o=i.pixelRatio,s=a.getContext("2d");s.save(),b&&s.scale(o,o),p.context(s).xScale(t).yScale(n),p(r),s.restore()})),R(B,m?[e]:[]).classed("plot-area",!0).on("draw",(function(e,r){var i=e.detail.child;m.xScale(t).yScale(n),g(s.select(i).datum(r)).call(m)})),P(B,[h(e)]).attr("class",(function(e){return"x-axis ".concat(e,"-axis")})).style("height",c(e)).on("measure",(function(e,n){var r=e.detail,i=r.width,a=r.height,o=r.child;"top"===n&&s.select(o).attr("viewBox","0 ".concat(-a," ").concat(i," ").concat(a)),t.range([0,i])})).on("draw",(function(e,n){var i=e.detail.child,a="top"===n?r.top(t):r.bottom(t);a.decorate(w),g(s.select(i).datum(n)).call(x(a))})),L(B,[d(e)]).attr("class",(function(e){return"y-axis ".concat(e,"-axis")})).style("width",u(e)).on("measure",(function(e,t){var r=e.detail,i=r.width,a=r.height,o=r.child;"left"===t&&s.select(o).attr("viewBox","".concat(-i," 0 ").concat(i," ").concat(a)),n.range([a,0])})).on("draw",(function(e,t){var r=e.detail.child,a="left"===t?i.left(n):i.right(n);a.decorate(S),g(s.select(r).datum(t)).call(M(a))})),B.each((function(e,t,n){return n[t].requestRedraw()})),A(B,e,y)}))},N=y(/range\w*/,/tickFormat/);return g(F,t,N,_("x")),g(F,n,N,_("y")),g(F,x,_("x")),g(F,M,_("y")),F.xOrient=function(){return arguments.length?(h=Xr(arguments.length<=0?void 0:arguments[0]),F):h},F.yOrient=function(){return arguments.length?(d=Xr(arguments.length<=0?void 0:arguments[0]),F):d},F.xDecorate=function(){return arguments.length?(w=arguments.length<=0?void 0:arguments[0],F):w},F.yDecorate=function(){return arguments.length?(S=arguments.length<=0?void 0:arguments[0],F):S},F.chartLabel=function(){return arguments.length?(a=Xr(arguments.length<=0?void 0:arguments[0]),F):a},F.xLabel=function(){return arguments.length?(o=Xr(arguments.length<=0?void 0:arguments[0]),F):o},F.yLabel=function(){return arguments.length?(l=Xr(arguments.length<=0?void 0:arguments[0]),F):l},F.xAxisHeight=function(){return arguments.length?(c=Xr(arguments.length<=0?void 0:arguments[0]),F):c},F.yAxisWidth=function(){return arguments.length?(u=Xr(arguments.length<=0?void 0:arguments[0]),F):u},F.webglPlotArea=function(){return arguments.length?(f=arguments.length<=0?void 0:arguments[0],F):f},F.canvasPlotArea=function(){return arguments.length?(p=arguments.length<=0?void 0:arguments[0],F):p},F.svgPlotArea=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],F):m},F.decorate=function(){return arguments.length?(A=arguments.length<=0?void 0:arguments[0],F):A},F.useDevicePixelRatio=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],F):b},F},Yr=function(){for(var e={xScale:n.scaleIdentity(),yScale:n.scaleIdentity(),xAxis:{bottom:mr,top:pr},yAxis:{right:vr,left:gr}},t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return 1!==r.length||r[0].domain||r[0].range?Object.assign(e,{xScale:r[0]||e.xScale,yScale:r[1]||e.yScale}):Object.assign(e,r[0])},Zr=function(e){return"function"==typeof e?e:function(){return e}},Jr=function(e,t){return function(){var n=Zr(""),r=t,i=function(){},a=qr.apply(void 0,arguments),o=function(t){e(a,r),a.decorate((function(e,t,r){e.enter().select(".x-label").style("height","1em").style("line-height","1em");var o=a.yOrient()(t);e.enter().append("div").attr("class","y-label-container").style("grid-column","left"===o?1:5).style("-ms-grid-column","left"===o?1:5).style("grid-row",3).style("-ms-grid-row",3).style("width","1em").style("display","flex").style("align-items","center").style("justify-content","center").style("white-space","nowrap").append("div").attr("class","y-label").style("transform","rotate(-90deg)"),e.select(".y-label-container>.y-label").text(n),i(e,t,r)})),t.call(a)};return g(o,a,b(/^x/,/^y/,"chartLabel")),o.yLabel=function(){return arguments.length?(n=Zr(arguments.length<=0?void 0:arguments[0]),o):n},o.plotArea=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],o):r},o.decorate=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],o):i},o}},$r=Jr((function(e,t){return e.svgPlotArea(t)}),ze),Kr=Jr((function(e,t){return e.canvasPlotArea(t)}),Ue),Qr=function(e){return[e[1],e[0]]},ei=function(e){var t=function(e){switch(e){case"x":return d.brushX();case"y":return d.brushY();case"xy":return d.brush()}}(e),r=u.dispatch("brush","start","end"),i=n.scaleIdentity(),a=n.scaleIdentity(),o=xe("g","brush"),l=function(t,n,r){switch(e){case"x":return t.map(n);case"y":return t.map(r);case"xy":return[[n(t[0][0]),r(t[0][1])],[n(t[1][0]),r(t[1][1])]]}},c=function(t){var r=n.scaleLinear().domain(i.domain());return"x"===e?t.map(r.invert):"xy"===e?[r.invert(t[0][0]),r.invert(t[1][0])]:void 0},h=function(t){var r=n.scaleLinear().domain(Qr(a.domain()));return"y"===e?[t[1],t[0]].map(r.invert):"xy"===e?[r.invert(t[1][1]),r.invert(t[0][1])]:void 0},f=function(e){if(!e.sourceEvent||"draw"!==e.sourceEvent.type)if(e.selection){var t=(o=e.selection,l(o,n.scaleLinear().domain(i.range()),n.scaleLinear().domain(Qr(a.range()))));r.call(e.type,{},{selection:t,xDomain:c(t),yDomain:h(t)})}else r.call(e.type,{},{});var o},m=function(e){e.each((function(e,r,c){t.extent([[i.range()[0],a.range()[1]],[i.range()[1],a.range()[0]]]),t.on("end",(function(e){return f(e)})).on("brush",(function(e){return f(e)})).on("start",(function(e){return f(e)})),o(s.select(c[r]),[e]).call(t).call(t.move,e?l(e,n.scaleLinear().domain(i.range()).invert,n.scaleLinear().domain(Qr(a.range())).invert):null)}))};return m.xScale=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],m):i},m.yScale=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],m):a},p(m,r,"on"),p(m,t,"filter","handleSize"),m},ti=function(e,t){if(null==e&&null==t)return!0;var n=e.domain(),r=t.domain();return n.length===r.length&&n.every((function(e,t){var n;return(null==e?void 0:e.valueOf())===(null===(n=r[t])||void 0===n?void 0:n.valueOf())}))},ni=Symbol("d3fc-domain-zoom");e.annotationCanvasBand=function(){var e=n.scaleIdentity(),t=n.scaleIdentity(),r="horizontal",i=function(e){return e.from},a=function(e){return e.to},o=function(){},s=fe().horizontalAlign("right").verticalAlign("top"),l=function(n){if("horizontal"!==r&&"vertical"!==r)throw new Error("Invalid orientation");var l=s.context(),c="horizontal"===r,u=c?t:e,d=(c?e:t).range(),h=d[1]-d[0],f=c?"x":"y",p=c?"y":"x",m=c?"height":"width",g=c?"width":"height";n.forEach((function(e,t){l.save(),l.beginPath(),l.strokeStyle="transparent",s[p](u(i(e))),s[f](d[0]),s[g](h),s[m](u(a(e))-u(i(e))),o(l,e,t),s.context(l)([e],t),l.fill(),l.stroke(),l.closePath(),l.restore()}))};return l.xScale=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],l):e},l.yScale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],l):t},l.orient=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],l):r},l.decorate=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],l):o},l.fromValue=function(){return arguments.length?(i=nr(arguments.length<=0?void 0:arguments[0]),l):i},l.toValue=function(){return arguments.length?(a=nr(arguments.length<=0?void 0:arguments[0]),l):a},p(l,s,"context"),l},e.annotationCanvasCrosshair=function(){var e=function(e){return e.x},t=function(e){return e.y},r=n.scaleIdentity(),i=n.scaleIdentity(),a=Vn(),o=ir(),s=ir().orient("vertical"),l=n.scaleIdentity(),c=n.scaleIdentity(),u=Kn().series([o,s,a]).xScale(l).yScale(c).mapping((function(e){return[e]})),d=function(n){n.forEach((function(n){l.range(r.range()),c.range(i.range()),a.crossValue(e).mainValue(t),o.value(t),s.value(e),u(n)}))};d.x=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],d):e},d.y=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],d):t},d.xScale=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],d):r},d.yScale=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],d):i};var h=b("label","decorate");return g(d,o,h,_("y")),g(d,s,h,_("x")),p(d,a,"decorate"),p(d,u,"context"),d},e.annotationCanvasGridline=function(){var e=function(){},t=function(){},n=ar(),r=ar(),i=l.line(),a=function(){var a=i.context(),o=n.scale(),s=r.scale();n().forEach((function(t,n){a.save(),a.beginPath(),a.strokeStyle="#bbb",a.fillStyle="transparent",e(a,t,n),i.context(a)(s.domain().map((function(e){return[o(t),s(e)]}))),a.fill(),a.stroke(),a.closePath(),a.restore()})),r().forEach((function(e,n){a.save(),a.beginPath(),a.strokeStyle="#bbb",a.fillStyle="transparent",t(a,e,n),i.context(a)(o.domain().map((function(t){return[o(t),s(e)]}))),a.fill(),a.stroke(),a.closePath(),a.restore()}))};return a.yDecorate=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],a):t},a.xDecorate=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],a):e},g(a,n,_("x")),g(a,r,_("y")),p(a,i,"context"),a},e.annotationCanvasLine=ir,e.annotationSvgBand=function(){var e=n.scaleIdentity(),t=n.scaleIdentity(),r="horizontal",i=function(e){return e.from},a=function(e){return e.to},o=function(){},l=xe("g","annotation-band"),c=fe().horizontalAlign("center").verticalAlign("center").x(0).y(0),u=function(n){if(be(n)&&l.transition(n),"horizontal"!==r&&"vertical"!==r)throw new Error("Invalid orientation");var u="horizontal"===r,d=u?function(e,t){return"translate(".concat(e,", ").concat(t,")")}:function(e,t){return"translate(".concat(t,", ").concat(e,")")},h=u?t:e,f=(u?e:t).range(),p=f[1]-f[0],m=u?"height":"width",g=function(){return d((f[1]+f[0])/2,(h(a.apply(void 0,arguments))+h(i.apply(void 0,arguments)))/2)};c[u?"width":"height"](p),c[m]((function(){return h(a.apply(void 0,arguments))-h(i.apply(void 0,arguments))})),n.each((function(e,t,n){var i=l(s.select(n[t]),e);i.enter().attr("transform",g).append("path").classed("band",!0),i.attr("class","annotation-band ".concat(r)).attr("transform",g).select("path").attr("d",(function(e,t){return c([e],t)})),o(i,e,t)}))};return u.xScale=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],u):e},u.yScale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],u):t},u.orient=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],u):r},u.decorate=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],u):o},u.fromValue=function(){return arguments.length?(i=nr(arguments.length<=0?void 0:arguments[0]),u):i},u.toValue=function(){return arguments.length?(a=nr(arguments.length<=0?void 0:arguments[0]),u):a},u},e.annotationSvgCrosshair=function(){var e=function(e){return e.x},t=function(e){return e.y},r=n.scaleIdentity(),i=n.scaleIdentity(),a=function(){},o=xe("g","annotation-crosshair"),l=Gn(),c=rr(),u=rr().orient("vertical"),d=n.scaleIdentity(),h=n.scaleIdentity(),f=$n().series([c,u,l]).xScale(d).yScale(h).mapping((function(e){return[e]})),p=function(n){be(n)&&o.transition(n),n.each((function(n,p,m){var g=o(s.select(m[p]),n);g.enter().style("pointer-events","none"),d.range(r.range()),h.range(i.range()),l.crossValue(e).mainValue(t),c.value(t),u.value(e),g.call(f),a(g,n,p)}))};p.x=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],p):e},p.y=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],p):t},p.xScale=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],p):r},p.yScale=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],p):i},p.decorate=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],p):a};var m=b("label");return g(p,c,m,_("y")),g(p,u,m,_("x")),p},e.annotationSvgGridline=function(){var e=function(){},t=function(){},n=ar(),r=ar(),i=xe("line","gridline-y").key(or),a=xe("line","gridline-x").key(or),o=function(o){be(o)&&(i.transition(o),a.transition(o)),o.each((function(o,l,c){var u=c[l],d=s.select(c[l]),h=n.scale(),f=r.scale(),p=u.__x_scale__||h;u.__x_scale__=h.copy();var m=n(),g=i(d,m);g.enter().attr("x1",p).attr("x2",p).attr("y1",f.range()[0]).attr("y2",f.range()[1]).attr("stroke","#bbb"),g.attr("x1",h).attr("x2",h).attr("y1",f.range()[0]).attr("y2",f.range()[1]),g.exit().attr("x1",h).attr("x2",h),e(g,m,l);var v=u.__y_scale__||f;u.__y_scale__=f.copy();var y=r(),b=a(d,y);b.enter().attr("y1",v).attr("y2",v).attr("x1",h.range()[0]).attr("x2",h.range()[1]).attr("stroke","#bbb"),b.attr("y1",f).attr("y2",f).attr("x1",h.range()[0]).attr("x2",h.range()[1]),b.exit().attr("y1",f).attr("y2",f),t(b,y,l)}))};return o.yDecorate=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],o):t},o.xDecorate=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],o):e},g(o,i,x({key:"xKey"})),g(o,a,x({key:"yKey"})),g(o,n,_("x")),g(o,r,_("y")),o},e.annotationSvgLine=rr,e.autoBandwidth=function(e){var n=.75,r=function(e){if(e.length<=1)return 10;e=e.sort(t.ascending).filter((function(e,t,n){return-1===n.indexOf(e,t+1)}));var r=t.pairs(e).map((function(e){return Math.abs(e[0]-e[1])})),i=t.min(r);return n*i},i=function(t,n,i){if(t.bandwidth)return t.bandwidth();var a,o=(Array.isArray(n)?(a=[]).concat.apply(a,H(n)):n).filter(e.defined()).map(i()).map(t);return r(o)},a=function(t){var n=function(t){if(e.xBandwidth&&e.yBandwidth)e.xBandwidth(i(e.xScale(),t,e.xValue)),e.yBandwidth(i(e.yScale(),t,e.yValue));else{var n=e.orient&&"horizontal"===e.orient()?e.yScale():e.xScale();e.bandwidth(i(n,t,e.crossValue))}};t instanceof s.selection?t.each((function(t,r,i){n(t),e(s.select(i[r]))})):(n(t),e(t))};return g(a,e),a.widthFraction=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},a},e.axisBottom=mr,e.axisLabelOffset=function(e){var t="auto",n=function(){},r=function(){return"left"===e.orient()||"right"===e.orient()},i=function(){return"top"===e.orient()||"left"===e.orient()?-1:1},a=function(n){var a=br(e)(n),o=a.maxHeight,s=a.maxWidth,l=a.labelCount,c=e.scale().range()[1],u="auto"===t?Math.floor((r()?o:s)*l/c)+1:t,d=n.select("text"),h=d.attr("transform");d.attr("transform",(function(e,t){return"".concat(h," ").concat(function(e){return r()?"translate(".concat(e%u*s*i(),", 0)"):"translate(0, ".concat(e%u*o*i(),")")}(t))}))},o=function(t){return e(t)};return e.decorate((function(e){a(e),n(e)})),o.decorate=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},o.labelOffsetDepth=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],o):t},g(o,e,y("decorate")),o},e.axisLabelRotate=function(e){var t="auto",n=function(){},r=function(){return"left"===e.orient()||"right"===e.orient()},i=function(){return"top"===e.orient()||"left"===e.orient()?-1:1},a=function(){switch(e.orient()){case"top":case"right":return"start";default:return"end"}},o=function(n){var o=function(n){var o,s=br(e)(n),l=s.maxHeight,c=s.maxWidth,u=s.labelCount*c;if("auto"===t){var d=e.scale().range()[1];o=d<u?90*Math.min(1,(u/d-.8)/2):0}else o=t;return{rotate:r()?Math.floor(i()*(90-o)):Math.floor(-o),maxHeight:l,maxWidth:c,anchor:o?a():"middle"}}(n),s=o.rotate,l=o.maxHeight,c=o.anchor,u=n.select("text"),d=u.attr("transform"),h=i()*Math.floor(l/2),f=r()?"translate(".concat(h,", 0)"):"translate(0, ".concat(h,")");u.style("text-anchor",c).attr("transform","".concat(d," ").concat(f," rotate(").concat(s," 0 0)"))},s=function(t){e(t)};return e.decorate((function(e){o(e),n(e)})),s.decorate=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],s):n},s.labelRotate=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],s):t},g(s,e,y("decorate")),s},e.axisLeft=gr,e.axisOrdinalBottom=function(e){return yr("bottom",e)},e.axisOrdinalLeft=function(e){return yr("left",e)},e.axisOrdinalRight=function(e){return yr("right",e)},e.axisOrdinalTop=function(e){return yr("top",e)},e.axisRight=vr,e.axisTop=pr,e.brush=function(){return ei("xy")},e.brushX=function(){return ei("x")},e.brushY=function(){return ei("y")},e.bucket=ue,e.chartCanvasCartesian=Kr,e.chartCartesian=qr,e.chartSvgCartesian=$r,e.dataJoin=xe,e.discontinuityIdentity=Z,e.discontinuityRange=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=function(e,t){return e>t[0]&&e<t[1]},i=function(e,t){return e[0]>=t[0]&&e[1]<=t[1]},a={distance:function(e,n){e=a.clampUp(e),n=a.clampDown(n);var r=t.filter((function(t){return i(t,[e,n])})).map((function(e){return e[1]-e[0]}));return n-e-r.reduce((function(e,t){return e+t}),0)}},o=function(e,t){return e instanceof Date?new Date(e.getTime()+t):e+t};return a.offset=function(e,n){if(n>0){var r=function(){for(var r=a.clampUp(e),i=n;i>0;){var s=t.filter((function(e){return e[0]>r})).sort((function(e,t){return e[0]-t[0]}));if(s.length){var l=s[0],c=l[0]-r;c>i?(r=o(r,i),i=0):(r=l[1],i-=c)}else r=o(r,i),i=0}return{v:r}}();if("object"===T(r))return r.v}else{var i=function(){for(var r=a.clampDown(e),i=n;i<0;){var s=t.filter((function(e){return e[1]<r})).sort((function(e,t){return t[0]-e[0]}));if(s.length){var l=s[0],c=l[1]-r;c<i?(r=o(r,i),i=0):(r=l[0],i-=c)}else r=o(r,i),i=0}return{v:r}}();if("object"===T(i))return i.v}},a.clampUp=function(e){return t.reduce((function(e,t){return r(e,t)?t[1]:e}),e)},a.clampDown=function(e){return t.reduce((function(e,t){return r(e,t)?t[0]:e}),e)},a.copy=function(){return a},a},e.discontinuitySkipUtcWeekends=function(){return $((function(e){return e.getUTCDay()}),r.utcDay,r.utcSaturday,r.utcMonday)},e.discontinuitySkipUtcWeeklyPattern=function(e){return ie(e,ae)},e.discontinuitySkipWeekends=function(){return $((function(e){return e.getDay()}),r.timeDay,r.timeSaturday,r.timeMonday)},e.discontinuitySkipWeeklyPattern=function(e){return ie(e,re)},e.effectivelyZero=ye,e.exclude=y,e.extentDate=se,e.extentLinear=oe,e.extentTime=se,e.feedGdax=function(){var e="BTC-USD",t=null,n=null,r=null,i=function(){var i=[];null!=t&&i.push("start="+t.toISOString()),null!=n&&i.push("end="+n.toISOString()),null!=r&&i.push("granularity="+r);var o="https://api.gdax.com/products/"+e+"/candles?"+i.join("&");return a.json(o).then((function(e){return e.map((function(e){return{date:new Date(1e3*e[0]),open:e[3],high:e[2],low:e[1],close:e[4],volume:e[5]}}))}))};return i.product=function(t){return arguments.length?(e=t,i):e},i.start=function(e){return arguments.length?(t=e,i):t},i.end=function(e){return arguments.length?(n=e,i):n},i.granularity=function(e){return arguments.length?(r=e,i):r},i},e.group=function(){var e="",t="vertical",n=function(e,t){return Number(e[t])},r=function(r){return"vertical"===t?function(t){return Object.keys(t[0]).filter((function(t){return t!==e})).map((function(r){var i=t.filter((function(e){return e[r]})).map((function(t){var i=[t[e],n(t,r)];return i.data=t,i}));return i.key=r,i}))}(r):function(t){return t.map((function(t){var r=Object.keys(t).filter((function(t){return t!==e})).map((function(e){var r=[e,n(t,e)];return r.data=t,r}));return r.key=t[e],r}))}(r)};return r.key=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],r):e},r.value=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],r):n},r.orient=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],r):t},r},e.include=b,e.includeMap=x,e.indicatorBollingerBands=function(){var e=2,n=E().accumulator((function(n){var r=n&&t.deviation(n),i=n&&t.mean(n);return{average:i,upper:A(i+e*r),lower:A(i-e*r)}})),r=function(e){return n(e)};return r.multiplier=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],r):e},p(r,n,"period","value"),r},e.indicatorElderRay=function(){var e=function(e,t){return e.close},n=function(e,t){return e.high},r=function(e,t){return e.low},i=C().period(13),a=function(a){return i.value(e),t.zip(a,i(a)).map((function(e){return{bullPower:A(n(e[0])-e[1]),bearPower:A(r(e[0])-e[1])}}))};return a.closeValue=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],a):e},a.highValue=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},a.lowValue=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],a):r},p(a,i,"period"),a},e.indicatorEnvelope=function(){var e=.1,t=w,n=function(n){return n.map((function(n){return{lower:A(t(n)*(1-e)),upper:A(t(n)*(1+e))}}))};return n.factor=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],n):e},n.value=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],n):t},n},e.indicatorExponentialMovingAverage=C,e.indicatorForceIndex=function(){var e=function(e,t){return e.volume},t=function(e,t){return e.close},n=C().period(13),r=E().period(2).defined((function(n){return null!=t(n)&&null!=e(n)})).accumulator((function(n){return n&&A((t(n[1])-t(n[0]))*e(n[1]))})),i=function(e){var t=r(e);return n(t)};return i.volumeValue=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],i):e},i.closeValue=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],i):t},p(i,n,"period"),i},e.indicatorMacd=function(){var e=w,n=C().period(12),r=C().period(26),i=C().period(9),a=function(a){n.value(e),r.value(e);var o=t.zip(n(a),r(a)).map((function(e){return void 0!==e[0]&&void 0!==e[1]?e[0]-e[1]:void 0})),s=i(o);return t.zip(o,s).map((function(e){return{macd:e[0],signal:e[1],divergence:void 0!==e[0]&&void 0!==e[1]?e[0]-e[1]:void 0}}))};return a.value=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],a):e},g(a,n,x({period:"fastPeriod"})),g(a,r,x({period:"slowPeriod"})),g(a,i,x({period:"signalPeriod"})),a},e.indicatorMovingAverage=Y,e.indicatorRelativeStrengthIndex=function(){var e=E().period(14),n=function(e){var t=U(e,2),n=t[0],r=t[1];return n<r?0:n-r},r=function(e){var t=U(e,2),n=t[0],r=t[1];return n>r?0:r-n},i=function(e,n){return void 0!==n?(i=n)+((r=e)[r.length-1]-i)/r.length:t.mean(e);var r,i},a=function(a){var o,s,l,c=function(e){if(e){if(void 0!==o){var a=t.pairs([o].concat(H(e)));return s=i(a.map(n),s),l=i(a.map(r),l),A(100-100/(1+(isNaN(o)?NaN:l/s)))}o=e[0]}else void 0!==o&&(o=NaN)};return e.accumulator(c),e(a)};return p(a,e,"period","value"),a},e.indicatorStochasticOscillator=function(){var e=function(e,t){return e.close},n=function(e,t){return e.high},r=function(e,t){return e.low},i=E().period(5).defined((function(t){return null!=e(t)&&null!=n(t)&&null!=r(t)})).accumulator((function(i){var a=i&&t.max(i,n),o=i&&t.min(i,r);return A(i&&100*(e(i[i.length-1])-o)/(a-o))})),a=Y().period(3),o=function(e){var t=i(e),n=a(t);return t.map((function(e,t){return{k:e,d:n[t]}}))};return o.closeValue=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],o):e},o.highValue=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},o.lowValue=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],o):r},g(o,i,x({period:"kPeriod"})),g(o,a,x({period:"dPeriod"})),o},e.isTransition=be,e.largestTriangleOneBucket=function(){var e=ue(),n=function(e){return e},r=function(e){return e},i=function(i){if(e.bucketSize()>=i.length)return i;var a=function(e){var i=e.map((function(e){return[n(e),r(e)]}));return t.range(1,i.length-1).map((function(e){var t=i[e-1],n=i[e],r=i[e+1];return.5*Math.abs((t[0]-r[0])*(n[1]-t[1])-(t[0]-n[0])*(r[1]-t[1]))}))}(i),o=e(a),s=e(i.slice(1,i.length-1)).map((function(e,n){var r=o[n],i=t.max(r);return e[r.indexOf(i)]}));return[].concat([i[0]],s,[i[i.length-1]])};return p(i,e,"bucketSize"),i.x=function(e){return arguments.length?(n=e,i):n},i.y=function(e){return arguments.length?(r=e,i):r},i},e.largestTriangleThreeBucket=function(){var e=function(e){return e},n=function(e){return e},r=ue(),i=function(i){if(r.bucketSize()>=i.length)return i;var a=r(i.slice(1,i.length-1)),o=i[0],s=i[i.length-1],l=[].concat([o],a,[s]),c=e(o),u=n(o),d=a.map((function(r,i){var a=t.mean(l[i+1],e),o=t.mean(l[i+1],n),s=r.map((function(t){return[e(t),n(t)]})),d=s.map((function(e){return.5*Math.abs((c-a)*(e[1]-u)-(c-e[0])*(o-u))})),h=d.indexOf(t.max(d)),f=s[h];return c=f[0],u=f[1],r[h]}));return[].concat([i[0]],d,[i[i.length-1]])};return p(i,r,"bucketSize"),i.x=function(t){return arguments.length?(e=t,i):e},i.y=function(e){return arguments.length?(n=e,i):n},i},e.layoutAnnealing=function(){var e,t=1e3,n=1,r=function(t,n,r){return we(r,n)+function(t){return e?t.width*t.height-_e(t,e):0}(t)+function(e){switch(e.location){case"bottom-right":return 0;case"middle-right":case"bottom-center":return e.width*e.height/8}return e.width*e.height/4}(t)},i=function(e){for(var i=t,a=Ce().locationScore(r).winningScore((function(e,t){return Math.exp((t-e)/i)>Math.random()})).rectangles(e);i>0;){var o=Te(e);a=a((s=Se(e[o]))[Te(s)],o),i-=n}var s;return a.rectangles()};return i.temperature=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],i):t},i.cooling=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],i):n},i.bounds=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],i):e},i},e.layoutBoundingBox=function(){var e=[0,0],t=function(t){return t.map((function(t,n){var r=t.x,i=t.y;return r+t.width>e[0]&&(r-=t.width),i+t.height>e[1]&&(i-=t.height),{height:t.height,width:t.width,x:r,y:i}}))};return t.bounds=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],t):e},t},e.layoutGreedy=function(){var e,t=function(t,n,r){return we(r,n)+function(t){return e?t.width*t.height-_e(t,e):0}(t)},n=function(e){var n=Ce().locationScore(t).rectangles(e);return e.forEach((function(e,t){Se(e).forEach((function(e,r){n=n(e,t)}))})),n.rectangles()};return n.bounds=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],n):e},n},e.layoutLabel=function(e){var t=function(){},r=function(){return[0,0]},i=function(e,t){return[e.x,e.y]},a=e||function(e){return e},o=function(){},l=n.scaleIdentity(),c=n.scaleIdentity(),u=xe("g","label"),d=function(e){e.each((function(e,n,d){var h=u(s.select(d[n]),e).call(o),f=h.nodes(),p=f.map((function(e,t){var n=s.select(e).datum(),a=i(n,t,f),o=[l(a[0]),c(a[1])],u=r(n,t,f);return{hidden:!1,x:o[0],y:o[1],width:u[0],height:u[1]}})),m=a(p);h.attr("style",(function(e,t){return"display:"+(m[t].hidden?"none":"inherit")})).attr("transform",(function(e,t){return"translate("+m[t].x+", "+m[t].y+")"})).attr("layout-width",(function(e,t){return m[t].width})).attr("layout-height",(function(e,t){return m[t].height})).attr("anchor-x",(function(e,t,n){return p[t].x-m[t].x})).attr("anchor-y",(function(e,t,n){return p[t].y-m[t].y})),h.call(o),t(h,e,n)}))};return g(d,u,b("key")),g(d,a),d.size=function(){return arguments.length?(r=ve(arguments.length<=0?void 0:arguments[0]),d):r},d.position=function(){return arguments.length?(i=ve(arguments.length<=0?void 0:arguments[0]),d):i},d.component=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],d):o},d.decorate=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],d):t},d.xScale=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],d):l},d.yScale=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],d):c},d},e.layoutRemoveOverlaps=function(e){var n=function(n){n=e(n);for(var r=function(){var e,r,i=n.filter((function(e){return!e.hidden})),a=i.map((function(e,t){return[e,we(i,t)]})),o=(r=function(e,t){return t[1]-e[1]},(e=a)[t.scan(e,r)]);if(!(o[1]>0))return"break";o[0].hidden=!0};"break"!==r(););return n};return g(n,e=e||function(e){return e}),n},e.layoutTextLabel=function(e){var t=2,n=function(e){return e},r=xe("text"),i=xe("rect"),a=xe("circle"),o=function(e){e.each((function(e,o,l){var c=l[o],u=s.select(c),d=Number(c.getAttribute("layout-width")),h=Number(c.getAttribute("layout-height"));i(u,[e]).attr("width",d).attr("height",h);var f=Number(c.getAttribute("anchor-x")),p=Number(c.getAttribute("anchor-y"));a(u,[e]).attr("r",2).attr("cx",f).attr("cy",p);var m=r(u,[e]);m.enter().attr("dy","0.9em").attr("transform","translate(".concat(t,", ").concat(t,")")),m.text(n)}))};return o.padding=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],o):t},o.value=function(){return arguments.length?(n=ve(arguments.length<=0?void 0:arguments[0]),o):n},o},e.modeMedian=function(){var e=ue(),n=function(e){return e},r=function(r){if(e.bucketSize()>r.length)return r;var i=t.extent(r,n),a=e(r.slice(1,r.length-1)).map((function(e,t){var r,a,o={},s=!0,l=e.map(n),c=l.filter((function(e){return e===i[0]||e===i[1]})).map((function(e){return l.indexOf(e)}))[0];return void 0!==c?e[c]:(l.forEach((function(e,t){void 0===o[e]&&(o[e]=0),o[e]++,o[e]>o[r]||void 0===r?(r=e,a=t,s=!0):o[e]===o[r]&&(s=!1)})),s?e[a]:e[Math.floor(e.length/2)])}));return[].concat([r[0]],a,[r[r.length-1]])};return p(r,e,"bucketSize"),r.value=function(e){return arguments.length?(n=e,r):n},r},e.pointer=function(){var e=u.dispatch("point");function t(t){var n=s.pointer(t);e.call("point",this,[{x:n[0],y:n[1]}])}function n(){e.call("point",this,[])}var r=function(e){e.on("mouseenter.pointer",t).on("mousemove.pointer",t).on("mouseleave.pointer",n)};return p(r,e,"on"),r},e.prefix=_,e.randomFinancial=function(){var e=new Date,t=100,n=r.timeDay,a=1,o=r.timeYear,s=1,l=null,c=function(){var e=i.randomNormal(1,.1);return Math.ceil(1e3*e())},u=le(),d=function(e,t){var r,i,l=(r=e,i=o.offset(r,s)-r,(n.offset(r,a)-r)/i),d=u.period(l)(t),h={date:e,open:d[0],high:Math.max.apply(Math,d),low:Math.min.apply(Math,d),close:d[u.steps()]};return h.volume=c(h),h},h=function(r){var i,o,s;do{i=r?n.offset(r.date,a):new Date(e.getTime()),o=r?r.close:t,r=d(i,o),s=l&&!l(r)}while(s);return r},f=function(){var e,t={next:function(){var t=h(e);return e=t,t},take:function(e){return t.until((function(t,n){return!e||e<0||n===e}))},until:function(t){for(var n=[],r=0,i=h(e),a=t&&!t(i,r);a;)n.push(i),i=h(e=i),r+=1,a=t&&!t(i,r);return n}};return t},p=function(e){return f().take(e)};if(p.stream=f,"function"!=typeof Symbol||"symbol"!==T(Symbol.iterator))throw new Error("d3fc-random-data depends on Symbol. Make sure that you load a polyfill in older browsers. See README.");return p[Symbol.iterator]=function(){var e=f();return{next:function(){return{value:e.next(),done:!1}}}},p.startDate=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],p):e},p.startPrice=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],p):t},p.interval=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],p):n},p.intervalStep=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],p):a},p.unitInterval=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],p):o},p.unitIntervalStep=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],p):s},p.filter=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],p):l},p.volume=function(){return arguments.length?(c=ce(arguments.length<=0?void 0:arguments[0]),p):c},g(p,u),p},e.randomGeometricBrownianMotion=le,e.randomSkipWeekends=function(e){var t=e.date.getDay();return!(0===t||6===t)},e.rebind=p,e.rebindAll=g,e.scaleDiscontinuous=function e(t){var r=this;arguments.length||(t=n.scaleIdentity());var i=Z(),a=function(e){var n=t.domain(),r=t.range(),a=i.distance(n[0],n[1]);return i.distance(n[0],e)/a*(r[1]-r[0])+r[0]};return a.invert=function(e){var n=t.domain(),r=t.range(),a=(e-r[0])/(r[1]-r[0])*i.distance(n[0],n[1]);return i.offset(n[0],a)},a.domain=function(){if(!arguments.length)return t.domain();var e=arguments.length<=0?void 0:arguments[0],n=i.clampUp(e[0]),r=i.clampDown(e[1]);return t.domain([n,r]),a},a.nice=function(){t.nice();var e=t.domain(),n=i.clampUp(e[0]),r=i.clampDown(e[1]);return t.domain([n,r]),a},a.ticks=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return J(t.ticks.apply(r,n),i)},a.copy=function(){return e(t.copy()).discontinuityProvider(i.copy())},a.discontinuityProvider=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],a):i},g(a,t,b("range","rangeRound","interpolate","clamp","tickFormat")),a},e.seriesCanvasArea=function(){var e=Ie(),t=l.area(),n=function(n){var r=t.context();t.defined(e.defined());var i=n.map(e.values);t.x((function(e,t){return i[t].transposedX})).y((function(e,t){return i[t].transposedY}));var a="vertical"===e.orient()?"y":"x";t[a+"0"]((function(e,t){return i[t].y0})),t[a+"1"]((function(e,t){return i[t].y})),r.beginPath(),r.fillStyle=Ne,r.strokeStyle="transparent",e.decorate()(r,n),t(n),r.fill(),r.stroke(),r.closePath()};return g(n,e,y("bandwidth","align")),p(n,t,"curve","context"),n},e.seriesCanvasBar=function(){var e=Ie(),t=fe().x(0).y(0),n=function(n){var r=t.context(),i=n.filter(e.defined()).map(e.values);"vertical"===e.orient()?(t.verticalAlign("top"),t.horizontalAlign("center")):(t.horizontalAlign("right"),t.verticalAlign("center")),i.forEach((function(n,i){var a;r.save(),r.beginPath(),r.translate(n.origin[0],n.origin[1]),r.fillStyle=Oe,r.strokeStyle="transparent",e.decorate()(r,n.d,i),(a=t,"vertical"===e.orient()?a.height:a.width)(-n.height),function(t){return"vertical"===e.orient()?t.width:t.height}(t)(n.width),t([n]),r.fill(),r.stroke(),r.closePath(),r.restore()}))};return g(n,e),p(n,t,"context"),n},e.seriesCanvasBoxPlot=function(){var e=Zn(),t=me().value(0),n=function(n){var r=n.filter(e.defined()),i=t.context();t.orient(e.orient()),r.forEach((function(n,r){i.save();var a=e.values(n,r);i.translate(a.origin[0],a.origin[1]),i.beginPath(),i.fillStyle=Ne,i.strokeStyle=Fe,e.decorate()(i,n,r),t.median(a.median).upperQuartile(a.upperQuartile).lowerQuartile(a.lowerQuartile).high(a.high).width(a.width).low(a.low)([n]),i.fill(),i.stroke(),i.closePath(),i.restore()}))};return g(n,e),p(n,t,"cap","context"),n},e.seriesCanvasCandlestick=function(){return qn(pe())},e.seriesCanvasErrorBar=function(){var e=jn(),t=ge().value(0),n=function(n){var r=n.filter(e.defined()),i=t.context();t.orient(e.orient()),r.forEach((function(n,r){i.save();var a=e.values(n,r);i.translate(a.origin[0],a.origin[1]),i.beginPath(),i.strokeStyle=Fe,i.fillStyle=Ne,e.decorate()(i,n,r),t.high(a.high).width(a.width).low(a.low)([n]),i.fill(),i.stroke(),i.closePath(),i.restore()}))};return g(n,e),p(n,t,"context"),n},e.seriesCanvasGrouped=function(e){var t=er(),n=function(n){n.forEach((function(r,i){var a="horizontal"!==e.orient(),o=function(e,r){var o=t.offsetScaleForDatum(n,e,r);return(a?t.xScale():t.yScale())(e)+o(i)+o.bandwidth()/2};a?(e.xScale(o),e.yScale(t.yScale())):(e.yScale(o),e.xScale(t.xScale())),e.bandwidth&&e.bandwidth((function(e,r){return t.offsetScaleForDatum(n,e,r).bandwidth()})),e.decorate((function(e,n){return t.decorate()(e,n,i)})),e(r)}))};return g(n,e,y("decorate","xScale","yScale")),g(n,t,y("offsetScaleForDatum")),n},e.seriesCanvasHeatmap=function(){var e=tr(),t=function(t){var n=t.filter(e.defined()),r=e.colorInterpolate(),i=e.colorScale(n),a=e.pathGenerator.context();n.forEach((function(t,n){a.save(),a.beginPath();var o=e.values(t,n);a.translate(o.x,o.y),a.fillStyle=r(i(o.colorValue)),a.strokeStyle="transparent",e.decorate()(a,t,n),e.pathGenerator.height(o.height).width(o.width)([t]),a.fill(),a.stroke(),a.closePath(),a.restore()}))};return p(t,e.pathGenerator,"context"),g(t,e),t},e.seriesCanvasLine=Ue,e.seriesCanvasMulti=Kn,e.seriesCanvasOhlc=function(){return qn(he())},e.seriesCanvasPoint=Vn,e.seriesCanvasRepeat=function(){var e="vertical",t=Ue(),n=Kn(),r=function(r){"vertical"===e?n.series(r[0].map((function(e){return t}))).mapping((function(e,t){return e.map((function(e){return e[t]}))})):n.series(r.map((function(e){return t}))).mapping((function(e,t){return e[t]})),n(r)};return r.series=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],r):t},r.orient=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],r):e},g(r,n,y("series","mapping")),r},e.seriesSvgArea=function(){var e=Ie(),t=l.area(),n=xe("path","area"),r=function(r){be(r)&&n.transition(r),t.defined(e.defined()),r.each((function(r,i,a){var o=r.map(e.values);t.x((function(e,t){return o[t].transposedX})).y((function(e,t){return o[t].transposedY}));var l="vertical"===e.orient()?"y":"x";t[l+"0"]((function(e,t){return o[t].y0})),t[l+"1"]((function(e,t){return o[t].y}));var c=n(s.select(a[i]),[r]);c.enter().attr("fill",Ne),c.attr("d",t),e.decorate()(c,r,i)}))};return g(r,e,y("bandwidth","align")),p(r,n,"key"),p(r,t,"curve"),r},e.seriesSvgBar=function(){var e=fe().x(0).y(0),t=Ie(),n=xe("g","bar"),r=function(e){return"vertical"===t.orient()?e.width:e.height},i=function(e){return"translate("+e[0]+", "+e[1]+")"},a=function(a){be(a)&&n.transition(a),a.each((function(a,o,l){var c=t.orient();if("vertical"!==c&&"horizontal"!==c)throw new Error("The bar series does not support an orientation of "+c);var u=a.filter(t.defined()),d=u.map(t.values);e.width(0).height(0),"vertical"===t.orient()?(e.verticalAlign("top"),e.horizontalAlign("center")):(e.horizontalAlign("right"),e.verticalAlign("center"));var h=n(s.select(l[o]),u);h.enter().attr("transform",(function(e,t){return i(d[t].baseOrigin)})).attr("class","bar "+t.orient()).attr("fill",Oe).append("path").attr("d",(function(t,n){return r(e)(d[n].width),e([t])})),h.attr("transform",(function(e,t){return i(d[t].origin)})).select("path").attr("d",(function(n,i){return r(e)(d[i].width),(a=e,"vertical"===t.orient()?a.height:a.width)(-d[i].height),e([n]);var a})),t.decorate()(h,u,o)}))};return g(a,t),p(a,n,"key"),a},e.seriesSvgBoxPlot=function(){var e=Zn(),t=xe("g","box-plot"),n=me().value(0),r=function(e){return"translate("+e.origin[0]+", "+e.origin[1]+")"},i=function(i){be(i)&&t.transition(i);var a,o=(a=i,function(e){return be(a)?e.transition(a):e});i.each((function(i,a,l){var c=i.filter(e.defined()),u=t(s.select(l[a]),c);u.enter().attr("stroke",Fe).attr("fill",Ne).attr("transform",(function(t,n){return r(e.values(t,n))+" scale(1e-6, 1)"})).append("path"),n.orient(e.orient()),u.each((function(t,i,a){var l=e.values(t,i);n.median(l.median).upperQuartile(l.upperQuartile).lowerQuartile(l.lowerQuartile).width(l.width).high(l.high).low(l.low),o(s.select(a[i])).attr("transform",r(l)).select("path").attr("d",n([t]))})),e.decorate()(u,i,a)}))};return g(i,e),p(i,t,"key"),p(i,n,"cap"),i},e.seriesSvgCandlestick=function(){return Xn(pe(),"candlestick")},e.seriesSvgErrorBar=function(){var e=jn(),t=xe("g","error-bar"),n=ge().value(0),r=function(e){return"translate("+e.origin[0]+", "+e.origin[1]+")"},i=function(i){be(i)&&t.transition(i);var a,o=(a=i,function(e){return be(a)?e.transition(a):e});i.each((function(i,a,l){var c=i.filter(e.defined()),u=c.map(e.values),d=t(s.select(l[a]),c);d.enter().attr("stroke",Fe).attr("fill",Ne).attr("transform",(function(t,n){return r(e.values(t,n))+" scale(1e-6, 1)"})).append("path"),n.orient(e.orient()),d.each((function(e,t,i){var a=u[t];n.high(a.high).low(a.low).width(a.width),o(s.select(i[t])).attr("transform",r(a)+" scale(1)").select("path").attr("d",n([e]))})),e.decorate()(d,i,a)}))};return g(i,e),p(i,t,"key"),i},e.seriesSvgGrouped=function(e){var t=er(),n=xe("g","grouped"),r=function(r){be(r)&&n.transition(r),r.each((function(r,i,a){var o=n(s.select(a[i]),r);o.enter().append("g"),o.select("g").each((function(n,i,a){var o=s.select(a[i]),l="horizontal"!==e.orient(),c=function(e,n){var a=t.offsetScaleForDatum(r,e,n);return(l?t.xScale():t.yScale())(e)+a(i)+a.bandwidth()/2};l?(e.xScale(c),e.yScale(t.yScale())):(e.yScale(c),e.xScale(t.xScale())),e.bandwidth&&e.bandwidth((function(e,n){return t.offsetScaleForDatum(r,e,n).bandwidth()})),e.decorate((function(e,n){return t.decorate()(e,n,i)})),o.call(e)}))}))};return g(r,e,y("decorate","xScale","yScale")),g(r,t,y("offsetScaleForDatum")),r},e.seriesSvgHeatmap=function(){var e=tr(),t=xe("g","box"),n=function(n){n.each((function(n,r,i){var a=n.filter(e.defined()),o=e.colorValue(),l=e.colorInterpolate(),c=e.colorScale(a),u=t(s.select(i[r]),a);u.enter().append("path").attr("stroke","transparent"),u.attr("transform",(function(t,n){return"translate("+(r=e.values(t,n)).x+", "+r.y+")";var r})).select("path").attr("d",(function(t,n){return e.pathGenerator.width(e.values(t,n).width).height(e.values(t,n).height)([t])})).attr("fill",(function(e,t){return l(c(o(e,t)))})),e.decorate()(u,n,r)}))};return g(n,e),n},e.seriesSvgLine=ze,e.seriesSvgMulti=$n,e.seriesSvgOhlc=function(){return Xn(he(),"ohlc")},e.seriesSvgPoint=Gn,e.seriesSvgRepeat=function(){var e="vertical",t=ze(),n=$n(),r=function(r){return r.each((function(r,i,a){"vertical"===e?n.series(r[0].map((function(e){return t}))).mapping((function(e,t){return e.map((function(e){return e[t]}))})):n.series(r.map((function(e){return t}))).mapping((function(e,t){return e[t]})),s.select(a[i]).call(n)}))};return r.series=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],r):t},r.orient=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],r):e},g(r,n,y("series","mapping")),r},e.seriesWebglArea=function(){var e=Ie(),t=Cn(0,1),n=t.offset(1),r=Cn(0,1),i=r.offset(1),a=Cn(0,1),o=a.offset(1),s=Cn(0,1).type(rn.UNSIGNED_BYTE),l=s.offset(1),c=dn().crossValueAttribute(t).crossNextValueAttribute(n).mainValueAttribute(r).mainNextValueAttribute(i).baseValueAttribute(a).baseNextValueAttribute(o).definedAttribute(s).definedNextAttribute(l),u=function(e,t){return!1},d=On,h=[],f=null,m=null,v=function(n){if("vertical"!==e.orient())throw new Error("Unsupported orientation ".concat(e.orient()));var i=d(e.xScale()),o=d(e.yScale()),l=!u(h,n);l&&(h=n,s.value((function(t,n){return e.defined()(t,n)})).data(n)),(l||i.scale!==f)&&(f=i.scale,t.value((function(t,n){return i.scale(e.crossValue()(t,n))})).data(n)),(l||o.scale!==m)&&(m=o.scale,a.value((function(t,n){return o.scale(e.baseValue()(t,n))})).data(n),r.value((function(t,n){return o.scale(e.mainValue()(t,n))})).data(n)),c.xScale(i.webglScale).yScale(o.webglScale).decorate((function(t){return e.decorate()(t,n,0)})),c(n.length)};return v.equals=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],v):u},v.scaleMapper=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],v):d},g(v,e,y("bandwidth","align")),p(v,c,"context","pixelRatio"),v},e.seriesWebglBar=function(){var e=Ie(),t=cn(),n=cn(),r=cn(),i=cn().type(rn.UNSIGNED_SHORT),a=cn().type(rn.UNSIGNED_BYTE),o=xn().crossValueAttribute(t).mainValueAttribute(n).baseValueAttribute(r).bandwidthAttribute(i).definedAttribute(a),s=function(e,t){return!1},l=On,c=[],u=null,d=null,h=function(h){if("vertical"!==e.orient())throw new Error("Unsupported orientation ".concat(e.orient()));var f=l(e.xScale()),p=l(e.yScale()),m=!s(c,h);m&&(c=h,i.value((function(t,n){return e.bandwidth()(t,n)})).data(h),a.value((function(t,n){return e.defined()(t,n)})).data(h)),(m||f.scale!==u)&&(u=f.scale,t.value((function(t,n){return f.scale(e.crossValue()(t,n))})).data(h)),(m||p.scale!==d)&&(d=p.scale,r.value((function(t,n){return p.scale(e.baseValue()(t,n))})).data(h),n.value((function(t,n){return p.scale(e.mainValue()(t,n))})).data(h)),o.xScale(f.webglScale).yScale(p.webglScale).decorate((function(t){return e.decorate()(t,h,0)})),o(h.length)};return h.equals=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],h):s},h.scaleMapper=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],h):l},g(h,e,y("align")),p(h,o,"context","pixelRatio"),h},e.seriesWebglBoxPlot=function(){var e=Zn(),t=cn(),n=cn(),r=cn(),i=cn(),a=cn(),o=cn(),s=cn().type(rn.UNSIGNED_SHORT),l=cn().type(rn.UNSIGNED_SHORT),c=cn().type(rn.UNSIGNED_BYTE),u=En().crossValueAttribute(t).highValueAttribute(n).upperQuartileValueAttribute(r).medianValueAttribute(i).lowerQuartileValueAttribute(a).lowValueAttribute(o).bandwidthAttribute(s).capAttribute(l).definedAttribute(c),d=function(e,t){return!1},h=On,f=[],m=null,v=null,b=Re(20),x=function(p){if("vertical"!==e.orient())throw new Error("Unsupported orientation ".concat(e.orient()));var g=h(e.xScale()),y=h(e.yScale()),x=!d(f,p);x&&(f=p,s.value((function(t,n){return e.bandwidth()(t,n)})).data(p),l.value((function(e,t){return b(e,t)})).data(p),c.value((function(t,n){return e.defined()(t,n)})).data(p)),(x||g.scale!==m)&&(m=g.scale,t.value((function(t,n){return g.scale(e.crossValue()(t,n))})).data(p)),(x||y.scale!==v)&&(v=y.scale,n.value((function(t,n){return y.scale(e.highValue()(t,n))})).data(p),r.value((function(t,n){return y.scale(e.upperQuartileValue()(t,n))})).data(p),i.value((function(t,n){return y.scale(e.medianValue()(t,n))})).data(p),a.value((function(t,n){return y.scale(e.lowerQuartileValue()(t,n))})).data(p),o.value((function(t,n){return y.scale(e.lowValue()(t,n))})).data(p)),u.xScale(g.webglScale).yScale(y.webglScale).decorate((function(t){return e.decorate()(t,p,0)})),u(p.length)};return x.cap=function(){return arguments.length?(b=Re(arguments.length<=0?void 0:arguments[0]),x):b},x.equals=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],x):d},x.scaleMapper=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],x):h},g(x,e,y("align")),p(x,u,"context","lineWidth","pixelRatio"),x},e.seriesWebglCandlestick=function(){return Yn(Sn())},e.seriesWebglErrorBar=function(){var e=jn(),t=cn(),n=cn(),r=cn(),i=cn().type(rn.UNSIGNED_SHORT),a=cn().type(rn.UNSIGNED_BYTE),o=wn().crossValueAttribute(t).highValueAttribute(n).lowValueAttribute(r).bandwidthAttribute(i).definedAttribute(a),s=function(e,t){return!1},l=On,c=[],u=null,d=null,h=function(h){if("vertical"!==e.orient())throw new Error("Unsupported orientation ".concat(e.orient()));var f=l(e.xScale()),p=l(e.yScale()),m=!s(c,h);m&&(c=h,i.value((function(t,n){return e.bandwidth()(t,n)})).data(h),a.value((function(t,n){return e.defined()(t,n)})).data(h)),(m||f.scale!==u)&&(u=f.scale,t.value((function(t,n){return f.scale(e.crossValue()(t,n))})).data(h)),(m||p.scale!==d)&&(d=p.scale,n.value((function(t,n){return p.scale(e.highValue()(t,n))})).data(h),r.value((function(t,n){return p.scale(e.lowValue()(t,n))})).data(h)),o.xScale(f.webglScale).yScale(p.webglScale).decorate((function(t){return e.decorate()(t,h,0)})),o(h.length)};return h.equals=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],h):s},h.scaleMapper=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],h):l},g(h,e,y("align")),p(h,o,"context","lineWidth","pixelRatio"),h},e.seriesWebglLine=Hn,e.seriesWebglMulti=Qn,e.seriesWebglOhlc=function(){return Yn(yn())},e.seriesWebglPoint=function(){var e=Ie(),t=Re(64),n=l.symbolCircle,r=cn(),i=cn(),a=cn().type(rn.UNSIGNED_SHORT),o=cn().type(rn.UNSIGNED_BYTE),s=fn().crossValueAttribute(r).mainValueAttribute(i).sizeAttribute(a).definedAttribute(o),c=function(e,t){return!1},u=On,d=[],h=null,f=null,m=function(l){var p=u(e.xScale()),m=u(e.yScale()),g=!c(d,l);g&&(d=l,a.value((function(e,n){return t(e,n)})).data(l),o.value((function(t,n){return e.defined()(t,n)})).data(l)),(g||p.scale!==h)&&(h=p.scale,"vertical"===e.orient()?r.value((function(t,n){return p.scale(e.crossValue()(t,n))})).data(l):r.value((function(t,n){return p.scale(e.mainValue()(t,n))})).data(l)),(g||m.scale!==f)&&(f=m.scale,"vertical"===e.orient()?i.value((function(t,n){return m.scale(e.mainValue()(t,n))})).data(l):i.value((function(t,n){return m.scale(e.crossValue()(t,n))})).data(l)),s.xScale(p.webglScale).yScale(m.webglScale).type(zn(n)).decorate((function(t){return e.decorate()(t,l,0)})),s(l.length)};return m.size=function(){return arguments.length?(t=Re(arguments.length<=0?void 0:arguments[0]),m):t},m.type=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],m):n},m.equals=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],m):c},m.scaleMapper=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],m):u},g(m,e,y("baseValue","bandwidth","align")),p(m,s,"context","pixelRatio"),m},e.seriesWebglRepeat=function(){var e="vertical",t=function(){return Hn()},n=Qn(),r=[],i=function(i){if("vertical"===e){var a=r;r=i[0].map((function(e,n){return n<a.length?a[n]:t()})),n.series(r).mapping((function(e,t){return e.map((function(e){return e[t]}))}))}else{var o=r;r=i.map((function(e,n){return n<o.length?o[n]:t()})),n.series(r).mapping((function(e,t){return e[t]}))}n(i)};return i.series=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return n.length?(t="function"==typeof n[0].xScale&&"function"==typeof n[0].yScale?function(){return n[0]}:n[0],r=[],i):t},i.orient=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],r=[],i):e},g(i,n,y("series","mapping")),i},e.shapeBar=fe,e.shapeBoxPlot=me,e.shapeCandlestick=pe,e.shapeErrorBar=ge,e.shapeOhlc=he,e.webglAdjacentAttribute=Cn,e.webglAttribute=cn,e.webglBaseAttribute=sn,e.webglBufferBuilder=Ge,e.webglElementIndices=mn,e.webglFillColor=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,1],t=cn().size(4),n=e,r=!0,i=function(e){if(e.vertexShader().appendHeaderIfNotExists(Je).appendBodyIfNotExists($e),e.fragmentShader().appendHeaderIfNotExists(Kt).appendBodyIfNotExists(Qt),Array.isArray(n))e.buffers().attribute("aFillColor",Un(n).size(4));else{if("function"!=typeof n)throw new Error("Expected value to be an array or function, received ".concat(n));if(!r)return;t.value(n),e.buffers().attribute("aFillColor",t)}r=!1};return i.value=function(){return arguments.length?(n!==(arguments.length<=0?void 0:arguments[0])&&(n=arguments.length<=0?void 0:arguments[0],r=!0),i):n},p(i,t,"data"),i},e.webglProgramBuilder=Xe,e.webglScaleLinear=Tn,e.webglScaleLog=Rn,e.webglScaleMapper=On,e.webglScalePow=Pn,e.webglSeriesArea=dn,e.webglSeriesBar=xn,e.webglSeriesBoxPlot=En,e.webglSeriesCandlestick=Sn,e.webglSeriesErrorBar=wn,e.webglSeriesLine=gn,e.webglSeriesOhlc=yn,e.webglSeriesPoint=fn,e.webglShaderBuilder=qe,e.webglStrokeColor=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,1],t=cn().size(4),n=e,r=!0,i=function(e){if(e.vertexShader().appendHeaderIfNotExists(Ke).appendBodyIfNotExists(Qe),e.fragmentShader().appendHeaderIfNotExists(en).appendBodyIfNotExists(tn),Array.isArray(n))e.buffers().attribute("aStrokeColor",Un(n).size(4));else{if("function"!=typeof n)throw new Error("Expected value to be an array or function, received ".concat(n));if(!r)return;t.value(n),e.buffers().attribute("aStrokeColor",t)}r=!1};return i.value=function(){return arguments.length?(n!==(arguments.length<=0?void 0:arguments[0])&&(n=arguments.length<=0?void 0:arguments[0],r=!0),i):n},p(i,t,"data"),i},e.webglSymbolMapper=zn,e.webglTypes=rn,e.webglUniform=Ve,e.zoom=function(){var e=u.dispatch("zoom"),t=h.zoom().on("zoom",(function(n){var r,i,a=n.transform,o=this,l=a,c=o[ni],u=c.originalXScale,d=c.previousXScale,f=c.xScale,p=c.originalYScale,m=c.previousYScale,g=c.yScale,v=c.previousTransform;ti(d,f)&&ti(m,g)||(u=null==f?void 0:f.copy(),p=null==g?void 0:g.copy(),r=a,i=v,l=h.zoomIdentity.scale(r.k/i.k).translate(r.x-i.x,r.y-i.y)),null!=f&&(d=l.rescaleX(u.range(f.range())),f.domain(d.domain())),null!=g&&(m=l.rescaleY(p.range(g.range())),g.domain(m.domain())),v=l,o[ni]={originalXScale:u,previousXScale:d,xScale:f,originalYScale:p,previousYScale:m,yScale:g,previousTransform:v},l!==a&&t.transform(s.select(o),l),e.call("zoom")})),n=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null==n&&null==r&&console.warn("Without an xScale and/or yScale specified, this component won't do anything. Perhaps you forgot to specify them e.g. selection.call(zoom, x, y)?"),e.each((function(e,t,i){var a=i[t][ni];null!=a&&a.xScale===n&&a.yScale===r&&console.warn("This component should only be called on a selection once. Perhaps you're missing an .enter()?");var o=null==n?void 0:n.copy(),s=null==r?void 0:r.copy();i[t][ni]={originalXScale:o,previousXScale:o,xScale:n,originalYScale:s,previousYScale:s,yScale:r,previousTransform:h.zoomIdentity}})).call(t)};return p(n,e,"on"),p(n,t,"extent","filter","wheelDelta","touchable","clickDistance","tapDistance","duration","interpolate"),n},Object.defineProperty(e,"__esModule",{value:!0})}(t,n(4204),n(3891),n(2796),n(1832),n(9693),n(208),n(3905),n(4537),n(9244),n(8258),n(6111),n(1501))},296:e=>{function t(e,t,n){var r,i,a,o,s;function l(){var c=Date.now()-o;c<t&&c>=0?r=setTimeout(l,t-c):(r=null,n||(s=e.apply(a,i),a=i=null))}null==t&&(t=100);var c=function(){a=this,i=arguments,o=Date.now();var c=n&&!r;return r||(r=setTimeout(l,t)),c&&(s=e.apply(a,i),a=i=null),s};return c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(s=e.apply(a,i),a=i=null,clearTimeout(r),r=null)},c}t.debounce=t,e.exports=t},667:e=>{"use strict";var t=Array.isArray,n=Object.keys,r=Object.prototype.hasOwnProperty,i="undefined"!=typeof Element;function a(e,o){if(e===o)return!0;if(e&&o&&"object"==typeof e&&"object"==typeof o){var s,l,c,u=t(e),d=t(o);if(u&&d){if((l=e.length)!=o.length)return!1;for(s=l;0!=s--;)if(!a(e[s],o[s]))return!1;return!0}if(u!=d)return!1;var h=e instanceof Date,f=o instanceof Date;if(h!=f)return!1;if(h&&f)return e.getTime()==o.getTime();var p=e instanceof RegExp,m=o instanceof RegExp;if(p!=m)return!1;if(p&&m)return e.toString()==o.toString();var g=n(e);if((l=g.length)!==n(o).length)return!1;for(s=l;0!=s--;)if(!r.call(o,g[s]))return!1;if(i&&e instanceof Element&&o instanceof Element)return e===o;for(s=l;0!=s--;)if(!("_owner"===(c=g[s])&&e.$$typeof||a(e[c],o[c])))return!1;return!0}return e!=e&&o!=o}e.exports=function(e,t){try{return a(e,t)}catch(e){if(e.message&&e.message.match(/stack|recursion/i)||-2146828260===e.number)return console.warn("Warning: react-fast-compare does not handle circular references.",e.name,e.message),!1;throw e}}},8679:(e,t,n)=>{"use strict";var r=n(9864),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return r.isMemo(e)?o:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var o=u(n);d&&(o=o.concat(d(n)));for(var s=l(t),m=l(n),g=0;g<o.length;++g){var v=o[g];if(!(a[v]||r&&r[v]||m&&m[v]||s&&s[v])){var y=h(n,v);try{c(t,v,y)}catch(e){}}}}return t}},8419:(e,t,n)=>{"use strict";n.d(t,{H:()=>i,L:()=>r});class r extends Map{constructor(e,t=l){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[t,n]of e)this.set(t,n)}get(e){return super.get(a(this,e))}has(e){return super.has(a(this,e))}set(e,t){return super.set(o(this,e),t)}delete(e){return super.delete(s(this,e))}}class i extends Set{constructor(e,t=l){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const t of e)this.add(t)}has(e){return super.has(a(this,e))}add(e){return super.add(o(this,e))}delete(e){return super.delete(s(this,e))}}function a({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function o({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function s({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(n),e.delete(r)),n}function l(e){return null!==e&&"object"==typeof e?e.valueOf():e}},8554:(e,t,n)=>{e=n.nmd(e);var r="__lodash_hash_undefined__",i=9007199254740991,a="[object Arguments]",o="[object Function]",s="[object Object]",l=/^\[object .+?Constructor\]$/,c=/^(?:0|[1-9]\d*)$/,u={};u["[object Float32Array]"]=u["[object Float64Array]"]=u["[object Int8Array]"]=u["[object Int16Array]"]=u["[object Int32Array]"]=u["[object Uint8Array]"]=u["[object Uint8ClampedArray]"]=u["[object Uint16Array]"]=u["[object Uint32Array]"]=!0,u[a]=u["[object Array]"]=u["[object ArrayBuffer]"]=u["[object Boolean]"]=u["[object DataView]"]=u["[object Date]"]=u["[object Error]"]=u[o]=u["[object Map]"]=u["[object Number]"]=u[s]=u["[object RegExp]"]=u["[object Set]"]=u["[object String]"]=u["[object WeakMap]"]=!1;var d="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,h="object"==typeof self&&self&&self.Object===Object&&self,f=d||h||Function("return this")(),p=t&&!t.nodeType&&t,m=p&&e&&!e.nodeType&&e,g=m&&m.exports===p,v=g&&d.process,y=function(){try{return m&&m.require&&m.require("util").types||v&&v.binding&&v.binding("util")}catch(e){}}(),b=y&&y.isTypedArray;function x(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var _,w,M,S=Array.prototype,A=Function.prototype,E=Object.prototype,C=f["__core-js_shared__"],T=A.toString,R=E.hasOwnProperty,P=(_=/[^.]+$/.exec(C&&C.keys&&C.keys.IE_PROTO||""))?"Symbol(src)_1."+_:"",L=E.toString,D=T.call(Object),I=RegExp("^"+T.call(R).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),k=g?f.Buffer:void 0,B=f.Symbol,F=f.Uint8Array,N=(k&&k.allocUnsafe,w=Object.getPrototypeOf,M=Object,function(e){return w(M(e))}),O=Object.create,z=E.propertyIsEnumerable,U=S.splice,H=B?B.toStringTag:void 0,G=function(){try{var e=le(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),V=k?k.isBuffer:void 0,j=Math.max,W=Date.now,X=le(f,"Map"),q=le(Object,"create"),Y=function(){function e(){}return function(t){if(!xe(t))return{};if(O)return O(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function Z(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function J(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function $(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function K(e){var t=this.__data__=new J(e);this.size=t.size}function Q(e,t,n){(void 0!==n&&!fe(e[t],n)||void 0===n&&!(t in e))&&ne(e,t,n)}function ee(e,t,n){var r=e[t];R.call(e,t)&&fe(r,n)&&(void 0!==n||t in e)||ne(e,t,n)}function te(e,t){for(var n=e.length;n--;)if(fe(e[n][0],t))return n;return-1}function ne(e,t,n){"__proto__"==t&&G?G(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}Z.prototype.clear=function(){this.__data__=q?q(null):{},this.size=0},Z.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Z.prototype.get=function(e){var t=this.__data__;if(q){var n=t[e];return n===r?void 0:n}return R.call(t,e)?t[e]:void 0},Z.prototype.has=function(e){var t=this.__data__;return q?void 0!==t[e]:R.call(t,e)},Z.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=q&&void 0===t?r:t,this},J.prototype.clear=function(){this.__data__=[],this.size=0},J.prototype.delete=function(e){var t=this.__data__,n=te(t,e);return!(n<0||(n==t.length-1?t.pop():U.call(t,n,1),--this.size,0))},J.prototype.get=function(e){var t=this.__data__,n=te(t,e);return n<0?void 0:t[n][1]},J.prototype.has=function(e){return te(this.__data__,e)>-1},J.prototype.set=function(e,t){var n=this.__data__,r=te(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},$.prototype.clear=function(){this.size=0,this.__data__={hash:new Z,map:new(X||J),string:new Z}},$.prototype.delete=function(e){var t=se(this,e).delete(e);return this.size-=t?1:0,t},$.prototype.get=function(e){return se(this,e).get(e)},$.prototype.has=function(e){return se(this,e).has(e)},$.prototype.set=function(e,t){var n=se(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},K.prototype.clear=function(){this.__data__=new J,this.size=0},K.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},K.prototype.get=function(e){return this.__data__.get(e)},K.prototype.has=function(e){return this.__data__.has(e)},K.prototype.set=function(e,t){var n=this.__data__;if(n instanceof J){var r=n.__data__;if(!X||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new $(r)}return n.set(e,t),this.size=n.size,this};function re(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":H&&H in Object(e)?function(e){var t=R.call(e,H),n=e[H];try{e[H]=void 0;var r=!0}catch(e){}var i=L.call(e);return r&&(t?e[H]=n:delete e[H]),i}(e):function(e){return L.call(e)}(e)}function ie(e){return _e(e)&&re(e)==a}function ae(e,t,n,r,i){e!==t&&function(e,t,n){for(var r=-1,i=Object(e),a=n(e),o=a.length;o--;){var s=a[++r];if(!1===t(i[s],s,i))break}}(t,(function(a,o){if(i||(i=new K),xe(a))!function(e,t,n,r,i,a,o){var l=de(e,n),c=de(t,n),u=o.get(c);if(u)Q(e,n,u);else{var d,h,f,p,m,g=a?a(l,c,n+"",e,t,o):void 0,v=void 0===g;if(v){var y=me(c),b=!y&&ve(c),x=!y&&!b&&we(c);g=c,y||b||x?me(l)?g=l:_e(m=l)&&ge(m)?g=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(l):b?(v=!1,g=function(e,t){return e.slice()}(c)):x?(v=!1,p=new(f=(d=c).buffer).constructor(f.byteLength),new F(p).set(new F(f)),h=p,g=new d.constructor(h,d.byteOffset,d.length)):g=[]:function(e){if(!_e(e)||re(e)!=s)return!1;var t=N(e);if(null===t)return!0;var n=R.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&T.call(n)==D}(c)||pe(c)?(g=l,pe(l)?g=function(e){return function(e,t,n,r){var i=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var s=t[a],l=void 0;void 0===l&&(l=e[s]),i?ne(n,s,l):ee(n,s,l)}return n}(e,Me(e))}(l):xe(l)&&!ye(l)||(g=function(e){return"function"!=typeof e.constructor||ue(e)?{}:Y(N(e))}(c))):v=!1}v&&(o.set(c,g),i(g,c,r,a,o),o.delete(c)),Q(e,n,g)}}(e,t,o,n,ae,r,i);else{var l=r?r(de(e,o),a,o+"",e,t,i):void 0;void 0===l&&(l=a),Q(e,o,l)}}),Me)}var oe=G?function(e,t){return G(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:Ee;function se(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function le(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!xe(e)||function(e){return!!P&&P in e}(e))&&(ye(e)?I:l).test(function(e){if(null!=e){try{return T.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(n)?n:void 0}function ce(e,t){var n=typeof e;return!!(t=null==t?i:t)&&("number"==n||"symbol"!=n&&c.test(e))&&e>-1&&e%1==0&&e<t}function ue(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||E)}function de(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var he=function(e){var t=0,n=0;return function(){var r=W(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(oe);function fe(e,t){return e===t||e!=e&&t!=t}var pe=ie(function(){return arguments}())?ie:function(e){return _e(e)&&R.call(e,"callee")&&!z.call(e,"callee")},me=Array.isArray;function ge(e){return null!=e&&be(e.length)&&!ye(e)}var ve=V||function(){return!1};function ye(e){if(!xe(e))return!1;var t=re(e);return t==o||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function be(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function xe(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function _e(e){return null!=e&&"object"==typeof e}var we=b?function(e){return function(t){return e(t)}}(b):function(e){return _e(e)&&be(e.length)&&!!u[re(e)]};function Me(e){return ge(e)?function(e,t){var n=me(e),r=!n&&pe(e),i=!n&&!r&&ve(e),a=!n&&!r&&!i&&we(e),o=n||r||i||a,s=o?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=s.length;for(var c in e)!t&&!R.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ce(c,l))||s.push(c);return s}(e,!0):function(e){if(!xe(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=ue(e),n=[];for(var r in e)("constructor"!=r||!t&&R.call(e,r))&&n.push(r);return n}(e)}var Se,Ae=(Se=function(e,t,n,r){ae(e,t,n,r)},function(e,t){return he(function(e,t,n){return t=j(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=j(r.length-t,0),o=Array(a);++i<a;)o[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(o),x(e,this,s)}}(e,t,Ee),e+"")}((function(e,t){var n=-1,r=t.length,i=r>1?t[r-1]:void 0,a=r>2?t[2]:void 0;for(i=Se.length>3&&"function"==typeof i?(r--,i):void 0,a&&function(e,t,n){if(!xe(n))return!1;var r=typeof t;return!!("number"==r?ge(n)&&ce(t,n.length):"string"==r&&t in n)&&fe(n[t],e)}(t[0],t[1],a)&&(i=r<3?void 0:i,r=1),e=Object(e);++n<r;){var o=t[n];o&&Se(e,o,n,i)}return e})));function Ee(e){return e}e.exports=Ae},8552:(e,t,n)=>{var r=n(852)(n(5639),"DataView");e.exports=r},1989:(e,t,n)=>{var r=n(1789),i=n(401),a=n(7667),o=n(1327),s=n(1866);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=o,l.prototype.set=s,e.exports=l},8407:(e,t,n)=>{var r=n(7040),i=n(4125),a=n(2117),o=n(7518),s=n(4705);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=o,l.prototype.set=s,e.exports=l},7071:(e,t,n)=>{var r=n(852)(n(5639),"Map");e.exports=r},3369:(e,t,n)=>{var r=n(4785),i=n(1285),a=n(6e3),o=n(9916),s=n(5265);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=o,l.prototype.set=s,e.exports=l},3818:(e,t,n)=>{var r=n(852)(n(5639),"Promise");e.exports=r},8525:(e,t,n)=>{var r=n(852)(n(5639),"Set");e.exports=r},8668:(e,t,n)=>{var r=n(3369),i=n(619),a=n(2385);function o(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}o.prototype.add=o.prototype.push=i,o.prototype.has=a,e.exports=o},6384:(e,t,n)=>{var r=n(8407),i=n(7465),a=n(3779),o=n(7599),s=n(4758),l=n(4309);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=i,c.prototype.delete=a,c.prototype.get=o,c.prototype.has=s,c.prototype.set=l,e.exports=c},2705:(e,t,n)=>{var r=n(5639).Symbol;e.exports=r},1149:(e,t,n)=>{var r=n(5639).Uint8Array;e.exports=r},577:(e,t,n)=>{var r=n(852)(n(5639),"WeakMap");e.exports=r},4963:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}},4636:(e,t,n)=>{var r=n(2545),i=n(5694),a=n(1469),o=n(4144),s=n(5776),l=n(6719),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=a(e),u=!n&&i(e),d=!n&&!u&&o(e),h=!n&&!u&&!d&&l(e),f=n||u||d||h,p=f?r(e.length,String):[],m=p.length;for(var g in e)!t&&!c.call(e,g)||f&&("length"==g||d&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,m))||p.push(g);return p}},9932:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},2488:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},2663:e=>{e.exports=function(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}},2908:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},4286:e=>{e.exports=function(e){return e.split("")}},9029:e=>{var t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(t)||[]}},8470:(e,t,n)=>{var r=n(7813);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},9465:(e,t,n)=>{var r=n(8777);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},8483:(e,t,n)=>{var r=n(5063)();e.exports=r},7816:(e,t,n)=>{var r=n(8483),i=n(3674);e.exports=function(e,t){return e&&r(e,t,i)}},7786:(e,t,n)=>{var r=n(1811),i=n(327);e.exports=function(e,t){for(var n=0,a=(t=r(t,e)).length;null!=e&&n<a;)e=e[i(t[n++])];return n&&n==a?e:void 0}},8866:(e,t,n)=>{var r=n(2488),i=n(1469);e.exports=function(e,t,n){var a=t(e);return i(e)?a:r(a,n(e))}},4239:(e,t,n)=>{var r=n(2705),i=n(9607),a=n(2333),o=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?i(e):a(e)}},8565:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e,n){return null!=e&&t.call(e,n)}},13:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},9454:(e,t,n)=>{var r=n(4239),i=n(7005);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},939:(e,t,n)=>{var r=n(2492),i=n(7005);e.exports=function e(t,n,a,o,s){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!=t&&n!=n:r(t,n,a,o,e,s))}},2492:(e,t,n)=>{var r=n(6384),i=n(7114),a=n(8351),o=n(6096),s=n(4160),l=n(1469),c=n(4144),u=n(6719),d="[object Arguments]",h="[object Array]",f="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,m,g,v){var y=l(e),b=l(t),x=y?h:s(e),_=b?h:s(t),w=(x=x==d?f:x)==f,M=(_=_==d?f:_)==f,S=x==_;if(S&&c(e)){if(!c(t))return!1;y=!0,w=!1}if(S&&!w)return v||(v=new r),y||u(e)?i(e,t,n,m,g,v):a(e,t,x,n,m,g,v);if(!(1&n)){var A=w&&p.call(e,"__wrapped__"),E=M&&p.call(t,"__wrapped__");if(A||E){var C=A?e.value():e,T=E?t.value():t;return v||(v=new r),g(C,T,n,m,v)}}return!!S&&(v||(v=new r),o(e,t,n,m,g,v))}},2958:(e,t,n)=>{var r=n(6384),i=n(939);e.exports=function(e,t,n,a){var o=n.length,s=o,l=!a;if(null==e)return!s;for(e=Object(e);o--;){var c=n[o];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<s;){var u=(c=n[o])[0],d=e[u],h=c[1];if(l&&c[2]){if(void 0===d&&!(u in e))return!1}else{var f=new r;if(a)var p=a(d,h,u,e,t,f);if(!(void 0===p?i(h,d,3,a,f):p))return!1}}return!0}},8458:(e,t,n)=>{var r=n(3560),i=n(5346),a=n(3218),o=n(346),s=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,d=c.hasOwnProperty,h=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||i(e))&&(r(e)?h:s).test(o(e))}},8749:(e,t,n)=>{var r=n(4239),i=n(1780),a=n(7005),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&i(e.length)&&!!o[r(e)]}},7206:(e,t,n)=>{var r=n(1573),i=n(6432),a=n(6557),o=n(1469),s=n(9601);e.exports=function(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?o(e)?i(e[0],e[1]):r(e):s(e)}},280:(e,t,n)=>{var r=n(5726),i=n(6916),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))a.call(e,n)&&"constructor"!=n&&t.push(n);return t}},1573:(e,t,n)=>{var r=n(2958),i=n(1499),a=n(2634);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},6432:(e,t,n)=>{var r=n(939),i=n(7361),a=n(9095),o=n(5403),s=n(9162),l=n(2634),c=n(327);e.exports=function(e,t){return o(e)&&s(t)?l(c(e),t):function(n){var o=i(n,e);return void 0===o&&o===t?a(n,e):r(t,o,3)}}},371:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},9152:(e,t,n)=>{var r=n(7786);e.exports=function(e){return function(t){return r(t,e)}}},8674:e=>{e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},4259:e=>{e.exports=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(i);++r<i;)a[r]=e[r+t];return a}},2545:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},531:(e,t,n)=>{var r=n(2705),i=n(9932),a=n(1469),o=n(3448),s=r?r.prototype:void 0,l=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(a(t))return i(t,e)+"";if(o(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},1717:e=>{e.exports=function(e){return function(t){return e(t)}}},4757:e=>{e.exports=function(e,t){return e.has(t)}},1811:(e,t,n)=>{var r=n(1469),i=n(5403),a=n(5514),o=n(9833);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:a(o(e))}},180:(e,t,n)=>{var r=n(4259);e.exports=function(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:r(e,t,n)}},4429:(e,t,n)=>{var r=n(5639)["__core-js_shared__"];e.exports=r},5063:e=>{e.exports=function(e){return function(t,n,r){for(var i=-1,a=Object(t),o=r(t),s=o.length;s--;){var l=o[e?s:++i];if(!1===n(a[l],l,a))break}return t}}},8805:(e,t,n)=>{var r=n(180),i=n(2689),a=n(3140),o=n(9833);e.exports=function(e){return function(t){t=o(t);var n=i(t)?a(t):void 0,s=n?n[0]:t.charAt(0),l=n?r(n,1).join(""):t.slice(1);return s[e]()+l}}},5393:(e,t,n)=>{var r=n(2663),i=n(3816),a=n(8748),o=RegExp("['’]","g");e.exports=function(e){return function(t){return r(a(i(t).replace(o,"")),e,"")}}},9389:(e,t,n)=>{var r=n(8674)({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"});e.exports=r},8777:(e,t,n)=>{var r=n(852),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},7114:(e,t,n)=>{var r=n(8668),i=n(2908),a=n(4757);e.exports=function(e,t,n,o,s,l){var c=1&n,u=e.length,d=t.length;if(u!=d&&!(c&&d>u))return!1;var h=l.get(e),f=l.get(t);if(h&&f)return h==t&&f==e;var p=-1,m=!0,g=2&n?new r:void 0;for(l.set(e,t),l.set(t,e);++p<u;){var v=e[p],y=t[p];if(o)var b=c?o(y,v,p,t,e,l):o(v,y,p,e,t,l);if(void 0!==b){if(b)continue;m=!1;break}if(g){if(!i(t,(function(e,t){if(!a(g,t)&&(v===e||s(v,e,n,o,l)))return g.push(t)}))){m=!1;break}}else if(v!==y&&!s(v,y,n,o,l)){m=!1;break}}return l.delete(e),l.delete(t),m}},8351:(e,t,n)=>{var r=n(2705),i=n(1149),a=n(7813),o=n(7114),s=n(8776),l=n(1814),c=r?r.prototype:void 0,u=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,d,h){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var f=s;case"[object Set]":var p=1&r;if(f||(f=l),e.size!=t.size&&!p)return!1;var m=h.get(e);if(m)return m==t;r|=2,h.set(e,t);var g=o(f(e),f(t),r,c,d,h);return h.delete(e),g;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},6096:(e,t,n)=>{var r=n(8234),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,a,o,s){var l=1&n,c=r(e),u=c.length;if(u!=r(t).length&&!l)return!1;for(var d=u;d--;){var h=c[d];if(!(l?h in t:i.call(t,h)))return!1}var f=s.get(e),p=s.get(t);if(f&&p)return f==t&&p==e;var m=!0;s.set(e,t),s.set(t,e);for(var g=l;++d<u;){var v=e[h=c[d]],y=t[h];if(a)var b=l?a(y,v,h,t,e,s):a(v,y,h,e,t,s);if(!(void 0===b?v===y||o(v,y,n,a,s):b)){m=!1;break}g||(g="constructor"==h)}if(m&&!g){var x=e.constructor,_=t.constructor;x==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof _&&_ instanceof _||(m=!1)}return s.delete(e),s.delete(t),m}},1957:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},8234:(e,t,n)=>{var r=n(8866),i=n(9551),a=n(3674);e.exports=function(e){return r(e,a,i)}},5050:(e,t,n)=>{var r=n(7019);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},1499:(e,t,n)=>{var r=n(9162),i=n(3674);e.exports=function(e){for(var t=i(e),n=t.length;n--;){var a=t[n],o=e[a];t[n]=[a,o,r(o)]}return t}},852:(e,t,n)=>{var r=n(8458),i=n(7801);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},9607:(e,t,n)=>{var r=n(2705),i=Object.prototype,a=i.hasOwnProperty,o=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=a.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var i=o.call(e);return r&&(t?e[s]=n:delete e[s]),i}},9551:(e,t,n)=>{var r=n(4963),i=n(479),a=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,s=o?function(e){return null==e?[]:(e=Object(e),r(o(e),(function(t){return a.call(e,t)})))}:i;e.exports=s},4160:(e,t,n)=>{var r=n(8552),i=n(7071),a=n(3818),o=n(8525),s=n(577),l=n(4239),c=n(346),u="[object Map]",d="[object Promise]",h="[object Set]",f="[object WeakMap]",p="[object DataView]",m=c(r),g=c(i),v=c(a),y=c(o),b=c(s),x=l;(r&&x(new r(new ArrayBuffer(1)))!=p||i&&x(new i)!=u||a&&x(a.resolve())!=d||o&&x(new o)!=h||s&&x(new s)!=f)&&(x=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case m:return p;case g:return u;case v:return d;case y:return h;case b:return f}return t}),e.exports=x},7801:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},222:(e,t,n)=>{var r=n(1811),i=n(5694),a=n(1469),o=n(5776),s=n(1780),l=n(327);e.exports=function(e,t,n){for(var c=-1,u=(t=r(t,e)).length,d=!1;++c<u;){var h=l(t[c]);if(!(d=null!=e&&n(e,h)))break;e=e[h]}return d||++c!=u?d:!!(u=null==e?0:e.length)&&s(u)&&o(h,u)&&(a(e)||i(e))}},2689:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},3157:e=>{var t=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return t.test(e)}},1789:(e,t,n)=>{var r=n(4536);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},401:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},7667:(e,t,n)=>{var r=n(4536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},1327:(e,t,n)=>{var r=n(4536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},1866:(e,t,n)=>{var r=n(4536);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},5776:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},5403:(e,t,n)=>{var r=n(1469),i=n(3448),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||o.test(e)||!a.test(e)||null!=t&&e in Object(t)}},7019:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},5346:(e,t,n)=>{var r,i=n(4429),a=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!a&&a in e}},5726:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},9162:(e,t,n)=>{var r=n(3218);e.exports=function(e){return e==e&&!r(e)}},7040:e=>{e.exports=function(){this.__data__=[],this.size=0}},4125:(e,t,n)=>{var r=n(8470),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():i.call(t,n,1),--this.size,0))}},2117:(e,t,n)=>{var r=n(8470);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},7518:(e,t,n)=>{var r=n(8470);e.exports=function(e){return r(this.__data__,e)>-1}},4705:(e,t,n)=>{var r=n(8470);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},4785:(e,t,n)=>{var r=n(1989),i=n(8407),a=n(7071);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||i),string:new r}}},1285:(e,t,n)=>{var r=n(5050);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},6e3:(e,t,n)=>{var r=n(5050);e.exports=function(e){return r(this,e).get(e)}},9916:(e,t,n)=>{var r=n(5050);e.exports=function(e){return r(this,e).has(e)}},5265:(e,t,n)=>{var r=n(5050);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},8776:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},2634:e=>{e.exports=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}},4523:(e,t,n)=>{var r=n(8306);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},4536:(e,t,n)=>{var r=n(852)(Object,"create");e.exports=r},6916:(e,t,n)=>{var r=n(5569)(Object.keys,Object);e.exports=r},1167:(e,t,n)=>{e=n.nmd(e);var r=n(1957),i=t&&!t.nodeType&&t,a=i&&e&&!e.nodeType&&e,o=a&&a.exports===i&&r.process,s=function(){try{return a&&a.require&&a.require("util").types||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=s},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5569:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},5639:(e,t,n)=>{var r=n(1957),i="object"==typeof self&&self&&self.Object===Object&&self,a=r||i||Function("return this")();e.exports=a},619:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},2385:e=>{e.exports=function(e){return this.__data__.has(e)}},1814:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},7465:(e,t,n)=>{var r=n(8407);e.exports=function(){this.__data__=new r,this.size=0}},3779:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},7599:e=>{e.exports=function(e){return this.__data__.get(e)}},4758:e=>{e.exports=function(e){return this.__data__.has(e)}},4309:(e,t,n)=>{var r=n(8407),i=n(7071),a=n(3369);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var o=n.__data__;if(!i||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(o)}return n.set(e,t),this.size=n.size,this}},3140:(e,t,n)=>{var r=n(4286),i=n(2689),a=n(676);e.exports=function(e){return i(e)?a(e):r(e)}},5514:(e,t,n)=>{var r=n(4523),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(a,"$1"):n||e)})),t}));e.exports=o},327:(e,t,n)=>{var r=n(3448);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},346:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},676:e=>{var t="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",n="\\ud83c[\\udffb-\\udfff]",r="[^\\ud800-\\udfff]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",o="(?:"+t+"|"+n+")?",s="[\\ufe0e\\ufe0f]?",l=s+o+"(?:\\u200d(?:"+[r,i,a].join("|")+")"+s+o+")*",c="(?:"+[r+t+"?",t,i,a,"[\\ud800-\\udfff]"].join("|")+")",u=RegExp(n+"(?="+n+")|"+c+l,"g");e.exports=function(e){return e.match(u)||[]}},2757:e=>{var t="a-z\\xdf-\\xf6\\xf8-\\xff",n="A-Z\\xc0-\\xd6\\xd8-\\xde",r="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",i="["+r+"]",a="\\d+",o="["+t+"]",s="[^\\ud800-\\udfff"+r+a+"\\u2700-\\u27bf"+t+n+"]",l="(?:\\ud83c[\\udde6-\\uddff]){2}",c="[\\ud800-\\udbff][\\udc00-\\udfff]",u="["+n+"]",d="(?:"+o+"|"+s+")",h="(?:"+u+"|"+s+")",f="(?:['’](?:d|ll|m|re|s|t|ve))?",p="(?:['’](?:D|LL|M|RE|S|T|VE))?",m="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",g="[\\ufe0e\\ufe0f]?",v=g+m+"(?:\\u200d(?:"+["[^\\ud800-\\udfff]",l,c].join("|")+")"+g+m+")*",y="(?:"+["[\\u2700-\\u27bf]",l,c].join("|")+")"+v,b=RegExp([u+"?"+o+"+"+f+"(?="+[i,u,"$"].join("|")+")",h+"+"+p+"(?="+[i,u+d,"$"].join("|")+")",u+"?"+d+"+"+f,u+"+"+p,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",a,y].join("|"),"g");e.exports=function(e){return e.match(b)||[]}},8929:(e,t,n)=>{var r=n(8403),i=n(5393)((function(e,t,n){return t=t.toLowerCase(),e+(n?r(t):t)}));e.exports=i},8403:(e,t,n)=>{var r=n(9833),i=n(1700);e.exports=function(e){return i(r(e).toLowerCase())}},3816:(e,t,n)=>{var r=n(9389),i=n(9833),a=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,o=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");e.exports=function(e){return(e=i(e))&&e.replace(a,r).replace(o,"")}},7813:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},7361:(e,t,n)=>{var r=n(7786);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},8721:(e,t,n)=>{var r=n(8565),i=n(222);e.exports=function(e,t){return null!=e&&i(e,t,r)}},9095:(e,t,n)=>{var r=n(13),i=n(222);e.exports=function(e,t){return null!=e&&i(e,t,r)}},6557:e=>{e.exports=function(e){return e}},5694:(e,t,n)=>{var r=n(9454),i=n(7005),a=Object.prototype,o=a.hasOwnProperty,s=a.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return i(e)&&o.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},1469:e=>{var t=Array.isArray;e.exports=t},8612:(e,t,n)=>{var r=n(3560),i=n(1780);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},4144:(e,t,n)=>{e=n.nmd(e);var r=n(5639),i=n(5062),a=t&&!t.nodeType&&t,o=a&&e&&!e.nodeType&&e,s=o&&o.exports===a?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||i;e.exports=l},3560:(e,t,n)=>{var r=n(4239),i=n(3218);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1780:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},3218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},7005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},3448:(e,t,n)=>{var r=n(4239),i=n(7005);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},6719:(e,t,n)=>{var r=n(8749),i=n(1717),a=n(1167),o=a&&a.isTypedArray,s=o?i(o):r;e.exports=s},3674:(e,t,n)=>{var r=n(4636),i=n(280),a=n(8612);e.exports=function(e){return a(e)?r(e):i(e)}},7523:(e,t,n)=>{var r=n(9465),i=n(7816),a=n(7206);e.exports=function(e,t){var n={};return t=a(t,3),i(e,(function(e,i,a){r(n,t(e,i,a),e)})),n}},6604:(e,t,n)=>{var r=n(9465),i=n(7816),a=n(7206);e.exports=function(e,t){var n={};return t=a(t,3),i(e,(function(e,i,a){r(n,i,t(e,i,a))})),n}},8306:(e,t,n)=>{var r=n(3369);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},9601:(e,t,n)=>{var r=n(371),i=n(9152),a=n(5403),o=n(327);e.exports=function(e){return a(e)?r(o(e)):i(e)}},1865:(e,t,n)=>{var r=n(5393)((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));e.exports=r},479:e=>{e.exports=function(){return[]}},5062:e=>{e.exports=function(){return!1}},9833:(e,t,n)=>{var r=n(531);e.exports=function(e){return null==e?"":r(e)}},1700:(e,t,n)=>{var r=n(8805)("toUpperCase");e.exports=r},8748:(e,t,n)=>{var r=n(9029),i=n(3157),a=n(9833),o=n(2757);e.exports=function(e,t,n){return e=a(e),void 0===(t=n?void 0:t)?i(e)?o(e):r(e):e.match(t)||[]}},2703:(e,t,n)=>{"use strict";var r=n(414);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},5697:(e,t,n)=>{e.exports=n(2703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},5760:e=>{"use strict";function t(e){this._maxSize=e,this.clear()}t.prototype.clear=function(){this._size=0,this._values=Object.create(null)},t.prototype.get=function(e){return this._values[e]},t.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var n=/[^.^\]^[]+|(?=\[\]|\.\.)/g,r=/^\d+$/,i=/^\d/,a=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,o=/^\s*(['"]?)(.*?)(\1)\s*$/,s=new t(512),l=new t(512),c=new t(512);function u(e){return s.get(e)||s.set(e,d(e).map((function(e){return e.replace(o,"$2")})))}function d(e){return e.match(n)||[""]}function h(e){return"string"==typeof e&&e&&-1!==["'",'"'].indexOf(e.charAt(0))}function f(e){return!h(e)&&(function(e){return e.match(i)&&!e.match(r)}(e)||function(e){return a.test(e)}(e))}e.exports={Cache:t,split:d,normalizePath:u,setter:function(e){var t=u(e);return l.get(e)||l.set(e,(function(e,n){for(var r=0,i=t.length,a=e;r<i-1;){var o=t[r];if("__proto__"===o||"constructor"===o||"prototype"===o)return e;a=a[t[r++]]}a[t[r]]=n}))},getter:function(e,t){var n=u(e);return c.get(e)||c.set(e,(function(e){for(var r=0,i=n.length;r<i;){if(null==e&&t)return;e=e[n[r++]]}return e}))},join:function(e){return e.reduce((function(e,t){return e+(h(t)||r.test(t)?"["+t+"]":(e?".":"")+t)}),"")},forEach:function(e,t,n){!function(e,t,n){var r,i,a,o,s=e.length;for(i=0;i<s;i++)(r=e[i])&&(f(r)&&(r='"'+r+'"'),a=!(o=h(r))&&/^\d+$/.test(r),t.call(n,r,o,a,i,e))}(Array.isArray(e)?e:d(e),t,n)}}},4448:(e,t,n)=>{"use strict";var r=n(7294),i=n(3840);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),w=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),C=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var I=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var k=Symbol.iterator;function B(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=k&&e[k]||e["@@iterator"])?e:null}var F,N=Object.assign;function O(e){if(void 0===F)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var z=!1;function U(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var i=t.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?O(e):""}function H(e){switch(e.tag){case 5:return O(e.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return U(e.type,!1);case 11:return U(e.type.render,!1);case 1:return U(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case M:return"Fragment";case w:return"Portal";case A:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case P:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case L:return null!==(t=e.displayName||null)?t:G(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return G(e(t))}catch(e){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return G(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function j(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function X(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return N({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=j(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function K(e,t){$(e,t);var n=j(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,j(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Q(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+j(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return N({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:j(n)}}function ae(e,t){var n=j(t.value),r=j(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=N({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(a(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Me=null,Se=null;function Ae(e){if(e=bi(e)){if("function"!=typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=_i(t),we(e.stateNode,e.type,t))}}function Ee(e){Me?Se?Se.push(e):Se=[e]:Me=e}function Ce(){if(Me){var e=Me,t=Se;if(Se=Me=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Te(e,t){return e(t)}function Re(){}var Pe=!1;function Le(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Te(e,t,n)}finally{Pe=!1,(null!==Me||null!==Se)&&(Re(),Ce())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(a(231,t,typeof n));return n}var Ie=!1;if(u)try{var ke={};Object.defineProperty(ke,"passive",{get:function(){Ie=!0}}),window.addEventListener("test",ke,ke),window.removeEventListener("test",ke,ke)}catch(ue){Ie=!1}function Be(e,t,n,r,i,a,o,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var Fe=!1,Ne=null,Oe=!1,ze=null,Ue={onError:function(e){Fe=!0,Ne=e}};function He(e,t,n,r,i,a,o,s,l){Fe=!1,Ne=null,Be.apply(Ue,arguments)}function Ge(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function je(e){if(Ge(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ge(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return je(i),e;if(o===r)return je(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Xe(e):null}function Xe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Xe(e);if(null!==t)return t;e=e.sibling}return null}var qe=i.unstable_scheduleCallback,Ye=i.unstable_cancelCallback,Ze=i.unstable_shouldYield,Je=i.unstable_requestPaint,$e=i.unstable_now,Ke=i.unstable_getCurrentPriorityLevel,Qe=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null,ot=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2,ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=dt(s):0!=(a&=o)&&(r=dt(a))}else 0!=(o=n&~i)?r=dt(o):0!==a&&(r=dt(a));if(0===r)return 0;if(0!==t&&t!==r&&0==(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!=(4194240&a)))return t;if(0!=(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0==(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var _t,wt,Mt,St,At,Et=!1,Ct=[],Tt=null,Rt=null,Pt=null,Lt=new Map,Dt=new Map,It=[],kt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Rt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Ft(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&null!==(t=bi(t))&&wt(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Nt(e){var t=yi(e.target);if(null!==t){var n=Ge(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void At(e.priority,(function(){Mt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ot(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function zt(e,t,n){Ot(e)&&n.delete(t)}function Ut(){Et=!1,null!==Tt&&Ot(Tt)&&(Tt=null),null!==Rt&&Ot(Rt)&&(Rt=null),null!==Pt&&Ot(Pt)&&(Pt=null),Lt.forEach(zt),Dt.forEach(zt)}function Ht(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function Gt(e){function t(t){return Ht(t,e)}if(0<Ct.length){Ht(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&Ht(Tt,e),null!==Rt&&Ht(Rt,e),null!==Pt&&Ht(Pt,e),Lt.forEach(t),Dt.forEach(t),n=0;n<It.length;n++)(r=It[n]).blockedOn===e&&(r.blockedOn=null);for(;0<It.length&&null===(n=It[0]).blockedOn;)Nt(n),null===n.blockedOn&&It.shift()}var Vt=x.ReactCurrentBatchConfig,jt=!0;function Wt(e,t,n,r){var i=bt,a=Vt.transition;Vt.transition=null;try{bt=1,qt(e,t,n,r)}finally{bt=i,Vt.transition=a}}function Xt(e,t,n,r){var i=bt,a=Vt.transition;Vt.transition=null;try{bt=4,qt(e,t,n,r)}finally{bt=i,Vt.transition=a}}function qt(e,t,n,r){if(jt){var i=Zt(e,t,n,r);if(null===i)jr(e,t,r,Yt,n),Bt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=Ft(Tt,e,t,n,r,i),!0;case"dragenter":return Rt=Ft(Rt,e,t,n,r,i),!0;case"mouseover":return Pt=Ft(Pt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Lt.set(a,Ft(Lt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Dt.set(a,Ft(Dt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Bt(e,r),4&t&&-1<kt.indexOf(e)){for(;null!==i;){var a=bi(i);if(null!==a&&_t(a),null===(a=Zt(e,t,n,r))&&jr(e,t,r,Yt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else jr(e,t,r,null,n)}}var Yt=null;function Zt(e,t,n,r){if(Yt=null,null!==(e=yi(e=_e(r))))if(null===(t=Ge(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ke()){case Qe:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Kt=null,Qt=null;function en(){if(Qt)return Qt;var e,t,n=Kt,r=n.length,i="value"in $t?$t.value:$t.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Qt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return N(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=an(cn),dn=N({},cn,{view:0,detail:0}),hn=an(dn),fn=N({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:An,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(fn),mn=an(N({},fn,{dataTransfer:0})),gn=an(N({},dn,{relatedTarget:0})),vn=an(N({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=N({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),xn=an(N({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Mn[e])&&!!t[e]}function An(){return Sn}var En=N({},dn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:An,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=an(En),Tn=an(N({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=an(N({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:An})),Pn=an(N({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ln=N({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=an(Ln),In=[9,13,27,32],kn=u&&"CompositionEvent"in window,Bn=null;u&&"documentMode"in document&&(Bn=document.documentMode);var Fn=u&&"TextEvent"in window&&!Bn,Nn=u&&(!kn||Bn&&8<Bn&&11>=Bn),On=String.fromCharCode(32),zn=!1;function Un(e,t){switch(e){case"keyup":return-1!==In.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Gn=!1,Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ee(r),0<(t=Xr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Xn=null,qn=null;function Yn(e){Or(e,0)}function Zn(e){if(q(xi(e)))return e}function Jn(e,t){if("change"===e)return t}var $n=!1;if(u){var Kn;if(u){var Qn="oninput"in document;if(!Qn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Qn="function"==typeof er.oninput}Kn=Qn}else Kn=!1;$n=Kn&&(!document.documentMode||9<document.documentMode)}function tr(){Xn&&(Xn.detachEvent("onpropertychange",nr),qn=Xn=null)}function nr(e){if("value"===e.propertyName&&Zn(qn)){var t=[];Wn(t,qn,e,_e(e)),Le(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),qn=n,(Xn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Zn(qn)}function ar(e,t){if("click"===e)return Zn(t)}function or(e,t){if("input"===e||"change"===e)return Zn(t)}var sr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function lr(e,t){if(sr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=ur(n,a);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==Y(r)||(r="selectionStart"in(r=gr)&&fr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Xr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Mr={},Sr={};function Ar(e){if(Mr[e])return Mr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Mr[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Er=Ar("animationend"),Cr=Ar("animationiteration"),Tr=Ar("animationstart"),Rr=Ar("transitionend"),Pr=new Map,Lr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Pr.set(e,t),l(t,[e])}for(var Ir=0;Ir<Lr.length;Ir++){var kr=Lr[Ir];Dr(kr.toLowerCase(),"on"+(kr[0].toUpperCase()+kr.slice(1)))}Dr(Er,"onAnimationEnd"),Dr(Cr,"onAnimationIteration"),Dr(Tr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Rr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Br="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Br));function Nr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,l,c){if(He.apply(this,arguments),Fe){if(!Fe)throw Error(a(198));var u=Ne;Fe=!1,Ne=null,Oe||(Oe=!0,ze=u)}}(r,t,void 0,e),e.currentTarget=null}function Or(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;Nr(i,s,c),a=l}else for(o=0;o<r.length;o++){if(l=(s=r[o]).instance,c=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;Nr(i,s,c),a=l}}}if(Oe)throw e=ze,Oe=!1,ze=null,e}function zr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Hr="_reactListening"+Math.random().toString(36).slice(2);function Gr(e){if(!e[Hr]){e[Hr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Fr.has(t)||Ur(t,!1,e),Ur(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Hr]||(t[Hr]=!0,Ur("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Jt(t)){case 1:var i=Wt;break;case 4:i=Xt;break;default:i=qt}n=i.bind(null,t,n,e),i=void 0,!Ie||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function jr(e,t,n,r,i){var a=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=yi(s)))return;if(5===(l=o.tag)||6===l){r=a=o;continue e}s=s.parentNode}}r=r.return}Le((function(){var r=a,i=_e(n),o=[];e:{var s=Pr.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Rn;break;case Er:case Cr:case Tr:l=vn;break;case Rr:l=Pn;break;case"scroll":l=hn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var u=0!=(4&t),d=!u&&"scroll"===e,h=u?null!==s?s+"Capture":null:s;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&null!=(m=De(p,h))&&u.push(Wr(p,m,f))),d)break;p=p.return}0<u.length&&(s=new l(s,c,null,n,i),o.push({event:s,listeners:u}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(d=Ge(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?s:xi(l),f=null==c?s:xi(c),(s=new u(m,p+"leave",l,n,i)).target=d,s.relatedTarget=f,m=null,yi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=qr(f))p++;for(f=0,m=h;m;m=qr(m))f++;for(;0<p-f;)u=qr(u),p--;for(;0<f-p;)h=qr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=qr(u),h=qr(h)}u=null}else u=null;null!==l&&Yr(o,s,l,u,!1),null!==c&&null!==d&&Yr(o,d,c,u,!0)}if("select"===(l=(s=r?xi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Jn;else if(jn(s))if($n)g=or;else{g=ir;var v=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ar);switch(g&&(g=g(e,r))?Wn(o,g,n,i):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=r?xi(r):window,e){case"focusin":(jn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(o,n,i)}var y;if(kn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Gn?Un(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Nn&&"ko"!==n.locale&&(Gn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Gn&&(y=en()):(Kt="value"in($t=i)?$t.value:$t.textContent,Gn=!0)),0<(v=Xr(r,b)).length&&(b=new xn(b,e,null,n,i),o.push({event:b,listeners:v}),(y||null!==(y=Hn(n)))&&(b.data=y))),(y=Fn?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(zn=!0,On);case"textInput":return(e=t.data)===On&&zn?null:e;default:return null}}(e,n):function(e,t){if(Gn)return"compositionend"===e||!kn&&Un(e,t)?(e=en(),Qt=Kt=$t=null,Gn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nn&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=Xr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y)}Or(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Xr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=De(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=De(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(l=De(n,a))&&o.unshift(Wr(n,l,s)):i||null!=(l=De(n,a))&&o.push(Wr(n,l,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Zr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function $r(e){return("string"==typeof e?e:""+e).replace(Zr,"\n").replace(Jr,"")}function Kr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(a(425))}function Qr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"==typeof setTimeout?setTimeout:void 0,ii="function"==typeof clearTimeout?clearTimeout:void 0,ai="function"==typeof Promise?Promise:void 0,oi="function"==typeof queueMicrotask?queueMicrotask:void 0!==ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Gt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Gt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,vi="__reactHandles$"+di;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function _i(e){return e[fi]||null}var wi=[],Mi=-1;function Si(e){return{current:e}}function Ai(e){0>Mi||(e.current=wi[Mi],wi[Mi]=null,Mi--)}function Ei(e,t){Mi++,wi[Mi]=e.current,e.current=t}var Ci={},Ti=Si(Ci),Ri=Si(!1),Pi=Ci;function Li(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Di(e){return null!=e.childContextTypes}function Ii(){Ai(Ri),Ai(Ti)}function ki(e,t,n){if(Ti.current!==Ci)throw Error(a(168));Ei(Ti,t),Ei(Ri,n)}function Bi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,V(e)||"Unknown",i));return N({},n,r)}function Fi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Pi=Ti.current,Ei(Ti,e),Ei(Ri,Ri.current),!0}function Ni(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Bi(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,Ai(Ri),Ai(Ti),Ei(Ti,e)):Ai(Ri),Ei(Ri,n)}var Oi=null,zi=!1,Ui=!1;function Hi(e){null===Oi?Oi=[e]:Oi.push(e)}function Gi(){if(!Ui&&null!==Oi){Ui=!0;var e=0,t=bt;try{var n=Oi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Oi=null,zi=!1}catch(t){throw null!==Oi&&(Oi=Oi.slice(e+1)),qe(Qe,Gi),t}finally{bt=t,Ui=!1}}return null}var Vi=x.ReactCurrentBatchConfig;function ji(e,t){if(e&&e.defaultProps){for(var n in t=N({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Wi=Si(null),Xi=null,qi=null,Yi=null;function Zi(){Yi=qi=Xi=null}function Ji(e){var t=Wi.current;Ai(Wi),e._currentValue=t}function $i(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ki(e,t){Xi=e,Yi=qi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(_s=!0),e.firstContext=null)}function Qi(e){var t=e._currentValue;if(Yi!==e)if(e={context:e,memoizedValue:t,next:null},null===qi){if(null===Xi)throw Error(a(308));qi=e,Xi.dependencies={lanes:0,firstContext:e}}else qi=qi.next=e;return t}var ea=null,ta=!1;function na(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ia(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function aa(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,tc(e)?(null===(e=n.interleaved)?(t.next=t,null===ea?ea=[n]:ea.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function oa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function sa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function la(e,t,n,r){var i=e.updateQueue;ta=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===o?a=c:o.next=c,o=l;var u=e.alternate;null!==u&&(s=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l)}if(null!==a){var d=i.baseState;for(o=0,u=c=l=null,s=a;;){var h=s.lane,f=s.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(h=t,f=n,m.tag){case 1:if("function"==typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(h="function"==typeof(p=m.payload)?p.call(f,d,h):p))break e;d=N({},d,h);break e;case 2:ta=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else f={eventTime:f,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,o|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Il|=o,e.lanes=o,e.memoizedState=d}}function ca(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(a(191,i));i.call(r)}}}var ua=(new r.Component).refs;function da(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:N({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ha={isMounted:function(e){return!!(e=e._reactInternals)&&Ge(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=$l(),i=Kl(e),a=ia(r,i);a.payload=t,null!=n&&(a.callback=n),aa(e,a),null!==(t=Ql(e,i,r))&&oa(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=$l(),i=Kl(e),a=ia(r,i);a.tag=1,a.payload=t,null!=n&&(a.callback=n),aa(e,a),null!==(t=Ql(e,i,r))&&oa(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=$l(),r=Kl(e),i=ia(n,r);i.tag=2,null!=t&&(i.callback=t),aa(e,i),null!==(t=Ql(e,r,n))&&oa(t,e,r)}};function fa(e,t,n,r,i,a,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!(t.prototype&&t.prototype.isPureReactComponent&&lr(n,r)&&lr(i,a))}function pa(e,t,n){var r=!1,i=Ci,a=t.contextType;return"object"==typeof a&&null!==a?a=Qi(a):(i=Di(t)?Pi:Ti.current,a=(r=null!=(r=t.contextTypes))?Li(e,i):Ci),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ha,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ma(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ha.enqueueReplaceState(t,t.state,null)}function ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ua,na(e);var a=t.contextType;"object"==typeof a&&null!==a?i.context=Qi(a):(a=Di(t)?Pi:Ti.current,i.context=Li(e,a)),i.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(da(e,t,a,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ha.enqueueReplaceState(i,i.state,null),la(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}var va=[],ya=0,ba=null,xa=0,_a=[],wa=0,Ma=null,Sa=1,Aa="";function Ea(e,t){va[ya++]=xa,va[ya++]=ba,ba=e,xa=t}function Ca(e,t,n){_a[wa++]=Sa,_a[wa++]=Aa,_a[wa++]=Ma,Ma=e;var r=Sa;e=Aa;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Sa=1<<32-ot(t)+i|n<<i|r,Aa=a+e}else Sa=1<<a|n<<i|r,Aa=e}function Ta(e){null!==e.return&&(Ea(e,1),Ca(e,1,0))}function Ra(e){for(;e===ba;)ba=va[--ya],va[ya]=null,xa=va[--ya],va[ya]=null;for(;e===Ma;)Ma=_a[--wa],_a[wa]=null,Aa=_a[--wa],_a[wa]=null,Sa=_a[--wa],_a[wa]=null}var Pa=null,La=null,Da=!1,Ia=null;function ka(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Ba(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Pa=e,La=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Pa=e,La=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ma?{id:Sa,overflow:Aa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Pa=e,La=null,!0);default:return!1}}function Fa(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function Na(e){if(Da){var t=La;if(t){var n=t;if(!Ba(e,t)){if(Fa(e))throw Error(a(418));t=ci(n.nextSibling);var r=Pa;t&&Ba(e,t)?ka(r,n):(e.flags=-4097&e.flags|2,Da=!1,Pa=e)}}else{if(Fa(e))throw Error(a(418));e.flags=-4097&e.flags|2,Da=!1,Pa=e}}}function Oa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Pa=e}function za(e){if(e!==Pa)return!1;if(!Da)return Oa(e),Da=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=La)){if(Fa(e)){for(e=La;e;)e=ci(e.nextSibling);throw Error(a(418))}for(;t;)ka(e,t),t=ci(t.nextSibling)}if(Oa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){La=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}La=null}}else La=Pa?ci(e.stateNode.nextSibling):null;return!0}function Ua(){La=Pa=null,Da=!1}function Ha(e){null===Ia?Ia=[e]:Ia.push(e)}function Ga(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!=typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Va(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ja(e){return(0,e._init)(e._payload)}function Wa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===M?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===D&&ja(a)===t.type)?((r=i(t,n.props)).ref=Ga(e,t,n),r.return=e,r):((r=Ic(n.type,n.key,n.props,null,e.mode,r)).ref=Ga(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Nc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=kc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Ic(t.type,t.key,t.props,null,e.mode,n)).ref=Ga(e,null,t),n.return=e,n;case w:return(t=Nc(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||B(t))return(t=kc(t,e.mode,n,null)).return=e,t;Va(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case w:return n.key===i?u(e,t,n,r):null;case D:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||B(n))return null!==i?null:d(e,t,n,r,null);Va(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case w:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||B(r))return d(t,e=e.get(n)||null,r,i,null);Va(t,r)}return null}function m(i,a,s,l){for(var c=null,u=null,d=a,m=a=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=f(i,d,s[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),a=o(v,a,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===s.length)return n(i,d),Da&&Ea(i,m),c;if(null===d){for(;m<s.length;m++)null!==(d=h(i,s[m],l))&&(a=o(d,a,m),null===u?c=d:u.sibling=d,u=d);return Da&&Ea(i,m),c}for(d=r(i,d);m<s.length;m++)null!==(g=p(d,i,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),a=o(g,a,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(i,e)})),Da&&Ea(i,m),c}function g(i,s,l,c){var u=B(l);if("function"!=typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var d=u=null,m=s,g=s=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=f(i,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(i,m),s=o(b,s,g),null===d?u=b:d.sibling=b,d=b,m=v}if(y.done)return n(i,m),Da&&Ea(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(i,y.value,c))&&(s=o(y,s,g),null===d?u=y:d.sibling=y,d=y);return Da&&Ea(i,g),u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=p(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=o(y,s,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(i,e)})),Da&&Ea(i,g),u}return function e(r,a,o,l){if("object"==typeof o&&null!==o&&o.type===M&&null===o.key&&(o=o.props.children),"object"==typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var c=o.key,u=a;null!==u;){if(u.key===c){if((c=o.type)===M){if(7===u.tag){n(r,u.sibling),(a=i(u,o.props.children)).return=r,r=a;break e}}else if(u.elementType===c||"object"==typeof c&&null!==c&&c.$$typeof===D&&ja(c)===u.type){n(r,u.sibling),(a=i(u,o.props)).ref=Ga(r,u,o),a.return=r,r=a;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===M?((a=kc(o.props.children,r.mode,l,o.key)).return=r,r=a):((l=Ic(o.type,o.key,o.props,null,r.mode,l)).ref=Ga(r,a,o),l.return=r,r=l)}return s(r);case w:e:{for(u=o.key;null!==a;){if(a.key===u){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Nc(o,r.mode,l)).return=r,r=a}return s(r);case D:return e(r,a,(u=o._init)(o._payload),l)}if(te(o))return m(r,a,o,l);if(B(o))return g(r,a,o,l);Va(r,o)}return"string"==typeof o&&""!==o||"number"==typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,l)).return=r,r=a),s(r)):n(r,a)}}var Xa=Wa(!0),qa=Wa(!1),Ya={},Za=Si(Ya),Ja=Si(Ya),$a=Si(Ya);function Ka(e){if(e===Ya)throw Error(a(174));return e}function Qa(e,t){switch(Ei($a,t),Ei(Ja,e),Ei(Za,Ya),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ai(Za),Ei(Za,t)}function eo(){Ai(Za),Ai(Ja),Ai($a)}function to(e){Ka($a.current);var t=Ka(Za.current),n=le(t,e.type);t!==n&&(Ei(Ja,e),Ei(Za,n))}function no(e){Ja.current===e&&(Ai(Za),Ai(Ja))}var ro=Si(0);function io(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ao=[];function oo(){for(var e=0;e<ao.length;e++)ao[e]._workInProgressVersionPrimary=null;ao.length=0}var so=x.ReactCurrentDispatcher,lo=x.ReactCurrentBatchConfig,co=0,uo=null,ho=null,fo=null,po=!1,mo=!1,go=0,vo=0;function yo(){throw Error(a(321))}function bo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function xo(e,t,n,r,i,o){if(co=o,uo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,so.current=null===e||null===e.memoizedState?rs:is,e=n(r,i),mo){o=0;do{if(mo=!1,go=0,25<=o)throw Error(a(301));o+=1,fo=ho=null,t.updateQueue=null,so.current=as,e=n(r,i)}while(mo)}if(so.current=ns,t=null!==ho&&null!==ho.next,co=0,fo=ho=uo=null,po=!1,t)throw Error(a(300));return e}function _o(){var e=0!==go;return go=0,e}function wo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===fo?uo.memoizedState=fo=e:fo=fo.next=e,fo}function Mo(){if(null===ho){var e=uo.alternate;e=null!==e?e.memoizedState:null}else e=ho.next;var t=null===fo?uo.memoizedState:fo.next;if(null!==t)fo=t,ho=e;else{if(null===e)throw Error(a(310));e={memoizedState:(ho=e).memoizedState,baseState:ho.baseState,baseQueue:ho.baseQueue,queue:ho.queue,next:null},null===fo?uo.memoizedState=fo=e:fo=fo.next=e}return fo}function So(e,t){return"function"==typeof t?t(e):t}function Ao(e){var t=Mo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=ho,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=s=null,c=null,u=o;do{var d=u.lane;if((co&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,s=r):c=c.next=h,uo.lanes|=d,Il|=d}u=u.next}while(null!==u&&u!==o);null===c?s=r:c.next=l,sr(r,t.memoizedState)||(_s=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,uo.lanes|=o,Il|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Eo(e){var t=Mo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(_s=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Co(){}function To(e,t){var n=uo,r=Mo(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,_s=!0),r=r.queue,zo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==fo&&1&fo.memoizedState.tag){if(n.flags|=2048,ko(9,Po.bind(null,n,r,i,t),void 0,null),null===El)throw Error(a(349));0!=(30&co)||Ro(n,t,i)}return i}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Po(e,t,n,r){t.value=n,t.getSnapshot=r,Do(t)&&Ql(e,1,-1)}function Lo(e,t,n){return n((function(){Do(t)&&Ql(e,1,-1)}))}function Do(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(e){return!0}}function Io(e){var t=wo();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:So,lastRenderedState:e},t.queue=e,e=e.dispatch=$o.bind(null,uo,e),[t.memoizedState,e]}function ko(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Bo(){return Mo().memoizedState}function Fo(e,t,n,r){var i=wo();uo.flags|=e,i.memoizedState=ko(1|t,n,void 0,void 0===r?null:r)}function No(e,t,n,r){var i=Mo();r=void 0===r?null:r;var a=void 0;if(null!==ho){var o=ho.memoizedState;if(a=o.destroy,null!==r&&bo(r,o.deps))return void(i.memoizedState=ko(t,n,a,r))}uo.flags|=e,i.memoizedState=ko(1|t,n,a,r)}function Oo(e,t){return Fo(8390656,8,e,t)}function zo(e,t){return No(2048,8,e,t)}function Uo(e,t){return No(4,2,e,t)}function Ho(e,t){return No(4,4,e,t)}function Go(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Vo(e,t,n){return n=null!=n?n.concat([e]):null,No(4,4,Go.bind(null,t,e),n)}function jo(){}function Wo(e,t){var n=Mo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&bo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=Mo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&bo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qo(e,t,n){return 0==(21&co)?(e.baseState&&(e.baseState=!1,_s=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),uo.lanes|=n,Il|=n,e.baseState=!0),t)}function Yo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=lo.transition;lo.transition={};try{e(!1),t()}finally{bt=n,lo.transition=r}}function Zo(){return Mo().memoizedState}function Jo(e,t,n){var r=Kl(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ko(e)?Qo(t,n):(es(e,t,n),null!==(e=Ql(e,r,n=$l()))&&ts(e,t,r))}function $o(e,t,n){var r=Kl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ko(e))Qo(t,i);else{es(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o))return}catch(e){}null!==(e=Ql(e,r,n=$l()))&&ts(e,t,r)}}function Ko(e){var t=e.alternate;return e===uo||null!==t&&t===uo}function Qo(e,t){mo=po=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function es(e,t,n){tc(e)?(null===(e=t.interleaved)?(n.next=n,null===ea?ea=[t]:ea.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function ts(e,t,n){if(0!=(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var ns={readContext:Qi,useCallback:yo,useContext:yo,useEffect:yo,useImperativeHandle:yo,useInsertionEffect:yo,useLayoutEffect:yo,useMemo:yo,useReducer:yo,useRef:yo,useState:yo,useDebugValue:yo,useDeferredValue:yo,useTransition:yo,useMutableSource:yo,useSyncExternalStore:yo,useId:yo,unstable_isNewReconciler:!1},rs={readContext:Qi,useCallback:function(e,t){return wo().memoizedState=[e,void 0===t?null:t],e},useContext:Qi,useEffect:Oo,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Fo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Fo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Fo(4,2,e,t)},useMemo:function(e,t){var n=wo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=wo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Jo.bind(null,uo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},wo().memoizedState=e},useState:Io,useDebugValue:jo,useDeferredValue:function(e){return wo().memoizedState=e},useTransition:function(){var e=Io(!1),t=e[0];return e=Yo.bind(null,e[1]),wo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=uo,i=wo();if(Da){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===El)throw Error(a(349));0!=(30&co)||Ro(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Oo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,ko(9,Po.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=wo(),t=El.identifierPrefix;if(Da){var n=Aa;t=":"+t+"R"+(n=(Sa&~(1<<32-ot(Sa)-1)).toString(32)+n),0<(n=go++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=vo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},is={readContext:Qi,useCallback:Wo,useContext:Qi,useEffect:zo,useImperativeHandle:Vo,useInsertionEffect:Uo,useLayoutEffect:Ho,useMemo:Xo,useReducer:Ao,useRef:Bo,useState:function(){return Ao(So)},useDebugValue:jo,useDeferredValue:function(e){return qo(Mo(),ho.memoizedState,e)},useTransition:function(){return[Ao(So)[0],Mo().memoizedState]},useMutableSource:Co,useSyncExternalStore:To,useId:Zo,unstable_isNewReconciler:!1},as={readContext:Qi,useCallback:Wo,useContext:Qi,useEffect:zo,useImperativeHandle:Vo,useInsertionEffect:Uo,useLayoutEffect:Ho,useMemo:Xo,useReducer:Eo,useRef:Bo,useState:function(){return Eo(So)},useDebugValue:jo,useDeferredValue:function(e){var t=Mo();return null===ho?t.memoizedState=e:qo(t,ho.memoizedState,e)},useTransition:function(){return[Eo(So)[0],Mo().memoizedState]},useMutableSource:Co,useSyncExternalStore:To,useId:Zo,unstable_isNewReconciler:!1};function os(e,t){try{var n="",r=t;do{n+=H(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i}}function ss(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}var ls,cs,us,ds="function"==typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=ia(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Gl=r),ss(0,t)},n}function fs(e,t,n){(n=ia(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ss(0,t)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){ss(0,t),"function"!=typeof r&&(null===Vl?Vl=new Set([this]):Vl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ps(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,n,r,i){return 0==(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ia(-1,1)).tag=2,aa(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function vs(e,t){if(!Da)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ys(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function bs(e,t,n){var r=t.pendingProps;switch(Ra(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ys(t),null;case 1:case 17:return Di(t.type)&&Ii(),ys(t),null;case 3:return r=t.stateNode,eo(),Ai(Ri),Ai(Ti),oo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(za(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==Ia&&(ac(Ia),Ia=null))),ys(t),null;case 5:no(t);var i=Ka($a.current);if(n=t.type,null!==e&&null!=t.stateNode)cs(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return ys(t),null}if(e=Ka(Za.current),za(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[fi]=o,e=0!=(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(i=0;i<Br.length;i++)zr(Br[i],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":J(r,o),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},zr("invalid",r);break;case"textarea":ie(r,o),zr("invalid",r)}for(var l in ye(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"==typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Kr(r.textContent,c,e),i=["children",c]):"number"==typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Kr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":X(r),Q(r,o,!0);break;case"textarea":X(r),oe(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=Qr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,ls(e,t),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":zr("cancel",e),zr("close",e),i=r;break;case"iframe":case"object":case"embed":zr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Br.length;i++)zr(Br[i],e);i=r;break;case"source":zr("error",e),i=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),i=r;break;case"details":zr("toggle",e),i=r;break;case"input":J(e,r),i=Z(e,r),zr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=N({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),zr("invalid",e)}for(o in ye(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===o?"string"==typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"==typeof u&&he(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=u&&"onScroll"===o&&zr("scroll",e):null!=u&&b(e,o,u,l))}switch(n){case"input":X(e),Q(e,r,!1);break;case"textarea":X(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+j(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Qr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return ys(t),null;case 6:if(e&&null!=t.stateNode)us(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ka($a.current),Ka(Za.current),za(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=Pa))switch(e.tag){case 3:Kr(r.nodeValue,n,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Kr(r.nodeValue,n,0!=(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return ys(t),null;case 13:if(Ai(ro),r=t.memoizedState,Da&&null!==La&&0!=(1&t.mode)&&0==(128&t.flags)){for(r=La;r;)r=ci(r.nextSibling);return Ua(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=za(t),null===e){if(!r)throw Error(a(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(a(317));r[hi]=t}else Ua(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return ys(t),null}return null!==Ia&&(ac(Ia),Ia=null),0!=(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?za(t):n=null!==e.memoizedState,r!==n&&r&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&ro.current)?0===Ll&&(Ll=3):pc())),null!==t.updateQueue&&(t.flags|=4),ys(t),null);case 4:return eo(),null===e&&Gr(t.stateNode.containerInfo),ys(t),null;case 10:return Ji(t.type._context),ys(t),null;case 19:if(Ai(ro),null===(o=t.memoizedState))return ys(t),null;if(r=0!=(128&t.flags),null===(l=o.rendering))if(r)vs(o,!1);else{if(0!==Ll||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=io(e))){for(t.flags|=128,vs(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(ro,1&ro.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>zl&&(t.flags|=128,r=!0,vs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=io(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),vs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!Da)return ys(t),null}else 2*$e()-o.renderingStartTime>zl&&1073741824!==n&&(t.flags|=128,r=!0,vs(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=ro.current,Ei(ro,r?1&n|2:1&n),t):(ys(t),null);case 22:case 23:return uc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!=(1&t.mode)?0!=(1073741824&Rl)&&(ys(t),6&t.subtreeFlags&&(t.flags|=8192)):ys(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}ls=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},cs=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ka(Za.current);var a,o=null;switch(n){case"input":i=Z(e,i),r=Z(e,r),o=[];break;case"select":i=N({},i,{value:void 0}),r=N({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Qr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!=typeof c&&"number"!=typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},us=function(e,t,n,r){n!==r&&(t.flags|=4)};var xs=x.ReactCurrentOwner,_s=!1;function ws(e,t,n,r){t.child=null===e?qa(t,null,n,r):Xa(t,e.child,n,r)}function Ms(e,t,n,r,i){n=n.render;var a=t.ref;return Ki(t,i),r=xo(e,t,n,r,a,i),n=_o(),null===e||_s?(Da&&n&&Ta(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,js(e,t,i))}function Ss(e,t,n,r,i){if(null===e){var a=n.type;return"function"!=typeof a||Lc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ic(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,As(e,t,a,r,i))}if(a=e.child,0==(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return js(e,t,i)}return t.flags|=1,(e=Dc(a,r)).ref=t.ref,e.return=t,t.child=e}function As(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(_s=!1,t.pendingProps=r=a,0==(e.lanes&i))return t.lanes=e.lanes,js(e,t,i);0!=(131072&e.flags)&&(_s=!0)}}return Ts(e,t,n,r,i)}function Es(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Pl,Rl),Rl|=n;else{if(0==(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(Pl,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ei(Pl,Rl),Rl|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ei(Pl,Rl),Rl|=r;return ws(e,t,i,n),t.child}function Cs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,r,i){var a=Di(n)?Pi:Ti.current;return a=Li(t,a),Ki(t,i),n=xo(e,t,n,r,a,i),r=_o(),null===e||_s?(Da&&r&&Ta(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,js(e,t,i))}function Rs(e,t,n,r,i){if(Di(n)){var a=!0;Fi(t)}else a=!1;if(Ki(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),pa(t,n,r),ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,c=n.contextType;c="object"==typeof c&&null!==c?Qi(c):Li(t,c=Di(n)?Pi:Ti.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof o.getSnapshotBeforeUpdate;d||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==r||l!==c)&&ma(t,o,r,c),ta=!1;var h=t.memoizedState;o.state=h,la(t,r,o,i),l=t.memoizedState,s!==r||h!==l||Ri.current||ta?("function"==typeof u&&(da(t,n,u,r),l=t.memoizedState),(s=ta||fa(t,n,s,r,h,l,c))?(d||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=s):("function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ra(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ji(t.type,s),o.props=c,d=t.pendingProps,h=o.context,l="object"==typeof(l=n.contextType)&&null!==l?Qi(l):Li(t,l=Di(n)?Pi:Ti.current);var f=n.getDerivedStateFromProps;(u="function"==typeof f||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==d||h!==l)&&ma(t,o,r,l),ta=!1,h=t.memoizedState,o.state=h,la(t,r,o,i);var p=t.memoizedState;s!==d||h!==p||Ri.current||ta?("function"==typeof f&&(da(t,n,f,r),p=t.memoizedState),(c=ta||fa(t,n,c,r,h,p,l)||!1)?(u||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ps(e,t,n,r,a,i)}function Ps(e,t,n,r,i,a){Cs(e,t);var o=0!=(128&t.flags);if(!r&&!o)return i&&Ni(t,n,!1),js(e,t,a);r=t.stateNode,xs.current=t;var s=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Xa(t,e.child,null,a),t.child=Xa(t,null,s,a)):ws(e,t,s,a),t.memoizedState=r.state,i&&Ni(t,n,!0),t.child}function Ls(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),Qa(e,t.containerInfo)}function Ds(e,t,n,r,i){return Ua(),Ha(i),t.flags|=256,ws(e,t,n,r),t.child}var Is={dehydrated:null,treeContext:null,retryLane:0};function ks(e){return{baseLanes:e,cachePool:null,transitions:null}}function Bs(e,t){return{baseLanes:e.baseLanes|t,cachePool:null,transitions:e.transitions}}function Fs(e,t,n){var r,i=t.pendingProps,o=ro.current,s=!1,l=0!=(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!=(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ei(ro,1&o),null===e)return Na(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,s?(i=t.mode,s=t.child,o={mode:"hidden",children:o},0==(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=o):s=Bc(o,i,0,null),e=kc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=ks(n),t.memoizedState=Is,e):Ns(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(l)return 256&t.flags?(t.flags&=-257,Us(e,t,n,Error(a(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=i.fallback,o=t.mode,i=Bc({mode:"visible",children:i.children},o,0,null),(s=kc(s,o,n,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,0!=(1&t.mode)&&Xa(t,e.child,null,n),t.child.memoizedState=ks(n),t.memoizedState=Is,s);if(0==(1&t.mode))t=Us(e,t,n,null);else if("$!"===r.data)t=Us(e,t,n,Error(a(419)));else if(i=0!=(n&e.childLanes),_s||i){if(null!==(i=El)){switch(n&-n){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(i=0!=(s&(i.suspendedLanes|n))?0:s)&&i!==o.retryLane&&(o.retryLane=i,Ql(e,i,-1))}pc(),t=Us(e,t,n,Error(a(421)))}else"$?"===r.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),r._reactRetry=t,t=null):(n=o.treeContext,La=ci(r.nextSibling),Pa=t,Da=!0,Ia=null,null!==n&&(_a[wa++]=Sa,_a[wa++]=Aa,_a[wa++]=Ma,Sa=n.id,Aa=n.overflow,Ma=t),(t=Ns(t,t.pendingProps.children)).flags|=4096);return t}return s?(i=zs(e,t,i.children,i.fallback,n),s=t.child,o=e.child.memoizedState,s.memoizedState=null===o?ks(n):Bs(o,n),s.childLanes=e.childLanes&~n,t.memoizedState=Is,i):(n=Os(e,t,i.children,n),t.memoizedState=null,n)}return s?(i=zs(e,t,i.children,i.fallback,n),s=t.child,o=e.child.memoizedState,s.memoizedState=null===o?ks(n):Bs(o,n),s.childLanes=e.childLanes&~n,t.memoizedState=Is,i):(n=Os(e,t,i.children,n),t.memoizedState=null,n)}function Ns(e,t){return(t=Bc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Os(e,t,n,r){var i=e.child;return e=i.sibling,n=Dc(i,{mode:"visible",children:n}),0==(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function zs(e,t,n,r,i){var a=t.mode,o=(e=e.child).sibling,s={mode:"hidden",children:n};return 0==(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=s,t.deletions=null):(n=Dc(e,s)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=Dc(o,r):(r=kc(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Us(e,t,n,r){return null!==r&&Ha(r),Xa(t,e.child,null,n),(e=Ns(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Hs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),$i(e.return,t,n)}function Gs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Vs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(ws(e,t,r.children,n),0!=(2&(r=ro.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Hs(e,n,t);else if(19===e.tag)Hs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(ro,r),0==(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===io(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Gs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===io(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Gs(t,!0,n,null,a);break;case"together":Gs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function js(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Il|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ws(e,t){switch(Ra(t),t.tag){case 1:return Di(t.type)&&Ii(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return eo(),Ai(Ri),Ai(Ti),oo(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return no(t),null;case 13:if(Ai(ro),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));Ua()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ai(ro),null;case 4:return eo(),null;case 10:return Ji(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}var Xs=!1,qs=!1,Ys="function"==typeof WeakSet?WeakSet:Set,Zs=null;function Js(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){Mc(e,t,n)}else n.current=null}function $s(e,t,n){try{n()}catch(n){Mc(e,t,n)}}var Ks=!1;function Qs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&$s(t,n,a)}i=i.next}while(i!==r)}}function el(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function tl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function nl(e){var t=e.alternate;null!==t&&(e.alternate=null,nl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[mi],delete t[gi],delete t[vi]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rl(e){return 5===e.tag||3===e.tag||4===e.tag}function il(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||rl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function al(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Qr));else if(4!==r&&null!==(e=e.child))for(al(e,t,n),e=e.sibling;null!==e;)al(e,t,n),e=e.sibling}function ol(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ol(e,t,n),e=e.sibling;null!==e;)ol(e,t,n),e=e.sibling}var sl=null,ll=!1;function cl(e,t,n){for(n=n.child;null!==n;)ul(e,t,n),n=n.sibling}function ul(e,t,n){if(at&&"function"==typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(e){}switch(n.tag){case 5:qs||Js(n,t);case 6:var r=sl,i=ll;sl=null,cl(e,t,n),ll=i,null!==(sl=r)&&(ll?(e=sl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):sl.removeChild(n.stateNode));break;case 18:null!==sl&&(ll?(e=sl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Gt(e)):li(sl,n.stateNode));break;case 4:r=sl,i=ll,sl=n.stateNode.containerInfo,ll=!0,cl(e,t,n),sl=r,ll=i;break;case 0:case 11:case 14:case 15:if(!qs&&null!==(r=n.updateQueue)&&null!==(r=r.lastEffect)){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!=(2&a)||0!=(4&a))&&$s(n,t,o),i=i.next}while(i!==r)}cl(e,t,n);break;case 1:if(!qs&&(Js(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(e){Mc(n,t,e)}cl(e,t,n);break;case 21:cl(e,t,n);break;case 22:1&n.mode?(qs=(r=qs)||null!==n.memoizedState,cl(e,t,n),qs=r):cl(e,t,n);break;default:cl(e,t,n)}}function dl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ys),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function hl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:sl=l.stateNode,ll=!1;break e;case 3:case 4:sl=l.stateNode.containerInfo,ll=!0;break e}l=l.return}if(null===sl)throw Error(a(160));ul(o,s,i),sl=null,ll=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(e){Mc(i,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)fl(t,e),t=t.sibling}function fl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(hl(t,e),pl(e),4&r){try{Qs(3,e,e.return),el(3,e)}catch(t){Mc(e,e.return,t)}try{Qs(5,e,e.return)}catch(t){Mc(e,e.return,t)}}break;case 1:hl(t,e),pl(e),512&r&&null!==n&&Js(n,n.return);break;case 5:if(hl(t,e),pl(e),512&r&&null!==n&&Js(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(t){Mc(e,e.return,t)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&$(i,o),be(l,s);var u=be(l,o);for(s=0;s<c.length;s+=2){var d=c[s],h=c[s+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":K(i,o);break;case"textarea":ae(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(t){Mc(e,e.return,t)}}break;case 6:if(hl(t,e),pl(e),4&r){if(null===e.stateNode)throw Error(a(162));u=e.stateNode,d=e.memoizedProps;try{u.nodeValue=d}catch(t){Mc(e,e.return,t)}}break;case 3:if(hl(t,e),pl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Gt(t.containerInfo)}catch(t){Mc(e,e.return,t)}break;case 4:default:hl(t,e),pl(e);break;case 13:hl(t,e),pl(e),8192&(u=e.child).flags&&null!==u.memoizedState&&(null===u.alternate||null===u.alternate.memoizedState)&&(Ol=$e()),4&r&&dl(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(qs=(d=qs)||u,hl(t,e),qs=d):hl(t,e),pl(e),8192&r){d=null!==e.memoizedState;e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,d?"function"==typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=f.stateNode,s=null!=(c=f.memoizedProps.style)&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",s))}catch(t){Mc(e,e.return,t)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(t){Mc(e,e.return,t)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}if(d&&!u&&0!=(1&e.mode))for(Zs=e,e=e.child;null!==e;){for(u=Zs=e;null!==Zs;){switch(h=(d=Zs).child,d.tag){case 0:case 11:case 14:case 15:Qs(4,d,d.return);break;case 1:if(Js(d,d.return),"function"==typeof(o=d.stateNode).componentWillUnmount){f=d,p=d.return;try{i=f,o.props=i.memoizedProps,o.state=i.memoizedState,o.componentWillUnmount()}catch(e){Mc(f,p,e)}}break;case 5:Js(d,d.return);break;case 22:if(null!==d.memoizedState){yl(u);continue}}null!==h?(h.return=d,Zs=h):yl(u)}e=e.sibling}}break;case 19:hl(t,e),pl(e),4&r&&dl(e);case 21:}}function pl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(rl(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ol(e,il(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;al(e,il(e),o);break;default:throw Error(a(161))}}catch(t){Mc(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ml(e,t,n){Zs=e,gl(e,t,n)}function gl(e,t,n){for(var r=0!=(1&e.mode);null!==Zs;){var i=Zs,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Xs;if(!o){var s=i.alternate,l=null!==s&&null!==s.memoizedState||qs;s=Xs;var c=qs;if(Xs=o,(qs=l)&&!c)for(Zs=i;null!==Zs;)l=(o=Zs).child,22===o.tag&&null!==o.memoizedState?bl(i):null!==l?(l.return=o,Zs=l):bl(i);for(;null!==a;)Zs=a,gl(a,t,n),a=a.sibling;Zs=i,Xs=s,qs=c}vl(e)}else 0!=(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zs=a):vl(e)}}function vl(e){for(;null!==Zs;){var t=Zs;if(0!=(8772&t.flags)){var n=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:qs||el(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!qs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ji(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ca(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ca(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Gt(h)}}}break;default:throw Error(a(163))}qs||512&t.flags&&tl(t)}catch(e){Mc(t,t.return,e)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function yl(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function bl(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{el(4,t)}catch(e){Mc(t,n,e)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(e){Mc(t,i,e)}}var a=t.return;try{tl(t)}catch(e){Mc(t,a,e)}break;case 5:var o=t.return;try{tl(t)}catch(e){Mc(t,o,e)}}}catch(e){Mc(t,t.return,e)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var xl,_l=Math.ceil,wl=x.ReactCurrentDispatcher,Ml=x.ReactCurrentOwner,Sl=x.ReactCurrentBatchConfig,Al=0,El=null,Cl=null,Tl=0,Rl=0,Pl=Si(0),Ll=0,Dl=null,Il=0,kl=0,Bl=0,Fl=null,Nl=null,Ol=0,zl=1/0,Ul=null,Hl=!1,Gl=null,Vl=null,jl=!1,Wl=null,Xl=0,ql=0,Yl=null,Zl=-1,Jl=0;function $l(){return 0!=(6&Al)?$e():-1!==Zl?Zl:Zl=$e()}function Kl(e){return 0==(1&e.mode)?1:0!=(2&Al)&&0!==Tl?Tl&-Tl:null!==Vi.transition?(0===Jl&&(Jl=mt()),Jl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function Ql(e,t,n){if(50<ql)throw ql=0,Yl=null,Error(a(185));var r=ec(e,t);return null===r?null:(vt(r,t,n),0!=(2&Al)&&r===El||(r===El&&(0==(2&Al)&&(kl|=t),4===Ll&&oc(r,Tl)),nc(r,n),1===t&&0===Al&&0==(1&e.mode)&&(zl=$e()+500,zi&&Gi())),r)}function ec(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function tc(e){return(null!==El||null!==ea)&&0!=(1&e.mode)&&0==(2&Al)}function nc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,l=i[o];-1===l?0!=(s&n)&&0==(s&r)||(i[o]=ft(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ht(e,e===El?Tl:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){zi=!0,Hi(e)}(sc.bind(null,e)):Hi(sc.bind(null,e)),oi((function(){0===Al&&Gi()})),n=null;else{switch(xt(r)){case 1:n=Qe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Tc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Zl=-1,Jl=0,0!=(6&Al))throw Error(a(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===El?Tl:0);if(0===r)return null;if(0!=(30&r)||0!=(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Al;Al|=2;var o=fc();for(El===e&&Tl===t||(Ul=null,zl=$e()+500,dc(e,t));;)try{vc();break}catch(t){hc(e,t)}Zi(),wl.current=o,Al=i,null!==Cl?t=0:(El=null,Tl=0,t=Ll)}if(0!==t){if(2===t&&0!==(i=pt(e))&&(r=i,t=ic(e,i)),1===t)throw n=Dl,dc(e,0),oc(e,r),nc(e,$e()),n;if(6===t)oc(e,r);else{if(i=e.current.alternate,0==(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&0!==(o=pt(e))&&(r=o,t=ic(e,o)),1===t))throw n=Dl,dc(e,0),oc(e,r),nc(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:xc(e,Nl,Ul);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Ol+500-$e())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){$l(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,Nl,Ul),t);break}xc(e,Nl,Ul);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_l(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,Nl,Ul),r);break}xc(e,Nl,Ul);break;default:throw Error(a(329))}}}return nc(e,$e()),e.callbackNode===n?rc.bind(null,e):null}function ic(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Nl,Nl=n,null!==t&&ac(t)),e}function ac(e){null===Nl?Nl=e:Nl.push.apply(Nl,e)}function oc(e,t){for(t&=~Bl,t&=~kl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!=(6&Al))throw Error(a(327));_c();var t=ht(e,0);if(0==(1&t))return nc(e,$e()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Dl,dc(e,0),oc(e,t),nc(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Nl,Ul),nc(e,$e()),null}function lc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(zl=$e()+500,zi&&Gi())}}function cc(e){null!==Wl&&0===Wl.tag&&0==(6&Al)&&_c();var t=Al;Al|=1;var n=Sl.transition,r=bt;try{if(Sl.transition=null,bt=1,e)return e()}finally{bt=r,Sl.transition=n,0==(6&(Al=t))&&Gi()}}function uc(){Rl=Pl.current,Ai(Pl)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Cl)for(n=Cl.return;null!==n;){var r=n;switch(Ra(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Ii();break;case 3:eo(),Ai(Ri),Ai(Ti),oo();break;case 5:no(r);break;case 4:eo();break;case 13:case 19:Ai(ro);break;case 10:Ji(r.type._context);break;case 22:case 23:uc()}n=n.return}if(El=e,Cl=e=Dc(e.current,null),Tl=Rl=t,Ll=0,Dl=null,Bl=kl=Il=0,Nl=Fl=null,null!==ea){for(t=0;t<ea.length;t++)if(null!==(r=(n=ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}ea=null}return e}function hc(e,t){for(;;){var n=Cl;try{if(Zi(),so.current=ns,po){for(var r=uo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}po=!1}if(co=0,fo=ho=uo=null,mo=!1,go=0,Ml.current=null,null===n||null===n.return){Ll=1,Dl=t,Cl=null;break}e:{var o=e,s=n.return,l=n,c=t;if(t=Tl,l.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var u=c,d=l,h=d.tag;if(0==(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ms(s);if(null!==p){p.flags&=-257,gs(p,s,l,0,t),1&p.mode&&ps(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0==(1&t)){ps(o,u,t),pc();break e}c=Error(a(426))}else if(Da&&1&l.mode){var v=ms(s);if(null!==v){0==(65536&v.flags)&&(v.flags|=256),gs(v,s,l,0,t),Ha(c);break e}}o=c,4!==Ll&&(Ll=2),null===Fl?Fl=[o]:Fl.push(o),c=os(c,l),l=s;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t,sa(l,hs(0,c,t));break e;case 1:o=c;var y=l.type,b=l.stateNode;if(0==(128&l.flags)&&("function"==typeof y.getDerivedStateFromError||null!==b&&"function"==typeof b.componentDidCatch&&(null===Vl||!Vl.has(b)))){l.flags|=65536,t&=-t,l.lanes|=t,sa(l,fs(l,o,t));break e}}l=l.return}while(null!==l)}bc(n)}catch(e){t=e,Cl===n&&null!==n&&(Cl=n=n.return);continue}break}}function fc(){var e=wl.current;return wl.current=ns,null===e?ns:e}function pc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===El||0==(268435455&Il)&&0==(268435455&kl)||oc(El,Tl)}function mc(e,t){var n=Al;Al|=2;var r=fc();for(El===e&&Tl===t||(Ul=null,dc(e,t));;)try{gc();break}catch(t){hc(e,t)}if(Zi(),Al=n,wl.current=r,null!==Cl)throw Error(a(261));return El=null,Tl=0,Ll}function gc(){for(;null!==Cl;)yc(Cl)}function vc(){for(;null!==Cl&&!Ze();)yc(Cl)}function yc(e){var t=xl(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?bc(e):Cl=t,Ml.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(n=bs(n,t,Rl)))return void(Cl=n)}else{if(null!==(n=Ws(n,t)))return n.flags&=32767,void(Cl=n);if(null===e)return Ll=6,void(Cl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Cl=t);Cl=t=e}while(null!==t);0===Ll&&(Ll=5)}function xc(e,t,n){var r=bt,i=Sl.transition;try{Sl.transition=null,bt=1,function(e,t,n,r){do{_c()}while(null!==Wl);if(0!=(6&Al))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===El&&(Cl=El=null,Tl=0),0==(2064&n.subtreeFlags)&&0==(2064&n.flags)||jl||(jl=!0,Tc(tt,(function(){return _c(),null}))),o=0!=(15990&n.flags),0!=(15990&n.subtreeFlags)||o){o=Sl.transition,Sl.transition=null;var s=bt;bt=1;var l=Al;Al|=4,Ml.current=null,function(e,t){if(ei=jt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(e){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=s+i),h!==o||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=s),f===o&&++d===r&&(c=s),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},jt=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var m=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:ji(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;if(1===x.nodeType)x.textContent="";else if(9===x.nodeType){var _=x.body;null!=_&&(_.textContent="")}break;default:throw Error(a(163))}}catch(e){Mc(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}m=Ks,Ks=!1}(e,n),fl(n,e),pr(ti),jt=!!ei,ti=ei=null,e.current=n,ml(n,e,i),Je(),Al=l,bt=s,Sl.transition=o}else e.current=n;if(jl&&(jl=!1,Wl=e,Xl=i),0===(o=e.pendingLanes)&&(Vl=null),function(e){if(at&&"function"==typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128==(128&e.current.flags))}catch(e){}}(n.stateNode),nc(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r(t[n]);if(Hl)throw Hl=!1,e=Gl,Gl=null,e;0!=(1&Xl)&&0!==e.tag&&_c(),0!=(1&(o=e.pendingLanes))?e===Yl?ql++:(ql=0,Yl=e):ql=0,Gi()}(e,t,n,r)}finally{Sl.transition=i,bt=r}return null}function _c(){if(null!==Wl){var e=xt(Xl),t=Sl.transition,n=bt;try{if(Sl.transition=null,bt=16>e?16:e,null===Wl)var r=!1;else{if(e=Wl,Wl=null,Xl=0,0!=(6&Al))throw Error(a(331));var i=Al;for(Al|=4,Zs=e.current;null!==Zs;){var o=Zs,s=o.child;if(0!=(16&Zs.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Zs=u;null!==Zs;){var d=Zs;switch(d.tag){case 0:case 11:case 15:Qs(8,d,o)}var h=d.child;if(null!==h)h.return=d,Zs=h;else for(;null!==Zs;){var f=(d=Zs).sibling,p=d.return;if(nl(d),d===u){Zs=null;break}if(null!==f){f.return=p,Zs=f;break}Zs=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Zs=o}}if(0!=(2064&o.subtreeFlags)&&null!==s)s.return=o,Zs=s;else e:for(;null!==Zs;){if(0!=(2048&(o=Zs).flags))switch(o.tag){case 0:case 11:case 15:Qs(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Zs=y;break e}Zs=o.return}}var b=e.current;for(Zs=b;null!==Zs;){var x=(s=Zs).child;if(0!=(2064&s.subtreeFlags)&&null!==x)x.return=s,Zs=x;else e:for(s=b;null!==Zs;){if(0!=(2048&(l=Zs).flags))try{switch(l.tag){case 0:case 11:case 15:el(9,l)}}catch(e){Mc(l,l.return,e)}if(l===s){Zs=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Zs=_;break e}Zs=l.return}}if(Al=i,Gi(),at&&"function"==typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(e){}r=!0}return r}finally{bt=n,Sl.transition=t}}return!1}function wc(e,t,n){aa(e,t=hs(0,t=os(n,t),1)),t=$l(),null!==(e=ec(e,1))&&(vt(e,1,t),nc(e,t))}function Mc(e,t,n){if(3===e.tag)wc(e,e,n);else for(;null!==t;){if(3===t.tag){wc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Vl||!Vl.has(r))){aa(t,e=fs(t,e=os(n,e),1)),e=$l(),null!==(t=ec(t,1))&&(vt(t,1,e),nc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=$l(),e.pingedLanes|=e.suspendedLanes&n,El===e&&(Tl&n)===n&&(4===Ll||3===Ll&&(130023424&Tl)===Tl&&500>$e()-Ol?dc(e,0):Bl|=n),nc(e,t)}function Ac(e,t){0===t&&(0==(1&e.mode)?t=1:(t=ut,0==(130023424&(ut<<=1))&&(ut=4194304)));var n=$l();null!==(e=ec(e,t))&&(vt(e,t,n),nc(e,n))}function Ec(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ac(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ac(e,n)}function Tc(e,t){return qe(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Rc(e,t,n,r)}function Lc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ic(e,t,n,r,i,o){var s=2;if(r=e,"function"==typeof e)Lc(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case M:return kc(n.children,i,o,t);case S:s=8,i|=8;break;case A:return(e=Pc(12,n,t,2|i)).elementType=A,e.lanes=o,e;case R:return(e=Pc(13,n,t,i)).elementType=R,e.lanes=o,e;case P:return(e=Pc(19,n,t,i)).elementType=P,e.lanes=o,e;case I:return Bc(n,i,o,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case E:s=10;break e;case C:s=9;break e;case T:s=11;break e;case L:s=14;break e;case D:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pc(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function kc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Bc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=I,e.lanes=n,e.stateNode={},e}function Fc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Nc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Oc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,a,o,s,l){return e=new Oc(e,t,n,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},na(a),e}function Uc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Hc(e){if(!e)return Ci;e:{if(Ge(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Di(n))return Bi(e,n,t)}return t}function Gc(e,t,n,r,i,a,o,s,l){return(e=zc(n,r,!0,e,0,a,0,s,l)).context=Hc(null),n=e.current,(a=ia(r=$l(),i=Kl(n))).callback=null!=t?t:null,aa(n,a),e.current.lanes=i,vt(e,i,r),nc(e,r),e}function Vc(e,t,n,r){var i=t.current,a=$l(),o=Kl(i);return n=Hc(n),null===t.context?t.context=n:t.pendingContext=n,(t=ia(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),aa(i,t),null!==(e=Ql(i,o,a))&&oa(e,i,o),o}function jc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Xc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}xl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ri.current)_s=!0;else{if(0==(e.lanes&n)&&0==(128&t.flags))return _s=!1,function(e,t,n){switch(t.tag){case 3:Ls(t),Ua();break;case 5:to(t);break;case 1:Di(t.type)&&Fi(t);break;case 4:Qa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(Wi,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(ro,1&ro.current),t.flags|=128,null):0!=(n&t.child.childLanes)?Fs(e,t,n):(Ei(ro,1&ro.current),null!==(e=js(e,t,n))?e.sibling:null);Ei(ro,1&ro.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(128&e.flags)){if(r)return Vs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(ro,ro.current),r)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return js(e,t,n)}(e,t,n);_s=0!=(131072&e.flags)}else _s=!1,Da&&0!=(1048576&t.flags)&&Ca(t,xa,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=Li(t,Ti.current);Ki(t,n),i=xo(null,t,r,e,i,n);var o=_o();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(o=!0,Fi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,na(t),i.updater=ha,t.stateNode=i,i._reactInternals=t,ga(t,r,e,n),t=Ps(null,t,r,!0,o,n)):(t.tag=0,Da&&o&&Ta(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return Lc(e)?1:0;if(null!=e){if((e=e.$$typeof)===T)return 11;if(e===L)return 14}return 2}(r),e=ji(r,e),i){case 0:t=Ts(null,t,r,e,n);break e;case 1:t=Rs(null,t,r,e,n);break e;case 11:t=Ms(null,t,r,e,n);break e;case 14:t=Ss(null,t,r,ji(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:ji(r,i),n);case 1:return r=t.type,i=t.pendingProps,Rs(e,t,r,i=t.elementType===r?i:ji(r,i),n);case 3:e:{if(Ls(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,ra(e,t),la(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ds(e,t,r,n,i=Error(a(423)));break e}if(r!==i){t=Ds(e,t,r,n,i=Error(a(424)));break e}for(La=ci(t.stateNode.containerInfo.firstChild),Pa=t,Da=!0,Ia=null,n=qa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Ua(),r===i){t=js(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return to(t),null===e&&Na(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Cs(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&Na(t),null;case 13:return Fs(e,t,n);case 4:return Qa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xa(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ms(e,t,r,i=t.elementType===r?i:ji(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ei(Wi,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ri.current){t=js(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=ia(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),$i(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),$i(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ki(t,n),r=r(i=Qi(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=ji(r=t.type,t.pendingProps),Ss(e,t,r,i=ji(r.type,i),n);case 15:return As(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ji(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Di(r)?(e=!0,Fi(t)):e=!1,Ki(t,n),pa(t,r,i),ga(t,r,i,n),Ps(null,t,r,!0,e,n);case 19:return Vs(e,t,n);case 22:return Es(e,t,n)}throw Error(a(156,t.tag))};var qc="function"==typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Zc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Kc(){}function Qc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"==typeof i){var s=i;i=function(){var e=jc(o);s.call(e)}}Vc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"==typeof r){var a=r;r=function(){var e=jc(o);a.call(e)}}var o=Gc(t,r,e,0,null,!1,0,"",Kc);return e._reactRootContainer=o,e[pi]=o.current,Gr(8===e.nodeType?e.parentNode:e),cc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof r){var s=r;r=function(){var e=jc(l);s.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Kc);return e._reactRootContainer=l,e[pi]=l.current,Gr(8===e.nodeType?e.parentNode:e),cc((function(){Vc(t,l,n,r)})),l}(n,t,e,i,r);return jc(o)}Zc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Vc(e,t,null,null)},Zc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cc((function(){Vc(null,e,null,null)})),t[pi]=null}},Zc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<It.length&&0!==t&&t<It[n].priority;n++);It.splice(n,0,e),0===n&&Nt(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),nc(t,$e()),0==(6&Al)&&(zl=$e()+500,Gi()))}break;case 13:var r=$l();cc((function(){return Ql(e,1,r)})),Xc(e,1)}},wt=function(e){13===e.tag&&(Ql(e,134217728,$l()),Xc(e,134217728))},Mt=function(e){if(13===e.tag){var t=$l(),n=Kl(e);Ql(e,n,t),Xc(e,n)}},St=function(){return bt},At=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},we=function(e,t,n){switch(t){case"input":if(K(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(a(90));q(r),K(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=lc,Re=cc;var eu={usingClientEntryPoint:!1,Events:[bi,xi,_i,Ee,Ce,lc]},tu={findFiberByHostInstance:yi,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),at=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return Uc(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var n=!1,r="",i=qc;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Gr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return cc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(a(200));return Qc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=qc;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Gc(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,Gr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Zc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(a(200));return Qc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(a(40));return!!e._reactRootContainer&&(cc((function(){Qc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Qc(e,t,n,!1,r)},t.version="18.1.0-next-22edb9f77-20220426"},745:(e,t,n)=>{"use strict";var r=n(3935);t.s=r.createRoot,r.hydrateRoot},3935:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(4448)},9590:e=>{var t="undefined"!=typeof Element,n="function"==typeof Map,r="function"==typeof Set,i="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function a(e,o){if(e===o)return!0;if(e&&o&&"object"==typeof e&&"object"==typeof o){if(e.constructor!==o.constructor)return!1;var s,l,c,u;if(Array.isArray(e)){if((s=e.length)!=o.length)return!1;for(l=s;0!=l--;)if(!a(e[l],o[l]))return!1;return!0}if(n&&e instanceof Map&&o instanceof Map){if(e.size!==o.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!o.has(l.value[0]))return!1;for(u=e.entries();!(l=u.next()).done;)if(!a(l.value[1],o.get(l.value[0])))return!1;return!0}if(r&&e instanceof Set&&o instanceof Set){if(e.size!==o.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!o.has(l.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(o)){if((s=e.length)!=o.length)return!1;for(l=s;0!=l--;)if(e[l]!==o[l])return!1;return!0}if(e.constructor===RegExp)return e.source===o.source&&e.flags===o.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===o.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===o.toString();if((s=(c=Object.keys(e)).length)!==Object.keys(o).length)return!1;for(l=s;0!=l--;)if(!Object.prototype.hasOwnProperty.call(o,c[l]))return!1;if(t&&e instanceof Element)return!1;for(l=s;0!=l--;)if(("_owner"!==c[l]&&"__v"!==c[l]&&"__o"!==c[l]||!e.$$typeof)&&!a(e[c[l]],o[c[l]]))return!1;return!0}return e!=e&&o!=o}e.exports=function(e,t){try{return a(e,t)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}},9921:(e,t)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function _(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case d:case a:case s:case o:case f:return e;default:switch(e=e&&e.$$typeof){case c:case h:case g:case m:case l:return e;default:return t}}case i:return t}}}function w(e){return _(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=s,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return w(e)||_(e)===u},t.isConcurrentMode=w,t.isContextConsumer=function(e){return _(e)===c},t.isContextProvider=function(e){return _(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return _(e)===h},t.isFragment=function(e){return _(e)===a},t.isLazy=function(e){return _(e)===g},t.isMemo=function(e){return _(e)===m},t.isPortal=function(e){return _(e)===i},t.isProfiler=function(e){return _(e)===s},t.isStrictMode=function(e){return _(e)===o},t.isSuspense=function(e){return _(e)===f},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===d||e===s||e===o||e===f||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===h||e.$$typeof===y||e.$$typeof===b||e.$$typeof===x||e.$$typeof===v)},t.typeOf=_},9864:(e,t,n)=>{"use strict";e.exports=n(9921)},6511:(e,t)=>{"use strict";t.ConcurrentRoot=1,t.ContinuousEventPriority=4,t.DefaultEventPriority=16,t.DiscreteEventPriority=1},7287:(e,t,n)=>{e.exports=function(e){var t={},r=n(7294),i=n(373),a=Object.assign;function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),p=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var x=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var _=Symbol.iterator;function w(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=_&&e[_]||e["@@iterator"])?e:null}function M(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case u:return"Fragment";case c:return"Portal";case h:return"Profiler";case d:return"StrictMode";case g:return"Suspense";case v:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case p:return(e.displayName||"Context")+".Consumer";case f:return(e._context.displayName||"Context")+".Provider";case m:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case y:return null!==(t=e.displayName||null)?t:M(e.type)||"Memo";case b:t=e._payload,e=e._init;try{return M(e(t))}catch(e){}}return null}function S(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M(t);case 8:return t===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function A(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function E(e){if(A(e)!==e)throw Error(o(188))}function C(e){var t=e.alternate;if(!t){if(null===(t=A(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return E(i),e;if(a===r)return E(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}function T(e){return null!==(e=C(e))?R(e):null}function R(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=R(e);if(null!==t)return t;e=e.sibling}return null}function P(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){if(4!==e.tag){var t=P(e);if(null!==t)return t}e=e.sibling}return null}var L,D=Array.isArray,I=e.getPublicInstance,k=e.getRootHostContext,B=e.getChildHostContext,F=e.prepareForCommit,N=e.resetAfterCommit,O=e.createInstance,z=e.appendInitialChild,U=e.finalizeInitialChildren,H=e.prepareUpdate,G=e.shouldSetTextContent,V=e.createTextInstance,j=e.scheduleTimeout,W=e.cancelTimeout,X=e.noTimeout,q=e.isPrimaryRenderer,Y=e.supportsMutation,Z=e.supportsPersistence,J=e.supportsHydration,$=e.getInstanceFromNode,K=e.preparePortalMount,Q=e.getCurrentEventPriority,ee=e.detachDeletedInstance,te=e.supportsMicrotasks,ne=e.scheduleMicrotask,re=e.supportsTestSelectors,ie=e.findFiberRoot,ae=e.getBoundingRect,oe=e.getTextContent,se=e.isHiddenSubtree,le=e.matchAccessibilityRole,ce=e.setFocusIfFocusable,ue=e.setupIntersectionObserver,de=e.appendChild,he=e.appendChildToContainer,fe=e.commitTextUpdate,pe=e.commitMount,me=e.commitUpdate,ge=e.insertBefore,ve=e.insertInContainerBefore,ye=e.removeChild,be=e.removeChildFromContainer,xe=e.resetTextContent,_e=e.hideInstance,we=e.hideTextInstance,Me=e.unhideInstance,Se=e.unhideTextInstance,Ae=e.clearContainer,Ee=e.cloneInstance,Ce=e.createContainerChildSet,Te=e.appendChildToContainerChildSet,Re=e.finalizeContainerChildren,Pe=e.replaceContainerChildren,Le=e.cloneHiddenInstance,De=e.cloneHiddenTextInstance,Ie=e.canHydrateInstance,ke=e.canHydrateTextInstance,Be=e.canHydrateSuspenseInstance,Fe=e.isSuspenseInstancePending,Ne=e.isSuspenseInstanceFallback,Oe=e.registerSuspenseInstanceRetry,ze=e.getNextHydratableSibling,Ue=e.getFirstHydratableChild,He=e.getFirstHydratableChildWithinContainer,Ge=e.getFirstHydratableChildWithinSuspenseInstance,Ve=e.hydrateInstance,je=e.hydrateTextInstance,We=e.hydrateSuspenseInstance,Xe=e.getNextHydratableInstanceAfterSuspenseInstance,qe=e.commitHydratedContainer,Ye=e.commitHydratedSuspenseInstance,Ze=e.clearSuspenseBoundary,Je=e.clearSuspenseBoundaryFromContainer,$e=e.shouldDeleteUnhydratedTailInstances,Ke=e.didNotMatchHydratedContainerTextInstance,Qe=e.didNotMatchHydratedTextInstance;function et(e){if(void 0===L)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var tt=!1;function nt(e,t){if(!e||tt)return"";tt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var i=t.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{tt=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?et(e):""}var rt=Object.prototype.hasOwnProperty,it=[],at=-1;function ot(e){return{current:e}}function st(e){0>at||(e.current=it[at],it[at]=null,at--)}function lt(e,t){at++,it[at]=e.current,e.current=t}var ct={},ut=ot(ct),dt=ot(!1),ht=ct;function ft(e,t){var n=e.type.contextTypes;if(!n)return ct;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function pt(e){return null!=e.childContextTypes}function mt(){st(dt),st(ut)}function gt(e,t,n){if(ut.current!==ct)throw Error(o(168));lt(ut,t),lt(dt,n)}function vt(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,S(e)||"Unknown",i));return a({},n,r)}function yt(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ct,ht=ut.current,lt(ut,e),lt(dt,dt.current),!0}function bt(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=vt(e,t,ht),r.__reactInternalMemoizedMergedChildContext=e,st(dt),st(ut),lt(ut,e)):st(dt),lt(dt,n)}var xt=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(_t(e)/wt|0)|0},_t=Math.log,wt=Math.LN2,Mt=64,St=4194304;function At(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Et(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=At(s):0!=(a&=o)&&(r=At(a))}else 0!=(o=n&~i)?r=At(o):0!==a&&(r=At(a));if(0===r)return 0;if(0!==t&&t!==r&&0==(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!=(4194240&a)))return t;if(0!=(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-xt(t)),r|=e[n],t&=~i;return r}function Ct(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Tt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Rt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Pt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-xt(t)]=n}function Lt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-xt(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Dt=0;function It(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var kt=i.unstable_scheduleCallback,Bt=i.unstable_cancelCallback,Ft=i.unstable_shouldYield,Nt=i.unstable_requestPaint,Ot=i.unstable_now,zt=i.unstable_ImmediatePriority,Ut=i.unstable_UserBlockingPriority,Ht=i.unstable_NormalPriority,Gt=i.unstable_IdlePriority,Vt=null,jt=null,Wt="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Xt=null,qt=!1,Yt=!1;function Zt(e){null===Xt?Xt=[e]:Xt.push(e)}function Jt(){if(!Yt&&null!==Xt){Yt=!0;var e=0,t=Dt;try{var n=Xt;for(Dt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Xt=null,qt=!1}catch(t){throw null!==Xt&&(Xt=Xt.slice(e+1)),kt(zt,Jt),t}finally{Dt=t,Yt=!1}}return null}var $t=s.ReactCurrentBatchConfig;function Kt(e,t){if(Wt(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!rt.call(t,i)||!Wt(e[i],t[i]))return!1}return!0}function Qt(e){switch(e.tag){case 5:return et(e.type);case 16:return et("Lazy");case 13:return et("Suspense");case 19:return et("SuspenseList");case 0:case 2:case 15:return nt(e.type,!1);case 11:return nt(e.type.render,!1);case 1:return nt(e.type,!0);default:return""}}function en(e,t){if(e&&e.defaultProps){for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var tn=ot(null),nn=null,rn=null,an=null;function on(){an=rn=nn=null}function sn(e,t,n){q?(lt(tn,t._currentValue),t._currentValue=n):(lt(tn,t._currentValue2),t._currentValue2=n)}function ln(e){var t=tn.current;st(tn),q?e._currentValue=t:e._currentValue2=t}function cn(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function un(e,t){nn=e,an=rn=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(Fi=!0),e.firstContext=null)}function dn(e){var t=q?e._currentValue:e._currentValue2;if(an!==e)if(e={context:e,memoizedValue:t,next:null},null===rn){if(null===nn)throw Error(o(308));rn=e,nn.dependencies={lanes:0,firstContext:e}}else rn=rn.next=e;return t}var hn=null,fn=!1;function pn(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mn(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function gn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function vn(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==Ya&&0!=(1&e.mode)&&0==(2&qa)?(null===(e=n.interleaved)?(t.next=t,null===hn?hn=[n]:hn.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function yn(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Lt(e,n)}}function bn(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function xn(e,t,n,r){var i=e.updateQueue;fn=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(null!==l){i.shared.pending=null;var c=l,u=c.next;c.next=null,null===s?o=u:s.next=u,s=c;var d=e.alternate;null!==d&&(l=(d=d.updateQueue).lastBaseUpdate)!==s&&(null===l?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c)}if(null!==o){var h=i.baseState;for(s=0,d=u=c=null,l=o;;){var f=l.lane,p=l.eventTime;if((r&f)===f){null!==d&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=e,g=l;switch(f=t,p=n,g.tag){case 1:if("function"==typeof(m=g.payload)){h=m.call(p,h,f);break e}h=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(f="function"==typeof(m=g.payload)?m.call(p,h,f):m))break e;h=a({},h,f);break e;case 2:fn=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===d?(u=d=p,c=h):d=d.next=p,s|=f;if(null===(l=l.next)){if(null===(l=i.shared.pending))break;l=(f=l).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===d&&(c=h),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);to|=s,e.lanes=s,e.memoizedState=h}}function _n(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(o(191,i));i.call(r)}}}var wn=(new r.Component).refs;function Mn(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:a({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Sn={isMounted:function(e){return!!(e=e._reactInternals)&&A(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=_o(),i=wo(e),a=gn(r,i);a.payload=t,null!=n&&(a.callback=n),vn(e,a),null!==(t=Mo(e,i,r))&&yn(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=_o(),i=wo(e),a=gn(r,i);a.tag=1,a.payload=t,null!=n&&(a.callback=n),vn(e,a),null!==(t=Mo(e,i,r))&&yn(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=_o(),r=wo(e),i=gn(n,r);i.tag=2,null!=t&&(i.callback=t),vn(e,i),null!==(t=Mo(e,r,n))&&yn(t,e,r)}};function An(e,t,n,r,i,a,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!(t.prototype&&t.prototype.isPureReactComponent&&Kt(n,r)&&Kt(i,a))}function En(e,t,n){var r=!1,i=ct,a=t.contextType;return"object"==typeof a&&null!==a?a=dn(a):(i=pt(t)?ht:ut.current,a=(r=null!=(r=t.contextTypes))?ft(e,i):ct),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Sn,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Cn(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Sn.enqueueReplaceState(t,t.state,null)}function Tn(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=wn,pn(e);var a=t.contextType;"object"==typeof a&&null!==a?i.context=dn(a):(a=pt(t)?ht:ut.current,i.context=ft(e,a)),i.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(Mn(e,t,a,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Sn.enqueueReplaceState(i,i.state,null),xn(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}var Rn=[],Pn=0,Ln=null,Dn=0,In=[],kn=0,Bn=null,Fn=1,Nn="";function On(e,t){Rn[Pn++]=Dn,Rn[Pn++]=Ln,Ln=e,Dn=t}function zn(e,t,n){In[kn++]=Fn,In[kn++]=Nn,In[kn++]=Bn,Bn=e;var r=Fn;e=Nn;var i=32-xt(r)-1;r&=~(1<<i),n+=1;var a=32-xt(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Fn=1<<32-xt(t)+i|n<<i|r,Nn=a+e}else Fn=1<<a|n<<i|r,Nn=e}function Un(e){null!==e.return&&(On(e,1),zn(e,1,0))}function Hn(e){for(;e===Ln;)Ln=Rn[--Pn],Rn[Pn]=null,Dn=Rn[--Pn],Rn[Pn]=null;for(;e===Bn;)Bn=In[--kn],In[kn]=null,Nn=In[--kn],In[kn]=null,Fn=In[--kn],In[kn]=null}var Gn=null,Vn=null,jn=!1,Wn=!1,Xn=null;function qn(e,t){var n=Ko(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Yn(e,t){switch(e.tag){case 5:return null!==(t=Ie(t,e.type,e.pendingProps))&&(e.stateNode=t,Gn=e,Vn=Ue(t),!0);case 6:return null!==(t=ke(t,e.pendingProps))&&(e.stateNode=t,Gn=e,Vn=null,!0);case 13:if(null!==(t=Be(t))){var n=null!==Bn?{id:Fn,overflow:Nn}:null;return e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ko(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Gn=e,Vn=null,!0}return!1;default:return!1}}function Zn(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function Jn(e){if(jn){var t=Vn;if(t){var n=t;if(!Yn(e,t)){if(Zn(e))throw Error(o(418));t=ze(n);var r=Gn;t&&Yn(e,t)?qn(r,n):(e.flags=-4097&e.flags|2,jn=!1,Gn=e)}}else{if(Zn(e))throw Error(o(418));e.flags=-4097&e.flags|2,jn=!1,Gn=e}}}function $n(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Gn=e}function Kn(e){if(!J||e!==Gn)return!1;if(!jn)return $n(e),jn=!0,!1;if(3!==e.tag&&(5!==e.tag||$e(e.type)&&!G(e.type,e.memoizedProps))){var t=Vn;if(t){if(Zn(e)){for(e=Vn;e;)e=ze(e);throw Error(o(418))}for(;t;)qn(e,t),t=ze(t)}}if($n(e),13===e.tag){if(!J)throw Error(o(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));Vn=Xe(e)}else Vn=Gn?ze(e.stateNode):null;return!0}function Qn(){J&&(Vn=Gn=null,Wn=jn=!1)}function er(e){null===Xn?Xn=[e]:Xn.push(e)}function tr(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;t===wn&&(t=i.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!=typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function nr(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function rr(e){return(0,e._init)(e._payload)}function ir(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=es(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function d(e,t,n,r){return null===t||6!==t.tag?((t=is(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n,r){var a=n.type;return a===u?p(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===b&&rr(a)===t.type)?((r=i(t,n.props)).ref=tr(e,t,n),r.return=e,r):((r=ts(n.type,n.key,n.props,null,e.mode,r)).ref=tr(e,t,n),r.return=e,r)}function f(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=as(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function p(e,t,n,r,a){return null===t||7!==t.tag?((t=ns(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function m(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=is(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case l:return(n=ts(t.type,t.key,t.props,null,e.mode,n)).ref=tr(e,null,t),n.return=e,n;case c:return(t=as(t,e.mode,n)).return=e,t;case b:return m(e,(0,t._init)(t._payload),n)}if(D(t)||w(t))return(t=ns(t,e.mode,n,null)).return=e,t;nr(e,t)}return null}function g(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:d(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case l:return n.key===i?h(e,t,n,r):null;case c:return n.key===i?f(e,t,n,r):null;case b:return g(e,t,(i=n._init)(n._payload),r)}if(D(n)||w(n))return null!==i?null:p(e,t,n,r,null);nr(e,n)}return null}function v(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return d(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case l:return h(t,e=e.get(null===r.key?n:r.key)||null,r,i);case c:return f(t,e=e.get(null===r.key?n:r.key)||null,r,i);case b:return v(e,t,n,(0,r._init)(r._payload),i)}if(D(r)||w(r))return p(t,e=e.get(n)||null,r,i,null);nr(t,r)}return null}function y(i,o,s,l){for(var c=null,u=null,d=o,h=o=0,f=null;null!==d&&h<s.length;h++){d.index>h?(f=d,d=null):f=d.sibling;var p=g(i,d,s[h],l);if(null===p){null===d&&(d=f);break}e&&d&&null===p.alternate&&t(i,d),o=a(p,o,h),null===u?c=p:u.sibling=p,u=p,d=f}if(h===s.length)return n(i,d),jn&&On(i,h),c;if(null===d){for(;h<s.length;h++)null!==(d=m(i,s[h],l))&&(o=a(d,o,h),null===u?c=d:u.sibling=d,u=d);return jn&&On(i,h),c}for(d=r(i,d);h<s.length;h++)null!==(f=v(d,i,h,s[h],l))&&(e&&null!==f.alternate&&d.delete(null===f.key?h:f.key),o=a(f,o,h),null===u?c=f:u.sibling=f,u=f);return e&&d.forEach((function(e){return t(i,e)})),jn&&On(i,h),c}function x(i,s,l,c){var u=w(l);if("function"!=typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,h=s,f=s=0,p=null,y=l.next();null!==h&&!y.done;f++,y=l.next()){h.index>f?(p=h,h=null):p=h.sibling;var b=g(i,h,y.value,c);if(null===b){null===h&&(h=p);break}e&&h&&null===b.alternate&&t(i,h),s=a(b,s,f),null===d?u=b:d.sibling=b,d=b,h=p}if(y.done)return n(i,h),jn&&On(i,f),u;if(null===h){for(;!y.done;f++,y=l.next())null!==(y=m(i,y.value,c))&&(s=a(y,s,f),null===d?u=y:d.sibling=y,d=y);return jn&&On(i,f),u}for(h=r(i,h);!y.done;f++,y=l.next())null!==(y=v(h,i,f,y.value,c))&&(e&&null!==y.alternate&&h.delete(null===y.key?f:y.key),s=a(y,s,f),null===d?u=y:d.sibling=y,d=y);return e&&h.forEach((function(e){return t(i,e)})),jn&&On(i,f),u}return function e(r,a,o,d){if("object"==typeof o&&null!==o&&o.type===u&&null===o.key&&(o=o.props.children),"object"==typeof o&&null!==o){switch(o.$$typeof){case l:e:{for(var h=o.key,f=a;null!==f;){if(f.key===h){if((h=o.type)===u){if(7===f.tag){n(r,f.sibling),(a=i(f,o.props.children)).return=r,r=a;break e}}else if(f.elementType===h||"object"==typeof h&&null!==h&&h.$$typeof===b&&rr(h)===f.type){n(r,f.sibling),(a=i(f,o.props)).ref=tr(r,f,o),a.return=r,r=a;break e}n(r,f);break}t(r,f),f=f.sibling}o.type===u?((a=ns(o.props.children,r.mode,d,o.key)).return=r,r=a):((d=ts(o.type,o.key,o.props,null,r.mode,d)).ref=tr(r,a,o),d.return=r,r=d)}return s(r);case c:e:{for(f=o.key;null!==a;){if(a.key===f){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=as(o,r.mode,d)).return=r,r=a}return s(r);case b:return e(r,a,(f=o._init)(o._payload),d)}if(D(o))return y(r,a,o,d);if(w(o))return x(r,a,o,d);nr(r,o)}return"string"==typeof o&&""!==o||"number"==typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=is(o,r.mode,d)).return=r,r=a),s(r)):n(r,a)}}var ar=ir(!0),or=ir(!1),sr={},lr=ot(sr),cr=ot(sr),ur=ot(sr);function dr(e){if(e===sr)throw Error(o(174));return e}function hr(e,t){lt(ur,t),lt(cr,e),lt(lr,sr),e=k(t),st(lr),lt(lr,e)}function fr(){st(lr),st(cr),st(ur)}function pr(e){var t=dr(ur.current),n=dr(lr.current);n!==(t=B(n,e.type,t))&&(lt(cr,e),lt(lr,t))}function mr(e){cr.current===e&&(st(lr),st(cr))}var gr=ot(0);function vr(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Fe(n)||Ne(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yr=[];function br(){for(var e=0;e<yr.length;e++){var t=yr[e];q?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}yr.length=0}var xr=s.ReactCurrentDispatcher,_r=s.ReactCurrentBatchConfig,wr=0,Mr=null,Sr=null,Ar=null,Er=!1,Cr=!1,Tr=0,Rr=0;function Pr(){throw Error(o(321))}function Lr(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Wt(e[n],t[n]))return!1;return!0}function Dr(e,t,n,r,i,a){if(wr=a,Mr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,xr.current=null===e||null===e.memoizedState?pi:mi,e=n(r,i),Cr){a=0;do{if(Cr=!1,Tr=0,25<=a)throw Error(o(301));a+=1,Ar=Sr=null,t.updateQueue=null,xr.current=gi,e=n(r,i)}while(Cr)}if(xr.current=fi,t=null!==Sr&&null!==Sr.next,wr=0,Ar=Sr=Mr=null,Er=!1,t)throw Error(o(300));return e}function Ir(){var e=0!==Tr;return Tr=0,e}function kr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ar?Mr.memoizedState=Ar=e:Ar=Ar.next=e,Ar}function Br(){if(null===Sr){var e=Mr.alternate;e=null!==e?e.memoizedState:null}else e=Sr.next;var t=null===Ar?Mr.memoizedState:Ar.next;if(null!==t)Ar=t,Sr=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Sr=e).memoizedState,baseState:Sr.baseState,baseQueue:Sr.baseQueue,queue:Sr.queue,next:null},null===Ar?Mr.memoizedState=Ar=e:Ar=Ar.next=e}return Ar}function Fr(e,t){return"function"==typeof t?t(e):t}function Nr(e){var t=Br(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Sr,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=s=null,c=null,u=a;do{var d=u.lane;if((wr&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,s=r):c=c.next=h,Mr.lanes|=d,to|=d}u=u.next}while(null!==u&&u!==a);null===c?s=r:c.next=l,Wt(r,t.memoizedState)||(Fi=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,Mr.lanes|=a,to|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Or(e){var t=Br(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);Wt(a,t.memoizedState)||(Fi=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function zr(){}function Ur(e,t){var n=Mr,r=Br(),i=t(),a=!Wt(r.memoizedState,i);if(a&&(r.memoizedState=i,Fi=!0),r=r.queue,$r(Vr.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==Ar&&1&Ar.memoizedState.tag){if(n.flags|=2048,Xr(9,Gr.bind(null,n,r,i,t),void 0,null),null===Ya)throw Error(o(349));0!=(30&wr)||Hr(n,t,i)}return i}function Hr(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Mr.updateQueue)?(t={lastEffect:null,stores:null},Mr.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Gr(e,t,n,r){t.value=n,t.getSnapshot=r,jr(t)&&Mo(e,1,-1)}function Vr(e,t,n){return n((function(){jr(t)&&Mo(e,1,-1)}))}function jr(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Wt(e,n)}catch(e){return!0}}function Wr(e){var t=kr();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fr,lastRenderedState:e},t.queue=e,e=e.dispatch=li.bind(null,Mr,e),[t.memoizedState,e]}function Xr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Mr.updateQueue)?(t={lastEffect:null,stores:null},Mr.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function qr(){return Br().memoizedState}function Yr(e,t,n,r){var i=kr();Mr.flags|=e,i.memoizedState=Xr(1|t,n,void 0,void 0===r?null:r)}function Zr(e,t,n,r){var i=Br();r=void 0===r?null:r;var a=void 0;if(null!==Sr){var o=Sr.memoizedState;if(a=o.destroy,null!==r&&Lr(r,o.deps))return void(i.memoizedState=Xr(t,n,a,r))}Mr.flags|=e,i.memoizedState=Xr(1|t,n,a,r)}function Jr(e,t){return Yr(8390656,8,e,t)}function $r(e,t){return Zr(2048,8,e,t)}function Kr(e,t){return Zr(4,2,e,t)}function Qr(e,t){return Zr(4,4,e,t)}function ei(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ti(e,t,n){return n=null!=n?n.concat([e]):null,Zr(4,4,ei.bind(null,t,e),n)}function ni(){}function ri(e,t){var n=Br();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Lr(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ii(e,t){var n=Br();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Lr(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ai(e,t){var n=Dt;Dt=0!==n&&4>n?n:4,e(!0);var r=_r.transition;_r.transition={};try{e(!1),t()}finally{Dt=n,_r.transition=r}}function oi(){return Br().memoizedState}function si(e,t,n){var r=wo(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ci(e)?ui(t,n):(di(e,t,n),null!==(e=Mo(e,r,n=_o()))&&hi(e,t,r))}function li(e,t,n){var r=wo(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ci(e))ui(t,i);else{di(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,Wt(s,o))return}catch(e){}null!==(e=Mo(e,r,n=_o()))&&hi(e,t,r)}}function ci(e){var t=e.alternate;return e===Mr||null!==t&&t===Mr}function ui(e,t){Cr=Er=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function di(e,t,n){null!==Ya&&0!=(1&e.mode)&&0==(2&qa)?(null===(e=t.interleaved)?(n.next=n,null===hn?hn=[t]:hn.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function hi(e,t,n){if(0!=(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Lt(e,n)}}var fi={readContext:dn,useCallback:Pr,useContext:Pr,useEffect:Pr,useImperativeHandle:Pr,useInsertionEffect:Pr,useLayoutEffect:Pr,useMemo:Pr,useReducer:Pr,useRef:Pr,useState:Pr,useDebugValue:Pr,useDeferredValue:Pr,useTransition:Pr,useMutableSource:Pr,useSyncExternalStore:Pr,useId:Pr,unstable_isNewReconciler:!1},pi={readContext:dn,useCallback:function(e,t){return kr().memoizedState=[e,void 0===t?null:t],e},useContext:dn,useEffect:Jr,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Yr(4194308,4,ei.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Yr(4194308,4,e,t)},useInsertionEffect:function(e,t){return Yr(4,2,e,t)},useMemo:function(e,t){var n=kr();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=kr();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=si.bind(null,Mr,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},kr().memoizedState=e},useState:Wr,useDebugValue:ni,useDeferredValue:function(e){var t=Wr(e),n=t[0],r=t[1];return Jr((function(){var t=_r.transition;_r.transition={};try{r(e)}finally{_r.transition=t}}),[e]),n},useTransition:function(){var e=Wr(!1),t=e[0];return e=ai.bind(null,e[1]),kr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Mr,i=kr();if(jn){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Ya)throw Error(o(349));0!=(30&wr)||Hr(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Jr(Vr.bind(null,r,a,e),[e]),r.flags|=2048,Xr(9,Gr.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=kr(),t=Ya.identifierPrefix;if(jn){var n=Nn;t=":"+t+"R"+(n=(Fn&~(1<<32-xt(Fn)-1)).toString(32)+n),0<(n=Tr++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Rr++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},mi={readContext:dn,useCallback:ri,useContext:dn,useEffect:$r,useImperativeHandle:ti,useInsertionEffect:Kr,useLayoutEffect:Qr,useMemo:ii,useReducer:Nr,useRef:qr,useState:function(){return Nr(Fr)},useDebugValue:ni,useDeferredValue:function(e){var t=Nr(Fr),n=t[0],r=t[1];return $r((function(){var t=_r.transition;_r.transition={};try{r(e)}finally{_r.transition=t}}),[e]),n},useTransition:function(){return[Nr(Fr)[0],Br().memoizedState]},useMutableSource:zr,useSyncExternalStore:Ur,useId:oi,unstable_isNewReconciler:!1},gi={readContext:dn,useCallback:ri,useContext:dn,useEffect:$r,useImperativeHandle:ti,useInsertionEffect:Kr,useLayoutEffect:Qr,useMemo:ii,useReducer:Or,useRef:qr,useState:function(){return Or(Fr)},useDebugValue:ni,useDeferredValue:function(e){var t=Or(Fr),n=t[0],r=t[1];return $r((function(){var t=_r.transition;_r.transition={};try{r(e)}finally{_r.transition=t}}),[e]),n},useTransition:function(){return[Or(Fr)[0],Br().memoizedState]},useMutableSource:zr,useSyncExternalStore:Ur,useId:oi,unstable_isNewReconciler:!1};function vi(e,t){try{var n="",r=t;do{n+=Qt(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i}}function yi(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}var bi,xi,_i,wi,Mi="function"==typeof WeakMap?WeakMap:Map;function Si(e,t,n){(n=gn(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){uo||(uo=!0,ho=r),yi(0,t)},n}function Ai(e,t,n){(n=gn(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){yi(0,t)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){yi(0,t),"function"!=typeof r&&(null===fo?fo=new Set([this]):fo.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function Ei(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new Mi;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Xo.bind(null,e,t,n),t.then(e,e))}function Ci(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Ti(e,t,n,r,i){return 0==(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=gn(-1,1)).tag=2,vn(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function Ri(e){e.flags|=4}function Pi(e,t){if(null!==e&&e.child===t.child)return!0;if(0!=(16&t.flags))return!1;for(e=t.child;null!==e;){if(0!=(12854&e.flags)||0!=(12854&e.subtreeFlags))return!1;e=e.sibling}return!0}if(Y)bi=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)z(e,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},xi=function(){},_i=function(e,t,n,r,i){if((e=e.memoizedProps)!==r){var a=t.stateNode,o=dr(lr.current);n=H(a,n,e,r,i,o),(t.updateQueue=n)&&Ri(t)}},wi=function(e,t,n,r){n!==r&&Ri(t)};else if(Z){bi=function(e,t,n,r){for(var i=t.child;null!==i;){if(5===i.tag){var a=i.stateNode;n&&r&&(a=Le(a,i.type,i.memoizedProps,i)),z(e,a)}else if(6===i.tag)a=i.stateNode,n&&r&&(a=De(a,i.memoizedProps,i)),z(e,a);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(a=i.child)&&(a.return=i),bi(e,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};var Li=function(e,t,n,r){for(var i=t.child;null!==i;){if(5===i.tag){var a=i.stateNode;n&&r&&(a=Le(a,i.type,i.memoizedProps,i)),Te(e,a)}else if(6===i.tag)a=i.stateNode,n&&r&&(a=De(a,i.memoizedProps,i)),Te(e,a);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(a=i.child)&&(a.return=i),Li(e,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};xi=function(e,t){var n=t.stateNode;if(!Pi(e,t)){e=n.containerInfo;var r=Ce(e);Li(r,t,!1,!1),n.pendingChildren=r,Ri(t),Re(e,r)}},_i=function(e,t,n,r,i){var a=e.stateNode,o=e.memoizedProps;if((e=Pi(e,t))&&o===r)t.stateNode=a;else{var s=t.stateNode,l=dr(lr.current),c=null;o!==r&&(c=H(s,n,o,r,i,l)),e&&null===c?t.stateNode=a:(a=Ee(a,c,n,o,r,t,e,s),U(a,n,r,i,l)&&Ri(t),t.stateNode=a,e?Ri(t):bi(a,t,!1,!1))}},wi=function(e,t,n,r){n!==r?(e=dr(ur.current),n=dr(lr.current),t.stateNode=V(r,e,n,t),Ri(t)):t.stateNode=e.stateNode}}else xi=function(){},_i=function(){},wi=function(){};function Di(e,t){if(!jn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ii(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ki(e,t,n){var r=t.pendingProps;switch(Hn(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ii(t),null;case 1:case 17:return pt(t.type)&&mt(),Ii(t),null;case 3:return r=t.stateNode,fr(),st(dt),st(ut),br(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Kn(t)?Ri(t):null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==Xn&&(To(Xn),Xn=null))),xi(e,t),Ii(t),null;case 5:mr(t),n=dr(ur.current);var i=t.type;if(null!==e&&null!=t.stateNode)_i(e,t,i,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Ii(t),null}if(e=dr(lr.current),Kn(t)){if(!J)throw Error(o(175));e=Ve(t.stateNode,t.type,t.memoizedProps,n,e,t,!Wn),t.updateQueue=e,null!==e&&Ri(t)}else{var a=O(i,r,n,e,t);bi(a,t,!1,!1),t.stateNode=a,U(a,i,r,n,e)&&Ri(t)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ii(t),null;case 6:if(e&&null!=t.stateNode)wi(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(o(166));if(e=dr(ur.current),n=dr(lr.current),Kn(t)){if(!J)throw Error(o(176));if(e=t.stateNode,r=t.memoizedProps,(n=je(e,r,t,!Wn))&&null!==(i=Gn))switch(a=0!=(1&i.mode),i.tag){case 3:Ke(i.stateNode.containerInfo,e,r,a);break;case 5:Qe(i.type,i.memoizedProps,i.stateNode,e,r,a)}n&&Ri(t)}else t.stateNode=V(r,e,n,t)}return Ii(t),null;case 13:if(st(gr),r=t.memoizedState,jn&&null!==Vn&&0!=(1&t.mode)&&0==(128&t.flags)){for(e=Vn;e;)e=ze(e);return Qn(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Kn(t),null===e){if(!r)throw Error(o(318));if(!J)throw Error(o(344));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(o(317));We(e,t)}else Qn(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return Ii(t),null}return null!==Xn&&(To(Xn),Xn=null),0!=(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Kn(t):n=null!==e.memoizedState,r&&!n&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&gr.current)?0===Qa&&(Qa=3):Fo())),null!==t.updateQueue&&(t.flags|=4),Ii(t),null);case 4:return fr(),xi(e,t),null===e&&K(t.stateNode.containerInfo),Ii(t),null;case 10:return ln(t.type._context),Ii(t),null;case 19:if(st(gr),null===(i=t.memoizedState))return Ii(t),null;if(r=0!=(128&t.flags),null===(a=i.rendering))if(r)Di(i,!1);else{if(0!==Qa||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=vr(e))){for(t.flags|=128,Di(i,!1),null!==(e=a.updateQueue)&&(t.updateQueue=e,t.flags|=4),t.subtreeFlags=0,e=n,r=t.child;null!==r;)i=e,(n=r).flags&=14680066,null===(a=n.alternate)?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=null===i?null:{lanes:i.lanes,firstContext:i.firstContext}),r=r.sibling;return lt(gr,1&gr.current|2),t.child}e=e.sibling}null!==i.tail&&Ot()>so&&(t.flags|=128,r=!0,Di(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=vr(a))){if(t.flags|=128,r=!0,null!==(e=e.updateQueue)&&(t.updateQueue=e,t.flags|=4),Di(i,!0),null===i.tail&&"hidden"===i.tailMode&&!a.alternate&&!jn)return Ii(t),null}else 2*Ot()-i.renderingStartTime>so&&1073741824!==n&&(t.flags|=128,r=!0,Di(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=i.last)?e.sibling=a:t.child=a,i.last=a)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ot(),t.sibling=null,e=gr.current,lt(gr,r?1&e|2:1&e),t):(Ii(t),null);case 22:case 23:return Do(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!=(1&t.mode)?0!=(1073741824&$a)&&(Ii(t),Y&&6&t.subtreeFlags&&(t.flags|=8192)):Ii(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}var Bi=s.ReactCurrentOwner,Fi=!1;function Ni(e,t,n,r){t.child=null===e?or(t,null,n,r):ar(t,e.child,n,r)}function Oi(e,t,n,r,i){n=n.render;var a=t.ref;return un(t,i),r=Dr(e,t,n,r,a,i),n=Ir(),null===e||Fi?(jn&&n&&Un(t),t.flags|=1,Ni(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ia(e,t,i))}function zi(e,t,n,r,i){if(null===e){var a=n.type;return"function"!=typeof a||Qo(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=ts(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ui(e,t,a,r,i))}if(a=e.child,0==(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:Kt)(o,r)&&e.ref===t.ref)return ia(e,t,i)}return t.flags|=1,(e=es(a,r)).ref=t.ref,e.return=t,t.child=e}function Ui(e,t,n,r,i){if(null!==e&&Kt(e.memoizedProps,r)&&e.ref===t.ref){if(Fi=!1,0==(e.lanes&i))return t.lanes=e.lanes,ia(e,t,i);0!=(131072&e.flags)&&(Fi=!0)}return Vi(e,t,n,r,i)}function Hi(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},lt(Ka,$a),$a|=n;else{if(0==(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,lt(Ka,$a),$a|=e,null;t.memoizedState={baseLanes:0,cachePool:null},r=null!==a?a.baseLanes:n,lt(Ka,$a),$a|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,lt(Ka,$a),$a|=r;return Ni(e,t,i,n),t.child}function Gi(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Vi(e,t,n,r,i){var a=pt(n)?ht:ut.current;return a=ft(t,a),un(t,i),n=Dr(e,t,n,r,a,i),r=Ir(),null===e||Fi?(jn&&r&&Un(t),t.flags|=1,Ni(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ia(e,t,i))}function ji(e,t,n,r,i){if(pt(n)){var a=!0;yt(t)}else a=!1;if(un(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),En(t,n,r),Tn(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,c=n.contextType;c="object"==typeof c&&null!==c?dn(c):ft(t,c=pt(n)?ht:ut.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof o.getSnapshotBeforeUpdate;d||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==r||l!==c)&&Cn(t,o,r,c),fn=!1;var h=t.memoizedState;o.state=h,xn(t,r,o,i),l=t.memoizedState,s!==r||h!==l||dt.current||fn?("function"==typeof u&&(Mn(t,n,u,r),l=t.memoizedState),(s=fn||An(t,n,s,r,h,l,c))?(d||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=s):("function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,mn(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:en(t.type,s),o.props=c,d=t.pendingProps,h=o.context,l="object"==typeof(l=n.contextType)&&null!==l?dn(l):ft(t,l=pt(n)?ht:ut.current);var f=n.getDerivedStateFromProps;(u="function"==typeof f||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==d||h!==l)&&Cn(t,o,r,l),fn=!1,h=t.memoizedState,o.state=h,xn(t,r,o,i);var p=t.memoizedState;s!==d||h!==p||dt.current||fn?("function"==typeof f&&(Mn(t,n,f,r),p=t.memoizedState),(c=fn||An(t,n,c,r,h,p,l)||!1)?(u||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Wi(e,t,n,r,a,i)}function Wi(e,t,n,r,i,a){Gi(e,t);var o=0!=(128&t.flags);if(!r&&!o)return i&&bt(t,n,!1),ia(e,t,a);r=t.stateNode,Bi.current=t;var s=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=ar(t,e.child,null,a),t.child=ar(t,null,s,a)):Ni(e,t,s,a),t.memoizedState=r.state,i&&bt(t,n,!0),t.child}function Xi(e){var t=e.stateNode;t.pendingContext?gt(0,t.pendingContext,t.pendingContext!==t.context):t.context&&gt(0,t.context,!1),hr(e,t.containerInfo)}function qi(e,t,n,r,i){return Qn(),er(i),t.flags|=256,Ni(e,t,n,r),t.child}var Yi={dehydrated:null,treeContext:null,retryLane:0};function Zi(e){return{baseLanes:e,cachePool:null}}function Ji(e,t,n){var r,i=t.pendingProps,a=gr.current,s=!1,l=0!=(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!=(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),lt(gr,1&a),null===e)return Jn(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&t.mode)?t.lanes=1:Ne(e)?t.lanes=8:t.lanes=1073741824,null):(a=i.children,e=i.fallback,s?(i=t.mode,s=t.child,a={mode:"hidden",children:a},0==(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=a):s=rs(a,i,0,null),e=ns(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Zi(n),t.memoizedState=Yi,e):$i(t,a));if(null!==(a=e.memoizedState)){if(null!==(r=a.dehydrated)){if(l)return 256&t.flags?(t.flags&=-257,ea(e,t,n,Error(o(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=i.fallback,a=t.mode,i=rs({mode:"visible",children:i.children},a,0,null),(s=ns(s,a,n,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,0!=(1&t.mode)&&ar(t,e.child,null,n),t.child.memoizedState=Zi(n),t.memoizedState=Yi,s);if(0==(1&t.mode))t=ea(e,t,n,null);else if(Ne(r))t=ea(e,t,n,Error(o(419)));else if(i=0!=(n&e.childLanes),Fi||i){if(null!==(i=Ya)){switch(n&-n){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(i=0!=(s&(i.suspendedLanes|n))?0:s)&&i!==a.retryLane&&(a.retryLane=i,Mo(e,i,-1))}Fo(),t=ea(e,t,n,Error(o(421)))}else Fe(r)?(t.flags|=128,t.child=e.child,t=Yo.bind(null,e),Oe(r,t),t=null):(n=a.treeContext,J&&(Vn=Ge(r),Gn=t,jn=!0,Xn=null,Wn=!1,null!==n&&(In[kn++]=Fn,In[kn++]=Nn,In[kn++]=Bn,Fn=n.id,Nn=n.overflow,Bn=t)),(t=$i(t,t.pendingProps.children)).flags|=4096);return t}return s?(i=Qi(e,t,i.children,i.fallback,n),s=t.child,a=e.child.memoizedState,s.memoizedState=null===a?Zi(n):{baseLanes:a.baseLanes|n,cachePool:null},s.childLanes=e.childLanes&~n,t.memoizedState=Yi,i):(n=Ki(e,t,i.children,n),t.memoizedState=null,n)}return s?(i=Qi(e,t,i.children,i.fallback,n),s=t.child,a=e.child.memoizedState,s.memoizedState=null===a?Zi(n):{baseLanes:a.baseLanes|n,cachePool:null},s.childLanes=e.childLanes&~n,t.memoizedState=Yi,i):(n=Ki(e,t,i.children,n),t.memoizedState=null,n)}function $i(e,t){return(t=rs({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ki(e,t,n,r){var i=e.child;return e=i.sibling,n=es(i,{mode:"visible",children:n}),0==(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Qi(e,t,n,r,i){var a=t.mode,o=(e=e.child).sibling,s={mode:"hidden",children:n};return 0==(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=s,t.deletions=null):(n=es(e,s)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=es(o,r):(r=ns(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ea(e,t,n,r){return null!==r&&er(r),ar(t,e.child,null,n),(e=$i(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ta(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),cn(e.return,t,n)}function na(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function ra(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Ni(e,t,r.children,n),0!=(2&(r=gr.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ta(e,n,t);else if(19===e.tag)ta(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(lt(gr,r),0==(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===vr(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),na(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===vr(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}na(t,!0,n,null,a);break;case"together":na(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ia(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),to|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=es(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=es(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function aa(e,t){switch(Hn(t),t.tag){case 1:return pt(t.type)&&mt(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return fr(),st(dt),st(ut),br(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return mr(t),null;case 13:if(st(gr),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));Qn()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return st(gr),null;case 4:return fr(),null;case 10:return ln(t.type._context),null;case 22:case 23:return Do(),null;default:return null}}var oa=!1,sa=!1,la="function"==typeof WeakSet?WeakSet:Set,ca=null;function ua(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){Wo(e,t,n)}else n.current=null}function da(e,t,n){try{n()}catch(n){Wo(e,t,n)}}var ha=!1;function fa(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&da(t,n,a)}i=i.next}while(i!==r)}}function pa(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ma(e){var t=e.ref;if(null!==t){var n=e.stateNode;e=5===e.tag?I(n):n,"function"==typeof t?t(e):t.current=e}}function ga(e,t,n){if(jt&&"function"==typeof jt.onCommitFiberUnmount)try{jt.onCommitFiberUnmount(Vt,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e=e.next;do{var i=r,a=i.destroy;i=i.tag,void 0!==a&&(0!=(2&i)||0!=(4&i))&&da(t,n,a),r=r.next}while(r!==e)}break;case 1:if(ua(t,n),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Wo(t,n,e)}break;case 5:ua(t,n);break;case 4:Y?Sa(e,t,n):Z&&Z&&(t=t.stateNode.containerInfo,n=Ce(t),Pe(t,n))}}function va(e,t,n){for(var r=t;;)if(ga(e,r,n),null===r.child||Y&&4===r.tag){if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}else r.child.return=r,r=r.child}function ya(e){var t=e.alternate;null!==t&&(e.alternate=null,ya(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&ee(t),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ba(e){return 5===e.tag||3===e.tag||4===e.tag}function xa(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ba(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function _a(e){if(Y){e:{for(var t=e.return;null!==t;){if(ba(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(xe(t),n.flags&=-33),Ma(e,n=xa(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,wa(e,n=xa(e),t);break;default:throw Error(o(161))}}}function wa(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?ve(n,e,t):he(n,e);else if(4!==r&&null!==(e=e.child))for(wa(e,t,n),e=e.sibling;null!==e;)wa(e,t,n),e=e.sibling}function Ma(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?ge(n,e,t):de(n,e);else if(4!==r&&null!==(e=e.child))for(Ma(e,t,n),e=e.sibling;null!==e;)Ma(e,t,n),e=e.sibling}function Sa(e,t,n){for(var r,i,a=t,s=!1;;){if(!s){s=a.return;e:for(;;){if(null===s)throw Error(o(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}s=s.return}s=!0}if(5===a.tag||6===a.tag)va(e,a,n),i?be(r,a.stateNode):ye(r,a.stateNode);else if(18===a.tag)i?Je(r,a.stateNode):Ze(r,a.stateNode);else if(4===a.tag){if(null!==a.child){r=a.stateNode.containerInfo,i=!0,a.child.return=a,a=a.child;continue}}else if(ga(e,a,n),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(s=!1)}a.sibling.return=a.return,a=a.sibling}}function Aa(e,t){if(Y){switch(t.tag){case 0:case 11:case 14:case 15:return fa(3,t,t.return),pa(3,t),void fa(5,t,t.return);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var i=t.type,a=t.updateQueue;t.updateQueue=null,null!==a&&me(n,a,i,e,r,t)}return;case 6:if(null===t.stateNode)throw Error(o(162));return n=t.memoizedProps,void fe(t.stateNode,null!==e?e.memoizedProps:n,n);case 3:return void(J&&null!==e&&e.memoizedState.isDehydrated&&qe(t.stateNode.containerInfo));case 13:case 19:return void Ea(t)}throw Error(o(163))}switch(t.tag){case 0:case 11:case 14:case 15:return fa(3,t,t.return),pa(3,t),void fa(5,t,t.return);case 12:case 22:case 23:return;case 13:case 19:return void Ea(t);case 3:J&&null!==e&&e.memoizedState.isDehydrated&&qe(t.stateNode.containerInfo)}e:if(Z){switch(t.tag){case 1:case 5:case 6:break e;case 3:case 4:t=t.stateNode,Pe(t.containerInfo,t.pendingChildren);break e}throw Error(o(163))}}function Ea(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new la),t.forEach((function(t){var r=Zo.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Ca(e,t,n){ca=e,Ta(e,t,n)}function Ta(e,t,n){for(var r=0!=(1&e.mode);null!==ca;){var i=ca,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||oa;if(!o){var s=i.alternate,l=null!==s&&null!==s.memoizedState||sa;s=oa;var c=sa;if(oa=o,(sa=l)&&!c)for(ca=i;null!==ca;)l=(o=ca).child,22===o.tag&&null!==o.memoizedState?La(i):null!==l?(l.return=o,ca=l):La(i);for(;null!==a;)ca=a,Ta(a,t,n),a=a.sibling;ca=i,oa=s,sa=c}Ra(e)}else 0!=(8772&i.subtreeFlags)&&null!==a?(a.return=i,ca=a):Ra(e)}}function Ra(e){for(;null!==ca;){var t=ca;if(0!=(8772&t.flags)){var n=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:sa||pa(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!sa)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:en(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&_n(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:n=I(t.child.stateNode);break;case 1:n=t.child.stateNode}_n(t,s,n)}break;case 5:var l=t.stateNode;null===n&&4&t.flags&&pe(l,t.type,t.memoizedProps,t);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(J&&null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var d=u.dehydrated;null!==d&&Ye(d)}}}break;default:throw Error(o(163))}sa||512&t.flags&&ma(t)}catch(e){Wo(t,t.return,e)}}if(t===e){ca=null;break}if(null!==(n=t.sibling)){n.return=t.return,ca=n;break}ca=t.return}}function Pa(e){for(;null!==ca;){var t=ca;if(t===e){ca=null;break}var n=t.sibling;if(null!==n){n.return=t.return,ca=n;break}ca=t.return}}function La(e){for(;null!==ca;){var t=ca;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{pa(4,t)}catch(e){Wo(t,n,e)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(e){Wo(t,i,e)}}var a=t.return;try{ma(t)}catch(e){Wo(t,a,e)}break;case 5:var o=t.return;try{ma(t)}catch(e){Wo(t,o,e)}}}catch(e){Wo(t,t.return,e)}if(t===e){ca=null;break}var s=t.sibling;if(null!==s){s.return=t.return,ca=s;break}ca=t.return}}var Da=0,Ia=1,ka=2,Ba=3,Fa=4;if("function"==typeof Symbol&&Symbol.for){var Na=Symbol.for;Da=Na("selector.component"),Ia=Na("selector.has_pseudo_class"),ka=Na("selector.role"),Ba=Na("selector.test_id"),Fa=Na("selector.text")}function Oa(e){var t=$(e);if(null!=t){if("string"!=typeof t.memoizedProps["data-testname"])throw Error(o(364));return t}if(null===(e=ie(e)))throw Error(o(362));return e.stateNode.current}function za(e,t){switch(t.$$typeof){case Da:if(e.type===t.value)return!0;break;case Ia:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var r=e[n++],i=e[n++],a=t[i];if(5!==r.tag||!se(r)){for(;null!=a&&za(r,a);)a=t[++i];if(i===t.length){t=!0;break e}for(r=r.child;null!==r;)e.push(r,i),r=r.sibling}}t=!1}return t;case ka:if(5===e.tag&&le(e.stateNode,t.value))return!0;break;case Fa:if((5===e.tag||6===e.tag)&&null!==(e=oe(e))&&0<=e.indexOf(t.value))return!0;break;case Ba:if(5===e.tag&&"string"==typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase())return!0;break;default:throw Error(o(365))}return!1}function Ua(e){switch(e.$$typeof){case Da:return"<"+(M(e.value)||"Unknown")+">";case Ia:return":has("+(Ua(e)||"")+")";case ka:return'[role="'+e.value+'"]';case Fa:return'"'+e.value+'"';case Ba:return'[data-testname="'+e.value+'"]';default:throw Error(o(365))}}function Ha(e,t){var n=[];e=[e,0];for(var r=0;r<e.length;){var i=e[r++],a=e[r++],o=t[a];if(5!==i.tag||!se(i)){for(;null!=o&&za(i,o);)o=t[++a];if(a===t.length)n.push(i);else for(i=i.child;null!==i;)e.push(i,a),i=i.sibling}}return n}function Ga(e,t){if(!re)throw Error(o(363));e=Ha(e=Oa(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var r=e[n++];if(5===r.tag)se(r)||t.push(r.stateNode);else for(r=r.child;null!==r;)e.push(r),r=r.sibling}return t}var Va=Math.ceil,ja=s.ReactCurrentDispatcher,Wa=s.ReactCurrentOwner,Xa=s.ReactCurrentBatchConfig,qa=0,Ya=null,Za=null,Ja=0,$a=0,Ka=ot(0),Qa=0,eo=null,to=0,no=0,ro=0,io=null,ao=null,oo=0,so=1/0;function lo(){so=Ot()+500}var co,uo=!1,ho=null,fo=null,po=!1,mo=null,go=0,vo=0,yo=null,bo=-1,xo=0;function _o(){return 0!=(6&qa)?Ot():-1!==bo?bo:bo=Ot()}function wo(e){return 0==(1&e.mode)?1:0!=(2&qa)&&0!==Ja?Ja&-Ja:null!==$t.transition?(0===xo&&(e=Mt,0==(4194240&(Mt<<=1))&&(Mt=64),xo=e),xo):0!==(e=Dt)?e:Q()}function Mo(e,t,n){if(50<vo)throw vo=0,yo=null,Error(o(185));var r=So(e,t);return null===r?null:(Pt(r,t,n),0!=(2&qa)&&r===Ya||(r===Ya&&(0==(2&qa)&&(no|=t),4===Qa&&Ro(r,Ja)),Ao(r,n),1===t&&0===qa&&0==(1&e.mode)&&(lo(),qt&&Jt())),r)}function So(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Ao(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-xt(a),s=1<<o,l=i[o];-1===l?0!=(s&n)&&0==(s&r)||(i[o]=Ct(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=Et(e,e===Ya?Ja:0);if(0===r)null!==n&&Bt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Bt(n),1===t)0===e.tag?function(e){qt=!0,Zt(e)}(Po.bind(null,e)):Zt(Po.bind(null,e)),te?ne((function(){0===qa&&Jt()})):kt(zt,Jt),n=null;else{switch(It(r)){case 1:n=zt;break;case 4:n=Ut;break;case 16:default:n=Ht;break;case 536870912:n=Gt}n=Jo(n,Eo.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Eo(e,t){if(bo=-1,xo=0,0!=(6&qa))throw Error(o(327));var n=e.callbackNode;if(Vo()&&e.callbackNode!==n)return null;var r=Et(e,e===Ya?Ja:0);if(0===r)return null;if(0!=(30&r)||0!=(r&e.expiredLanes)||t)t=No(e,r);else{t=r;var i=qa;qa|=2;var a=Bo();for(Ya===e&&Ja===t||(lo(),Io(e,t));;)try{zo();break}catch(t){ko(e,t)}on(),ja.current=a,qa=i,null!==Za?t=0:(Ya=null,Ja=0,t=Qa)}if(0!==t){if(2===t&&0!==(i=Tt(e))&&(r=i,t=Co(e,i)),1===t)throw n=eo,Io(e,0),Ro(e,r),Ao(e,Ot()),n;if(6===t)Ro(e,r);else{if(i=e.current.alternate,0==(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Wt(a(),i))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=No(e,r))&&0!==(a=Tt(e))&&(r=a,t=Co(e,a)),1===t))throw n=eo,Io(e,0),Ro(e,r),Ao(e,Ot()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:Go(e,ao);break;case 3:if(Ro(e,r),(130023424&r)===r&&10<(t=oo+500-Ot())){if(0!==Et(e,0))break;if(((i=e.suspendedLanes)&r)!==r){_o(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=j(Go.bind(null,e,ao),t);break}Go(e,ao);break;case 4:if(Ro(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-xt(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Ot()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Va(r/1960))-r)){e.timeoutHandle=j(Go.bind(null,e,ao),r);break}Go(e,ao);break;default:throw Error(o(329))}}}return Ao(e,Ot()),e.callbackNode===n?Eo.bind(null,e):null}function Co(e,t){var n=io;return e.current.memoizedState.isDehydrated&&(Io(e,t).flags|=256),2!==(e=No(e,t))&&(t=ao,ao=n,null!==t&&To(t)),e}function To(e){null===ao?ao=e:ao.push.apply(ao,e)}function Ro(e,t){for(t&=~ro,t&=~no,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-xt(t),r=1<<n;e[n]=-1,t&=~r}}function Po(e){if(0!=(6&qa))throw Error(o(327));Vo();var t=Et(e,0);if(0==(1&t))return Ao(e,Ot()),null;var n=No(e,t);if(0!==e.tag&&2===n){var r=Tt(e);0!==r&&(t=r,n=Co(e,r))}if(1===n)throw n=eo,Io(e,0),Ro(e,t),Ao(e,Ot()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Go(e,ao),Ao(e,Ot()),null}function Lo(e){null!==mo&&0===mo.tag&&0==(6&qa)&&Vo();var t=qa;qa|=1;var n=Xa.transition,r=Dt;try{if(Xa.transition=null,Dt=1,e)return e()}finally{Dt=r,Xa.transition=n,0==(6&(qa=t))&&Jt()}}function Do(){$a=Ka.current,st(Ka)}function Io(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==X&&(e.timeoutHandle=X,W(n)),null!==Za)for(n=Za.return;null!==n;){var r=n;switch(Hn(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&mt();break;case 3:fr(),st(dt),st(ut),br();break;case 5:mr(r);break;case 4:fr();break;case 13:case 19:st(gr);break;case 10:ln(r.type._context);break;case 22:case 23:Do()}n=n.return}if(Ya=e,Za=e=es(e.current,null),Ja=$a=t,Qa=0,eo=null,ro=no=to=0,ao=io=null,null!==hn){for(t=0;t<hn.length;t++)if(null!==(r=(n=hn[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}hn=null}return e}function ko(e,t){for(;;){var n=Za;try{if(on(),xr.current=fi,Er){for(var r=Mr.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}Er=!1}if(wr=0,Ar=Sr=Mr=null,Cr=!1,Tr=0,Wa.current=null,null===n||null===n.return){Qa=1,eo=t,Za=null;break}e:{var a=e,s=n.return,l=n,c=t;if(t=Ja,l.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var u=c,d=l,h=d.tag;if(0==(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Ci(s);if(null!==p){p.flags&=-257,Ti(p,s,l,0,t),1&p.mode&&Ei(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0==(1&t)){Ei(a,u,t),Fo();break e}c=Error(o(426))}else if(jn&&1&l.mode){var v=Ci(s);if(null!==v){0==(65536&v.flags)&&(v.flags|=256),Ti(v,s,l,0,t),er(c);break e}}a=c,4!==Qa&&(Qa=2),null===io?io=[a]:io.push(a),c=vi(c,l),l=s;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t,bn(l,Si(0,c,t));break e;case 1:a=c;var y=l.type,b=l.stateNode;if(0==(128&l.flags)&&("function"==typeof y.getDerivedStateFromError||null!==b&&"function"==typeof b.componentDidCatch&&(null===fo||!fo.has(b)))){l.flags|=65536,t&=-t,l.lanes|=t,bn(l,Ai(l,a,t));break e}}l=l.return}while(null!==l)}Ho(n)}catch(e){t=e,Za===n&&null!==n&&(Za=n=n.return);continue}break}}function Bo(){var e=ja.current;return ja.current=fi,null===e?fi:e}function Fo(){0!==Qa&&3!==Qa&&2!==Qa||(Qa=4),null===Ya||0==(268435455&to)&&0==(268435455&no)||Ro(Ya,Ja)}function No(e,t){var n=qa;qa|=2;var r=Bo();for(Ya===e&&Ja===t||Io(e,t);;)try{Oo();break}catch(t){ko(e,t)}if(on(),qa=n,ja.current=r,null!==Za)throw Error(o(261));return Ya=null,Ja=0,Qa}function Oo(){for(;null!==Za;)Uo(Za)}function zo(){for(;null!==Za&&!Ft();)Uo(Za)}function Uo(e){var t=co(e.alternate,e,$a);e.memoizedProps=e.pendingProps,null===t?Ho(e):Za=t,Wa.current=null}function Ho(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(n=ki(n,t,$a)))return void(Za=n)}else{if(null!==(n=aa(n,t)))return n.flags&=32767,void(Za=n);if(null===e)return Qa=6,void(Za=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Za=t);Za=t=e}while(null!==t);0===Qa&&(Qa=5)}function Go(e,t){var n=Dt,r=Xa.transition;try{Xa.transition=null,Dt=1,function(e,t,n){do{Vo()}while(null!==mo);if(0!=(6&qa))throw Error(o(327));var r=e.finishedWork,i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-xt(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,a),e===Ya&&(Za=Ya=null,Ja=0),0==(2064&r.subtreeFlags)&&0==(2064&r.flags)||po||(po=!0,Jo(Ht,(function(){return Vo(),null}))),a=0!=(15990&r.flags),0!=(15990&r.subtreeFlags)||a){a=Xa.transition,Xa.transition=null;var s=Dt;Dt=1;var l=qa;qa|=4,Wa.current=null,function(e,t){for(F(e.containerInfo),ca=t;null!==ca;)if(t=(e=ca).child,0!=(1028&e.subtreeFlags)&&null!==t)t.return=e,ca=t;else for(;null!==ca;){e=ca;try{var n=e.alternate;if(0!=(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==n){var r=n.memoizedProps,i=n.memoizedState,a=e.stateNode,s=a.getSnapshotBeforeUpdate(e.elementType===e.type?r:en(e.type,r),i);a.__reactInternalSnapshotBeforeUpdate=s}break;case 3:Y&&Ae(e.stateNode.containerInfo);break;default:throw Error(o(163))}}catch(t){Wo(e,e.return,t)}if(null!==(t=e.sibling)){t.return=e.return,ca=t;break}ca=e.return}n=ha,ha=!1}(e,r),function(e,t){for(ca=t;null!==ca;){var n=(t=ca).deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e;Y?Sa(a,i,t):va(a,i,t);var o=i.alternate;null!==o&&(o.return=null),i.return=null}catch(e){Wo(i,t,e)}}if(n=t.child,0!=(12854&t.subtreeFlags)&&null!==n)n.return=t,ca=n;else for(;null!==ca;){t=ca;try{var s=t.flags;if(32&s&&Y&&xe(t.stateNode),512&s){var l=t.alternate;if(null!==l){var c=l.ref;null!==c&&("function"==typeof c?c(null):c.current=null)}}if(8192&s)switch(t.tag){case 13:if(null!==t.memoizedState){var u=t.alternate;null!==u&&null!==u.memoizedState||(oo=Ot())}break;case 22:var d=null!==t.memoizedState,h=t.alternate,f=null!==h&&null!==h.memoizedState;if(n=t,Y)e:if(r=n,i=d,a=null,Y)for(var p=r;;){if(5===p.tag){if(null===a){a=p;var m=p.stateNode;i?_e(m):Me(p.stateNode,p.memoizedProps)}}else if(6===p.tag){if(null===a){var g=p.stateNode;i?we(g):Se(g,p.memoizedProps)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===r)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===r)break;for(;null===p.sibling;){if(null===p.return||p.return===r)break e;a===p&&(a=null),p=p.return}a===p&&(a=null),p.sibling.return=p.return,p=p.sibling}if(d&&!f&&0!=(1&n.mode)){ca=n;for(var v=n.child;null!==v;){for(n=ca=v;null!==ca;){var y=(r=ca).child;switch(r.tag){case 0:case 11:case 14:case 15:fa(4,r,r.return);break;case 1:ua(r,r.return);var b=r.stateNode;if("function"==typeof b.componentWillUnmount){var x=r.return;try{b.props=r.memoizedProps,b.state=r.memoizedState,b.componentWillUnmount()}catch(e){Wo(r,x,e)}}break;case 5:ua(r,r.return);break;case 22:if(null!==r.memoizedState){Pa(n);continue}}null!==y?(y.return=r,ca=y):Pa(n)}v=v.sibling}}}switch(4102&s){case 2:_a(t),t.flags&=-3;break;case 6:_a(t),t.flags&=-3,Aa(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,Aa(t.alternate,t);break;case 4:Aa(t.alternate,t)}}catch(e){Wo(t,t.return,e)}if(null!==(n=t.sibling)){n.return=t.return,ca=n;break}ca=t.return}}}(e,r),N(e.containerInfo),e.current=r,Ca(r,e,i),Nt(),qa=l,Dt=s,Xa.transition=a}else e.current=r;if(po&&(po=!1,mo=e,go=i),0===(a=e.pendingLanes)&&(fo=null),function(e){if(jt&&"function"==typeof jt.onCommitFiberRoot)try{jt.onCommitFiberRoot(Vt,e,void 0,128==(128&e.current.flags))}catch(e){}}(r.stateNode),Ao(e,Ot()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)n(t[r]);if(uo)throw uo=!1,e=ho,ho=null,e;0!=(1&go)&&0!==e.tag&&Vo(),0!=(1&(a=e.pendingLanes))?e===yo?vo++:(vo=0,yo=e):vo=0,Jt()}(e,t,n)}finally{Xa.transition=r,Dt=n}return null}function Vo(){if(null!==mo){var e=It(go),t=Xa.transition,n=Dt;try{if(Xa.transition=null,Dt=16>e?16:e,null===mo)var r=!1;else{if(e=mo,mo=null,go=0,0!=(6&qa))throw Error(o(331));var i=qa;for(qa|=4,ca=e.current;null!==ca;){var a=ca,s=a.child;if(0!=(16&ca.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(ca=u;null!==ca;){var d=ca;switch(d.tag){case 0:case 11:case 15:fa(8,d,a)}var h=d.child;if(null!==h)h.return=d,ca=h;else for(;null!==ca;){var f=(d=ca).sibling,p=d.return;if(ya(d),d===u){ca=null;break}if(null!==f){f.return=p,ca=f;break}ca=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}ca=a}}if(0!=(2064&a.subtreeFlags)&&null!==s)s.return=a,ca=s;else e:for(;null!==ca;){if(0!=(2048&(a=ca).flags))switch(a.tag){case 0:case 11:case 15:fa(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,ca=y;break e}ca=a.return}}var b=e.current;for(ca=b;null!==ca;){var x=(s=ca).child;if(0!=(2064&s.subtreeFlags)&&null!==x)x.return=s,ca=x;else e:for(s=b;null!==ca;){if(0!=(2048&(l=ca).flags))try{switch(l.tag){case 0:case 11:case 15:pa(9,l)}}catch(e){Wo(l,l.return,e)}if(l===s){ca=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,ca=_;break e}ca=l.return}}if(qa=i,Jt(),jt&&"function"==typeof jt.onPostCommitFiberRoot)try{jt.onPostCommitFiberRoot(Vt,e)}catch(e){}r=!0}return r}finally{Dt=n,Xa.transition=t}}return!1}function jo(e,t,n){vn(e,t=Si(0,t=vi(n,t),1)),t=_o(),null!==(e=So(e,1))&&(Pt(e,1,t),Ao(e,t))}function Wo(e,t,n){if(3===e.tag)jo(e,e,n);else for(;null!==t;){if(3===t.tag){jo(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===fo||!fo.has(r))){vn(t,e=Ai(t,e=vi(n,e),1)),e=_o(),null!==(t=So(t,1))&&(Pt(t,1,e),Ao(t,e));break}}t=t.return}}function Xo(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=_o(),e.pingedLanes|=e.suspendedLanes&n,Ya===e&&(Ja&n)===n&&(4===Qa||3===Qa&&(130023424&Ja)===Ja&&500>Ot()-oo?Io(e,0):ro|=n),Ao(e,t)}function qo(e,t){0===t&&(0==(1&e.mode)?t=1:(t=St,0==(130023424&(St<<=1))&&(St=4194304)));var n=_o();null!==(e=So(e,t))&&(Pt(e,t,n),Ao(e,n))}function Yo(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),qo(e,n)}function Zo(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),qo(e,n)}function Jo(e,t){return kt(e,t)}function $o(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ko(e,t,n,r){return new $o(e,t,n,r)}function Qo(e){return!(!(e=e.prototype)||!e.isReactComponent)}function es(e,t){var n=e.alternate;return null===n?((n=Ko(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ts(e,t,n,r,i,a){var s=2;if(r=e,"function"==typeof e)Qo(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case u:return ns(n.children,i,a,t);case d:s=8,i|=8;break;case h:return(e=Ko(12,n,t,2|i)).elementType=h,e.lanes=a,e;case g:return(e=Ko(13,n,t,i)).elementType=g,e.lanes=a,e;case v:return(e=Ko(19,n,t,i)).elementType=v,e.lanes=a,e;case x:return rs(n,i,a,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case f:s=10;break e;case p:s=9;break e;case m:s=11;break e;case y:s=14;break e;case b:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ko(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function ns(e,t,n,r){return(e=Ko(7,e,r,t)).lanes=n,e}function rs(e,t,n,r){return(e=Ko(22,e,r,t)).elementType=x,e.lanes=n,e.stateNode={},e}function is(e,t,n){return(e=Ko(6,e,null,t)).lanes=n,e}function as(e,t,n){return(t=Ko(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function os(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=X,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rt(0),this.expirationTimes=Rt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rt(0),this.identifierPrefix=r,this.onRecoverableError=i,J&&(this.mutableSourceEagerHydrationData=null)}function ss(e,t,n,r,i,a,o,s,l){return e=new os(e,t,n,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Ko(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null},pn(a),e}function ls(e){if(!e)return ct;e:{if(A(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(pt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(pt(n))return vt(e,n,t)}return t}function cs(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return null===(e=T(t))?null:e.stateNode}function us(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ds(e,t){us(e,t),(e=e.alternate)&&us(e,t)}function hs(e){return null===(e=T(e))?null:e.stateNode}function fs(){return null}return co=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||dt.current)Fi=!0;else{if(0==(e.lanes&n)&&0==(128&t.flags))return Fi=!1,function(e,t,n){switch(t.tag){case 3:Xi(t),Qn();break;case 5:pr(t);break;case 1:pt(t.type)&&yt(t);break;case 4:hr(t,t.stateNode.containerInfo);break;case 10:sn(0,t.type._context,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(lt(gr,1&gr.current),t.flags|=128,null):0!=(n&t.child.childLanes)?Ji(e,t,n):(lt(gr,1&gr.current),null!==(e=ia(e,t,n))?e.sibling:null);lt(gr,1&gr.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(128&e.flags)){if(r)return ra(e,t,n);t.flags|=128}var i=t.memoizedState;if(null!==i&&(i.rendering=null,i.tail=null,i.lastEffect=null),lt(gr,gr.current),r)break;return null;case 22:case 23:return t.lanes=0,Hi(e,t,n)}return ia(e,t,n)}(e,t,n);Fi=0!=(131072&e.flags)}else Fi=!1,jn&&0!=(1048576&t.flags)&&zn(t,Dn,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=ft(t,ut.current);un(t,n),i=Dr(null,t,r,e,i,n);var a=Ir();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,pt(r)?(a=!0,yt(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,pn(t),i.updater=Sn,t.stateNode=i,i._reactInternals=t,Tn(t,r,e,n),t=Wi(null,t,r,!0,a,n)):(t.tag=0,jn&&a&&Un(t),Ni(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return Qo(e)?1:0;if(null!=e){if((e=e.$$typeof)===m)return 11;if(e===y)return 14}return 2}(r),e=en(r,e),i){case 0:t=Vi(null,t,r,e,n);break e;case 1:t=ji(null,t,r,e,n);break e;case 11:t=Oi(null,t,r,e,n);break e;case 14:t=zi(null,t,r,en(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Vi(e,t,r,i=t.elementType===r?i:en(r,i),n);case 1:return r=t.type,i=t.pendingProps,ji(e,t,r,i=t.elementType===r?i:en(r,i),n);case 3:e:{if(Xi(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,mn(e,t),xn(t,r,null,n);var s=t.memoizedState;if(r=s.element,J&&a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=qi(e,t,r,n,i=Error(o(423)));break e}if(r!==i){t=qi(e,t,r,n,i=Error(o(424)));break e}for(J&&(Vn=He(t.stateNode.containerInfo),Gn=t,jn=!0,Xn=null,Wn=!1),n=or(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Qn(),r===i){t=ia(e,t,n);break e}Ni(e,t,r,n)}t=t.child}return t;case 5:return pr(t),null===e&&Jn(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,G(r,i)?s=null:null!==a&&G(r,a)&&(t.flags|=32),Gi(e,t),Ni(e,t,s,n),t.child;case 6:return null===e&&Jn(t),null;case 13:return Ji(e,t,n);case 4:return hr(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ar(t,null,r,n):Ni(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Oi(e,t,r,i=t.elementType===r?i:en(r,i),n);case 7:return Ni(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ni(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,sn(0,r,s=i.value),null!==a)if(Wt(a.value,s)){if(a.children===i.children&&!dt.current){t=ia(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=gn(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),cn(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),cn(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}Ni(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,un(t,n),r=r(i=dn(i)),t.flags|=1,Ni(e,t,r,n),t.child;case 14:return i=en(r=t.type,t.pendingProps),zi(e,t,r,i=en(r.type,i),n);case 15:return Ui(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:en(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,pt(r)?(e=!0,yt(t)):e=!1,un(t,n),En(t,r,i),Tn(t,r,i,n),Wi(null,t,r,!0,e,n);case 19:return ra(e,t,n);case 22:return Hi(e,t,n)}throw Error(o(156,t.tag))},t.attemptContinuousHydration=function(e){13===e.tag&&(Mo(e,134217728,_o()),ds(e,134217728))},t.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=_o(),n=wo(e);Mo(e,n,t),ds(e,n)}},t.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=At(t.pendingLanes);0!==n&&(Lt(t,1|n),Ao(t,Ot()),0==(6&qa)&&(lo(),Jt()))}break;case 13:var r=_o();Lo((function(){return Mo(e,1,r)})),ds(e,1)}},t.batchedUpdates=function(e,t){var n=qa;qa|=1;try{return e(t)}finally{0===(qa=n)&&(lo(),qt&&Jt())}},t.createComponentSelector=function(e){return{$$typeof:Da,value:e}},t.createContainer=function(e,t,n,r,i,a,o){return ss(e,t,!1,null,0,r,0,a,o)},t.createHasPseudoClassSelector=function(e){return{$$typeof:Ia,value:e}},t.createHydrationContainer=function(e,t,n,r,i,a,o,s,l){return(e=ss(n,r,!0,e,0,a,0,s,l)).context=ls(null),n=e.current,(a=gn(r=_o(),i=wo(n))).callback=null!=t?t:null,vn(n,a),e.current.lanes=i,Pt(e,i,r),Ao(e,r),e},t.createPortal=function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:c,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}},t.createRoleSelector=function(e){return{$$typeof:ka,value:e}},t.createTestNameSelector=function(e){return{$$typeof:Ba,value:e}},t.createTextSelector=function(e){return{$$typeof:Fa,value:e}},t.deferredUpdates=function(e){var t=Dt,n=Xa.transition;try{return Xa.transition=null,Dt=16,e()}finally{Dt=t,Xa.transition=n}},t.discreteUpdates=function(e,t,n,r,i){var a=Dt,o=Xa.transition;try{return Xa.transition=null,Dt=1,e(t,n,r,i)}finally{Dt=a,Xa.transition=o,0===qa&&lo()}},t.findAllNodes=Ga,t.findBoundingRects=function(e,t){if(!re)throw Error(o(363));t=Ga(e,t),e=[];for(var n=0;n<t.length;n++)e.push(ae(t[n]));for(t=e.length-1;0<t;t--)for(var r=(n=e[t]).x,i=r+n.width,a=n.y,s=a+n.height,l=t-1;0<=l;l--)if(t!==l){var c=e[l],u=c.x,d=u+c.width,h=c.y,f=h+c.height;if(r>=u&&a>=h&&i<=d&&s<=f){e.splice(t,1);break}if(!(r!==u||n.width!==c.width||f<a||h>s)){h>a&&(c.height+=h-a,c.y=a),f<s&&(c.height=s-h),e.splice(t,1);break}if(!(a!==h||n.height!==c.height||d<r||u>i)){u>r&&(c.width+=u-r,c.x=r),d<i&&(c.width=i-u),e.splice(t,1);break}}return e},t.findHostInstance=cs,t.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=C(e))?P(e):null)?null:e.stateNode},t.findHostInstanceWithWarning=function(e){return cs(e)},t.flushControlled=function(e){var t=qa;qa|=1;var n=Xa.transition,r=Dt;try{Xa.transition=null,Dt=1,e()}finally{Dt=r,Xa.transition=n,0===(qa=t)&&(lo(),Jt())}},t.flushPassiveEffects=Vo,t.flushSync=Lo,t.focusWithin=function(e,t){if(!re)throw Error(o(363));for(t=Ha(e=Oa(e),t),t=Array.from(t),e=0;e<t.length;){var n=t[e++];if(!se(n)){if(5===n.tag&&ce(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Dt},t.getFindAllNodesFailureDescription=function(e,t){if(!re)throw Error(o(363));var n=0,r=[];e=[Oa(e),0];for(var i=0;i<e.length;){var a=e[i++],s=e[i++],l=t[s];if((5!==a.tag||!se(a))&&(za(a,l)&&(r.push(Ua(l)),++s>n&&(n=s)),s<t.length))for(a=a.child;null!==a;)e.push(a,s),a=a.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(Ua(t[n]));return"findAllNodes was able to match part of the selector:\n  "+r.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},t.getPublicRootInstance=function(e){return(e=e.current).child?5===e.child.tag?I(e.child.stateNode):e.child.stateNode:null},t.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:s.ReactCurrentDispatcher,findHostInstanceByFiber:hs,findFiberByHostInstance:e.findFiberByHostInstance||fs,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},"undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{Vt=t.inject(e),jt=t}catch(e){}e=!!t.checkDCE}}return e},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(e,t,n,r){if(!re)throw Error(o(363));e=Ga(e,t);var i=ue(e,n,r).disconnect;return{disconnect:function(){i()}}},t.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},t.runWithPriority=function(e,t){var n=Dt;try{return Dt=e,t()}finally{Dt=n}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(e,t,n,r){var i=t.current,a=_o(),o=wo(i);return n=ls(n),null===t.context?t.context=n:t.pendingContext=n,(t=gn(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),vn(i,t),null!==(e=Mo(i,o,a))&&yn(e,i,o),o},t}},2576:(e,t,n)=>{"use strict";e.exports=n(6511)},6525:(e,t,n)=>{"use strict";e.exports=n(7287)},2546:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>a(l,n))c<i&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<i&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function _(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,I(w);else{var t=r(u);null!==t&&k(_,t.startTime-e)}}function w(e,n){m=!1,g&&(g=!1,y(E),E=-1),p=!0;var a=f;try{for(x(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!R());){var o=h.callback;if("function"==typeof o){h.callback=null,f=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"==typeof s?h.callback=s:h===r(c)&&i(c),x(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&k(_,d.startTime-n),l=!1}return l}finally{h=null,f=a,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var M,S=!1,A=null,E=-1,C=5,T=-1;function R(){return!(t.unstable_now()-T<C)}function P(){if(null!==A){var e=t.unstable_now();T=e;var n=!0;try{n=A(!0,e)}finally{n?M():(S=!1,A=null)}}else S=!1}if("function"==typeof b)M=function(){b(P)};else if("undefined"!=typeof MessageChannel){var L=new MessageChannel,D=L.port2;L.port1.onmessage=P,M=function(){D.postMessage(null)}}else M=function(){v(P,0)};function I(e){A=e,S||(S=!0,M())}function k(e,n){E=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,I(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?o+a:o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(u,e),null===r(c)&&e===r(u)&&(g?(y(E),E=-1):g=!0,k(_,a-o))):(e.sortIndex=s,n(c,e),m||p||(m=!0,I(w))),e},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},373:(e,t,n)=>{"use strict";e.exports=n(2546)},5251:(e,t,n)=>{"use strict";var r=n(7294),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:a,_owner:s.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},2408:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator,p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var x=b.prototype=new y;x.constructor=b,m(x,v.prototype),x.isPureReactComponent=!0;var _=Array.isArray,w=Object.prototype.hasOwnProperty,M={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===a[i]&&(a[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:M.current}}function E(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function T(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function R(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===a?"."+T(l,0):a,_(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),R(o,t,i,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(l=0,a=""===a?".":a+":",_(e))for(var c=0;c<e.length;c++){var u=a+T(s=e[c],c);l+=R(s,t,i,u,o)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=R(s=s.value,t,i,u=a+T(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],i=0;return R(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function L(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},I={transition:null},k={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:I,ReactCurrentOwner:M};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=a,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=M.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=A,t.createFactory=function(e){var t=A.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:L}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=I.transition;I.transition={};try{e()}finally{I.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.1.0"},7294:(e,t,n)=>{"use strict";e.exports=n(2408)},5893:(e,t,n)=>{"use strict";e.exports=n(5251)},6150:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.x2o3=t.j3oj2=t.j4=t.j3=t.j2=t.tumin=t.vkmpersec=t.xke=t.earthRadius=t.mu=t.minutesPerDay=t.rad2deg=t.deg2rad=t.twoPi=t.pi=void 0;var n=Math.PI;t.pi=n;var r=2*n;t.twoPi=r;var i=n/180;t.deg2rad=i;var a=180/n;t.rad2deg=a,t.minutesPerDay=1440;t.mu=398600.5;var o=6378.137;t.earthRadius=o;var s=60/Math.sqrt(650944.0944816993);t.xke=s;var l=o*s/60;t.vkmpersec=l;var c=1/s;t.tumin=c;t.j2=.00108262998905;t.j3=-253215306e-14,t.j4=-161098761e-14,t.j3oj2=-.0023388905587420003,t.x2o3=2/3},5793:(e,t)=>{"use strict";function n(e,t){for(var n=[31,e%4==0?29:28,31,30,31,30,31,31,30,31,30,31],r=Math.floor(t),i=1,a=0;r>a+n[i-1]&&i<12;)a+=n[i-1],i+=1;var o=i,s=r-a,l=24*(t-r),c=Math.floor(l);l=60*(l-c);var u=Math.floor(l);return{mon:o,day:s,hr:c,minute:u,sec:60*(l-u)}}function r(e,t,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;return 367*e-Math.floor(7*(e+Math.floor((t+9)/12))*.25)+Math.floor(275*t/9)+n+1721013.5+((o/6e4+a/60+i)/60+r)/24}Object.defineProperty(t,"__esModule",{value:!0}),t.days2mdhms=n,t.jday=function(e,t,n,i,a,o,s){if(e instanceof Date){var l=e;return r(l.getUTCFullYear(),l.getUTCMonth()+1,l.getUTCDate(),l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds())}return r(e,t,n,i,a,o,s)},t.invjday=function(e,t){var r=e-2415019.5,i=r/365.25,a=1900+Math.floor(i),o=Math.floor(.25*(a-1901)),s=r-(365*(a-1900)+o)+1e-11;s<1&&(s=r-(365*((a-=1)-1900)+(o=Math.floor(.25*(a-1901)))));var l=n(a,s),c=l.mon,u=l.day,d=l.hr,h=l.minute,f=l.sec-864e-9;return t?[a,c,u,d,h,Math.floor(f)]:new Date(Date.UTC(a,c-1,u,d,h,Math.floor(f)))}},3909:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,i,a,o,s,l,c,u,d,h,f,p,m,g,v,y,b,x,_=e.e3,w=e.ee2,M=e.peo,S=e.pgho,A=e.pho,E=e.pinco,C=e.plo,T=e.se2,R=e.se3,P=e.sgh2,L=e.sgh3,D=e.sgh4,I=e.sh2,k=e.sh3,B=e.si2,F=e.si3,N=e.sl2,O=e.sl3,z=e.sl4,U=e.t,H=e.xgh2,G=e.xgh3,V=e.xgh4,j=e.xh2,W=e.xh3,X=e.xi2,q=e.xi3,Y=e.xl2,Z=e.xl3,J=e.xl4,$=e.zmol,K=e.zmos,Q=t.init,ee=t.opsmode,te=t.ep,ne=t.inclp,re=t.nodep,ie=t.argpp,ae=t.mp;x=K+119459e-10*U,"y"===Q&&(x=K),b=x+.0335*Math.sin(x);var oe=T*(c=.5*(g=Math.sin(b))*g-.25)+R*(u=-.5*g*Math.cos(b)),se=B*c+F*u,le=N*c+O*u+z*g,ce=P*c+L*u+D*g,ue=I*c+k*u;return x=$+.00015835218*U,"y"===Q&&(x=$),b=x+.1098*Math.sin(x),d=oe+(w*(c=.5*(g=Math.sin(b))*g-.25)+_*(u=-.5*g*Math.cos(b))),p=se+(X*c+q*u),m=le+(Y*c+Z*u+J*g),h=ce+(H*c+G*u+V*g),f=ue+(j*c+W*u),"n"===Q&&(m-=C,h-=S,f-=A,ne+=p-=E,te+=d-=M,o=Math.sin(ne),a=Math.cos(ne),ne>=.2?(ie+=h-=a*(f/=o),re+=f,ae+=m):(n=o*(l=Math.sin(re)),i=o*(s=Math.cos(re)),n+=f*s+p*a*l,i+=-f*l+p*a*s,(re%=r.twoPi)<0&&"a"===ee&&(re+=r.twoPi),v=ae+ie+a*re,v+=m+h-p*re*o,y=re,(re=Math.atan2(n,i))<0&&"a"===ee&&(re+=r.twoPi),Math.abs(y-re)>r.pi&&(re<y?re+=r.twoPi:re-=r.twoPi),ie=v-(ae+=m)-a*re)),{ep:te,inclp:ne,nodep:re,argpp:ie,mp:ae}};var r=n(6150)},9621:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n,i,a,o,s,l,c,u,d,h,f,p,m,g,v,y,b,x,_,w,M,S,A,E,C,T,R,P,L,D,I,k,B,F,N,O,z,U,H,G,V,j,W,X,q,Y,Z,J,$,K,Q,ee,te,ne,re,ie,ae,oe,se,le,ce,ue,de=e.epoch,he=e.ep,fe=e.argpp,pe=e.tc,me=e.inclp,ge=e.nodep,ve=.01675,ye=.0549,be=e.np,xe=he,_e=Math.sin(ge),we=Math.cos(ge),Me=Math.sin(fe),Se=Math.cos(fe),Ae=Math.sin(me),Ee=Math.cos(me),Ce=xe*xe,Te=1-Ce,Re=Math.sqrt(Te),Pe=de+18261.5+pe/1440,Le=(4.523602-.00092422029*Pe)%r.twoPi,De=Math.sin(Le),Ie=Math.cos(Le),ke=.91375164-.03568096*Ie,Be=Math.sqrt(1-ke*ke),Fe=.089683511*De/Be,Ne=Math.sqrt(1-Fe*Fe),Oe=5.8351514+.001944368*Pe,ze=.39785416*De/Be,Ue=Ne*Ie+.91744867*Fe*De;ze=Math.atan2(ze,Ue),ze+=Oe-Le;var He=Math.cos(ze),Ge=Math.sin(ze);_=.1945905,w=-.98088458,A=.91744867,E=.39785416,M=we,S=_e,h=29864797e-13;for(var Ve=1/be,je=0;je<2;)ne=-6*(t=_*M+w*A*S)*(o=-Ae*(l=-_*S+w*A*M)+Ee*(c=w*E))+Ce*(-24*(f=t*Se+(n=Ee*l+Ae*c)*Me)*(b=o*Se)-6*(m=-t*Me+n*Se)*(v=o*Me)),re=-6*(t*(s=-Ae*(u=w*S+_*A*M)+Ee*(d=_*E))+(i=-w*M+_*A*S)*o)+Ce*(-24*((p=i*Se+(a=Ee*u+Ae*d)*Me)*b+f*(x=s*Se))+-6*(m*(y=s*Me)+(g=-i*Me+a*Se)*v)),ie=-6*i*s+Ce*(-24*p*x-6*g*y),ae=6*n*o+Ce*(24*f*v-6*m*b),oe=6*(a*o+n*s)+Ce*(24*(p*v+f*y)-6*(g*b+m*x)),se=6*a*s+Ce*(24*p*y-6*g*x),Q=(Q=3*(t*t+n*n)+(le=12*f*f-3*m*m)*Ce)+Q+Te*le,ee=(ee=6*(t*i+n*a)+(ce=24*f*p-6*m*g)*Ce)+ee+Te*ce,te=(te=3*(i*i+a*a)+(ue=12*p*p-3*g*g)*Ce)+te+Te*ue,q=-.5*(Y=h*Ve)/Re,X=-15*xe*(Z=Y*Re),J=f*m+p*g,$=p*m+f*g,K=p*g-f*m,1===(je+=1)&&(C=X,T=q,R=Y,P=Z,L=J,D=$,I=K,k=Q,B=ee,F=te,N=ne,O=re,z=ie,U=ae,H=oe,G=se,V=le,j=ce,W=ue,_=He,w=Ge,A=ke,E=Be,M=Ne*we+Fe*_e,S=_e*Ne-we*Fe,h=4.7968065e-7);return{snodm:_e,cnodm:we,sinim:Ae,cosim:Ee,sinomm:Me,cosomm:Se,day:Pe,e3:2*X*K,ee2:2*X*$,em:xe,emsq:Ce,gam:Oe,peo:0,pgho:0,pho:0,pinco:0,plo:0,rtemsq:Re,se2:2*C*D,se3:2*C*I,sgh2:2*P*j,sgh3:2*P*(W-V),sgh4:-18*P*ve,sh2:-2*T*H,sh3:-2*T*(G-U),si2:2*T*O,si3:2*T*(z-N),sl2:-2*R*B,sl3:-2*R*(F-k),sl4:-2*R*(-21-9*Ce)*ve,s1:X,s2:q,s3:Y,s4:Z,s5:J,s6:$,s7:K,ss1:C,ss2:T,ss3:R,ss4:P,ss5:L,ss6:D,ss7:I,sz1:k,sz2:B,sz3:F,sz11:N,sz12:O,sz13:z,sz21:U,sz22:H,sz23:G,sz31:V,sz32:j,sz33:W,xgh2:2*Z*ce,xgh3:2*Z*(ue-le),xgh4:-18*Z*ye,xh2:-2*q*oe,xh3:-2*q*(se-ae),xi2:2*q*re,xi3:2*q*(ie-ne),xl2:-2*Y*ee,xl3:-2*Y*(te-Q),xl4:-2*Y*(-21-9*Ce)*ye,nm:be,z1:Q,z2:ee,z3:te,z11:ne,z12:re,z13:ie,z21:ae,z22:oe,z23:se,z31:le,z32:ce,z33:ue,zmol:(.2299715*Pe-Oe+4.7199672)%r.twoPi,zmos:(6.2565837+.017201977*Pe)%r.twoPi}};var r=n(6150)},3343:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n,i,a,o,s,l,c,u,d,h,f,p,m,g,v,y,b=e.cosim,x=e.argpo,_=e.s1,w=e.s2,M=e.s3,S=e.s4,A=e.s5,E=e.sinim,C=e.ss1,T=e.ss2,R=e.ss3,P=e.ss4,L=e.ss5,D=e.sz1,I=e.sz3,k=e.sz11,B=e.sz13,F=e.sz21,N=e.sz23,O=e.sz31,z=e.sz33,U=e.t,H=e.tc,G=e.gsto,V=e.mo,j=e.mdot,W=e.no,X=e.nodeo,q=e.nodedot,Y=e.xpidot,Z=e.z1,J=e.z3,$=e.z11,K=e.z13,Q=e.z21,ee=e.z23,te=e.z31,ne=e.z33,re=e.ecco,ie=e.eccsq,ae=e.emsq,oe=e.em,se=e.argpm,le=e.inclm,ce=e.mm,ue=e.nm,de=e.nodem,he=e.irez,fe=e.atime,pe=e.d2201,me=e.d2211,ge=e.d3210,ve=e.d3222,ye=e.d4410,be=e.d4422,xe=e.d5220,_e=e.d5232,we=e.d5421,Me=e.d5433,Se=e.dedt,Ae=e.didt,Ee=e.dmdt,Ce=e.dnodt,Te=e.domdt,Re=e.del1,Pe=e.del2,Le=e.del3,De=e.xfact,Ie=e.xlamo,ke=e.xli,Be=e.xni,Fe=.0043752690880113,Ne=.00015835218,Oe=119459e-10;he=0,ue<.0052359877&&ue>.0034906585&&(he=1),ue>=.00826&&ue<=.00924&&oe>=.5&&(he=2);var ze=C*Oe*L,Ue=T*Oe*(k+B),He=-Oe*R*(D+I-14-6*ae),Ge=P*Oe*(O+z-6),Ve=-Oe*T*(F+N);(le<.052359877||le>r.pi-.052359877)&&(Ve=0),0!==E&&(Ve/=E);var je=Ge-b*Ve;Se=ze+_*Ne*A,Ae=Ue+w*Ne*($+K),Ee=He-Ne*M*(Z+J-14-6*ae);var We=S*Ne*(te+ne-6),Xe=-Ne*w*(Q+ee);(le<.052359877||le>r.pi-.052359877)&&(Xe=0),Te=je+We,Ce=Ve,0!==E&&(Te-=b/E*Xe,Ce+=Xe/E);var qe=(G+H*Fe)%r.twoPi;if(oe+=Se*U,le+=Ae*U,se+=Te*U,de+=Ce*U,ce+=Ee*U,0!==he){if(g=Math.pow(ue/r.xke,r.x2o3),2===he){var Ye=oe,Ze=ae;y=(oe=re)*(ae=ie),oe<=.65?(i=3.616-13.247*oe+16.29*ae,a=117.39*oe-19.302-228.419*ae+156.591*y,o=109.7927*oe-18.9068-214.6334*ae+146.5816*y,s=242.694*oe-41.122-471.094*ae+313.953*y,l=841.88*oe-146.407-1629.014*ae+1083.435*y,c=3017.977*oe-532.114-5740.032*ae+3708.276*y):(i=331.819*oe-72.099-508.738*ae+266.724*y,a=1582.851*oe-346.844-2415.925*ae+1246.113*y,o=1554.908*oe-342.585-2366.899*ae+1215.972*y,s=4758.686*oe-1052.797-7193.992*ae+3651.957*y,l=16178.11*oe-3581.69-24462.77*ae+12422.52*y,c=oe>.715?29936.92*oe-5149.66-54087.36*ae+31324.56*y:1464.74-4664.75*oe+3763.64*ae),oe<.7?(h=4988.61*oe-919.2277-9064.77*ae+5542.21*y,u=4568.6173*oe-822.71072-8491.4146*ae+5337.524*y,d=4690.25*oe-853.666-8624.77*ae+5341.4*y):(h=161616.52*oe-37995.78-229838.2*ae+109377.94*y,u=218913.95*oe-51752.104-309468.16*ae+146349.42*y,d=170470.89*oe-40023.88-242699.48*ae+115605.82*y),pe=(p=17891679e-13*(m=ue*ue*3*(g*g)))*(t=.75*(1+2*b+(v=b*b)))*(-.306-.44*(oe-.64)),me=p*(1.5*(f=E*E))*i,ge=(p=3.7393792e-7*(m*=g))*(1.875*E*(1-2*b-3*v))*a,ve=p*(-1.875*E*(1+2*b-3*v))*o,ye=(p=2*(m*=g)*7.3636953e-9)*(35*f*t)*s,be=p*(39.375*f*f)*l,xe=(p=1.1428639e-7*(m*=g))*(9.84375*E*(f*(1-2*b-5*v)+.33333333*(4*b-2+6*v)))*c,_e=p*(E*(4.92187512*f*(-2-4*b+10*v)+6.56250012*(1+2*b-3*v)))*d,we=(p=2*m*2.1765803e-9)*(29.53125*E*(2-8*b+v*(8*b-12+10*v)))*u,Me=p*(29.53125*E*(-2-8*b+v*(12+8*b-10*v)))*h,Ie=(V+X+X-(qe+qe))%r.twoPi,De=j+Ee+2*(q+Ce-Fe)-W,oe=Ye,ae=Ze}1===he&&(n=1+b,Pe=2*(Re=3*ue*ue*g*g)*(t=.75*(1+b)*(1+b))*(1+ae*(.8125*ae-2.5))*17891679e-13,Le=3*Re*(n*=1.875*n*n)*(1+ae*(6.60937*ae-6))*2.2123015e-7*g,Re=Re*(.9375*E*E*(1+3*b)-.75*(1+b))*(a=1+2*ae)*21460748e-13*g,Ie=(V+X+x-qe)%r.twoPi,De=j+Y+Ee+Te+Ce-(W+Fe)),ke=Ie,Be=W,fe=0,ue=W+0}return{em:oe,argpm:se,inclm:le,mm:ce,nm:ue,nodem:de,irez:he,atime:fe,d2201:pe,d2211:me,d3210:ge,d3222:ve,d4410:ye,d4422:be,d5220:xe,d5232:_e,d5421:we,d5433:Me,dedt:Se,didt:Ae,dmdt:Ee,dndt:0,dnodt:Ce,domdt:Te,del1:Re,del2:Pe,del3:Le,xfact:De,xlamo:Ie,xli:ke,xni:Be}};var r=n(6150)},6145:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n,i,a,o,s,l,c,u=e.irez,d=e.d2201,h=e.d2211,f=e.d3210,p=e.d3222,m=e.d4410,g=e.d4422,v=e.d5220,y=e.d5232,b=e.d5421,x=e.d5433,_=e.dedt,w=e.del1,M=e.del2,S=e.del3,A=e.didt,E=e.dmdt,C=e.dnodt,T=e.domdt,R=e.argpo,P=e.argpdot,L=e.t,D=e.tc,I=e.gsto,k=e.xfact,B=e.xlamo,F=e.no,N=e.atime,O=e.em,z=e.argpm,U=e.inclm,H=e.xli,G=e.mm,V=e.xni,j=e.nodem,W=e.nm,X=.13130908,q=2.8843198,Y=.37448087,Z=5.7686396,J=.95240898,$=1.8014998,K=1.050833,Q=4.4108898,ee=259200,te=0,ne=0,re=(I+.0043752690880113*D)%r.twoPi;if(O+=_*L,U+=A*L,z+=T*L,j+=C*L,G+=E*L,0!==u){(0===N||L*N<=0||Math.abs(L)<Math.abs(N))&&(N=0,V=F,H=B),t=L>0?720:-720;for(var ie=381;381===ie;)2!==u?(l=w*Math.sin(H-X)+M*Math.sin(2*(H-q))+S*Math.sin(3*(H-Y)),o=V+k,s=w*Math.cos(H-X)+2*M*Math.cos(2*(H-q))+3*S*Math.cos(3*(H-Y)),s*=o):(i=(c=R+P*N)+c,n=H+H,l=d*Math.sin(i+H-Z)+h*Math.sin(H-Z)+f*Math.sin(c+H-J)+p*Math.sin(-c+H-J)+m*Math.sin(i+n-$)+g*Math.sin(n-$)+v*Math.sin(c+H-K)+y*Math.sin(-c+H-K)+b*Math.sin(c+n-Q)+x*Math.sin(-c+n-Q),o=V+k,s=d*Math.cos(i+H-Z)+h*Math.cos(H-Z)+f*Math.cos(c+H-J)+p*Math.cos(-c+H-J)+v*Math.cos(c+H-K)+y*Math.cos(-c+H-K)+2*m*Math.cos(i+n-$)+g*Math.cos(n-$)+b*Math.cos(c+n-Q)+x*Math.cos(-c+n-Q),s*=o),Math.abs(L-N)>=720?ie=381:(ne=L-N,ie=0),381===ie&&(H+=o*t+l*ee,V+=l*t+s*ee,N+=t);W=V+l*ne+s*ne*ne*.5,a=H+o*ne+l*ne*ne*.5,1!==u?(G=a-2*j+2*re,te=W-F):(G=a-j-z+re,te=W-F),W=F+te}return{atime:N,em:O,argpm:z,inclm:U,xli:H,mm:G,xni:V,nodem:j,dndt:te,nm:W}};var r=n(6150)},32:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(arguments.length<=0?void 0:arguments[0])instanceof Date||arguments.length>1?a(i.jday.apply(void 0,arguments)):a.apply(void 0,arguments)};var r=n(6150),i=n(5793);function a(e){var t=(e-2451545)/36525,n=-62e-7*t*t*t+.093104*t*t+3164400184.812866*t+67310.54841;return(n=n*r.deg2rad/240%r.twoPi)<0&&(n+=r.twoPi),n}},298:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.ecco,n=e.epoch,r=e.inclo,o=e.opsmode,s=e.no,l=t*t,c=1-l,u=Math.sqrt(c),d=Math.cos(r),h=d*d,f=Math.pow(i.xke/s,i.x2o3),p=.75*i.j2*(3*h-1)/(u*c),m=p/(f*f),g=f*(1-m*m-m*(1/3+134*m*m/81));s/=1+(m=p/(g*g));var v,y=Math.pow(i.xke/s,i.x2o3),b=Math.sin(r),x=y*c,_=1-5*h,w=-_-h-h,M=1/y,S=x*x,A=y*(1-t);if("a"===o){var E=n-7305,C=Math.floor(E+1e-8),T=E-C,R=.017202791694070362;(v=(1.7321343856509375+R*C+(R+i.twoPi)*T+E*E*5075514194322695e-30)%i.twoPi)<0&&(v+=i.twoPi)}else v=(0,a.default)(n+2433281.5);return{no:s,method:"n",ainv:M,ao:y,con41:w,con42:_,cosio:d,cosio2:h,eccsq:l,omeosq:c,posq:S,rp:A,rteosq:u,sinio:b,gsto:v}};var r,i=n(6150),a=(r=n(32))&&r.__esModule?r:{default:r}},285:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,o,s,l,c,u,d,h,f,p,m,g,v,y,b,x,_,w,M,S,A,E,C,T,R,P;e.t=t,e.error=0;var L=e.mo+e.mdot*e.t,D=e.argpo+e.argpdot*e.t,I=e.nodeo+e.nodedot*e.t;h=D,S=L;var k=e.t*e.t;if(E=I+e.nodecf*k,x=1-e.cc1*e.t,_=e.bstar*e.cc4*e.t,w=e.t2cof*k,1!==e.isimp){u=e.omgcof*e.t;var B=1+e.eta*Math.cos(L);S=L+(b=u+e.xmcof*(B*B*B-e.delmo)),h=D-b,g=(m=k*e.t)*e.t,x=x-e.d2*k-e.d3*m-e.d4*g,_+=e.bstar*e.cc5*(Math.sin(S)-e.sinmao),w=w+e.t3cof*m+g*(e.t4cof+e.t*e.t5cof)}A=e.no;var F=e.ecco;if(M=e.inclo,"d"===e.method){v=e.t;var N={irez:e.irez,d2201:e.d2201,d2211:e.d2211,d3210:e.d3210,d3222:e.d3222,d4410:e.d4410,d4422:e.d4422,d5220:e.d5220,d5232:e.d5232,d5421:e.d5421,d5433:e.d5433,dedt:e.dedt,del1:e.del1,del2:e.del2,del3:e.del3,didt:e.didt,dmdt:e.dmdt,dnodt:e.dnodt,domdt:e.domdt,argpo:e.argpo,argpdot:e.argpdot,t:e.t,tc:v,gsto:e.gsto,xfact:e.xfact,xlamo:e.xlamo,no:e.no,atime:e.atime,em:F,argpm:h,inclm:M,xli:e.xli,mm:S,xni:e.xni,nodem:E,nm:A},O=(0,a.default)(N);F=O.em,h=O.argpm,M=O.inclm,S=O.mm,E=O.nodem,A=O.nm}if(A<=0)return e.error=2,[!1,!1];var z=Math.pow(r.xke/A,r.x2o3)*x*x;if(A=r.xke/Math.pow(z,1.5),(F-=_)>=1||F<-.001)return e.error=1,[!1,!1];F<1e-6&&(F=1e-6),T=(S+=e.no*w)+h+E,E%=r.twoPi;var U=F;if(C=M,f=h%=r.twoPi,P=E,R=S=((T%=r.twoPi)-h-E)%r.twoPi,l=Math.sin(M),s=Math.cos(M),"d"===e.method){var H={inclo:e.inclo,init:"n",ep:U,inclp:C,nodep:P,argpp:f,mp:R,opsmode:e.operationmode},G=(0,i.default)(e,H);if(U=G.ep,P=G.nodep,f=G.argpp,R=G.mp,(C=G.inclp)<0&&(C=-C,P+=r.pi,f-=r.pi),U<0||U>1)return e.error=3,[!1,!1]}"d"===e.method&&(l=Math.sin(C),s=Math.cos(C),e.aycof=-.5*r.j3oj2*l,Math.abs(s+1)>15e-13?e.xlcof=-.25*r.j3oj2*l*(3+5*s)/(1+s):e.xlcof=-.25*r.j3oj2*l*(3+5*s)/15e-13);var V=U*Math.cos(f);b=1/(z*(1-U*U));var j=U*Math.sin(f)+b*e.aycof,W=(R+f+P+b*e.xlcof*V-P)%r.twoPi;d=W,y=9999.9;for(var X=1;Math.abs(y)>=1e-12&&X<=10;)o=Math.sin(d),y=(W-j*(n=Math.cos(d))+V*o-d)/(y=1-n*V-o*j),Math.abs(y)>=.95&&(y=y>0?.95:-.95),d+=y,X+=1;var q=V*n+j*o,Y=V*o-j*n,Z=V*V+j*j,J=z*(1-Z);if(J<0)return e.error=4,[!1,!1];var $=z*(1-q),K=Math.sqrt(z)*Y/$,Q=Math.sqrt(J)/$,ee=Math.sqrt(1-Z),te=z/$*(o-j-V*(b=Y/(1+ee))),ne=z/$*(n-V+j*b);p=Math.atan2(te,ne);var re=(ne+ne)*te,ie=1-2*te*te;b=1/J;var ae=.5*r.j2*b,oe=ae*b;"d"===e.method&&(c=s*s,e.con41=3*c-1,e.x1mth2=1-c,e.x7thm1=7*c-1);var se=$*(1-1.5*oe*ee*e.con41)+.5*ae*e.x1mth2*ie;if(se<1)return e.error=6,{position:!1,velocity:!1};p-=.25*oe*e.x7thm1*re;var le=P+1.5*oe*s*re,ce=C+1.5*oe*s*l*ie,ue=K-A*ae*e.x1mth2*re/r.xke,de=Q+A*ae*(e.x1mth2*ie+1.5*e.con41)/r.xke,he=Math.sin(p),fe=Math.cos(p),pe=Math.sin(le),me=Math.cos(le),ge=Math.sin(ce),ve=Math.cos(ce),ye=-pe*ve,be=me*ve,xe=ye*he+me*fe,_e=be*he+pe*fe,we=ge*he,Me=ye*fe-me*he,Se=be*fe-pe*he,Ae=ge*fe;return{position:{x:se*xe*r.earthRadius,y:se*_e*r.earthRadius,z:se*we*r.earthRadius},velocity:{x:(ue*xe+de*Me)*r.vkmpersec,y:(ue*_e+de*Se)*r.vkmpersec,z:(ue*we+de*Ae)*r.vkmpersec}}};var r=n(6150),i=o(n(3909)),a=o(n(6145));function o(e){return e&&e.__esModule?e:{default:e}}},5931:(e,t,n)=>{"use strict";t.Z=function(e,t){var n,c,u,d,h,f,p,m,g,v,y,b,x,_,w,M,S,A,E,C,T,R,P,L,D,I,k,B,F,N,O,z,U,H,G,V,j,W,X,q,Y,Z,J,$,K,Q,ee,te,ne,re,ie,ae,oe=t.opsmode,se=t.satn,le=t.epoch,ce=t.xbstar,ue=t.xecco,de=t.xargpo,he=t.xinclo,fe=t.xmo,pe=t.xno,me=t.xnodeo;e.isimp=0,e.method="n",e.aycof=0,e.con41=0,e.cc1=0,e.cc4=0,e.cc5=0,e.d2=0,e.d3=0,e.d4=0,e.delmo=0,e.eta=0,e.argpdot=0,e.omgcof=0,e.sinmao=0,e.t=0,e.t2cof=0,e.t3cof=0,e.t4cof=0,e.t5cof=0,e.x1mth2=0,e.x7thm1=0,e.mdot=0,e.nodedot=0,e.xlcof=0,e.xmcof=0,e.nodecf=0,e.irez=0,e.d2201=0,e.d2211=0,e.d3210=0,e.d3222=0,e.d4410=0,e.d4422=0,e.d5220=0,e.d5232=0,e.d5421=0,e.d5433=0,e.dedt=0,e.del1=0,e.del2=0,e.del3=0,e.didt=0,e.dmdt=0,e.dnodt=0,e.domdt=0,e.e3=0,e.ee2=0,e.peo=0,e.pgho=0,e.pho=0,e.pinco=0,e.plo=0,e.se2=0,e.se3=0,e.sgh2=0,e.sgh3=0,e.sgh4=0,e.sh2=0,e.sh3=0,e.si2=0,e.si3=0,e.sl2=0,e.sl3=0,e.sl4=0,e.gsto=0,e.xfact=0,e.xgh2=0,e.xgh3=0,e.xgh4=0,e.xh2=0,e.xh3=0,e.xi2=0,e.xi3=0,e.xl2=0,e.xl3=0,e.xl4=0,e.xlamo=0,e.zmol=0,e.zmos=0,e.atime=0,e.xli=0,e.xni=0,e.bstar=ce,e.ecco=ue,e.argpo=de,e.inclo=he,e.mo=fe,e.no=pe,e.nodeo=me,e.operationmode=oe;var ge=78/r.earthRadius+1,ve=42/r.earthRadius,ye=ve*ve*ve*ve;e.init="y",e.t=0;var be={satn:se,ecco:e.ecco,epoch:le,inclo:e.inclo,no:e.no,method:e.method,opsmode:e.operationmode},xe=(0,s.default)(be),_e=xe.ao,we=xe.con42,Me=xe.cosio,Se=xe.cosio2,Ae=xe.eccsq,Ee=xe.omeosq,Ce=xe.posq,Te=xe.rp,Re=xe.rteosq,Pe=xe.sinio;if(e.no=xe.no,e.con41=xe.con41,e.gsto=xe.gsto,e.error=0,Ee>=0||e.no>=0){if(e.isimp=0,Te<220/r.earthRadius+1&&(e.isimp=1),L=ge,A=ye,(w=(Te-1)*r.earthRadius)<156){L=w-78,w<98&&(L=20);var Le=(120-L)/r.earthRadius;A=Le*Le*Le*Le,L=L/r.earthRadius+1}M=1/Ce,Z=1/(_e-L),e.eta=_e*e.ecco*Z,b=e.eta*e.eta,y=e.ecco*e.eta,S=Math.abs(1-b),d=(p=(f=A*Math.pow(Z,4))/Math.pow(S,3.5))*e.no*(_e*(1+1.5*b+y*(4+b))+.375*r.j2*Z/S*e.con41*(8+3*b*(8+b))),e.cc1=e.bstar*d,h=0,e.ecco>1e-4&&(h=-2*f*Z*r.j3oj2*e.no*Pe/e.ecco),e.x1mth2=1-Se,e.cc4=2*e.no*p*_e*Ee*(e.eta*(2+.5*b)+e.ecco*(.5+2*b)-r.j2*Z/(_e*S)*(-3*e.con41*(1-2*y+b*(1.5-.5*y))+.75*e.x1mth2*(2*b-y*(1+b))*Math.cos(2*e.argpo))),e.cc5=2*p*_e*Ee*(1+2.75*(b+y)+y*b),m=Se*Se,q=.5*(X=1.5*r.j2*M*e.no)*r.j2*M,Y=-.46875*r.j4*M*M*e.no,e.mdot=e.no+.5*X*Re*e.con41+.0625*q*Re*(13-78*Se+137*m),e.argpdot=-.5*X*we+.0625*q*(7-114*Se+395*m)+Y*(3-36*Se+49*m),$=-X*Me,e.nodedot=$+(.5*q*(4-19*Se)+2*Y*(3-7*Se))*Me,J=e.argpdot+e.nodedot,e.omgcof=e.bstar*h*Math.cos(e.argpo),e.xmcof=0,e.ecco>1e-4&&(e.xmcof=-r.x2o3*f*e.bstar/y),e.nodecf=3.5*Ee*$*e.cc1,e.t2cof=1.5*e.cc1,Math.abs(Me+1)>15e-13?e.xlcof=-.25*r.j3oj2*Pe*(3+5*Me)/(1+Me):e.xlcof=-.25*r.j3oj2*Pe*(3+5*Me)/15e-13,e.aycof=-.5*r.j3oj2*Pe;var De=1+e.eta*Math.cos(e.mo);if(e.delmo=De*De*De,e.sinmao=Math.sin(e.mo),e.x7thm1=7*Se-1,2*r.pi/e.no>=225){e.method="d",e.isimp=1,x=e.inclo;var Ie={epoch:le,ep:e.ecco,argpp:e.argpo,tc:0,inclp:e.inclo,nodep:e.nodeo,np:e.no,e3:e.e3,ee2:e.ee2,peo:e.peo,pgho:e.pgho,pho:e.pho,pinco:e.pinco,plo:e.plo,se2:e.se2,se3:e.se3,sgh2:e.sgh2,sgh3:e.sgh3,sgh4:e.sgh4,sh2:e.sh2,sh3:e.sh3,si2:e.si2,si3:e.si3,sl2:e.sl2,sl3:e.sl3,sl4:e.sl4,xgh2:e.xgh2,xgh3:e.xgh3,xgh4:e.xgh4,xh2:e.xh2,xh3:e.xh3,xi2:e.xi2,xi3:e.xi3,xl2:e.xl2,xl3:e.xl3,xl4:e.xl4,zmol:e.zmol,zmos:e.zmos},ke=(0,a.default)(Ie);e.e3=ke.e3,e.ee2=ke.ee2,e.peo=ke.peo,e.pgho=ke.pgho,e.pho=ke.pho,e.pinco=ke.pinco,e.plo=ke.plo,e.se2=ke.se2,e.se3=ke.se3,e.sgh2=ke.sgh2,e.sgh3=ke.sgh3,e.sgh4=ke.sgh4,e.sh2=ke.sh2,e.sh3=ke.sh3,e.si2=ke.si2,e.si3=ke.si3,e.sl2=ke.sl2,e.sl3=ke.sl3,e.sl4=ke.sl4,c=ke.sinim,n=ke.cosim,g=ke.em,v=ke.emsq,E=ke.s1,C=ke.s2,T=ke.s3,R=ke.s4,P=ke.s5,D=ke.ss1,I=ke.ss2,k=ke.ss3,B=ke.ss4,F=ke.ss5,N=ke.sz1,O=ke.sz3,z=ke.sz11,U=ke.sz13,H=ke.sz21,G=ke.sz23,V=ke.sz31,j=ke.sz33,e.xgh2=ke.xgh2,e.xgh3=ke.xgh3,e.xgh4=ke.xgh4,e.xh2=ke.xh2,e.xh3=ke.xh3,e.xi2=ke.xi2,e.xi3=ke.xi3,e.xl2=ke.xl2,e.xl3=ke.xl3,e.xl4=ke.xl4,e.zmol=ke.zmol,e.zmos=ke.zmos,_=ke.nm,K=ke.z1,Q=ke.z3,ee=ke.z11,te=ke.z13,ne=ke.z21,re=ke.z23,ie=ke.z31,ae=ke.z33;var Be={inclo:x,init:e.init,ep:e.ecco,inclp:e.inclo,nodep:e.nodeo,argpp:e.argpo,mp:e.mo,opsmode:e.operationmode},Fe=(0,i.default)(e,Be);e.ecco=Fe.ep,e.inclo=Fe.inclp,e.nodeo=Fe.nodep,e.argpo=Fe.argpp,e.mo=Fe.mp;var Ne={cosim:n,emsq:v,argpo:e.argpo,s1:E,s2:C,s3:T,s4:R,s5:P,sinim:c,ss1:D,ss2:I,ss3:k,ss4:B,ss5:F,sz1:N,sz3:O,sz11:z,sz13:U,sz21:H,sz23:G,sz31:V,sz33:j,t:e.t,tc:0,gsto:e.gsto,mo:e.mo,mdot:e.mdot,no:e.no,nodeo:e.nodeo,nodedot:e.nodedot,xpidot:J,z1:K,z3:Q,z11:ee,z13:te,z21:ne,z23:re,z31:ie,z33:ae,ecco:e.ecco,eccsq:Ae,em:g,argpm:0,inclm:x,mm:0,nm:_,nodem:0,irez:e.irez,atime:e.atime,d2201:e.d2201,d2211:e.d2211,d3210:e.d3210,d3222:e.d3222,d4410:e.d4410,d4422:e.d4422,d5220:e.d5220,d5232:e.d5232,d5421:e.d5421,d5433:e.d5433,dedt:e.dedt,didt:e.didt,dmdt:e.dmdt,dnodt:e.dnodt,domdt:e.domdt,del1:e.del1,del2:e.del2,del3:e.del3,xfact:e.xfact,xlamo:e.xlamo,xli:e.xli,xni:e.xni},Oe=(0,o.default)(Ne);e.irez=Oe.irez,e.atime=Oe.atime,e.d2201=Oe.d2201,e.d2211=Oe.d2211,e.d3210=Oe.d3210,e.d3222=Oe.d3222,e.d4410=Oe.d4410,e.d4422=Oe.d4422,e.d5220=Oe.d5220,e.d5232=Oe.d5232,e.d5421=Oe.d5421,e.d5433=Oe.d5433,e.dedt=Oe.dedt,e.didt=Oe.didt,e.dmdt=Oe.dmdt,e.dnodt=Oe.dnodt,e.domdt=Oe.domdt,e.del1=Oe.del1,e.del2=Oe.del2,e.del3=Oe.del3,e.xfact=Oe.xfact,e.xlamo=Oe.xlamo,e.xli=Oe.xli,e.xni=Oe.xni}1!==e.isimp&&(u=e.cc1*e.cc1,e.d2=4*_e*Z*u,W=e.d2*Z*e.cc1/3,e.d3=(17*_e+L)*W,e.d4=.5*W*_e*Z*(221*_e+31*L)*e.cc1,e.t3cof=e.d2+2*u,e.t4cof=.25*(3*e.d3+e.cc1*(12*e.d2+10*u)),e.t5cof=.2*(3*e.d4+12*e.cc1*e.d3+6*e.d2*e.d2+15*u*(2*e.d2+u)))}(0,l.default)(e,0,0),e.init="n"};var r=n(6150),i=c(n(3909)),a=c(n(9621)),o=c(n(3343)),s=c(n(298)),l=c(n(285));function c(e){return e&&e.__esModule?e:{default:e}}},53:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>a(l,n))c<i&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<i&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function _(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,I(w);else{var t=r(u);null!==t&&k(_,t.startTime-e)}}function w(e,n){m=!1,g&&(g=!1,y(E),E=-1),p=!0;var a=f;try{for(x(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!R());){var o=h.callback;if("function"==typeof o){h.callback=null,f=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"==typeof s?h.callback=s:h===r(c)&&i(c),x(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&k(_,d.startTime-n),l=!1}return l}finally{h=null,f=a,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var M,S=!1,A=null,E=-1,C=5,T=-1;function R(){return!(t.unstable_now()-T<C)}function P(){if(null!==A){var e=t.unstable_now();T=e;var n=!0;try{n=A(!0,e)}finally{n?M():(S=!1,A=null)}}else S=!1}if("function"==typeof b)M=function(){b(P)};else if("undefined"!=typeof MessageChannel){var L=new MessageChannel,D=L.port2;L.port1.onmessage=P,M=function(){D.postMessage(null)}}else M=function(){v(P,0)};function I(e){A=e,S||(S=!0,M())}function k(e,n){E=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,I(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?o+a:o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(u,e),null===r(c)&&e===r(u)&&(g?(y(E),E=-1):g=!0,k(_,a-o))):(e.sortIndex=s,n(c,e),m||p||(m=!0,I(w))),e},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},3840:(e,t,n)=>{"use strict";e.exports=n(53)},3379:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var a={},o=[],s=0;s<e.length;s++){var l=e[s],c=r.base?l[0]+r.base:l[0],u=a[c]||0,d="".concat(c," ").concat(u);a[c]=u+1;var h=n(d),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(f);else{var p=i(f,r);r.byIndex=s,t.splice(s,0,{identifier:d,updater:p,references:1})}o.push(d)}return o}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var a=r(e=e||[],i=i||{});return function(e){e=e||[];for(var o=0;o<a.length;o++){var s=n(a[o]);t[s].references--}for(var l=r(e,i),c=0;c<a.length;c++){var u=n(a[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}a=l}}},569:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},9216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},1742:e=>{e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},4633:e=>{function t(e,t){var n=e.length,r=new Array(n),i={},a=n,o=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++){var i=e[n];t.has(i[0])||t.set(i[0],new Set),t.has(i[1])||t.set(i[1],new Set),t.get(i[0]).add(i[1])}return t}(t),s=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++)t.set(e[n],n);return t}(e);for(t.forEach((function(e){if(!s.has(e[0])||!s.has(e[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")}));a--;)i[a]||l(e[a],a,new Set);return r;function l(e,t,a){if(a.has(e)){var c;try{c=", node was:"+JSON.stringify(e)}catch(e){c=""}throw new Error("Cyclic dependency"+c)}if(!s.has(e))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(e));if(!i[t]){i[t]=!0;var u=o.get(e)||new Set;if(t=(u=Array.from(u)).length){a.add(e);do{var d=u[--t];l(d,s.get(d),a)}while(t);a.delete(e)}r[--n]=e}}}e.exports=function(e){return t(function(e){for(var t=new Set,n=0,r=e.length;n<r;n++){var i=e[n];t.add(i[0]),t.add(i[1])}return Array.from(t)}(e),e)},e.exports.array=t},3250:(e,t,n)=>{"use strict";var r=n(7294),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=r.useState,o=r.useEffect,s=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,u=r[1];return s((function(){i.value=n,i.getSnapshot=t,c(i)&&u({inst:i})}),[e,n,t]),o((function(){return c(i)&&u({inst:i}),e((function(){c(i)&&u({inst:i})}))}),[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},139:(e,t,n)=>{"use strict";var r=n(7294),i=n(1688),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=i.useSyncExternalStore,s=r.useRef,l=r.useEffect,c=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var d=s(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=c((function(){function e(e){if(!l){if(l=!0,o=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return s=t}return s=e}if(t=s,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,s=n)}var o,s,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var f=o(e,d[0],d[1]);return l((function(){h.hasValue=!0,h.value=f}),[f]),u(f),f}},1688:(e,t,n)=>{"use strict";e.exports=n(3250)},2798:(e,t,n)=>{"use strict";e.exports=n(139)},9501:(e,t,n)=>{"use strict";e.exports=n.p+"assets/e2c80bf557bd83ba4d5e.woff"},7319:(e,t,n)=>{"use strict";e.exports=n.p+"assets/d1f46e8be2215a5290d2.woff2"},1652:(e,t,n)=>{"use strict";e.exports=n.p+"assets/520f99c3cb4d7234ae6e.woff2"},4332:(e,t,n)=>{"use strict";e.exports=n.p+"assets/9a898b4c5f67effe33ec.woff"},7717:(e,t,n)=>{"use strict";e.exports=n.p+"assets/4e2be2493e6b196c4f4d.woff"},6753:(e,t,n)=>{"use strict";e.exports=n.p+"assets/7fa387951673abf164b1.woff2"},2529:(e,t,n)=>{"use strict";e.exports=n.p+"assets/dd5b2912dbf896310865.woff2"},8853:(e,t,n)=>{"use strict";e.exports=n.p+"assets/da26d162ff5af71d6590.woff2"},4319:(e,t,n)=>{"use strict";e.exports=n.p+"assets/6282a13cbba671a71913.woff2"},7467:(e,t,n)=>{"use strict";e.exports=n.p+"assets/7e78e8338af7efeda712.woff2"},2391:(e,t,n)=>{"use strict";e.exports=n.p+"assets/f282b331272463c1aa6c.woff2"},5232:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n="143",r=100,i=300,a=301,o=302,s=303,l=304,c=306,u=1e3,d=1001,h=1002,f=1003,p=1004,m=1005,g=1006,v=1007,y=1008,b=1009,x=1012,_=1014,w=1015,M=1016,S=1020,A=1023,E=1026,C=1027,T=33776,R=33777,P=33778,L=33779,D=35840,I=35841,k=35842,B=35843,F=37492,N=37496,O=37808,z=37809,U=37810,H=37811,G=37812,V=37813,j=37814,W=37815,X=37816,q=37817,Y=37818,Z=37819,J=37820,$=37821,K=36492,Q=2300,ee=2301,te=2302,ne=2400,re=2401,ie=2402,ae=2501,oe=3e3,se=3001,le="srgb",ce="srgb-linear",ue=7680,de=35044,he="300 es",fe=1035;class pe{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}const me=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let ge=1234567;const ve=Math.PI/180,ye=180/Math.PI;function be(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(me[255&e]+me[e>>8&255]+me[e>>16&255]+me[e>>24&255]+"-"+me[255&t]+me[t>>8&255]+"-"+me[t>>16&15|64]+me[t>>24&255]+"-"+me[63&n|128]+me[n>>8&255]+"-"+me[n>>16&255]+me[n>>24&255]+me[255&r]+me[r>>8&255]+me[r>>16&255]+me[r>>24&255]).toLowerCase()}function xe(e,t,n){return Math.max(t,Math.min(n,e))}function _e(e,t){return(e%t+t)%t}function we(e,t,n){return(1-n)*e+n*t}function Me(e){return 0==(e&e-1)&&0!==e}function Se(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function Ae(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}var Ee=Object.freeze({__proto__:null,DEG2RAD:ve,RAD2DEG:ye,generateUUID:be,clamp:xe,euclideanModulo:_e,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:we,damp:function(e,t,n,r){return we(e,t,1-Math.exp(-n*r))},pingpong:function(e,t=1){return t-Math.abs(_e(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(ge=e);let t=ge+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*ve},radToDeg:function(e){return e*ye},isPowerOfTwo:Me,ceilPowerOfTwo:Se,floorPowerOfTwo:Ae,setQuaternionFromProperEuler:function(e,t,n,r,i){const a=Math.cos,o=Math.sin,s=a(n/2),l=o(n/2),c=a((t+r)/2),u=o((t+r)/2),d=a((t-r)/2),h=o((t-r)/2),f=a((r-t)/2),p=o((r-t)/2);switch(i){case"XYX":e.set(s*u,l*d,l*h,s*c);break;case"YZY":e.set(l*h,s*u,l*d,s*c);break;case"ZXZ":e.set(l*d,l*h,s*u,s*c);break;case"XZX":e.set(s*u,l*p,l*f,s*c);break;case"YXY":e.set(l*f,s*u,l*p,s*c);break;case"ZYZ":e.set(l*p,l*f,s*u,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:function(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}},denormalize:function(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}});class Ce{constructor(e=0,t=0){Ce.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Te{constructor(){Te.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,r,i,a,o,s,l){const c=this.elements;return c[0]=e,c[1]=r,c[2]=o,c[3]=t,c[4]=i,c[5]=s,c[6]=n,c[7]=a,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[3],s=n[6],l=n[1],c=n[4],u=n[7],d=n[2],h=n[5],f=n[8],p=r[0],m=r[3],g=r[6],v=r[1],y=r[4],b=r[7],x=r[2],_=r[5],w=r[8];return i[0]=a*p+o*v+s*x,i[3]=a*m+o*y+s*_,i[6]=a*g+o*b+s*w,i[1]=l*p+c*v+u*x,i[4]=l*m+c*y+u*_,i[7]=l*g+c*b+u*w,i[2]=d*p+h*v+f*x,i[5]=d*m+h*y+f*_,i[8]=d*g+h*b+f*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8];return t*a*c-t*o*l-n*i*c+n*o*s+r*i*l-r*a*s}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=c*a-o*l,d=o*s-c*i,h=l*i-a*s,f=t*u+n*d+r*h;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);const p=1/f;return e[0]=u*p,e[1]=(r*l-c*n)*p,e[2]=(o*n-r*a)*p,e[3]=d*p,e[4]=(c*t-r*s)*p,e[5]=(r*i-o*t)*p,e[6]=h*p,e[7]=(n*s-l*t)*p,e[8]=(a*t-n*i)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,a,o){const s=Math.cos(i),l=Math.sin(i);return this.set(n*s,n*l,-n*(s*a+l*o)+a+e,-r*l,r*s,-r*(-l*a+s*o)+o+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],a=r[3],o=r[6],s=r[1],l=r[4],c=r[7];return r[0]=t*i+n*s,r[3]=t*a+n*l,r[6]=t*o+n*c,r[1]=-n*i+t*s,r[4]=-n*a+t*l,r[7]=-n*o+t*c,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function Re(e){for(let t=e.length-1;t>=0;--t)if(e[t]>65535)return!0;return!1}const Pe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Le(e,t){return new Pe[e](t)}function De(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function Ie(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function ke(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}const Be={[le]:{[ce]:Ie},[ce]:{[le]:ke}},Fe={legacyMode:!0,get workingColorSpace(){return ce},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(this.legacyMode||t===n||!t||!n)return e;if(Be[t]&&void 0!==Be[t][n]){const r=Be[t][n];return e.r=r(e.r),e.g=r(e.g),e.b=r(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},Ne={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Oe={r:0,g:0,b:0},ze={h:0,s:0,l:0},Ue={h:0,s:0,l:0};function He(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function Ge(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}class Ve{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t="srgb"){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Fe.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r="srgb-linear"){return this.r=e,this.g=t,this.b=n,Fe.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r="srgb-linear"){if(e=_e(e,1),t=xe(t,0,1),n=xe(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=He(i,r,e+1/3),this.g=He(i,r,e),this.b=He(i,r,e-1/3)}return Fe.toWorkingColorSpace(this,r),this}setStyle(e,t="srgb"){function n(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e;const i=r[1],a=r[2];switch(i){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,Fe.toWorkingColorSpace(this,t),n(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,Fe.toWorkingColorSpace(this,t),n(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const r=parseFloat(e[1])/360,i=parseInt(e[2],10)/100,a=parseInt(e[3],10)/100;return n(e[4]),this.setHSL(r,i,a,t)}}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const e=r[1],n=e.length;if(3===n)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,Fe.toWorkingColorSpace(this,t),this;if(6===n)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,Fe.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t="srgb"){const n=Ne[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ie(e.r),this.g=Ie(e.g),this.b=Ie(e.b),this}copyLinearToSRGB(e){return this.r=ke(e.r),this.g=ke(e.g),this.b=ke(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e="srgb"){return Fe.fromWorkingColorSpace(Ge(this,Oe),e),xe(255*Oe.r,0,255)<<16^xe(255*Oe.g,0,255)<<8^xe(255*Oe.b,0,255)<<0}getHexString(e="srgb"){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t="srgb-linear"){Fe.fromWorkingColorSpace(Ge(this,Oe),t);const n=Oe.r,r=Oe.g,i=Oe.b,a=Math.max(n,r,i),o=Math.min(n,r,i);let s,l;const c=(o+a)/2;if(o===a)s=0,l=0;else{const e=a-o;switch(l=c<=.5?e/(a+o):e/(2-a-o),a){case n:s=(r-i)/e+(r<i?6:0);break;case r:s=(i-n)/e+2;break;case i:s=(n-r)/e+4}s/=6}return e.h=s,e.s=l,e.l=c,e}getRGB(e,t="srgb-linear"){return Fe.fromWorkingColorSpace(Ge(this,Oe),t),e.r=Oe.r,e.g=Oe.g,e.b=Oe.b,e}getStyle(e="srgb"){return Fe.fromWorkingColorSpace(Ge(this,Oe),e),e!==le?`color(${e} ${Oe.r} ${Oe.g} ${Oe.b})`:`rgb(${255*Oe.r|0},${255*Oe.g|0},${255*Oe.b|0})`}offsetHSL(e,t,n){return this.getHSL(ze),ze.h+=e,ze.s+=t,ze.l+=n,this.setHSL(ze.h,ze.s,ze.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(ze),e.getHSL(Ue);const n=we(ze.h,Ue.h,t),r=we(ze.s,Ue.s,t),i=we(ze.l,Ue.l,t);return this.setHSL(n,r,i),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}let je;Ve.NAMES=Ne;class We{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===je&&(je=De("canvas")),je.width=e.width,je.height=e.height;const n=je.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=je}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=De("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let e=0;e<i.length;e++)i[e]=255*Ie(i[e]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*Ie(t[e]/255)):t[e]=Ie(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Xe{constructor(e=null){this.isSource=!0,this.uuid=be(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(qe(r[t].image)):e.push(qe(r[t]))}else e=qe(r);n.url=e}return t||(e.images[this.uuid]=n),n}}function qe(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?We.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Ye=0;class Ze extends pe{constructor(e=Ze.DEFAULT_IMAGE,t=Ze.DEFAULT_MAPPING,n=1001,r=1001,i=1006,a=1008,o=1023,s=1009,l=1,c=3e3){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Ye++}),this.uuid=be(),this.name="",this.source=new Xe(e),this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=a,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=s,this.offset=new Ce(0,0),this.repeat=new Ce(1,1),this.center=new Ce(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Te,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==i)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case u:e.x=e.x-Math.floor(e.x);break;case d:e.x=e.x<0?0:1;break;case h:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case u:e.y=e.y-Math.floor(e.y);break;case d:e.y=e.y<0?0:1;break;case h:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}Ze.DEFAULT_IMAGE=null,Ze.DEFAULT_MAPPING=i;class Je{constructor(e=0,t=0,n=0,r=1){Je.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const a=.01,o=.1,s=e.elements,l=s[0],c=s[4],u=s[8],d=s[1],h=s[5],f=s[9],p=s[2],m=s[6],g=s[10];if(Math.abs(c-d)<a&&Math.abs(u-p)<a&&Math.abs(f-m)<a){if(Math.abs(c+d)<o&&Math.abs(u+p)<o&&Math.abs(f+m)<o&&Math.abs(l+h+g-3)<o)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,s=(h+1)/2,v=(g+1)/2,y=(c+d)/4,b=(u+p)/4,x=(f+m)/4;return e>s&&e>v?e<a?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=y/n,i=b/n):s>v?s<a?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(s),n=y/r,i=x/r):v<a?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=b/i,r=x/i),this.set(n,r,i,t),this}let v=Math.sqrt((m-f)*(m-f)+(u-p)*(u-p)+(d-c)*(d-c));return Math.abs(v)<.001&&(v=1),this.x=(m-f)/v,this.y=(u-p)/v,this.z=(d-c)/v,this.w=Math.acos((l+h+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class $e extends pe{constructor(e,t,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Je(0,0,e,t),this.scissorTest=!1,this.viewport=new Je(0,0,e,t);const r={width:e,height:t,depth:1};this.texture=new Ze(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:g,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Xe(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ke extends Ze{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=f,this.minFilter=f,this.wrapR=d,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Qe extends Ze{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=f,this.minFilter=f,this.wrapR=d,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class et{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,i,a,o){let s=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3];const d=i[a+0],h=i[a+1],f=i[a+2],p=i[a+3];if(0===o)return e[t+0]=s,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===o)return e[t+0]=d,e[t+1]=h,e[t+2]=f,void(e[t+3]=p);if(u!==p||s!==d||l!==h||c!==f){let e=1-o;const t=s*d+l*h+c*f+u*p,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),a=Math.atan2(i,t*n);e=Math.sin(e*a)/i,o=Math.sin(o*a)/i}const i=o*n;if(s=s*e+d*i,l=l*e+h*i,c=c*e+f*i,u=u*e+p*i,e===1-o){const e=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=e,l*=e,c*=e,u*=e}}e[t]=s,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,r,i,a){const o=n[r],s=n[r+1],l=n[r+2],c=n[r+3],u=i[a],d=i[a+1],h=i[a+2],f=i[a+3];return e[t]=o*f+c*u+s*h-l*d,e[t+1]=s*f+c*d+l*u-o*h,e[t+2]=l*f+c*h+o*d-s*u,e[t+3]=c*f-o*u-s*d-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,r=e._y,i=e._z,a=e._order,o=Math.cos,s=Math.sin,l=o(n/2),c=o(r/2),u=o(i/2),d=s(n/2),h=s(r/2),f=s(i/2);switch(a){case"XYZ":this._x=d*c*u+l*h*f,this._y=l*h*u-d*c*f,this._z=l*c*f+d*h*u,this._w=l*c*u-d*h*f;break;case"YXZ":this._x=d*c*u+l*h*f,this._y=l*h*u-d*c*f,this._z=l*c*f-d*h*u,this._w=l*c*u+d*h*f;break;case"ZXY":this._x=d*c*u-l*h*f,this._y=l*h*u+d*c*f,this._z=l*c*f+d*h*u,this._w=l*c*u-d*h*f;break;case"ZYX":this._x=d*c*u-l*h*f,this._y=l*h*u+d*c*f,this._z=l*c*f-d*h*u,this._w=l*c*u+d*h*f;break;case"YZX":this._x=d*c*u+l*h*f,this._y=l*h*u+d*c*f,this._z=l*c*f-d*h*u,this._w=l*c*u-d*h*f;break;case"XZY":this._x=d*c*u-l*h*f,this._y=l*h*u-d*c*f,this._z=l*c*f+d*h*u,this._w=l*c*u+d*h*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],o=t[5],s=t[9],l=t[2],c=t[6],u=t[10],d=n+o+u;if(d>0){const e=.5/Math.sqrt(d+1);this._w=.25/e,this._x=(c-s)*e,this._y=(i-l)*e,this._z=(a-r)*e}else if(n>o&&n>u){const e=2*Math.sqrt(1+n-o-u);this._w=(c-s)/e,this._x=.25*e,this._y=(r+a)/e,this._z=(i+l)/e}else if(o>u){const e=2*Math.sqrt(1+o-n-u);this._w=(i-l)/e,this._x=(r+a)/e,this._y=.25*e,this._z=(s+c)/e}else{const e=2*Math.sqrt(1+u-n-o);this._w=(a-r)/e,this._x=(i+l)/e,this._y=(s+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(xe(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,a=e._w,o=t._x,s=t._y,l=t._z,c=t._w;return this._x=n*c+a*o+r*l-i*s,this._y=r*c+a*s+i*o-n*l,this._z=i*c+a*l+n*s-r*o,this._w=a*c-n*o-r*s-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,a=this._w;let o=a*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;const s=1-o*o;if(s<=Number.EPSILON){const e=1-t;return this._w=e*a+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(s),c=Math.atan2(l,o),u=Math.sin((1-t)*c)/l,d=Math.sin(t*c)/l;return this._w=a*u+this._w*d,this._x=n*u+this._x*d,this._y=r*u+this._y*d,this._z=i*u+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class tt{constructor(e=0,t=0,n=0){tt.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(rt.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(rt.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,l=s*t+a*r-o*n,c=s*n+o*t-i*r,u=s*r+i*n-a*t,d=-i*t-a*n-o*r;return this.x=l*s+d*-i+c*-o-u*-a,this.y=c*s+d*-a+u*-i-l*-o,this.z=u*s+d*-o+l*-a-c*-i,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return nt.copy(this).projectOnVector(e),this.sub(nt)}reflect(e){return this.sub(nt.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(xe(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const nt=new tt,rt=new et;class it{constructor(e=new tt(1/0,1/0,1/0),t=new tt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0;for(let s=0,l=e.length;s<l;s+=3){const l=e[s],c=e[s+1],u=e[s+2];l<t&&(t=l),c<n&&(n=c),u<r&&(r=u),l>i&&(i=l),c>a&&(a=c),u>o&&(o=u)}return this.min.set(t,n,r),this.max.set(i,a,o),this}setFromBufferAttribute(e){let t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0;for(let s=0,l=e.count;s<l;s++){const l=e.getX(s),c=e.getY(s),u=e.getZ(s);l<t&&(t=l),c<n&&(n=c),u<r&&(r=u),l>i&&(i=l),c>a&&(a=c),u>o&&(o=u)}return this.min.set(t,n,r),this.max.set(i,a,o),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=ot.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n)if(t&&null!=n.attributes&&void 0!==n.attributes.position){const t=n.attributes.position;for(let n=0,r=t.count;n<r;n++)ot.fromBufferAttribute(t,n).applyMatrix4(e.matrixWorld),this.expandByPoint(ot)}else null===n.boundingBox&&n.computeBoundingBox(),st.copy(n.boundingBox),st.applyMatrix4(e.matrixWorld),this.union(st);const r=e.children;for(let e=0,n=r.length;e<n;e++)this.expandByObject(r[e],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ot),ot.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(pt),mt.subVectors(this.max,pt),lt.subVectors(e.a,pt),ct.subVectors(e.b,pt),ut.subVectors(e.c,pt),dt.subVectors(ct,lt),ht.subVectors(ut,ct),ft.subVectors(lt,ut);let t=[0,-dt.z,dt.y,0,-ht.z,ht.y,0,-ft.z,ft.y,dt.z,0,-dt.x,ht.z,0,-ht.x,ft.z,0,-ft.x,-dt.y,dt.x,0,-ht.y,ht.x,0,-ft.y,ft.x,0];return!!yt(t,lt,ct,ut,mt)&&(t=[1,0,0,0,1,0,0,0,1],!!yt(t,lt,ct,ut,mt)&&(gt.crossVectors(dt,ht),t=[gt.x,gt.y,gt.z],yt(t,lt,ct,ut,mt)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return ot.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(ot).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(at[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),at[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),at[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),at[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),at[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),at[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),at[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),at[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(at)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const at=[new tt,new tt,new tt,new tt,new tt,new tt,new tt,new tt],ot=new tt,st=new it,lt=new tt,ct=new tt,ut=new tt,dt=new tt,ht=new tt,ft=new tt,pt=new tt,mt=new tt,gt=new tt,vt=new tt;function yt(e,t,n,r,i){for(let a=0,o=e.length-3;a<=o;a+=3){vt.fromArray(e,a);const o=i.x*Math.abs(vt.x)+i.y*Math.abs(vt.y)+i.z*Math.abs(vt.z),s=t.dot(vt),l=n.dot(vt),c=r.dot(vt);if(Math.max(-Math.max(s,l,c),Math.min(s,l,c))>o)return!1}return!0}const bt=new it,xt=new tt,_t=new tt,wt=new tt;class Mt{constructor(e=new tt,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):bt.setFromPoints(e).getCenter(n);let r=0;for(let t=0,i=e.length;t<i;t++)r=Math.max(r,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){wt.subVectors(e,this.center);const t=wt.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.add(wt.multiplyScalar(n/e)),this.radius+=n}return this}union(e){return!0===this.center.equals(e.center)?_t.set(0,0,1).multiplyScalar(e.radius):_t.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(xt.copy(e.center).add(_t)),this.expandByPoint(xt.copy(e.center).sub(_t)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const St=new tt,At=new tt,Et=new tt,Ct=new tt,Tt=new tt,Rt=new tt,Pt=new tt;class Lt{constructor(e=new tt,t=new tt(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,St)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=St.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(St.copy(this.direction).multiplyScalar(t).add(this.origin),St.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){At.copy(e).add(t).multiplyScalar(.5),Et.copy(t).sub(e).normalize(),Ct.copy(this.origin).sub(At);const i=.5*e.distanceTo(t),a=-this.direction.dot(Et),o=Ct.dot(this.direction),s=-Ct.dot(Et),l=Ct.lengthSq(),c=Math.abs(1-a*a);let u,d,h,f;if(c>0)if(u=a*s-o,d=a*o-s,f=i*c,u>=0)if(d>=-f)if(d<=f){const e=1/c;u*=e,d*=e,h=u*(u+a*d+2*o)+d*(a*u+d+2*s)+l}else d=i,u=Math.max(0,-(a*d+o)),h=-u*u+d*(d+2*s)+l;else d=-i,u=Math.max(0,-(a*d+o)),h=-u*u+d*(d+2*s)+l;else d<=-f?(u=Math.max(0,-(-a*i+o)),d=u>0?-i:Math.min(Math.max(-i,-s),i),h=-u*u+d*(d+2*s)+l):d<=f?(u=0,d=Math.min(Math.max(-i,-s),i),h=d*(d+2*s)+l):(u=Math.max(0,-(a*i+o)),d=u>0?i:Math.min(Math.max(-i,-s),i),h=-u*u+d*(d+2*s)+l);else d=a>0?-i:i,u=Math.max(0,-(a*d+o)),h=-u*u+d*(d+2*s)+l;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),r&&r.copy(Et).multiplyScalar(d).add(At),h}intersectSphere(e,t){St.subVectors(e.center,this.origin);const n=St.dot(this.direction),r=St.dot(St)-n*n,i=e.radius*e.radius;if(r>i)return null;const a=Math.sqrt(i-r),o=n-a,s=n+a;return o<0&&s<0?null:o<0?this.at(s,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,a,o,s;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,d=this.origin;return l>=0?(n=(e.min.x-d.x)*l,r=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,r=(e.min.x-d.x)*l),c>=0?(i=(e.min.y-d.y)*c,a=(e.max.y-d.y)*c):(i=(e.max.y-d.y)*c,a=(e.min.y-d.y)*c),n>a||i>r?null:((i>n||n!=n)&&(n=i),(a<r||r!=r)&&(r=a),u>=0?(o=(e.min.z-d.z)*u,s=(e.max.z-d.z)*u):(o=(e.max.z-d.z)*u,s=(e.min.z-d.z)*u),n>s||o>r?null:((o>n||n!=n)&&(n=o),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,St)}intersectTriangle(e,t,n,r,i){Tt.subVectors(t,e),Rt.subVectors(n,e),Pt.crossVectors(Tt,Rt);let a,o=this.direction.dot(Pt);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Ct.subVectors(this.origin,e);const s=a*this.direction.dot(Rt.crossVectors(Ct,Rt));if(s<0)return null;const l=a*this.direction.dot(Tt.cross(Ct));if(l<0)return null;if(s+l>o)return null;const c=-a*Ct.dot(Pt);return c<0?null:this.at(c/o,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Dt{constructor(){Dt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,r,i,a,o,s,l,c,u,d,h,f,p,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=a,g[9]=o,g[13]=s,g[2]=l,g[6]=c,g[10]=u,g[14]=d,g[3]=h,g[7]=f,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Dt).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/It.setFromMatrixColumn(e,0).length(),i=1/It.setFromMatrixColumn(e,1).length(),a=1/It.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){const e=a*c,n=a*u,r=o*c,i=o*u;t[0]=s*c,t[4]=-s*u,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-o*s,t[2]=i-e*l,t[6]=r+n*l,t[10]=a*s}else if("YXZ"===e.order){const e=s*c,n=s*u,r=l*c,i=l*u;t[0]=e+i*o,t[4]=r*o-n,t[8]=a*l,t[1]=a*u,t[5]=a*c,t[9]=-o,t[2]=n*o-r,t[6]=i+e*o,t[10]=a*s}else if("ZXY"===e.order){const e=s*c,n=s*u,r=l*c,i=l*u;t[0]=e-i*o,t[4]=-a*u,t[8]=r+n*o,t[1]=n+r*o,t[5]=a*c,t[9]=i-e*o,t[2]=-a*l,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){const e=a*c,n=a*u,r=o*c,i=o*u;t[0]=s*c,t[4]=r*l-n,t[8]=e*l+i,t[1]=s*u,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){const e=a*s,n=a*l,r=o*s,i=o*l;t[0]=s*c,t[4]=i-e*u,t[8]=r*u+n,t[1]=u,t[5]=a*c,t[9]=-o*c,t[2]=-l*c,t[6]=n*u+r,t[10]=e-i*u}else if("XZY"===e.order){const e=a*s,n=a*l,r=o*s,i=o*l;t[0]=s*c,t[4]=-u,t[8]=l*c,t[1]=e*u+i,t[5]=a*c,t[9]=n*u-r,t[2]=r*u-n,t[6]=o*c,t[10]=i*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Bt,e,Ft)}lookAt(e,t,n){const r=this.elements;return zt.subVectors(e,t),0===zt.lengthSq()&&(zt.z=1),zt.normalize(),Nt.crossVectors(n,zt),0===Nt.lengthSq()&&(1===Math.abs(n.z)?zt.x+=1e-4:zt.z+=1e-4,zt.normalize(),Nt.crossVectors(n,zt)),Nt.normalize(),Ot.crossVectors(zt,Nt),r[0]=Nt.x,r[4]=Ot.x,r[8]=zt.x,r[1]=Nt.y,r[5]=Ot.y,r[9]=zt.y,r[2]=Nt.z,r[6]=Ot.z,r[10]=zt.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[4],s=n[8],l=n[12],c=n[1],u=n[5],d=n[9],h=n[13],f=n[2],p=n[6],m=n[10],g=n[14],v=n[3],y=n[7],b=n[11],x=n[15],_=r[0],w=r[4],M=r[8],S=r[12],A=r[1],E=r[5],C=r[9],T=r[13],R=r[2],P=r[6],L=r[10],D=r[14],I=r[3],k=r[7],B=r[11],F=r[15];return i[0]=a*_+o*A+s*R+l*I,i[4]=a*w+o*E+s*P+l*k,i[8]=a*M+o*C+s*L+l*B,i[12]=a*S+o*T+s*D+l*F,i[1]=c*_+u*A+d*R+h*I,i[5]=c*w+u*E+d*P+h*k,i[9]=c*M+u*C+d*L+h*B,i[13]=c*S+u*T+d*D+h*F,i[2]=f*_+p*A+m*R+g*I,i[6]=f*w+p*E+m*P+g*k,i[10]=f*M+p*C+m*L+g*B,i[14]=f*S+p*T+m*D+g*F,i[3]=v*_+y*A+b*R+x*I,i[7]=v*w+y*E+b*P+x*k,i[11]=v*M+y*C+b*L+x*B,i[15]=v*S+y*T+b*D+x*F,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],o=e[5],s=e[9],l=e[13],c=e[2],u=e[6],d=e[10],h=e[14];return e[3]*(+i*s*u-r*l*u-i*o*d+n*l*d+r*o*h-n*s*h)+e[7]*(+t*s*h-t*l*d+i*a*d-r*a*h+r*l*c-i*s*c)+e[11]*(+t*l*u-t*o*h-i*a*u+n*a*h+i*o*c-n*l*c)+e[15]*(-r*o*c-t*s*u+t*o*d+r*a*u-n*a*d+n*s*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11],f=e[12],p=e[13],m=e[14],g=e[15],v=u*m*l-p*d*l+p*s*h-o*m*h-u*s*g+o*d*g,y=f*d*l-c*m*l-f*s*h+a*m*h+c*s*g-a*d*g,b=c*p*l-f*u*l+f*o*h-a*p*h-c*o*g+a*u*g,x=f*u*s-c*p*s-f*o*d+a*p*d+c*o*m-a*u*m,_=t*v+n*y+r*b+i*x;if(0===_)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/_;return e[0]=v*w,e[1]=(p*d*i-u*m*i-p*r*h+n*m*h+u*r*g-n*d*g)*w,e[2]=(o*m*i-p*s*i+p*r*l-n*m*l-o*r*g+n*s*g)*w,e[3]=(u*s*i-o*d*i-u*r*l+n*d*l+o*r*h-n*s*h)*w,e[4]=y*w,e[5]=(c*m*i-f*d*i+f*r*h-t*m*h-c*r*g+t*d*g)*w,e[6]=(f*s*i-a*m*i-f*r*l+t*m*l+a*r*g-t*s*g)*w,e[7]=(a*d*i-c*s*i+c*r*l-t*d*l-a*r*h+t*s*h)*w,e[8]=b*w,e[9]=(f*u*i-c*p*i-f*n*h+t*p*h+c*n*g-t*u*g)*w,e[10]=(a*p*i-f*o*i+f*n*l-t*p*l-a*n*g+t*o*g)*w,e[11]=(c*o*i-a*u*i-c*n*l+t*u*l+a*n*h-t*o*h)*w,e[12]=x*w,e[13]=(c*p*r-f*u*r+f*n*d-t*p*d-c*n*m+t*u*m)*w,e[14]=(f*o*r-a*p*r-f*n*s+t*p*s+a*n*m-t*o*m)*w,e[15]=(a*u*r-c*o*r+c*n*s-t*u*s-a*n*d+t*o*d)*w,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,o=e.y,s=e.z,l=i*a,c=i*o;return this.set(l*a+n,l*o-r*s,l*s+r*o,0,l*o+r*s,c*o+n,c*s-r*a,0,l*s-r*o,c*s+r*a,i*s*s+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,a){return this.set(1,n,i,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,a=t._y,o=t._z,s=t._w,l=i+i,c=a+a,u=o+o,d=i*l,h=i*c,f=i*u,p=a*c,m=a*u,g=o*u,v=s*l,y=s*c,b=s*u,x=n.x,_=n.y,w=n.z;return r[0]=(1-(p+g))*x,r[1]=(h+b)*x,r[2]=(f-y)*x,r[3]=0,r[4]=(h-b)*_,r[5]=(1-(d+g))*_,r[6]=(m+v)*_,r[7]=0,r[8]=(f+y)*w,r[9]=(m-v)*w,r[10]=(1-(d+p))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=It.set(r[0],r[1],r[2]).length();const a=It.set(r[4],r[5],r[6]).length(),o=It.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],kt.copy(this);const s=1/i,l=1/a,c=1/o;return kt.elements[0]*=s,kt.elements[1]*=s,kt.elements[2]*=s,kt.elements[4]*=l,kt.elements[5]*=l,kt.elements[6]*=l,kt.elements[8]*=c,kt.elements[9]*=c,kt.elements[10]*=c,t.setFromRotationMatrix(kt),n.x=i,n.y=a,n.z=o,this}makePerspective(e,t,n,r,i,a){const o=this.elements,s=2*i/(t-e),l=2*i/(n-r),c=(t+e)/(t-e),u=(n+r)/(n-r),d=-(a+i)/(a-i),h=-2*a*i/(a-i);return o[0]=s,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=l,o[9]=u,o[13]=0,o[2]=0,o[6]=0,o[10]=d,o[14]=h,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,n,r,i,a){const o=this.elements,s=1/(t-e),l=1/(n-r),c=1/(a-i),u=(t+e)*s,d=(n+r)*l,h=(a+i)*c;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-u,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-d,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-h,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const It=new tt,kt=new Dt,Bt=new tt(0,0,0),Ft=new tt(1,1,1),Nt=new tt,Ot=new tt,zt=new tt,Ut=new Dt,Ht=new et;class Gt{constructor(e=0,t=0,n=0,r=Gt.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,i=r[0],a=r[4],o=r[8],s=r[1],l=r[5],c=r[9],u=r[2],d=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(xe(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-xe(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,h),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-u,i),this._z=0);break;case"ZXY":this._x=Math.asin(xe(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,h),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-xe(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(xe(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,i)):(this._x=0,this._y=Math.atan2(o,h));break;case"XZY":this._z=Math.asin(-xe(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Ut.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Ut,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Ht.setFromEuler(this),this.setFromQuaternion(Ht,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}Gt.DefaultOrder="XYZ",Gt.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Vt{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let jt=0;const Wt=new tt,Xt=new et,qt=new Dt,Yt=new tt,Zt=new tt,Jt=new tt,$t=new et,Kt=new tt(1,0,0),Qt=new tt(0,1,0),en=new tt(0,0,1),tn={type:"added"},nn={type:"removed"};class rn extends pe{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:jt++}),this.uuid=be(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=rn.DefaultUp.clone();const e=new tt,t=new Gt,n=new et,r=new tt(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Dt},normalMatrix:{value:new Te}}),this.matrix=new Dt,this.matrixWorld=new Dt,this.matrixAutoUpdate=rn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Vt,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Xt.setFromAxisAngle(e,t),this.quaternion.multiply(Xt),this}rotateOnWorldAxis(e,t){return Xt.setFromAxisAngle(e,t),this.quaternion.premultiply(Xt),this}rotateX(e){return this.rotateOnAxis(Kt,e)}rotateY(e){return this.rotateOnAxis(Qt,e)}rotateZ(e){return this.rotateOnAxis(en,e)}translateOnAxis(e,t){return Wt.copy(e).applyQuaternion(this.quaternion),this.position.add(Wt.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Kt,e)}translateY(e){return this.translateOnAxis(Qt,e)}translateZ(e){return this.translateOnAxis(en,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(qt.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Yt.copy(e):Yt.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Zt.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?qt.lookAt(Zt,Yt,this.up):qt.lookAt(Yt,Zt,this.up),this.quaternion.setFromRotationMatrix(qt),r&&(qt.extractRotation(r.matrixWorld),Xt.setFromRotationMatrix(qt),this.quaternion.premultiply(Xt.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(tn)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(nn)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(nn)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),qt.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),qt.multiply(e.parent.matrixWorld)),e.applyMatrix4(qt),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Zt,e,Jt),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Zt,$t,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=a(e.geometries),r=a(e.materials),i=a(e.textures),o=a(e.images),s=a(e.shapes),l=a(e.skeletons),c=a(e.animations),u=a(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),o.length>0&&(n.images=o),s.length>0&&(n.shapes=s),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=r,n;function a(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const n=e.children[t];this.add(n.clone())}return this}}rn.DefaultUp=new tt(0,1,0),rn.DefaultMatrixAutoUpdate=!0;const an=new tt,on=new tt,sn=new tt,ln=new tt,cn=new tt,un=new tt,dn=new tt,hn=new tt,fn=new tt,pn=new tt;class mn{constructor(e=new tt,t=new tt,n=new tt){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),an.subVectors(e,t),r.cross(an);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){an.subVectors(r,t),on.subVectors(n,t),sn.subVectors(e,t);const a=an.dot(an),o=an.dot(on),s=an.dot(sn),l=on.dot(on),c=on.dot(sn),u=a*l-o*o;if(0===u)return i.set(-2,-1,-1);const d=1/u,h=(l*s-o*c)*d,f=(a*c-o*s)*d;return i.set(1-h-f,f,h)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,ln),ln.x>=0&&ln.y>=0&&ln.x+ln.y<=1}static getUV(e,t,n,r,i,a,o,s){return this.getBarycoord(e,t,n,r,ln),s.set(0,0),s.addScaledVector(i,ln.x),s.addScaledVector(a,ln.y),s.addScaledVector(o,ln.z),s}static isFrontFacing(e,t,n,r){return an.subVectors(n,t),on.subVectors(e,t),an.cross(on).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return an.subVectors(this.c,this.b),on.subVectors(this.a,this.b),.5*an.cross(on).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return mn.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return mn.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return mn.getUV(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return mn.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return mn.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let a,o;cn.subVectors(r,n),un.subVectors(i,n),hn.subVectors(e,n);const s=cn.dot(hn),l=un.dot(hn);if(s<=0&&l<=0)return t.copy(n);fn.subVectors(e,r);const c=cn.dot(fn),u=un.dot(fn);if(c>=0&&u<=c)return t.copy(r);const d=s*u-c*l;if(d<=0&&s>=0&&c<=0)return a=s/(s-c),t.copy(n).addScaledVector(cn,a);pn.subVectors(e,i);const h=cn.dot(pn),f=un.dot(pn);if(f>=0&&h<=f)return t.copy(i);const p=h*l-s*f;if(p<=0&&l>=0&&f<=0)return o=l/(l-f),t.copy(n).addScaledVector(un,o);const m=c*f-h*u;if(m<=0&&u-c>=0&&h-f>=0)return dn.subVectors(i,r),o=(u-c)/(u-c+(h-f)),t.copy(r).addScaledVector(dn,o);const g=1/(m+p+d);return a=p*g,o=d*g,t.copy(n).addScaledVector(cn,a).addScaledVector(un,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let gn=0;class vn extends pe{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:gn++}),this.uuid=be(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=r,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ue,this.stencilZFail=ue,this.stencilZPass=ue,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class yn extends vn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ve(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const bn=new tt,xn=new Ce;class _n{constructor(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=de,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),i=new Ve),t[n++]=i.r,t[n++]=i.g,t[n++]=i.b}return this}copyVector2sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),i=new Ce),t[n++]=i.x,t[n++]=i.y}return this}copyVector3sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),i=new tt),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z}return this}copyVector4sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),i=new Je),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z,t[n++]=i.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)xn.fromBufferAttribute(this,t),xn.applyMatrix3(e),this.setXY(t,xn.x,xn.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)bn.fromBufferAttribute(this,t),bn.applyMatrix3(e),this.setXYZ(t,bn.x,bn.y,bn.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)bn.fromBufferAttribute(this,t),bn.applyMatrix4(e),this.setXYZ(t,bn.x,bn.y,bn.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)bn.fromBufferAttribute(this,t),bn.applyNormalMatrix(e),this.setXYZ(t,bn.x,bn.y,bn.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)bn.fromBufferAttribute(this,t),bn.transformDirection(e),this.setXYZ(t,bn.x,bn.y,bn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==de&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}class wn extends _n{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Mn extends _n{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Sn extends _n{constructor(e,t,n){super(new Float32Array(e),t,n)}}let An=0;const En=new Dt,Cn=new rn,Tn=new tt,Rn=new it,Pn=new it,Ln=new tt;class Dn extends pe{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:An++}),this.uuid=be(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Re(e)?Mn:wn)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new Te).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return En.makeRotationFromQuaternion(e),this.applyMatrix4(En),this}rotateX(e){return En.makeRotationX(e),this.applyMatrix4(En),this}rotateY(e){return En.makeRotationY(e),this.applyMatrix4(En),this}rotateZ(e){return En.makeRotationZ(e),this.applyMatrix4(En),this}translate(e,t,n){return En.makeTranslation(e,t,n),this.applyMatrix4(En),this}scale(e,t,n){return En.makeScale(e,t,n),this.applyMatrix4(En),this}lookAt(e){return Cn.lookAt(e),Cn.updateMatrix(),this.applyMatrix4(Cn.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Tn).negate(),this.translate(Tn.x,Tn.y,Tn.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Sn(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new it);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new tt(-1/0,-1/0,-1/0),new tt(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];Rn.setFromBufferAttribute(n),this.morphTargetsRelative?(Ln.addVectors(this.boundingBox.min,Rn.min),this.boundingBox.expandByPoint(Ln),Ln.addVectors(this.boundingBox.max,Rn.max),this.boundingBox.expandByPoint(Ln)):(this.boundingBox.expandByPoint(Rn.min),this.boundingBox.expandByPoint(Rn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Mt);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new tt,1/0);if(e){const n=this.boundingSphere.center;if(Rn.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];Pn.setFromBufferAttribute(n),this.morphTargetsRelative?(Ln.addVectors(Rn.min,Pn.min),Rn.expandByPoint(Ln),Ln.addVectors(Rn.max,Pn.max),Rn.expandByPoint(Ln)):(Rn.expandByPoint(Pn.min),Rn.expandByPoint(Pn.max))}Rn.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)Ln.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(Ln));if(t)for(let i=0,a=t.length;i<a;i++){const a=t[i],o=this.morphTargetsRelative;for(let t=0,i=a.count;t<i;t++)Ln.fromBufferAttribute(a,t),o&&(Tn.fromBufferAttribute(e,t),Ln.add(Tn)),r=Math.max(r,n.distanceToSquared(Ln))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,r=t.position.array,i=t.normal.array,a=t.uv.array,o=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new _n(new Float32Array(4*o),4));const s=this.getAttribute("tangent").array,l=[],c=[];for(let e=0;e<o;e++)l[e]=new tt,c[e]=new tt;const u=new tt,d=new tt,h=new tt,f=new Ce,p=new Ce,m=new Ce,g=new tt,v=new tt;function y(e,t,n){u.fromArray(r,3*e),d.fromArray(r,3*t),h.fromArray(r,3*n),f.fromArray(a,2*e),p.fromArray(a,2*t),m.fromArray(a,2*n),d.sub(u),h.sub(u),p.sub(f),m.sub(f);const i=1/(p.x*m.y-m.x*p.y);isFinite(i)&&(g.copy(d).multiplyScalar(m.y).addScaledVector(h,-p.y).multiplyScalar(i),v.copy(h).multiplyScalar(p.x).addScaledVector(d,-m.x).multiplyScalar(i),l[e].add(g),l[t].add(g),l[n].add(g),c[e].add(v),c[t].add(v),c[n].add(v))}let b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(let e=0,t=b.length;e<t;++e){const t=b[e],r=t.start;for(let e=r,i=r+t.count;e<i;e+=3)y(n[e+0],n[e+1],n[e+2])}const x=new tt,_=new tt,w=new tt,M=new tt;function S(e){w.fromArray(i,3*e),M.copy(w);const t=l[e];x.copy(t),x.sub(w.multiplyScalar(w.dot(t))).normalize(),_.crossVectors(M,t);const n=_.dot(c[e])<0?-1:1;s[4*e]=x.x,s[4*e+1]=x.y,s[4*e+2]=x.z,s[4*e+3]=n}for(let e=0,t=b.length;e<t;++e){const t=b[e],r=t.start;for(let e=r,i=r+t.count;e<i;e+=3)S(n[e+0]),S(n[e+1]),S(n[e+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new _n(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new tt,i=new tt,a=new tt,o=new tt,s=new tt,l=new tt,c=new tt,u=new tt;if(e)for(let d=0,h=e.count;d<h;d+=3){const h=e.getX(d+0),f=e.getX(d+1),p=e.getX(d+2);r.fromBufferAttribute(t,h),i.fromBufferAttribute(t,f),a.fromBufferAttribute(t,p),c.subVectors(a,i),u.subVectors(r,i),c.cross(u),o.fromBufferAttribute(n,h),s.fromBufferAttribute(n,f),l.fromBufferAttribute(n,p),o.add(c),s.add(c),l.add(c),n.setXYZ(h,o.x,o.y,o.z),n.setXYZ(f,s.x,s.y,s.z),n.setXYZ(p,l.x,l.y,l.z)}else for(let e=0,o=t.count;e<o;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),a.fromBufferAttribute(t,e+2),c.subVectors(a,i),u.subVectors(r,i),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const r in n){if(void 0===e.attributes[r])continue;const i=n[r].array,a=e.attributes[r],o=a.array,s=a.itemSize*t,l=Math.min(o.length,i.length-s);for(let e=0,t=s;e<l;e++,t++)i[t]=o[e]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Ln.fromBufferAttribute(e,t),Ln.normalize(),e.setXYZ(t,Ln.x,Ln.y,Ln.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,a=new n.constructor(t.length*r);let o=0,s=0;for(let i=0,l=t.length;i<l;i++){o=e.isInterleavedBufferAttribute?t[i]*e.data.stride+e.offset:t[i]*r;for(let e=0;e<r;e++)a[s++]=n[o++]}return new _n(a,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Dn,n=this.index.array,r=this.attributes;for(const i in r){const a=e(r[i],n);t.setAttribute(i,a)}const i=this.morphAttributes;for(const r in i){const a=[],o=i[r];for(let t=0,r=o.length;t<r;t++){const r=e(o[t],n);a.push(r)}t.morphAttributes[r]=a}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let e=0,n=a.length;e<n;e++){const n=a[e];t.addGroup(n.start,n.count,n.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const t in n){const r=n[t];e.data.attributes[t]=r.toJSON(e.data)}const r={};let i=!1;for(const t in this.morphAttributes){const n=this.morphAttributes[t],a=[];for(let t=0,r=n.length;t<r;t++){const r=n[t];a.push(r.toJSON(e.data))}a.length>0&&(r[t]=a,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return null!==o&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const e in r){const n=r[e];this.setAttribute(e,n.clone(t))}const i=e.morphAttributes;for(const e in i){const n=[],r=i[e];for(let e=0,i=r.length;e<i;e++)n.push(r[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let e=0,t=a.length;e<t;e++){const t=a[e];this.addGroup(t.start,t.count,t.materialIndex)}const o=e.boundingBox;null!==o&&(this.boundingBox=o.clone());const s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const In=new Dt,kn=new Lt,Bn=new Mt,Fn=new tt,Nn=new tt,On=new tt,zn=new tt,Un=new tt,Hn=new tt,Gn=new tt,Vn=new tt,jn=new tt,Wn=new Ce,Xn=new Ce,qn=new Ce,Yn=new tt,Zn=new tt;class Jn extends rn{constructor(e=new Dn,t=new yn){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),Bn.copy(n.boundingSphere),Bn.applyMatrix4(i),!1===e.ray.intersectsSphere(Bn))return;if(In.copy(i).invert(),kn.copy(e.ray).applyMatrix4(In),null!==n.boundingBox&&!1===kn.intersectsBox(n.boundingBox))return;let a;const o=n.index,s=n.attributes.position,l=n.morphAttributes.position,c=n.morphTargetsRelative,u=n.attributes.uv,d=n.attributes.uv2,h=n.groups,f=n.drawRange;if(null!==o)if(Array.isArray(r))for(let n=0,i=h.length;n<i;n++){const i=h[n],p=r[i.materialIndex];for(let n=Math.max(i.start,f.start),r=Math.min(o.count,Math.min(i.start+i.count,f.start+f.count));n<r;n+=3){const r=o.getX(n),h=o.getX(n+1),f=o.getX(n+2);a=$n(this,p,e,kn,s,l,c,u,d,r,h,f),a&&(a.faceIndex=Math.floor(n/3),a.face.materialIndex=i.materialIndex,t.push(a))}}else for(let n=Math.max(0,f.start),i=Math.min(o.count,f.start+f.count);n<i;n+=3){const i=o.getX(n),h=o.getX(n+1),f=o.getX(n+2);a=$n(this,r,e,kn,s,l,c,u,d,i,h,f),a&&(a.faceIndex=Math.floor(n/3),t.push(a))}else if(void 0!==s)if(Array.isArray(r))for(let n=0,i=h.length;n<i;n++){const i=h[n],o=r[i.materialIndex];for(let n=Math.max(i.start,f.start),r=Math.min(s.count,Math.min(i.start+i.count,f.start+f.count));n<r;n+=3)a=$n(this,o,e,kn,s,l,c,u,d,n,n+1,n+2),a&&(a.faceIndex=Math.floor(n/3),a.face.materialIndex=i.materialIndex,t.push(a))}else for(let n=Math.max(0,f.start),i=Math.min(s.count,f.start+f.count);n<i;n+=3)a=$n(this,r,e,kn,s,l,c,u,d,n,n+1,n+2),a&&(a.faceIndex=Math.floor(n/3),t.push(a))}}function $n(e,t,n,r,i,a,o,s,l,c,u,d){Fn.fromBufferAttribute(i,c),Nn.fromBufferAttribute(i,u),On.fromBufferAttribute(i,d);const h=e.morphTargetInfluences;if(a&&h){Gn.set(0,0,0),Vn.set(0,0,0),jn.set(0,0,0);for(let e=0,t=a.length;e<t;e++){const t=h[e],n=a[e];0!==t&&(zn.fromBufferAttribute(n,c),Un.fromBufferAttribute(n,u),Hn.fromBufferAttribute(n,d),o?(Gn.addScaledVector(zn,t),Vn.addScaledVector(Un,t),jn.addScaledVector(Hn,t)):(Gn.addScaledVector(zn.sub(Fn),t),Vn.addScaledVector(Un.sub(Nn),t),jn.addScaledVector(Hn.sub(On),t)))}Fn.add(Gn),Nn.add(Vn),On.add(jn)}e.isSkinnedMesh&&(e.boneTransform(c,Fn),e.boneTransform(u,Nn),e.boneTransform(d,On));const f=function(e,t,n,r,i,a,o,s){let l;if(l=1===t.side?r.intersectTriangle(o,a,i,!0,s):r.intersectTriangle(i,a,o,2!==t.side,s),null===l)return null;Zn.copy(s),Zn.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(Zn);return c<n.near||c>n.far?null:{distance:c,point:Zn.clone(),object:e}}(e,t,n,r,Fn,Nn,On,Yn);if(f){s&&(Wn.fromBufferAttribute(s,c),Xn.fromBufferAttribute(s,u),qn.fromBufferAttribute(s,d),f.uv=mn.getUV(Yn,Fn,Nn,On,Wn,Xn,qn,new Ce)),l&&(Wn.fromBufferAttribute(l,c),Xn.fromBufferAttribute(l,u),qn.fromBufferAttribute(l,d),f.uv2=mn.getUV(Yn,Fn,Nn,On,Wn,Xn,qn,new Ce));const e={a:c,b:u,c:d,normal:new tt,materialIndex:0};mn.getNormal(Fn,Nn,On,e.normal),f.face=e}return f}class Kn extends Dn{constructor(e=1,t=1,n=1,r=1,i=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:a};const o=this;r=Math.floor(r),i=Math.floor(i),a=Math.floor(a);const s=[],l=[],c=[],u=[];let d=0,h=0;function f(e,t,n,r,i,a,f,p,m,g,v){const y=a/m,b=f/g,x=a/2,_=f/2,w=p/2,M=m+1,S=g+1;let A=0,E=0;const C=new tt;for(let a=0;a<S;a++){const o=a*b-_;for(let s=0;s<M;s++){const d=s*y-x;C[e]=d*r,C[t]=o*i,C[n]=w,l.push(C.x,C.y,C.z),C[e]=0,C[t]=0,C[n]=p>0?1:-1,c.push(C.x,C.y,C.z),u.push(s/m),u.push(1-a/g),A+=1}}for(let e=0;e<g;e++)for(let t=0;t<m;t++){const n=d+t+M*e,r=d+t+M*(e+1),i=d+(t+1)+M*(e+1),a=d+(t+1)+M*e;s.push(n,r,a),s.push(r,i,a),E+=6}o.addGroup(h,E,v),h+=E,d+=A}f("z","y","x",-1,-1,n,t,e,a,i,0),f("z","y","x",1,-1,n,t,-e,a,i,1),f("x","z","y",1,1,e,n,t,r,a,2),f("x","z","y",1,-1,e,n,-t,r,a,3),f("x","y","z",1,-1,e,t,n,r,i,4),f("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new Sn(l,3)),this.setAttribute("normal",new Sn(c,3)),this.setAttribute("uv",new Sn(u,2))}static fromJSON(e){return new Kn(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Qn(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function er(e){const t={};for(let n=0;n<e.length;n++){const r=Qn(e[n]);for(const e in r)t[e]=r[e]}return t}const tr={clone:Qn,merge:er};class nr extends vn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Qn(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const r=this.uniforms[n].value;r&&r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class rr extends rn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Dt,this.projectionMatrix=new Dt,this.projectionMatrixInverse=new Dt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class ir extends rr{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*ye*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*ve*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*ye*Math.atan(Math.tan(.5*ve*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*ve*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const a=this.view;if(null!==this.view&&this.view.enabled){const e=a.fullWidth,o=a.fullHeight;i+=a.offsetX*r/e,t-=a.offsetY*n/o,r*=a.width/e,n*=a.height/o}const o=this.filmOffset;0!==o&&(i+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const ar=90;class or extends rn{constructor(e,t,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const r=new ir(ar,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new tt(1,0,0)),this.add(r);const i=new ir(ar,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new tt(-1,0,0)),this.add(i);const a=new ir(ar,1,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(new tt(0,1,0)),this.add(a);const o=new ir(ar,1,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new tt(0,-1,0)),this.add(o);const s=new ir(ar,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new tt(0,0,1)),this.add(s);const l=new ir(ar,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new tt(0,0,-1)),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,i,a,o,s,l]=this.children,c=e.getRenderTarget(),u=e.toneMapping,d=e.xr.enabled;e.toneMapping=0,e.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,a),e.setRenderTarget(n,3),e.render(t,o),e.setRenderTarget(n,4),e.render(t,s),n.texture.generateMipmaps=h,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(c),e.toneMapping=u,e.xr.enabled=d,n.texture.needsPMREMUpdate=!0}}class sr extends Ze{constructor(e,t,n,r,i,o,s,l,c,u){super(e=void 0!==e?e:[],t=void 0!==t?t:a,n,r,i,o,s,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class lr extends $e{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new sr(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:g}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new Kn(5,5,5),o=new nr({name:"CubemapFromEquirect",uniforms:Qn(n),vertexShader:r,fragmentShader:i,side:1,blending:0});o.uniforms.tEquirect.value=t;const s=new Jn(a,o),l=t.minFilter;return t.minFilter===y&&(t.minFilter=g),new or(1,10,this).update(e,s),t.minFilter=l,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,n,r);e.setRenderTarget(i)}}const cr=new tt,ur=new tt,dr=new Te;class hr{constructor(e=new tt(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=cr.subVectors(n,t).cross(ur.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const n=e.delta(cr),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(n).multiplyScalar(i).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||dr.getNormalMatrix(e),r=this.coplanarPoint(cr).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const fr=new Mt,pr=new tt;class mr{constructor(e=new hr,t=new hr,n=new hr,r=new hr,i=new hr,a=new hr){this.planes=[e,t,n,r,i,a]}set(e,t,n,r,i,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],l=n[5],c=n[6],u=n[7],d=n[8],h=n[9],f=n[10],p=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return t[0].setComponents(o-r,u-s,p-d,y-m).normalize(),t[1].setComponents(o+r,u+s,p+d,y+m).normalize(),t[2].setComponents(o+i,u+l,p+h,y+g).normalize(),t[3].setComponents(o-i,u-l,p-h,y-g).normalize(),t[4].setComponents(o-a,u-c,p-f,y-v).normalize(),t[5].setComponents(o+a,u+c,p+f,y+v).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),fr.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(fr)}intersectsSprite(e){return fr.center.set(0,0,0),fr.radius=.7071067811865476,fr.applyMatrix4(e.matrixWorld),this.intersectsSphere(fr)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let e=0;e<6;e++)if(t[e].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(pr.x=r.normal.x>0?e.max.x:e.min.x,pr.y=r.normal.y>0?e.max.y:e.min.y,pr.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(pr)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function gr(){let e=null,t=!1,n=null,r=null;function i(t,a){n(t,a),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function vr(e,t){const n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const a=r.get(t);void 0===a?r.set(t,function(t,r){const i=t.array,a=t.usage,o=e.createBuffer();let s;if(e.bindBuffer(r,o),e.bufferData(r,i,a),t.onUploadCallback(),i instanceof Float32Array)s=e.FLOAT;else if(i instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");s=e.HALF_FLOAT}else s=e.UNSIGNED_SHORT;else if(i instanceof Int16Array)s=e.SHORT;else if(i instanceof Uint32Array)s=e.UNSIGNED_INT;else if(i instanceof Int32Array)s=e.INT;else if(i instanceof Int8Array)s=e.BYTE;else if(i instanceof Uint8Array)s=e.UNSIGNED_BYTE;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);s=e.UNSIGNED_BYTE}return{buffer:o,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,i)):a.version<t.version&&(function(t,r,i){const a=r.array,o=r.updateRange;e.bindBuffer(i,t),-1===o.count?e.bufferSubData(i,0,a):(n?e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a,o.offset,o.count):e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1)}(a.buffer,t,i),a.version=t.version)}}}class yr extends Dn{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,a=t/2,o=Math.floor(n),s=Math.floor(r),l=o+1,c=s+1,u=e/o,d=t/s,h=[],f=[],p=[],m=[];for(let e=0;e<c;e++){const t=e*d-a;for(let n=0;n<l;n++){const r=n*u-i;f.push(r,-t,0),p.push(0,0,1),m.push(n/o),m.push(1-e/s)}}for(let e=0;e<s;e++)for(let t=0;t<o;t++){const n=t+l*e,r=t+l*(e+1),i=t+1+l*(e+1),a=t+1+l*e;h.push(n,r,a),h.push(r,i,a)}this.setIndex(h),this.setAttribute("position",new Sn(f,3)),this.setAttribute("normal",new Sn(p,3)),this.setAttribute("uv",new Sn(m,2))}static fromJSON(e){return new yr(e.width,e.height,e.widthSegments,e.heightSegments)}}const br={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n\t\tfloat x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n\t\tfloat x2 = x * x;\n\t\tfloat x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n\t\treturn ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,\t0.0556434,\n\t\t-1.5371385,\t1.8760108, -0.2040259,\n\t\t-0.4985314,\t0.0415560,\t1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(\t\t0, 1,\t\t0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t\tf.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t\tf.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(\t1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,\t1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,\t1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},xr={common:{diffuse:{value:new Ve(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Te},uv2Transform:{value:new Te},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ce(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ve(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ve(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Te}},sprite:{diffuse:{value:new Ve(16777215)},opacity:{value:1},center:{value:new Ce(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Te}}},_r={basic:{uniforms:er([xr.common,xr.specularmap,xr.envmap,xr.aomap,xr.lightmap,xr.fog]),vertexShader:br.meshbasic_vert,fragmentShader:br.meshbasic_frag},lambert:{uniforms:er([xr.common,xr.specularmap,xr.envmap,xr.aomap,xr.lightmap,xr.emissivemap,xr.fog,xr.lights,{emissive:{value:new Ve(0)}}]),vertexShader:br.meshlambert_vert,fragmentShader:br.meshlambert_frag},phong:{uniforms:er([xr.common,xr.specularmap,xr.envmap,xr.aomap,xr.lightmap,xr.emissivemap,xr.bumpmap,xr.normalmap,xr.displacementmap,xr.fog,xr.lights,{emissive:{value:new Ve(0)},specular:{value:new Ve(1118481)},shininess:{value:30}}]),vertexShader:br.meshphong_vert,fragmentShader:br.meshphong_frag},standard:{uniforms:er([xr.common,xr.envmap,xr.aomap,xr.lightmap,xr.emissivemap,xr.bumpmap,xr.normalmap,xr.displacementmap,xr.roughnessmap,xr.metalnessmap,xr.fog,xr.lights,{emissive:{value:new Ve(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:br.meshphysical_vert,fragmentShader:br.meshphysical_frag},toon:{uniforms:er([xr.common,xr.aomap,xr.lightmap,xr.emissivemap,xr.bumpmap,xr.normalmap,xr.displacementmap,xr.gradientmap,xr.fog,xr.lights,{emissive:{value:new Ve(0)}}]),vertexShader:br.meshtoon_vert,fragmentShader:br.meshtoon_frag},matcap:{uniforms:er([xr.common,xr.bumpmap,xr.normalmap,xr.displacementmap,xr.fog,{matcap:{value:null}}]),vertexShader:br.meshmatcap_vert,fragmentShader:br.meshmatcap_frag},points:{uniforms:er([xr.points,xr.fog]),vertexShader:br.points_vert,fragmentShader:br.points_frag},dashed:{uniforms:er([xr.common,xr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:br.linedashed_vert,fragmentShader:br.linedashed_frag},depth:{uniforms:er([xr.common,xr.displacementmap]),vertexShader:br.depth_vert,fragmentShader:br.depth_frag},normal:{uniforms:er([xr.common,xr.bumpmap,xr.normalmap,xr.displacementmap,{opacity:{value:1}}]),vertexShader:br.meshnormal_vert,fragmentShader:br.meshnormal_frag},sprite:{uniforms:er([xr.sprite,xr.fog]),vertexShader:br.sprite_vert,fragmentShader:br.sprite_frag},background:{uniforms:{uvTransform:{value:new Te},t2D:{value:null}},vertexShader:br.background_vert,fragmentShader:br.background_frag},cube:{uniforms:er([xr.envmap,{opacity:{value:1}}]),vertexShader:br.cube_vert,fragmentShader:br.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:br.equirect_vert,fragmentShader:br.equirect_frag},distanceRGBA:{uniforms:er([xr.common,xr.displacementmap,{referencePosition:{value:new tt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:br.distanceRGBA_vert,fragmentShader:br.distanceRGBA_frag},shadow:{uniforms:er([xr.lights,xr.fog,{color:{value:new Ve(0)},opacity:{value:1}}]),vertexShader:br.shadow_vert,fragmentShader:br.shadow_frag}};function wr(e,t,n,r,i,a){const o=new Ve(0);let s,l,u=!0===i?0:1,d=null,h=0,f=null;function p(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,a)}return{getClearColor:function(){return o},setClearColor:function(e,t=1){o.set(e),u=t,p(o,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,p(o,u)},render:function(n,i){let a=!1,m=!0===i.isScene?i.background:null;m&&m.isTexture&&(m=t.get(m));const g=e.xr,v=g.getSession&&g.getSession();v&&"additive"===v.environmentBlendMode&&(m=null),null===m?p(o,u):m&&m.isColor&&(p(m,1),a=!0),(e.autoClear||a)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),m&&(m.isCubeTexture||m.mapping===c)?(void 0===l&&(l=new Jn(new Kn(1,1,1),new nr({name:"BackgroundCubeMaterial",uniforms:Qn(_r.cube.uniforms),vertexShader:_r.cube.vertexShader,fragmentShader:_r.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(l)),l.material.uniforms.envMap.value=m,l.material.uniforms.flipEnvMap.value=m.isCubeTexture&&!1===m.isRenderTargetTexture?-1:1,d===m&&h===m.version&&f===e.toneMapping||(l.material.needsUpdate=!0,d=m,h=m.version,f=e.toneMapping),l.layers.enableAll(),n.unshift(l,l.geometry,l.material,0,0,null)):m&&m.isTexture&&(void 0===s&&(s=new Jn(new yr(2,2),new nr({name:"BackgroundMaterial",uniforms:Qn(_r.background.uniforms),vertexShader:_r.background.vertexShader,fragmentShader:_r.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(s)),s.material.uniforms.t2D.value=m,!0===m.matrixAutoUpdate&&m.updateMatrix(),s.material.uniforms.uvTransform.value.copy(m.matrix),d===m&&h===m.version&&f===e.toneMapping||(s.material.needsUpdate=!0,d=m,h=m.version,f=e.toneMapping),s.layers.enableAll(),n.unshift(s,s.geometry,s.material,0,0,null))}}}function Mr(e,t,n,r){const i=e.getParameter(e.MAX_VERTEX_ATTRIBS),a=r.isWebGL2?null:t.get("OES_vertex_array_object"),o=r.isWebGL2||null!==a,s={},l=f(null);let c=l,u=!1;function d(t){return r.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function h(t){return r.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function f(e){const t=[],n=[],r=[];for(let e=0;e<i;e++)t[e]=0,n[e]=0,r[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function p(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function m(e){g(e,0)}function g(n,i){const a=c.newAttributes,o=c.enabledAttributes,s=c.attributeDivisors;a[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),s[n]!==i&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i)}function v(){const t=c.newAttributes,n=c.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function y(t,n,i,a,o,s){!0!==r.isWebGL2||i!==e.INT&&i!==e.UNSIGNED_INT?e.vertexAttribPointer(t,n,i,a,o,s):e.vertexAttribIPointer(t,n,i,o,s)}function b(){x(),u=!0,c!==l&&(c=l,d(c.object))}function x(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,h,b,x){let _=!1;if(o){const t=function(t,n,i){const o=!0===i.wireframe;let l=s[t.id];void 0===l&&(l={},s[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[o];return void 0===u&&(u=f(r.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),c[o]=u),u}(b,h,l);c!==t&&(c=t,d(c.object)),_=function(e,t,n,r){const i=c.attributes,a=t.attributes;let o=0;const s=n.getAttributes();for(const t in s)if(s[t].location>=0){const n=i[t];let r=a[t];if(void 0===r&&("instanceMatrix"===t&&e.instanceMatrix&&(r=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(r=e.instanceColor)),void 0===n)return!0;if(n.attribute!==r)return!0;if(r&&n.data!==r.data)return!0;o++}return c.attributesNum!==o||c.index!==r}(i,b,h,x),_&&function(e,t,n,r){const i={},a=t.attributes;let o=0;const s=n.getAttributes();for(const t in s)if(s[t].location>=0){let n=a[t];void 0===n&&("instanceMatrix"===t&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(n=e.instanceColor));const r={};r.attribute=n,n&&n.data&&(r.data=n.data),i[t]=r,o++}c.attributes=i,c.attributesNum=o,c.index=r}(i,b,h,x)}else{const e=!0===l.wireframe;c.geometry===b.id&&c.program===h.id&&c.wireframe===e||(c.geometry=b.id,c.program=h.id,c.wireframe=e,_=!0)}null!==x&&n.update(x,e.ELEMENT_ARRAY_BUFFER),(_||u)&&(u=!1,function(i,a,o,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;p();const l=s.attributes,c=o.getAttributes(),u=a.defaultAttributeValues;for(const t in c){const r=c[t];if(r.location>=0){let a=l[t];if(void 0===a&&("instanceMatrix"===t&&i.instanceMatrix&&(a=i.instanceMatrix),"instanceColor"===t&&i.instanceColor&&(a=i.instanceColor)),void 0!==a){const t=a.normalized,o=a.itemSize,l=n.get(a);if(void 0===l)continue;const c=l.buffer,u=l.type,d=l.bytesPerElement;if(a.isInterleavedBufferAttribute){const n=a.data,l=n.stride,h=a.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<r.locationSize;e++)g(r.location+e,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<r.locationSize;e++)m(r.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<r.locationSize;e++)y(r.location+e,o/r.locationSize,u,t,l*d,(h+o/r.locationSize*e)*d)}else{if(a.isInstancedBufferAttribute){for(let e=0;e<r.locationSize;e++)g(r.location+e,a.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=a.meshPerAttribute*a.count)}else for(let e=0;e<r.locationSize;e++)m(r.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<r.locationSize;e++)y(r.location+e,o/r.locationSize,u,t,o*d,o/r.locationSize*e*d)}}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(r.location,n);break;case 3:e.vertexAttrib3fv(r.location,n);break;case 4:e.vertexAttrib4fv(r.location,n);break;default:e.vertexAttrib1fv(r.location,n)}}}}v()}(i,l,h,b),null!==x&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.get(x).buffer))},reset:b,resetDefaultState:x,dispose:function(){b();for(const e in s){const t=s[e];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0===s[e.id])return;const t=s[e.id];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete s[e.id]},releaseStatesOfProgram:function(e){for(const t in s){const n=s[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)h(r[e].object),delete r[e];delete n[e.id]}},initAttributes:p,enableAttribute:m,disableUnusedAttributes:v}}function Sr(e,t,n,r){const i=r.isWebGL2;let a;this.setMode=function(e){a=e},this.render=function(t,r){e.drawArrays(a,t,r),n.update(r,a,1)},this.renderInstances=function(r,o,s){if(0===s)return;let l,c;if(i)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](a,r,o,s),n.update(o,a,s)}}function Ar(e,t,n){let r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const a="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;let o=void 0!==n.precision?n.precision:"highp";const s=i(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);const l=a||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),d=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_TEXTURE_SIZE),f=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),p=e.getParameter(e.MAX_VERTEX_ATTRIBS),m=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),g=e.getParameter(e.MAX_VARYING_VECTORS),v=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),y=d>0,b=a||t.has("OES_texture_float");return{isWebGL2:a,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:d,maxTextureSize:h,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:a?e.getParameter(e.MAX_SAMPLES):0}}function Er(e){const t=this;let n=null,r=0,i=!1,a=!1;const o=new hr,s=new Te,l={value:null,needsUpdate:!1};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function u(e,n,r,i){const a=null!==e?e.length:0;let c=null;if(0!==a){if(c=l.value,!0!==i||null===c){const t=r+4*a,i=n.matrixWorldInverse;s.getNormalMatrix(i),(null===c||c.length<t)&&(c=new Float32Array(t));for(let t=0,n=r;t!==a;++t,n+=4)o.copy(e[t]).applyMatrix4(i,s),o.normal.toArray(c,n),c[n+3]=o.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,a){const o=0!==e.length||t||0!==r||i;return i=t,n=u(e,a,0),r=e.length,o},this.beginShadows=function(){a=!0,u(null)},this.endShadows=function(){a=!1,c()},this.setState=function(t,o,s){const d=t.clippingPlanes,h=t.clipIntersection,f=t.clipShadows,p=e.get(t);if(!i||null===d||0===d.length||a&&!f)a?u(null):c();else{const e=a?0:r,t=4*e;let i=p.clippingState||null;l.value=i,i=u(d,o,t,s);for(let e=0;e!==t;++e)i[e]=n[e];p.clippingState=i,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}}}function Cr(e){let t=new WeakMap;function n(e,t){return t===s?e.mapping=a:t===l&&(e.mapping=o),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){const a=i.mapping;if(a===s||a===l){if(t.has(i))return n(t.get(i).texture,i.mapping);{const a=i.image;if(a&&a.height>0){const o=new lr(a.height/2);return o.fromEquirectangularTexture(e,i),t.set(i,o),i.addEventListener("dispose",r),n(o.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}_r.physical={uniforms:er([_r.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ce(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Ve(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ce},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Ve(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Ve(1,1,1)},specularColorMap:{value:null}}]),vertexShader:br.meshphysical_vert,fragmentShader:br.meshphysical_frag};class Tr extends rr{constructor(e=-1,t=1,n=1,r=-1,i=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,a=n+e,o=r+t,s=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,a=i+e*this.view.width,o-=t*this.view.offsetY,s=o-t*this.view.height}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const Rr=[.125,.215,.35,.446,.526,.582],Pr=new Tr,Lr=new Ve;let Dr=null;const Ir=(1+Math.sqrt(5))/2,kr=1/Ir,Br=[new tt(1,1,1),new tt(-1,1,1),new tt(1,1,-1),new tt(-1,1,-1),new tt(0,Ir,kr),new tt(0,Ir,-kr),new tt(kr,0,Ir),new tt(-kr,0,Ir),new tt(Ir,kr,0),new tt(-Ir,kr,0)];class Fr{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){Dr=this._renderer.getRenderTarget(),this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Ur(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=zr(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Dr),e.scissorTest=!1,Or(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===a||e.mapping===o?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Dr=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:g,minFilter:g,generateMipmaps:!1,type:M,format:A,encoding:oe,depthBuffer:!1},r=Nr(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Nr(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],r=[];let i=e;const a=e-4+1+Rr.length;for(let o=0;o<a;o++){const a=Math.pow(2,i);n.push(a);let s=1/a;o>e-4?s=Rr[o-e+4-1]:0===o&&(s=0),r.push(s);const l=1/(a-2),c=-l,u=1+l,d=[c,c,u,c,u,u,c,c,u,u,c,u],h=6,f=6,p=3,m=2,g=1,v=new Float32Array(p*f*h),y=new Float32Array(m*f*h),b=new Float32Array(g*f*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(r,p*f*e),y.set(d,m*f*e);const i=[e,e,e,e,e,e];b.set(i,g*f*e)}const x=new Dn;x.setAttribute("position",new _n(v,p)),x.setAttribute("uv",new _n(y,m)),x.setAttribute("faceIndex",new _n(b,g)),t.push(x),i>4&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(e,t,n){const r=new Float32Array(20),i=new tt(0,1,0);return new nr({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(r,e,t)}return r}_compileMaterial(e){const t=new Jn(this._lodPlanes[0],e);this._renderer.compile(t,Pr)}_sceneToCubeUV(e,t,n,r){const i=new ir(90,1,t,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,c=s.toneMapping;s.getClearColor(Lr),s.toneMapping=0,s.autoClear=!1;const u=new yn({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),d=new Jn(new Kn,u);let h=!1;const f=e.background;f?f.isColor&&(u.color.copy(f),e.background=null,h=!0):(u.color.copy(Lr),h=!0);for(let t=0;t<6;t++){const n=t%3;0===n?(i.up.set(0,a[t],0),i.lookAt(o[t],0,0)):1===n?(i.up.set(0,0,a[t]),i.lookAt(0,o[t],0)):(i.up.set(0,a[t],0),i.lookAt(0,0,o[t]));const l=this._cubeSize;Or(r,n*l,t>2?l:0,l,l),s.setRenderTarget(r),h&&s.render(d,i),s.render(e,i)}d.geometry.dispose(),d.material.dispose(),s.toneMapping=c,s.autoClear=l,e.background=f}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===a||e.mapping===o;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=Ur()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=zr());const i=r?this._cubemapMaterial:this._equirectMaterial,s=new Jn(this._lodPlanes[0],i);i.uniforms.envMap.value=e;const l=this._cubeSize;Or(t,0,0,3*l,2*l),n.setRenderTarget(t),n.render(s,Pr)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let t=1;t<this._lodPlanes.length;t++){const n=Math.sqrt(this._sigmas[t]*this._sigmas[t]-this._sigmas[t-1]*this._sigmas[t-1]),r=Br[(t-1)%Br.length];this._blur(e,t-1,t,n,r)}t.autoClear=n}_blur(e,t,n,r,i){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",i),this._halfBlur(a,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,a,o){const s=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new Jn(this._lodPlanes[r],l),u=l.uniforms,d=this._sizeLods[n]-1,h=isFinite(i)?Math.PI/(2*d):2*Math.PI/39,f=i/h,p=isFinite(i)?1+Math.floor(3*f):20;p>20&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${p} samples when the maximum is set to 20`);const m=[];let g=0;for(let e=0;e<20;++e){const t=e/f,n=Math.exp(-t*t/2);m.push(n),0===e?g+=n:e<p&&(g+=2*n)}for(let e=0;e<m.length;e++)m[e]=m[e]/g;u.envMap.value=e.texture,u.samples.value=p,u.weights.value=m,u.latitudinal.value="latitudinal"===a,o&&(u.poleAxis.value=o);const{_lodMax:v}=this;u.dTheta.value=h,u.mipInt.value=v-n;const y=this._sizeLods[r];Or(t,3*y*(r>v-4?r-v+4:0),4*(this._cubeSize-y),3*y,2*y),s.setRenderTarget(t),s.render(c,Pr)}}function Nr(e,t,n){const r=new $e(e,t,n);return r.texture.mapping=c,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Or(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function zr(){return new nr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Ur(){return new nr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Hr(e){let t=new WeakMap,n=null;function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const c=i.mapping,u=c===s||c===l,d=c===a||c===o;if(u||d){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;let r=t.get(i);return null===n&&(n=new Fr(e)),r=u?n.fromEquirectangular(i,r):n.fromCubemap(i,r),t.set(i,r),r.texture}if(t.has(i))return t.get(i).texture;{const a=i.image;if(u&&a&&a.height>0||d&&a&&function(e){let t=0;for(let n=0;n<6;n++)void 0!==e[n]&&t++;return 6===t}(a)){null===n&&(n=new Fr(e));const a=u?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,a),i.addEventListener("dispose",r),a.texture}return null}}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Gr(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function Vr(e,t,n,r){const i={},a=new WeakMap;function o(e){const s=e.target;null!==s.index&&t.remove(s.index);for(const e in s.attributes)t.remove(s.attributes[e]);s.removeEventListener("dispose",o),delete i[s.id];const l=a.get(s);l&&(t.remove(l),a.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){const n=[],r=e.index,i=e.attributes.position;let o=0;if(null!==r){const e=r.array;o=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],a=e[t+2];n.push(r,i,i,a,a,r)}}else{const e=i.array;o=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}const s=new(Re(n)?Mn:wn)(n,1);s.version=o;const l=a.get(e);l&&t.remove(l),a.set(e,s)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",o),i[t.id]=!0,n.memory.geometries++),t},update:function(n){const r=n.attributes;for(const n in r)t.update(r[n],e.ARRAY_BUFFER);const i=n.morphAttributes;for(const n in i){const r=i[n];for(let n=0,i=r.length;n<i;n++)t.update(r[n],e.ARRAY_BUFFER)}},getWireframeAttribute:function(e){const t=a.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return a.get(e)}}}function jr(e,t,n,r){const i=r.isWebGL2;let a,o,s;this.setMode=function(e){a=e},this.setIndex=function(e){o=e.type,s=e.bytesPerElement},this.render=function(t,r){e.drawElements(a,r,o,t*s),n.update(r,a,1)},this.renderInstances=function(r,l,c){if(0===c)return;let u,d;if(i)u=e,d="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),d="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[d](a,l,o,r*s,c),n.update(l,a,c)}}function Wr(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,i){switch(t.calls++,r){case e.TRIANGLES:t.triangles+=i*(n/3);break;case e.LINES:t.lines+=i*(n/2);break;case e.LINE_STRIP:t.lines+=i*(n-1);break;case e.LINE_LOOP:t.lines+=i*n;break;case e.POINTS:t.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function Xr(e,t){return e[0]-t[0]}function qr(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Yr(e,t){let n=1;const r=t.isInterleavedBufferAttribute?t.data.array:t.array;r instanceof Int8Array?n=127:r instanceof Uint8Array?n=255:r instanceof Uint16Array?n=65535:r instanceof Int16Array?n=32767:r instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),e.divideScalar(n)}function Zr(e,t,n){const r={},i=new Float32Array(8),a=new WeakMap,o=new Je,s=[];for(let e=0;e<8;e++)s[e]=[e,0];return{update:function(l,c,u,d){const h=l.morphTargetInfluences;if(!0===t.isWebGL2){const f=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,p=void 0!==f?f.length:0;let m=a.get(c);if(void 0===m||m.count!==p){void 0!==m&&m.texture.dispose();const y=void 0!==c.morphAttributes.position,b=void 0!==c.morphAttributes.normal,x=void 0!==c.morphAttributes.color,_=c.morphAttributes.position||[],M=c.morphAttributes.normal||[],S=c.morphAttributes.color||[];let A=0;!0===y&&(A=1),!0===b&&(A=2),!0===x&&(A=3);let E=c.attributes.position.count*A,C=1;E>t.maxTextureSize&&(C=Math.ceil(E/t.maxTextureSize),E=t.maxTextureSize);const T=new Float32Array(E*C*4*p),R=new Ke(T,E,C,p);R.type=w,R.needsUpdate=!0;const P=4*A;for(let D=0;D<p;D++){const I=_[D],k=M[D],B=S[D],F=E*C*4*D;for(let N=0;N<I.count;N++){const O=N*P;!0===y&&(o.fromBufferAttribute(I,N),!0===I.normalized&&Yr(o,I),T[F+O+0]=o.x,T[F+O+1]=o.y,T[F+O+2]=o.z,T[F+O+3]=0),!0===b&&(o.fromBufferAttribute(k,N),!0===k.normalized&&Yr(o,k),T[F+O+4]=o.x,T[F+O+5]=o.y,T[F+O+6]=o.z,T[F+O+7]=0),!0===x&&(o.fromBufferAttribute(B,N),!0===B.normalized&&Yr(o,B),T[F+O+8]=o.x,T[F+O+9]=o.y,T[F+O+10]=o.z,T[F+O+11]=4===B.itemSize?o.w:1)}}function L(){R.dispose(),a.delete(c),c.removeEventListener("dispose",L)}m={count:p,texture:R,size:new Ce(E,C)},a.set(c,m),c.addEventListener("dispose",L)}let g=0;for(let z=0;z<h.length;z++)g+=h[z];const v=c.morphTargetsRelative?1:1-g;d.getUniforms().setValue(e,"morphTargetBaseInfluence",v),d.getUniforms().setValue(e,"morphTargetInfluences",h),d.getUniforms().setValue(e,"morphTargetsTexture",m.texture,n),d.getUniforms().setValue(e,"morphTargetsTextureSize",m.size)}else{const U=void 0===h?0:h.length;let H=r[c.id];if(void 0===H||H.length!==U){H=[];for(let X=0;X<U;X++)H[X]=[X,0];r[c.id]=H}for(let q=0;q<U;q++){const Y=H[q];Y[0]=q,Y[1]=h[q]}H.sort(qr);for(let Z=0;Z<8;Z++)Z<U&&H[Z][1]?(s[Z][0]=H[Z][0],s[Z][1]=H[Z][1]):(s[Z][0]=Number.MAX_SAFE_INTEGER,s[Z][1]=0);s.sort(Xr);const G=c.morphAttributes.position,V=c.morphAttributes.normal;let j=0;for(let J=0;J<8;J++){const $=s[J],K=$[0],Q=$[1];K!==Number.MAX_SAFE_INTEGER&&Q?(G&&c.getAttribute("morphTarget"+J)!==G[K]&&c.setAttribute("morphTarget"+J,G[K]),V&&c.getAttribute("morphNormal"+J)!==V[K]&&c.setAttribute("morphNormal"+J,V[K]),i[J]=Q,j+=Q):(G&&!0===c.hasAttribute("morphTarget"+J)&&c.deleteAttribute("morphTarget"+J),V&&!0===c.hasAttribute("morphNormal"+J)&&c.deleteAttribute("morphNormal"+J),i[J]=0)}const W=c.morphTargetsRelative?1:1-j;d.getUniforms().setValue(e,"morphTargetBaseInfluence",W),d.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function Jr(e,t,n,r){let i=new WeakMap;function a(e){const t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(o){const s=r.render.frame,l=o.geometry,c=t.get(o,l);return i.get(c)!==s&&(t.update(c),i.set(c,s)),o.isInstancedMesh&&(!1===o.hasEventListener("dispose",a)&&o.addEventListener("dispose",a),n.update(o.instanceMatrix,e.ARRAY_BUFFER),null!==o.instanceColor&&n.update(o.instanceColor,e.ARRAY_BUFFER)),c},dispose:function(){i=new WeakMap}}}const $r=new Ze,Kr=new Ke,Qr=new Qe,ei=new sr,ti=[],ni=[],ri=new Float32Array(16),ii=new Float32Array(9),ai=new Float32Array(4);function oi(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let a=ti[i];if(void 0===a&&(a=new Float32Array(i),ti[i]=a),0!==t){r.toArray(a,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(a,i)}return a}function si(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function li(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function ci(e,t){let n=ni[t];void 0===n&&(n=new Int32Array(t),ni[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function ui(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function di(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(si(n,t))return;e.uniform2fv(this.addr,t),li(n,t)}}function hi(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(si(n,t))return;e.uniform3fv(this.addr,t),li(n,t)}}function fi(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(si(n,t))return;e.uniform4fv(this.addr,t),li(n,t)}}function pi(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(si(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),li(n,t)}else{if(si(n,r))return;ai.set(r),e.uniformMatrix2fv(this.addr,!1,ai),li(n,r)}}function mi(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(si(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),li(n,t)}else{if(si(n,r))return;ii.set(r),e.uniformMatrix3fv(this.addr,!1,ii),li(n,r)}}function gi(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(si(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),li(n,t)}else{if(si(n,r))return;ri.set(r),e.uniformMatrix4fv(this.addr,!1,ri),li(n,r)}}function vi(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function yi(e,t){const n=this.cache;si(n,t)||(e.uniform2iv(this.addr,t),li(n,t))}function bi(e,t){const n=this.cache;si(n,t)||(e.uniform3iv(this.addr,t),li(n,t))}function xi(e,t){const n=this.cache;si(n,t)||(e.uniform4iv(this.addr,t),li(n,t))}function _i(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function wi(e,t){const n=this.cache;si(n,t)||(e.uniform2uiv(this.addr,t),li(n,t))}function Mi(e,t){const n=this.cache;si(n,t)||(e.uniform3uiv(this.addr,t),li(n,t))}function Si(e,t){const n=this.cache;si(n,t)||(e.uniform4uiv(this.addr,t),li(n,t))}function Ai(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(t||$r,i)}function Ei(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||Qr,i)}function Ci(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||ei,i)}function Ti(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||Kr,i)}function Ri(e,t){e.uniform1fv(this.addr,t)}function Pi(e,t){const n=oi(t,this.size,2);e.uniform2fv(this.addr,n)}function Li(e,t){const n=oi(t,this.size,3);e.uniform3fv(this.addr,n)}function Di(e,t){const n=oi(t,this.size,4);e.uniform4fv(this.addr,n)}function Ii(e,t){const n=oi(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function ki(e,t){const n=oi(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Bi(e,t){const n=oi(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Fi(e,t){e.uniform1iv(this.addr,t)}function Ni(e,t){e.uniform2iv(this.addr,t)}function Oi(e,t){e.uniform3iv(this.addr,t)}function zi(e,t){e.uniform4iv(this.addr,t)}function Ui(e,t){e.uniform1uiv(this.addr,t)}function Hi(e,t){e.uniform2uiv(this.addr,t)}function Gi(e,t){e.uniform3uiv(this.addr,t)}function Vi(e,t){e.uniform4uiv(this.addr,t)}function ji(e,t,n){const r=t.length,i=ci(n,r);e.uniform1iv(this.addr,i);for(let e=0;e!==r;++e)n.setTexture2D(t[e]||$r,i[e])}function Wi(e,t,n){const r=t.length,i=ci(n,r);e.uniform1iv(this.addr,i);for(let e=0;e!==r;++e)n.setTexture3D(t[e]||Qr,i[e])}function Xi(e,t,n){const r=t.length,i=ci(n,r);e.uniform1iv(this.addr,i);for(let e=0;e!==r;++e)n.setTextureCube(t[e]||ei,i[e])}function qi(e,t,n){const r=t.length,i=ci(n,r);e.uniform1iv(this.addr,i);for(let e=0;e!==r;++e)n.setTexture2DArray(t[e]||Kr,i[e])}class Yi{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return ui;case 35664:return di;case 35665:return hi;case 35666:return fi;case 35674:return pi;case 35675:return mi;case 35676:return gi;case 5124:case 35670:return vi;case 35667:case 35671:return yi;case 35668:case 35672:return bi;case 35669:case 35673:return xi;case 5125:return _i;case 36294:return wi;case 36295:return Mi;case 36296:return Si;case 35678:case 36198:case 36298:case 36306:case 35682:return Ai;case 35679:case 36299:case 36307:return Ei;case 35680:case 36300:case 36308:case 36293:return Ci;case 36289:case 36303:case 36311:case 36292:return Ti}}(t.type)}}class Zi{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Ri;case 35664:return Pi;case 35665:return Li;case 35666:return Di;case 35674:return Ii;case 35675:return ki;case 35676:return Bi;case 5124:case 35670:return Fi;case 35667:case 35671:return Ni;case 35668:case 35672:return Oi;case 35669:case 35673:return zi;case 5125:return Ui;case 36294:return Hi;case 36295:return Gi;case 36296:return Vi;case 35678:case 36198:case 36298:case 36306:case 35682:return ji;case 35679:case 36299:case 36307:return Wi;case 35680:case 36300:case 36308:case 36293:return Xi;case 36289:case 36303:case 36311:case 36292:return qi}}(t.type)}}class Ji{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let i=0,a=r.length;i!==a;++i){const a=r[i];a.setValue(e,t[a.id],n)}}}const $i=/(\w+)(\])?(\[|\.)?/g;function Ki(e,t){e.seq.push(t),e.map[t.id]=t}function Qi(e,t,n){const r=e.name,i=r.length;for($i.lastIndex=0;;){const a=$i.exec(r),o=$i.lastIndex;let s=a[1];const l="]"===a[2],c=a[3];if(l&&(s|=0),void 0===c||"["===c&&o+2===i){Ki(n,void 0===c?new Yi(s,e,t):new Zi(s,e,t));break}{let e=n.map[s];void 0===e&&(e=new Ji(s),Ki(n,e)),n=e}}}class ea{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);Qi(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,a=t.length;i!==a;++i){const a=t[i],o=n[a.id];!1!==o.needsUpdate&&a.setValue(e,o.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n}}function ta(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}let na=0;function ra(e,t,n){const r=e.getShaderParameter(t,e.COMPILE_STATUS),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";const a=/ERROR: 0:(\d+)/.exec(i);if(a){const r=parseInt(a[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){const n=e.split("\n"),r=[],i=Math.max(t-6,0),a=Math.min(t+6,n.length);for(let e=i;e<a;e++){const i=e+1;r.push(`${i===t?">":" "} ${i}: ${n[e]}`)}return r.join("\n")}(e.getShaderSource(t),r)}return i}function ia(e,t){const n=function(e){switch(e){case oe:return["Linear","( value )"];case se:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function aa(e,t){let n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function oa(e){return""!==e}function sa(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function la(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const ca=/^[ \t]*#include +<([\w\d./]+)>/gm;function ua(e){return e.replace(ca,da)}function da(e,t){const n=br[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return ua(n)}const ha=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,fa=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function pa(e){return e.replace(fa,ga).replace(ha,ma)}function ma(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),ga(0,t,n,r)}function ga(e,t,n,r){let i="";for(let e=parseInt(t);e<parseInt(n);e++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return i}function va(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function ya(e,t,n,r){const i=e.getContext(),s=n.defines;let l=n.vertexShader,u=n.fragmentShader;const d=function(e){let t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(n),h=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case a:case o:t="ENVMAP_TYPE_CUBE";break;case c:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),f=function(e){let t="ENVMAP_MODE_REFLECTION";return e.envMap&&e.envMapMode===o&&(t="ENVMAP_MODE_REFRACTION"),t}(n),p=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),m=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),g=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(oa).join("\n")}(n),v=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(s),y=i.createProgram();let b,x,_=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(b=[v].filter(oa).join("\n"),b.length>0&&(b+="\n"),x=[g,v].filter(oa).join("\n"),x.length>0&&(x+="\n")):(b=[va(n),"#define SHADER_NAME "+n.shaderName,v,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+d:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(oa).join("\n"),x=[g,va(n),"#define SHADER_NAME "+n.shaderName,v,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.envMap?"#define "+f:"",n.envMap?"#define "+p:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+d:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?br.tonemapping_pars_fragment:"",0!==n.toneMapping?aa("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",br.encodings_pars_fragment,ia("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(oa).join("\n")),l=ua(l),l=sa(l,n),l=la(l,n),u=ua(u),u=sa(u,n),u=la(u,n),l=pa(l),u=pa(u),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(_="#version 300 es\n",b=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+b,x=["#define varying in",n.glslVersion===he?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===he?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+x);const w=_+b+l,M=_+x+u,S=ta(i,i.VERTEX_SHADER,w),A=ta(i,i.FRAGMENT_SHADER,M);if(i.attachShader(y,S),i.attachShader(y,A),void 0!==n.index0AttributeName?i.bindAttribLocation(y,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y),e.debug.checkShaderErrors){const e=i.getProgramInfoLog(y).trim(),t=i.getShaderInfoLog(S).trim(),n=i.getShaderInfoLog(A).trim();let r=!0,a=!0;if(!1===i.getProgramParameter(y,i.LINK_STATUS)){r=!1;const t=ra(i,S,"vertex"),n=ra(i,A,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(y,i.VALIDATE_STATUS)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+n)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):""!==t&&""!==n||(a=!1);a&&(this.diagnostics={runnable:r,programLog:e,vertexShader:{log:t,prefix:b},fragmentShader:{log:n,prefix:x}})}let E,C;return i.deleteShader(S),i.deleteShader(A),this.getUniforms=function(){return void 0===E&&(E=new ea(i,y)),E},this.getAttributes=function(){return void 0===C&&(C=function(e,t){const n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i),a=r.name;let o=1;r.type===e.FLOAT_MAT2&&(o=2),r.type===e.FLOAT_MAT3&&(o=3),r.type===e.FLOAT_MAT4&&(o=4),n[a]={type:r.type,location:e.getAttribLocation(t,a),locationSize:o}}return n}(i,y)),C},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.name=n.shaderName,this.id=na++,this.cacheKey=t,this.usedTimes=1,this.program=y,this.vertexShader=S,this.fragmentShader=A,this}let ba=0;class xa{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(r)&&(a.add(r),r.usedTimes++),!1===a.has(i)&&(a.add(i),i.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const e of t)e.usedTimes--,0===e.usedTimes&&this.shaderCache.delete(e.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return!1===t.has(e)&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(!1===t.has(e)){const n=new _a(e);t.set(e,n)}return t.get(e)}}class _a{constructor(e){this.id=ba++,this.code=e,this.usedTimes=0}}function wa(e,t,n,r,i,a,o){const s=new Vt,l=new xa,u=[],d=i.isWebGL2,h=i.logarithmicDepthBuffer,f=i.vertexTextures;let p=i.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(a,s,u,g,v){const y=g.fog,b=v.geometry,x=a.isMeshStandardMaterial?g.environment:null,_=(a.isMeshStandardMaterial?n:t).get(a.envMap||x),w=_&&_.mapping===c?_.image.height:null,M=m[a.type];null!==a.precision&&(p=i.getMaxPrecision(a.precision),p!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",p,"instead."));const S=b.morphAttributes.position||b.morphAttributes.normal||b.morphAttributes.color,A=void 0!==S?S.length:0;let E,C,T,R,P=0;if(void 0!==b.morphAttributes.position&&(P=1),void 0!==b.morphAttributes.normal&&(P=2),void 0!==b.morphAttributes.color&&(P=3),M){const e=_r[M];E=e.vertexShader,C=e.fragmentShader}else E=a.vertexShader,C=a.fragmentShader,l.update(a),T=l.getVertexShaderID(a),R=l.getFragmentShaderID(a);const L=e.getRenderTarget(),D=a.alphaTest>0,I=a.clearcoat>0,k=a.iridescence>0;return{isWebGL2:d,shaderID:M,shaderName:a.type,vertexShader:E,fragmentShader:C,defines:a.defines,customVertexShaderID:T,customFragmentShaderID:R,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:p,instancing:!0===v.isInstancedMesh,instancingColor:!0===v.isInstancedMesh&&null!==v.instanceColor,supportsVertexTextures:f,outputEncoding:null===L?e.outputEncoding:!0===L.isXRRenderTarget?L.texture.encoding:oe,map:!!a.map,matcap:!!a.matcap,envMap:!!_,envMapMode:_&&_.mapping,envMapCubeUVHeight:w,lightMap:!!a.lightMap,aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,objectSpaceNormalMap:1===a.normalMapType,tangentSpaceNormalMap:0===a.normalMapType,decodeVideoTexture:!!a.map&&!0===a.map.isVideoTexture&&a.map.encoding===se,clearcoat:I,clearcoatMap:I&&!!a.clearcoatMap,clearcoatRoughnessMap:I&&!!a.clearcoatRoughnessMap,clearcoatNormalMap:I&&!!a.clearcoatNormalMap,iridescence:k,iridescenceMap:k&&!!a.iridescenceMap,iridescenceThicknessMap:k&&!!a.iridescenceThicknessMap,displacementMap:!!a.displacementMap,roughnessMap:!!a.roughnessMap,metalnessMap:!!a.metalnessMap,specularMap:!!a.specularMap,specularIntensityMap:!!a.specularIntensityMap,specularColorMap:!!a.specularColorMap,opaque:!1===a.transparent&&1===a.blending,alphaMap:!!a.alphaMap,alphaTest:D,gradientMap:!!a.gradientMap,sheen:a.sheen>0,sheenColorMap:!!a.sheenColorMap,sheenRoughnessMap:!!a.sheenRoughnessMap,transmission:a.transmission>0,transmissionMap:!!a.transmissionMap,thicknessMap:!!a.thicknessMap,combine:a.combine,vertexTangents:!!a.normalMap&&!!b.attributes.tangent,vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!b.attributes.color&&4===b.attributes.color.itemSize,vertexUvs:!!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatMap||a.clearcoatRoughnessMap||a.clearcoatNormalMap||a.iridescenceMap||a.iridescenceThicknessMap||a.displacementMap||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||a.sheenColorMap||a.sheenRoughnessMap),uvsVertexOnly:!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatNormalMap||a.iridescenceMap||a.iridescenceThicknessMap||a.transmission>0||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||a.sheen>0||a.sheenColorMap||a.sheenRoughnessMap||!a.displacementMap),fog:!!y,useFog:!0===a.fog,fogExp2:y&&y.isFogExp2,flatShading:!!a.flatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===v.isSkinnedMesh,morphTargets:void 0!==b.morphAttributes.position,morphNormals:void 0!==b.morphAttributes.normal,morphColors:void 0!==b.morphAttributes.color,morphTargetsCount:A,morphTextureStride:P,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.length>0,shadowMapType:e.shadowMap.type,toneMapping:a.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:a.premultipliedAlpha,doubleSided:2===a.side,flipSided:1===a.side,useDepthPacking:!!a.depthPacking,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionDerivatives:a.extensions&&a.extensions.derivatives,extensionFragDepth:a.extensions&&a.extensions.fragDepth,extensionDrawBuffers:a.extensions&&a.extensions.drawBuffers,extensionShaderTextureLOD:a.extensions&&a.extensions.shaderTextureLOD,rendererExtensionFragDepth:d||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||r.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(function(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.combine),e.push(t.vertexUvs),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){s.disableAll(),t.isWebGL2&&s.enable(0),t.supportsVertexTextures&&s.enable(1),t.instancing&&s.enable(2),t.instancingColor&&s.enable(3),t.map&&s.enable(4),t.matcap&&s.enable(5),t.envMap&&s.enable(6),t.lightMap&&s.enable(7),t.aoMap&&s.enable(8),t.emissiveMap&&s.enable(9),t.bumpMap&&s.enable(10),t.normalMap&&s.enable(11),t.objectSpaceNormalMap&&s.enable(12),t.tangentSpaceNormalMap&&s.enable(13),t.clearcoat&&s.enable(14),t.clearcoatMap&&s.enable(15),t.clearcoatRoughnessMap&&s.enable(16),t.clearcoatNormalMap&&s.enable(17),t.iridescence&&s.enable(18),t.iridescenceMap&&s.enable(19),t.iridescenceThicknessMap&&s.enable(20),t.displacementMap&&s.enable(21),t.specularMap&&s.enable(22),t.roughnessMap&&s.enable(23),t.metalnessMap&&s.enable(24),t.gradientMap&&s.enable(25),t.alphaMap&&s.enable(26),t.alphaTest&&s.enable(27),t.vertexColors&&s.enable(28),t.vertexAlphas&&s.enable(29),t.vertexUvs&&s.enable(30),t.vertexTangents&&s.enable(31),t.uvsVertexOnly&&s.enable(32),t.fog&&s.enable(33),e.push(s.mask),s.disableAll(),t.useFog&&s.enable(0),t.flatShading&&s.enable(1),t.logarithmicDepthBuffer&&s.enable(2),t.skinning&&s.enable(3),t.morphTargets&&s.enable(4),t.morphNormals&&s.enable(5),t.morphColors&&s.enable(6),t.premultipliedAlpha&&s.enable(7),t.shadowMapEnabled&&s.enable(8),t.physicallyCorrectLights&&s.enable(9),t.doubleSided&&s.enable(10),t.flipSided&&s.enable(11),t.useDepthPacking&&s.enable(12),t.dithering&&s.enable(13),t.specularIntensityMap&&s.enable(14),t.specularColorMap&&s.enable(15),t.transmission&&s.enable(16),t.transmissionMap&&s.enable(17),t.thicknessMap&&s.enable(18),t.sheen&&s.enable(19),t.sheenColorMap&&s.enable(20),t.sheenRoughnessMap&&s.enable(21),t.decodeVideoTexture&&s.enable(22),t.opaque&&s.enable(23),e.push(s.mask)}(n,t),n.push(e.outputEncoding)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=m[e.type];let n;if(t){const e=_r[t];n=tr.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,t=u.length;e<t;e++){const t=u[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new ya(e,n,t,a),u.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){const t=u.indexOf(e);u[t]=u[u.length-1],u.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:u,dispose:function(){l.dispose()}}}function Ma(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function Sa(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Aa(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Ea(){const e=[];let t=0;const n=[],r=[],i=[];function a(n,r,i,a,o,s){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:a,renderOrder:n.renderOrder,z:o,group:s},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=a,l.renderOrder=n.renderOrder,l.z=o,l.group=s),t++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,o,s,l,c){const u=a(e,t,o,s,l,c);o.transmission>0?r.push(u):!0===o.transparent?i.push(u):n.push(u)},unshift:function(e,t,o,s,l,c){const u=a(e,t,o,s,l,c);o.transmission>0?r.unshift(u):!0===o.transparent?i.unshift(u):n.unshift(u)},finish:function(){for(let n=t,r=e.length;n<r;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||Sa),r.length>1&&r.sort(t||Aa),i.length>1&&i.sort(t||Aa)}}}function Ca(){let e=new WeakMap;return{get:function(t,n){let r;return!1===e.has(t)?(r=new Ea,e.set(t,[r])):n>=e.get(t).length?(r=new Ea,e.get(t).push(r)):r=e.get(t)[n],r},dispose:function(){e=new WeakMap}}}function Ta(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new tt,color:new Ve};break;case"SpotLight":n={position:new tt,direction:new tt,color:new Ve,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new tt,color:new Ve,distance:0,decay:0};break;case"HemisphereLight":n={direction:new tt,skyColor:new Ve,groundColor:new Ve};break;case"RectAreaLight":n={color:new Ve,position:new tt,halfWidth:new tt,halfHeight:new tt}}return e[t.id]=n,n}}}let Ra=0;function Pa(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function La(e,t){const n=new Ta,r=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ce};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ce,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let e=0;e<9;e++)i.probe.push(new tt);const a=new tt,o=new Dt,s=new Dt;return{setup:function(a,o){let s=0,l=0,c=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let u=0,d=0,h=0,f=0,p=0,m=0,g=0,v=0;a.sort(Pa);const y=!0!==o?Math.PI:1;for(let e=0,t=a.length;e<t;e++){const t=a[e],o=t.color,b=t.intensity,x=t.distance,_=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)s+=o.r*b*y,l+=o.g*b*y,c+=o.b*b*y;else if(t.isLightProbe)for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],b);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*y),t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[u]=n,i.directionalShadowMap[u]=_,i.directionalShadowMatrix[u]=t.shadow.matrix,m++}i.directional[u]=e,u++}else if(t.isSpotLight){const e=n.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(o).multiplyScalar(b*y),e.distance=x,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.spotShadow[h]=n,i.spotShadowMap[h]=_,i.spotShadowMatrix[h]=t.shadow.matrix,v++}i.spot[h]=e,h++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(o).multiplyScalar(b),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[f]=e,f++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*y),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[d]=n,i.pointShadowMap[d]=_,i.pointShadowMatrix[d]=t.shadow.matrix,g++}i.point[d]=e,d++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(b*y),e.groundColor.copy(t.groundColor).multiplyScalar(b*y),i.hemi[p]=e,p++}}f>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=xr.LTC_FLOAT_1,i.rectAreaLTC2=xr.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=xr.LTC_HALF_1,i.rectAreaLTC2=xr.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=s,i.ambient[1]=l,i.ambient[2]=c;const b=i.hash;b.directionalLength===u&&b.pointLength===d&&b.spotLength===h&&b.rectAreaLength===f&&b.hemiLength===p&&b.numDirectionalShadows===m&&b.numPointShadows===g&&b.numSpotShadows===v||(i.directional.length=u,i.spot.length=h,i.rectArea.length=f,i.point.length=d,i.hemi.length=p,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=v,i.spotShadowMap.length=v,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotShadowMatrix.length=v,b.directionalLength=u,b.pointLength=d,b.spotLength=h,b.rectAreaLength=f,b.hemiLength=p,b.numDirectionalShadows=m,b.numPointShadows=g,b.numSpotShadows=v,i.version=Ra++)},setupView:function(e,t){let n=0,r=0,l=0,c=0,u=0;const d=t.matrixWorldInverse;for(let t=0,h=e.length;t<h;t++){const h=e[t];if(h.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(h.matrixWorld),a.setFromMatrixPosition(h.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(d),n++}else if(h.isSpotLight){const e=i.spot[l];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(d),e.direction.setFromMatrixPosition(h.matrixWorld),a.setFromMatrixPosition(h.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(d),l++}else if(h.isRectAreaLight){const e=i.rectArea[c];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(d),s.identity(),o.copy(h.matrixWorld),o.premultiply(d),s.extractRotation(o),e.halfWidth.set(.5*h.width,0,0),e.halfHeight.set(0,.5*h.height,0),e.halfWidth.applyMatrix4(s),e.halfHeight.applyMatrix4(s),c++}else if(h.isPointLight){const e=i.point[r];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(d),r++}else if(h.isHemisphereLight){const e=i.hemi[u];e.direction.setFromMatrixPosition(h.matrixWorld),e.direction.transformDirection(d),u++}}},state:i}}function Da(e,t){const n=new La(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function Ia(e,t){let n=new WeakMap;return{get:function(r,i=0){let a;return!1===n.has(r)?(a=new Da(e,t),n.set(r,[a])):i>=n.get(r).length?(a=new Da(e,t),n.get(r).push(a)):a=n.get(r)[i],a},dispose:function(){n=new WeakMap}}}class ka extends vn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Ba extends vn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new tt,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function Fa(e,t,n){let r=new mr;const i=new Ce,a=new Ce,o=new Je,s=new ka({depthPacking:3201}),l=new Ba,c={},u=n.maxTextureSize,d={0:1,1:0,2:2},h=new nr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ce},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=h.clone();p.defines.HORIZONTAL_PASS=1;const m=new Dn;m.setAttribute("position",new _n(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new Jn(m,h),v=this;function y(n,r){const a=t.update(g);h.defines.VSM_SAMPLES!==n.blurSamples&&(h.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new $e(i.x,i.y)),h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,a,h,g,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,a,p,g,null)}function b(t,n,r,i,a,o){let u=null;const h=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(u=void 0!==h?h:!0===r.isPointLight?l:s,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0){const e=u.uuid,t=n.uuid;let r=c[e];void 0===r&&(r={},c[e]=r);let i=r[t];void 0===i&&(i=u.clone(),r[t]=i),u=i}return u.visible=n.visible,u.wireframe=n.wireframe,u.side=3===o?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:d[n.side],u.alphaMap=n.alphaMap,u.alphaTest=n.alphaTest,u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.displacementMap=n.displacementMap,u.displacementScale=n.displacementScale,u.displacementBias=n.displacementBias,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,!0===r.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(r.matrixWorld),u.nearDistance=i,u.farDistance=a),u}function x(n,i,a,o,s){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===s)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);const r=t.update(n),i=n.material;if(Array.isArray(i)){const t=r.groups;for(let l=0,c=t.length;l<c;l++){const c=t[l],u=i[c.materialIndex];if(u&&u.visible){const t=b(n,u,o,a.near,a.far,s);e.renderBufferDirect(a,null,r,t,n,c)}}}else if(i.visible){const t=b(n,i,o,a.near,a.far,s);e.renderBufferDirect(a,null,r,t,n,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)x(l[e],i,a,o,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,n,s){if(!1===v.enabled)return;if(!1===v.autoUpdate&&!1===v.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),h=e.state;h.setBlending(0),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(let l=0,c=t.length;l<c;l++){const c=t[l],d=c.shadow;if(void 0===d){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===d.autoUpdate&&!1===d.needsUpdate)continue;i.copy(d.mapSize);const p=d.getFrameExtents();if(i.multiply(p),a.copy(d.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(a.x=Math.floor(u/p.x),i.x=a.x*p.x,d.mapSize.x=a.x),i.y>u&&(a.y=Math.floor(u/p.y),i.y=a.y*p.y,d.mapSize.y=a.y)),null===d.map){const e=3!==this.type?{minFilter:f,magFilter:f}:{};d.map=new $e(i.x,i.y,e),d.map.texture.name=c.name+".shadowMap",d.camera.updateProjectionMatrix()}e.setRenderTarget(d.map),e.clear();const m=d.getViewportCount();for(let e=0;e<m;e++){const t=d.getViewport(e);o.set(a.x*t.x,a.y*t.y,a.x*t.z,a.y*t.w),h.viewport(o),d.updateMatrices(c,e),r=d.getFrustum(),x(n,s,d.camera,c,this.type)}!0!==d.isPointLightShadow&&3===this.type&&y(d,s),d.needsUpdate=!1}v.needsUpdate=!1,e.setRenderTarget(l,c,d)}}function Na(e,t,n){const i=n.isWebGL2,a=new function(){let t=!1;const n=new Je;let r=null;const i=new Je(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,a,o,s){!0===s&&(t*=o,r*=o,a*=o),n.set(t,r,a,o),!1===i.equals(n)&&(e.clearColor(t,r,a,o),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){let t=!1,n=null,r=null,i=null;return{setTest:function(t){t?H(e.DEPTH_TEST):G(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case 0:e.depthFunc(e.NEVER);break;case 1:e.depthFunc(e.ALWAYS);break;case 2:e.depthFunc(e.LESS);break;case 3:default:e.depthFunc(e.LEQUAL);break;case 4:e.depthFunc(e.EQUAL);break;case 5:e.depthFunc(e.GEQUAL);break;case 6:e.depthFunc(e.GREATER);break;case 7:e.depthFunc(e.NOTEQUAL)}else e.depthFunc(e.LEQUAL);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},s=new function(){let t=!1,n=null,r=null,i=null,a=null,o=null,s=null,l=null,c=null;return{setTest:function(n){t||(n?H(e.STENCIL_TEST):G(e.STENCIL_TEST))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&i===n&&a===o||(e.stencilFunc(t,n,o),r=t,i=n,a=o)},setOp:function(t,n,r){o===t&&s===n&&l===r||(e.stencilOp(t,n,r),o=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,o=null,s=null,l=null,c=null}}},l=new WeakMap,c=new WeakMap;let u={},d={},h=new WeakMap,f=[],p=null,m=!1,g=null,v=null,y=null,b=null,x=null,_=null,w=null,M=!1,S=null,A=null,E=null,C=null,T=null;const R=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let P=!1,L=0;const D=e.getParameter(e.VERSION);-1!==D.indexOf("WebGL")?(L=parseFloat(/^WebGL (\d)/.exec(D)[1]),P=L>=1):-1!==D.indexOf("OpenGL ES")&&(L=parseFloat(/^OpenGL ES (\d)/.exec(D)[1]),P=L>=2);let I=null,k={};const B=e.getParameter(e.SCISSOR_BOX),F=e.getParameter(e.VIEWPORT),N=(new Je).fromArray(B),O=(new Je).fromArray(F);function z(t,n,r){const i=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let t=0;t<r;t++)e.texImage2D(n+t,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i);return a}const U={};function H(t){!0!==u[t]&&(e.enable(t),u[t]=!0)}function G(t){!1!==u[t]&&(e.disable(t),u[t]=!1)}U[e.TEXTURE_2D]=z(e.TEXTURE_2D,e.TEXTURE_2D,1),U[e.TEXTURE_CUBE_MAP]=z(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),a.setClear(0,0,0,1),o.setClear(1),s.setClear(0),H(e.DEPTH_TEST),o.setFunc(3),X(!1),q(1),H(e.CULL_FACE),W(0);const V={[r]:e.FUNC_ADD,101:e.FUNC_SUBTRACT,102:e.FUNC_REVERSE_SUBTRACT};if(i)V[103]=e.MIN,V[104]=e.MAX;else{const e=t.get("EXT_blend_minmax");null!==e&&(V[103]=e.MIN_EXT,V[104]=e.MAX_EXT)}const j={200:e.ZERO,201:e.ONE,202:e.SRC_COLOR,204:e.SRC_ALPHA,210:e.SRC_ALPHA_SATURATE,208:e.DST_COLOR,206:e.DST_ALPHA,203:e.ONE_MINUS_SRC_COLOR,205:e.ONE_MINUS_SRC_ALPHA,209:e.ONE_MINUS_DST_COLOR,207:e.ONE_MINUS_DST_ALPHA};function W(t,n,i,a,o,s,l,c){if(0!==t){if(!1===m&&(H(e.BLEND),m=!0),5===t)o=o||n,s=s||i,l=l||a,n===v&&o===x||(e.blendEquationSeparate(V[n],V[o]),v=n,x=o),i===y&&a===b&&s===_&&l===w||(e.blendFuncSeparate(j[i],j[a],j[s],j[l]),y=i,b=a,_=s,w=l),g=t,M=null;else if(t!==g||c!==M){if(v===r&&x===r||(e.blendEquation(e.FUNC_ADD),v=r,x=r),c)switch(t){case 1:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.ONE,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}y=null,b=null,_=null,w=null,g=t,M=c}}else!0===m&&(G(e.BLEND),m=!1)}function X(t){S!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),S=t)}function q(t){0!==t?(H(e.CULL_FACE),t!==A&&(1===t?e.cullFace(e.BACK):2===t?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):G(e.CULL_FACE),A=t}function Y(t,n,r){t?(H(e.POLYGON_OFFSET_FILL),C===n&&T===r||(e.polygonOffset(n,r),C=n,T=r)):G(e.POLYGON_OFFSET_FILL)}function Z(t){void 0===t&&(t=e.TEXTURE0+R-1),I!==t&&(e.activeTexture(t),I=t)}return{buffers:{color:a,depth:o,stencil:s},enable:H,disable:G,bindFramebuffer:function(t,n){return d[t]!==n&&(e.bindFramebuffer(t,n),d[t]=n,i&&(t===e.DRAW_FRAMEBUFFER&&(d[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(d[e.DRAW_FRAMEBUFFER]=n)),!0)},drawBuffers:function(r,i){let a=f,o=!1;if(r)if(a=h.get(i),void 0===a&&(a=[],h.set(i,a)),r.isWebGLMultipleRenderTargets){const t=r.texture;if(a.length!==t.length||a[0]!==e.COLOR_ATTACHMENT0){for(let n=0,r=t.length;n<r;n++)a[n]=e.COLOR_ATTACHMENT0+n;a.length=t.length,o=!0}}else a[0]!==e.COLOR_ATTACHMENT0&&(a[0]=e.COLOR_ATTACHMENT0,o=!0);else a[0]!==e.BACK&&(a[0]=e.BACK,o=!0);o&&(n.isWebGL2?e.drawBuffers(a):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(a))},useProgram:function(t){return p!==t&&(e.useProgram(t),p=t,!0)},setBlending:W,setMaterial:function(t,n){2===t.side?G(e.CULL_FACE):H(e.CULL_FACE);let r=1===t.side;n&&(r=!r),X(r),1===t.blending&&!1===t.transparent?W(0):W(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),o.setFunc(t.depthFunc),o.setTest(t.depthTest),o.setMask(t.depthWrite),a.setMask(t.colorWrite);const i=t.stencilWrite;s.setTest(i),i&&(s.setMask(t.stencilWriteMask),s.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),s.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),Y(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?H(e.SAMPLE_ALPHA_TO_COVERAGE):G(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:X,setCullFace:q,setLineWidth:function(t){t!==E&&(P&&e.lineWidth(t),E=t)},setPolygonOffset:Y,setScissorTest:function(t){t?H(e.SCISSOR_TEST):G(e.SCISSOR_TEST)},activeTexture:Z,bindTexture:function(t,n){null===I&&Z();let r=k[I];void 0===r&&(r={type:void 0,texture:void 0},k[I]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||U[t]),r.type=t,r.texture=n)},unbindTexture:function(){const t=k[I];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},updateUBOMapping:function(t,n){let r=c.get(n);void 0===r&&(r=new WeakMap,c.set(n,r));let i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){const r=c.get(n).get(t);l.get(t)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),l.set(t,r))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===N.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),N.copy(t))},viewport:function(t){!1===O.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),O.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),!0===i&&(e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),u={},I=null,k={},d={},h=new WeakMap,f=[],p=null,m=!1,g=null,v=null,y=null,b=null,x=null,_=null,w=null,M=!1,S=null,A=null,E=null,C=null,T=null,N.set(0,0,e.canvas.width,e.canvas.height),O.set(0,0,e.canvas.width,e.canvas.height),a.reset(),o.reset(),s.reset()}}}function Oa(e,t,n,r,i,a,o){const s=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,T=i.maxTextureSize,R=i.maxSamples,P=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,L=/OculusBrowser/g.test(navigator.userAgent),D=new WeakMap;let I;const k=new WeakMap;let B=!1;try{B="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function F(e,t){return B?new OffscreenCanvas(e,t):De("canvas")}function N(e,t,n,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?Ae:Math.floor,a=r(i*e.width),o=r(i*e.height);void 0===I&&(I=F(a,o));const s=n?F(a,o):I;return s.width=a,s.height=o,s.getContext("2d").drawImage(e,0,0,a,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+a+"x"+o+")."),s}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function O(e){return Me(e.width)&&Me(e.height)}function z(e,t){return e.generateMipmaps&&t&&e.minFilter!==f&&e.minFilter!==g}function U(t){e.generateMipmap(t)}function H(n,r,i,a,o=!1){if(!1===s)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=r;return r===e.RED&&(i===e.FLOAT&&(l=e.R32F),i===e.HALF_FLOAT&&(l=e.R16F),i===e.UNSIGNED_BYTE&&(l=e.R8)),r===e.RG&&(i===e.FLOAT&&(l=e.RG32F),i===e.HALF_FLOAT&&(l=e.RG16F),i===e.UNSIGNED_BYTE&&(l=e.RG8)),r===e.RGBA&&(i===e.FLOAT&&(l=e.RGBA32F),i===e.HALF_FLOAT&&(l=e.RGBA16F),i===e.UNSIGNED_BYTE&&(l=a===se&&!1===o?e.SRGB8_ALPHA8:e.RGBA8),i===e.UNSIGNED_SHORT_4_4_4_4&&(l=e.RGBA4),i===e.UNSIGNED_SHORT_5_5_5_1&&(l=e.RGB5_A1)),l!==e.R16F&&l!==e.R32F&&l!==e.RG16F&&l!==e.RG32F&&l!==e.RGBA16F&&l!==e.RGBA32F||t.get("EXT_color_buffer_float"),l}function G(e,t,n){return!0===z(e,n)||e.isFramebufferTexture&&e.minFilter!==f&&e.minFilter!==g?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function V(t){return t===f||t===p||t===m?e.NEAREST:e.LINEAR}function j(e){const t=e.target;t.removeEventListener("dispose",j),function(e){const t=r.get(e);if(void 0===t.__webglInit)return;const n=e.source,i=k.get(n);if(i){const r=i[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&X(e),0===Object.keys(i).length&&k.delete(n)}r.remove(e)}(t),t.isVideoTexture&&D.delete(t)}function W(t){const n=t.target;n.removeEventListener("dispose",W),function(t){const n=t.texture,i=r.get(t),a=r.get(n);if(void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),o.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(i.__webglFramebuffer[t]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[t]);else{if(e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let t=0;t<i.__webglColorRenderbuffer.length;t++)i.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(i.__webglColorRenderbuffer[t]);i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);i.__webglTexture&&(e.deleteTexture(i.__webglTexture),o.memory.textures--),r.remove(n[t])}r.remove(n),r.remove(t)}(n)}function X(t){const n=r.get(t);e.deleteTexture(n.__webglTexture);const i=t.source;delete k.get(i)[n.__cacheKey],o.memory.textures--}let q=0;function Y(t,i){const a=r.get(t);if(t.isVideoTexture&&function(e){const t=o.render.frame;D.get(e)!==t&&(D.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&a.__version!==t.version){const e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void Q(a,t,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(e.TEXTURE0+i),n.bindTexture(e.TEXTURE_2D,a.__webglTexture)}const Z={[u]:e.REPEAT,[d]:e.CLAMP_TO_EDGE,[h]:e.MIRRORED_REPEAT},J={[f]:e.NEAREST,[p]:e.NEAREST_MIPMAP_NEAREST,[m]:e.NEAREST_MIPMAP_LINEAR,[g]:e.LINEAR,[v]:e.LINEAR_MIPMAP_NEAREST,[y]:e.LINEAR_MIPMAP_LINEAR};function $(n,a,o){if(o?(e.texParameteri(n,e.TEXTURE_WRAP_S,Z[a.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,Z[a.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,Z[a.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,J[a.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,J[a.minFilter])):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),a.wrapS===d&&a.wrapT===d||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,e.TEXTURE_MAG_FILTER,V(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,V(a.minFilter)),a.minFilter!==f&&a.minFilter!==g&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const o=t.get("EXT_texture_filter_anisotropic");if(a.type===w&&!1===t.has("OES_texture_float_linear"))return;if(!1===s&&a.type===M&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function K(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",j));const i=n.source;let a=k.get(i);void 0===a&&(a={},k.set(i,a));const s=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.encoding),t.join()}(n);if(s!==t.__cacheKey){void 0===a[s]&&(a[s]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,r=!0),a[s].usedTimes++;const i=a[t.__cacheKey];void 0!==i&&(a[t.__cacheKey].usedTimes--,0===i.usedTimes&&X(n)),t.__cacheKey=s,t.__webglTexture=a[s].texture}return r}function Q(t,r,i){let o=e.TEXTURE_2D;r.isDataArrayTexture&&(o=e.TEXTURE_2D_ARRAY),r.isData3DTexture&&(o=e.TEXTURE_3D);const l=K(t,r),c=r.source;if(n.activeTexture(e.TEXTURE0+i),n.bindTexture(o,t.__webglTexture),c.version!==c.__currentVersion||!0===l){e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE);const t=function(e){return!s&&(e.wrapS!==d||e.wrapT!==d||e.minFilter!==f&&e.minFilter!==g)}(r)&&!1===O(r.image);let i=N(r.image,t,!1,T);i=ae(r,i);const u=O(i)||s,h=a.convert(r.format,r.encoding);let p,m=a.convert(r.type),v=H(r.internalFormat,h,m,r.encoding,r.isVideoTexture);$(o,r,u);const y=r.mipmaps,b=s&&!0!==r.isVideoTexture,M=void 0===c.__currentVersion||!0===l,R=G(r,i,u);if(r.isDepthTexture)v=e.DEPTH_COMPONENT,s?v=r.type===w?e.DEPTH_COMPONENT32F:r.type===_?e.DEPTH_COMPONENT24:r.type===S?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT16:r.type===w&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===E&&v===e.DEPTH_COMPONENT&&r.type!==x&&r.type!==_&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=_,m=a.convert(r.type)),r.format===C&&v===e.DEPTH_COMPONENT&&(v=e.DEPTH_STENCIL,r.type!==S&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=S,m=a.convert(r.type))),M&&(b?n.texStorage2D(e.TEXTURE_2D,1,v,i.width,i.height):n.texImage2D(e.TEXTURE_2D,0,v,i.width,i.height,0,h,m,null));else if(r.isDataTexture)if(y.length>0&&u){b&&M&&n.texStorage2D(e.TEXTURE_2D,R,v,y[0].width,y[0].height);for(let t=0,r=y.length;t<r;t++)p=y[t],b?n.texSubImage2D(e.TEXTURE_2D,t,0,0,p.width,p.height,h,m,p.data):n.texImage2D(e.TEXTURE_2D,t,v,p.width,p.height,0,h,m,p.data);r.generateMipmaps=!1}else b?(M&&n.texStorage2D(e.TEXTURE_2D,R,v,i.width,i.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,i.width,i.height,h,m,i.data)):n.texImage2D(e.TEXTURE_2D,0,v,i.width,i.height,0,h,m,i.data);else if(r.isCompressedTexture){b&&M&&n.texStorage2D(e.TEXTURE_2D,R,v,y[0].width,y[0].height);for(let t=0,i=y.length;t<i;t++)p=y[t],r.format!==A?null!==h?b?n.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,p.width,p.height,h,p.data):n.compressedTexImage2D(e.TEXTURE_2D,t,v,p.width,p.height,0,p.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):b?n.texSubImage2D(e.TEXTURE_2D,t,0,0,p.width,p.height,h,m,p.data):n.texImage2D(e.TEXTURE_2D,t,v,p.width,p.height,0,h,m,p.data)}else if(r.isDataArrayTexture)b?(M&&n.texStorage3D(e.TEXTURE_2D_ARRAY,R,v,i.width,i.height,i.depth),n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,i.width,i.height,i.depth,h,m,i.data)):n.texImage3D(e.TEXTURE_2D_ARRAY,0,v,i.width,i.height,i.depth,0,h,m,i.data);else if(r.isData3DTexture)b?(M&&n.texStorage3D(e.TEXTURE_3D,R,v,i.width,i.height,i.depth),n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,i.width,i.height,i.depth,h,m,i.data)):n.texImage3D(e.TEXTURE_3D,0,v,i.width,i.height,i.depth,0,h,m,i.data);else if(r.isFramebufferTexture){if(M)if(b)n.texStorage2D(e.TEXTURE_2D,R,v,i.width,i.height);else{let t=i.width,r=i.height;for(let i=0;i<R;i++)n.texImage2D(e.TEXTURE_2D,i,v,t,r,0,h,m,null),t>>=1,r>>=1}}else if(y.length>0&&u){b&&M&&n.texStorage2D(e.TEXTURE_2D,R,v,y[0].width,y[0].height);for(let t=0,r=y.length;t<r;t++)p=y[t],b?n.texSubImage2D(e.TEXTURE_2D,t,0,0,h,m,p):n.texImage2D(e.TEXTURE_2D,t,v,h,m,p);r.generateMipmaps=!1}else b?(M&&n.texStorage2D(e.TEXTURE_2D,R,v,i.width,i.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,h,m,i)):n.texImage2D(e.TEXTURE_2D,0,v,h,m,i);z(r,u)&&U(o),c.__currentVersion=c.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}function ee(t,i,o,s,l){const c=a.convert(o.format,o.encoding),u=a.convert(o.type),d=H(o.internalFormat,c,u,o.encoding);r.get(i).__hasExternalTextures||(l===e.TEXTURE_3D||l===e.TEXTURE_2D_ARRAY?n.texImage3D(l,0,d,i.width,i.height,i.depth,0,c,u,null):n.texImage2D(l,0,d,i.width,i.height,0,c,u,null)),n.bindFramebuffer(e.FRAMEBUFFER,t),ie(i)?P.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,s,l,r.get(o).__webglTexture,0,re(i)):e.framebufferTexture2D(e.FRAMEBUFFER,s,l,r.get(o).__webglTexture,0),n.bindFramebuffer(e.FRAMEBUFFER,null)}function te(t,n,r){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer){let i=e.DEPTH_COMPONENT16;if(r||ie(n)){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===w?i=e.DEPTH_COMPONENT32F:t.type===_&&(i=e.DEPTH_COMPONENT24));const r=re(n);ie(n)?P.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,r,i,n.width,n.height):e.renderbufferStorageMultisample(e.RENDERBUFFER,r,i,n.width,n.height)}else e.renderbufferStorage(e.RENDERBUFFER,i,n.width,n.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)}else if(n.depthBuffer&&n.stencilBuffer){const i=re(n);r&&!1===ie(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,i,e.DEPTH24_STENCIL8,n.width,n.height):ie(n)?P.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,i,e.DEPTH24_STENCIL8,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let i=0;i<t.length;i++){const o=t[i],s=a.convert(o.format,o.encoding),l=a.convert(o.type),c=H(o.internalFormat,s,l,o.encoding),u=re(n);r&&!1===ie(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,u,c,n.width,n.height):ie(n)?P.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,u,c,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,c,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function ne(t){const i=r.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),Y(i.depthTexture,0);const a=r.get(i.depthTexture).__webglTexture,o=re(i);if(i.depthTexture.format===E)ie(i)?P.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0,o):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0);else{if(i.depthTexture.format!==C)throw new Error("Unknown depthTexture format");ie(i)?P.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0,o):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0)}}(i.__webglFramebuffer,t)}else if(a){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=e.createRenderbuffer(),te(i.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),te(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(e.FRAMEBUFFER,null)}function re(e){return Math.min(R,e.samples)}function ie(e){const n=r.get(e);return s&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function ae(e,n){const r=e.encoding,i=e.format,a=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===fe||r!==oe&&(r===se?!1===s?!0===t.has("EXT_sRGB")&&i===A?(e.format=fe,e.minFilter=g,e.generateMipmaps=!1):n=We.sRGBToLinear(n):i===A&&a===b||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",r)),n}this.allocateTextureUnit=function(){const e=q;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),q+=1,e},this.resetTextureUnits=function(){q=0},this.setTexture2D=Y,this.setTexture2DArray=function(t,i){const a=r.get(t);t.version>0&&a.__version!==t.version?Q(a,t,i):(n.activeTexture(e.TEXTURE0+i),n.bindTexture(e.TEXTURE_2D_ARRAY,a.__webglTexture))},this.setTexture3D=function(t,i){const a=r.get(t);t.version>0&&a.__version!==t.version?Q(a,t,i):(n.activeTexture(e.TEXTURE0+i),n.bindTexture(e.TEXTURE_3D,a.__webglTexture))},this.setTextureCube=function(t,i){const o=r.get(t);t.version>0&&o.__version!==t.version?function(t,r,i){if(6!==r.image.length)return;const o=K(t,r),l=r.source;if(n.activeTexture(e.TEXTURE0+i),n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture),l.version!==l.__currentVersion||!0===o){e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE);const t=r.isCompressedTexture||r.image[0].isCompressedTexture,i=r.image[0]&&r.image[0].isDataTexture,u=[];for(let e=0;e<6;e++)u[e]=t||i?i?r.image[e].image:r.image[e]:N(r.image[e],!1,!0,c),u[e]=ae(r,u[e]);const d=u[0],h=O(d)||s,f=a.convert(r.format,r.encoding),p=a.convert(r.type),m=H(r.internalFormat,f,p,r.encoding),g=s&&!0!==r.isVideoTexture,v=void 0===l.__currentVersion||!0===o;let y,b=G(r,d,h);if($(e.TEXTURE_CUBE_MAP,r,h),t){g&&v&&n.texStorage2D(e.TEXTURE_CUBE_MAP,b,m,d.width,d.height);for(let t=0;t<6;t++){y=u[t].mipmaps;for(let i=0;i<y.length;i++){const a=y[i];r.format!==A?null!==f?g?n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,0,0,a.width,a.height,f,a.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,m,a.width,a.height,0,a.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):g?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,0,0,a.width,a.height,f,p,a.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,m,a.width,a.height,0,f,p,a.data)}}}else{y=r.mipmaps,g&&v&&(y.length>0&&b++,n.texStorage2D(e.TEXTURE_CUBE_MAP,b,m,u[0].width,u[0].height));for(let t=0;t<6;t++)if(i){g?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,u[t].width,u[t].height,f,p,u[t].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,m,u[t].width,u[t].height,0,f,p,u[t].data);for(let r=0;r<y.length;r++){const i=y[r].image[t].image;g?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,i.width,i.height,f,p,i.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,m,i.width,i.height,0,f,p,i.data)}}else{g?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,f,p,u[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,m,f,p,u[t]);for(let r=0;r<y.length;r++){const i=y[r];g?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,f,p,i.image[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,m,f,p,i.image[t])}}}z(r,h)&&U(e.TEXTURE_CUBE_MAP),l.__currentVersion=l.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}(o,t,i):(n.activeTexture(e.TEXTURE0+i),n.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture))},this.rebindTextures=function(t,n,i){const a=r.get(t);void 0!==n&&ee(a.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),void 0!==i&&ne(t)},this.setupRenderTarget=function(t){const l=t.texture,c=r.get(t),u=r.get(l);t.addEventListener("dispose",W),!0!==t.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=l.version,o.memory.textures++);const d=!0===t.isWebGLCubeRenderTarget,h=!0===t.isWebGLMultipleRenderTargets,f=O(t)||s;if(d){c.__webglFramebuffer=[];for(let t=0;t<6;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else{if(c.__webglFramebuffer=e.createFramebuffer(),h)if(i.drawBuffers){const n=t.texture;for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(s&&t.samples>0&&!1===ie(t)){const r=h?l:[l];c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer);for(let n=0;n<r.length;n++){const i=r[n];c.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,c.__webglColorRenderbuffer[n]);const o=a.convert(i.format,i.encoding),s=a.convert(i.type),l=H(i.internalFormat,o,s,i.encoding),u=re(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,u,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,c.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),te(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(d){n.bindTexture(e.TEXTURE_CUBE_MAP,u.__webglTexture),$(e.TEXTURE_CUBE_MAP,l,f);for(let n=0;n<6;n++)ee(c.__webglFramebuffer[n],t,l,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n);z(l,f)&&U(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(h){const i=t.texture;for(let a=0,o=i.length;a<o;a++){const o=i[a],s=r.get(o);n.bindTexture(e.TEXTURE_2D,s.__webglTexture),$(e.TEXTURE_2D,o,f),ee(c.__webglFramebuffer,t,o,e.COLOR_ATTACHMENT0+a,e.TEXTURE_2D),z(o,f)&&U(e.TEXTURE_2D)}n.unbindTexture()}else{let r=e.TEXTURE_2D;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(s?r=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(r,u.__webglTexture),$(r,l,f),ee(c.__webglFramebuffer,t,l,e.COLOR_ATTACHMENT0,r),z(l,f)&&U(r),n.unbindTexture()}t.depthBuffer&&ne(t)},this.updateRenderTargetMipmap=function(t){const i=O(t)||s,a=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let o=0,s=a.length;o<s;o++){const s=a[o];if(z(s,i)){const i=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,a=r.get(s).__webglTexture;n.bindTexture(i,a),U(i),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(s&&t.samples>0&&!1===ie(t)){const i=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],a=t.width,o=t.height;let s=e.COLOR_BUFFER_BIT;const l=[],c=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,u=r.get(t),d=!0===t.isWebGLMultipleRenderTargets;if(d)for(let t=0;t<i.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,u.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglFramebuffer);for(let n=0;n<i.length;n++){l.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&l.push(c);const h=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;if(!1===h&&(t.depthBuffer&&(s|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&(s|=e.STENCIL_BUFFER_BIT)),d&&e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,u.__webglColorRenderbuffer[n]),!0===h&&(e.invalidateFramebuffer(e.READ_FRAMEBUFFER,[c]),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[c])),d){const t=r.get(i[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,a,o,0,0,a,o,s,e.NEAREST),L&&e.invalidateFramebuffer(e.READ_FRAMEBUFFER,l)}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),d)for(let t=0;t<i.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,u.__webglColorRenderbuffer[t]);const a=r.get(i[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,a,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=ne,this.setupFrameBufferTexture=ee,this.useMultisampledRTT=ie}function za(e,t,n){const r=n.isWebGL2;return{convert:function(n,i=null){let a;if(n===b)return e.UNSIGNED_BYTE;if(1017===n)return e.UNSIGNED_SHORT_4_4_4_4;if(1018===n)return e.UNSIGNED_SHORT_5_5_5_1;if(1010===n)return e.BYTE;if(1011===n)return e.SHORT;if(n===x)return e.UNSIGNED_SHORT;if(1013===n)return e.INT;if(n===_)return e.UNSIGNED_INT;if(n===w)return e.FLOAT;if(n===M)return r?e.HALF_FLOAT:(a=t.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===n)return e.ALPHA;if(n===A)return e.RGBA;if(1024===n)return e.LUMINANCE;if(1025===n)return e.LUMINANCE_ALPHA;if(n===E)return e.DEPTH_COMPONENT;if(n===C)return e.DEPTH_STENCIL;if(1028===n)return e.RED;if(1022===n)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),e.RGBA;if(n===fe)return a=t.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1029===n)return e.RED_INTEGER;if(1030===n)return e.RG;if(1031===n)return e.RG_INTEGER;if(1033===n)return e.RGBA_INTEGER;if(n===T||n===R||n===P||n===L)if(i===se){if(a=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(n===T)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===R)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===P)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===L)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=t.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(n===T)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===R)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===P)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===L)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===D||n===I||n===k||n===B){if(a=t.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(n===D)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===I)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===k)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===B)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===n)return a=t.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===F||n===N){if(a=t.get("WEBGL_compressed_texture_etc"),null===a)return null;if(n===F)return i===se?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(n===N)return i===se?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(n===O||n===z||n===U||n===H||n===G||n===V||n===j||n===W||n===X||n===q||n===Y||n===Z||n===J||n===$){if(a=t.get("WEBGL_compressed_texture_astc"),null===a)return null;if(n===O)return i===se?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===z)return i===se?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===U)return i===se?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===H)return i===se?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===G)return i===se?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===V)return i===se?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===j)return i===se?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===W)return i===se?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===X)return i===se?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===q)return i===se?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Y)return i===se?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Z)return i===se?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===J)return i===se?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===$)return i===se?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===K){if(a=t.get("EXT_texture_compression_bptc"),null===a)return null;if(n===K)return i===se?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}return n===S?r?e.UNSIGNED_INT_24_8:(a=t.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[n]?e[n]:null}}}class Ua extends ir{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Ha extends rn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Ga={type:"move"};class Va{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Ha,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Ha,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new tt,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new tt),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Ha,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new tt,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new tt),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,a=null;const o=this._targetRay,s=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){a=!0;for(const r of e.hand.values()){const e=t.getJointPose(r,n);if(void 0===l.joints[r.jointName]){const e=new Ha;e.matrixAutoUpdate=!1,e.visible=!1,l.joints[r.jointName]=e,l.add(e)}const i=l.joints[r.jointName];null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.jointRadius=e.radius),i.visible=null!==e}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],o=r.position.distanceTo(i.position),s=.02,c=.005;l.inputState.pinching&&o>s+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&o<=s-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1));null!==o&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(Ga)))}return null!==o&&(o.visible=null!==r),null!==s&&(s.visible=null!==i),null!==l&&(l.visible=null!==a),this}}class ja extends Ze{constructor(e,t,n,r,i,a,o,s,l,c){if((c=void 0!==c?c:E)!==E&&c!==C)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===E&&(n=_),void 0===n&&c===C&&(n=S),super(null,r,i,a,o,s,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==o?o:f,this.minFilter=void 0!==s?s:f,this.flipY=!1,this.generateMipmaps=!1}}class Wa extends pe{constructor(e,t){super();const n=this;let r=null,i=1,a=null,o="local-floor",s=null,l=null,c=null,u=null,d=null,h=null;const f=t.getContextAttributes();let p=null,m=null;const g=[],v=[],y=new ir;y.layers.enable(1),y.viewport=new Je;const x=new ir;x.layers.enable(2),x.viewport=new Je;const w=[y,x],M=new Ua;M.layers.enable(1),M.layers.enable(2);let T=null,R=null;function P(e){const t=v.indexOf(e.inputSource);if(-1===t)return;const n=g[t];void 0!==n&&n.dispatchEvent({type:e.type,data:e.inputSource})}function L(){r.removeEventListener("select",P),r.removeEventListener("selectstart",P),r.removeEventListener("selectend",P),r.removeEventListener("squeeze",P),r.removeEventListener("squeezestart",P),r.removeEventListener("squeezeend",P),r.removeEventListener("end",L),r.removeEventListener("inputsourceschange",D);for(let e=0;e<g.length;e++){const t=v[e];null!==t&&(v[e]=null,g[e].disconnect(t))}T=null,R=null,e.setRenderTarget(p),d=null,u=null,c=null,r=null,m=null,N.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function D(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=v.indexOf(n);r>=0&&(v[r]=null,g[r].dispatchEvent({type:"disconnected",data:n}))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let r=v.indexOf(n);if(-1===r){for(let e=0;e<g.length;e++){if(e>=v.length){v.push(n),r=e;break}if(null===v[e]){v[e]=n,r=e;break}}if(-1===r)break}const i=g[r];i&&i.dispatchEvent({type:"connected",data:n})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=g[e];return void 0===t&&(t=new Va,g[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=g[e];return void 0===t&&(t=new Va,g[e]=t),t.getGripSpace()},this.getHand=function(e){let t=g[e];return void 0===t&&(t=new Va,g[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){o=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return s||a},this.setReferenceSpace=function(e){s=e},this.getBaseLayer=function(){return null!==u?u:d},this.getBinding=function(){return c},this.getFrame=function(){return h},this.getSession=function(){return r},this.setSession=async function(l){if(r=l,null!==r){if(p=e.getRenderTarget(),r.addEventListener("select",P),r.addEventListener("selectstart",P),r.addEventListener("selectend",P),r.addEventListener("squeeze",P),r.addEventListener("squeezestart",P),r.addEventListener("squeezeend",P),r.addEventListener("end",L),r.addEventListener("inputsourceschange",D),!0!==f.xrCompatible&&await t.makeXRCompatible(),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2){const n={antialias:void 0!==r.renderState.layers||f.antialias,alpha:f.alpha,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:i};d=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:d}),m=new $e(d.framebufferWidth,d.framebufferHeight,{format:A,type:b,encoding:e.outputEncoding})}else{let n=null,a=null,o=null;f.depth&&(o=f.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=f.stencil?C:E,a=f.stencil?S:_);const s={colorFormat:t.RGBA8,depthFormat:o,scaleFactor:i};c=new XRWebGLBinding(r,t),u=c.createProjectionLayer(s),r.updateRenderState({layers:[u]}),m=new $e(u.textureWidth,u.textureHeight,{format:A,type:b,depthTexture:new ja(u.textureWidth,u.textureHeight,a,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:f.stencil,encoding:e.outputEncoding,samples:f.antialias?4:0}),e.properties.get(m).__ignoreDepthValues=u.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(1),s=null,a=await r.requestReferenceSpace(o),N.setContext(r),N.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const I=new tt,k=new tt;function B(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;M.near=x.near=y.near=e.near,M.far=x.far=y.far=e.far,T===M.near&&R===M.far||(r.updateRenderState({depthNear:M.near,depthFar:M.far}),T=M.near,R=M.far);const t=e.parent,n=M.cameras;B(M,t);for(let e=0;e<n.length;e++)B(n[e],t);M.matrixWorld.decompose(M.position,M.quaternion,M.scale),e.position.copy(M.position),e.quaternion.copy(M.quaternion),e.scale.copy(M.scale),e.matrix.copy(M.matrix),e.matrixWorld.copy(M.matrixWorld);const i=e.children;for(let e=0,t=i.length;e<t;e++)i[e].updateMatrixWorld(!0);2===n.length?function(e,t,n){I.setFromMatrixPosition(t.matrixWorld),k.setFromMatrixPosition(n.matrixWorld);const r=I.distanceTo(k),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],u=(i[8]-1)/i[0],d=(a[8]+1)/a[0],h=o*u,f=o*d,p=r/(-u+d),m=p*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=o+p,v=s+p,y=h-m,b=f+(r-m),x=l*s/v*g,_=c*s/v*g;e.projectionMatrix.makePerspective(y,b,x,_,g,v)}(M,y,x):M.projectionMatrix.copy(y.projectionMatrix)},this.getCamera=function(){return M},this.getFoveation=function(){return null!==u?u.fixedFoveation:null!==d?d.fixedFoveation:void 0},this.setFoveation=function(e){null!==u&&(u.fixedFoveation=e),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=e)};let F=null;const N=new gr;N.setAnimationLoop((function(t,n){if(l=n.getViewerPose(s||a),h=n,null!==l){const t=l.views;null!==d&&(e.setRenderTargetFramebuffer(m,d.framebuffer),e.setRenderTarget(m));let n=!1;t.length!==M.cameras.length&&(M.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){const i=t[r];let a=null;if(null!==d)a=d.getViewport(i);else{const t=c.getViewSubImage(u,i);a=t.viewport,0===r&&(e.setRenderTargetTextures(m,t.colorTexture,u.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(m))}let o=w[r];void 0===o&&(o=new ir,o.layers.enable(r),o.viewport=new Je,w[r]=o),o.matrix.fromArray(i.transform.matrix),o.projectionMatrix.fromArray(i.projectionMatrix),o.viewport.set(a.x,a.y,a.width,a.height),0===r&&M.matrix.copy(o.matrix),!0===n&&M.cameras.push(o)}}for(let e=0;e<g.length;e++){const t=v[e],r=g[e];null!==t&&void 0!==r&&r.update(t,n,s||a)}F&&F(t,n),h=null})),this.setAnimationLoop=function(e){F=e},this.dispose=function(){}}}function Xa(e,t){function n(n,r){n.opacity.value=r.opacity,r.color&&n.diffuse.value.copy(r.color),r.emissive&&n.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(n.map.value=r.map),r.alphaMap&&(n.alphaMap.value=r.alphaMap),r.bumpMap&&(n.bumpMap.value=r.bumpMap,n.bumpScale.value=r.bumpScale,1===r.side&&(n.bumpScale.value*=-1)),r.displacementMap&&(n.displacementMap.value=r.displacementMap,n.displacementScale.value=r.displacementScale,n.displacementBias.value=r.displacementBias),r.emissiveMap&&(n.emissiveMap.value=r.emissiveMap),r.normalMap&&(n.normalMap.value=r.normalMap,n.normalScale.value.copy(r.normalScale),1===r.side&&n.normalScale.value.negate()),r.specularMap&&(n.specularMap.value=r.specularMap),r.alphaTest>0&&(n.alphaTest.value=r.alphaTest);const i=t.get(r).envMap;if(i&&(n.envMap.value=i,n.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,n.reflectivity.value=r.reflectivity,n.ior.value=r.ior,n.refractionRatio.value=r.refractionRatio),r.lightMap){n.lightMap.value=r.lightMap;const t=!0!==e.physicallyCorrectLights?Math.PI:1;n.lightMapIntensity.value=r.lightMapIntensity*t}let a,o;r.aoMap&&(n.aoMap.value=r.aoMap,n.aoMapIntensity.value=r.aoMapIntensity),r.map?a=r.map:r.specularMap?a=r.specularMap:r.displacementMap?a=r.displacementMap:r.normalMap?a=r.normalMap:r.bumpMap?a=r.bumpMap:r.roughnessMap?a=r.roughnessMap:r.metalnessMap?a=r.metalnessMap:r.alphaMap?a=r.alphaMap:r.emissiveMap?a=r.emissiveMap:r.clearcoatMap?a=r.clearcoatMap:r.clearcoatNormalMap?a=r.clearcoatNormalMap:r.clearcoatRoughnessMap?a=r.clearcoatRoughnessMap:r.iridescenceMap?a=r.iridescenceMap:r.iridescenceThicknessMap?a=r.iridescenceThicknessMap:r.specularIntensityMap?a=r.specularIntensityMap:r.specularColorMap?a=r.specularColorMap:r.transmissionMap?a=r.transmissionMap:r.thicknessMap?a=r.thicknessMap:r.sheenColorMap?a=r.sheenColorMap:r.sheenRoughnessMap&&(a=r.sheenRoughnessMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),n.uvTransform.value.copy(a.matrix)),r.aoMap?o=r.aoMap:r.lightMap&&(o=r.lightMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),n.uv2Transform.value.copy(o.matrix))}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,i,a,o){r.isMeshBasicMaterial||r.isMeshLambertMaterial?n(e,r):r.isMeshToonMaterial?(n(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,r)):r.isMeshPhongMaterial?(n(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(n(e,r),function(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap),t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function(e,t,n){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap)),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,1===t.side&&e.clearcoatNormalScale.value.negate())),t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap)),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)),e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,r,o)):r.isMeshMatcapMaterial?(n(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?n(e,r):r.isMeshDistanceMaterial?(n(e,r),function(e,t){e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?n(e,r):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){let i;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?i=t.map:t.alphaMap&&(i=t.alphaMap),void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,i,a):r.isSpriteMaterial?function(e,t){let n;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?n=t.map:t.alphaMap&&(n=t.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function qa(e,t,n,r){let i={},a={},o=[];const s=n.isWebGL2?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(e,t,n){const r=e.value;if(void 0===n[t])return n[t]="number"==typeof r?r:r.clone(),!0;if("number"==typeof r){if(n[t]!==r)return n[t]=r,!0}else{const e=n[t];if(!1===e.equals(r))return e.copy(r),!0}return!1}function c(e){const t=e.value,n={boundary:0,storage:0};return"number"==typeof t?(n.boundary=4,n.storage=4):t.isVector2?(n.boundary=8,n.storage=8):t.isVector3||t.isColor?(n.boundary=16,n.storage=12):t.isVector4?(n.boundary=16,n.storage=16):t.isMatrix3?(n.boundary=48,n.storage=48):t.isMatrix4?(n.boundary=64,n.storage=64):t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",t),n}function u(t){const n=t.target;n.removeEventListener("dispose",u);const r=o.indexOf(n.__bindingPointIndex);o.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete a[n.id]}return{bind:function(e,t){const n=t.program;r.uniformBlockBinding(e,n)},update:function(n,d){let h=i[n.id];void 0===h&&(function(e){const t=e.uniforms;let n=0;let r=0;for(let e=0,i=t.length;e<i;e++){const i=t[e],a=c(i);if(i.__data=new Float32Array(a.storage/Float32Array.BYTES_PER_ELEMENT),i.__offset=n,e>0){r=n%16;const e=16-r;0!==r&&e-a.boundary<0&&(n+=16-r,i.__offset=n)}n+=a.storage}r=n%16,r>0&&(n+=16-r),e.__size=n,e.__cache={}}(n),h=function(t){const n=function(){for(let e=0;e<s;e++)if(-1===o.indexOf(e))return o.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const r=e.createBuffer(),i=t.__size,a=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,r),e.bufferData(e.UNIFORM_BUFFER,i,a),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,r),r}(n),i[n.id]=h,n.addEventListener("dispose",u));const f=d.program;r.updateUBOMapping(n,f);const p=t.render.frame;a[n.id]!==p&&(function(t){const n=i[t.id],r=t.uniforms,a=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let t=0,n=r.length;t<n;t++){const n=r[t];if(!0===l(n,t,a)){const t=n.value,r=n.__offset;"number"==typeof t?(n.__data[0]=t,e.bufferSubData(e.UNIFORM_BUFFER,r,n.__data)):(n.value.isMatrix3?(n.__data[0]=n.value.elements[0],n.__data[1]=n.value.elements[1],n.__data[2]=n.value.elements[2],n.__data[3]=n.value.elements[0],n.__data[4]=n.value.elements[3],n.__data[5]=n.value.elements[4],n.__data[6]=n.value.elements[5],n.__data[7]=n.value.elements[0],n.__data[8]=n.value.elements[6],n.__data[9]=n.value.elements[7],n.__data[10]=n.value.elements[8],n.__data[11]=n.value.elements[0]):t.toArray(n.__data),e.bufferSubData(e.UNIFORM_BUFFER,r,n.__data))}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),a[n.id]=p)},dispose:function(){for(const t in i)e.deleteBuffer(i[t]);o=[],i={},a={}}}}function Ya(e={}){this.isWebGLRenderer=!0;const t=void 0!==e.canvas?e.canvas:function(){const e=De("canvas");return e.style.display="block",e}(),n=void 0!==e.context?e.context:null,r=void 0===e.depth||e.depth,i=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,o=void 0===e.premultipliedAlpha||e.premultipliedAlpha,s=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let u;u=null!==n?n.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;let d=null,h=null;const f=[],p=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=oe,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const m=this;let g=!1,v=0,x=0,_=null,S=-1,E=null;const C=new Je,T=new Je;let R=null,P=t.width,L=t.height,D=1,I=null,k=null;const B=new Je(0,0,P,L),F=new Je(0,0,P,L);let N=!1;const O=new mr;let z=!1,U=!1,H=null;const G=new Dt,V=new Ce,j=new tt,W={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function X(){return null===_?D:1}let q,Y,Z,J,$,K,Q,ee,te,ne,re,ie,ae,se,le,ce,ue,de,he,fe,pe,me,ge,ve,ye=n;function be(e,n){for(let r=0;r<e.length;r++){const i=e[r],a=t.getContext(i,n);if(null!==a)return a}return null}try{const e={alpha:!0,depth:r,stencil:i,antialias:a,premultipliedAlpha:o,preserveDrawingBuffer:s,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r143"),t.addEventListener("webglcontextlost",we,!1),t.addEventListener("webglcontextrestored",Me,!1),t.addEventListener("webglcontextcreationerror",Se,!1),null===ye){const t=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&t.shift(),ye=be(t,e),null===ye)throw be(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ye.getShaderPrecisionFormat&&(ye.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function xe(){q=new Gr(ye),Y=new Ar(ye,q,e),q.init(Y),me=new za(ye,q,Y),Z=new Na(ye,q,Y),J=new Wr(ye),$=new Ma,K=new Oa(ye,q,Z,$,Y,me,J),Q=new Cr(m),ee=new Hr(m),te=new vr(ye,Y),ge=new Mr(ye,q,te,Y),ne=new Vr(ye,te,J,ge),re=new Jr(ye,ne,te,J),he=new Zr(ye,Y,K),ce=new Er($),ie=new wa(m,Q,ee,q,Y,ge,ce),ae=new Xa(m,$),se=new Ca,le=new Ia(q,Y),de=new wr(m,Q,Z,re,u,o),ue=new Fa(m,re,Y),ve=new qa(ye,J,Y,Z),fe=new Sr(ye,q,J,Y),pe=new jr(ye,q,J,Y),J.programs=ie.programs,m.capabilities=Y,m.extensions=q,m.properties=$,m.renderLists=se,m.shadowMap=ue,m.state=Z,m.info=J}xe();const _e=new Wa(m,ye);function we(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function Me(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const e=J.autoReset,t=ue.enabled,n=ue.autoUpdate,r=ue.needsUpdate,i=ue.type;xe(),J.autoReset=e,ue.enabled=t,ue.autoUpdate=n,ue.needsUpdate=r,ue.type=i}function Se(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Ee(e){const t=e.target;t.removeEventListener("dispose",Ee),function(e){(function(e){const t=$.get(e).programs;void 0!==t&&(t.forEach((function(e){ie.releaseProgram(e)})),e.isShaderMaterial&&ie.releaseShaderCache(e))})(e),$.remove(e)}(t)}this.xr=_e,this.getContext=function(){return ye},this.getContextAttributes=function(){return ye.getContextAttributes()},this.forceContextLoss=function(){const e=q.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=q.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return D},this.setPixelRatio=function(e){void 0!==e&&(D=e,this.setSize(P,L,!1))},this.getSize=function(e){return e.set(P,L)},this.setSize=function(e,n,r){_e.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(P=e,L=n,t.width=Math.floor(e*D),t.height=Math.floor(n*D),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(P*D,L*D).floor()},this.setDrawingBufferSize=function(e,n,r){P=e,L=n,D=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(C)},this.getViewport=function(e){return e.copy(B)},this.setViewport=function(e,t,n,r){e.isVector4?B.set(e.x,e.y,e.z,e.w):B.set(e,t,n,r),Z.viewport(C.copy(B).multiplyScalar(D).floor())},this.getScissor=function(e){return e.copy(F)},this.setScissor=function(e,t,n,r){e.isVector4?F.set(e.x,e.y,e.z,e.w):F.set(e,t,n,r),Z.scissor(T.copy(F).multiplyScalar(D).floor())},this.getScissorTest=function(){return N},this.setScissorTest=function(e){Z.setScissorTest(N=e)},this.setOpaqueSort=function(e){I=e},this.setTransparentSort=function(e){k=e},this.getClearColor=function(e){return e.copy(de.getClearColor())},this.setClearColor=function(){de.setClearColor.apply(de,arguments)},this.getClearAlpha=function(){return de.getClearAlpha()},this.setClearAlpha=function(){de.setClearAlpha.apply(de,arguments)},this.clear=function(e=!0,t=!0,n=!0){let r=0;e&&(r|=ye.COLOR_BUFFER_BIT),t&&(r|=ye.DEPTH_BUFFER_BIT),n&&(r|=ye.STENCIL_BUFFER_BIT),ye.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",we,!1),t.removeEventListener("webglcontextrestored",Me,!1),t.removeEventListener("webglcontextcreationerror",Se,!1),se.dispose(),le.dispose(),$.dispose(),Q.dispose(),ee.dispose(),re.dispose(),ge.dispose(),ve.dispose(),ie.dispose(),_e.dispose(),_e.removeEventListener("sessionstart",Re),_e.removeEventListener("sessionend",Pe),H&&(H.dispose(),H=null),Le.stop()},this.renderBufferDirect=function(e,t,n,r,i,a){null===t&&(t=W);const o=i.isMesh&&i.matrixWorld.determinant()<0,s=function(e,t,n,r,i){!0!==t.isScene&&(t=W),K.resetTextureUnits();const a=t.fog,o=r.isMeshStandardMaterial?t.environment:null,s=null===_?m.outputEncoding:!0===_.isXRRenderTarget?_.texture.encoding:oe,l=(r.isMeshStandardMaterial?ee:Q).get(r.envMap||o),c=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!r.normalMap&&!!n.attributes.tangent,d=!!n.morphAttributes.position,f=!!n.morphAttributes.normal,p=!!n.morphAttributes.color,g=r.toneMapped?m.toneMapping:0,v=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,y=void 0!==v?v.length:0,b=$.get(r),x=h.state.lights;if(!0===z&&(!0===U||e!==E)){const t=e===E&&r.id===S;ce.setState(r,e,t)}let w=!1;r.version===b.__version?b.needsLights&&b.lightsStateVersion!==x.state.version||b.outputEncoding!==s||i.isInstancedMesh&&!1===b.instancing?w=!0:i.isInstancedMesh||!0!==b.instancing?i.isSkinnedMesh&&!1===b.skinning?w=!0:i.isSkinnedMesh||!0!==b.skinning?b.envMap!==l||!0===r.fog&&b.fog!==a?w=!0:void 0===b.numClippingPlanes||b.numClippingPlanes===ce.numPlanes&&b.numIntersection===ce.numIntersection?(b.vertexAlphas!==c||b.vertexTangents!==u||b.morphTargets!==d||b.morphNormals!==f||b.morphColors!==p||b.toneMapping!==g||!0===Y.isWebGL2&&b.morphTargetsCount!==y)&&(w=!0):w=!0:w=!0:w=!0:(w=!0,b.__version=r.version);let M=b.currentProgram;!0===w&&(M=Ne(r,t,i));let A=!1,C=!1,T=!1;const R=M.getUniforms(),P=b.uniforms;if(Z.useProgram(M.program)&&(A=!0,C=!0,T=!0),r.id!==S&&(S=r.id,C=!0),A||E!==e){if(R.setValue(ye,"projectionMatrix",e.projectionMatrix),Y.logarithmicDepthBuffer&&R.setValue(ye,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),E!==e&&(E=e,C=!0,T=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){const t=R.map.cameraPosition;void 0!==t&&t.setValue(ye,j.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&R.setValue(ye,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&R.setValue(ye,"viewMatrix",e.matrixWorldInverse)}if(i.isSkinnedMesh){R.setOptional(ye,i,"bindMatrix"),R.setOptional(ye,i,"bindMatrixInverse");const e=i.skeleton;e&&(Y.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),R.setValue(ye,"boneTexture",e.boneTexture,K),R.setValue(ye,"boneTextureSize",e.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const I=n.morphAttributes;var k,B;if((void 0!==I.position||void 0!==I.normal||void 0!==I.color&&!0===Y.isWebGL2)&&he.update(i,n,r,M),(C||b.receiveShadow!==i.receiveShadow)&&(b.receiveShadow=i.receiveShadow,R.setValue(ye,"receiveShadow",i.receiveShadow)),C&&(R.setValue(ye,"toneMappingExposure",m.toneMappingExposure),b.needsLights&&(B=T,(k=P).ambientLightColor.needsUpdate=B,k.lightProbe.needsUpdate=B,k.directionalLights.needsUpdate=B,k.directionalLightShadows.needsUpdate=B,k.pointLights.needsUpdate=B,k.pointLightShadows.needsUpdate=B,k.spotLights.needsUpdate=B,k.spotLightShadows.needsUpdate=B,k.rectAreaLights.needsUpdate=B,k.hemisphereLights.needsUpdate=B),a&&!0===r.fog&&ae.refreshFogUniforms(P,a),ae.refreshMaterialUniforms(P,r,D,L,H),ea.upload(ye,b.uniformsList,P,K)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(ea.upload(ye,b.uniformsList,P,K),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&R.setValue(ye,"center",i.center),R.setValue(ye,"modelViewMatrix",i.modelViewMatrix),R.setValue(ye,"normalMatrix",i.normalMatrix),R.setValue(ye,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const e=r.uniformsGroups;for(let t=0,n=e.length;t<n;t++)if(Y.isWebGL2){const n=e[t];ve.update(n,M),ve.bind(n,M)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return M}(e,t,n,r,i);Z.setMaterial(r,o);let l=n.index;const c=n.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;let u,d=1;!0===r.wireframe&&(l=ne.getWireframeAttribute(n),d=2),ge.setup(i,r,s,n,l);let f=fe;null!==l&&(u=te.get(l),f=pe,f.setIndex(u));const p=null!==l?l.count:c.count,g=n.drawRange.start*d,v=n.drawRange.count*d,y=null!==a?a.start*d:0,b=null!==a?a.count*d:1/0,x=Math.max(g,y),w=Math.min(p,g+v,y+b)-1,M=Math.max(0,w-x+1);if(0!==M){if(i.isMesh)!0===r.wireframe?(Z.setLineWidth(r.wireframeLinewidth*X()),f.setMode(ye.LINES)):f.setMode(ye.TRIANGLES);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),Z.setLineWidth(e*X()),i.isLineSegments?f.setMode(ye.LINES):i.isLineLoop?f.setMode(ye.LINE_LOOP):f.setMode(ye.LINE_STRIP)}else i.isPoints?f.setMode(ye.POINTS):i.isSprite&&f.setMode(ye.TRIANGLES);if(i.isInstancedMesh)f.renderInstances(x,M,i.count);else if(n.isInstancedBufferGeometry){const e=Math.min(n.instanceCount,n._maxInstanceCount);f.renderInstances(x,M,e)}else f.render(x,M)}},this.compile=function(e,t){h=le.get(e),h.init(),p.push(h),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(h.pushLight(e),e.castShadow&&h.pushShadow(e))})),h.setupLights(m.physicallyCorrectLights),e.traverse((function(t){const n=t.material;if(n)if(Array.isArray(n))for(let r=0;r<n.length;r++)Ne(n[r],e,t);else Ne(n,e,t)})),p.pop(),h=null};let Te=null;function Re(){Le.stop()}function Pe(){Le.start()}const Le=new gr;function Ie(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)h.pushLight(e),e.castShadow&&h.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||O.intersectsSprite(e)){r&&j.setFromMatrixPosition(e.matrixWorld).applyMatrix4(G);const t=re.update(e),i=e.material;i.visible&&d.push(e,t,i,n,j.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==J.render.frame&&(e.skeleton.update(),e.skeleton.frame=J.render.frame),!e.frustumCulled||O.intersectsObject(e))){r&&j.setFromMatrixPosition(e.matrixWorld).applyMatrix4(G);const t=re.update(e),i=e.material;if(Array.isArray(i)){const r=t.groups;for(let a=0,o=r.length;a<o;a++){const o=r[a],s=i[o.materialIndex];s&&s.visible&&d.push(e,t,s,n,j.z,o)}}else i.visible&&d.push(e,t,i,n,j.z,null)}const i=e.children;for(let e=0,a=i.length;e<a;e++)Ie(i[e],t,n,r)}function ke(e,t,n,r){const i=e.opaque,o=e.transmissive,s=e.transparent;h.setupLightsView(n),o.length>0&&function(e,t,n){const r=Y.isWebGL2;null===H&&(H=new $e(1,1,{generateMipmaps:!0,type:q.has("EXT_color_buffer_half_float")?M:b,minFilter:y,samples:r&&!0===a?4:0})),m.getDrawingBufferSize(V),r?H.setSize(V.x,V.y):H.setSize(Ae(V.x),Ae(V.y));const i=m.getRenderTarget();m.setRenderTarget(H),m.clear();const o=m.toneMapping;m.toneMapping=0,Be(e,t,n),m.toneMapping=o,K.updateMultisampleRenderTarget(H),K.updateRenderTargetMipmap(H),m.setRenderTarget(i)}(i,t,n),r&&Z.viewport(C.copy(r)),i.length>0&&Be(i,t,n),o.length>0&&Be(o,t,n),s.length>0&&Be(s,t,n),Z.buffers.depth.setTest(!0),Z.buffers.depth.setMask(!0),Z.buffers.color.setMask(!0),Z.setPolygonOffset(!1)}function Be(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,a=e.length;i<a;i++){const a=e[i],o=a.object,s=a.geometry,l=null===r?a.material:r,c=a.group;o.layers.test(n.layers)&&Fe(o,t,n,s,l,c)}}function Fe(e,t,n,r,i,a){e.onBeforeRender(m,t,n,r,i,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(m,t,n,r,e,a),!0===i.transparent&&2===i.side?(i.side=1,i.needsUpdate=!0,m.renderBufferDirect(n,t,r,i,e,a),i.side=0,i.needsUpdate=!0,m.renderBufferDirect(n,t,r,i,e,a),i.side=2):m.renderBufferDirect(n,t,r,i,e,a),e.onAfterRender(m,t,n,r,i,a)}function Ne(e,t,n){!0!==t.isScene&&(t=W);const r=$.get(e),i=h.state.lights,a=h.state.shadowsArray,o=i.state.version,s=ie.getParameters(e,i.state,a,t,n),l=ie.getProgramCacheKey(s);let c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?ee:Q).get(e.envMap||r.environment),void 0===c&&(e.addEventListener("dispose",Ee),c=new Map,r.programs=c);let u=c.get(l);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===o)return Oe(e,s),u}else s.uniforms=ie.getUniforms(e),e.onBuild(n,s,m),e.onBeforeCompile(s,m),u=ie.acquireProgram(s,l),c.set(l,u),r.uniforms=s.uniforms;const d=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(d.clippingPlanes=ce.uniform),Oe(e,s),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=o,r.needsLights&&(d.ambientLightColor.value=i.state.ambient,d.lightProbe.value=i.state.probe,d.directionalLights.value=i.state.directional,d.directionalLightShadows.value=i.state.directionalShadow,d.spotLights.value=i.state.spot,d.spotLightShadows.value=i.state.spotShadow,d.rectAreaLights.value=i.state.rectArea,d.ltc_1.value=i.state.rectAreaLTC1,d.ltc_2.value=i.state.rectAreaLTC2,d.pointLights.value=i.state.point,d.pointLightShadows.value=i.state.pointShadow,d.hemisphereLights.value=i.state.hemi,d.directionalShadowMap.value=i.state.directionalShadowMap,d.directionalShadowMatrix.value=i.state.directionalShadowMatrix,d.spotShadowMap.value=i.state.spotShadowMap,d.spotShadowMatrix.value=i.state.spotShadowMatrix,d.pointShadowMap.value=i.state.pointShadowMap,d.pointShadowMatrix.value=i.state.pointShadowMatrix);const f=u.getUniforms(),p=ea.seqWithValue(f.seq,d);return r.currentProgram=u,r.uniformsList=p,u}function Oe(e,t){const n=$.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Le.setAnimationLoop((function(e){Te&&Te(e)})),"undefined"!=typeof self&&Le.setContext(self),this.setAnimationLoop=function(e){Te=e,_e.setAnimationLoop(e),null===e?Le.stop():Le.start()},_e.addEventListener("sessionstart",Re),_e.addEventListener("sessionend",Pe),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===g)return;!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===_e.enabled&&!0===_e.isPresenting&&(!0===_e.cameraAutoUpdate&&_e.updateCamera(t),t=_e.getCamera()),!0===e.isScene&&e.onBeforeRender(m,e,t,_),h=le.get(e,p.length),h.init(),p.push(h),G.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),O.setFromProjectionMatrix(G),U=this.localClippingEnabled,z=ce.init(this.clippingPlanes,U,t),d=se.get(e,f.length),d.init(),f.push(d),Ie(e,t,0,m.sortObjects),d.finish(),!0===m.sortObjects&&d.sort(I,k),!0===z&&ce.beginShadows();const n=h.state.shadowsArray;if(ue.render(n,e,t),!0===z&&ce.endShadows(),!0===this.info.autoReset&&this.info.reset(),de.render(d,e),h.setupLights(m.physicallyCorrectLights),t.isArrayCamera){const n=t.cameras;for(let t=0,r=n.length;t<r;t++){const r=n[t];ke(d,e,r,r.viewport)}}else ke(d,e,t);null!==_&&(K.updateMultisampleRenderTarget(_),K.updateRenderTargetMipmap(_)),!0===e.isScene&&e.onAfterRender(m,e,t),ge.resetDefaultState(),S=-1,E=null,p.pop(),h=p.length>0?p[p.length-1]:null,f.pop(),d=f.length>0?f[f.length-1]:null},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return _},this.setRenderTargetTextures=function(e,t,n){$.get(e.texture).__webglTexture=t,$.get(e.depthTexture).__webglTexture=n;const r=$.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===q.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){const n=$.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,n=0){_=e,v=t,x=n;let r=!0;if(e){const t=$.get(e);void 0!==t.__useDefaultFramebuffer?(Z.bindFramebuffer(ye.FRAMEBUFFER,null),r=!1):void 0===t.__webglFramebuffer?K.setupRenderTarget(e):t.__hasExternalTextures&&K.rebindTextures(e,$.get(e.texture).__webglTexture,$.get(e.depthTexture).__webglTexture)}let i=null,a=!1,o=!1;if(e){const n=e.texture;(n.isData3DTexture||n.isDataArrayTexture)&&(o=!0);const r=$.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=r[t],a=!0):i=Y.isWebGL2&&e.samples>0&&!1===K.useMultisampledRTT(e)?$.get(e).__webglMultisampledFramebuffer:r,C.copy(e.viewport),T.copy(e.scissor),R=e.scissorTest}else C.copy(B).multiplyScalar(D).floor(),T.copy(F).multiplyScalar(D).floor(),R=N;if(Z.bindFramebuffer(ye.FRAMEBUFFER,i)&&Y.drawBuffers&&r&&Z.drawBuffers(e,i),Z.viewport(C),Z.scissor(T),Z.setScissorTest(R),a){const r=$.get(e.texture);ye.framebufferTexture2D(ye.FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_CUBE_MAP_POSITIVE_X+t,r.__webglTexture,n)}else if(o){const r=$.get(e.texture),i=t||0;ye.framebufferTextureLayer(ye.FRAMEBUFFER,ye.COLOR_ATTACHMENT0,r.__webglTexture,n||0,i)}S=-1},this.readRenderTargetPixels=function(e,t,n,r,i,a,o){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=$.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){Z.bindFramebuffer(ye.FRAMEBUFFER,s);try{const o=e.texture,s=o.format,l=o.type;if(s!==A&&me.convert(s)!==ye.getParameter(ye.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===M&&(q.has("EXT_color_buffer_half_float")||Y.isWebGL2&&q.has("EXT_color_buffer_float"));if(!(l===b||me.convert(l)===ye.getParameter(ye.IMPLEMENTATION_COLOR_READ_TYPE)||l===w&&(Y.isWebGL2||q.has("OES_texture_float")||q.has("WEBGL_color_buffer_float"))||c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&ye.readPixels(t,n,r,i,me.convert(s),me.convert(l),a)}finally{const e=null!==_?$.get(_).__webglFramebuffer:null;Z.bindFramebuffer(ye.FRAMEBUFFER,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){const r=Math.pow(2,-n),i=Math.floor(t.image.width*r),a=Math.floor(t.image.height*r);K.setTexture2D(t,0),ye.copyTexSubImage2D(ye.TEXTURE_2D,n,0,0,e.x,e.y,i,a),Z.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r=0){const i=t.image.width,a=t.image.height,o=me.convert(n.format),s=me.convert(n.type);K.setTexture2D(n,0),ye.pixelStorei(ye.UNPACK_FLIP_Y_WEBGL,n.flipY),ye.pixelStorei(ye.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),ye.pixelStorei(ye.UNPACK_ALIGNMENT,n.unpackAlignment),t.isDataTexture?ye.texSubImage2D(ye.TEXTURE_2D,r,e.x,e.y,i,a,o,s,t.image.data):t.isCompressedTexture?ye.compressedTexSubImage2D(ye.TEXTURE_2D,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):ye.texSubImage2D(ye.TEXTURE_2D,r,e.x,e.y,o,s,t.image),0===r&&n.generateMipmaps&&ye.generateMipmap(ye.TEXTURE_2D),Z.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r,i=0){if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const a=e.max.x-e.min.x+1,o=e.max.y-e.min.y+1,s=e.max.z-e.min.z+1,l=me.convert(r.format),c=me.convert(r.type);let u;if(r.isData3DTexture)K.setTexture3D(r,0),u=ye.TEXTURE_3D;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");K.setTexture2DArray(r,0),u=ye.TEXTURE_2D_ARRAY}ye.pixelStorei(ye.UNPACK_FLIP_Y_WEBGL,r.flipY),ye.pixelStorei(ye.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),ye.pixelStorei(ye.UNPACK_ALIGNMENT,r.unpackAlignment);const d=ye.getParameter(ye.UNPACK_ROW_LENGTH),h=ye.getParameter(ye.UNPACK_IMAGE_HEIGHT),f=ye.getParameter(ye.UNPACK_SKIP_PIXELS),p=ye.getParameter(ye.UNPACK_SKIP_ROWS),g=ye.getParameter(ye.UNPACK_SKIP_IMAGES),v=n.isCompressedTexture?n.mipmaps[0]:n.image;ye.pixelStorei(ye.UNPACK_ROW_LENGTH,v.width),ye.pixelStorei(ye.UNPACK_IMAGE_HEIGHT,v.height),ye.pixelStorei(ye.UNPACK_SKIP_PIXELS,e.min.x),ye.pixelStorei(ye.UNPACK_SKIP_ROWS,e.min.y),ye.pixelStorei(ye.UNPACK_SKIP_IMAGES,e.min.z),n.isDataTexture||n.isData3DTexture?ye.texSubImage3D(u,i,t.x,t.y,t.z,a,o,s,l,c,v.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ye.compressedTexSubImage3D(u,i,t.x,t.y,t.z,a,o,s,l,v.data)):ye.texSubImage3D(u,i,t.x,t.y,t.z,a,o,s,l,c,v),ye.pixelStorei(ye.UNPACK_ROW_LENGTH,d),ye.pixelStorei(ye.UNPACK_IMAGE_HEIGHT,h),ye.pixelStorei(ye.UNPACK_SKIP_PIXELS,f),ye.pixelStorei(ye.UNPACK_SKIP_ROWS,p),ye.pixelStorei(ye.UNPACK_SKIP_IMAGES,g),0===i&&r.generateMipmaps&&ye.generateMipmap(u),Z.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?K.setTextureCube(e,0):e.isData3DTexture?K.setTexture3D(e,0):e.isDataArrayTexture?K.setTexture2DArray(e,0):K.setTexture2D(e,0),Z.unbindTexture()},this.resetState=function(){v=0,x=0,_=null,Z.reset(),ge.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class Za extends Ya{}Za.prototype.isWebGL1Renderer=!0;class Ja{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ve(e),this.density=t}clone(){return new Ja(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class $a{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Ve(e),this.near=t,this.far=n}clone(){return new $a(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Ka extends rn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}class Qa{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=de,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=be()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=be()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=be()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const eo=new tt;class to{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)eo.fromBufferAttribute(this,t),eo.applyMatrix4(e),this.setXYZ(t,eo.x,eo.y,eo.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)eo.fromBufferAttribute(this,t),eo.applyNormalMatrix(e),this.setXYZ(t,eo.x,eo.y,eo.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)eo.fromBufferAttribute(this,t),eo.transformDirection(e),this.setXYZ(t,eo.x,eo.y,eo.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new _n(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new to(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class no extends vn{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ve(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let ro;const io=new tt,ao=new tt,oo=new tt,so=new Ce,lo=new Ce,co=new Dt,uo=new tt,ho=new tt,fo=new tt,po=new Ce,mo=new Ce,go=new Ce;class vo extends rn{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",void 0===ro){ro=new Dn;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new Qa(e,5);ro.setIndex([0,1,2,0,2,3]),ro.setAttribute("position",new to(t,3,0,!1)),ro.setAttribute("uv",new to(t,2,3,!1))}this.geometry=ro,this.material=void 0!==e?e:new no,this.center=new Ce(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),ao.setFromMatrixScale(this.matrixWorld),co.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),oo.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&ao.multiplyScalar(-oo.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const a=this.center;yo(uo.set(-.5,-.5,0),oo,a,ao,r,i),yo(ho.set(.5,-.5,0),oo,a,ao,r,i),yo(fo.set(.5,.5,0),oo,a,ao,r,i),po.set(0,0),mo.set(1,0),go.set(1,1);let o=e.ray.intersectTriangle(uo,ho,fo,!1,io);if(null===o&&(yo(ho.set(-.5,.5,0),oo,a,ao,r,i),mo.set(0,1),o=e.ray.intersectTriangle(uo,fo,ho,!1,io),null===o))return;const s=e.ray.origin.distanceTo(io);s<e.near||s>e.far||t.push({distance:s,point:io.clone(),uv:mn.getUV(io,uo,ho,fo,po,mo,go,new Ce),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function yo(e,t,n,r,i,a){so.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(lo.x=a*so.x-i*so.y,lo.y=i*so.x+a*so.y):lo.copy(so),e.copy(t),e.x+=lo.x,e.y+=lo.y,e.applyMatrix4(co)}const bo=new tt,xo=new tt;class _o extends rn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let e=0,n=t.length;e<n;e++){const n=t[e];this.addLevel(n.object.clone(),n.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const n=this.levels;let r;for(r=0;r<n.length&&!(t<n[r].distance);r++);return n.splice(r,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){bo.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(bo);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){bo.setFromMatrixPosition(e.matrixWorld),xo.setFromMatrixPosition(this.matrixWorld);const n=bo.distanceTo(xo)/e.zoom;let r,i;for(t[0].object.visible=!0,r=1,i=t.length;r<i&&n>=t[r].distance;r++)t[r-1].object.visible=!1,t[r].object.visible=!0;for(this._currentLevel=r-1;r<i;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let e=0,r=n.length;e<r;e++){const r=n[e];t.object.levels.push({object:r.object.uuid,distance:r.distance})}return t}}const wo=new tt,Mo=new Je,So=new Je,Ao=new tt,Eo=new Dt;class Co extends Jn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Dt,this.bindMatrixInverse=new Dt}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Je,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,r=this.geometry;Mo.fromBufferAttribute(r.attributes.skinIndex,e),So.fromBufferAttribute(r.attributes.skinWeight,e),wo.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let e=0;e<4;e++){const r=So.getComponent(e);if(0!==r){const i=Mo.getComponent(e);Eo.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),t.addScaledVector(Ao.copy(wo).applyMatrix4(Eo),r)}}return t.applyMatrix4(this.bindMatrixInverse)}}class To extends rn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ro extends Ze{constructor(e=null,t=1,n=1,r,i,a,o,s,l=1003,c=1003,u,d){super(null,a,o,s,l,c,r,i,u,d),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Po=new Dt,Lo=new Dt;class Do{constructor(e=[],t=[]){this.uuid=be(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new Dt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new Dt;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let r=0,i=e.length;r<i;r++){const i=e[r]?e[r].matrixWorld:Lo;Po.multiplyMatrices(i,t[r]),Po.toArray(n,16*r)}null!==r&&(r.needsUpdate=!0)}clone(){return new Do(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=Se(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Ro(t,e,e,A,w);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const r=e.bones[n];let i=t[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new To),this.bones.push(i),this.boneInverses.push((new Dt).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){const i=t[r];e.bones.push(i.uuid);const a=n[r];e.boneInverses.push(a.toArray())}return e}}class Io extends _n{constructor(e,t,n,r=1){"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const ko=new Dt,Bo=new Dt,Fo=[],No=new Jn;class Oo extends Jn{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Io(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(No.geometry=this.geometry,No.material=this.material,void 0!==No.material)for(let i=0;i<r;i++){this.getMatrixAt(i,ko),Bo.multiplyMatrices(n,ko),No.matrixWorld=Bo,No.raycast(e,Fo);for(let e=0,n=Fo.length;e<n;e++){const n=Fo[e];n.instanceId=i,n.object=this,t.push(n)}Fo.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Io(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class zo extends vn{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ve(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Uo=new tt,Ho=new tt,Go=new Dt,Vo=new Lt,jo=new Mt;class Wo extends rn{constructor(e=new Dn,t=new zo){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)Uo.fromBufferAttribute(t,e-1),Ho.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=Uo.distanceTo(Ho);e.setAttribute("lineDistance",new Sn(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),jo.copy(n.boundingSphere),jo.applyMatrix4(r),jo.radius+=i,!1===e.ray.intersectsSphere(jo))return;Go.copy(r).invert(),Vo.copy(e.ray).applyMatrix4(Go);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=new tt,c=new tt,u=new tt,d=new tt,h=this.isLineSegments?2:1,f=n.index,p=n.attributes.position;if(null!==f)for(let n=Math.max(0,a.start),r=Math.min(f.count,a.start+a.count)-1;n<r;n+=h){const r=f.getX(n),i=f.getX(n+1);if(l.fromBufferAttribute(p,r),c.fromBufferAttribute(p,i),Vo.distanceSqToSegment(l,c,d,u)>s)continue;d.applyMatrix4(this.matrixWorld);const a=e.ray.origin.distanceTo(d);a<e.near||a>e.far||t.push({distance:a,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}else for(let n=Math.max(0,a.start),r=Math.min(p.count,a.start+a.count)-1;n<r;n+=h){if(l.fromBufferAttribute(p,n),c.fromBufferAttribute(p,n+1),Vo.distanceSqToSegment(l,c,d,u)>s)continue;d.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(d);r<e.near||r>e.far||t.push({distance:r,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}const Xo=new tt,qo=new tt;class Yo extends Wo{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)Xo.fromBufferAttribute(t,e),qo.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+Xo.distanceTo(qo);e.setAttribute("lineDistance",new Sn(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Zo extends Wo{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Jo extends vn{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ve(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const $o=new Dt,Ko=new Lt,Qo=new Mt,es=new tt;class ts extends rn{constructor(e=new Dn,t=new Jo){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Qo.copy(n.boundingSphere),Qo.applyMatrix4(r),Qo.radius+=i,!1===e.ray.intersectsSphere(Qo))return;$o.copy(r).invert(),Ko.copy(e.ray).applyMatrix4($o);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=n.index,c=n.attributes.position;if(null!==l)for(let n=Math.max(0,a.start),i=Math.min(l.count,a.start+a.count);n<i;n++){const i=l.getX(n);es.fromBufferAttribute(c,i),ns(es,i,s,r,e,t,this)}else for(let n=Math.max(0,a.start),i=Math.min(c.count,a.start+a.count);n<i;n++)es.fromBufferAttribute(c,n),ns(es,n,s,r,e,t,this)}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function ns(e,t,n,r,i,a,o){const s=Ko.distanceSqToPoint(e);if(s<n){const n=new tt;Ko.closestPointToPoint(e,n),n.applyMatrix4(r);const l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;a.push({distance:l,distanceToRay:Math.sqrt(s),point:n,index:t,face:null,object:o})}}class rs extends Ze{constructor(e,t,n,r,i,a,o,s,l,c,u,d){super(null,a,o,s,l,c,r,i,u,d),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class is{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),i=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),i+=n.distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const i=n.length;let a;a=t||e*n[i-1];let o,s=0,l=i-1;for(;s<=l;)if(r=Math.floor(s+(l-s)/2),o=n[r]-a,o<0)s=r+1;else{if(!(o>0)){l=r;break}l=r-1}if(r=l,n[r]===a)return r/(i-1);const c=n[r];return(r+(a-c)/(n[r+1]-c))/(i-1)}getTangent(e,t){const n=1e-4;let r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);const a=this.getPoint(r),o=this.getPoint(i),s=t||(a.isVector2?new Ce:new tt);return s.copy(o).sub(a).normalize(),s}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new tt,r=[],i=[],a=[],o=new tt,s=new Dt;for(let t=0;t<=e;t++){const n=t/e;r[t]=this.getTangentAt(n,new tt)}i[0]=new tt,a[0]=new tt;let l=Number.MAX_VALUE;const c=Math.abs(r[0].x),u=Math.abs(r[0].y),d=Math.abs(r[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),d<=l&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],o),a[0].crossVectors(r[0],i[0]);for(let t=1;t<=e;t++){if(i[t]=i[t-1].clone(),a[t]=a[t-1].clone(),o.crossVectors(r[t-1],r[t]),o.length()>Number.EPSILON){o.normalize();const e=Math.acos(xe(r[t-1].dot(r[t]),-1,1));i[t].applyMatrix4(s.makeRotationAxis(o,e))}a[t].crossVectors(r[t],i[t])}if(!0===t){let t=Math.acos(xe(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(o.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(s.makeRotationAxis(r[n],t*n)),a[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:a}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class as extends is{constructor(e=0,t=0,n=1,r=1,i=0,a=2*Math.PI,o=!1,s=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=a,this.aClockwise=o,this.aRotation=s}getPoint(e,t){const n=t||new Ce,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const a=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=a?0:r),!0!==this.aClockwise||a||(i===r?i=-r:i-=r);const o=this.aStartAngle+e*i;let s=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=s-this.aX,r=l-this.aY;s=n*e-r*t+this.aX,l=n*t+r*e+this.aY}return n.set(s,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class os extends as{constructor(e,t,n,r,i,a){super(e,t,n,n,r,i,a),this.isArcCurve=!0,this.type="ArcCurve"}}function ss(){let e=0,t=0,n=0,r=0;function i(i,a,o,s){e=i,t=o,n=-3*i+3*a-2*o-s,r=2*i-2*a+o+s}return{initCatmullRom:function(e,t,n,r,a){i(t,n,a*(n-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,a,o,s){let l=(t-e)/a-(n-e)/(a+o)+(n-t)/o,c=(n-t)/o-(r-t)/(o+s)+(r-n)/s;l*=o,c*=o,i(t,n,l,c)},calc:function(i){const a=i*i;return e+t*i+n*a+r*(a*i)}}}const ls=new tt,cs=new ss,us=new ss,ds=new ss;class hs extends is{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new tt){const n=t,r=this.points,i=r.length,a=(i-(this.closed?0:1))*e;let o,s,l=Math.floor(a),c=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/i)+1)*i:0===c&&l===i-1&&(l=i-2,c=1),this.closed||l>0?o=r[(l-1)%i]:(ls.subVectors(r[0],r[1]).add(r[0]),o=ls);const u=r[l%i],d=r[(l+1)%i];if(this.closed||l+2<i?s=r[(l+2)%i]:(ls.subVectors(r[i-1],r[i-2]).add(r[i-1]),s=ls),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(o.distanceToSquared(u),e),n=Math.pow(u.distanceToSquared(d),e),r=Math.pow(d.distanceToSquared(s),e);n<1e-4&&(n=1),t<1e-4&&(t=n),r<1e-4&&(r=n),cs.initNonuniformCatmullRom(o.x,u.x,d.x,s.x,t,n,r),us.initNonuniformCatmullRom(o.y,u.y,d.y,s.y,t,n,r),ds.initNonuniformCatmullRom(o.z,u.z,d.z,s.z,t,n,r)}else"catmullrom"===this.curveType&&(cs.initCatmullRom(o.x,u.x,d.x,s.x,this.tension),us.initCatmullRom(o.y,u.y,d.y,s.y,this.tension),ds.initCatmullRom(o.z,u.z,d.z,s.z,this.tension));return n.set(cs.calc(c),us.calc(c),ds.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new tt).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function fs(e,t,n,r,i){const a=.5*(r-t),o=.5*(i-n),s=e*e;return(2*n-2*r+a+o)*(e*s)+(-3*n+3*r-2*a-o)*s+a*e+n}function ps(e,t,n,r){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function ms(e,t,n,r,i){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}class gs extends is{constructor(e=new Ce,t=new Ce,n=new Ce,r=new Ce){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new Ce){const n=t,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(ms(e,r.x,i.x,a.x,o.x),ms(e,r.y,i.y,a.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class vs extends is{constructor(e=new tt,t=new tt,n=new tt,r=new tt){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new tt){const n=t,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(ms(e,r.x,i.x,a.x,o.x),ms(e,r.y,i.y,a.y,o.y),ms(e,r.z,i.z,a.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class ys extends is{constructor(e=new Ce,t=new Ce){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ce){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const n=t||new Ce;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class bs extends is{constructor(e=new tt,t=new tt){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new tt){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class xs extends is{constructor(e=new Ce,t=new Ce,n=new Ce){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Ce){const n=t,r=this.v0,i=this.v1,a=this.v2;return n.set(ps(e,r.x,i.x,a.x),ps(e,r.y,i.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class _s extends is{constructor(e=new tt,t=new tt,n=new tt){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new tt){const n=t,r=this.v0,i=this.v1,a=this.v2;return n.set(ps(e,r.x,i.x,a.x),ps(e,r.y,i.y,a.y),ps(e,r.z,i.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ws extends is{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ce){const n=t,r=this.points,i=(r.length-1)*e,a=Math.floor(i),o=i-a,s=r[0===a?a:a-1],l=r[a],c=r[a>r.length-2?r.length-1:a+1],u=r[a>r.length-3?r.length-1:a+2];return n.set(fs(o,s.x,l.x,c.x,u.x),fs(o,s.y,l.y,c.y,u.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Ce).fromArray(n))}return this}}var Ms=Object.freeze({__proto__:null,ArcCurve:os,CatmullRomCurve3:hs,CubicBezierCurve:gs,CubicBezierCurve3:vs,EllipseCurve:as,LineCurve:ys,LineCurve3:bs,QuadraticBezierCurve:xs,QuadraticBezierCurve3:_s,SplineCurve:ws});class Ss extends is{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new ys(t,e))}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let i=0;for(;i<r.length;){if(r[i]>=n){const e=r[i]-n,a=this.curves[i],o=a.getLength(),s=0===o?0:1-e/o;return a.getPointAt(s,t)}i++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const a=i[r],o=a.isEllipseCurve?2*e:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o);for(let e=0;e<s.length;e++){const r=s[e];n&&n.equals(r)||(t.push(r),n=r)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new Ms[n.type]).fromJSON(n))}return this}}class As extends Ss{constructor(e){super(),this.type="Path",this.currentPoint=new Ce,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new ys(this.currentPoint.clone(),new Ce(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const i=new xs(this.currentPoint.clone(),new Ce(e,t),new Ce(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,a){const o=new gs(this.currentPoint.clone(),new Ce(e,t),new Ce(n,r),new Ce(i,a));return this.curves.push(o),this.currentPoint.set(i,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new ws(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,a){const o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,n,r,i,a),this}absarc(e,t,n,r,i,a){return this.absellipse(e,t,n,n,r,i,a),this}ellipse(e,t,n,r,i,a,o,s){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,r,i,a,o,s),this}absellipse(e,t,n,r,i,a,o,s){const l=new as(e,t,n,r,i,a,o,s);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Es extends Dn{constructor(e=[new Ce(0,-.5),new Ce(.5,0),new Ce(0,.5)],t=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=xe(r,0,2*Math.PI);const i=[],a=[],o=[],s=[],l=[],c=1/t,u=new tt,d=new Ce,h=new tt,f=new tt,p=new tt;let m=0,g=0;for(let t=0;t<=e.length-1;t++)switch(t){case 0:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,h.x=1*g,h.y=-m,h.z=0*g,p.copy(h),h.normalize(),s.push(h.x,h.y,h.z);break;case e.length-1:s.push(p.x,p.y,p.z);break;default:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,h.x=1*g,h.y=-m,h.z=0*g,f.copy(h),h.x+=p.x,h.y+=p.y,h.z+=p.z,h.normalize(),s.push(h.x,h.y,h.z),p.copy(f)}for(let i=0;i<=t;i++){const h=n+i*c*r,f=Math.sin(h),p=Math.cos(h);for(let n=0;n<=e.length-1;n++){u.x=e[n].x*f,u.y=e[n].y,u.z=e[n].x*p,a.push(u.x,u.y,u.z),d.x=i/t,d.y=n/(e.length-1),o.push(d.x,d.y);const r=s[3*n+0]*f,c=s[3*n+1],h=s[3*n+0]*p;l.push(r,c,h)}}for(let n=0;n<t;n++)for(let t=0;t<e.length-1;t++){const r=t+n*e.length,a=r,o=r+e.length,s=r+e.length+1,l=r+1;i.push(a,o,l),i.push(s,l,o)}this.setIndex(i),this.setAttribute("position",new Sn(a,3)),this.setAttribute("uv",new Sn(o,2)),this.setAttribute("normal",new Sn(l,3))}static fromJSON(e){return new Es(e.points,e.segments,e.phiStart,e.phiLength)}}class Cs extends Es{constructor(e=1,t=1,n=4,r=8){const i=new As;i.absarc(0,-t/2,e,1.5*Math.PI,0),i.absarc(0,t/2,e,0,.5*Math.PI),super(i.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new Cs(e.radius,e.length,e.capSegments,e.radialSegments)}}class Ts extends Dn{constructor(e=1,t=8,n=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const i=[],a=[],o=[],s=[],l=new tt,c=new Ce;a.push(0,0,0),o.push(0,0,1),s.push(.5,.5);for(let i=0,u=3;i<=t;i++,u+=3){const d=n+i/t*r;l.x=e*Math.cos(d),l.y=e*Math.sin(d),a.push(l.x,l.y,l.z),o.push(0,0,1),c.x=(a[u]/e+1)/2,c.y=(a[u+1]/e+1)/2,s.push(c.x,c.y)}for(let e=1;e<=t;e++)i.push(e,e+1,0);this.setIndex(i),this.setAttribute("position",new Sn(a,3)),this.setAttribute("normal",new Sn(o,3)),this.setAttribute("uv",new Sn(s,2))}static fromJSON(e){return new Ts(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Rs extends Dn{constructor(e=1,t=1,n=1,r=8,i=1,a=!1,o=0,s=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s};const l=this;r=Math.floor(r),i=Math.floor(i);const c=[],u=[],d=[],h=[];let f=0;const p=[],m=n/2;let g=0;function v(n){const i=f,a=new Ce,p=new tt;let v=0;const y=!0===n?e:t,b=!0===n?1:-1;for(let e=1;e<=r;e++)u.push(0,m*b,0),d.push(0,b,0),h.push(.5,.5),f++;const x=f;for(let e=0;e<=r;e++){const t=e/r*s+o,n=Math.cos(t),i=Math.sin(t);p.x=y*i,p.y=m*b,p.z=y*n,u.push(p.x,p.y,p.z),d.push(0,b,0),a.x=.5*n+.5,a.y=.5*i*b+.5,h.push(a.x,a.y),f++}for(let e=0;e<r;e++){const t=i+e,r=x+e;!0===n?c.push(r,r+1,t):c.push(r+1,r,t),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}!function(){const a=new tt,v=new tt;let y=0;const b=(t-e)/n;for(let l=0;l<=i;l++){const c=[],g=l/i,y=g*(t-e)+e;for(let e=0;e<=r;e++){const t=e/r,i=t*s+o,l=Math.sin(i),p=Math.cos(i);v.x=y*l,v.y=-g*n+m,v.z=y*p,u.push(v.x,v.y,v.z),a.set(l,b,p).normalize(),d.push(a.x,a.y,a.z),h.push(t,1-g),c.push(f++)}p.push(c)}for(let e=0;e<r;e++)for(let t=0;t<i;t++){const n=p[t][e],r=p[t+1][e],i=p[t+1][e+1],a=p[t][e+1];c.push(n,r,a),c.push(r,i,a),y+=6}l.addGroup(g,y,0),g+=y}(),!1===a&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(c),this.setAttribute("position",new Sn(u,3)),this.setAttribute("normal",new Sn(d,3)),this.setAttribute("uv",new Sn(h,2))}static fromJSON(e){return new Rs(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ps extends Rs{constructor(e=1,t=1,n=8,r=1,i=!1,a=0,o=2*Math.PI){super(0,e,t,n,r,i,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:o}}static fromJSON(e){return new Ps(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ls extends Dn{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const i=[],a=[];function o(e,t,n,r){const i=r+1,a=[];for(let r=0;r<=i;r++){a[r]=[];const o=e.clone().lerp(n,r/i),s=t.clone().lerp(n,r/i),l=i-r;for(let e=0;e<=l;e++)a[r][e]=0===e&&r===i?o:o.clone().lerp(s,e/l)}for(let e=0;e<i;e++)for(let t=0;t<2*(i-e)-1;t++){const n=Math.floor(t/2);t%2==0?(s(a[e][n+1]),s(a[e+1][n]),s(a[e][n])):(s(a[e][n+1]),s(a[e+1][n+1]),s(a[e+1][n]))}}function s(e){i.push(e.x,e.y,e.z)}function l(t,n){const r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function c(e,t,n,r){r<0&&1===e.x&&(a[t]=e.x-1),0===n.x&&0===n.z&&(a[t]=r/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}!function(e){const n=new tt,r=new tt,i=new tt;for(let a=0;a<t.length;a+=3)l(t[a+0],n),l(t[a+1],r),l(t[a+2],i),o(n,r,i,e)}(r),function(e){const t=new tt;for(let n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){const e=new tt;for(let n=0;n<i.length;n+=3){e.x=i[n+0],e.y=i[n+1],e.z=i[n+2];const r=u(e)/2/Math.PI+.5,o=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);a.push(r,1-o)}var t;(function(){const e=new tt,t=new tt,n=new tt,r=new tt,o=new Ce,s=new Ce,l=new Ce;for(let d=0,h=0;d<i.length;d+=9,h+=6){e.set(i[d+0],i[d+1],i[d+2]),t.set(i[d+3],i[d+4],i[d+5]),n.set(i[d+6],i[d+7],i[d+8]),o.set(a[h+0],a[h+1]),s.set(a[h+2],a[h+3]),l.set(a[h+4],a[h+5]),r.copy(e).add(t).add(n).divideScalar(3);const f=u(r);c(o,h+0,e,f),c(s,h+2,t,f),c(l,h+4,n,f)}})(),function(){for(let e=0;e<a.length;e+=6){const t=a[e+0],n=a[e+2],r=a[e+4],i=Math.max(t,n,r),o=Math.min(t,n,r);i>.9&&o<.1&&(t<.2&&(a[e+0]+=1),n<.2&&(a[e+2]+=1),r<.2&&(a[e+4]+=1))}}()}(),this.setAttribute("position",new Sn(i,3)),this.setAttribute("normal",new Sn(i.slice(),3)),this.setAttribute("uv",new Sn(a,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(e){return new Ls(e.vertices,e.indices,e.radius,e.details)}}class Ds extends Ls{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ds(e.radius,e.detail)}}const Is=new tt,ks=new tt,Bs=new tt,Fs=new mn;class Ns extends Dn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const n=4,r=Math.pow(10,n),i=Math.cos(ve*t),a=e.getIndex(),o=e.getAttribute("position"),s=a?a.count:o.count,l=[0,0,0],c=["a","b","c"],u=new Array(3),d={},h=[];for(let e=0;e<s;e+=3){a?(l[0]=a.getX(e),l[1]=a.getX(e+1),l[2]=a.getX(e+2)):(l[0]=e,l[1]=e+1,l[2]=e+2);const{a:t,b:n,c:s}=Fs;if(t.fromBufferAttribute(o,l[0]),n.fromBufferAttribute(o,l[1]),s.fromBufferAttribute(o,l[2]),Fs.getNormal(Bs),u[0]=`${Math.round(t.x*r)},${Math.round(t.y*r)},${Math.round(t.z*r)}`,u[1]=`${Math.round(n.x*r)},${Math.round(n.y*r)},${Math.round(n.z*r)}`,u[2]=`${Math.round(s.x*r)},${Math.round(s.y*r)},${Math.round(s.z*r)}`,u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let e=0;e<3;e++){const t=(e+1)%3,n=u[e],r=u[t],a=Fs[c[e]],o=Fs[c[t]],s=`${n}_${r}`,f=`${r}_${n}`;f in d&&d[f]?(Bs.dot(d[f].normal)<=i&&(h.push(a.x,a.y,a.z),h.push(o.x,o.y,o.z)),d[f]=null):s in d||(d[s]={index0:l[e],index1:l[t],normal:Bs.clone()})}}for(const e in d)if(d[e]){const{index0:t,index1:n}=d[e];Is.fromBufferAttribute(o,t),ks.fromBufferAttribute(o,n),h.push(Is.x,Is.y,Is.z),h.push(ks.x,ks.y,ks.z)}this.setAttribute("position",new Sn(h,3))}}}class Os extends As{constructor(e){super(e),this.uuid=be(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new As).fromJSON(n))}return this}}function zs(e,t,n,r,i){let a,o;if(i===function(e,t,n,r){let i=0;for(let a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}(e,t,n,r)>0)for(a=t;a<n;a+=r)o=ol(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=ol(a,e[a],e[a+1],o);return o&&el(o,o.next)&&(sl(o),o=o.next),o}function Us(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!el(r,r.next)&&0!==Qs(r.prev,r,r.next))r=r.next;else{if(sl(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function Hs(e,t,n,r,i,a,o){if(!e)return;!o&&a&&function(e,t,n,r){let i=e;do{null===i.z&&(i.z=Zs(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,n,r,i,a,o,s,l,c=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ,r);t++);for(l=c;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,c*=2}while(o>1)}(i)}(e,r,i,a);let s,l,c=e;for(;e.prev!==e.next;)if(s=e.prev,l=e.next,a?Vs(e,r,i,a):Gs(e))t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),sl(e),e=l.next,c=l.next;else if((e=l)===c){o?1===o?Hs(e=js(Us(e),t,n),t,n,r,i,a,2):2===o&&Ws(e,t,n,r,i,a):Hs(Us(e),t,n,r,i,a,1);break}}function Gs(e){const t=e.prev,n=e,r=e.next;if(Qs(t,n,r)>=0)return!1;let i=e.next.next;for(;i!==e.prev;){if($s(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Qs(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Vs(e,t,n,r){const i=e.prev,a=e,o=e.next;if(Qs(i,a,o)>=0)return!1;const s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,l=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,c=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,u=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,d=Zs(s,l,t,n,r),h=Zs(c,u,t,n,r);let f=e.prevZ,p=e.nextZ;for(;f&&f.z>=d&&p&&p.z<=h;){if(f!==e.prev&&f!==e.next&&$s(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&Qs(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,p!==e.prev&&p!==e.next&&$s(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&Qs(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;f&&f.z>=d;){if(f!==e.prev&&f!==e.next&&$s(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&Qs(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=h;){if(p!==e.prev&&p!==e.next&&$s(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&Qs(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function js(e,t,n){let r=e;do{const i=r.prev,a=r.next.next;!el(i,a)&&tl(i,r,r.next,a)&&il(i,a)&&il(a,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(a.i/n),sl(r),sl(r.next),r=e=a),r=r.next}while(r!==e);return Us(r)}function Ws(e,t,n,r,i,a){let o=e;do{let e=o.next.next;for(;e!==o.prev;){if(o.i!==e.i&&Ks(o,e)){let s=al(o,e);return o=Us(o,o.next),s=Us(s,s.next),Hs(o,t,n,r,i,a),void Hs(s,t,n,r,i,a)}e=e.next}o=o.next}while(o!==e)}function Xs(e,t){return e.x-t.x}function qs(e,t){if(t=function(e,t){let n=t;const r=e.x,i=e.y;let a,o=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const e=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=r&&e>o){if(o=e,e===r){if(i===n.y)return n;if(i===n.next.y)return n.next}a=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!a)return null;if(r===o)return a;const s=a,l=a.x,c=a.y;let u,d=1/0;n=a;do{r>=n.x&&n.x>=l&&r!==n.x&&$s(i<c?r:o,i,l,c,i<c?o:r,i,n.x,n.y)&&(u=Math.abs(i-n.y)/(r-n.x),il(n,e)&&(u<d||u===d&&(n.x>a.x||n.x===a.x&&Ys(a,n)))&&(a=n,d=u)),n=n.next}while(n!==s);return a}(e,t),t){const n=al(t,e);Us(t,t.next),Us(n,n.next)}}function Ys(e,t){return Qs(e.prev,e,t.prev)<0&&Qs(t.next,e,e.next)<0}function Zs(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Js(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function $s(e,t,n,r,i,a,o,s){return(i-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(r-s)-(n-o)*(t-s)>=0&&(n-o)*(a-s)-(i-o)*(r-s)>=0}function Ks(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&tl(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(il(e,t)&&il(t,e)&&function(e,t){let n=e,r=!1;const i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Qs(e.prev,e,t.prev)||Qs(e,t.prev,t))||el(e,t)&&Qs(e.prev,e,e.next)>0&&Qs(t.prev,t,t.next)>0)}function Qs(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function el(e,t){return e.x===t.x&&e.y===t.y}function tl(e,t,n,r){const i=rl(Qs(e,t,n)),a=rl(Qs(e,t,r)),o=rl(Qs(n,r,e)),s=rl(Qs(n,r,t));return i!==a&&o!==s||!(0!==i||!nl(e,n,t))||!(0!==a||!nl(e,r,t))||!(0!==o||!nl(n,e,r))||!(0!==s||!nl(n,t,r))}function nl(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function rl(e){return e>0?1:e<0?-1:0}function il(e,t){return Qs(e.prev,e,e.next)<0?Qs(e,t,e.next)>=0&&Qs(e,e.prev,t)>=0:Qs(e,t,e.prev)<0||Qs(e,e.next,t)<0}function al(e,t){const n=new ll(e.i,e.x,e.y),r=new ll(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function ol(e,t,n,r){const i=new ll(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function sl(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function ll(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class cl{static area(e){const t=e.length;let n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}static isClockWise(e){return cl.area(e)<0}static triangulateShape(e,t){const n=[],r=[],i=[];ul(e),dl(n,e);let a=e.length;t.forEach(ul);for(let e=0;e<t.length;e++)r.push(a),a+=t[e].length,dl(n,t[e]);const o=function(e,t,n=2){const r=t&&t.length,i=r?t[0]*n:e.length;let a=zs(e,0,i,n,!0);const o=[];if(!a||a.next===a.prev)return o;let s,l,c,u,d,h,f;if(r&&(a=function(e,t,n,r){const i=[];let a,o,s,l,c;for(a=0,o=t.length;a<o;a++)s=t[a]*r,l=a<o-1?t[a+1]*r:e.length,c=zs(e,s,l,r,!1),c===c.next&&(c.steiner=!0),i.push(Js(c));for(i.sort(Xs),a=0;a<i.length;a++)qs(i[a],n),n=Us(n,n.next);return n}(e,t,a,n)),e.length>80*n){s=c=e[0],l=u=e[1];for(let t=n;t<i;t+=n)d=e[t],h=e[t+1],d<s&&(s=d),h<l&&(l=h),d>c&&(c=d),h>u&&(u=h);f=Math.max(c-s,u-l),f=0!==f?1/f:0}return Hs(a,o,n,s,l,f),o}(n,r);for(let e=0;e<o.length;e+=3)i.push(o.slice(e,e+3));return i}}function ul(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function dl(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class hl extends Dn{constructor(e=new Os([new Ce(.5,.5),new Ce(-.5,.5),new Ce(-.5,-.5),new Ce(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],i=[];for(let t=0,n=e.length;t<n;t++)a(e[t]);function a(e){const a=[],o=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:1;let c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:.2,d=void 0!==t.bevelSize?t.bevelSize:u-.1,h=void 0!==t.bevelOffset?t.bevelOffset:0,f=void 0!==t.bevelSegments?t.bevelSegments:3;const p=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:fl;let g,v,y,b,x,_=!1;p&&(g=p.getSpacedPoints(s),_=!0,c=!1,v=p.computeFrenetFrames(s,!1),y=new tt,b=new tt,x=new tt),c||(f=0,u=0,d=0,h=0);const w=e.extractPoints(o);let M=w.shape;const S=w.holes;if(!cl.isClockWise(M)){M=M.reverse();for(let e=0,t=S.length;e<t;e++){const t=S[e];cl.isClockWise(t)&&(S[e]=t.reverse())}}const A=cl.triangulateShape(M,S),E=M;for(let e=0,t=S.length;e<t;e++){const t=S[e];M=M.concat(t)}function C(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}const T=M.length,R=A.length;function P(e,t,n){let r,i,a;const o=e.x-t.x,s=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=o*o+s*s,d=o*c-s*l;if(Math.abs(d)>Number.EPSILON){const d=Math.sqrt(u),h=Math.sqrt(l*l+c*c),f=t.x-s/d,p=t.y+o/d,m=((n.x-c/h-f)*c-(n.y+l/h-p)*l)/(o*c-s*l);r=f+o*m-e.x,i=p+s*m-e.y;const g=r*r+i*i;if(g<=2)return new Ce(r,i);a=Math.sqrt(g/2)}else{let e=!1;o>Number.EPSILON?l>Number.EPSILON&&(e=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(s)===Math.sign(c)&&(e=!0),e?(r=-s,i=o,a=Math.sqrt(u)):(r=o,i=s,a=Math.sqrt(u/2))}return new Ce(r/a,i/a)}const L=[];for(let e=0,t=E.length,n=t-1,r=e+1;e<t;e++,n++,r++)n===t&&(n=0),r===t&&(r=0),L[e]=P(E[e],E[n],E[r]);const D=[];let I,k=L.concat();for(let e=0,t=S.length;e<t;e++){const t=S[e];I=[];for(let e=0,n=t.length,r=n-1,i=e+1;e<n;e++,r++,i++)r===n&&(r=0),i===n&&(i=0),I[e]=P(t[e],t[r],t[i]);D.push(I),k=k.concat(I)}for(let e=0;e<f;e++){const t=e/f,n=u*Math.cos(t*Math.PI/2),r=d*Math.sin(t*Math.PI/2)+h;for(let e=0,t=E.length;e<t;e++){const t=C(E[e],L[e],r);N(t.x,t.y,-n)}for(let e=0,t=S.length;e<t;e++){const t=S[e];I=D[e];for(let e=0,i=t.length;e<i;e++){const i=C(t[e],I[e],r);N(i.x,i.y,-n)}}}const B=d+h;for(let e=0;e<T;e++){const t=c?C(M[e],k[e],B):M[e];_?(b.copy(v.normals[0]).multiplyScalar(t.x),y.copy(v.binormals[0]).multiplyScalar(t.y),x.copy(g[0]).add(b).add(y),N(x.x,x.y,x.z)):N(t.x,t.y,0)}for(let e=1;e<=s;e++)for(let t=0;t<T;t++){const n=c?C(M[t],k[t],B):M[t];_?(b.copy(v.normals[e]).multiplyScalar(n.x),y.copy(v.binormals[e]).multiplyScalar(n.y),x.copy(g[e]).add(b).add(y),N(x.x,x.y,x.z)):N(n.x,n.y,l/s*e)}for(let e=f-1;e>=0;e--){const t=e/f,n=u*Math.cos(t*Math.PI/2),r=d*Math.sin(t*Math.PI/2)+h;for(let e=0,t=E.length;e<t;e++){const t=C(E[e],L[e],r);N(t.x,t.y,l+n)}for(let e=0,t=S.length;e<t;e++){const t=S[e];I=D[e];for(let e=0,i=t.length;e<i;e++){const i=C(t[e],I[e],r);_?N(i.x,i.y+g[s-1].y,g[s-1].x+n):N(i.x,i.y,l+n)}}}function F(e,t){let n=e.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=e.length-1);for(let e=0,n=s+2*f;e<n;e++){const n=T*e,a=T*(e+1);z(t+r+n,t+i+n,t+i+a,t+r+a)}}}function N(e,t,n){a.push(e),a.push(t),a.push(n)}function O(e,t,i){U(e),U(t),U(i);const a=r.length/3,o=m.generateTopUV(n,r,a-3,a-2,a-1);H(o[0]),H(o[1]),H(o[2])}function z(e,t,i,a){U(e),U(t),U(a),U(t),U(i),U(a);const o=r.length/3,s=m.generateSideWallUV(n,r,o-6,o-3,o-2,o-1);H(s[0]),H(s[1]),H(s[3]),H(s[1]),H(s[2]),H(s[3])}function U(e){r.push(a[3*e+0]),r.push(a[3*e+1]),r.push(a[3*e+2])}function H(e){i.push(e.x),i.push(e.y)}!function(){const e=r.length/3;if(c){let e=0,t=T*e;for(let e=0;e<R;e++){const n=A[e];O(n[2]+t,n[1]+t,n[0]+t)}e=s+2*f,t=T*e;for(let e=0;e<R;e++){const n=A[e];O(n[0]+t,n[1]+t,n[2]+t)}}else{for(let e=0;e<R;e++){const t=A[e];O(t[2],t[1],t[0])}for(let e=0;e<R;e++){const t=A[e];O(t[0]+T*s,t[1]+T*s,t[2]+T*s)}}n.addGroup(e,r.length/3-e,0)}(),function(){const e=r.length/3;let t=0;F(E,t),t+=E.length;for(let e=0,n=S.length;e<n;e++){const n=S[e];F(n,t),t+=n.length}n.addGroup(e,r.length/3-e,1)}()}this.setAttribute("position",new Sn(r,3)),this.setAttribute("uv",new Sn(i,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let t=0,r=e.length;t<r;t++){const r=e[t];n.shapes.push(r.uuid)}else n.shapes.push(e.uuid);return n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let r=0,i=e.shapes.length;r<i;r++){const i=t[e.shapes[r]];n.push(i)}const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new Ms[r.type]).fromJSON(r)),new hl(n,e.options)}}const fl={generateTopUV:function(e,t,n,r,i){const a=t[3*n],o=t[3*n+1],s=t[3*r],l=t[3*r+1],c=t[3*i],u=t[3*i+1];return[new Ce(a,o),new Ce(s,l),new Ce(c,u)]},generateSideWallUV:function(e,t,n,r,i,a){const o=t[3*n],s=t[3*n+1],l=t[3*n+2],c=t[3*r],u=t[3*r+1],d=t[3*r+2],h=t[3*i],f=t[3*i+1],p=t[3*i+2],m=t[3*a],g=t[3*a+1],v=t[3*a+2];return Math.abs(s-u)<Math.abs(o-c)?[new Ce(o,1-l),new Ce(c,1-d),new Ce(h,1-p),new Ce(m,1-v)]:[new Ce(s,1-l),new Ce(u,1-d),new Ce(f,1-p),new Ce(g,1-v)]}};class pl extends Ls{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new pl(e.radius,e.detail)}}class ml extends Ls{constructor(e=1,t=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ml(e.radius,e.detail)}}class gl extends Dn{constructor(e=.5,t=1,n=8,r=1,i=0,a=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},n=Math.max(3,n);const o=[],s=[],l=[],c=[];let u=e;const d=(t-e)/(r=Math.max(1,r)),h=new tt,f=new Ce;for(let e=0;e<=r;e++){for(let e=0;e<=n;e++){const r=i+e/n*a;h.x=u*Math.cos(r),h.y=u*Math.sin(r),s.push(h.x,h.y,h.z),l.push(0,0,1),f.x=(h.x/t+1)/2,f.y=(h.y/t+1)/2,c.push(f.x,f.y)}u+=d}for(let e=0;e<r;e++){const t=e*(n+1);for(let e=0;e<n;e++){const r=e+t,i=r,a=r+n+1,s=r+n+2,l=r+1;o.push(i,a,l),o.push(a,s,l)}}this.setIndex(o),this.setAttribute("position",new Sn(s,3)),this.setAttribute("normal",new Sn(l,3)),this.setAttribute("uv",new Sn(c,2))}static fromJSON(e){return new gl(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class vl extends Dn{constructor(e=new Os([new Ce(0,.5),new Ce(-.5,-.5),new Ce(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],i=[],a=[];let o=0,s=0;if(!1===Array.isArray(e))l(e);else for(let t=0;t<e.length;t++)l(e[t]),this.addGroup(o,s,t),o+=s,s=0;function l(e){const o=r.length/3,l=e.extractPoints(t);let c=l.shape;const u=l.holes;!1===cl.isClockWise(c)&&(c=c.reverse());for(let e=0,t=u.length;e<t;e++){const t=u[e];!0===cl.isClockWise(t)&&(u[e]=t.reverse())}const d=cl.triangulateShape(c,u);for(let e=0,t=u.length;e<t;e++){const t=u[e];c=c.concat(t)}for(let e=0,t=c.length;e<t;e++){const t=c[e];r.push(t.x,t.y,0),i.push(0,0,1),a.push(t.x,t.y)}for(let e=0,t=d.length;e<t;e++){const t=d[e],r=t[0]+o,i=t[1]+o,a=t[2]+o;n.push(r,i,a),s+=3}}this.setIndex(n),this.setAttribute("position",new Sn(r,3)),this.setAttribute("normal",new Sn(i,3)),this.setAttribute("uv",new Sn(a,2))}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let r=0,i=e.shapes.length;r<i;r++){const i=t[e.shapes[r]];n.push(i)}return new vl(n,e.curveSegments)}}class yl extends Dn{constructor(e=1,t=32,n=16,r=0,i=2*Math.PI,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const s=Math.min(a+o,Math.PI);let l=0;const c=[],u=new tt,d=new tt,h=[],f=[],p=[],m=[];for(let h=0;h<=n;h++){const g=[],v=h/n;let y=0;0==h&&0==a?y=.5/t:h==n&&s==Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){const s=n/t;u.x=-e*Math.cos(r+s*i)*Math.sin(a+v*o),u.y=e*Math.cos(a+v*o),u.z=e*Math.sin(r+s*i)*Math.sin(a+v*o),f.push(u.x,u.y,u.z),d.copy(u).normalize(),p.push(d.x,d.y,d.z),m.push(s+y,1-v),g.push(l++)}c.push(g)}for(let e=0;e<n;e++)for(let r=0;r<t;r++){const t=c[e][r+1],i=c[e][r],o=c[e+1][r],l=c[e+1][r+1];(0!==e||a>0)&&h.push(t,i,l),(e!==n-1||s<Math.PI)&&h.push(i,o,l)}this.setIndex(h),this.setAttribute("position",new Sn(f,3)),this.setAttribute("normal",new Sn(p,3)),this.setAttribute("uv",new Sn(m,2))}static fromJSON(e){return new yl(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class bl extends Ls{constructor(e=1,t=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new bl(e.radius,e.detail)}}class xl extends Dn{constructor(e=1,t=.4,n=8,r=6,i=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);const a=[],o=[],s=[],l=[],c=new tt,u=new tt,d=new tt;for(let a=0;a<=n;a++)for(let h=0;h<=r;h++){const f=h/r*i,p=a/n*Math.PI*2;u.x=(e+t*Math.cos(p))*Math.cos(f),u.y=(e+t*Math.cos(p))*Math.sin(f),u.z=t*Math.sin(p),o.push(u.x,u.y,u.z),c.x=e*Math.cos(f),c.y=e*Math.sin(f),d.subVectors(u,c).normalize(),s.push(d.x,d.y,d.z),l.push(h/r),l.push(a/n)}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){const n=(r+1)*e+t-1,i=(r+1)*(e-1)+t-1,o=(r+1)*(e-1)+t,s=(r+1)*e+t;a.push(n,i,s),a.push(i,o,s)}this.setIndex(a),this.setAttribute("position",new Sn(o,3)),this.setAttribute("normal",new Sn(s,3)),this.setAttribute("uv",new Sn(l,2))}static fromJSON(e){return new xl(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class _l extends Dn{constructor(e=1,t=.4,n=64,r=8,i=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:a},n=Math.floor(n),r=Math.floor(r);const o=[],s=[],l=[],c=[],u=new tt,d=new tt,h=new tt,f=new tt,p=new tt,m=new tt,g=new tt;for(let o=0;o<=n;++o){const y=o/n*i*Math.PI*2;v(y,i,a,e,h),v(y+.01,i,a,e,f),m.subVectors(f,h),g.addVectors(f,h),p.crossVectors(m,g),g.crossVectors(p,m),p.normalize(),g.normalize();for(let e=0;e<=r;++e){const i=e/r*Math.PI*2,a=-t*Math.cos(i),f=t*Math.sin(i);u.x=h.x+(a*g.x+f*p.x),u.y=h.y+(a*g.y+f*p.y),u.z=h.z+(a*g.z+f*p.z),s.push(u.x,u.y,u.z),d.subVectors(u,h).normalize(),l.push(d.x,d.y,d.z),c.push(o/n),c.push(e/r)}}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),a=(r+1)*e+t,s=(r+1)*(e-1)+t;o.push(n,i,s),o.push(i,a,s)}function v(e,t,n,r,i){const a=Math.cos(e),o=Math.sin(e),s=n/t*e,l=Math.cos(s);i.x=r*(2+l)*.5*a,i.y=r*(2+l)*o*.5,i.z=r*Math.sin(s)*.5}this.setIndex(o),this.setAttribute("position",new Sn(s,3)),this.setAttribute("normal",new Sn(l,3)),this.setAttribute("uv",new Sn(c,2))}static fromJSON(e){return new _l(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class wl extends Dn{constructor(e=new _s(new tt(-1,-1,0),new tt(-1,1,0),new tt(1,1,0)),t=64,n=1,r=8,i=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i};const a=e.computeFrenetFrames(t,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new tt,s=new tt,l=new Ce;let c=new tt;const u=[],d=[],h=[],f=[];function p(i){c=e.getPointAt(i/t,c);const l=a.normals[i],h=a.binormals[i];for(let e=0;e<=r;e++){const t=e/r*Math.PI*2,i=Math.sin(t),a=-Math.cos(t);s.x=a*l.x+i*h.x,s.y=a*l.y+i*h.y,s.z=a*l.z+i*h.z,s.normalize(),d.push(s.x,s.y,s.z),o.x=c.x+n*s.x,o.y=c.y+n*s.y,o.z=c.z+n*s.z,u.push(o.x,o.y,o.z)}}!function(){for(let e=0;e<t;e++)p(e);p(!1===i?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=r;n++)l.x=e/t,l.y=n/r,h.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),a=(r+1)*e+t,o=(r+1)*(e-1)+t;f.push(n,i,o),f.push(i,a,o)}}()}(),this.setIndex(f),this.setAttribute("position",new Sn(u,3)),this.setAttribute("normal",new Sn(d,3)),this.setAttribute("uv",new Sn(h,2))}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new wl((new Ms[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Ml extends Dn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],n=new Set,r=new tt,i=new tt;if(null!==e.index){const a=e.attributes.position,o=e.index;let s=e.groups;0===s.length&&(s=[{start:0,count:o.count,materialIndex:0}]);for(let e=0,l=s.length;e<l;++e){const l=s[e],c=l.start;for(let e=c,s=c+l.count;e<s;e+=3)for(let s=0;s<3;s++){const l=o.getX(e+s),c=o.getX(e+(s+1)%3);r.fromBufferAttribute(a,l),i.fromBufferAttribute(a,c),!0===Sl(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}}else{const a=e.attributes.position;for(let e=0,o=a.count/3;e<o;e++)for(let o=0;o<3;o++){const s=3*e+o,l=3*e+(o+1)%3;r.fromBufferAttribute(a,s),i.fromBufferAttribute(a,l),!0===Sl(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}this.setAttribute("position",new Sn(t,3))}}}function Sl(e,t,n){const r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`,i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`;return!0!==n.has(r)&&!0!==n.has(i)&&(n.add(r),n.add(i),!0)}var Al=Object.freeze({__proto__:null,BoxGeometry:Kn,BoxBufferGeometry:Kn,CapsuleGeometry:Cs,CapsuleBufferGeometry:Cs,CircleGeometry:Ts,CircleBufferGeometry:Ts,ConeGeometry:Ps,ConeBufferGeometry:Ps,CylinderGeometry:Rs,CylinderBufferGeometry:Rs,DodecahedronGeometry:Ds,DodecahedronBufferGeometry:Ds,EdgesGeometry:Ns,ExtrudeGeometry:hl,ExtrudeBufferGeometry:hl,IcosahedronGeometry:pl,IcosahedronBufferGeometry:pl,LatheGeometry:Es,LatheBufferGeometry:Es,OctahedronGeometry:ml,OctahedronBufferGeometry:ml,PlaneGeometry:yr,PlaneBufferGeometry:yr,PolyhedronGeometry:Ls,PolyhedronBufferGeometry:Ls,RingGeometry:gl,RingBufferGeometry:gl,ShapeGeometry:vl,ShapeBufferGeometry:vl,SphereGeometry:yl,SphereBufferGeometry:yl,TetrahedronGeometry:bl,TetrahedronBufferGeometry:bl,TorusGeometry:xl,TorusBufferGeometry:xl,TorusKnotGeometry:_l,TorusKnotBufferGeometry:_l,TubeGeometry:wl,TubeBufferGeometry:wl,WireframeGeometry:Ml});class El extends vn{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ve(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Cl extends nr{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Tl extends vn{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ve(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ve(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Rl extends Tl{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ce(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return xe(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ve(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Ve(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ve(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Pl extends vn{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ve(16777215),this.specular=new Ve(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ve(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ll extends vn{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ve(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ve(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Dl extends vn{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Il extends vn{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ve(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ve(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class kl extends vn{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ve(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Bl extends zo{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Fl(e,t,n){return Ol(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)}function Nl(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function Ol(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function zl(e){const t=e.length,n=new Array(t);for(let e=0;e!==t;++e)n[e]=e;return n.sort((function(t,n){return e[t]-e[n]})),n}function Ul(e,t,n){const r=e.length,i=new e.constructor(r);for(let a=0,o=0;o!==r;++a){const r=n[a]*t;for(let n=0;n!==t;++n)i[o++]=e[r+n]}return i}function Hl(e,t,n,r){let i=1,a=e[0];for(;void 0!==a&&void 0===a[r];)a=e[i++];if(void 0===a)return;let o=a[r];if(void 0!==o)if(Array.isArray(o))do{o=a[r],void 0!==o&&(t.push(a.time),n.push.apply(n,o)),a=e[i++]}while(void 0!==a);else if(void 0!==o.toArray)do{o=a[r],void 0!==o&&(t.push(a.time),o.toArray(n,n.length)),a=e[i++]}while(void 0!==a);else do{o=a[r],void 0!==o&&(t.push(a.time),n.push(o)),a=e[i++]}while(void 0!==a)}var Gl=Object.freeze({__proto__:null,arraySlice:Fl,convertArray:Nl,isTypedArray:Ol,getKeyframeOrder:zl,sortedArray:Ul,flattenJSON:Hl,subclip:function(e,t,n,r,i=30){const a=e.clone();a.name=t;const o=[];for(let e=0;e<a.tracks.length;++e){const t=a.tracks[e],s=t.getValueSize(),l=[],c=[];for(let e=0;e<t.times.length;++e){const a=t.times[e]*i;if(!(a<n||a>=r)){l.push(t.times[e]);for(let n=0;n<s;++n)c.push(t.values[e*s+n])}}0!==l.length&&(t.times=Nl(l,t.times.constructor),t.values=Nl(c,t.values.constructor),o.push(t))}a.tracks=o;let s=1/0;for(let e=0;e<a.tracks.length;++e)s>a.tracks[e].times[0]&&(s=a.tracks[e].times[0]);for(let e=0;e<a.tracks.length;++e)a.tracks[e].shift(-1*s);return a.resetDuration(),a},makeClipAdditive:function(e,t=0,n=e,r=30){r<=0&&(r=30);const i=n.tracks.length,a=t/r;for(let t=0;t<i;++t){const r=n.tracks[t],i=r.ValueTypeName;if("bool"===i||"string"===i)continue;const o=e.tracks.find((function(e){return e.name===r.name&&e.ValueTypeName===i}));if(void 0===o)continue;let s=0;const l=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=l/3);let c=0;const u=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const d=r.times.length-1;let h;if(a<=r.times[0]){const e=s,t=l-s;h=Fl(r.values,e,t)}else if(a>=r.times[d]){const e=d*l+s,t=e+l-s;h=Fl(r.values,e,t)}else{const e=r.createInterpolant(),t=s,n=l-s;e.evaluate(a),h=Fl(e.resultBuffer,t,n)}"quaternion"===i&&(new et).fromArray(h).normalize().conjugate().toArray(h);const f=o.times.length;for(let e=0;e<f;++e){const t=e*u+c;if("quaternion"===i)et.multiplyQuaternionsFlat(o.values,t,h,0,o.values,t);else{const e=u-2*c;for(let n=0;n<e;++n)o.values[t+n]-=h[n]}}}return e.blendMode=ae,e}});class Vl{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let a;n:{r:if(!(e<r)){for(let a=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(i=r,r=t[++n],e<r)break t}a=t.length;break n}if(e>=i)break e;{const o=t[1];e<o&&(n=2,i=o);for(let a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===a)break;if(r=i,i=t[--n-1],e>=i)break t}a=n,n=0}}for(;n<a;){const r=n+a>>>1;e<t[r]?a=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let e=0;e!==r;++e)t[e]=n[i+e];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class jl extends Vl{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ne,endingEnd:ne}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,a=e+1,o=r[i],s=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case re:i=e,o=2*t-n;break;case ie:i=r.length-2,o=t+r[i]-r[i+1];break;default:i=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case re:a=e,s=2*n-t;break;case ie:a=1,s=n+r[1]-r[0];break;default:a=e-1,s=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(s-n),this._offsetPrev=i*c,this._offsetNext=a*c}interpolate_(e,t,n,r){const i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,c=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,h=this._weightNext,f=(n-t)/(r-t),p=f*f,m=p*f,g=-d*m+2*d*p-d*f,v=(1+d)*m+(-1.5-2*d)*p+(-.5+d)*f+1,y=(-1-h)*m+(1.5+h)*p+.5*f,b=h*m-h*p;for(let e=0;e!==o;++e)i[e]=g*a[c+e]+v*a[l+e]+y*a[s+e]+b*a[u+e];return i}}class Wl extends Vl{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,c=(n-t)/(r-t),u=1-c;for(let e=0;e!==o;++e)i[e]=a[l+e]*u+a[s+e]*c;return i}}class Xl extends Vl{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class ql{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Nl(t,this.TimeBufferType),this.values=Nl(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Nl(e.times,Array),values:Nl(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Xl(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Wl(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new jl(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Q:t=this.InterpolantFactoryMethodDiscrete;break;case ee:t=this.InterpolantFactoryMethodLinear;break;case te:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Q;case this.InterpolantFactoryMethodLinear:return ee;case this.InterpolantFactoryMethodSmooth:return te}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,a=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(a=Math.max(a,1),i=a-1);const e=this.getValueSize();this.times=Fl(n,i,a),this.values=Fl(this.values,i*e,a*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let t=0;t!==i;t++){const r=n[t];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,r),e=!1;break}if(null!==a&&a>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,r,a),e=!1;break}a=r}if(void 0!==r&&Ol(r))for(let t=0,n=r.length;t!==n;++t){const n=r[t];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}return e}optimize(){const e=Fl(this.times),t=Fl(this.values),n=this.getValueSize(),r=this.getInterpolation()===te,i=e.length-1;let a=1;for(let o=1;o<i;++o){let i=!1;const s=e[o];if(s!==e[o+1]&&(1!==o||s!==e[0]))if(r)i=!0;else{const e=o*n,r=e-n,a=e+n;for(let o=0;o!==n;++o){const n=t[e+o];if(n!==t[r+o]||n!==t[a+o]){i=!0;break}}}if(i){if(o!==a){e[a]=e[o];const r=o*n,i=a*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++a}}if(i>0){e[a]=e[i];for(let e=i*n,r=a*n,o=0;o!==n;++o)t[r+o]=t[e+o];++a}return a!==e.length?(this.times=Fl(e,0,a),this.values=Fl(t,0,a*n)):(this.times=e,this.values=t),this}clone(){const e=Fl(this.times,0),t=Fl(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}ql.prototype.TimeBufferType=Float32Array,ql.prototype.ValueBufferType=Float32Array,ql.prototype.DefaultInterpolation=ee;class Yl extends ql{}Yl.prototype.ValueTypeName="bool",Yl.prototype.ValueBufferType=Array,Yl.prototype.DefaultInterpolation=Q,Yl.prototype.InterpolantFactoryMethodLinear=void 0,Yl.prototype.InterpolantFactoryMethodSmooth=void 0;class Zl extends ql{}Zl.prototype.ValueTypeName="color";class Jl extends ql{}Jl.prototype.ValueTypeName="number";class $l extends Vl{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-t)/(r-t);let l=e*o;for(let e=l+o;l!==e;l+=4)et.slerpFlat(i,0,a,l-o,a,l,s);return i}}class Kl extends ql{InterpolantFactoryMethodLinear(e){return new $l(this.times,this.values,this.getValueSize(),e)}}Kl.prototype.ValueTypeName="quaternion",Kl.prototype.DefaultInterpolation=ee,Kl.prototype.InterpolantFactoryMethodSmooth=void 0;class Ql extends ql{}Ql.prototype.ValueTypeName="string",Ql.prototype.ValueBufferType=Array,Ql.prototype.DefaultInterpolation=Q,Ql.prototype.InterpolantFactoryMethodLinear=void 0,Ql.prototype.InterpolantFactoryMethodSmooth=void 0;class ec extends ql{}ec.prototype.ValueTypeName="vector";class tc{constructor(e,t=-1,n,r=2500){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=be(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let e=0,i=n.length;e!==i;++e)t.push(nc(n[e]).scale(r));const i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,r=n.length;e!==r;++e)t.push(ql.toJSON(n[e]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const i=t.length,a=[];for(let e=0;e<i;e++){let o=[],s=[];o.push((e+i-1)%i,e,(e+1)%i),s.push(0,1,0);const l=zl(o);o=Ul(o,1,l),s=Ul(s,1,l),r||0!==o[0]||(o.push(i),s.push(s[0])),a.push(new Jl(".morphTargetInfluences["+t[e].name+"]",o,s).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let e=0;e<n.length;e++)if(n[e].name===t)return n[e];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let t=0,n=e.length;t<n;t++){const n=e[t],a=n.name.match(i);if(a&&a.length>1){const e=a[1];let t=r[e];t||(r[e]=t=[]),t.push(n)}}const a=[];for(const e in r)a.push(this.CreateFromMorphTargetSequence(e,r[e],t,n));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,r,i){if(0!==n.length){const a=[],o=[];Hl(n,a,o,r),0!==a.length&&i.push(new e(t,a,o))}},r=[],i=e.name||"default",a=e.fps||30,o=e.blendMode;let s=e.length||-1;const l=e.hierarchy||[];for(let e=0;e<l.length;e++){const i=l[e].keys;if(i&&0!==i.length)if(i[0].morphTargets){const e={};let t;for(t=0;t<i.length;t++)if(i[t].morphTargets)for(let n=0;n<i[t].morphTargets.length;n++)e[i[t].morphTargets[n]]=-1;for(const n in e){const e=[],a=[];for(let r=0;r!==i[t].morphTargets.length;++r){const r=i[t];e.push(r.time),a.push(r.morphTarget===n?1:0)}r.push(new Jl(".morphTargetInfluence["+n+"]",e,a))}s=e.length*a}else{const a=".bones["+t[e].name+"]";n(ec,a+".position",i,"pos",r),n(Kl,a+".quaternion",i,"rot",r),n(ec,a+".scale",i,"scl",r)}}return 0===r.length?null:new this(i,s,r,o)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function nc(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Jl;case"vector":case"vector2":case"vector3":case"vector4":return ec;case"color":return Zl;case"quaternion":return Kl;case"bool":case"boolean":return Yl;case"string":return Ql}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];Hl(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const rc={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class ic{constructor(e,t,n){const r=this;let i,a=!1,o=0,s=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){s++,!1===a&&void 0!==r.onStart&&r.onStart(e,o,s),a=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,s),o===s&&(a=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}const ac=new ic;class oc{constructor(e){this.manager=void 0!==e?e:ac,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const sc={};class lc extends Error{constructor(e,t){super(e),this.response=t}}class cc extends oc{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=rc.get(e);if(void 0!==i)return this.manager.itemStart(e),setTimeout((()=>{t&&t(i),this.manager.itemEnd(e)}),0),i;if(void 0!==sc[e])return void sc[e].push({onLoad:t,onProgress:n,onError:r});sc[e]=[],sc[e].push({onLoad:t,onProgress:n,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,s=this.responseType;fetch(a).then((t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=sc[e],r=t.body.getReader(),i=t.headers.get("Content-Length"),a=i?parseInt(i):0,o=0!==a;let s=0;const l=new ReadableStream({start(e){!function t(){r.read().then((({done:r,value:i})=>{if(r)e.close();else{s+=i.byteLength;const r=new ProgressEvent("progress",{lengthComputable:o,loaded:s,total:a});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(r)}e.enqueue(i),t()}}))}()}});return new Response(l)}throw new lc(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`,t)})).then((e=>{switch(s){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,o)));case"json":return e.json();default:if(void 0===o)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(o),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then((e=>r.decode(e)))}}})).then((t=>{rc.add(e,t);const n=sc[e];delete sc[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onLoad&&r.onLoad(t)}})).catch((t=>{const n=sc[e];if(void 0===n)throw this.manager.itemError(e),t;delete sc[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class uc extends oc{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,a=rc.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;const o=De("img");function s(){c(),rc.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){c(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function c(){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1)}return o.addEventListener("load",s,!1),o.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o}}class dc extends rn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ve(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class hc extends dc{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(rn.DefaultUp),this.updateMatrix(),this.groundColor=new Ve(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const fc=new Dt,pc=new tt,mc=new tt;class gc{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ce(512,512),this.map=null,this.mapPass=null,this.matrix=new Dt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new mr,this._frameExtents=new Ce(1,1),this._viewportCount=1,this._viewports=[new Je(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;pc.setFromMatrixPosition(e.matrixWorld),t.position.copy(pc),mc.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(mc),t.updateMatrixWorld(),fc.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(fc),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class vc extends gc{constructor(){super(new ir(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*ye*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class yc extends dc{constructor(e,t,n=0,r=Math.PI/3,i=0,a=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(rn.DefaultUp),this.updateMatrix(),this.target=new rn,this.distance=n,this.angle=r,this.penumbra=i,this.decay=a,this.shadow=new vc}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const bc=new Dt,xc=new tt,_c=new tt;class wc extends gc{constructor(){super(new ir(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ce(4,2),this._viewportCount=6,this._viewports=[new Je(2,1,1,1),new Je(0,1,1,1),new Je(3,1,1,1),new Je(1,1,1,1),new Je(3,0,1,1),new Je(1,0,1,1)],this._cubeDirections=[new tt(1,0,0),new tt(-1,0,0),new tt(0,0,1),new tt(0,0,-1),new tt(0,1,0),new tt(0,-1,0)],this._cubeUps=[new tt(0,1,0),new tt(0,1,0),new tt(0,1,0),new tt(0,1,0),new tt(0,0,1),new tt(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),xc.setFromMatrixPosition(e.matrixWorld),n.position.copy(xc),_c.copy(n.position),_c.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(_c),n.updateMatrixWorld(),r.makeTranslation(-xc.x,-xc.y,-xc.z),bc.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(bc)}}class Mc extends dc{constructor(e,t,n=0,r=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new wc}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Sc extends gc{constructor(){super(new Tr(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Ac extends dc{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(rn.DefaultUp),this.updateMatrix(),this.target=new rn,this.shadow=new Sc}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Ec extends dc{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Cc extends dc{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class Tc{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new tt)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*i),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*r*1.092548),t.addScaledVector(a[5],r*i*1.092548),t.addScaledVector(a[6],.315392*(3*i*i-1)),t.addScaledVector(a[7],n*i*1.092548),t.addScaledVector(a[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*r),t.addScaledVector(a[2],1.023328*i),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*r),t.addScaledVector(a[5],.858086*r*i),t.addScaledVector(a[6],.743125*i*i-.247708),t.addScaledVector(a[7],.858086*n*i),t.addScaledVector(a[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}class Rc extends dc{constructor(e=new Tc,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Pc extends oc{constructor(e){super(e),this.textures={}}load(e,t,n,r){const i=this,a=new cc(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}parse(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const r=Pc.createMaterialFromType(e.type);if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenColor&&(r.sheenColor=(new Ve).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.iridescence&&(r.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(r.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const t in e.uniforms){const i=e.uniforms[t];switch(r.uniforms[t]={},i.type){case"t":r.uniforms[t].value=n(i.value);break;case"c":r.uniforms[t].value=(new Ve).setHex(i.value);break;case"v2":r.uniforms[t].value=(new Ce).fromArray(i.value);break;case"v3":r.uniforms[t].value=(new tt).fromArray(i.value);break;case"v4":r.uniforms[t].value=(new Je).fromArray(i.value);break;case"m3":r.uniforms[t].value=(new Te).fromArray(i.value);break;case"m4":r.uniforms[t].value=(new Dt).fromArray(i.value);break;default:r.uniforms[t].value=i.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(const t in e.extensions)r.extensions[t]=e.extensions[t];if(void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),r.normalScale=(new Ce).fromArray(t)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(r.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new Ce).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(r.iridescenceMap=n(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=n(e.thicknessMap)),void 0!==e.sheenColorMap&&(r.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){return new{ShadowMaterial:El,SpriteMaterial:no,RawShaderMaterial:Cl,ShaderMaterial:nr,PointsMaterial:Jo,MeshPhysicalMaterial:Rl,MeshStandardMaterial:Tl,MeshPhongMaterial:Pl,MeshToonMaterial:Ll,MeshNormalMaterial:Dl,MeshLambertMaterial:Il,MeshDepthMaterial:ka,MeshDistanceMaterial:Ba,MeshBasicMaterial:yn,MeshMatcapMaterial:kl,LineDashedMaterial:Bl,LineBasicMaterial:zo,Material:vn}[e]}}class Lc{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class Dc extends Dn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Ic extends oc{constructor(e){super(e)}load(e,t,n,r){const i=this,a=new cc(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}parse(e){const t={},n={};function r(e,r){if(void 0!==t[r])return t[r];const i=e.interleavedBuffers[r],a=function(e,t){if(void 0!==n[t])return n[t];const r=e.arrayBuffers[t],i=new Uint32Array(r).buffer;return n[t]=i,i}(e,i.buffer),o=Le(i.type,a),s=new Qa(o,i.stride);return s.uuid=i.uuid,t[r]=s,s}const i=e.isInstancedBufferGeometry?new Dc:new Dn,a=e.data.index;if(void 0!==a){const e=Le(a.type,a.array);i.setIndex(new _n(e,1))}const o=e.data.attributes;for(const t in o){const n=o[t];let a;if(n.isInterleavedBufferAttribute){const t=r(e.data,n.data);a=new to(t,n.itemSize,n.offset,n.normalized)}else{const e=Le(n.type,n.array);a=new(n.isInstancedBufferAttribute?Io:_n)(e,n.itemSize,n.normalized)}void 0!==n.name&&(a.name=n.name),void 0!==n.usage&&a.setUsage(n.usage),void 0!==n.updateRange&&(a.updateRange.offset=n.updateRange.offset,a.updateRange.count=n.updateRange.count),i.setAttribute(t,a)}const s=e.data.morphAttributes;if(s)for(const t in s){const n=s[t],a=[];for(let t=0,i=n.length;t<i;t++){const i=n[t];let o;if(i.isInterleavedBufferAttribute){const t=r(e.data,i.data);o=new to(t,i.itemSize,i.offset,i.normalized)}else{const e=Le(i.type,i.array);o=new _n(e,i.itemSize,i.normalized)}void 0!==i.name&&(o.name=i.name),a.push(o)}i.morphAttributes[t]=a}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let e=0,t=l.length;e!==t;++e){const t=l[e];i.addGroup(t.start,t.count,t.materialIndex)}const c=e.data.boundingSphere;if(void 0!==c){const e=new tt;void 0!==c.center&&e.fromArray(c.center),i.boundingSphere=new Mt(e,c.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}const kc={UVMapping:i,CubeReflectionMapping:a,CubeRefractionMapping:o,EquirectangularReflectionMapping:s,EquirectangularRefractionMapping:l,CubeUVReflectionMapping:c},Bc={RepeatWrapping:u,ClampToEdgeWrapping:d,MirroredRepeatWrapping:h},Fc={NearestFilter:f,NearestMipmapNearestFilter:p,NearestMipmapLinearFilter:m,LinearFilter:g,LinearMipmapNearestFilter:v,LinearMipmapLinearFilter:y};let Nc;const Oc={getContext:function(){return void 0===Nc&&(Nc=new(window.AudioContext||window.webkitAudioContext)),Nc},setContext:function(e){Nc=e}},zc=new Dt,Uc=new Dt,Hc=new Dt;class Gc{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Vc(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=Vc();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function Vc(){return("undefined"==typeof performance?Date:performance).now()}const jc=new tt,Wc=new et,Xc=new tt,qc=new tt;class Yc extends rn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Zc=new tt,Jc=new et,$c=new tt,Kc=new tt;class Qc{constructor(e,t,n){let r,i,a;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,i=e*r+r;let a=this.cumulativeWeight;if(0===a){for(let e=0;e!==r;++e)n[i+e]=n[e];a=t}else{a+=t;const e=t/a;this._mixBufferRegion(n,i,0,e,r)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-i,t)}a>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let e=t,i=t+t;e!==i;++e)if(n[e]!==n[e+t]){o.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let e=n,i=r;e!==i;++e)t[e]=t[r+e%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,i){if(r>=.5)for(let r=0;r!==i;++r)e[t+r]=e[n+r]}_slerp(e,t,n,r){et.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,i){const a=this._workIndex*i;et.multiplyQuaternionsFlat(e,a,e,t,e,n),et.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,n,r,i){const a=1-r;for(let o=0;o!==i;++o){const i=t+o;e[i]=e[i]*a+e[n+o]*r}}_lerpAdditive(e,t,n,r,i){for(let a=0;a!==i;++a){const i=t+a;e[i]=e[i]+e[n+a]*r}}}const eu=new RegExp("[\\[\\]\\.:\\/]","g"),tu="[^\\[\\]\\.:\\/]",nu="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",ru=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",tu)+/(WCOD+)?/.source.replace("WCOD",nu)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",tu)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",tu)+"$"),iu=["material","materials","bones"];class au{constructor(e,t,n){this.path=t,this.parsedPath=n||au.parseTrackName(t),this.node=au.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new au.Composite(e,t,n):new au(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(eu,"")}static parseTrackName(e){const t=ru.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==iu.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const a=n(i.children);if(a)return a}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=au.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const a=e[r];if(void 0===a){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let o=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?o=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(o=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=i}else void 0!==a.fromArray&&void 0!==a.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(s=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}au.Composite=class{constructor(e,t,n){const r=n||au.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},au.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},au.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},au.prototype.GetterByBindingType=[au.prototype._getValue_direct,au.prototype._getValue_array,au.prototype._getValue_arrayElement,au.prototype._getValue_toArray],au.prototype.SetterByBindingTypeAndVersioning=[[au.prototype._setValue_direct,au.prototype._setValue_direct_setNeedsUpdate,au.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[au.prototype._setValue_array,au.prototype._setValue_array_setNeedsUpdate,au.prototype._setValue_array_setMatrixWorldNeedsUpdate],[au.prototype._setValue_arrayElement,au.prototype._setValue_arrayElement_setNeedsUpdate,au.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[au.prototype._setValue_fromArray,au.prototype._setValue_fromArray_setNeedsUpdate,au.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class ou{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const i=t.tracks,a=i.length,o=new Array(a),s={endingStart:ne,endingEnd:ne};for(let e=0;e!==a;++e){const t=i[e].createInterpolant(null);o[e]=t,t.settings=s}this._interpolantSettings=s,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,r=e._clip.duration,i=r/n,a=n/r;e.warp(1,i,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,i=r.time,a=this.timeScale;let o=this._timeScaleInterpolant;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const s=o.parameterPositions,l=o.sampleValues;return s[0]=i,s[1]=i+n,l[0]=e/a,l[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const i=this._startTime;if(null!==i){const r=(e-i)*n;if(r<0||0===n)return;this._startTime=null,t=n*r}t*=this._updateTimeScale(e);const a=this._updateTime(t),o=this._updateWeight(e);if(o>0){const e=this._interpolants,t=this._propertyBindings;if(this.blendMode===ae)for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(a),t[n].accumulateAdditive(o);else for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(a),t[n].accumulate(r,o)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,i=this._loopCount;const a=2202===n;if(0===e)return-1===i?r:a&&1==(1&i)?t-r:r;if(2200===n){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),r>=t||r<0){const n=Math.floor(r/t);r-=t*n,i+=Math.abs(n);const o=this.repetitions-i;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===o){const t=e<0;this._setEndings(t,!t,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(a&&1==(1&i))return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=re,r.endingEnd=re):(r.endingStart=e?this.zeroSlopeAtStart?re:ne:ie,r.endingEnd=t?this.zeroSlopeAtEnd?re:ne:ie)}_scheduleFading(e,t,n){const r=this._mixer,i=r.time;let a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,s=a.sampleValues;return o[0]=i,s[0]=t,o[1]=i+e,s[1]=n,this}}const su=new Float32Array(1);class lu{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new lu(void 0===this.value.clone?this.value:this.value.clone())}}let cu=0;function uu(e,t){return e.distance-t.distance}function du(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r){const r=e.children;for(let e=0,i=r.length;e<i;e++)du(r[e],t,n,!0)}}const hu=new Ce,fu=new tt,pu=new tt,mu=new tt,gu=new tt,vu=new Dt,yu=new Dt;function bu(e){const t=[];!0===e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,bu(e.children[n]));return t}const xu=new tt,_u=new Ve,wu=new Ve,Mu=new tt,Su=new tt,Au=new tt,Eu=new tt,Cu=new rr;function Tu(e,t,n,r,i,a,o){Eu.set(i,a,o).unproject(r);const s=t[e];if(void 0!==s){const e=n.getAttribute("position");for(let t=0,n=s.length;t<n;t++)e.setXYZ(s[t],Eu.x,Eu.y,Eu.z)}}const Ru=new it,Pu=new tt;let Lu,Du;const Iu=ku();function ku(){const e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),r=new Uint32Array(512),i=new Uint32Array(512);for(let e=0;e<256;++e){const t=e-127;t<-27?(r[e]=0,r[256|e]=32768,i[e]=24,i[256|e]=24):t<-14?(r[e]=1024>>-t-14,r[256|e]=1024>>-t-14|32768,i[e]=-t-1,i[256|e]=-t-1):t<=15?(r[e]=t+15<<10,r[256|e]=t+15<<10|32768,i[e]=13,i[256|e]=13):t<128?(r[e]=31744,r[256|e]=64512,i[e]=24,i[256|e]=24):(r[e]=31744,r[256|e]=64512,i[e]=13,i[256|e]=13)}const a=new Uint32Array(2048),o=new Uint32Array(64),s=new Uint32Array(64);for(let e=1;e<1024;++e){let t=e<<13,n=0;for(;0==(8388608&t);)t<<=1,n-=8388608;t&=-8388609,n+=947912704,a[e]=t|n}for(let e=1024;e<2048;++e)a[e]=939524096+(e-1024<<13);for(let e=1;e<31;++e)o[e]=e<<23;o[31]=1199570944,o[32]=2147483648;for(let e=33;e<63;++e)o[e]=2147483648+(e-32<<23);o[63]=3347054592;for(let e=1;e<64;++e)32!==e&&(s[e]=1024);return{floatView:t,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:a,exponentTable:o,offsetTable:s}}var Bu=Object.freeze({__proto__:null,toHalfFloat:function(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=xe(e,-65504,65504),Iu.floatView[0]=e;const t=Iu.uint32View[0],n=t>>23&511;return Iu.baseTable[n]+((8388607&t)>>Iu.shiftTable[n])},fromHalfFloat:function(e){const t=e>>10;return Iu.uint32View[0]=Iu.mantissaTable[Iu.offsetTable[t]+(1023&e)]+Iu.exponentTable[t],Iu.floatView[0]}});"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:n}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=n),t.ACESFilmicToneMapping=4,t.AddEquation=r,t.AddOperation=2,t.AdditiveAnimationBlendMode=ae,t.AdditiveBlending=2,t.AlphaFormat=1021,t.AlwaysDepth=1,t.AlwaysStencilFunc=519,t.AmbientLight=Ec,t.AmbientLightProbe=class extends Rc{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const n=(new Ve).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}},t.AnimationClip=tc,t.AnimationLoader=class extends oc{constructor(e){super(e)}load(e,t,n,r){const i=this,a=new cc(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=tc.parse(e[n]);t.push(r)}return t}},t.AnimationMixer=class extends pe{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName;let c=l[s];void 0===c&&(c={},l[s]=c);for(let e=0;e!==i;++e){const i=r[e],l=i.name;let u=c[l];if(void 0!==u)++u.referenceCount,a[e]=u;else{if(u=a[e],void 0!==u){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,s,l));continue}const r=t&&t._propertyBindings[e].binding.parsedPath;u=new Qc(au.create(n,l,r),i.ValueTypeName,i.getValueSize()),++u.referenceCount,this._addInactiveBinding(u,s,l),a[e]=u}o[e].resultBuffer=u.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,i=this._actionsByClip;let a=i[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{const t=a.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const i=e._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,l=s[s.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,s[c]=l,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete a[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.referenceCount&&this._removeInactiveBinding(n)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,i=this._bindings;let a=r[t];void 0===a&&(a={},r[t]=a),a[n]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,o=a[r],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete o[i],0===Object.keys(o).length&&delete a[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new Wl(new Float32Array(2),new Float32Array(2),1,su),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}clipAction(e,t,n){const r=t||this._root,i=r.uuid;let a="string"==typeof e?tc.findByName(r,e):e;const o=null!==a?a.uuid:e,s=this._actionsByClip[o];let l=null;if(void 0===n&&(n=null!==a?a.blendMode:2500),void 0!==s){const e=s.actionByRoot[i];if(void 0!==e&&e.blendMode===n)return e;l=s.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;const c=new ou(this,a,t,n);return this._bindAction(c,l),this._addInactiveAction(c,o,i),c}existingAction(e,t){const n=t||this._root,r=n.uuid,i="string"==typeof e?tc.findByName(n,e):e,a=i?i.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1;for(let o=0;o!==n;++o)t[o]._update(r,e,i,a);const o=this._bindings,s=this._nActiveBindings;for(let e=0;e!==s;++e)o[e].apply(a);return this}setTime(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const e=i.knownActions;for(let n=0,r=e.length;n!==r;++n){const r=e[n];this._deactivateAction(r);const i=r._cacheIndex,a=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,a._cacheIndex=i,t[i]=a,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const e in n){const r=n[e].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}const r=this._bindingsByRootAndName[t];if(void 0!==r)for(const e in r){const t=r[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}},t.AnimationObjectGroup=class{constructor(){this.isAnimationObjectGroup=!0,this.uuid=be(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,a=i.length;let o,s=e.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],d=u.uuid;let h=t[d];if(void 0===h){h=s++,t[d]=h,e.push(u);for(let e=0,t=a;e!==t;++e)i[e].push(new au(u,n[e],r[e]))}else if(h<l){o=e[h];const s=--l,c=e[s];t[c.uuid]=h,e[h]=c,t[d]=s,e[s]=u;for(let e=0,t=a;e!==t;++e){const t=i[e],a=t[s];let o=t[h];t[h]=a,void 0===o&&(o=new au(u,n[e],r[e])),t[s]=o}}else e[h]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_;for(let a=0,o=arguments.length;a!==o;++a){const o=arguments[a],s=o.uuid,l=t[s];if(void 0!==l&&l>=i){const a=i++,c=e[a];t[c.uuid]=l,e[l]=c,t[s]=a,e[a]=o;for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[a],i=t[l];t[l]=r,t[a]=i}}}this.nCachedObjects_=i}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_,a=e.length;for(let o=0,s=arguments.length;o!==s;++o){const s=arguments[o].uuid,l=t[s];if(void 0!==l)if(delete t[s],l<i){const o=--i,s=e[o],c=--a,u=e[c];t[s.uuid]=l,e[l]=s,t[u.uuid]=o,e[o]=u,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[o],i=t[c];t[l]=r,t[o]=i,t.pop()}}else{const i=--a,o=e[i];i>0&&(t[o.uuid]=l),e[l]=o,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e];t[l]=t[i],t.pop()}}}this.nCachedObjects_=i}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const i=this._bindings;if(void 0!==r)return i[r];const a=this._paths,o=this._parsedPaths,s=this._objects,l=s.length,c=this.nCachedObjects_,u=new Array(l);r=i.length,n[e]=r,a.push(e),o.push(t),i.push(u);for(let n=c,r=s.length;n!==r;++n){const r=s[n];u[n]=new au(r,e,t)}return u}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const r=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];t[e[o]]=n,a[n]=s,a.pop(),i[n]=i[o],i.pop(),r[n]=r[o],r.pop()}}},t.AnimationUtils=Gl,t.ArcCurve=os,t.ArrayCamera=Ua,t.ArrowHelper=class extends rn{constructor(e=new tt(0,0,1),t=new tt(0,0,0),n=1,r=16776960,i=.2*n,a=.2*i){super(),this.type="ArrowHelper",void 0===Lu&&(Lu=new Dn,Lu.setAttribute("position",new Sn([0,0,0,0,1,0],3)),Du=new Rs(0,.5,1,5,1),Du.translate(0,-.5,0)),this.position.copy(t),this.line=new Wo(Lu,new zo({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Jn(Du,new yn({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Pu.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Pu,t)}}setLength(e,t=.2*e,n=.2*t){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}},t.Audio=Yc,t.AudioAnalyser=class{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}},t.AudioContext=Oc,t.AudioListener=class extends rn{constructor(){super(),this.type="AudioListener",this.context=Oc.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Gc}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(jc,Wc,Xc),qc.set(0,0,-1).applyQuaternion(Wc),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(jc.x,e),t.positionY.linearRampToValueAtTime(jc.y,e),t.positionZ.linearRampToValueAtTime(jc.z,e),t.forwardX.linearRampToValueAtTime(qc.x,e),t.forwardY.linearRampToValueAtTime(qc.y,e),t.forwardZ.linearRampToValueAtTime(qc.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition(jc.x,jc.y,jc.z),t.setOrientation(qc.x,qc.y,qc.z,n.x,n.y,n.z)}},t.AudioLoader=class extends oc{constructor(e){super(e)}load(e,t,n,r){const i=this,a=new cc(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{const e=n.slice(0);Oc.getContext().decodeAudioData(e,(function(e){t(e)}))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}},t.AxesHelper=class extends Yo{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new Dn;n.setAttribute("position",new Sn(t,3)),n.setAttribute("color",new Sn([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(n,new zo({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){const r=new Ve,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},t.BackSide=1,t.BasicDepthPacking=3200,t.BasicShadowMap=0,t.Bone=To,t.BooleanKeyframeTrack=Yl,t.Box2=class{constructor(e=new Ce(1/0,1/0),t=new Ce(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=hu.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return hu.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},t.Box3=it,t.Box3Helper=class extends Yo{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Dn;r.setIndex(new _n(n,1)),r.setAttribute("position",new Sn([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new zo({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}},t.BoxBufferGeometry=Kn,t.BoxGeometry=Kn,t.BoxHelper=class extends Yo{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new Dn;i.setIndex(new _n(n,1)),i.setAttribute("position",new _n(r,3)),super(i,new zo({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Ru.setFromObject(this.object),Ru.isEmpty())return;const t=Ru.min,n=Ru.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}},t.BufferAttribute=_n,t.BufferGeometry=Dn,t.BufferGeometryLoader=Ic,t.ByteType=1010,t.Cache=rc,t.Camera=rr,t.CameraHelper=class extends Yo{constructor(e){const t=new Dn,n=new zo({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],a={};function o(e,t){s(e),s(t)}function s(e){r.push(0,0,0),i.push(0,0,0),void 0===a[e]&&(a[e]=[]),a[e].push(r.length/3-1)}o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4"),t.setAttribute("position",new Sn(r,3)),t.setAttribute("color",new Sn(i,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const l=new Ve(16755200),c=new Ve(16711680),u=new Ve(43775),d=new Ve(16777215),h=new Ve(3355443);this.setColors(l,c,u,d,h)}setColors(e,t,n,r,i){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,i.r,i.g,i.b),a.setXYZ(41,i.r,i.g,i.b),a.setXYZ(42,i.r,i.g,i.b),a.setXYZ(43,i.r,i.g,i.b),a.setXYZ(44,i.r,i.g,i.b),a.setXYZ(45,i.r,i.g,i.b),a.setXYZ(46,i.r,i.g,i.b),a.setXYZ(47,i.r,i.g,i.b),a.setXYZ(48,i.r,i.g,i.b),a.setXYZ(49,i.r,i.g,i.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap;Cu.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Tu("c",t,e,Cu,0,0,-1),Tu("t",t,e,Cu,0,0,1),Tu("n1",t,e,Cu,-1,-1,-1),Tu("n2",t,e,Cu,1,-1,-1),Tu("n3",t,e,Cu,-1,1,-1),Tu("n4",t,e,Cu,1,1,-1),Tu("f1",t,e,Cu,-1,-1,1),Tu("f2",t,e,Cu,1,-1,1),Tu("f3",t,e,Cu,-1,1,1),Tu("f4",t,e,Cu,1,1,1),Tu("u1",t,e,Cu,.7,1.1,-1),Tu("u2",t,e,Cu,-.7,1.1,-1),Tu("u3",t,e,Cu,0,2,-1),Tu("cf1",t,e,Cu,-1,0,1),Tu("cf2",t,e,Cu,1,0,1),Tu("cf3",t,e,Cu,0,-1,1),Tu("cf4",t,e,Cu,0,1,1),Tu("cn1",t,e,Cu,-1,0,-1),Tu("cn2",t,e,Cu,1,0,-1),Tu("cn3",t,e,Cu,0,-1,-1),Tu("cn4",t,e,Cu,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}},t.CanvasTexture=class extends Ze{constructor(e,t,n,r,i,a,o,s,l){super(e,t,n,r,i,a,o,s,l),this.isCanvasTexture=!0,this.needsUpdate=!0}},t.CapsuleBufferGeometry=Cs,t.CapsuleGeometry=Cs,t.CatmullRomCurve3=hs,t.CineonToneMapping=3,t.CircleBufferGeometry=Ts,t.CircleGeometry=Ts,t.ClampToEdgeWrapping=d,t.Clock=Gc,t.Color=Ve,t.ColorKeyframeTrack=Zl,t.ColorManagement=Fe,t.CompressedTexture=rs,t.CompressedTextureLoader=class extends oc{constructor(e){super(e)}load(e,t,n,r){const i=this,a=[],o=new rs,s=new cc(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(i.withCredentials);let l=0;function c(c){s.load(e[c],(function(e){const n=i.parse(e,!0);a[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(o.minFilter=g),o.image=a,o.format=n.format,o.needsUpdate=!0,t&&t(o))}),n,r)}if(Array.isArray(e))for(let t=0,n=e.length;t<n;++t)c(t);else s.load(e,(function(e){const n=i.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){a[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)a[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),a[t].format=n.format,a[t].width=n.width,a[t].height=n.height}o.image=a}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=g),o.format=n.format,o.needsUpdate=!0,t&&t(o)}),n,r);return o}},t.ConeBufferGeometry=Ps,t.ConeGeometry=Ps,t.CubeCamera=or,t.CubeReflectionMapping=a,t.CubeRefractionMapping=o,t.CubeTexture=sr,t.CubeTextureLoader=class extends oc{constructor(e){super(e)}load(e,t,n,r){const i=new sr,a=new uc(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;function s(n){a.load(e[n],(function(e){i.images[n]=e,o++,6===o&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(let t=0;t<e.length;++t)s(t);return i}},t.CubeUVReflectionMapping=c,t.CubicBezierCurve=gs,t.CubicBezierCurve3=vs,t.CubicInterpolant=jl,t.CullFaceBack=1,t.CullFaceFront=2,t.CullFaceFrontBack=3,t.CullFaceNone=0,t.Curve=is,t.CurvePath=Ss,t.CustomBlending=5,t.CustomToneMapping=5,t.CylinderBufferGeometry=Rs,t.CylinderGeometry=Rs,t.Cylindrical=class{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return(new this.constructor).copy(this)}},t.Data3DTexture=Qe,t.DataArrayTexture=Ke,t.DataTexture=Ro,t.DataTexture2DArray=class extends Ke{constructor(e,t,n,r){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(e,t,n,r)}},t.DataTexture3D=class extends Qe{constructor(e,t,n,r){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(e,t,n,r)}},t.DataTextureLoader=class extends oc{constructor(e){super(e)}load(e,t,n,r){const i=this,a=new Ro,o=new cc(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(i.withCredentials),o.load(e,(function(e){const n=i.parse(e);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:d,a.wrapT=void 0!==n.wrapT?n.wrapT:d,a.magFilter=void 0!==n.magFilter?n.magFilter:g,a.minFilter=void 0!==n.minFilter?n.minFilter:g,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(a.encoding=n.encoding),void 0!==n.flipY&&(a.flipY=n.flipY),void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=y),1===n.mipmapCount&&(a.minFilter=g),void 0!==n.generateMipmaps&&(a.generateMipmaps=n.generateMipmaps),a.needsUpdate=!0,t&&t(a,n))}),n,r),a}},t.DataUtils=Bu,t.DecrementStencilOp=7683,t.DecrementWrapStencilOp=34056,t.DefaultLoadingManager=ac,t.DepthFormat=E,t.DepthStencilFormat=C,t.DepthTexture=ja,t.DirectionalLight=Ac,t.DirectionalLightHelper=class extends rn{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);let r=new Dn;r.setAttribute("position",new Sn([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const i=new zo({fog:!1,toneMapped:!1});this.lightPlane=new Wo(r,i),this.add(this.lightPlane),r=new Dn,r.setAttribute("position",new Sn([0,0,0,0,0,1],3)),this.targetLine=new Wo(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){Mu.setFromMatrixPosition(this.light.matrixWorld),Su.setFromMatrixPosition(this.light.target.matrixWorld),Au.subVectors(Su,Mu),this.lightPlane.lookAt(Su),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Su),this.targetLine.scale.z=Au.length()}},t.DiscreteInterpolant=Xl,t.DodecahedronBufferGeometry=Ds,t.DodecahedronGeometry=Ds,t.DoubleSide=2,t.DstAlphaFactor=206,t.DstColorFactor=208,t.DynamicCopyUsage=35050,t.DynamicDrawUsage=35048,t.DynamicReadUsage=35049,t.EdgesGeometry=Ns,t.EllipseCurve=as,t.EqualDepth=4,t.EqualStencilFunc=514,t.EquirectangularReflectionMapping=s,t.EquirectangularRefractionMapping=l,t.Euler=Gt,t.EventDispatcher=pe,t.ExtrudeBufferGeometry=hl,t.ExtrudeGeometry=hl,t.FileLoader=cc,t.FlatShading=1,t.Float16BufferAttribute=class extends _n{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}},t.Float32BufferAttribute=Sn,t.Float64BufferAttribute=class extends _n{constructor(e,t,n){super(new Float64Array(e),t,n)}},t.FloatType=w,t.Fog=$a,t.FogExp2=Ja,t.Font=function(){console.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")},t.FontLoader=function(){console.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")},t.FramebufferTexture=class extends Ze{constructor(e,t,n){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=n,this.magFilter=f,this.minFilter=f,this.generateMipmaps=!1,this.needsUpdate=!0}},t.FrontSide=0,t.Frustum=mr,t.GLBufferAttribute=class{constructor(e,t,n,r,i){this.isGLBufferAttribute=!0,this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}},t.GLSL1="100",t.GLSL3=he,t.GreaterDepth=6,t.GreaterEqualDepth=5,t.GreaterEqualStencilFunc=518,t.GreaterStencilFunc=516,t.GridHelper=class extends Yo{constructor(e=10,t=10,n=4473924,r=8947848){n=new Ve(n),r=new Ve(r);const i=t/2,a=e/t,o=e/2,s=[],l=[];for(let e=0,c=0,u=-o;e<=t;e++,u+=a){s.push(-o,0,u,o,0,u),s.push(u,0,-o,u,0,o);const t=e===i?n:r;t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3}const c=new Dn;c.setAttribute("position",new Sn(s,3)),c.setAttribute("color",new Sn(l,3)),super(c,new zo({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}},t.Group=Ha,t.HalfFloatType=M,t.HemisphereLight=hc,t.HemisphereLightHelper=class extends rn{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const r=new ml(t);r.rotateY(.5*Math.PI),this.material=new yn({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const i=r.getAttribute("position"),a=new Float32Array(3*i.count);r.setAttribute("color",new _n(a,3)),this.add(new Jn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");_u.copy(this.light.color),wu.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const r=e<n/2?_u:wu;t.setXYZ(e,r.r,r.g,r.b)}t.needsUpdate=!0}e.lookAt(xu.setFromMatrixPosition(this.light.matrixWorld).negate())}},t.HemisphereLightProbe=class extends Rc{constructor(e,t,n=1){super(void 0,n),this.isHemisphereLightProbe=!0;const r=(new Ve).set(e),i=(new Ve).set(t),a=new tt(r.r,r.g,r.b),o=new tt(i.r,i.g,i.b),s=Math.sqrt(Math.PI),l=s*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(o).multiplyScalar(s),this.sh.coefficients[1].copy(a).sub(o).multiplyScalar(l)}},t.IcosahedronBufferGeometry=pl,t.IcosahedronGeometry=pl,t.ImageBitmapLoader=class extends oc{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,a=rc.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;const o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){rc.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}},t.ImageLoader=uc,t.ImageUtils=We,t.ImmediateRenderObject=function(){console.error("THREE.ImmediateRenderObject has been removed.")},t.IncrementStencilOp=7682,t.IncrementWrapStencilOp=34055,t.InstancedBufferAttribute=Io,t.InstancedBufferGeometry=Dc,t.InstancedInterleavedBuffer=class extends Qa{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}},t.InstancedMesh=Oo,t.Int16BufferAttribute=class extends _n{constructor(e,t,n){super(new Int16Array(e),t,n)}},t.Int32BufferAttribute=class extends _n{constructor(e,t,n){super(new Int32Array(e),t,n)}},t.Int8BufferAttribute=class extends _n{constructor(e,t,n){super(new Int8Array(e),t,n)}},t.IntType=1013,t.InterleavedBuffer=Qa,t.InterleavedBufferAttribute=to,t.Interpolant=Vl,t.InterpolateDiscrete=Q,t.InterpolateLinear=ee,t.InterpolateSmooth=te,t.InvertStencilOp=5386,t.KeepStencilOp=ue,t.KeyframeTrack=ql,t.LOD=_o,t.LatheBufferGeometry=Es,t.LatheGeometry=Es,t.Layers=Vt,t.LessDepth=2,t.LessEqualDepth=3,t.LessEqualStencilFunc=515,t.LessStencilFunc=513,t.Light=dc,t.LightProbe=Rc,t.Line=Wo,t.Line3=class{constructor(e=new tt,t=new tt){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){fu.subVectors(e,this.start),pu.subVectors(this.end,this.start);const n=pu.dot(pu);let r=pu.dot(fu)/n;return t&&(r=xe(r,0,1)),r}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}},t.LineBasicMaterial=zo,t.LineCurve=ys,t.LineCurve3=bs,t.LineDashedMaterial=Bl,t.LineLoop=Zo,t.LineSegments=Yo,t.LinearEncoding=oe,t.LinearFilter=g,t.LinearInterpolant=Wl,t.LinearMipMapLinearFilter=1008,t.LinearMipMapNearestFilter=1007,t.LinearMipmapLinearFilter=y,t.LinearMipmapNearestFilter=v,t.LinearSRGBColorSpace=ce,t.LinearToneMapping=1,t.Loader=oc,t.LoaderUtils=Lc,t.LoadingManager=ic,t.LoopOnce=2200,t.LoopPingPong=2202,t.LoopRepeat=2201,t.LuminanceAlphaFormat=1025,t.LuminanceFormat=1024,t.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},t.Material=vn,t.MaterialLoader=Pc,t.MathUtils=Ee,t.Matrix3=Te,t.Matrix4=Dt,t.MaxEquation=104,t.Mesh=Jn,t.MeshBasicMaterial=yn,t.MeshDepthMaterial=ka,t.MeshDistanceMaterial=Ba,t.MeshLambertMaterial=Il,t.MeshMatcapMaterial=kl,t.MeshNormalMaterial=Dl,t.MeshPhongMaterial=Pl,t.MeshPhysicalMaterial=Rl,t.MeshStandardMaterial=Tl,t.MeshToonMaterial=Ll,t.MinEquation=103,t.MirroredRepeatWrapping=h,t.MixOperation=1,t.MultiplyBlending=4,t.MultiplyOperation=0,t.NearestFilter=f,t.NearestMipMapLinearFilter=1005,t.NearestMipMapNearestFilter=1004,t.NearestMipmapLinearFilter=m,t.NearestMipmapNearestFilter=p,t.NeverDepth=0,t.NeverStencilFunc=512,t.NoBlending=0,t.NoColorSpace="",t.NoToneMapping=0,t.NormalAnimationBlendMode=2500,t.NormalBlending=1,t.NotEqualDepth=7,t.NotEqualStencilFunc=517,t.NumberKeyframeTrack=Jl,t.Object3D=rn,t.ObjectLoader=class extends oc{constructor(e){super(e)}load(e,t,n,r){const i=this,a=""===this.path?Lc.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const o=new cc(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){let a=null;try{a=JSON.parse(n)}catch(t){return void 0!==r&&r(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}const o=a.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?i.parse(a,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,r)}async loadAsync(e,t){const n=""===this.path?Lc.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;const r=new cc(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const i=await r.loadAsync(e,t),a=JSON.parse(i),o=a.metadata;if(void 0===o||void 0===o.type||"geometry"===o.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(a)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,(function(){void 0!==t&&t(l)})),o=this.parseTextures(e.textures,a),s=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,s,o,n),c=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,c),void 0!==t){let e=!1;for(const t in a)if(a[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),i=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,i),o=this.parseMaterials(e.materials,a),s=this.parseObject(e.object,r,o,a,t),l=this.parseSkeletons(e.skeletons,s);return this.bindSkeletons(s,l),s}parseShapes(e){const t={};if(void 0!==e)for(let n=0,r=e.length;n<r;n++){const r=(new Os).fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse((function(e){e.isBone&&(r[e.uuid]=e)})),void 0!==e)for(let t=0,i=e.length;t<i;t++){const i=(new Do).fromJSON(e[t],r);n[i.uuid]=i}return n}parseGeometries(e,t){const n={};if(void 0!==e){const r=new Ic;for(let i=0,a=e.length;i<a;i++){let a;const o=e[i];switch(o.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(o);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:o.type in Al?a=Al[o.type].fromJSON(o,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${o.type}"`)}a.uuid=o.uuid,void 0!==o.name&&(a.name=o.name),!0===a.isBufferGeometry&&void 0!==o.userData&&(a.userData=o.userData),n[o.uuid]=a}}return n}parseMaterials(e,t){const n={},r={};if(void 0!==e){const i=new Pc;i.setTextures(t);for(let t=0,a=e.length;t<a;t++){const a=e[t];if("MultiMaterial"===a.type){const e=[];for(let t=0;t<a.materials.length;t++){const r=a.materials[t];void 0===n[r.uuid]&&(n[r.uuid]=i.parse(r)),e.push(n[r.uuid])}r[a.uuid]=e}else void 0===n[a.uuid]&&(n[a.uuid]=i.parse(a)),r[a.uuid]=n[a.uuid]}}return r}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const r=e[n],i=tc.parse(r);t[i.uuid]=i}return t}parseImages(e,t){const n=this,r={};let i;function a(e){if("string"==typeof e){const t=e;return function(e){return n.manager.itemStart(e),i.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemError(e),n.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t)}return e.data?{data:Le(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const n=new ic(t);i=new uc(n),i.setCrossOrigin(this.crossOrigin);for(let t=0,n=e.length;t<n;t++){const n=e[t],i=n.url;if(Array.isArray(i)){const e=[];for(let t=0,n=i.length;t<n;t++){const n=a(i[t]);null!==n&&(n instanceof HTMLImageElement?e.push(n):e.push(new Ro(n.data,n.width,n.height)))}r[n.uuid]=new Xe(e)}else{const e=a(n.url);r[n.uuid]=new Xe(e)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function i(e){if("string"==typeof e){const n=e,i=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:t.resourcePath+n;return await r.loadAsync(i)}return e.data?{data:Le(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){r=new uc(this.manager),r.setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){const r=e[t],a=r.url;if(Array.isArray(a)){const e=[];for(let t=0,n=a.length;t<n;t++){const n=a[t],r=await i(n);null!==r&&(r instanceof HTMLImageElement?e.push(r):e.push(new Ro(r.data,r.width,r.height)))}n[r.uuid]=new Xe(e)}else{const e=await i(r.url);n[r.uuid]=new Xe(e)}}}return n}parseTextures(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const r={};if(void 0!==e)for(let i=0,a=e.length;i<a;i++){const a=e[i];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===t[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const o=t[a.image],s=o.data;let l;Array.isArray(s)?(l=new sr,6===s.length&&(l.needsUpdate=!0)):(l=s&&s.data?new Ro:new Ze,s&&(l.needsUpdate=!0)),l.source=o,l.uuid=a.uuid,void 0!==a.name&&(l.name=a.name),void 0!==a.mapping&&(l.mapping=n(a.mapping,kc)),void 0!==a.offset&&l.offset.fromArray(a.offset),void 0!==a.repeat&&l.repeat.fromArray(a.repeat),void 0!==a.center&&l.center.fromArray(a.center),void 0!==a.rotation&&(l.rotation=a.rotation),void 0!==a.wrap&&(l.wrapS=n(a.wrap[0],Bc),l.wrapT=n(a.wrap[1],Bc)),void 0!==a.format&&(l.format=a.format),void 0!==a.type&&(l.type=a.type),void 0!==a.encoding&&(l.encoding=a.encoding),void 0!==a.minFilter&&(l.minFilter=n(a.minFilter,Fc)),void 0!==a.magFilter&&(l.magFilter=n(a.magFilter,Fc)),void 0!==a.anisotropy&&(l.anisotropy=a.anisotropy),void 0!==a.flipY&&(l.flipY=a.flipY),void 0!==a.premultiplyAlpha&&(l.premultiplyAlpha=a.premultiplyAlpha),void 0!==a.unpackAlignment&&(l.unpackAlignment=a.unpackAlignment),void 0!==a.userData&&(l.userData=a.userData),r[a.uuid]=l}return r}parseObject(e,t,n,r,i){let a,o,s;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function c(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];void 0===n[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),t.push(n[i])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function u(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),r[e]}switch(e.type){case"Scene":a=new Ka,void 0!==e.background&&(Number.isInteger(e.background)?a.background=new Ve(e.background):a.background=u(e.background)),void 0!==e.environment&&(a.environment=u(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?a.fog=new $a(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(a.fog=new Ja(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":a=new ir(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(a.focus=e.focus),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.filmGauge&&(a.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(a.filmOffset=e.filmOffset),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new Tr(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new Ec(e.color,e.intensity);break;case"DirectionalLight":a=new Ac(e.color,e.intensity);break;case"PointLight":a=new Mc(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new Cc(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new yc(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new hc(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=(new Rc).fromJSON(e);break;case"SkinnedMesh":o=l(e.geometry),s=c(e.material),a=new Co(o,s),void 0!==e.bindMode&&(a.bindMode=e.bindMode),void 0!==e.bindMatrix&&a.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(a.skeleton=e.skeleton);break;case"Mesh":o=l(e.geometry),s=c(e.material),a=new Jn(o,s);break;case"InstancedMesh":o=l(e.geometry),s=c(e.material);const t=e.count,n=e.instanceMatrix,r=e.instanceColor;a=new Oo(o,s,t),a.instanceMatrix=new Io(new Float32Array(n.array),16),void 0!==r&&(a.instanceColor=new Io(new Float32Array(r.array),r.itemSize));break;case"LOD":a=new _o;break;case"Line":a=new Wo(l(e.geometry),c(e.material));break;case"LineLoop":a=new Zo(l(e.geometry),c(e.material));break;case"LineSegments":a=new Yo(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":a=new ts(l(e.geometry),c(e.material));break;case"Sprite":a=new vo(c(e.material));break;case"Group":a=new Ha;break;case"Bone":a=new To;break;default:a=new rn}if(a.uuid=e.uuid,void 0!==e.name&&(a.name=e.name),void 0!==e.matrix?(a.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==e.position&&a.position.fromArray(e.position),void 0!==e.rotation&&a.rotation.fromArray(e.rotation),void 0!==e.quaternion&&a.quaternion.fromArray(e.quaternion),void 0!==e.scale&&a.scale.fromArray(e.scale)),void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(a.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(a.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(a.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&a.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(a.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.frustumCulled&&(a.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(a.renderOrder=e.renderOrder),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.layers&&(a.layers.mask=e.layers),void 0!==e.children){const o=e.children;for(let e=0;e<o.length;e++)a.add(this.parseObject(o[e],t,n,r,i))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const n=t[e];a.animations.push(i[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(a.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],r=a.getObjectByProperty("uuid",n.object);void 0!==r&&a.addLevel(r,n.distance)}}return a}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}},t.ObjectSpaceNormalMap=1,t.OctahedronBufferGeometry=ml,t.OctahedronGeometry=ml,t.OneFactor=201,t.OneMinusDstAlphaFactor=207,t.OneMinusDstColorFactor=209,t.OneMinusSrcAlphaFactor=205,t.OneMinusSrcColorFactor=203,t.OrthographicCamera=Tr,t.PCFShadowMap=1,t.PCFSoftShadowMap=2,t.PMREMGenerator=Fr,t.ParametricGeometry=class extends Dn{constructor(){console.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js"),super()}},t.Path=As,t.PerspectiveCamera=ir,t.Plane=hr,t.PlaneBufferGeometry=yr,t.PlaneGeometry=yr,t.PlaneHelper=class extends Wo{constructor(e,t=1,n=16776960){const r=n,i=new Dn;i.setAttribute("position",new Sn([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),i.computeBoundingSphere(),super(i,new zo({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=new Dn;a.setAttribute("position",new Sn([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),a.computeBoundingSphere(),this.add(new Jn(a,new yn({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}},t.PointLight=Mc,t.PointLightHelper=class extends Jn{constructor(e,t,n){super(new yl(t,4,2),new yn({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.light.updateMatrixWorld(),this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},t.Points=ts,t.PointsMaterial=Jo,t.PolarGridHelper=class extends Yo{constructor(e=10,t=16,n=8,r=64,i=4473924,a=8947848){i=new Ve(i),a=new Ve(a);const o=[],s=[];for(let n=0;n<=t;n++){const r=n/t*(2*Math.PI),l=Math.sin(r)*e,c=Math.cos(r)*e;o.push(0,0,0),o.push(l,0,c);const u=1&n?i:a;s.push(u.r,u.g,u.b),s.push(u.r,u.g,u.b)}for(let t=0;t<=n;t++){const l=1&t?i:a,c=e-e/n*t;for(let e=0;e<r;e++){let t=e/r*(2*Math.PI),n=Math.sin(t)*c,i=Math.cos(t)*c;o.push(n,0,i),s.push(l.r,l.g,l.b),t=(e+1)/r*(2*Math.PI),n=Math.sin(t)*c,i=Math.cos(t)*c,o.push(n,0,i),s.push(l.r,l.g,l.b)}}const l=new Dn;l.setAttribute("position",new Sn(o,3)),l.setAttribute("color",new Sn(s,3)),super(l,new zo({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}},t.PolyhedronBufferGeometry=Ls,t.PolyhedronGeometry=Ls,t.PositionalAudio=class extends Yc{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(Zc,Jc,$c),Kc.set(0,0,1).applyQuaternion(Jc);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Zc.x,e),t.positionY.linearRampToValueAtTime(Zc.y,e),t.positionZ.linearRampToValueAtTime(Zc.z,e),t.orientationX.linearRampToValueAtTime(Kc.x,e),t.orientationY.linearRampToValueAtTime(Kc.y,e),t.orientationZ.linearRampToValueAtTime(Kc.z,e)}else t.setPosition(Zc.x,Zc.y,Zc.z),t.setOrientation(Kc.x,Kc.y,Kc.z)}},t.PropertyBinding=au,t.PropertyMixer=Qc,t.QuadraticBezierCurve=xs,t.QuadraticBezierCurve3=_s,t.Quaternion=et,t.QuaternionKeyframeTrack=Kl,t.QuaternionLinearInterpolant=$l,t.REVISION=n,t.RGBADepthPacking=3201,t.RGBAFormat=A,t.RGBAIntegerFormat=1033,t.RGBA_ASTC_10x10_Format=Z,t.RGBA_ASTC_10x5_Format=X,t.RGBA_ASTC_10x6_Format=q,t.RGBA_ASTC_10x8_Format=Y,t.RGBA_ASTC_12x10_Format=J,t.RGBA_ASTC_12x12_Format=$,t.RGBA_ASTC_4x4_Format=O,t.RGBA_ASTC_5x4_Format=z,t.RGBA_ASTC_5x5_Format=U,t.RGBA_ASTC_6x5_Format=H,t.RGBA_ASTC_6x6_Format=G,t.RGBA_ASTC_8x5_Format=V,t.RGBA_ASTC_8x6_Format=j,t.RGBA_ASTC_8x8_Format=W,t.RGBA_BPTC_Format=K,t.RGBA_ETC2_EAC_Format=N,t.RGBA_PVRTC_2BPPV1_Format=B,t.RGBA_PVRTC_4BPPV1_Format=k,t.RGBA_S3TC_DXT1_Format=R,t.RGBA_S3TC_DXT3_Format=P,t.RGBA_S3TC_DXT5_Format=L,t.RGBFormat=1022,t.RGB_ETC1_Format=36196,t.RGB_ETC2_Format=F,t.RGB_PVRTC_2BPPV1_Format=I,t.RGB_PVRTC_4BPPV1_Format=D,t.RGB_S3TC_DXT1_Format=T,t.RGFormat=1030,t.RGIntegerFormat=1031,t.RawShaderMaterial=Cl,t.Ray=Lt,t.Raycaster=class{constructor(e,t,n=0,r=1/0){this.ray=new Lt(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new Vt,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return du(e,this,n,t),n.sort(uu),n}intersectObjects(e,t=!0,n=[]){for(let r=0,i=e.length;r<i;r++)du(e[r],this,n,t);return n.sort(uu),n}},t.RectAreaLight=Cc,t.RedFormat=1028,t.RedIntegerFormat=1029,t.ReinhardToneMapping=2,t.RepeatWrapping=u,t.ReplaceStencilOp=7681,t.ReverseSubtractEquation=102,t.RingBufferGeometry=gl,t.RingGeometry=gl,t.SRGBColorSpace=le,t.Scene=Ka,t.ShaderChunk=br,t.ShaderLib=_r,t.ShaderMaterial=nr,t.ShadowMaterial=El,t.Shape=Os,t.ShapeBufferGeometry=vl,t.ShapeGeometry=vl,t.ShapePath=class{constructor(){this.type="ShapePath",this.color=new Ve,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new As,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,i,a){return this.currentPath.bezierCurveTo(e,t,n,r,i,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function n(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n],i=new Os;i.curves=r.curves,t.push(i)}return t}function r(e,t){const n=t.length;let r=!1;for(let i=n-1,a=0;a<n;i=a++){let n=t[i],o=t[a],s=o.x-n.x,l=o.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[a],s=-s,o=t[i],l=-l),e.y<n.y||e.y>o.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-s*(e.y-n.y);if(0===t)return!0;if(t<0)continue;r=!r}}else{if(e.y!==n.y)continue;if(o.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=o.x)return!0}}return r}const i=cl.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===t)return n(a);let o,s,l;const c=[];if(1===a.length)return s=a[0],l=new Os,l.curves=s.curves,c.push(l),c;let u=!i(a[0].getPoints());u=e?!u:u;const d=[],h=[];let f,p,m=[],g=0;h[g]=void 0,m[g]=[];for(let t=0,n=a.length;t<n;t++)s=a[t],f=s.getPoints(),o=i(f),o=e?!o:o,o?(!u&&h[g]&&g++,h[g]={s:new Os,p:f},h[g].s.curves=s.curves,u&&g++,m[g]=[]):m[g].push({h:s,p:f[0]});if(!h[0])return n(a);if(h.length>1){let e=!1,t=0;for(let e=0,t=h.length;e<t;e++)d[e]=[];for(let n=0,i=h.length;n<i;n++){const i=m[n];for(let a=0;a<i.length;a++){const o=i[a];let s=!0;for(let i=0;i<h.length;i++)r(o.p,h[i].p)&&(n!==i&&t++,s?(s=!1,d[i].push(o)):e=!0);s&&d[n].push(o)}}t>0&&!1===e&&(m=d)}for(let e=0,t=h.length;e<t;e++){l=h[e].s,c.push(l),p=m[e];for(let e=0,t=p.length;e<t;e++)l.holes.push(p[e].h)}return c}},t.ShapeUtils=cl,t.ShortType=1011,t.Skeleton=Do,t.SkeletonHelper=class extends Yo{constructor(e){const t=bu(e),n=new Dn,r=[],i=[],a=new Ve(0,0,1),o=new Ve(0,1,0);for(let e=0;e<t.length;e++){const n=t[e];n.parent&&n.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(a.r,a.g,a.b),i.push(o.r,o.g,o.b))}n.setAttribute("position",new Sn(r,3)),n.setAttribute("color",new Sn(i,3)),super(n,new zo({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");yu.copy(this.root.matrixWorld).invert();for(let e=0,n=0;e<t.length;e++){const i=t[e];i.parent&&i.parent.isBone&&(vu.multiplyMatrices(yu,i.matrixWorld),gu.setFromMatrixPosition(vu),r.setXYZ(n,gu.x,gu.y,gu.z),vu.multiplyMatrices(yu,i.parent.matrixWorld),gu.setFromMatrixPosition(vu),r.setXYZ(n+1,gu.x,gu.y,gu.z),n+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}},t.SkinnedMesh=Co,t.SmoothShading=2,t.Source=Xe,t.Sphere=Mt,t.SphereBufferGeometry=yl,t.SphereGeometry=yl,t.Spherical=class{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(xe(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}},t.SphericalHarmonics3=Tc,t.SplineCurve=ws,t.SpotLight=yc,t.SpotLightHelper=class extends rn{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const n=new Dn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let e=0,t=1,n=32;e<n;e++,t++){const i=e/n*Math.PI*2,a=t/n*Math.PI*2;r.push(Math.cos(i),Math.sin(i),1,Math.cos(a),Math.sin(a),1)}n.setAttribute("position",new Sn(r,3));const i=new zo({fog:!1,toneMapped:!1});this.cone=new Yo(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),mu.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(mu),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},t.Sprite=vo,t.SpriteMaterial=no,t.SrcAlphaFactor=204,t.SrcAlphaSaturateFactor=210,t.SrcColorFactor=202,t.StaticCopyUsage=35046,t.StaticDrawUsage=de,t.StaticReadUsage=35045,t.StereoCamera=class{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ir,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ir,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Hc.copy(e.projectionMatrix);const n=t.eyeSep/2,r=n*t.near/t.focus,i=t.near*Math.tan(ve*t.fov*.5)/t.zoom;let a,o;Uc.elements[12]=-n,zc.elements[12]=n,a=-i*t.aspect+r,o=i*t.aspect+r,Hc.elements[0]=2*t.near/(o-a),Hc.elements[8]=(o+a)/(o-a),this.cameraL.projectionMatrix.copy(Hc),a=-i*t.aspect-r,o=i*t.aspect-r,Hc.elements[0]=2*t.near/(o-a),Hc.elements[8]=(o+a)/(o-a),this.cameraR.projectionMatrix.copy(Hc)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Uc),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(zc)}},t.StreamCopyUsage=35042,t.StreamDrawUsage=35040,t.StreamReadUsage=35041,t.StringKeyframeTrack=Ql,t.SubtractEquation=101,t.SubtractiveBlending=3,t.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},t.TangentSpaceNormalMap=0,t.TetrahedronBufferGeometry=bl,t.TetrahedronGeometry=bl,t.TextGeometry=class extends Dn{constructor(){console.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js"),super()}},t.Texture=Ze,t.TextureLoader=class extends oc{constructor(e){super(e)}load(e,t,n,r){const i=new Ze,a=new uc(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}},t.TorusBufferGeometry=xl,t.TorusGeometry=xl,t.TorusKnotBufferGeometry=_l,t.TorusKnotGeometry=_l,t.Triangle=mn,t.TriangleFanDrawMode=2,t.TriangleStripDrawMode=1,t.TrianglesDrawMode=0,t.TubeBufferGeometry=wl,t.TubeGeometry=wl,t.UVMapping=i,t.Uint16BufferAttribute=wn,t.Uint32BufferAttribute=Mn,t.Uint8BufferAttribute=class extends _n{constructor(e,t,n){super(new Uint8Array(e),t,n)}},t.Uint8ClampedBufferAttribute=class extends _n{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}},t.Uniform=lu,t.UniformsGroup=class extends pe{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:cu++}),this.name="",this.usage=de,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let e=0,n=t.length;e<n;e++)this.uniforms.push(t[e].clone());return this}clone(){return(new this.constructor).copy(this)}},t.UniformsLib=xr,t.UniformsUtils=tr,t.UnsignedByteType=b,t.UnsignedInt248Type=S,t.UnsignedIntType=_,t.UnsignedShort4444Type=1017,t.UnsignedShort5551Type=1018,t.UnsignedShortType=x,t.VSMShadowMap=3,t.Vector2=Ce,t.Vector3=tt,t.Vector4=Je,t.VectorKeyframeTrack=ec,t.VideoTexture=class extends Ze{constructor(e,t,n,r,i,a,o,s,l){super(e,t,n,r,i,a,o,s,l),this.isVideoTexture=!0,this.minFilter=void 0!==a?a:g,this.magFilter=void 0!==i?i:g,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1=="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},t.WebGL1Renderer=Za,t.WebGL3DRenderTarget=class extends $e{constructor(e,t,n){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new Qe(null,e,t,n),this.texture.isRenderTargetTexture=!0}},t.WebGLArrayRenderTarget=class extends $e{constructor(e,t,n){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new Ke(null,e,t,n),this.texture.isRenderTargetTexture=!0}},t.WebGLCubeRenderTarget=lr,t.WebGLMultipleRenderTargets=class extends $e{constructor(e,t,n,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const i=this.texture;this.texture=[];for(let e=0;e<n;e++)this.texture[e]=i.clone(),this.texture[e].isRenderTargetTexture=!0}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}},t.WebGLMultisampleRenderTarget=class extends $e{constructor(e,t,n){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(e,t,n),this.samples=4}},t.WebGLRenderTarget=$e,t.WebGLRenderer=Ya,t.WebGLUtils=za,t.WireframeGeometry=Ml,t.WrapAroundEnding=ie,t.ZeroCurvatureEnding=ne,t.ZeroFactor=200,t.ZeroSlopeEnding=re,t.ZeroStencilOp=0,t._SRGBAFormat=fe,t.sRGBEncoding=se},6111:(e,t,n)=>{"use strict";n.r(t),n.d(t,{brush:()=>z,brushSelection:()=>F,brushX:()=>N,brushY:()=>O});var r=n(2626),i=n(848),a=n(3172),o=n(3838),s=n(3109),l=n(9983);const c=e=>()=>e;function u(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function d(e){e.stopImmediatePropagation()}function h(e){e.preventDefault(),e.stopImmediatePropagation()}var f={name:"drag"},p={name:"space"},m={name:"handle"},g={name:"center"};const{abs:v,max:y,min:b}=Math;function x(e){return[+e[0],+e[1]]}function _(e){return[x(e[0]),x(e[1])]}var w={name:"x",handles:["w","e"].map(P),input:function(e,t){return null==e?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},M={name:"y",handles:["n","s"].map(P),input:function(e,t){return null==e?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},S={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(P),input:function(e){return null==e?null:_(e)},output:function(e){return e}},A={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},E={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},C={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},T={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},R={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function P(e){return{type:e}}function L(e){return!e.ctrlKey&&!e.button}function D(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function I(){return navigator.maxTouchPoints||"ontouchstart"in this}function k(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function B(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function F(e){var t=e.__brush;return t?t.dim.output(t.selection):null}function N(){return U(w)}function O(){return U(M)}function z(){return U(S)}function U(e){var t,n=D,x=L,S=I,F=!0,N=(0,r.Z)("start","brush","end"),O=6;function z(t){var n=t.property("__brush",X).selectAll(".overlay").data([P("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",A.overlay).merge(n).each((function(){var e=k(this).extent;(0,o.Z)(this).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1])})),t.selectAll(".selection").data([P("selection")]).enter().append("rect").attr("class","selection").attr("cursor",A.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=t.selectAll(".handle").data(e.handles,(function(e){return e.type}));r.exit().remove(),r.enter().append("rect").attr("class",(function(e){return"handle handle--"+e.type})).attr("cursor",(function(e){return A[e.type]})),t.each(U).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",V).filter(S).on("touchstart.brush",V).on("touchmove.brush",j).on("touchend.brush touchcancel.brush",W).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function U(){var e=(0,o.Z)(this),t=k(this).selection;t?(e.selectAll(".selection").style("display",null).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1]),e.selectAll(".handle").style("display",null).attr("x",(function(e){return"e"===e.type[e.type.length-1]?t[1][0]-O/2:t[0][0]-O/2})).attr("y",(function(e){return"s"===e.type[0]?t[1][1]-O/2:t[0][1]-O/2})).attr("width",(function(e){return"n"===e.type||"s"===e.type?t[1][0]-t[0][0]+O:O})).attr("height",(function(e){return"e"===e.type||"w"===e.type?t[1][1]-t[0][1]+O:O}))):e.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function H(e,t,n){var r=e.__brush.emitter;return!r||n&&r.clean?new G(e,t,n):r}function G(e,t,n){this.that=e,this.args=t,this.state=e.__brush,this.active=0,this.clean=n}function V(n){if((!t||n.touches)&&x.apply(this,arguments)){var r,a,c,u,_,S,P,L,D,I,N,O=this,z=n.target.__data__.type,G="selection"===(F&&n.metaKey?z="overlay":z)?f:F&&n.altKey?g:m,V=e===M?null:T[z],j=e===w?null:R[z],W=k(O),X=W.extent,q=W.selection,Y=X[0][0],Z=X[0][1],J=X[1][0],$=X[1][1],K=0,Q=0,ee=V&&j&&F&&n.shiftKey,te=Array.from(n.touches||[n],(e=>{const t=e.identifier;return(e=(0,s.Z)(e,O)).point0=e.slice(),e.identifier=t,e}));(0,l.e1)(O);var ne=H(O,arguments,!0).beforestart();if("overlay"===z){q&&(D=!0);const t=[te[0],te[1]||te[0]];W.selection=q=[[r=e===M?Y:b(t[0][0],t[1][0]),c=e===w?Z:b(t[0][1],t[1][1])],[_=e===M?J:y(t[0][0],t[1][0]),P=e===w?$:y(t[0][1],t[1][1])]],te.length>1&&se(n)}else r=q[0][0],c=q[0][1],_=q[1][0],P=q[1][1];a=r,u=c,S=_,L=P;var re=(0,o.Z)(O).attr("pointer-events","none"),ie=re.selectAll(".overlay").attr("cursor",A[z]);if(n.touches)ne.moved=oe,ne.ended=le;else{var ae=(0,o.Z)(n.view).on("mousemove.brush",oe,!0).on("mouseup.brush",le,!0);F&&ae.on("keydown.brush",ce,!0).on("keyup.brush",ue,!0),(0,i.Z)(n.view)}U.call(O),ne.start(n,G.name)}function oe(e){for(const t of e.changedTouches||[e])for(const e of te)e.identifier===t.identifier&&(e.cur=(0,s.Z)(t,O));if(ee&&!I&&!N&&1===te.length){const e=te[0];v(e.cur[0]-e[0])>v(e.cur[1]-e[1])?N=!0:I=!0}for(const e of te)e.cur&&(e[0]=e.cur[0],e[1]=e.cur[1]);D=!0,h(e),se(e)}function se(e){const t=te[0],n=t.point0;var i;switch(K=t[0]-n[0],Q=t[1]-n[1],G){case p:case f:V&&(K=y(Y-r,b(J-_,K)),a=r+K,S=_+K),j&&(Q=y(Z-c,b($-P,Q)),u=c+Q,L=P+Q);break;case m:te[1]?(V&&(a=y(Y,b(J,te[0][0])),S=y(Y,b(J,te[1][0])),V=1),j&&(u=y(Z,b($,te[0][1])),L=y(Z,b($,te[1][1])),j=1)):(V<0?(K=y(Y-r,b(J-r,K)),a=r+K,S=_):V>0&&(K=y(Y-_,b(J-_,K)),a=r,S=_+K),j<0?(Q=y(Z-c,b($-c,Q)),u=c+Q,L=P):j>0&&(Q=y(Z-P,b($-P,Q)),u=c,L=P+Q));break;case g:V&&(a=y(Y,b(J,r-K*V)),S=y(Y,b(J,_+K*V))),j&&(u=y(Z,b($,c-Q*j)),L=y(Z,b($,P+Q*j)))}S<a&&(V*=-1,i=r,r=_,_=i,i=a,a=S,S=i,z in E&&ie.attr("cursor",A[z=E[z]])),L<u&&(j*=-1,i=c,c=P,P=i,i=u,u=L,L=i,z in C&&ie.attr("cursor",A[z=C[z]])),W.selection&&(q=W.selection),I&&(a=q[0][0],S=q[1][0]),N&&(u=q[0][1],L=q[1][1]),q[0][0]===a&&q[0][1]===u&&q[1][0]===S&&q[1][1]===L||(W.selection=[[a,u],[S,L]],U.call(O),ne.brush(e,G.name))}function le(e){if(d(e),e.touches){if(e.touches.length)return;t&&clearTimeout(t),t=setTimeout((function(){t=null}),500)}else(0,i.D)(e.view,D),ae.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);re.attr("pointer-events","all"),ie.attr("cursor",A.overlay),W.selection&&(q=W.selection),B(q)&&(W.selection=null,U.call(O)),ne.end(e,G.name)}function ce(e){switch(e.keyCode){case 16:ee=V&&j;break;case 18:G===m&&(V&&(_=S-K*V,r=a+K*V),j&&(P=L-Q*j,c=u+Q*j),G=g,se(e));break;case 32:G!==m&&G!==g||(V<0?_=S-K:V>0&&(r=a-K),j<0?P=L-Q:j>0&&(c=u-Q),G=p,ie.attr("cursor",A.selection),se(e));break;default:return}h(e)}function ue(e){switch(e.keyCode){case 16:ee&&(I=N=ee=!1,se(e));break;case 18:G===g&&(V<0?_=S:V>0&&(r=a),j<0?P=L:j>0&&(c=u),G=m,se(e));break;case 32:G===p&&(e.altKey?(V&&(_=S-K*V,r=a+K*V),j&&(P=L-Q*j,c=u+Q*j),G=g):(V<0?_=S:V>0&&(r=a),j<0?P=L:j>0&&(c=u),G=m),ie.attr("cursor",A[z]),se(e));break;default:return}h(e)}}function j(e){H(this,arguments).moved(e)}function W(e){H(this,arguments).ended(e)}function X(){var t=this.__brush||{selection:null};return t.extent=_(n.apply(this,arguments)),t.dim=e,t}return z.move=function(t,n,r){t.tween?t.on("start.brush",(function(e){H(this,arguments).beforestart().start(e)})).on("interrupt.brush end.brush",(function(e){H(this,arguments).end(e)})).tween("brush",(function(){var t=this,r=t.__brush,i=H(t,arguments),o=r.selection,s=e.input("function"==typeof n?n.apply(this,arguments):n,r.extent),l=(0,a.Z)(o,s);function c(e){r.selection=1===e&&null===s?null:l(e),U.call(t),i.brush()}return null!==o&&null!==s?c:c(1)})):t.each((function(){var t=this,i=arguments,a=t.__brush,o=e.input("function"==typeof n?n.apply(t,i):n,a.extent),s=H(t,i).beforestart();(0,l.e1)(t),a.selection=null===o?null:o,U.call(t),s.start(r).brush(r).end(r)}))},z.clear=function(e,t){z.move(e,null,t)},G.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(e,t){return this.starting?(this.starting=!1,this.emit("start",e,t)):this.emit("brush",e),this},brush:function(e,t){return this.emit("brush",e,t),this},end:function(e,t){return 0==--this.active&&(delete this.state.emitter,this.emit("end",e,t)),this},emit:function(t,n,r){var i=(0,o.Z)(this.that).datum();N.call(t,this.that,new u(t,{sourceEvent:n,target:z,selection:e.output(this.state.selection),mode:r,dispatch:N}),i)}},z.extent=function(e){return arguments.length?(n="function"==typeof e?e:c(_(e)),z):n},z.filter=function(e){return arguments.length?(x="function"==typeof e?e:c(!!e),z):x},z.touchable=function(e){return arguments.length?(S="function"==typeof e?e:c(!!e),z):S},z.handleSize=function(e){return arguments.length?(O=+e,z):O},z.keyModifiers=function(e){return arguments.length?(F=!!e,z):F},z.on=function(){var e=N.on.apply(N,arguments);return e===N?z:e},z}},848:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o,D:()=>s});var r=n(3838);const i={capture:!0,passive:!1};function a(e){e.preventDefault(),e.stopImmediatePropagation()}function o(e){var t=e.document.documentElement,n=(0,r.Z)(e).on("dragstart.drag",a,i);"onselectstart"in t?n.on("selectstart.drag",a,i):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function s(e,t){var n=e.document.documentElement,o=(0,r.Z)(e).on("dragstart.drag",null);t&&(o.on("click.drag",a,i),setTimeout((function(){o.on("click.drag",null)}),0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}},9693:(e,t,n)=>{"use strict";function r(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.blob()}function i(e,t){return fetch(e,t).then(r)}function a(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.arrayBuffer()}function o(e,t){return fetch(e,t).then(a)}n.r(t),n.d(t,{blob:()=>i,buffer:()=>o,csv:()=>_,dsv:()=>x,html:()=>T,image:()=>M,json:()=>A,svg:()=>R,text:()=>y,tsv:()=>w,xml:()=>C});var s={},l={};function c(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function u(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}function d(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function h(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var r,i=[],a=e.length,o=0,c=0,u=a<=0,d=!1;function h(){if(u)return l;if(d)return d=!1,s;var t,r,i=o;if(34===e.charCodeAt(i)){for(;o++<a&&34!==e.charCodeAt(o)||34===e.charCodeAt(++o););return(t=o)>=a?u=!0:10===(r=e.charCodeAt(o++))?d=!0:13===r&&(d=!0,10===e.charCodeAt(o)&&++o),e.slice(i+1,t-1).replace(/""/g,'"')}for(;o<a;){if(10===(r=e.charCodeAt(t=o++)))d=!0;else if(13===r)d=!0,10===e.charCodeAt(o)&&++o;else if(r!==n)continue;return e.slice(i,t)}return u=!0,e.slice(i,a)}for(10===e.charCodeAt(a-1)&&--a,13===e.charCodeAt(a-1)&&--a;(r=h())!==l;){for(var f=[];r!==s&&r!==l;)f.push(r),r=h();t&&null==(f=t(f,c++))||i.push(f)}return i}function i(t,n){return t.map((function(t){return n.map((function(e){return o(t[e])})).join(e)}))}function a(t){return t.map(o).join(e)}function o(e){return null==e?"":e instanceof Date?(i=(n=e).getUTCHours(),a=n.getUTCMinutes(),o=n.getUTCSeconds(),s=n.getUTCMilliseconds(),isNaN(n)?"Invalid Date":((r=n.getUTCFullYear())<0?"-"+d(-r,6):r>9999?"+"+d(r,6):d(r,4))+"-"+d(n.getUTCMonth()+1,2)+"-"+d(n.getUTCDate(),2)+(s?"T"+d(i,2)+":"+d(a,2)+":"+d(o,2)+"."+d(s,3)+"Z":o?"T"+d(i,2)+":"+d(a,2)+":"+d(o,2)+"Z":a||i?"T"+d(i,2)+":"+d(a,2)+"Z":"")):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e;var n,r,i,a,o,s}return{parse:function(e,t){var n,i,a=r(e,(function(e,r){if(n)return n(e,r-1);i=e,n=t?function(e,t){var n=c(e);return function(r,i){return t(n(r),i,e)}}(e,t):c(e)}));return a.columns=i||[],a},parseRows:r,format:function(t,n){return null==n&&(n=u(t)),[n.map(o).join(e)].concat(i(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=u(e)),i(e,t).join("\n")},formatRows:function(e){return e.map(a).join("\n")},formatRow:a,formatValue:o}}var f=h(","),p=f.parse,m=(f.parseRows,f.format,f.formatBody,f.formatRows,f.formatRow,f.formatValue,h("\t")),g=m.parse;function v(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function y(e,t){return fetch(e,t).then(v)}function b(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),y(t,n).then((function(t){return e(t,r)}))}}function x(e,t,n,r){3===arguments.length&&"function"==typeof n&&(r=n,n=void 0);var i=h(e);return y(t,n).then((function(e){return i.parse(e,r)}))}m.parseRows,m.format,m.formatBody,m.formatRows,m.formatRow,m.formatValue;var _=b(p),w=b(g);function M(e,t){return new Promise((function(n,r){var i=new Image;for(var a in t)i[a]=t[a];i.onerror=r,i.onload=function(){n(i)},i.src=e}))}function S(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);if(204!==e.status&&205!==e.status)return e.json()}function A(e,t){return fetch(e,t).then(S)}function E(e){return(t,n)=>y(t,n).then((t=>(new DOMParser).parseFromString(t,e)))}const C=E("application/xml");var T=E("text/html"),R=E("image/svg+xml")},9244:(e,t,n)=>{"use strict";function r(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}n.r(t),n.d(t,{interpolateBlues:()=>ae,interpolateBrBG:()=>v,interpolateBuGn:()=>B,interpolateBuPu:()=>N,interpolateCividis:()=>ge,interpolateCool:()=>_e,interpolateCubehelixDefault:()=>be,interpolateGnBu:()=>z,interpolateGreens:()=>se,interpolateGreys:()=>ce,interpolateInferno:()=>De,interpolateMagma:()=>Le,interpolateOrRd:()=>H,interpolateOranges:()=>me,interpolatePRGn:()=>b,interpolatePiYG:()=>_,interpolatePlasma:()=>Ie,interpolatePuBu:()=>W,interpolatePuBuGn:()=>V,interpolatePuOr:()=>M,interpolatePuRd:()=>q,interpolatePurples:()=>de,interpolateRainbow:()=>Me,interpolateRdBu:()=>A,interpolateRdGy:()=>C,interpolateRdPu:()=>Z,interpolateRdYlBu:()=>R,interpolateRdYlGn:()=>L,interpolateReds:()=>fe,interpolateSinebow:()=>Ce,interpolateSpectral:()=>I,interpolateTurbo:()=>Te,interpolateViridis:()=>Pe,interpolateWarm:()=>xe,interpolateYlGn:()=>Q,interpolateYlGnBu:()=>$,interpolateYlOrBr:()=>te,interpolateYlOrRd:()=>re,schemeAccent:()=>a,schemeBlues:()=>ie,schemeBrBG:()=>g,schemeBuGn:()=>k,schemeBuPu:()=>F,schemeCategory10:()=>i,schemeDark2:()=>o,schemeGnBu:()=>O,schemeGreens:()=>oe,schemeGreys:()=>le,schemeOrRd:()=>U,schemeOranges:()=>pe,schemePRGn:()=>y,schemePaired:()=>s,schemePastel1:()=>l,schemePastel2:()=>c,schemePiYG:()=>x,schemePuBu:()=>j,schemePuBuGn:()=>G,schemePuOr:()=>w,schemePuRd:()=>X,schemePurples:()=>ue,schemeRdBu:()=>S,schemeRdGy:()=>E,schemeRdPu:()=>Y,schemeRdYlBu:()=>T,schemeRdYlGn:()=>P,schemeReds:()=>he,schemeSet1:()=>u,schemeSet2:()=>d,schemeSet3:()=>h,schemeSpectral:()=>D,schemeTableau10:()=>f,schemeYlGn:()=>K,schemeYlGnBu:()=>J,schemeYlOrBr:()=>ee,schemeYlOrRd:()=>ne});const i=r("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),a=r("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),o=r("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),s=r("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),l=r("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),c=r("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),u=r("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),d=r("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),h=r("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),f=r("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");var p=n(3474);const m=e=>(0,p.hD)(e[e.length-1]);var g=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(r);const v=m(g);var y=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(r);const b=m(y);var x=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(r);const _=m(x);var w=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(r);const M=m(w);var S=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(r);const A=m(S);var E=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(r);const C=m(E);var T=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(r);const R=m(T);var P=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(r);const L=m(P);var D=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(r);const I=m(D);var k=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(r);const B=m(k);var F=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(r);const N=m(F);var O=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(r);const z=m(O);var U=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(r);const H=m(U);var G=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(r);const V=m(G);var j=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(r);const W=m(j);var X=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(r);const q=m(X);var Y=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(r);const Z=m(Y);var J=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(r);const $=m(J);var K=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(r);const Q=m(K);var ee=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(r);const te=m(ee);var ne=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(r);const re=m(ne);var ie=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(r);const ae=m(ie);var oe=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(r);const se=m(oe);var le=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(r);const ce=m(le);var ue=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(r);const de=m(ue);var he=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(r);const fe=m(he);var pe=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(r);const me=m(pe);function ge(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-2710.57*e)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-67.37*e)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-2475.67*e)))))))+")"}var ve=n(3861),ye=n(8499);const be=(0,ye.B)((0,ve.Z)(300,.5,0),(0,ve.Z)(-240,.5,1));var xe=(0,ye.B)((0,ve.Z)(-100,.75,.35),(0,ve.Z)(80,1.5,.8)),_e=(0,ye.B)((0,ve.Z)(260,.75,.35),(0,ve.Z)(80,1.5,.8)),we=(0,ve.Z)();function Me(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return we.h=360*e-100,we.s=1.5-1.5*t,we.l=.8-.9*t,we+""}var Se=(0,n(6372).B8)(),Ae=Math.PI/3,Ee=2*Math.PI/3;function Ce(e){var t;return e=(.5-e)*Math.PI,Se.r=255*(t=Math.sin(e))*t,Se.g=255*(t=Math.sin(e+Ae))*t,Se.b=255*(t=Math.sin(e+Ee))*t,Se+""}function Te(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-14825.05*e)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+707.56*e)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-6838.66*e)))))))+")"}function Re(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const Pe=Re(r("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var Le=Re(r("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),De=Re(r("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Ie=Re(r("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"))},9898:(e,t,n)=>{"use strict";function r(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}n.d(t,{Z:()=>r})},4708:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(1663),i=n(1226);function a(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===i.P&&t.documentElement.namespaceURI===i.P?t.createElement(e):t.createElementNS(n,e)}}function o(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function s(e){var t=(0,r.Z)(e);return(t.local?o:a)(t)}},3905:(e,t,n)=>{"use strict";n.r(t),n.d(t,{create:()=>a,creator:()=>r.Z,local:()=>s,matcher:()=>c.Z,namespace:()=>u.Z,namespaces:()=>d.Z,pointer:()=>h.Z,pointers:()=>p,select:()=>i.Z,selectAll:()=>v,selection:()=>g.ZP,selector:()=>y.Z,selectorAll:()=>b.Z,style:()=>x.S,window:()=>_.Z});var r=n(4708),i=n(3838);function a(e){return(0,i.Z)((0,r.Z)(e).call(document.documentElement))}var o=0;function s(){return new l}function l(){this._="@"+(++o).toString(36)}l.prototype=s.prototype={constructor:l,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};var c=n(4421),u=n(1663),d=n(1226),h=n(3109),f=n(9439);function p(e,t){return e.target&&(e=(0,f.Z)(e),void 0===t&&(t=e.currentTarget),e=e.touches||[e]),Array.from(e,(e=>(0,h.Z)(e,t)))}var m=n(9898),g=n(6740);function v(e){return"string"==typeof e?new g.Y1([document.querySelectorAll(e)],[document.documentElement]):new g.Y1([(0,m.Z)(e)],g.Jz)}var y=n(3010),b=n(9701),x=n(2627),_=n(9920)},4421:(e,t,n)=>{"use strict";function r(e){return function(){return this.matches(e)}}function i(e){return function(t){return t.matches(e)}}n.d(t,{P:()=>i,Z:()=>r})},1663:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(1226);function i(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),r.Z.hasOwnProperty(t)?{space:r.Z[t],local:e}:e}},1226:(e,t,n)=>{"use strict";n.d(t,{P:()=>r,Z:()=>i});var r="http://www.w3.org/1999/xhtml";const i={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},3109:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(9439);function i(e,t){if(e=(0,r.Z)(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}},3838:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(6740);function i(e){return"string"==typeof e?new r.Y1([[document.querySelector(e)]],[document.documentElement]):new r.Y1([[e]],r.Jz)}},6740:(e,t,n)=>{"use strict";n.d(t,{Y1:()=>ae,ZP:()=>se,Jz:()=>ie});var r=n(3010),i=n(9898),a=n(9701),o=n(4421),s=Array.prototype.find;function l(){return this.firstElementChild}var c=Array.prototype.filter;function u(){return Array.from(this.children)}function d(e){return new Array(e.length)}function h(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function f(e){return function(){return e}}function p(e,t,n,r,i,a){for(var o,s=0,l=t.length,c=a.length;s<c;++s)(o=t[s])?(o.__data__=a[s],r[s]=o):n[s]=new h(e,a[s]);for(;s<l;++s)(o=t[s])&&(i[s]=o)}function m(e,t,n,r,i,a,o){var s,l,c,u=new Map,d=t.length,f=a.length,p=new Array(d);for(s=0;s<d;++s)(l=t[s])&&(p[s]=c=o.call(l,l.__data__,s,t)+"",u.has(c)?i[s]=l:u.set(c,l));for(s=0;s<f;++s)c=o.call(e,a[s],s,a)+"",(l=u.get(c))?(r[s]=l,l.__data__=a[s],u.delete(c)):n[s]=new h(e,a[s]);for(s=0;s<d;++s)(l=t[s])&&u.get(p[s])===l&&(i[s]=l)}function g(e){return e.__data__}function v(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function y(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}h.prototype={constructor:h,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var b=n(1663);function x(e){return function(){this.removeAttribute(e)}}function _(e){return function(){this.removeAttributeNS(e.space,e.local)}}function w(e,t){return function(){this.setAttribute(e,t)}}function M(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function S(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function A(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}var E=n(2627);function C(e){return function(){delete this[e]}}function T(e,t){return function(){this[e]=t}}function R(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function P(e){return e.trim().split(/^|\s+/)}function L(e){return e.classList||new D(e)}function D(e){this._node=e,this._names=P(e.getAttribute("class")||"")}function I(e,t){for(var n=L(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function k(e,t){for(var n=L(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function B(e){return function(){I(this,e)}}function F(e){return function(){k(this,e)}}function N(e,t){return function(){(t.apply(this,arguments)?I:k)(this,e)}}function O(){this.textContent=""}function z(e){return function(){this.textContent=e}}function U(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function H(){this.innerHTML=""}function G(e){return function(){this.innerHTML=e}}function V(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function j(){this.nextSibling&&this.parentNode.appendChild(this)}function W(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}D.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var X=n(4708);function q(){return null}function Y(){var e=this.parentNode;e&&e.removeChild(this)}function Z(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function J(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function $(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function K(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,a=t.length;r<a;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function Q(e,t,n){return function(){var r,i=this.__on,a=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var o=0,s=i.length;o<s;++o)if((r=i[o]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),void(r.value=t);this.addEventListener(e.type,a,n),r={type:e.type,name:e.name,value:t,listener:a,options:n},i?i.push(r):this.__on=[r]}}var ee=n(9920);function te(e,t,n){var r=(0,ee.Z)(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function ne(e,t){return function(){return te(this,e,t)}}function re(e,t){return function(){return te(this,e,t.apply(this,arguments))}}var ie=[null];function ae(e,t){this._groups=e,this._parents=t}function oe(){return new ae([[document.documentElement]],ie)}ae.prototype=oe.prototype={constructor:ae,select:function(e){"function"!=typeof e&&(e=(0,r.Z)(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var o,s,l=t[a],c=l.length,u=i[a]=new Array(c),d=0;d<c;++d)(o=l[d])&&(s=e.call(o,o.__data__,d,l))&&("__data__"in o&&(s.__data__=o.__data__),u[d]=s);return new ae(i,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){return(0,i.Z)(e.apply(this,arguments))}}(e):(0,a.Z)(e);for(var t=this._groups,n=t.length,r=[],o=[],s=0;s<n;++s)for(var l,c=t[s],u=c.length,d=0;d<u;++d)(l=c[d])&&(r.push(e.call(l,l.__data__,d,c)),o.push(l));return new ae(r,o)},selectChild:function(e){return this.select(null==e?l:function(e){return function(){return s.call(this.children,e)}}("function"==typeof e?e:(0,o.P)(e)))},selectChildren:function(e){return this.selectAll(null==e?u:function(e){return function(){return c.call(this.children,e)}}("function"==typeof e?e:(0,o.P)(e)))},filter:function(e){"function"!=typeof e&&(e=(0,o.Z)(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,s=t[i],l=s.length,c=r[i]=[],u=0;u<l;++u)(a=s[u])&&e.call(a,a.__data__,u,s)&&c.push(a);return new ae(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,g);var n=t?m:p,r=this._parents,i=this._groups;"function"!=typeof e&&(e=f(e));for(var a=i.length,o=new Array(a),s=new Array(a),l=new Array(a),c=0;c<a;++c){var u=r[c],d=i[c],h=d.length,y=v(e.call(u,u&&u.__data__,c,r)),b=y.length,x=s[c]=new Array(b),_=o[c]=new Array(b),w=l[c]=new Array(h);n(u,d,x,_,w,y,t);for(var M,S,A=0,E=0;A<b;++A)if(M=x[A]){for(A>=E&&(E=A+1);!(S=_[E])&&++E<b;);M._next=S||null}}return(o=new ae(o,r))._enter=s,o._exit=l,o},enter:function(){return new ae(this._enter||this._groups.map(d),this._parents)},exit:function(){return new ae(this._exit||this._groups.map(d),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,a=this.exit();return"function"==typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(i=t(i))&&(i=i.selection()),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,o=Math.min(i,a),s=new Array(i),l=0;l<o;++l)for(var c,u=n[l],d=r[l],h=u.length,f=s[l]=new Array(h),p=0;p<h;++p)(c=u[p]||d[p])&&(f[p]=c);for(;l<i;++l)s[l]=n[l];return new ae(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=y);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,s=n[a],l=s.length,c=i[a]=new Array(l),u=0;u<l;++u)(o=s[u])&&(c[u]=o);c.sort(t)}return new ae(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,a=t[n],o=0,s=a.length;o<s;++o)(i=a[o])&&e.call(i,i.__data__,o,a);return this},attr:function(e,t){var n=(0,b.Z)(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?_:x:"function"==typeof t?n.local?A:S:n.local?M:w)(n,t))},style:E.Z,property:function(e,t){return arguments.length>1?this.each((null==t?C:"function"==typeof t?R:T)(e,t)):this.node()[e]},classed:function(e,t){var n=P(e+"");if(arguments.length<2){for(var r=L(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?N:t?B:F)(n,t))},text:function(e){return arguments.length?this.each(null==e?O:("function"==typeof e?U:z)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?H:("function"==typeof e?V:G)(e)):this.node().innerHTML},raise:function(){return this.each(j)},lower:function(){return this.each(W)},append:function(e){var t="function"==typeof e?e:(0,X.Z)(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:(0,X.Z)(e),i=null==t?q:"function"==typeof t?t:(0,r.Z)(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(Y)},clone:function(e){return this.select(e?J:Z)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,a=$(e+""),o=a.length;if(!(arguments.length<2)){for(s=t?Q:K,r=0;r<o;++r)this.each(s(a[r],t,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(r=0,l=s[c];r<o;++r)if((i=a[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?re:ne)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,i=e[t],a=0,o=i.length;a<o;++a)(r=i[a])&&(yield r)}};const se=oe},2627:(e,t,n)=>{"use strict";n.d(t,{S:()=>l,Z:()=>s});var r=n(9920);function i(e){return function(){this.style.removeProperty(e)}}function a(e,t,n){return function(){this.style.setProperty(e,t,n)}}function o(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function s(e,t,n){return arguments.length>1?this.each((null==t?i:"function"==typeof t?o:a)(e,t,null==n?"":n)):l(this.node(),e)}function l(e,t){return e.style.getPropertyValue(t)||(0,r.Z)(e).getComputedStyle(e,null).getPropertyValue(t)}},3010:(e,t,n)=>{"use strict";function r(){}function i(e){return null==e?r:function(){return this.querySelector(e)}}n.d(t,{Z:()=>i})},9701:(e,t,n)=>{"use strict";function r(){return[]}function i(e){return null==e?r:function(){return this.querySelectorAll(e)}}n.d(t,{Z:()=>i})},9439:(e,t,n)=>{"use strict";function r(e){let t;for(;t=e.sourceEvent;)e=t;return e}n.d(t,{Z:()=>r})},9920:(e,t,n)=>{"use strict";function r(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}n.d(t,{Z:()=>r})},9983:(e,t,n)=>{"use strict";n.d(t,{e1:()=>R});var r,i,a=n(6740),o=n(2626),s=0,l=0,c=0,u=0,d=0,h=0,f="object"==typeof performance&&performance.now?performance:Date,p="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function m(){return d||(p(g),d=f.now()+h)}function g(){d=0}function v(){this._call=this._time=this._next=null}function y(e,t,n){var r=new v;return r.restart(e,t,n),r}function b(){d=(u=f.now())+h,s=l=0;try{!function(){m(),++s;for(var e,t=r;t;)(e=d-t._time)>=0&&t._call.call(void 0,e),t=t._next;--s}()}finally{s=0,function(){for(var e,t,n=r,a=1/0;n;)n._call?(a>n._time&&(a=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:r=t);i=e,_(a)}(),d=0}}function x(){var e=f.now(),t=e-u;t>1e3&&(h-=t,u=e)}function _(e){s||(l&&(l=clearTimeout(l)),e-d>24?(e<1/0&&(l=setTimeout(b,e-f.now()-h)),c&&(c=clearInterval(c))):(c||(u=f.now(),c=setInterval(x,1e3)),s=1,p(b)))}function w(e,t,n){var r=new v;return t=null==t?0:+t,r.restart((n=>{r.stop(),e(n+t)}),t,n),r}v.prototype=y.prototype={constructor:v,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?m():+n)+(null==t?0:+t),this._next||i===this||(i?i._next=this:r=this,i=this),this._call=e,this._time=n,_()},stop:function(){this._call&&(this._call=null,this._time=1/0,_())}};var M=(0,o.Z)("start","end","cancel","interrupt"),S=[];function A(e,t,n,r,i,a){var o=e.__transition;if(o){if(n in o)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function a(l){var c,u,d,h;if(1!==n.state)return s();for(c in i)if((h=i[c]).name===n.name){if(3===h.state)return w(a);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete i[c]):+c<t&&(h.state=6,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete i[c])}if(w((function(){3===n.state&&(n.state=4,n.timer.restart(o,n.delay,n.time),o(l))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(d=n.tween.length),c=0,u=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++u]=h);r.length=u+1}}function o(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=5,1),a=-1,o=r.length;++a<o;)r[a].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=y((function(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}),0,n.time)}(e,n,{name:t,index:r,group:i,on:M,tween:S,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function E(e,t){var n=T(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function C(e,t){var n=T(e,t);if(n.state>3)throw new Error("too late; already running");return n}function T(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function R(e,t){var n,r,i,a=e.__transition,o=!0;if(a){for(i in t=null==t?null:t+"",a)(n=a[i]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete a[i]):o=!1;o&&delete e.__transition}}var P,L,D,I,k=n(3626),B=180/Math.PI,F={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function N(e,t,n,r,i,a){var o,s,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*B,skewX:Math.atan(l)*B,scaleX:o,scaleY:s}}function O(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(a,o){var s=[],l=[];return a=e(a),o=e(o),function(e,r,i,a,o,s){if(e!==i||r!==a){var l=o.push("translate(",null,t,null,n);s.push({i:l-4,x:(0,k.Z)(e,i)},{i:l-2,x:(0,k.Z)(r,a)})}else(i||a)&&o.push("translate("+i+t+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,s,l),function(e,t,n,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:(0,k.Z)(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(a.rotate,o.rotate,s,l),function(e,t,n,a){e!==t?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:(0,k.Z)(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(a.skewX,o.skewX,s,l),function(e,t,n,r,a,o){if(e!==n||t!==r){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:(0,k.Z)(e,n)},{i:s-2,x:(0,k.Z)(t,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,s,l),a=o=null,function(e){for(var t,n=-1,r=l.length;++n<r;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}var z=O((function(e){return"none"===e?F:(P||(P=document.createElement("DIV"),L=document.documentElement,D=document.defaultView),P.style.transform=e,e=D.getComputedStyle(L.appendChild(P),null).getPropertyValue("transform"),L.removeChild(P),N(+(e=e.slice(7,-1).split(","))[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}),"px, ","px)","deg)"),U=O((function(e){return null==e?F:(I||(I=document.createElementNS("http://www.w3.org/2000/svg","g")),I.setAttribute("transform",e),(e=I.transform.baseVal.consolidate())?N((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):F)}),", ",")",")"),H=n(1663);function G(e,t){var n,r;return function(){var i=C(this,e),a=i.tween;if(a!==n)for(var o=0,s=(r=n=a).length;o<s;++o)if(r[o].name===t){(r=r.slice()).splice(o,1);break}i.tween=r}}function V(e,t,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var a=C(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=s;break}l===c&&i.push(s)}a.tween=i}}function j(e,t,n){var r=e._id;return e.each((function(){var e=C(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return T(e,r).value[t]}}var W=n(6372),X=n(3474),q=n(9843);function Y(e,t){var n;return("number"==typeof t?k.Z:t instanceof W.ZP?X.ZP:(n=(0,W.ZP)(t))?(t=n,X.ZP):q.Z)(e,t)}function Z(e){return function(){this.removeAttribute(e)}}function J(e){return function(){this.removeAttributeNS(e.space,e.local)}}function $(e,t,n){var r,i,a=n+"";return function(){var o=this.getAttribute(e);return o===a?null:o===r?i:i=t(r=o,n)}}function K(e,t,n){var r,i,a=n+"";return function(){var o=this.getAttributeNS(e.space,e.local);return o===a?null:o===r?i:i=t(r=o,n)}}function Q(e,t,n){var r,i,a;return function(){var o,s,l=n(this);if(null!=l)return(o=this.getAttribute(e))===(s=l+"")?null:o===r&&s===i?a:(i=s,a=t(r=o,l));this.removeAttribute(e)}}function ee(e,t,n){var r,i,a;return function(){var o,s,l=n(this);if(null!=l)return(o=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:o===r&&s===i?a:(i=s,a=t(r=o,l));this.removeAttributeNS(e.space,e.local)}}function te(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ne(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function re(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&ne(e,i)),n}return i._value=t,i}function ie(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&te(e,i)),n}return i._value=t,i}function ae(e,t){return function(){E(this,e).delay=+t.apply(this,arguments)}}function oe(e,t){return t=+t,function(){E(this,e).delay=t}}function se(e,t){return function(){C(this,e).duration=+t.apply(this,arguments)}}function le(e,t){return t=+t,function(){C(this,e).duration=t}}function ce(e,t){if("function"!=typeof t)throw new Error;return function(){C(this,e).ease=t}}var ue=n(4421);function de(e,t,n){var r,i,a=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?E:C;return function(){var o=a(this,e),s=o.on;s!==r&&(i=(r=s).copy()).on(t,n),o.on=i}}var he=n(3010),fe=n(9701),pe=a.ZP.prototype.constructor,me=n(2627);function ge(e){return function(){this.style.removeProperty(e)}}function ve(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function ye(e,t,n){var r,i;function a(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&ve(e,a,n)),r}return a._value=t,a}function be(e){return function(t){this.textContent=e.call(this,t)}}function xe(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&be(r)),t}return r._value=e,r}var _e=0;function we(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Me(){return++_e}var Se=a.ZP.prototype;we.prototype=function(e){return(0,a.ZP)().transition(e)}.prototype={constructor:we,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=(0,he.Z)(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s,l,c=r[o],u=c.length,d=a[o]=new Array(u),h=0;h<u;++h)(s=c[h])&&(l=e.call(s,s.__data__,h,c))&&("__data__"in s&&(l.__data__=s.__data__),d[h]=l,A(d[h],t,n,h,d,T(s,n)));return new we(a,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=(0,fe.Z)(e));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var l,c=r[s],u=c.length,d=0;d<u;++d)if(l=c[d]){for(var h,f=e.call(l,l.__data__,d,c),p=T(l,n),m=0,g=f.length;m<g;++m)(h=f[m])&&A(h,t,n,m,f,p);a.push(f),o.push(l)}return new we(a,o,t,n)},selectChild:Se.selectChild,selectChildren:Se.selectChildren,filter:function(e){"function"!=typeof e&&(e=(0,ue.Z)(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o=t[i],s=o.length,l=r[i]=[],c=0;c<s;++c)(a=o[c])&&e.call(a,a.__data__,c,o)&&l.push(a);return new we(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l,c=t[s],u=n[s],d=c.length,h=o[s]=new Array(d),f=0;f<d;++f)(l=c[f]||u[f])&&(h[f]=l);for(;s<r;++s)o[s]=t[s];return new we(o,this._parents,this._name,this._id)},selection:function(){return new pe(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=Me(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],l=s.length,c=0;c<l;++c)if(o=s[c]){var u=T(o,t);A(o,e,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new we(r,this._parents,e,n)},call:Se.call,nodes:Se.nodes,node:Se.node,size:Se.size,empty:Se.empty,each:Se.each,on:function(e,t){var n=this._id;return arguments.length<2?T(this.node(),n).on.on(e):this.each(de(n,e,t))},attr:function(e,t){var n=(0,H.Z)(e),r="transform"===n?U:Y;return this.attrTween(e,"function"==typeof t?(n.local?ee:Q)(n,r,j(this,"attr."+e,t)):null==t?(n.local?J:Z)(n):(n.local?K:$)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=(0,H.Z)(e);return this.tween(n,(r.local?re:ie)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?z:Y;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var a=(0,me.S)(this,e),o=(this.style.removeProperty(e),(0,me.S)(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}(e,r)).on("end.style."+e,ge(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,i,a;return function(){var o=(0,me.S)(this,e),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=(0,me.S)(this,e)),o===l?null:o===r&&l===i?a:(i=l,a=t(r=o,s))}}(e,r,j(this,"style."+e,t))).each(function(e,t){var n,r,i,a,o="style."+t,s="end."+o;return function(){var l=C(this,e),c=l.on,u=null==l.value[o]?a||(a=ge(t)):void 0;c===n&&i===u||(r=(n=c).copy()).on(s,i=u),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,a=n+"";return function(){var o=(0,me.S)(this,e);return o===a?null:o===r?i:i=t(r=o,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,ye(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(j(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,xe(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=T(this.node(),n).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===e)return r.value;return null}return this.each((null==t?G:V)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?ae:oe)(t,e)):T(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?se:le)(t,e)):T(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(ce(t,e)):T(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;C(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise((function(a,o){var s={value:o},l={value:function(){0==--i&&a()}};n.each((function(){var n=C(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t})),0===i&&a()}))},[Symbol.iterator]:Se[Symbol.iterator]};var Ae={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Ee(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}a.ZP.prototype.interrupt=function(e){return this.each((function(){R(this,e)}))},a.ZP.prototype.transition=function(e){var t,n;e instanceof we?(t=e._id,e=e._name):(t=Me(),(n=Ae).time=m(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],l=s.length,c=0;c<l;++c)(o=s[c])&&A(o,e,t,c,s,n||Ee(o,t));return new we(r,this._parents,e,t)}},1501:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ZoomTransform:()=>f,zoom:()=>S,zoomIdentity:()=>p,zoomTransform:()=>m});var r=n(2626),i=n(848),a=Math.SQRT2;function o(e){return((e=Math.exp(e))+1/e)/2}function s(e,t){var n,r,i=e[0],s=e[1],l=e[2],c=t[0],u=t[1],d=t[2],h=c-i,f=u-s,p=h*h+f*f;if(p<1e-12)r=Math.log(d/l)/a,n=function(e){return[i+e*h,s+e*f,l*Math.exp(a*e*r)]};else{var m=Math.sqrt(p),g=(d*d-l*l+4*p)/(2*l*2*m),v=(d*d-l*l-4*p)/(2*d*2*m),y=Math.log(Math.sqrt(g*g+1)-g),b=Math.log(Math.sqrt(v*v+1)-v);r=(b-y)/a,n=function(e){var t,n=e*r,c=o(y),u=l/(2*m)*(c*(t=a*n+y,((t=Math.exp(2*t))-1)/(t+1))-function(e){return((e=Math.exp(e))-1/e)/2}(y));return[i+u*h,s+u*f,l*c/o(a*n+y)]}}return n.duration=1e3*r,n}var l=n(3838),c=n(3109),u=n(9983);const d=e=>()=>e;function h(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function f(e,t,n){this.k=e,this.x=t,this.y=n}f.prototype={constructor:f,scale:function(e){return 1===e?this:new f(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new f(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var p=new f(1,0,0);function m(e){for(;!e.__zoom;)if(!(e=e.parentNode))return p;return e.__zoom}function g(e){e.stopImmediatePropagation()}function v(e){e.preventDefault(),e.stopImmediatePropagation()}function y(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function b(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function x(){return this.__zoom||p}function _(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function w(){return navigator.maxTouchPoints||"ontouchstart"in this}function M(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function S(){var e,t,n,a=y,o=b,m=M,S=_,A=w,E=[0,1/0],C=[[-1/0,-1/0],[1/0,1/0]],T=250,R=s,P=(0,r.Z)("start","zoom","end"),L=500,D=0,I=10;function k(e){e.property("__zoom",x).on("wheel.zoom",H,{passive:!1}).on("mousedown.zoom",G).on("dblclick.zoom",V).filter(A).on("touchstart.zoom",j).on("touchmove.zoom",W).on("touchend.zoom touchcancel.zoom",X).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function B(e,t){return(t=Math.max(E[0],Math.min(E[1],t)))===e.k?e:new f(t,e.x,e.y)}function F(e,t,n){var r=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return r===e.x&&i===e.y?e:new f(e.k,r,i)}function N(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function O(e,t,n,r){e.on("start.zoom",(function(){z(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){z(this,arguments).event(r).end()})).tween("zoom",(function(){var e=this,i=arguments,a=z(e,i).event(r),s=o.apply(e,i),l=null==n?N(s):"function"==typeof n?n.apply(e,i):n,c=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),u=e.__zoom,d="function"==typeof t?t.apply(e,i):t,h=R(u.invert(l).concat(c/u.k),d.invert(l).concat(c/d.k));return function(e){if(1===e)e=d;else{var t=h(e),n=c/t[2];e=new f(n,l[0]-t[0]*n,l[1]-t[1]*n)}a.zoom(null,e)}}))}function z(e,t,n){return!n&&e.__zooming||new U(e,t)}function U(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=o.apply(e,t),this.taps=0}function H(e,...t){if(a.apply(this,arguments)){var n=z(this,t).event(e),r=this.__zoom,i=Math.max(E[0],Math.min(E[1],r.k*Math.pow(2,S.apply(this,arguments)))),o=(0,c.Z)(e);if(n.wheel)n.mouse[0][0]===o[0]&&n.mouse[0][1]===o[1]||(n.mouse[1]=r.invert(n.mouse[0]=o)),clearTimeout(n.wheel);else{if(r.k===i)return;n.mouse=[o,r.invert(o)],(0,u.e1)(this),n.start()}v(e),n.wheel=setTimeout(s,150),n.zoom("mouse",m(F(B(r,i),n.mouse[0],n.mouse[1]),n.extent,C))}function s(){n.wheel=null,n.end()}}function G(e,...t){if(!n&&a.apply(this,arguments)){var r=e.currentTarget,o=z(this,t,!0).event(e),s=(0,l.Z)(e.view).on("mousemove.zoom",p,!0).on("mouseup.zoom",y,!0),d=(0,c.Z)(e,r),h=e.clientX,f=e.clientY;(0,i.Z)(e.view),g(e),o.mouse=[d,this.__zoom.invert(d)],(0,u.e1)(this),o.start()}function p(e){if(v(e),!o.moved){var t=e.clientX-h,n=e.clientY-f;o.moved=t*t+n*n>D}o.event(e).zoom("mouse",m(F(o.that.__zoom,o.mouse[0]=(0,c.Z)(e,r),o.mouse[1]),o.extent,C))}function y(e){s.on("mousemove.zoom mouseup.zoom",null),(0,i.D)(e.view,o.moved),v(e),o.event(e).end()}}function V(e,...t){if(a.apply(this,arguments)){var n=this.__zoom,r=(0,c.Z)(e.changedTouches?e.changedTouches[0]:e,this),i=n.invert(r),s=n.k*(e.shiftKey?.5:2),u=m(F(B(n,s),r,i),o.apply(this,t),C);v(e),T>0?(0,l.Z)(this).transition().duration(T).call(O,u,r,e):(0,l.Z)(this).call(k.transform,u,r,e)}}function j(n,...r){if(a.apply(this,arguments)){var i,o,s,l,d=n.touches,h=d.length,f=z(this,r,n.changedTouches.length===h).event(n);for(g(n),o=0;o<h;++o)s=d[o],l=[l=(0,c.Z)(s,this),this.__zoom.invert(l),s.identifier],f.touch0?f.touch1||f.touch0[2]===l[2]||(f.touch1=l,f.taps=0):(f.touch0=l,i=!0,f.taps=1+!!e);e&&(e=clearTimeout(e)),i&&(f.taps<2&&(t=l[0],e=setTimeout((function(){e=null}),L)),(0,u.e1)(this),f.start())}}function W(e,...t){if(this.__zooming){var n,r,i,a,o=z(this,t).event(e),s=e.changedTouches,l=s.length;for(v(e),n=0;n<l;++n)r=s[n],i=(0,c.Z)(r,this),o.touch0&&o.touch0[2]===r.identifier?o.touch0[0]=i:o.touch1&&o.touch1[2]===r.identifier&&(o.touch1[0]=i);if(r=o.that.__zoom,o.touch1){var u=o.touch0[0],d=o.touch0[1],h=o.touch1[0],f=o.touch1[1],p=(p=h[0]-u[0])*p+(p=h[1]-u[1])*p,g=(g=f[0]-d[0])*g+(g=f[1]-d[1])*g;r=B(r,Math.sqrt(p/g)),i=[(u[0]+h[0])/2,(u[1]+h[1])/2],a=[(d[0]+f[0])/2,(d[1]+f[1])/2]}else{if(!o.touch0)return;i=o.touch0[0],a=o.touch0[1]}o.zoom("touch",m(F(r,i,a),o.extent,C))}}function X(e,...r){if(this.__zooming){var i,a,o=z(this,r).event(e),s=e.changedTouches,u=s.length;for(g(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),L),i=0;i<u;++i)a=s[i],o.touch0&&o.touch0[2]===a.identifier?delete o.touch0:o.touch1&&o.touch1[2]===a.identifier&&delete o.touch1;if(o.touch1&&!o.touch0&&(o.touch0=o.touch1,delete o.touch1),o.touch0)o.touch0[1]=this.__zoom.invert(o.touch0[0]);else if(o.end(),2===o.taps&&(a=(0,c.Z)(a,this),Math.hypot(t[0]-a[0],t[1]-a[1])<I)){var d=(0,l.Z)(this).on("dblclick.zoom");d&&d.apply(this,arguments)}}}return k.transform=function(e,t,n,r){var i=e.selection?e.selection():e;i.property("__zoom",x),e!==i?O(e,t,n,r):i.interrupt().each((function(){z(this,arguments).event(r).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},k.scaleBy=function(e,t,n,r){k.scaleTo(e,(function(){var e=this.__zoom.k,n="function"==typeof t?t.apply(this,arguments):t;return e*n}),n,r)},k.scaleTo=function(e,t,n,r){k.transform(e,(function(){var e=o.apply(this,arguments),r=this.__zoom,i=null==n?N(e):"function"==typeof n?n.apply(this,arguments):n,a=r.invert(i),s="function"==typeof t?t.apply(this,arguments):t;return m(F(B(r,s),i,a),e,C)}),n,r)},k.translateBy=function(e,t,n,r){k.transform(e,(function(){return m(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),o.apply(this,arguments),C)}),null,r)},k.translateTo=function(e,t,n,r,i){k.transform(e,(function(){var e=o.apply(this,arguments),i=this.__zoom,a=null==r?N(e):"function"==typeof r?r.apply(this,arguments):r;return m(p.translate(a[0],a[1]).scale(i.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,C)}),r,i)},U.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=(0,l.Z)(this.that).datum();P.call(e,this.that,new h(e,{sourceEvent:this.sourceEvent,target:k,type:e,transform:this.that.__zoom,dispatch:P}),t)}},k.wheelDelta=function(e){return arguments.length?(S="function"==typeof e?e:d(+e),k):S},k.filter=function(e){return arguments.length?(a="function"==typeof e?e:d(!!e),k):a},k.touchable=function(e){return arguments.length?(A="function"==typeof e?e:d(!!e),k):A},k.extent=function(e){return arguments.length?(o="function"==typeof e?e:d([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),k):o},k.scaleExtent=function(e){return arguments.length?(E[0]=+e[0],E[1]=+e[1],k):[E[0],E[1]]},k.translateExtent=function(e){return arguments.length?(C[0][0]=+e[0][0],C[1][0]=+e[1][0],C[0][1]=+e[0][1],C[1][1]=+e[1][1],k):[[C[0][0],C[0][1]],[C[1][0],C[1][1]]]},k.constrain=function(e){return arguments.length?(m=e,k):m},k.duration=function(e){return arguments.length?(T=+e,k):T},k.interpolate=function(e){return arguments.length?(R=e,k):R},k.on=function(){var e=P.on.apply(P,arguments);return e===P?k:e},k.clickDistance=function(e){return arguments.length?(D=(e=+e)*e,k):Math.sqrt(D)},k.tapDistance=function(e){return arguments.length?(I=+e,k):I},k}m.prototype=f.prototype}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var a=r[e]={id:e,loaded:!1,exports:{}};return n[e].call(a.exports,a,a.exports,i),a.loaded=!0,a.exports}i.m=n,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var a=Object.create(null);i.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>o[e]=()=>n[e]));return o.default=()=>n,i.d(a,o),a},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),i.b=document.baseURI||self.location.href,i.nc=void 0,(()=>{"use strict";var e={};i.r(e),i.d(e,{ACESFilmicToneMapping:()=>fw,AddEquation:()=>F_,AddOperation:()=>lw,AdditiveAnimationBlendMode:()=>zM,AdditiveBlending:()=>D_,AlphaFormat:()=>Ww,AlwaysDepth:()=>Q_,AlwaysStencilFunc:()=>fS,AmbientLight:()=>ek,AmbientLightProbe:()=>vk,AnimationClip:()=>SI,AnimationLoader:()=>II,AnimationMixer:()=>Xk,AnimationObjectGroup:()=>Vk,AnimationUtils:()=>dI,ArcCurve:()=>RL,ArrayCamera:()=>sP,ArrowHelper:()=>NB,Audio:()=>Rk,AudioAnalyser:()=>Bk,AudioContext:()=>pk,AudioListener:()=>Tk,AudioLoader:()=>mk,AxesHelper:()=>OB,BackSide:()=>E_,BasicDepthPacking:()=>WM,BasicShadowMap:()=>__,Bone:()=>YP,BooleanKeyframeTrack:()=>vI,Box2:()=>iB,Box3:()=>bA,Box3Helper:()=>DB,BoxBufferGeometry:()=>bC,BoxGeometry:()=>bC,BoxHelper:()=>LB,BufferAttribute:()=>BE,BufferGeometry:()=>QE,BufferGeometryLoader:()=>sk,ByteType:()=>Bw,Cache:()=>EI,Camera:()=>SC,CameraHelper:()=>TB,CanvasTexture:()=>EL,CapsuleBufferGeometry:()=>JL,CapsuleGeometry:()=>JL,CatmullRomCurve3:()=>BL,CineonToneMapping:()=>hw,CircleBufferGeometry:()=>$L,CircleGeometry:()=>$L,ClampToEdgeWrapping:()=>ww,Clock:()=>wk,Color:()=>tA,ColorKeyframeTrack:()=>yI,ColorManagement:()=>YS,CompressedTexture:()=>AL,CompressedTextureLoader:()=>kI,ConeBufferGeometry:()=>QL,ConeGeometry:()=>QL,CubeCamera:()=>CC,CubeReflectionMapping:()=>gw,CubeRefractionMapping:()=>vw,CubeTexture:()=>TC,CubeTextureLoader:()=>FI,CubeUVReflectionMapping:()=>xw,CubicBezierCurve:()=>zL,CubicBezierCurve3:()=>UL,CubicInterpolant:()=>fI,CullFaceBack:()=>y_,CullFaceFront:()=>b_,CullFaceFrontBack:()=>x_,CullFaceNone:()=>v_,Curve:()=>CL,CurvePath:()=>qL,CustomBlending:()=>B_,CustomToneMapping:()=>pw,CylinderBufferGeometry:()=>KL,CylinderGeometry:()=>KL,Cylindrical:()=>nB,Data3DTexture:()=>hA,DataArrayTexture:()=>uA,DataTexture:()=>ZP,DataTexture2DArray:()=>ZB,DataTexture3D:()=>JB,DataTextureLoader:()=>NI,DataUtils:()=>GB,DecrementStencilOp:()=>nS,DecrementWrapStencilOp:()=>iS,DefaultLoadingManager:()=>TI,DepthFormat:()=>Jw,DepthStencilFormat:()=>$w,DepthTexture:()=>dP,DirectionalLight:()=>QI,DirectionalLightHelper:()=>AB,DiscreteInterpolant:()=>mI,DodecahedronBufferGeometry:()=>tD,DodecahedronGeometry:()=>tD,DoubleSide:()=>C_,DstAlphaFactor:()=>q_,DstColorFactor:()=>Z_,DynamicCopyUsage:()=>_S,DynamicDrawUsage:()=>mS,DynamicReadUsage:()=>yS,EdgesGeometry:()=>oD,EllipseCurve:()=>TL,EqualDepth:()=>nw,EqualStencilFunc:()=>lS,EquirectangularReflectionMapping:()=>yw,EquirectangularRefractionMapping:()=>bw,Euler:()=>rE,EventDispatcher:()=>ES,ExtrudeBufferGeometry:()=>BD,ExtrudeGeometry:()=>BD,FileLoader:()=>DI,FlatShading:()=>T_,Float16BufferAttribute:()=>VE,Float32BufferAttribute:()=>jE,Float64BufferAttribute:()=>WE,FloatType:()=>Uw,Fog:()=>yP,FogExp2:()=>vP,Font:()=>XB,FontLoader:()=>WB,FramebufferTexture:()=>SL,FrontSide:()=>A_,Frustum:()=>FC,GLBufferAttribute:()=>$k,GLSL1:()=>MS,GLSL3:()=>SS,GreaterDepth:()=>iw,GreaterEqualDepth:()=>rw,GreaterEqualStencilFunc:()=>hS,GreaterStencilFunc:()=>uS,GridHelper:()=>xB,Group:()=>lP,HalfFloatType:()=>Hw,HemisphereLight:()=>UI,HemisphereLightHelper:()=>bB,HemisphereLightProbe:()=>gk,IcosahedronBufferGeometry:()=>ND,IcosahedronGeometry:()=>ND,ImageBitmapLoader:()=>hk,ImageLoader:()=>BI,ImageUtils:()=>rA,ImmediateRenderObject:()=>qB,IncrementStencilOp:()=>tS,IncrementWrapStencilOp:()=>rS,InstancedBufferAttribute:()=>QP,InstancedBufferGeometry:()=>ok,InstancedInterleavedBuffer:()=>Jk,InstancedMesh:()=>iL,Int16BufferAttribute:()=>zE,Int32BufferAttribute:()=>HE,Int8BufferAttribute:()=>FE,IntType:()=>Ow,InterleavedBuffer:()=>xP,InterleavedBufferAttribute:()=>wP,Interpolant:()=>hI,InterpolateDiscrete:()=>DM,InterpolateLinear:()=>IM,InterpolateSmooth:()=>kM,InvertStencilOp:()=>aS,KeepStencilOp:()=>QM,KeyframeTrack:()=>gI,LOD:()=>HP,LatheBufferGeometry:()=>ZL,LatheGeometry:()=>ZL,Layers:()=>iE,LessDepth:()=>ew,LessEqualDepth:()=>tw,LessEqualStencilFunc:()=>cS,LessStencilFunc:()=>sS,Light:()=>zI,LightProbe:()=>rk,Line:()=>dL,Line3:()=>sB,LineBasicMaterial:()=>aL,LineCurve:()=>HL,LineCurve3:()=>GL,LineDashedMaterial:()=>iI,LineLoop:()=>mL,LineSegments:()=>pL,LinearEncoding:()=>VM,LinearFilter:()=>Rw,LinearInterpolant:()=>pI,LinearMipMapLinearFilter:()=>Iw,LinearMipMapNearestFilter:()=>Lw,LinearMipmapLinearFilter:()=>Dw,LinearMipmapNearestFilter:()=>Pw,LinearSRGBColorSpace:()=>$M,LinearToneMapping:()=>uw,Loader:()=>RI,LoaderUtils:()=>ak,LoadingManager:()=>CI,LoopOnce:()=>RM,LoopPingPong:()=>LM,LoopRepeat:()=>PM,LuminanceAlphaFormat:()=>Zw,LuminanceFormat:()=>Yw,MOUSE:()=>m_,Material:()=>LE,MaterialLoader:()=>ik,MathUtils:()=>OS,Matrix3:()=>US,Matrix4:()=>qA,MaxEquation:()=>U_,Mesh:()=>vC,MeshBasicMaterial:()=>DE,MeshDepthMaterial:()=>tP,MeshDistanceMaterial:()=>nP,MeshLambertMaterial:()=>nI,MeshMatcapMaterial:()=>rI,MeshNormalMaterial:()=>tI,MeshPhongMaterial:()=>QD,MeshPhysicalMaterial:()=>KD,MeshStandardMaterial:()=>$D,MeshToonMaterial:()=>eI,MinEquation:()=>z_,MirroredRepeatWrapping:()=>Mw,MixOperation:()=>sw,MultiplyBlending:()=>k_,MultiplyOperation:()=>ow,NearestFilter:()=>Sw,NearestMipMapLinearFilter:()=>Tw,NearestMipMapNearestFilter:()=>Ew,NearestMipmapLinearFilter:()=>Cw,NearestMipmapNearestFilter:()=>Aw,NeverDepth:()=>K_,NeverStencilFunc:()=>oS,NoBlending:()=>P_,NoColorSpace:()=>ZM,NoToneMapping:()=>cw,NormalAnimationBlendMode:()=>OM,NormalBlending:()=>L_,NotEqualDepth:()=>aw,NotEqualStencilFunc:()=>dS,NumberKeyframeTrack:()=>bI,Object3D:()=>yE,ObjectLoader:()=>lk,ObjectSpaceNormalMap:()=>YM,OctahedronBufferGeometry:()=>OD,OctahedronGeometry:()=>OD,OneFactor:()=>G_,OneMinusDstAlphaFactor:()=>Y_,OneMinusDstColorFactor:()=>J_,OneMinusSrcAlphaFactor:()=>X_,OneMinusSrcColorFactor:()=>j_,OrthographicCamera:()=>ZC,PCFShadowMap:()=>w_,PCFSoftShadowMap:()=>M_,PMREMGenerator:()=>rT,ParametricGeometry:()=>VB,Path:()=>YL,PerspectiveCamera:()=>AC,Plane:()=>IC,PlaneBufferGeometry:()=>zC,PlaneGeometry:()=>zC,PlaneHelper:()=>IB,PointLight:()=>$I,PointLightHelper:()=>mB,Points:()=>_L,PointsMaterial:()=>gL,PolarGridHelper:()=>_B,PolyhedronBufferGeometry:()=>eD,PolyhedronGeometry:()=>eD,PositionalAudio:()=>kk,PropertyBinding:()=>Gk,PropertyMixer:()=>Fk,QuadraticBezierCurve:()=>VL,QuadraticBezierCurve3:()=>jL,Quaternion:()=>mA,QuaternionKeyframeTrack:()=>_I,QuaternionLinearInterpolant:()=>xI,REVISION:()=>p_,RGBADepthPacking:()=>XM,RGBAFormat:()=>qw,RGBAIntegerFormat:()=>nM,RGBA_ASTC_10x10_Format:()=>AM,RGBA_ASTC_10x5_Format:()=>wM,RGBA_ASTC_10x6_Format:()=>MM,RGBA_ASTC_10x8_Format:()=>SM,RGBA_ASTC_12x10_Format:()=>EM,RGBA_ASTC_12x12_Format:()=>CM,RGBA_ASTC_4x4_Format:()=>pM,RGBA_ASTC_5x4_Format:()=>mM,RGBA_ASTC_5x5_Format:()=>gM,RGBA_ASTC_6x5_Format:()=>vM,RGBA_ASTC_6x6_Format:()=>yM,RGBA_ASTC_8x5_Format:()=>bM,RGBA_ASTC_8x6_Format:()=>xM,RGBA_ASTC_8x8_Format:()=>_M,RGBA_BPTC_Format:()=>TM,RGBA_ETC2_EAC_Format:()=>fM,RGBA_PVRTC_2BPPV1_Format:()=>uM,RGBA_PVRTC_4BPPV1_Format:()=>cM,RGBA_S3TC_DXT1_Format:()=>iM,RGBA_S3TC_DXT3_Format:()=>aM,RGBA_S3TC_DXT5_Format:()=>oM,RGBFormat:()=>Xw,RGB_ETC1_Format:()=>dM,RGB_ETC2_Format:()=>hM,RGB_PVRTC_2BPPV1_Format:()=>lM,RGB_PVRTC_4BPPV1_Format:()=>sM,RGB_S3TC_DXT1_Format:()=>rM,RGFormat:()=>eM,RGIntegerFormat:()=>tM,RawShaderMaterial:()=>JD,Ray:()=>XA,Raycaster:()=>Kk,RectAreaLight:()=>tk,RedFormat:()=>Kw,RedIntegerFormat:()=>Qw,ReinhardToneMapping:()=>dw,RepeatWrapping:()=>_w,ReplaceStencilOp:()=>eS,ReverseSubtractEquation:()=>O_,RingBufferGeometry:()=>zD,RingGeometry:()=>zD,SRGBColorSpace:()=>JM,Scene:()=>bP,ShaderChunk:()=>UC,ShaderLib:()=>GC,ShaderMaterial:()=>MC,ShadowMaterial:()=>ZD,Shape:()=>sD,ShapeBufferGeometry:()=>UD,ShapeGeometry:()=>UD,ShapePath:()=>zB,ShapeUtils:()=>DD,ShortType:()=>Fw,Skeleton:()=>KP,SkeletonHelper:()=>fB,SkinnedMesh:()=>qP,SmoothShading:()=>R_,Source:()=>iA,Sphere:()=>OA,SphereBufferGeometry:()=>HD,SphereGeometry:()=>HD,Spherical:()=>tB,SphericalHarmonics3:()=>nk,SplineCurve:()=>WL,SpotLight:()=>XI,SpotLightHelper:()=>cB,Sprite:()=>NP,SpriteMaterial:()=>MP,SrcAlphaFactor:()=>W_,SrcAlphaSaturateFactor:()=>$_,SrcColorFactor:()=>V_,StaticCopyUsage:()=>xS,StaticDrawUsage:()=>pS,StaticReadUsage:()=>vS,StereoCamera:()=>_k,StreamCopyUsage:()=>wS,StreamDrawUsage:()=>gS,StreamReadUsage:()=>bS,StringKeyframeTrack:()=>wI,SubtractEquation:()=>N_,SubtractiveBlending:()=>I_,TOUCH:()=>g_,TangentSpaceNormalMap:()=>qM,TetrahedronBufferGeometry:()=>GD,TetrahedronGeometry:()=>GD,TextGeometry:()=>jB,Texture:()=>sA,TextureLoader:()=>OI,TorusBufferGeometry:()=>VD,TorusGeometry:()=>VD,TorusKnotBufferGeometry:()=>jD,TorusKnotGeometry:()=>jD,Triangle:()=>RE,TriangleFanDrawMode:()=>GM,TriangleStripDrawMode:()=>HM,TrianglesDrawMode:()=>UM,TubeBufferGeometry:()=>WD,TubeGeometry:()=>WD,UVMapping:()=>mw,Uint16BufferAttribute:()=>UE,Uint32BufferAttribute:()=>GE,Uint8BufferAttribute:()=>NE,Uint8ClampedBufferAttribute:()=>OE,Uniform:()=>qk,UniformsGroup:()=>Zk,UniformsLib:()=>HC,UniformsUtils:()=>wC,UnsignedByteType:()=>kw,UnsignedInt248Type:()=>jw,UnsignedIntType:()=>zw,UnsignedShort4444Type:()=>Gw,UnsignedShort5551Type:()=>Vw,UnsignedShortType:()=>Nw,VSMShadowMap:()=>S_,Vector2:()=>zS,Vector3:()=>gA,Vector4:()=>lA,VectorKeyframeTrack:()=>MI,VideoTexture:()=>ML,WebGL1Renderer:()=>gP,WebGL3DRenderTarget:()=>fA,WebGLArrayRenderTarget:()=>dA,WebGLCubeRenderTarget:()=>RC,WebGLMultipleRenderTargets:()=>pA,WebGLMultisampleRenderTarget:()=>YB,WebGLRenderTarget:()=>cA,WebGLRenderer:()=>mP,WebGLUtils:()=>oP,WireframeGeometry:()=>XD,WrapAroundEnding:()=>NM,ZeroCurvatureEnding:()=>BM,ZeroFactor:()=>H_,ZeroSlopeEnding:()=>FM,ZeroStencilOp:()=>KM,_SRGBAFormat:()=>AS,sRGBEncoding:()=>jM});var t=i(7294),n=i.t(t,2),r=i(8554),a=i.n(r),o=1/60*1e3,s="undefined"!=typeof performance?function(){return performance.now()}:function(){return Date.now()},l="undefined"!=typeof window?function(e){return window.requestAnimationFrame(e)}:function(e){return setTimeout((function(){return e(s())}),o)},c=!0,u=!1,d=!1,h={delta:0,timestamp:0},f=["read","update","preRender","render","postRender"],p=f.reduce((function(e,t){return e[t]=function(e){var t=[],n=[],r=0,i=!1,a=new WeakSet,o={schedule:function(e,o,s){void 0===o&&(o=!1),void 0===s&&(s=!1);var l=s&&i,c=l?t:n;return o&&a.add(e),-1===c.indexOf(e)&&(c.push(e),l&&i&&(r=t.length)),e},cancel:function(e){var t=n.indexOf(e);-1!==t&&n.splice(t,1),a.delete(e)},process:function(s){var l;if(i=!0,t=(l=[n,t])[0],(n=l[1]).length=0,r=t.length)for(var c=0;c<r;c++){var u=t[c];u(s),a.has(u)&&(o.schedule(u),e())}i=!1}};return o}((function(){return u=!0})),e}),{}),m=f.reduce((function(e,t){var n=p[t];return e[t]=function(e,t,r){return void 0===t&&(t=!1),void 0===r&&(r=!1),u||b(),n.schedule(e,t,r)},e}),{}),g=f.reduce((function(e,t){return e[t]=p[t].cancel,e}),{}),v=function(e){return p[e].process(h)},y=function(e){u=!1,h.delta=c?o:Math.max(Math.min(e-h.timestamp,40),1),h.timestamp=e,d=!0,f.forEach(v),d=!1,u&&(c=!1,l(y))},b=function(){u=!0,c=!0,d||l(y)},x=function(){return h};const _=m;function w(e){const t=null==e?0:e.length;return t?e[t-1]:void 0}function M(e,t){return[...e,t]}function S(e){return"number"==typeof e}function A(e){return Array.isArray(e)}function E(e){return"function"==typeof e}function C(e){return void 0===e||void 0===e}function T(e){const t=typeof e;return null!=e&&("object"===t||"function"===t)&&!A(e)}function R(e){return T(e)&&0===Object.keys(e).length}function P(e){return null==e}function L(e){return"[object String]"===Object.prototype.toString.call(e)}function D(e){return/^var\(--.+\)$/.test(e)}function I(e){return e&&T(e)&&T(e.target)}function k(e,t){const n={};return Object.keys(e).forEach((r=>{t.includes(r)||(n[r]=e[r])})),n}function B(e,t){const n={},r={};return Object.keys(e).forEach((i=>{t.includes(i)?n[i]=e[i]:r[i]=e[i]})),[n,r]}var F=(e=>{const t=new WeakMap;return(n,r,i,a)=>{if(void 0===n)return e(n,r,i);t.has(n)||t.set(n,new Map);const o=t.get(n);if(o.has(r))return o.get(r);const s=e(n,r,i,a);return o.set(r,s),s}})((function(e,t,n,r){const i="string"==typeof t?t.split("."):[t];for(r=0;r<i.length&&e;r+=1)e=e[i[r]];return void 0===e?n:e}));function N(e,t){const n={};return Object.keys(e).forEach((r=>{const i=e[r];t(i,r,e)&&(n[r]=i)})),n}var O=e=>N(e,(e=>null!=e)),z=e=>Object.keys(e),U=e=>e.reduce(((e,[t,n])=>(e[t]=n,e)),{});function H(e){if(null==e)return e;const{unitless:t}=function(e){const t=parseFloat(e.toString()),n=e.toString().replace(String(t),"");return{unitless:!n,value:t,unit:n}}(e);return t||S(e)?`${e}px`:e}var G=(e,t)=>parseInt(e[1],10)>parseInt(t[1],10)?1:-1,V=e=>U(Object.entries(e).sort(G));function j(e){const t=V(e);return Object.assign(Object.values(t),t)}function W(e){if(!e)return e;const t=(e=H(e)??e).endsWith("px")?-1:-.0625;return S(e)?`${e+t}`:e.replace(/(\d+\.?\d*)/u,(e=>`${parseFloat(e)+t}`))}function X(e,t){const n=["@media screen"];return e&&n.push("and",`(min-width: ${H(e)})`),t&&n.push("and",`(max-width: ${H(t)})`),n.join(" ")}function q(e){if(!e)return null;e.base=e.base??"0px";const t=j(e),n=Object.entries(e).sort(G).map((([e,t],n,r)=>{let[,i]=r[n+1]??[];return i=parseFloat(i)>0?W(i):void 0,{_minW:W(t),breakpoint:e,minW:t,maxW:i,maxWQuery:X(null,i),minWQuery:X(t),minMaxQuery:X(t,i)}})),r=function(e){const t=Object.keys(V(e));return new Set(t)}(e),i=Array.from(r.values());return{keys:r,normalized:t,isResponsive(e){const t=Object.keys(e);return t.length>0&&t.every((e=>r.has(e)))},asObject:V(e),asArray:j(e),details:n,media:[null,...t.map((e=>X(e))).slice(1)],toArrayValue(e){if(!T(e))throw new Error("toArrayValue: value must be an object");const t=i.map((t=>e[t]??null));for(;null===w(t);)t.pop();return t},toObjectValue(e){if(!Array.isArray(e))throw new Error("toObjectValue: value must be an array");return e.reduce(((e,t,n)=>{const r=i[n];return null!=r&&null!=t&&(e[r]=t),e}),{})}}}function Y(e){return null!=e&&"object"==typeof e&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE}function Z(e){return!!Y(e)&&e instanceof(e.ownerDocument.defaultView??window).HTMLElement}function J(e){var t;return Y(e)?(null==(t=$(e))?void 0:t.defaultView)??window:window}function $(e){return Y(e)?e.ownerDocument??document:document}function K(e){return e.view??window}var Q=!("undefined"==typeof window||!window.document||!window.document.createElement),ee=e=>e?"":void 0,te=e=>!!e||void 0,ne=(...e)=>e.filter(Boolean).join(" ");function re(e){const t=$(e);return null==t?void 0:t.activeElement}function ie(e,t){return!!e&&(e===t||e.contains(t))}function ae(e){const{key:t,keyCode:n}=e;return n>=37&&n<=40&&0!==t.indexOf("Arrow")?`Arrow${t}`:t}function oe(e){return 0!==e.button}var se=e=>e.hasAttribute("tabindex");function le(e){return(Z(e)?$(e):document).activeElement===e}function ce(e){return!(!e.parentElement||!ce(e.parentElement))||e.hidden}function ue(e){if(!Z(e)||ce(e)||function(e){return!0===Boolean(e.getAttribute("disabled"))||!0===Boolean(e.getAttribute("aria-disabled"))}(e))return!1;const{localName:t}=e;if(["input","select","textarea","button"].indexOf(t)>=0)return!0;const n={a:()=>e.hasAttribute("href"),audio:()=>e.hasAttribute("controls"),video:()=>e.hasAttribute("controls")};return t in n?n[t]():!!function(e){const t=e.getAttribute("contenteditable");return"false"!==t&&null!=t}(e)||se(e)}var de=["input:not([disabled])","select:not([disabled])","textarea:not([disabled])","embed","iframe","object","a[href]","area[href]","button:not([disabled])","[tabindex]","audio[controls]","video[controls]","*[tabindex]:not([aria-disabled])","*[contenteditable]"].join();function he(e,...t){return E(e)?e(...t):e}function fe(...e){return function(t){e.some((e=>(null==e||e(t),null==t?void 0:t.defaultPrevented)))}}function pe(...e){return function(t){e.forEach((e=>{null==e||e(t)}))}}function me(e){let t;return function(...n){return e&&(t=e.apply(this,n),e=null),t}}var ge=()=>{},ve=me((e=>()=>{const{condition:t,message:n}=e})),ye=(me((e=>()=>{const{condition:t,message:n}=e})),(...e)=>t=>e.reduce(((e,t)=>t(e)),t)),be=(e,t)=>Math.abs(e-t),xe=e=>"x"in e&&"y"in e;function _e(e,t={}){const{isActive:n=le,nextTick:r,preventScroll:i=!0,selectTextIfInput:a=!0}=t;if(!e||n(e))return-1;function o(){if(e){if(function(){if(null==we){we=!1;try{document.createElement("div").focus({get preventScroll(){return we=!0,!0}})}catch(e){}}return we}())e.focus({preventScroll:i});else if(e.focus(),i){const t=function(e){const t=$(e),n=t.defaultView??window;let r=e.parentNode;const i=[],a=t.scrollingElement||t.documentElement;for(;r instanceof n.HTMLElement&&r!==a;)(r.offsetHeight<r.scrollHeight||r.offsetWidth<r.scrollWidth)&&i.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),r=r.parentNode;return a instanceof n.HTMLElement&&i.push({element:a,scrollTop:a.scrollTop,scrollLeft:a.scrollLeft}),i}(e);!function(e){for(const{element:t,scrollTop:n,scrollLeft:r}of e)t.scrollTop=n,t.scrollLeft=r}(t)}if(a)if(function(e){return Z(e)&&"input"===e.localName&&"select"in e}(e))e.select();else if("setSelectionRange"in e){const t=e;t.setSelectionRange(t.value.length,t.value.length)}}else ve({condition:!0,message:"[chakra-ui]: can't call focus() on `null` or `undefined` element"})}return r?requestAnimationFrame(o):(o(),-1)}var we=null;function Me(e,t=1/0){return(T(e)||Array.isArray(e))&&t?Object.entries(e).reduce(((e,[n,r])=>(T(r)||A(r)?Object.entries(Me(r,t-1)).forEach((([t,r])=>{e[`${n}.${t}`]=r})):e[n]=r,e)),{}):e}function Se(e){const{hasBeenSelected:t,isLazy:n,isSelected:r,lazyBehavior:i="unmount"}=e;return!n||!!r||!("keepMounted"!==i||!t)}var Ae=Number.MIN_SAFE_INTEGER||-9007199254740991,Ee=Number.MAX_SAFE_INTEGER||9007199254740991;function Ce(e,t){let n=function(e){const t=parseFloat(e);return function(e){return"number"!=typeof e||Number.isNaN(e)||!Number.isFinite(e)}(t)?0:t}(e);const r=10**(t??10);return n=Math.round(n*r)/r,t?n.toFixed(t):n.toString()}function Te(e){if(!Number.isFinite(e))return 0;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n+=1;return n}function Re(e,t,n){return 100*(e-t)/(n-t)}function Pe(e,t,n){return(n-t)*e+t}function Le(e,t,n){return Ce(Math.round((e-t)/n)*n+t,Te(n))}function De(e,t,n){return null==e?e:(ve({condition:n<t,message:"clamp: max cannot be less than min"}),Math.min(Math.max(e,t),n))}function Ie(e){return!!e.touches}var ke={pageX:0,pageY:0};function Be(e,t="page"){const n=e.touches[0]||e.changedTouches[0]||ke;return{x:n[`${t}X`],y:n[`${t}Y`]}}function Fe(e,t="page"){return{x:e[`${t}X`],y:e[`${t}Y`]}}function Ne(e,t="page"){return{point:Ie(e)?Be(e,t):Fe(e,t)}}var Oe=(e,t=!1)=>{const n=t=>e(t,Ne(t));return t?(r=n,e=>{const t=e instanceof K(e).MouseEvent;(!t||t&&0===e.button)&&r(e)}):n;var r},ze={pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointercancel:"mousecancel",pointerover:"mouseover",pointerout:"mouseout",pointerenter:"mouseenter",pointerleave:"mouseleave"},Ue={pointerdown:"touchstart",pointermove:"touchmove",pointerup:"touchend",pointercancel:"touchcancel"};function He(e){return Q&&null===window.onpointerdown?e:Q&&null===window.ontouchstart?Ue[e]:Q&&null===window.onmousedown?ze[e]:e}function Ge(e,t,n,r){return function(e,t,n,r){return e.addEventListener(t,n,r),()=>{e.removeEventListener(t,n,r)}}(e,He(t),Oe(n,"pointerdown"===t),r)}function Ve(e,t){return{x:e.x-t.x,y:e.y-t.y}}function je(e){return e[0]}function We(e){return e[e.length-1]}function Xe(e,t){return{point:e.point,delta:Ve(e.point,We(t)),offset:Ve(e.point,je(t)),velocity:qe(t,.1)}}function qe(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=function(e){return e[e.length-1]}(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>(a=t,1e3*a)));)n--;var a;if(!r)return{x:0,y:0};const o=(i.timestamp-r.timestamp)/1e3;if(0===o)return{x:0,y:0};const s={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function Ye(e,t){return A(e)?e.map((e=>null===e?null:t(e))):T(e)?z(e).reduce(((n,r)=>(n[r]=t(e[r]),n)),{}):null!=e?t(e):null}Object.freeze(["base","sm","md","lg","xl","2xl"]),i(640);var Ze=function(e){var t=e.top,n=e.right,r=e.bottom,i=e.left;return{top:t,right:n,bottom:r,left:i,width:n-i,height:r-t,x:i,y:t,center:{x:(n+i)/2,y:(r+t)/2}}},Je=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},$e={top:0,right:0,bottom:0,left:0},Ke=function(e){var t=e.slice(0,-2);if("px"!==e.slice(-2))return 0;var n=Number(t);return isNaN(n)&&function(e,t){throw new Error("Invariant failed")}(),n},Qe=function(e){return t=e.getBoundingClientRect(),n=window.getComputedStyle(e),function(e){var t,n,r=e.borderBox,i=e.margin,a=void 0===i?$e:i,o=e.border,s=void 0===o?$e:o,l=e.padding,c=void 0===l?$e:l,u=Ze((n=a,{top:(t=r).top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right})),d=Ze(Je(r,s)),h=Ze(Je(d,c));return{marginBox:u,borderBox:Ze(r),paddingBox:d,contentBox:h,margin:a,border:s,padding:c}}({borderBox:t,margin:{top:Ke(n.marginTop),right:Ke(n.marginRight),bottom:Ke(n.marginBottom),left:Ke(n.marginLeft)},padding:{top:Ke(n.paddingTop),right:Ke(n.paddingRight),bottom:Ke(n.paddingBottom),left:Ke(n.paddingLeft)},border:{top:Ke(n.borderTopWidth),right:Ke(n.borderRightWidth),bottom:Ke(n.borderBottomWidth),left:Ke(n.borderLeftWidth)}});var t,n},et=Q?t.useLayoutEffect:t.useEffect;function tt(e,n=[]){const r=(0,t.useRef)(e);return et((()=>{r.current=e})),(0,t.useCallback)(((...e)=>{var t;return null==(t=r.current)?void 0:t.call(r,...e)}),n)}function nt(e,n,r,i){const a=tt(n);return(0,t.useEffect)((()=>{const t=he(r)??document;if(n)return t.addEventListener(e,a,i),()=>{t.removeEventListener(e,a,i)}}),[e,r,i,a,n]),()=>{(he(r)??document).removeEventListener(e,a,i)}}function rt(e=!1){const[n,r]=(0,t.useState)(e),i=(0,t.useMemo)((()=>({on:()=>r(!0),off:()=>r(!1),toggle:()=>r((e=>!e))})),[]);return[n,i]}function it(e,t){const n=void 0!==e;return[n,n&&void 0!==e?e:t]}function at(e){const{value:n,defaultValue:r,onChange:i,shouldUpdate:a=((e,t)=>e!==t)}=e,o=tt(i),s=tt(a),[l,c]=(0,t.useState)(r),u=void 0!==n,d=u?n:l,h=(0,t.useCallback)((e=>{const t=he(e,d);s(d,t)&&(u||c(t),o(t))}),[u,o,d,s]);return[d,h]}function ot(e,n){const r=(0,t.useId)();return(0,t.useMemo)((()=>e||[n,r].filter(Boolean).join("-")),[e,n,r])}function st(e,...n){const r=ot(e);return(0,t.useMemo)((()=>n.map((e=>`${e}-${r}`))),[r,n])}function lt(e={}){const{onClose:n,onOpen:r,isOpen:i,id:a}=e,o=tt(r),s=tt(n),[l,c]=(0,t.useState)(e.defaultIsOpen||!1),[u,d]=it(i,l),h=ot(a,"disclosure"),f=(0,t.useCallback)((()=>{u||c(!1),null==s||s()}),[u,s]),p=(0,t.useCallback)((()=>{u||c(!0),null==o||o()}),[u,o]),m=(0,t.useCallback)((()=>{(d?f:p)()}),[d,p,f]);return{isOpen:!!d,onOpen:p,onClose:f,onToggle:m,isControlled:u,getButtonProps:(e={})=>({...e,"aria-expanded":d,"aria-controls":h,onClick:fe(e.onClick,m)}),getDisclosureProps:(e={})=>({...e,hidden:!d,id:h})}}var ct=(e,n)=>{const r=(0,t.useRef)(!1),i=(0,t.useRef)(!1);(0,t.useEffect)((()=>{if(r.current&&i.current)return e();i.current=!0}),n),(0,t.useEffect)((()=>(r.current=!0,()=>{r.current=!1})),[])};function ut(e,t){const{shouldFocus:n,visible:r,focusRef:i}=t,a=n&&!r;ct((()=>{if(!a)return;if(function(e){const t=e.current;if(!t)return!1;const n=re(t);return!(!n||ie(t,n)||(r=n,!(r&&Z(r)&&ue(r))||(e=>se(e)&&-1===e.tabIndex)(r)));var r}(e))return;const t=(null==i?void 0:i.current)||e.current;t&&_e(t,{nextTick:!0})}),[a,e,i])}function dt(e,t,n,r){return nt(He(t),Oe(n,"pointerdown"===t),e,r)}function ht(e,n=[]){return(0,t.useEffect)((()=>()=>e()),n)}function ft(){const e=(0,t.useRef)(!1),[n,r]=(0,t.useState)(0);return ht((()=>{e.current=!0})),(0,t.useCallback)((()=>{e.current||r(n+1)}),[n])}function pt(e){const n=(0,t.useRef)(null);return n.current=e,n}function mt(...e){return(0,t.useMemo)((()=>e.every((e=>null==e))?null:t=>{e.forEach((e=>{e&&function(e,t){if(null!=e)if("function"!=typeof e)try{e.current=t}catch(n){throw new Error(`Cannot assign value '${t}' to ref '${e}'`)}else e(t)}(e,t)}))}),e)}function gt(e,t){var n;const r=e.target;return!(e.button>0)&&(!(r&&!$(r).contains(r))&&!(null==(n=t.current)?void 0:n.contains(r)))}function vt(e,n){const{onPan:r,onPanStart:i,onPanEnd:a,onPanSessionStart:o,onPanSessionEnd:s,threshold:l}=n,c=Boolean(r||i||a||o||s),u=(0,t.useRef)(null),d={onSessionStart:o,onSessionEnd:s,onStart:i,onMove:r,onEnd(e,t){u.current=null,null==a||a(e,t)}};(0,t.useEffect)((()=>{var e;null==(e=u.current)||e.updateHandlers(d)})),dt((()=>e.current),"pointerdown",c?function(e){u.current=new class{history=[];startEvent=null;lastEvent=null;lastEventInfo=null;handlers={};removeListeners=ge;threshold=3;win;constructor(e,t,n){if(this.win=K(e),function(e){return Ie(e)&&e.touches.length>1}(e))return;this.handlers=t,n&&(this.threshold=n),e.stopPropagation(),e.preventDefault();const r=Ne(e),{timestamp:i}=x();this.history=[{...r.point,timestamp:i}];const{onSessionStart:a}=t;null==a||a(e,Xe(r,this.history)),this.removeListeners=ye(Ge(this.win,"pointermove",this.onPointerMove),Ge(this.win,"pointerup",this.onPointerUp),Ge(this.win,"pointercancel",this.onPointerUp))}updatePoint=()=>{if(!this.lastEvent||!this.lastEventInfo)return;const e=Xe(this.lastEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){if(S(e)&&S(t))return be(e,t);if(xe(e)&&xe(t)){const n=be(e.x,t.x),r=be(e.y,t.y);return Math.sqrt(n**2+r**2)}return 0}(e.offset,{x:0,y:0})>=this.threshold;if(!t&&!n)return;const{timestamp:r}=x();this.history.push({...e.point,timestamp:r});const{onStart:i,onMove:a}=this.handlers;t||(null==i||i(this.lastEvent,e),this.startEvent=this.lastEvent),null==a||a(this.lastEvent,e)};onPointerMove=(e,t)=>{this.lastEvent=e,this.lastEventInfo=t,function(e){const t=K(e);return void 0!==t.PointerEvent&&e instanceof t.PointerEvent?!("mouse"!==e.pointerType):e instanceof t.MouseEvent}(e)&&0===e.buttons?this.onPointerUp(e,t):_.update(this.updatePoint,!0)};onPointerUp=(e,t)=>{const n=Xe(t,this.history),{onEnd:r,onSessionEnd:i}=this.handlers;null==i||i(e,n),this.end(),r&&this.startEvent&&(null==r||r(e,n))};updateHandlers(e){this.handlers=e}end(){var e;null==(e=this.removeListeners)||e.call(this),g.update(this.updatePoint)}}(e,d,l)}:ge),ht((()=>{var e;null==(e=u.current)||e.end(),u.current=null}))}var yt=(0,t.createContext)({});function bt(){const e=(0,t.useContext)(yt);if(void 0===e)throw new Error("useColorMode must be used within a ColorModeProvider");return e}var xt,_t="chakra-ui-light",wt="chakra-ui-dark",Mt="chakra-ui-color-mode",St=(xt=Mt,{ssr:!1,type:"localStorage",get(e){if(!Q)return e;let t;try{t=localStorage.getItem(xt)||e}catch(e){}return t||e},set(e){try{localStorage.setItem(xt,e)}catch(e){}}});function At(e,t){return"cookie"===e.type&&e.ssr?e.get(t):t}function Et(e){const{value:n,children:r,options:{useSystemColorMode:i,initialColorMode:a,disableTransitionOnChange:o}={},colorModeManager:s=St}=e,l="dark"===a?"dark":"light",[c,u]=(0,t.useState)((()=>At(s,l))),[d,h]=(0,t.useState)((()=>At(s))),{getSystemTheme:f,setClassName:p,setDataset:m,addListener:g}=(0,t.useMemo)((()=>function(e={}){const{preventTransition:t=!0}=e,n={setDataset:e=>{const r=t?n.preventTransition():void 0;document.documentElement.dataset.theme=e,document.documentElement.style.colorScheme=e,null==r||r()},setClassName(e){document.body.classList.add(e?wt:_t),document.body.classList.remove(e?_t:wt)},query:()=>window.matchMedia("(prefers-color-scheme: dark)"),getSystemTheme:e=>n.query().matches??"dark"===e?"dark":"light",addListener(e){const t=n.query(),r=t=>{e(t.matches?"dark":"light")};return E(t.addListener)?t.addListener(r):t.addEventListener("change",r),()=>{E(t.removeListener)?t.removeListener(r):t.removeEventListener("change",r)}},preventTransition(){const e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),requestAnimationFrame((()=>{requestAnimationFrame((()=>{document.head.removeChild(e)}))}))}}};return n}({preventTransition:o})),[o]),v="system"!==a||c?c:d,y=(0,t.useCallback)((e=>{const t="system"===e?f():e;u(t),p("dark"===t),m(t),s.set(t)}),[s,f,p,m]);et((()=>{"system"===a&&h(f())}),[]),(0,t.useEffect)((()=>{const e=s.get();y(e||("system"!==a?l:"system"))}),[s,l,a,y]);const b=(0,t.useCallback)((()=>{y("dark"===v?"light":"dark")}),[v,y]);(0,t.useEffect)((()=>{if(i)return g(y)}),[i,g,y]);const x=(0,t.useMemo)((()=>({colorMode:n??v,toggleColorMode:n?ge:b,setColorMode:n?ge:y})),[v,b,y,n]);return t.createElement(yt.Provider,{value:x},r)}var Ct=new Set(["dark","light","system"]);function Tt(e={}){const{initialColorMode:t="light",type:n="localStorage",storageKey:r="chakra-ui-color-mode"}=e,i=function(e){let t=e;return Ct.has(t)||(t="light"),t}(t);return("!"+("cookie"===n?`(function(){try{var a=function(o){var l="(prefers-color-scheme: dark)",v=window.matchMedia(l).matches?"dark":"light",e=o==="system"?v:o,d=document.documentElement,m=document.body,i="chakra-ui-light",n="chakra-ui-dark",s=e==="dark";return m.classList.add(s?n:i),m.classList.remove(s?i:n),d.style.colorScheme=e,d.dataset.theme=e,e},u=a,h="${i}",r="${r}",t=document.cookie.match(new RegExp("(^| )".concat(r,"=([^;]+)"))),c=t?t[2]:null;c?a(c):document.cookie="".concat(r,"=").concat(a(h),"; max-age=31536000; path=/")}catch(a){}})();\n  `:`(function(){try{var a=function(c){var v="(prefers-color-scheme: dark)",h=window.matchMedia(v).matches?"dark":"light",r=c==="system"?h:c,o=document.documentElement,s=document.body,l="chakra-ui-light",d="chakra-ui-dark",i=r==="dark";return s.classList.add(i?d:l),s.classList.remove(i?l:d),o.style.colorScheme=r,o.dataset.theme=r,r},n=a,m="${i}",e="${r}",t=localStorage.getItem(e);t?a(t):localStorage.setItem(e,a(m))}catch(a){}})();\n  `)).trim()}function Rt(e={}){return t.createElement("script",{id:"chakra-script",dangerouslySetInnerHTML:{__html:Tt(e)}})}var Pt=i(745),Lt=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(e){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),Dt=Math.abs,It=String.fromCharCode,kt=Object.assign;function Bt(e){return e.trim()}function Ft(e,t,n){return e.replace(t,n)}function Nt(e,t){return e.indexOf(t)}function Ot(e,t){return 0|e.charCodeAt(t)}function zt(e,t,n){return e.slice(t,n)}function Ut(e){return e.length}function Ht(e){return e.length}function Gt(e,t){return t.push(e),e}var Vt=1,jt=1,Wt=0,Xt=0,qt=0,Yt="";function Zt(e,t,n,r,i,a,o){return{value:e,root:t,parent:n,type:r,props:i,children:a,line:Vt,column:jt,length:o,return:""}}function Jt(e,t){return kt(Zt("",null,null,"",null,null,0),e,{length:-e.length},t)}function $t(){return qt=Xt>0?Ot(Yt,--Xt):0,jt--,10===qt&&(jt=1,Vt--),qt}function Kt(){return qt=Xt<Wt?Ot(Yt,Xt++):0,jt++,10===qt&&(jt=1,Vt++),qt}function Qt(){return Ot(Yt,Xt)}function en(){return Xt}function tn(e,t){return zt(Yt,e,t)}function nn(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function rn(e){return Vt=jt=1,Wt=Ut(Yt=e),Xt=0,[]}function an(e){return Yt="",e}function on(e){return Bt(tn(Xt-1,cn(91===e?e+2:40===e?e+1:e)))}function sn(e){for(;(qt=Qt())&&qt<33;)Kt();return nn(e)>2||nn(qt)>3?"":" "}function ln(e,t){for(;--t&&Kt()&&!(qt<48||qt>102||qt>57&&qt<65||qt>70&&qt<97););return tn(e,en()+(t<6&&32==Qt()&&32==Kt()))}function cn(e){for(;Kt();)switch(qt){case e:return Xt;case 34:case 39:34!==e&&39!==e&&cn(qt);break;case 40:41===e&&cn(e);break;case 92:Kt()}return Xt}function un(e,t){for(;Kt()&&e+qt!==57&&(e+qt!==84||47!==Qt()););return"/*"+tn(t,Xt-1)+"*"+It(47===e?e:Kt())}function dn(e){for(;!nn(Qt());)Kt();return tn(e,Xt)}var hn="-ms-",fn="-moz-",pn="-webkit-",mn="comm",gn="rule",vn="decl",yn="@keyframes";function bn(e,t){for(var n="",r=Ht(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function xn(e,t,n,r){switch(e.type){case"@import":case vn:return e.return=e.return||e.value;case mn:return"";case yn:return e.return=e.value+"{"+bn(e.children,r)+"}";case gn:e.value=e.props.join(",")}return Ut(n=bn(e.children,r))?e.return=e.value+"{"+n+"}":""}function _n(e,t){switch(function(e,t){return(((t<<2^Ot(e,0))<<2^Ot(e,1))<<2^Ot(e,2))<<2^Ot(e,3)}(e,t)){case 5103:return pn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return pn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return pn+e+fn+e+hn+e+e;case 6828:case 4268:return pn+e+hn+e+e;case 6165:return pn+e+hn+"flex-"+e+e;case 5187:return pn+e+Ft(e,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+e;case 5443:return pn+e+hn+"flex-item-"+Ft(e,/flex-|-self/,"")+e;case 4675:return pn+e+hn+"flex-line-pack"+Ft(e,/align-content|flex-|-self/,"")+e;case 5548:return pn+e+hn+Ft(e,"shrink","negative")+e;case 5292:return pn+e+hn+Ft(e,"basis","preferred-size")+e;case 6060:return pn+"box-"+Ft(e,"-grow","")+pn+e+hn+Ft(e,"grow","positive")+e;case 4554:return pn+Ft(e,/([^-])(transform)/g,"$1-webkit-$2")+e;case 6187:return Ft(Ft(Ft(e,/(zoom-|grab)/,pn+"$1"),/(image-set)/,pn+"$1"),e,"")+e;case 5495:case 3959:return Ft(e,/(image-set\([^]*)/,pn+"$1$`$1");case 4968:return Ft(Ft(e,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+pn+e+e;case 4095:case 3583:case 4068:case 2532:return Ft(e,/(.+)-inline(.+)/,pn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ut(e)-1-t>6)switch(Ot(e,t+1)){case 109:if(45!==Ot(e,t+4))break;case 102:return Ft(e,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1"+fn+(108==Ot(e,t+3)?"$3":"$2-$3"))+e;case 115:return~Nt(e,"stretch")?_n(Ft(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==Ot(e,t+1))break;case 6444:switch(Ot(e,Ut(e)-3-(~Nt(e,"!important")&&10))){case 107:return Ft(e,":",":"+pn)+e;case 101:return Ft(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+pn+(45===Ot(e,14)?"inline-":"")+"box$3$1"+pn+"$2$3$1"+hn+"$2box$3")+e}break;case 5936:switch(Ot(e,t+11)){case 114:return pn+e+hn+Ft(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return pn+e+hn+Ft(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return pn+e+hn+Ft(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return pn+e+hn+e+e}return e}function wn(e){return an(Mn("",null,null,null,[""],e=rn(e),0,[0],e))}function Mn(e,t,n,r,i,a,o,s,l){for(var c=0,u=0,d=o,h=0,f=0,p=0,m=1,g=1,v=1,y=0,b="",x=i,_=a,w=r,M=b;g;)switch(p=y,y=Kt()){case 40:if(108!=p&&58==M.charCodeAt(d-1)){-1!=Nt(M+=Ft(on(y),"&","&\f"),"&\f")&&(v=-1);break}case 34:case 39:case 91:M+=on(y);break;case 9:case 10:case 13:case 32:M+=sn(p);break;case 92:M+=ln(en()-1,7);continue;case 47:switch(Qt()){case 42:case 47:Gt(An(un(Kt(),en()),t,n),l);break;default:M+="/"}break;case 123*m:s[c++]=Ut(M)*v;case 125*m:case 59:case 0:switch(y){case 0:case 125:g=0;case 59+u:f>0&&Ut(M)-d&&Gt(f>32?En(M+";",r,n,d-1):En(Ft(M," ","")+";",r,n,d-2),l);break;case 59:M+=";";default:if(Gt(w=Sn(M,t,n,c,u,i,s,b,x=[],_=[],d),a),123===y)if(0===u)Mn(M,t,w,w,x,a,d,s,_);else switch(h){case 100:case 109:case 115:Mn(e,w,w,r&&Gt(Sn(e,w,w,0,0,i,s,b,i,x=[],d),_),i,_,d,s,r?x:_);break;default:Mn(M,w,w,w,[""],_,0,s,_)}}c=u=f=0,m=v=1,b=M="",d=o;break;case 58:d=1+Ut(M),f=p;default:if(m<1)if(123==y)--m;else if(125==y&&0==m++&&125==$t())continue;switch(M+=It(y),y*m){case 38:v=u>0?1:(M+="\f",-1);break;case 44:s[c++]=(Ut(M)-1)*v,v=1;break;case 64:45===Qt()&&(M+=on(Kt())),h=Qt(),u=d=Ut(b=M+=dn(en())),y++;break;case 45:45===p&&2==Ut(M)&&(m=0)}}return a}function Sn(e,t,n,r,i,a,o,s,l,c,u){for(var d=i-1,h=0===i?a:[""],f=Ht(h),p=0,m=0,g=0;p<r;++p)for(var v=0,y=zt(e,d+1,d=Dt(m=o[p])),b=e;v<f;++v)(b=Bt(m>0?h[v]+" "+y:Ft(y,/&\f/g,h[v])))&&(l[g++]=b);return Zt(e,t,n,0===i?gn:s,l,c,u)}function An(e,t,n){return Zt(e,t,n,mn,It(qt),zt(e,2,-2),0)}function En(e,t,n,r){return Zt(e,t,n,vn,zt(e,0,r),zt(e,r+1,-1),r)}var Cn=function(e,t,n){for(var r=0,i=0;r=i,i=Qt(),38===r&&12===i&&(t[n]=1),!nn(i);)Kt();return tn(e,Xt)},Tn=new WeakMap,Rn=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||Tn.get(n))&&!r){Tn.set(e,!0);for(var i=[],a=function(e,t){return an(function(e,t){var n=-1,r=44;do{switch(nn(r)){case 0:38===r&&12===Qt()&&(t[n]=1),e[n]+=Cn(Xt-1,t,n);break;case 2:e[n]+=on(r);break;case 4:if(44===r){e[++n]=58===Qt()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=It(r)}}while(r=Kt());return e}(rn(e),t))}(t,i),o=n.props,s=0,l=0;s<a.length;s++)for(var c=0;c<o.length;c++,l++)e.props[l]=i[s]?a[s].replace(/&\f/g,o[c]):o[c]+" "+a[s]}}},Pn=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}},Ln=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case vn:e.return=_n(e.value,e.length);break;case yn:return bn([Jt(e,{value:Ft(e.value,"@","@"+pn)})],r);case gn:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=/(::plac\w+|:read-\w+)/.exec(e))?e[0]:e}(t)){case":read-only":case":read-write":return bn([Jt(e,{props:[Ft(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return bn([Jt(e,{props:[Ft(t,/:(plac\w+)/,":-webkit-input-$1")]}),Jt(e,{props:[Ft(t,/:(plac\w+)/,":-moz-$1")]}),Jt(e,{props:[Ft(t,/:(plac\w+)/,hn+"input-$1")]})],r)}return""}))}}];const Dn=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r,i,a=e.stylisPlugins||Ln,o={},s=[];r=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)o[t[n]]=!0;s.push(e)}));var l,c,u,d,h=[xn,(d=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&d(e)})],f=(c=[Rn,Pn].concat(a,h),u=Ht(c),function(e,t,n,r){for(var i="",a=0;a<u;a++)i+=c[a](e,t,n,r)||"";return i});i=function(e,t,n,r){l=n,bn(wn(e?e+"{"+t.styles+"}":t.styles),f),r&&(p.inserted[t.name]=!0)};var p={key:t,sheet:new Lt({key:t,container:r,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:i};return p.sheet.hydrate(s),p};function In(){return In=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},In.apply(this,arguments)}const kn=function(e){var t=new WeakMap;return function(n){if(t.has(n))return t.get(n);var r=e(n);return t.set(n,r),r}},Bn=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},Fn={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Nn=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}};var On=/[A-Z]|^ms/g,zn=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Un=function(e){return 45===e.charCodeAt(1)},Hn=function(e){return null!=e&&"boolean"!=typeof e},Gn=Nn((function(e){return Un(e)?e:e.replace(On,"-$&").toLowerCase()})),Vn=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(zn,(function(e,t,n){return Wn={name:t,styles:n,next:Wn},t}))}return 1===Fn[e]||Un(e)||"number"!=typeof t||0===t?t:t+"px"};function jn(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return Wn={name:n.name,styles:n.styles,next:Wn},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)Wn={name:r.name,styles:r.styles,next:Wn},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=jn(e,t,n[i])+";";else for(var a in n){var o=n[a];if("object"!=typeof o)null!=t&&void 0!==t[o]?r+=a+"{"+t[o]+"}":Hn(o)&&(r+=Gn(a)+":"+Vn(a,o)+";");else if(!Array.isArray(o)||"string"!=typeof o[0]||null!=t&&void 0!==t[o[0]]){var s=jn(e,t,o);switch(a){case"animation":case"animationName":r+=Gn(a)+":"+s+";";break;default:r+=a+"{"+s+"}"}}else for(var l=0;l<o.length;l++)Hn(o[l])&&(r+=Gn(a)+":"+Vn(a,o[l])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=Wn,a=n(e);return Wn=i,jn(e,t,a)}}if(null==t)return n;var o=t[n];return void 0!==o?o:n}var Wn,Xn=/label:\s*([^\s;\n{]+)\s*(;|$)/g,qn=function(e,t,n){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";Wn=void 0;var a=e[0];null==a||void 0===a.raw?(r=!1,i+=jn(n,t,a)):i+=a[0];for(var o=1;o<e.length;o++)i+=jn(n,t,e[o]),r&&(i+=a[o]);Xn.lastIndex=0;for(var s,l="";null!==(s=Xn.exec(i));)l+="-"+s[1];return{name:Bn(i)+l,styles:i,next:Wn}},Yn=(0,t.createContext)("undefined"!=typeof HTMLElement?Dn({key:"css"}):null);Yn.Provider;var Zn=function(e){return(0,t.forwardRef)((function(n,r){var i=(0,t.useContext)(Yn);return e(n,i,r)}))},Jn=(0,t.createContext)({}),$n=kn((function(e){return kn((function(t){return function(e,t){return"function"==typeof t?t(e):In({},e,t)}(e,t)}))})),Kn=function(e){var n=(0,t.useContext)(Jn);return e.theme!==n&&(n=$n(n)(e.theme)),(0,t.createElement)(Jn.Provider,{value:n},e.children)};n.useInsertionEffect&&n.useInsertionEffect;var Qn=i(8679),er=i.n(Qn);function tr(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var nr=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},rr=function(e,t,n){nr(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}},ir=n.useInsertionEffect?n.useInsertionEffect:t.useLayoutEffect,ar=Zn((function(e,n){var r=e.styles,i=qn([r],void 0,(0,t.useContext)(Jn)),a=(0,t.useRef)();return ir((function(){var e=n.key+"-global",t=new n.sheet.constructor({key:e,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy}),r=!1,o=document.querySelector('style[data-emotion="'+e+" "+i.name+'"]');return n.sheet.tags.length&&(t.before=n.sheet.tags[0]),null!==o&&(r=!0,o.setAttribute("data-emotion",e),t.hydrate([o])),a.current=[t,r],function(){t.flush()}}),[n]),ir((function(){var e=a.current,t=e[0];if(e[1])e[1]=!1;else{if(void 0!==i.next&&rr(n,i.next,!0),t.tags.length){var r=t.tags[t.tags.length-1].nextElementSibling;t.before=r,t.flush()}n.insert("",i,t,!1)}}),[n,i.name]),null}));function or(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return qn(t)}var sr=()=>t.createElement(ar,{styles:'\n      html {\n        line-height: 1.5;\n        -webkit-text-size-adjust: 100%;\n        font-family: system-ui, sans-serif;\n        -webkit-font-smoothing: antialiased;\n        text-rendering: optimizeLegibility;\n        -moz-osx-font-smoothing: grayscale;\n        touch-action: manipulation;\n      }\n\n      body {\n        position: relative;\n        min-height: 100%;\n        font-feature-settings: \'kern\';\n      }\n\n      *,\n      *::before,\n      *::after {\n        border-width: 0;\n        border-style: solid;\n        box-sizing: border-box;\n      }\n\n      main {\n        display: block;\n      }\n\n      hr {\n        border-top-width: 1px;\n        box-sizing: content-box;\n        height: 0;\n        overflow: visible;\n      }\n\n      pre,\n      code,\n      kbd,\n      samp {\n        font-family: SFMono-Regular,  Menlo, Monaco, Consolas, monospace;\n        font-size: 1em;\n      }\n\n      a {\n        background-color: transparent;\n        color: inherit;\n        text-decoration: inherit;\n      }\n\n      abbr[title] {\n        border-bottom: none;\n        text-decoration: underline;\n        -webkit-text-decoration: underline dotted;\n        text-decoration: underline dotted;\n      }\n\n      b,\n      strong {\n        font-weight: bold;\n      }\n\n      small {\n        font-size: 80%;\n      }\n\n      sub,\n      sup {\n        font-size: 75%;\n        line-height: 0;\n        position: relative;\n        vertical-align: baseline;\n      }\n\n      sub {\n        bottom: -0.25em;\n      }\n\n      sup {\n        top: -0.5em;\n      }\n\n      img {\n        border-style: none;\n      }\n\n      button,\n      input,\n      optgroup,\n      select,\n      textarea {\n        font-family: inherit;\n        font-size: 100%;\n        line-height: 1.15;\n        margin: 0;\n      }\n\n      button,\n      input {\n        overflow: visible;\n      }\n\n      button,\n      select {\n        text-transform: none;\n      }\n\n      button::-moz-focus-inner,\n      [type="button"]::-moz-focus-inner,\n      [type="reset"]::-moz-focus-inner,\n      [type="submit"]::-moz-focus-inner {\n        border-style: none;\n        padding: 0;\n      }\n\n      fieldset {\n        padding: 0.35em 0.75em 0.625em;\n      }\n\n      legend {\n        box-sizing: border-box;\n        color: inherit;\n        display: table;\n        max-width: 100%;\n        padding: 0;\n        white-space: normal;\n      }\n\n      progress {\n        vertical-align: baseline;\n      }\n\n      textarea {\n        overflow: auto;\n      }\n\n      [type="checkbox"],\n      [type="radio"] {\n        box-sizing: border-box;\n        padding: 0;\n      }\n\n      [type="number"]::-webkit-inner-spin-button,\n      [type="number"]::-webkit-outer-spin-button {\n        -webkit-appearance: none !important;\n      }\n\n      input[type="number"] {\n        -moz-appearance: textfield;\n      }\n\n      [type="search"] {\n        -webkit-appearance: textfield;\n        outline-offset: -2px;\n      }\n\n      [type="search"]::-webkit-search-decoration {\n        -webkit-appearance: none !important;\n      }\n\n      ::-webkit-file-upload-button {\n        -webkit-appearance: button;\n        font: inherit;\n      }\n\n      details {\n        display: block;\n      }\n\n      summary {\n        display: list-item;\n      }\n\n      template {\n        display: none;\n      }\n\n      [hidden] {\n        display: none !important;\n      }\n\n      body,\n      blockquote,\n      dl,\n      dd,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5,\n      h6,\n      hr,\n      figure,\n      p,\n      pre {\n        margin: 0;\n      }\n\n      button {\n        background: transparent;\n        padding: 0;\n      }\n\n      fieldset {\n        margin: 0;\n        padding: 0;\n      }\n\n      ol,\n      ul {\n        margin: 0;\n        padding: 0;\n      }\n\n      textarea {\n        resize: vertical;\n      }\n\n      button,\n      [role="button"] {\n        cursor: pointer;\n      }\n\n      button::-moz-focus-inner {\n        border: 0 !important;\n      }\n\n      table {\n        border-collapse: collapse;\n      }\n\n      h1,\n      h2,\n      h3,\n      h4,\n      h5,\n      h6 {\n        font-size: inherit;\n        font-weight: inherit;\n      }\n\n      button,\n      input,\n      optgroup,\n      select,\n      textarea {\n        padding: 0;\n        line-height: inherit;\n        color: inherit;\n      }\n\n      img,\n      svg,\n      video,\n      canvas,\n      audio,\n      iframe,\n      embed,\n      object {\n        display: block;\n      }\n\n      img,\n      video {\n        max-width: 100%;\n        height: auto;\n      }\n\n      [data-js-focus-visible] :focus:not([data-focus-visible-added]):not([data-focus-visible-disabled]) {\n        outline: none;\n        box-shadow: none;\n      }\n\n      select::-ms-expand {\n        display: none;\n      }\n    '});function lr(...e){return t=>{e.forEach((e=>function(e,t){if(null!=e)if(E(e))e(t);else try{e.current=t}catch(n){throw new Error(`Cannot assign value '${t}' to ref '${e}'`)}}(e,t)))}}function cr(e={}){const{strict:n=!0,errorMessage:r="useContext: `context` is undefined. Seems you forgot to wrap component within the Provider",name:i}=e,a=(0,t.createContext)(void 0);return a.displayName=i,[a.Provider,function e(){var i;const o=(0,t.useContext)(a);if(!o&&n){const t=new Error(r);throw t.name="ContextError",null==(i=Error.captureStackTrace)||i.call(Error,t,e),t}return o},a]}function ur(e){return t.Children.toArray(e).filter((e=>(0,t.isValidElement)(e)))}var dr=i(3935),[hr,fr]=cr({strict:!1,name:"PortalManagerContext"});function pr(e){const{children:n,zIndex:r}=e;return t.createElement(hr,{value:{zIndex:r}},n)}var[mr,gr]=cr({strict:!1,name:"PortalContext"}),vr="chakra-portal",yr=e=>t.createElement("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:e.zIndex,top:0,left:0,right:0}},e.children),br=e=>{const{appendToParentPortal:n,children:r}=e,[i,a]=(0,t.useState)(null),o=(0,t.useRef)(null),s=ft();(0,t.useEffect)(s,[]);const l=gr(),c=fr();et((()=>{if(!i)return;const e=i.ownerDocument,t=n?l??e.body:e.body;if(!t)return;o.current=e.createElement("div"),o.current.className=vr,t.appendChild(o.current),s();const r=o.current;return()=>{t.contains(r)&&t.removeChild(r)}}),[i]);const u=(null==c?void 0:c.zIndex)?t.createElement(yr,{zIndex:null==c?void 0:c.zIndex},r):r;return o.current?(0,dr.createPortal)(t.createElement(mr,{value:o.current},u),o.current):t.createElement("span",{ref:e=>{e&&a(e)}})},xr=e=>{const{children:n,containerRef:r,appendToParentPortal:i}=e,a=r.current,o=a??(Q?document.body:void 0),s=(0,t.useMemo)((()=>{const e=null==a?void 0:a.ownerDocument.createElement("div");return e&&(e.className=vr),e}),[a]),l=ft();return et((()=>{l()}),[]),et((()=>{if(s&&o)return o.appendChild(s),()=>{o.removeChild(s)}}),[s,o]),o&&s?(0,dr.createPortal)(t.createElement(mr,{value:i?s:null},n),s):null};function _r(e){const{containerRef:n,...r}=e;return n?t.createElement(xr,{containerRef:n,...r}):t.createElement(br,{...r})}_r.defaultProps={appendToParentPortal:!0},_r.className=vr,_r.selector=".chakra-portal";var wr=e=>L(e)?e.replace(/!(important)?$/,"").trim():e,Mr=(e,t)=>n=>{const r=String(t),i=(e=>/!(important)?$/.test(e))(r),a=wr(r),o=e?`${e}.${a}`:a;let s=T(n.__cssMap)&&o in n.__cssMap?n.__cssMap[o].varRef:t;return s=wr(s),i?`${s} !important`:s};function Sr(e){const{scale:t,transform:n,compose:r}=e;return(e,i)=>{const a=Mr(t,e)(i);let o=(null==n?void 0:n(a,i))??a;return r&&(o=r(o,i)),o}}function Ar(e,t){return n=>{const r={property:n,scale:e};return r.transform=Sr({scale:e,transform:t}),r}}var Er=({rtl:e,ltr:t})=>n=>"rtl"===n.direction?e:t,Cr=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"],Tr={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},Rr={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"},Pr={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},Lr="& > :not(style) ~ :not(style)",Dr={[Lr]:{marginInlineStart:"calc(var(--chakra-space-x) * calc(1 - var(--chakra-space-x-reverse)))",marginInlineEnd:"calc(var(--chakra-space-x) * var(--chakra-space-x-reverse))"}},Ir={[Lr]:{marginTop:"calc(var(--chakra-space-y) * calc(1 - var(--chakra-space-y-reverse)))",marginBottom:"calc(var(--chakra-space-y) * var(--chakra-space-y-reverse))"}},kr={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},Br=new Set(Object.values(kr)),Fr=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),Nr=e=>e.trim(),Or=e=>L(e)&&e.includes("(")&&e.includes(")"),zr=e=>t=>`${e}(${t})`,Ur={filter:e=>"auto"!==e?e:Tr,backdropFilter:e=>"auto"!==e?e:Rr,ring:e=>function(e){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":e,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}(Ur.px(e)),bgClip:e=>"text"===e?{color:"transparent",backgroundClip:"text"}:{backgroundClip:e},transform:e=>"auto"===e?["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))",...Cr].join(" "):"auto-gpu"===e?["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)",...Cr].join(" "):e,px(e){if(null==e)return e;const{unitless:t}=(e=>{const t=parseFloat(e.toString()),n=e.toString().replace(String(t),"");return{unitless:!n,value:t,unit:n}})(e);return t||S(e)?`${e}px`:e},fraction:e=>!S(e)||e>1?e:100*e+"%",float:(e,t)=>"rtl"===t.direction?{left:"right",right:"left"}[e]:e,degree(e){if(D(e)||null==e)return e;const t=L(e)&&!e.endsWith("deg");return S(e)||t?`${e}deg`:e},gradient:(e,t)=>function(e,t){var n;if(null==e||Fr.has(e))return e;const{type:r,values:i}=(null==(n=/(?<type>^[a-z-A-Z]+)\((?<values>(.*))\)/g.exec(e))?void 0:n.groups)??{};if(!r||!i)return e;const a=r.includes("-gradient")?r:`${r}-gradient`,[o,...s]=i.split(",").map(Nr).filter(Boolean);if(0===(null==s?void 0:s.length))return e;const l=o in kr?kr[o]:o;s.unshift(l);const c=s.map((e=>{if(Br.has(e))return e;const n=e.indexOf(" "),[r,i]=-1!==n?[e.substr(0,n),e.substr(n+1)]:[e],a=Or(i)?i:i&&i.split(" "),o=`colors.${r}`,s=o in t.__cssMap?t.__cssMap[o].varRef:r;return a?[s,...Array.isArray(a)?a:[a]].join(" "):s}));return`${a}(${c.join(", ")})`}(e,t??{}),blur:zr("blur"),opacity:zr("opacity"),brightness:zr("brightness"),contrast:zr("contrast"),dropShadow:zr("drop-shadow"),grayscale:zr("grayscale"),hueRotate:zr("hue-rotate"),invert:zr("invert"),saturate:zr("saturate"),sepia:zr("sepia"),bgImage:e=>null==e||Or(e)||Fr.has(e)?e:`url(${e})`,outline(e){const t="0"===String(e)||"none"===String(e);return null!==e&&t?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:e}},flexDirection(e){const{space:t,divide:n}=Pr[e]??{},r={flexDirection:e};return t&&(r[t]=1),n&&(r[n]=1),r}},Hr={borderWidths:Ar("borderWidths"),borderStyles:Ar("borderStyles"),colors:Ar("colors"),borders:Ar("borders"),radii:Ar("radii",Ur.px),space:Ar("space",Ur.px),spaceT:Ar("space",Ur.px),degreeT:e=>({property:e,transform:Ur.degree}),prop:(e,t,n)=>({property:e,scale:t,...t&&{transform:Sr({scale:t,transform:n})}}),propT:(e,t)=>({property:e,transform:t}),sizes:Ar("sizes",Ur.px),sizesT:Ar("sizes",Ur.fraction),shadows:Ar("shadows"),logical:function(e){const{property:t,scale:n,transform:r}=e;return{scale:n,property:Er(t),transform:n?Sr({scale:n,compose:r}):r}},blur:Ar("blur",Ur.blur)},Gr={background:Hr.colors("background"),backgroundColor:Hr.colors("backgroundColor"),backgroundImage:Hr.propT("backgroundImage",Ur.bgImage),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:Ur.bgClip},bgSize:Hr.prop("backgroundSize"),bgPosition:Hr.prop("backgroundPosition"),bg:Hr.colors("background"),bgColor:Hr.colors("backgroundColor"),bgPos:Hr.prop("backgroundPosition"),bgRepeat:Hr.prop("backgroundRepeat"),bgAttachment:Hr.prop("backgroundAttachment"),bgGradient:Hr.propT("backgroundImage",Ur.gradient),bgClip:{transform:Ur.bgClip}};Object.assign(Gr,{bgImage:Gr.backgroundImage,bgImg:Gr.backgroundImage});var Vr={border:Hr.borders("border"),borderWidth:Hr.borderWidths("borderWidth"),borderStyle:Hr.borderStyles("borderStyle"),borderColor:Hr.colors("borderColor"),borderRadius:Hr.radii("borderRadius"),borderTop:Hr.borders("borderTop"),borderBlockStart:Hr.borders("borderBlockStart"),borderTopLeftRadius:Hr.radii("borderTopLeftRadius"),borderStartStartRadius:Hr.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:Hr.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:Hr.radii("borderTopRightRadius"),borderStartEndRadius:Hr.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:Hr.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:Hr.borders("borderRight"),borderInlineEnd:Hr.borders("borderInlineEnd"),borderBottom:Hr.borders("borderBottom"),borderBlockEnd:Hr.borders("borderBlockEnd"),borderBottomLeftRadius:Hr.radii("borderBottomLeftRadius"),borderBottomRightRadius:Hr.radii("borderBottomRightRadius"),borderLeft:Hr.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:Hr.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:Hr.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:Hr.borders(["borderLeft","borderRight"]),borderInline:Hr.borders("borderInline"),borderY:Hr.borders(["borderTop","borderBottom"]),borderBlock:Hr.borders("borderBlock"),borderTopWidth:Hr.borderWidths("borderTopWidth"),borderBlockStartWidth:Hr.borderWidths("borderBlockStartWidth"),borderTopColor:Hr.colors("borderTopColor"),borderBlockStartColor:Hr.colors("borderBlockStartColor"),borderTopStyle:Hr.borderStyles("borderTopStyle"),borderBlockStartStyle:Hr.borderStyles("borderBlockStartStyle"),borderBottomWidth:Hr.borderWidths("borderBottomWidth"),borderBlockEndWidth:Hr.borderWidths("borderBlockEndWidth"),borderBottomColor:Hr.colors("borderBottomColor"),borderBlockEndColor:Hr.colors("borderBlockEndColor"),borderBottomStyle:Hr.borderStyles("borderBottomStyle"),borderBlockEndStyle:Hr.borderStyles("borderBlockEndStyle"),borderLeftWidth:Hr.borderWidths("borderLeftWidth"),borderInlineStartWidth:Hr.borderWidths("borderInlineStartWidth"),borderLeftColor:Hr.colors("borderLeftColor"),borderInlineStartColor:Hr.colors("borderInlineStartColor"),borderLeftStyle:Hr.borderStyles("borderLeftStyle"),borderInlineStartStyle:Hr.borderStyles("borderInlineStartStyle"),borderRightWidth:Hr.borderWidths("borderRightWidth"),borderInlineEndWidth:Hr.borderWidths("borderInlineEndWidth"),borderRightColor:Hr.colors("borderRightColor"),borderInlineEndColor:Hr.colors("borderInlineEndColor"),borderRightStyle:Hr.borderStyles("borderRightStyle"),borderInlineEndStyle:Hr.borderStyles("borderInlineEndStyle"),borderTopRadius:Hr.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:Hr.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:Hr.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:Hr.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(Vr,{rounded:Vr.borderRadius,roundedTop:Vr.borderTopRadius,roundedTopLeft:Vr.borderTopLeftRadius,roundedTopRight:Vr.borderTopRightRadius,roundedTopStart:Vr.borderStartStartRadius,roundedTopEnd:Vr.borderStartEndRadius,roundedBottom:Vr.borderBottomRadius,roundedBottomLeft:Vr.borderBottomLeftRadius,roundedBottomRight:Vr.borderBottomRightRadius,roundedBottomStart:Vr.borderEndStartRadius,roundedBottomEnd:Vr.borderEndEndRadius,roundedLeft:Vr.borderLeftRadius,roundedRight:Vr.borderRightRadius,roundedStart:Vr.borderInlineStartRadius,roundedEnd:Vr.borderInlineEndRadius,borderStart:Vr.borderInlineStart,borderEnd:Vr.borderInlineEnd,borderTopStartRadius:Vr.borderStartStartRadius,borderTopEndRadius:Vr.borderStartEndRadius,borderBottomStartRadius:Vr.borderEndStartRadius,borderBottomEndRadius:Vr.borderEndEndRadius,borderStartRadius:Vr.borderInlineStartRadius,borderEndRadius:Vr.borderInlineEndRadius,borderStartWidth:Vr.borderInlineStartWidth,borderEndWidth:Vr.borderInlineEndWidth,borderStartColor:Vr.borderInlineStartColor,borderEndColor:Vr.borderInlineEndColor,borderStartStyle:Vr.borderInlineStartStyle,borderEndStyle:Vr.borderInlineEndStyle});var jr={color:Hr.colors("color"),textColor:Hr.colors("color"),fill:Hr.colors("fill"),stroke:Hr.colors("stroke")},Wr={boxShadow:Hr.shadows("boxShadow"),mixBlendMode:!0,blendMode:Hr.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:Hr.prop("backgroundBlendMode"),opacity:!0};Object.assign(Wr,{shadow:Wr.boxShadow});var Xr={filter:{transform:Ur.filter},blur:Hr.blur("--chakra-blur"),brightness:Hr.propT("--chakra-brightness",Ur.brightness),contrast:Hr.propT("--chakra-contrast",Ur.contrast),hueRotate:Hr.degreeT("--chakra-hue-rotate"),invert:Hr.propT("--chakra-invert",Ur.invert),saturate:Hr.propT("--chakra-saturate",Ur.saturate),dropShadow:Hr.propT("--chakra-drop-shadow",Ur.dropShadow),backdropFilter:{transform:Ur.backdropFilter},backdropBlur:Hr.blur("--chakra-backdrop-blur"),backdropBrightness:Hr.propT("--chakra-backdrop-brightness",Ur.brightness),backdropContrast:Hr.propT("--chakra-backdrop-contrast",Ur.contrast),backdropHueRotate:Hr.degreeT("--chakra-backdrop-hue-rotate"),backdropInvert:Hr.propT("--chakra-backdrop-invert",Ur.invert),backdropSaturate:Hr.propT("--chakra-backdrop-saturate",Ur.saturate)},qr={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:Ur.flexDirection},experimental_spaceX:{static:Dr,transform:Sr({scale:"space",transform:e=>null!==e?{"--chakra-space-x":e}:null})},experimental_spaceY:{static:Ir,transform:Sr({scale:"space",transform:e=>null!=e?{"--chakra-space-y":e}:null})},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:Hr.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:Hr.space("gap"),rowGap:Hr.space("rowGap"),columnGap:Hr.space("columnGap")};Object.assign(qr,{flexDir:qr.flexDirection});var Yr={gridGap:Hr.space("gridGap"),gridColumnGap:Hr.space("gridColumnGap"),gridRowGap:Hr.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0},Zr={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:Ur.outline},outlineOffset:!0,outlineColor:Hr.colors("outlineColor")},Jr={width:Hr.sizesT("width"),inlineSize:Hr.sizesT("inlineSize"),height:Hr.sizes("height"),blockSize:Hr.sizes("blockSize"),boxSize:Hr.sizes(["width","height"]),minWidth:Hr.sizes("minWidth"),minInlineSize:Hr.sizes("minInlineSize"),minHeight:Hr.sizes("minHeight"),minBlockSize:Hr.sizes("minBlockSize"),maxWidth:Hr.sizes("maxWidth"),maxInlineSize:Hr.sizes("maxInlineSize"),maxHeight:Hr.sizes("maxHeight"),maxBlockSize:Hr.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:Hr.propT("float",Ur.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(Jr,{w:Jr.width,h:Jr.height,minW:Jr.minWidth,maxW:Jr.maxWidth,minH:Jr.minHeight,maxH:Jr.maxHeight,overscroll:Jr.overscrollBehavior,overscrollX:Jr.overscrollBehaviorX,overscrollY:Jr.overscrollBehaviorY});var $r={listStyleType:!0,listStylePosition:!0,listStylePos:Hr.prop("listStylePosition"),listStyleImage:!0,listStyleImg:Hr.prop("listStyleImage")},Kr={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},Qr={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},ei=(e,t,n)=>{const r={},i=F(e,t,{});for(const e in i)e in n&&null!=n[e]||(r[e]=i[e]);return r},ti={srOnly:{transform:e=>!0===e?Kr:"focusable"===e?Qr:{}},layerStyle:{processResult:!0,transform:(e,t,n)=>ei(t,`layerStyles.${e}`,n)},textStyle:{processResult:!0,transform:(e,t,n)=>ei(t,`textStyles.${e}`,n)},apply:{processResult:!0,transform:(e,t,n)=>ei(t,e,n)}},ni={position:!0,pos:Hr.prop("position"),zIndex:Hr.prop("zIndex","zIndices"),inset:Hr.spaceT("inset"),insetX:Hr.spaceT(["left","right"]),insetInline:Hr.spaceT("insetInline"),insetY:Hr.spaceT(["top","bottom"]),insetBlock:Hr.spaceT("insetBlock"),top:Hr.spaceT("top"),insetBlockStart:Hr.spaceT("insetBlockStart"),bottom:Hr.spaceT("bottom"),insetBlockEnd:Hr.spaceT("insetBlockEnd"),left:Hr.spaceT("left"),insetInlineStart:Hr.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:Hr.spaceT("right"),insetInlineEnd:Hr.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(ni,{insetStart:ni.insetInlineStart,insetEnd:ni.insetInlineEnd});var ri={ring:{transform:Ur.ring},ringColor:Hr.colors("--chakra-ring-color"),ringOffset:Hr.prop("--chakra-ring-offset-width"),ringOffsetColor:Hr.colors("--chakra-ring-offset-color"),ringInset:Hr.prop("--chakra-ring-inset")},ii={margin:Hr.spaceT("margin"),marginTop:Hr.spaceT("marginTop"),marginBlockStart:Hr.spaceT("marginBlockStart"),marginRight:Hr.spaceT("marginRight"),marginInlineEnd:Hr.spaceT("marginInlineEnd"),marginBottom:Hr.spaceT("marginBottom"),marginBlockEnd:Hr.spaceT("marginBlockEnd"),marginLeft:Hr.spaceT("marginLeft"),marginInlineStart:Hr.spaceT("marginInlineStart"),marginX:Hr.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:Hr.spaceT("marginInline"),marginY:Hr.spaceT(["marginTop","marginBottom"]),marginBlock:Hr.spaceT("marginBlock"),padding:Hr.space("padding"),paddingTop:Hr.space("paddingTop"),paddingBlockStart:Hr.space("paddingBlockStart"),paddingRight:Hr.space("paddingRight"),paddingBottom:Hr.space("paddingBottom"),paddingBlockEnd:Hr.space("paddingBlockEnd"),paddingLeft:Hr.space("paddingLeft"),paddingInlineStart:Hr.space("paddingInlineStart"),paddingInlineEnd:Hr.space("paddingInlineEnd"),paddingX:Hr.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:Hr.space("paddingInline"),paddingY:Hr.space(["paddingTop","paddingBottom"]),paddingBlock:Hr.space("paddingBlock")};Object.assign(ii,{m:ii.margin,mt:ii.marginTop,mr:ii.marginRight,me:ii.marginInlineEnd,marginEnd:ii.marginInlineEnd,mb:ii.marginBottom,ml:ii.marginLeft,ms:ii.marginInlineStart,marginStart:ii.marginInlineStart,mx:ii.marginX,my:ii.marginY,p:ii.padding,pt:ii.paddingTop,py:ii.paddingY,px:ii.paddingX,pb:ii.paddingBottom,pl:ii.paddingLeft,ps:ii.paddingInlineStart,paddingStart:ii.paddingInlineStart,pr:ii.paddingRight,pe:ii.paddingInlineEnd,paddingEnd:ii.paddingInlineEnd});var ai={textDecorationColor:Hr.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:Hr.shadows("textShadow")},oi={clipPath:!0,transform:Hr.propT("transform",Ur.transform),transformOrigin:!0,translateX:Hr.spaceT("--chakra-translate-x"),translateY:Hr.spaceT("--chakra-translate-y"),skewX:Hr.degreeT("--chakra-skew-x"),skewY:Hr.degreeT("--chakra-skew-y"),scaleX:Hr.prop("--chakra-scale-x"),scaleY:Hr.prop("--chakra-scale-y"),scale:Hr.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:Hr.degreeT("--chakra-rotate")},si={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:Hr.prop("transitionDuration","transition.duration"),transitionProperty:Hr.prop("transitionProperty","transition.property"),transitionTimingFunction:Hr.prop("transitionTimingFunction","transition.easing")},li={fontFamily:Hr.prop("fontFamily","fonts"),fontSize:Hr.prop("fontSize","fontSizes",Ur.px),fontWeight:Hr.prop("fontWeight","fontWeights"),lineHeight:Hr.prop("lineHeight","lineHeights"),letterSpacing:Hr.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},ci={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:Hr.spaceT("scrollMargin"),scrollMarginTop:Hr.spaceT("scrollMarginTop"),scrollMarginBottom:Hr.spaceT("scrollMarginBottom"),scrollMarginLeft:Hr.spaceT("scrollMarginLeft"),scrollMarginRight:Hr.spaceT("scrollMarginRight"),scrollMarginX:Hr.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:Hr.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:Hr.spaceT("scrollPadding"),scrollPaddingTop:Hr.spaceT("scrollPaddingTop"),scrollPaddingBottom:Hr.spaceT("scrollPaddingBottom"),scrollPaddingLeft:Hr.spaceT("scrollPaddingLeft"),scrollPaddingRight:Hr.spaceT("scrollPaddingRight"),scrollPaddingX:Hr.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:Hr.spaceT(["scrollPaddingTop","scrollPaddingBottom"])};function ui(e){return T(e)&&e.reference?e.reference:String(e)}var di=(e,...t)=>t.map(ui).join(` ${e} `).replace(/calc/g,""),hi=(...e)=>`calc(${di("+",...e)})`,fi=(...e)=>`calc(${di("-",...e)})`,pi=(...e)=>`calc(${di("*",...e)})`,mi=(...e)=>`calc(${di("/",...e)})`,gi=e=>{const t=ui(e);return null==t||Number.isNaN(parseFloat(t))?pi(t,-1):String(t).startsWith("-")?String(t).slice(1):`-${t}`},vi=Object.assign((e=>({add:(...t)=>vi(hi(e,...t)),subtract:(...t)=>vi(fi(e,...t)),multiply:(...t)=>vi(pi(e,...t)),divide:(...t)=>vi(mi(e,...t)),negate:()=>vi(gi(e)),toString:()=>e.toString()})),{add:hi,subtract:fi,multiply:pi,divide:mi,negate:gi});function yi(e){const t=function(e,t="-"){return e.replace(/\s+/g,t)}(e.toString());return t.includes("\\.")||Number.isInteger(parseFloat(e.toString()))?e:t.replace(".","\\.")}function bi(e,t){return`var(${yi(e)}${t?`, ${t}`:""})`}var xi=(e,t)=>`${e}:hover ${t}, ${e}[data-hover] ${t}`,_i=(e,t)=>`${e}:focus ${t}, ${e}[data-focus] ${t}`,wi=(e,t)=>`${e}:focus-visible ${t}`,Mi=(e,t)=>`${e}:focus-within ${t}`,Si=(e,t)=>`${e}:active ${t}, ${e}[data-active] ${t}`,Ai=(e,t)=>`${e}:disabled ${t}, ${e}[data-disabled] ${t}`,Ei=(e,t)=>`${e}:invalid ${t}, ${e}[data-invalid] ${t}`,Ci=(e,t)=>`${e}:checked ${t}, ${e}[data-checked] ${t}`,Ti=e=>Pi((t=>e(t,"&")),"[role=group]","[data-group]",".group"),Ri=e=>Pi((t=>e(t,"~ &")),"[data-peer]",".peer"),Pi=(e,...t)=>t.map(e).join(", "),Li={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within",_focusVisible:"&:focus-visible, &[data-focus-visible]",_disabled:"&[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty",_expanded:"&[aria-expanded=true], &[data-expanded]",_checked:"&[aria-checked=true], &[data-checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate]",_groupHover:Ti(xi),_peerHover:Ri(xi),_groupFocus:Ti(_i),_peerFocus:Ri(_i),_groupFocusVisible:Ti(wi),_peerFocusVisible:Ri(wi),_groupActive:Ti(Si),_peerActive:Ri(Si),_groupDisabled:Ti(Ai),_peerDisabled:Ri(Ai),_groupInvalid:Ti(Ei),_peerInvalid:Ri(Ei),_groupChecked:Ti(Ci),_peerChecked:Ri(Ci),_groupFocusWithin:Ti(Mi),_peerFocusWithin:Ri(Mi),_peerPlaceholderShown:Ri(((e,t)=>`${e}:placeholder-shown ${t}`)),_placeholder:"&::placeholder",_placeholderShown:"&:placeholder-shown",_fullScreen:"&:fullscreen",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]"},Di=z(Li);function Ii(e,t){return function(e,t,n){const r=function(e,t=""){return`--${function(e,t=""){return[t,yi(e)].filter(Boolean).join("-")}(e,t)}`}(e,n);return{variable:r,reference:bi(r,void 0)}}(String(e).replace(/\./g,"-"),0,t)}var ki=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur"];var Bi=a()({},Gr,Vr,jr,qr,Jr,Xr,ri,Zr,Yr,ti,ni,Wr,ii,ci,li,ai,oi,$r,si),Fi=Object.assign({},ii,Jr,qr,Yr,ni),Ni=z(Fi),Oi=[...z(Bi),...Di],zi={...Bi,...Li},Ui=e=>e in zi,Hi=(e,t)=>e.startsWith("--")&&L(t)&&!D(t),Gi=(e,t)=>{if(null==t)return t;const n=t=>{var n,r;return null==(r=null==(n=e.__cssMap)?void 0:n[t])?void 0:r.varRef},r=e=>n(e)??e,i=t.split(",").map((e=>e.trim())),[a,o]=i;return n(a)??r(o)??r(t)};var Vi=e=>t=>function(e){const{configs:t={},pseudos:n={},theme:r}=e,i=(e,o=!1)=>{var s;const l=he(e,r),c=(e=>t=>{if(!t.__breakpoints)return e;const{isResponsive:n,toArrayValue:r,media:i}=t.__breakpoints,a={};for(const o in e){let s=he(e[o],t);if(null==s)continue;if(s=T(s)&&n(s)?r(s):s,!Array.isArray(s)){a[o]=s;continue}const l=s.slice(0,i.length).length;for(let e=0;e<l;e+=1){const t=null==i?void 0:i[e];t?(a[t]=a[t]||{},null!=s[e]&&(a[t][o]=s[e])):a[o]=s[e]}}return a})(l)(r);let u={};for(let e in c){let d=he(c[e],r);e in n&&(e=n[e]),Hi(e,d)&&(d=Gi(r,d));let h=t[e];if(!0===h&&(h={property:e}),T(d)){u[e]=u[e]??{},u[e]=a()({},u[e],i(d,!0));continue}let f=(null==(s=null==h?void 0:h.transform)?void 0:s.call(h,d,r,l))??d;f=(null==h?void 0:h.processResult)?i(f,!0):f;const p=he(null==h?void 0:h.property,r);if(!o&&(null==h?void 0:h.static)){const e=he(h.static,r);u=a()({},u,e)}if(p&&Array.isArray(p))for(const e of p)u[e]=f;else p?"&"===p&&T(f)?u=a()({},u,f):u[p]=f:T(f)?u=a()({},u,f):u[e]=f}return u};return i}({theme:t,pseudos:Li,configs:Bi})(e);function ji(e,t){for(let n=t+1;n<e.length;n++)if(null!=e[n])return n;return-1}function Wi(e){return k(e,["styleConfig","size","variant","colorScheme"])}var Xi=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,qi=Nn((function(e){return Xi.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),Yi=function(e){return"theme"!==e},Zi=function(e){return"string"==typeof e&&e.charCodeAt(0)>96?qi:Yi},Ji=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!=typeof r&&n&&(r=e.__emotion_forwardProp),r},$i=n.useInsertionEffect?n.useInsertionEffect:function(e){e()},Ki=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return nr(t,n,r),$i((function(){return rr(t,n,r)})),null};var Qi=function e(n,r){var i,a,o=n.__emotion_real===n,s=o&&n.__emotion_base||n;void 0!==r&&(i=r.label,a=r.target);var l=Ji(n,r,o),c=l||Zi(s),u=!c("as");return function(){var d=arguments,h=o&&void 0!==n.__emotion_styles?n.__emotion_styles.slice(0):[];if(void 0!==i&&h.push("label:"+i+";"),null==d[0]||void 0===d[0].raw)h.push.apply(h,d);else{h.push(d[0][0]);for(var f=d.length,p=1;p<f;p++)h.push(d[p],d[0][p])}var m=Zn((function(e,n,r){var i=u&&e.as||s,o="",d=[],f=e;if(null==e.theme){for(var p in f={},e)f[p]=e[p];f.theme=(0,t.useContext)(Jn)}"string"==typeof e.className?o=tr(n.registered,d,e.className):null!=e.className&&(o=e.className+" ");var m=qn(h.concat(d),n.registered,f);o+=n.key+"-"+m.name,void 0!==a&&(o+=" "+a);var g=u&&void 0===l?Zi(i):c,v={};for(var y in e)u&&"as"===y||g(y)&&(v[y]=e[y]);return v.className=o,v.ref=r,(0,t.createElement)(t.Fragment,null,(0,t.createElement)(Ki,{cache:n,serialized:m,isStringTag:"string"==typeof i}),(0,t.createElement)(i,v))}));return m.displayName=void 0!==i?i:"Styled("+("string"==typeof s?s:s.displayName||s.name||"Component")+")",m.defaultProps=n.defaultProps,m.__emotion_real=m,m.__emotion_base=s,m.__emotion_styles=h,m.__emotion_forwardProp=l,Object.defineProperty(m,"toString",{value:function(){return"."+a}}),m.withComponent=function(t,n){return e(t,In({},r,n,{shouldForwardProp:Ji(m,n,!0)})).apply(void 0,h)},m}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){Qi[e]=Qi(e)}));const ea=Qi;var ta=i(9590),na=i.n(ta);function ra(){const e=(0,t.useContext)(Jn);if(!e)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return e}function ia(e){const{cssVarsRoot:n,theme:r,children:i}=e,o=(0,t.useMemo)((()=>function(e){var t;const n=function(e){const{__cssMap:t,__cssVars:n,__breakpoints:r,...i}=e;return i}(e),r=function(e){return function(e,t){const n={};return t.forEach((t=>{t in e&&(n[t]=e[t])})),n}(e,ki)}(n),i=function(e){return e.semanticTokens}(n),o=function({tokens:e,semanticTokens:t}){const n=Object.entries(Me(e)??{}).map((([e,t])=>[e,{isSemantic:!1,value:t}])),r=Object.entries(Me(t,1)??{}).map((([e,t])=>[e,{isSemantic:!0,value:t}]));return U([...n,...r])}({tokens:r,semanticTokens:i}),s=null==(t=n.config)?void 0:t.cssVarPrefix,{cssMap:l,cssVars:c}=function(e,t){let n={};const r={};for(const[i,o]of Object.entries(e)){const{isSemantic:s,value:l}=o,{variable:c,reference:u}=Ii(i,null==t?void 0:t.cssVarPrefix);if(!s){if(i.startsWith("space")){const e=i.split("."),[t,...n]=e,a=`${t}.-${n.join(".")}`,o=vi.negate(l),s=vi.negate(u);r[a]={value:o,var:c,varRef:s}}n[c]=l,r[i]={value:l,var:c,varRef:u};continue}const d=n=>{const r=[String(i).split(".")[0],n].join(".");if(!e[r])return n;const{reference:a}=Ii(r,null==t?void 0:t.cssVarPrefix);return a},h=T(l)?l:{default:l};n=a()(n,Object.entries(h).reduce(((e,[t,n])=>{var r;const i=d(n);return"default"===t?(e[c]=i,e):(e[(null==(r=Li)?void 0:r[t])??t]={[c]:i},e)}),{})),r[i]={value:u,var:c,varRef:u}}return{cssVars:n,cssMap:r}}(o,{cssVarPrefix:s});return Object.assign(n,{__cssVars:{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0",...c},__cssMap:l,__breakpoints:q(n.breakpoints)}),n}(r)),[r]);return t.createElement(Kn,{theme:o},t.createElement(aa,{root:n}),i)}function aa({root:e=":host, :root"}){const n=[e,"[data-theme]"].join(",");return t.createElement(ar,{styles:e=>({[n]:e.__cssVars})})}var[oa,sa]=cr({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "});function la(){const{colorMode:e}=bt();return t.createElement(ar,{styles:t=>{const n=he(F(t,"styles.global"),{theme:t,colorMode:e});if(n)return Vi(n)(t)}})}var ca=new Set([...Oi,"textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"]),ua=new Set(["htmlWidth","htmlHeight","htmlSize"]);function da(e){return ua.has(e)||!ca.has(e)}function ha(e,t){const{baseStyle:n,...r}=t??{};r.shouldForwardProp||(r.shouldForwardProp=da);const i=(({baseStyle:e})=>t=>{const{theme:n,css:r,__css:i,sx:a,...o}=t,s=N(o,((e,t)=>Ui(t))),l=he(e,t),c=Object.assign({},i,l,O(s),a),u=Vi(c)(t.theme);return r?[u,r]:u})({baseStyle:n});return ea(e,r)(i)}function fa(e){return(0,t.forwardRef)(e)}function pa(e,n={}){const{styleConfig:r,...i}=n,{theme:o,colorMode:s}={...bt(),theme:ra()},l=F(o,`components.${e}`),c=r||l,u=a()({theme:o,colorMode:s},(null==c?void 0:c.defaultProps)??{},O(k(i,["children"]))),d=(0,t.useRef)({});if(c){const e=(h=c,e=>{const{variant:t,size:n,theme:r}=e,i=function(e){const t=e.__breakpoints;return function(e,n,r,i){var o,s;if(!t)return;const l={},c=function(e,t){return A(e)?e:T(e)?t(e):null!=e?[e]:void 0}(r,t.toArrayValue);if(!c)return l;const u=c.length,d=1===u,h=!!e.parts;for(let r=0;r<u;r++){const u=t.details[r],f=t.details[ji(c,r)],p=X(u.minW,null==f?void 0:f._minW),m=he(null==(o=e[n])?void 0:o[c[r]],i);m&&(h?null==(s=e.parts)||s.forEach((e=>{a()(l,{[e]:d?m[e]:{[p]:m[e]}})})):h?l[p]=m:d?a()(l,m):l[p]=m)}return l}}(r);return a()({},he(h.baseStyle??{},e),i(h,"sizes",n,e),i(h,"variants",t,e))}),t=e(u);na()(d.current,t)||(d.current=t)}var h;return d.current}function ma(e,t={}){return pa(e,t)}function ga(e,t={}){return pa(e,t)}var va=function(){const e=new Map;return new Proxy(ha,{apply:(e,t,n)=>ha(...n),get:(t,n)=>(e.has(n)||e.set(n,ha(n)),e.get(n))})}(),ya={body:{classList:{add(){},remove(){}}},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:()=>({initEvent(){}}),createElement:()=>({children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName:()=>[]})},ba=()=>{},xa={document:ya,navigator:{userAgent:""},CustomEvent:function(){return this},addEventListener:ba,removeEventListener:ba,getComputedStyle:()=>({getPropertyValue:()=>""}),matchMedia:()=>({matches:!1,addListener:ba,removeListener:ba}),requestAnimationFrame:e=>"undefined"==typeof setTimeout?(e(),null):setTimeout(e,0),cancelAnimationFrame(e){"undefined"!=typeof setTimeout&&clearTimeout(e)},setTimeout:()=>0,clearTimeout:ba,setInterval:()=>0,clearInterval:ba},_a=Q?{window,document}:{window:xa,document:ya},wa=(0,t.createContext)(_a);function Ma(e){const{children:n,environment:r}=e,[i,a]=(0,t.useState)(null),[o,s]=(0,t.useState)(!1);(0,t.useEffect)((()=>s(!0)),[]);const l=(0,t.useMemo)((()=>{const e=null==i?void 0:i.ownerDocument,t=null==i?void 0:i.ownerDocument.defaultView;return r??(e?{document:e,window:t}:void 0)??_a}),[i,r]);return t.createElement(wa.Provider,{value:l},n,o&&t.createElement("span",{ref:e=>{(0,t.startTransition)((()=>{e&&a(e)}))}}))}var Sa=e=>{const{children:n,colorModeManager:r,portalZIndex:i,resetCSS:a=!0,theme:o={},environment:s,cssVarsRoot:l}=e,c=t.createElement(Ma,{environment:s},n);return t.createElement(ia,{theme:o,cssVarsRoot:l},t.createElement(Et,{colorModeManager:r,options:o.config},a&&t.createElement(sr,null),t.createElement(la,null),i?t.createElement(pr,{zIndex:i},c):c))};function Aa(e,t={}){let n=!1;function r(t){const n=`chakra-${(["container","root"].includes(t??"")?[e]:[e,t]).filter(Boolean).join("__")}`;return{className:n,selector:`.${n}`,toString:()=>t}}return{parts:function(...i){!function(){if(n)throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?");n=!0}();for(const e of i)t[e]=r(e);return Aa(e,t)},toPart:r,extend:function(...n){for(const e of n)e in t||(t[e]=r(e));return Aa(e,t)},selectors:function(){const e=Object.fromEntries(Object.entries(t).map((([e,t])=>[e,t.selector])));return e},classnames:function(){const e=Object.fromEntries(Object.entries(t).map((([e,t])=>[e,t.className])));return e},get keys(){return Object.keys(t)},__type:{}}}var Ea=Aa("accordion").parts("root","container","button","panel").extend("icon"),Ca=Aa("alert").parts("title","description","container").extend("icon","spinner"),Ta=Aa("avatar").parts("label","badge","container").extend("excessLabel","group"),Ra=Aa("breadcrumb").parts("link","item","container").extend("separator"),Pa=(Aa("button").parts(),Aa("checkbox").parts("control","icon","container").extend("label")),La=(Aa("progress").parts("track","filledTrack").extend("label"),Aa("drawer").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer")),Da=Aa("editable").parts("preview","input","textarea"),Ia=Aa("form").parts("container","requiredIndicator","helperText"),ka=Aa("formError").parts("text","icon"),Ba=Aa("input").parts("addon","field","element"),Fa=Aa("list").parts("container","item","icon"),Na=Aa("menu").parts("button","list","item").extend("groupTitle","command","divider"),Oa=Aa("modal").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),za=Aa("numberinput").parts("root","field","stepperGroup","stepper"),Ua=(Aa("pininput").parts("field"),Aa("popover").parts("content","header","body","footer").extend("popper","arrow","closeButton")),Ha=Aa("progress").parts("label","filledTrack","track"),Ga=Aa("radio").parts("container","control","label"),Va=Aa("select").parts("field","icon"),ja=Aa("slider").parts("container","track","thumb","filledTrack"),Wa=Aa("stat").parts("container","label","helpText","number","icon"),Xa=Aa("switch").parts("container","track","thumb"),qa=Aa("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),Ya=Aa("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),Za=Aa("tag").parts("container","label","closeButton");function Ja(e,t){(function(e){return"string"==typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!==e.indexOf("%")}(e);return e=360===t?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:e=360===t?(e<0?e%t+t:e%t)/parseFloat(String(t)):e%t/parseFloat(String(t))}function $a(e){return Math.min(1,Math.max(0,e))}function Ka(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Qa(e){return e<=1?"".concat(100*Number(e),"%"):e}function eo(e){return 1===e.length?"0"+e:String(e)}function to(e,t,n){e=Ja(e,255),t=Ja(t,255),n=Ja(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),a=0,o=0,s=(r+i)/2;if(r===i)o=0,a=0;else{var l=r-i;switch(o=s>.5?l/(2-r-i):l/(r+i),r){case e:a=(t-n)/l+(t<n?6:0);break;case t:a=(n-e)/l+2;break;case n:a=(e-t)/l+4}a/=6}return{h:a,s:o,l:s}}function no(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*n*(t-e):n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function ro(e,t,n){e=Ja(e,255),t=Ja(t,255),n=Ja(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),a=0,o=r,s=r-i,l=0===r?0:s/r;if(r===i)a=0;else{switch(r){case e:a=(t-n)/s+(t<n?6:0);break;case t:a=(n-e)/s+2;break;case n:a=(e-t)/s+4}a/=6}return{h:a,s:l,v:o}}function io(e,t,n,r){var i=[eo(Math.round(e).toString(16)),eo(Math.round(t).toString(16)),eo(Math.round(n).toString(16))];return r&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function ao(e){return oo(e)/255}function oo(e){return parseInt(e,16)}var so={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};var lo="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),co="[\\s|\\(]+(".concat(lo,")[,|\\s]+(").concat(lo,")[,|\\s]+(").concat(lo,")\\s*\\)?"),uo="[\\s|\\(]+(".concat(lo,")[,|\\s]+(").concat(lo,")[,|\\s]+(").concat(lo,")[,|\\s]+(").concat(lo,")\\s*\\)?"),ho={CSS_UNIT:new RegExp(lo),rgb:new RegExp("rgb"+co),rgba:new RegExp("rgba"+uo),hsl:new RegExp("hsl"+co),hsla:new RegExp("hsla"+uo),hsv:new RegExp("hsv"+co),hsva:new RegExp("hsva"+uo),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function fo(e){return Boolean(ho.CSS_UNIT.exec(String(e)))}var po=function(){function e(t,n){var r;if(void 0===t&&(t=""),void 0===n&&(n={}),t instanceof e)return t;"number"==typeof t&&(t=function(e){return{r:e>>16,g:(65280&e)>>8,b:255&e}}(t)),this.originalInput=t;var i=function(e){var t={r:0,g:0,b:0},n=1,r=null,i=null,a=null,o=!1,s=!1;return"string"==typeof e&&(e=function(e){if(0===(e=e.trim().toLowerCase()).length)return!1;var t=!1;if(so[e])e=so[e],t=!0;else if("transparent"===e)return{r:0,g:0,b:0,a:0,format:"name"};var n=ho.rgb.exec(e);return n?{r:n[1],g:n[2],b:n[3]}:(n=ho.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=ho.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=ho.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=ho.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=ho.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=ho.hex8.exec(e))?{r:oo(n[1]),g:oo(n[2]),b:oo(n[3]),a:ao(n[4]),format:t?"name":"hex8"}:(n=ho.hex6.exec(e))?{r:oo(n[1]),g:oo(n[2]),b:oo(n[3]),format:t?"name":"hex"}:(n=ho.hex4.exec(e))?{r:oo(n[1]+n[1]),g:oo(n[2]+n[2]),b:oo(n[3]+n[3]),a:ao(n[4]+n[4]),format:t?"name":"hex8"}:!!(n=ho.hex3.exec(e))&&{r:oo(n[1]+n[1]),g:oo(n[2]+n[2]),b:oo(n[3]+n[3]),format:t?"name":"hex"}}(e)),"object"==typeof e&&(fo(e.r)&&fo(e.g)&&fo(e.b)?(t=function(e,t,n){return{r:255*Ja(e,255),g:255*Ja(t,255),b:255*Ja(n,255)}}(e.r,e.g,e.b),o=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):fo(e.h)&&fo(e.s)&&fo(e.v)?(r=Qa(e.s),i=Qa(e.v),t=function(e,t,n){e=6*Ja(e,360),t=Ja(t,100),n=Ja(n,100);var r=Math.floor(e),i=e-r,a=n*(1-t),o=n*(1-i*t),s=n*(1-(1-i)*t),l=r%6;return{r:255*[n,o,a,a,s,n][l],g:255*[s,n,n,o,a,a][l],b:255*[a,a,s,n,n,o][l]}}(e.h,r,i),o=!0,s="hsv"):fo(e.h)&&fo(e.s)&&fo(e.l)&&(r=Qa(e.s),a=Qa(e.l),t=function(e,t,n){var r,i,a;if(e=Ja(e,360),t=Ja(t,100),n=Ja(n,100),0===t)i=n,a=n,r=n;else{var o=n<.5?n*(1+t):n+t-n*t,s=2*n-o;r=no(s,o,e+1/3),i=no(s,o,e),a=no(s,o,e-1/3)}return{r:255*r,g:255*i,b:255*a}}(e.h,r,a),o=!0,s="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(n=e.a)),n=Ka(n),{ok:o,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}(t);this.originalInput=t,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=null!==(r=n.format)&&void 0!==r?r:i.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},e.prototype.getLuminance=function(){var e=this.toRgb(),t=e.r/255,n=e.g/255,r=e.b/255;return.2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(e){return this.a=Ka(e),this.roundA=Math.round(100*this.a)/100,this},e.prototype.toHsv=function(){var e=ro(this.r,this.g,this.b);return{h:360*e.h,s:e.s,v:e.v,a:this.a}},e.prototype.toHsvString=function(){var e=ro(this.r,this.g,this.b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1===this.a?"hsv(".concat(t,", ").concat(n,"%, ").concat(r,"%)"):"hsva(".concat(t,", ").concat(n,"%, ").concat(r,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var e=to(this.r,this.g,this.b);return{h:360*e.h,s:e.s,l:e.l,a:this.a}},e.prototype.toHslString=function(){var e=to(this.r,this.g,this.b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1===this.a?"hsl(".concat(t,", ").concat(n,"%, ").concat(r,"%)"):"hsla(".concat(t,", ").concat(n,"%, ").concat(r,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(e){return void 0===e&&(e=!1),io(this.r,this.g,this.b,e)},e.prototype.toHexString=function(e){return void 0===e&&(e=!1),"#"+this.toHex(e)},e.prototype.toHex8=function(e){return void 0===e&&(e=!1),function(e,t,n,r,i){var a,o=[eo(Math.round(e).toString(16)),eo(Math.round(t).toString(16)),eo(Math.round(n).toString(16)),eo((a=r,Math.round(255*parseFloat(a)).toString(16)))];return i&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))&&o[3].startsWith(o[3].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this.r,this.g,this.b,this.a,e)},e.prototype.toHex8String=function(e){return void 0===e&&(e=!1),"#"+this.toHex8(e)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),n=Math.round(this.b);return 1===this.a?"rgb(".concat(e,", ").concat(t,", ").concat(n,")"):"rgba(".concat(e,", ").concat(t,", ").concat(n,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var e=function(e){return"".concat(Math.round(100*Ja(e,255)),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var e=function(e){return Math.round(100*Ja(e,255))};return 1===this.a?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(0===this.a)return"transparent";if(this.a<1)return!1;for(var e="#"+io(this.r,this.g,this.b,!1),t=0,n=Object.entries(so);t<n.length;t++){var r=n[t],i=r[0];if(e===r[1])return i}return!1},e.prototype.toString=function(e){var t=Boolean(e);e=null!=e?e:this.format;var n=!1,r=this.a<1&&this.a>=0;return t||!r||!e.startsWith("hex")&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this.a?this.toName():this.toRgbString()},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.l+=t/100,n.l=$a(n.l),new e(n)},e.prototype.brighten=function(t){void 0===t&&(t=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),new e(n)},e.prototype.darken=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.l-=t/100,n.l=$a(n.l),new e(n)},e.prototype.tint=function(e){return void 0===e&&(e=10),this.mix("white",e)},e.prototype.shade=function(e){return void 0===e&&(e=10),this.mix("black",e)},e.prototype.desaturate=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.s-=t/100,n.s=$a(n.s),new e(n)},e.prototype.saturate=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.s+=t/100,n.s=$a(n.s),new e(n)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var n=this.toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,new e(n)},e.prototype.mix=function(t,n){void 0===n&&(n=50);var r=this.toRgb(),i=new e(t).toRgb(),a=n/100;return new e({r:(i.r-r.r)*a+r.r,g:(i.g-r.g)*a+r.g,b:(i.b-r.b)*a+r.b,a:(i.a-r.a)*a+r.a})},e.prototype.analogous=function(t,n){void 0===t&&(t=6),void 0===n&&(n=30);var r=this.toHsl(),i=360/n,a=[this];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,a.push(new e(r));return a},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){void 0===t&&(t=6);for(var n=this.toHsv(),r=n.h,i=n.s,a=n.v,o=[],s=1/t;t--;)o.push(new e({h:r,s:i,v:a})),a=(a+s)%1;return o},e.prototype.splitcomplement=function(){var t=this.toHsl(),n=t.h;return[this,new e({h:(n+72)%360,s:t.s,l:t.l}),new e({h:(n+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var n=this.toRgb(),r=new e(t).toRgb();return new e({r:r.r+(n.r-r.r)*n.a,g:r.g+(n.g-r.g)*n.a,b:r.b+(n.b-r.b)*n.a})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var n=this.toHsl(),r=n.h,i=[this],a=360/t,o=1;o<t;o++)i.push(new e({h:(r+o*a)%360,s:n.s,l:n.l}));return i},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}();function mo(e){if(void 0===e&&(e={}),void 0!==e.count&&null!==e.count){var t=e.count,n=[];for(e.count=void 0;t>n.length;)e.count=null,e.seed&&(e.seed+=1),n.push(mo(e));return e.count=t,n}var r=function(e,t){var n=vo(function(e){var t=parseInt(e,10);if(!Number.isNaN(t)&&t<360&&t>0)return[t,t];if("string"==typeof e){var n=bo.find((function(t){return t.name===e}));if(n){var r=yo(n);if(r.hueRange)return r.hueRange}var i=new po(e);if(i.isValid){var a=i.toHsv().h;return[a,a]}}return[0,360]}(e),t);return n<0&&(n=360+n),n}(e.hue,e.seed),i=function(e,t){if("monochrome"===t.hue)return 0;if("random"===t.luminosity)return vo([0,100],t.seed);var n=go(e).saturationRange,r=n[0],i=n[1];switch(t.luminosity){case"bright":r=55;break;case"dark":r=i-10;break;case"light":i=55}return vo([r,i],t.seed)}(r,e),a=function(e,t,n){var r=function(e,t){for(var n=go(e).lowerBounds,r=0;r<n.length-1;r++){var i=n[r][0],a=n[r][1],o=n[r+1][0],s=n[r+1][1];if(t>=i&&t<=o){var l=(s-a)/(o-i);return l*t+(a-l*i)}}return 0}(e,t),i=100;switch(n.luminosity){case"dark":i=r+20;break;case"light":r=(i+r)/2;break;case"random":r=0,i=100}return vo([r,i],n.seed)}(r,i,e),o={h:r,s:i,v:a};return void 0!==e.alpha&&(o.a=e.alpha),new po(o)}function go(e){e>=334&&e<=360&&(e-=360);for(var t=0,n=bo;t<n.length;t++){var r=yo(n[t]);if(r.hueRange&&e>=r.hueRange[0]&&e<=r.hueRange[1])return r}throw Error("Color not found")}function vo(e,t){if(void 0===t)return Math.floor(e[0]+Math.random()*(e[1]+1-e[0]));var n=e[1]||1,r=e[0]||0,i=(t=(9301*t+49297)%233280)/233280;return Math.floor(r+i*(n-r))}function yo(e){var t=e.lowerBounds[0][0],n=e.lowerBounds[e.lowerBounds.length-1][0],r=e.lowerBounds[e.lowerBounds.length-1][1],i=e.lowerBounds[0][1];return{name:e.name,hueRange:e.hueRange,lowerBounds:e.lowerBounds,saturationRange:[t,n],brightnessRange:[r,i]}}var bo=[{name:"monochrome",hueRange:null,lowerBounds:[[0,0],[100,0]]},{name:"red",hueRange:[-26,18],lowerBounds:[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]},{name:"orange",hueRange:[19,46],lowerBounds:[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]},{name:"yellow",hueRange:[47,62],lowerBounds:[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]},{name:"green",hueRange:[63,178],lowerBounds:[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]},{name:"blue",hueRange:[179,257],lowerBounds:[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]},{name:"purple",hueRange:[258,282],lowerBounds:[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]},{name:"pink",hueRange:[283,334],lowerBounds:[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]]}],xo=(e,t,n)=>{const r=F(e,`colors.${t}`,t),{isValid:i}=new po(r);return i?r:n},_o=(e,t)=>n=>{const r=xo(n,e);return new po(r).setAlpha(t).toRgbString()};function wo(e="1rem",t="rgba(255, 255, 255, 0.15)"){return{backgroundImage:`linear-gradient(\n    45deg,\n    ${t} 25%,\n    transparent 25%,\n    transparent 50%,\n    ${t} 50%,\n    ${t} 75%,\n    transparent 75%,\n    transparent\n  )`,backgroundSize:`${e} ${e}`}}function Mo(e){const t=mo().toHexString();return!e||R(e)?t:e.string&&e.colors?function(e,t){let n=0;if(0===e.length)return t[0];for(let t=0;t<e.length;t+=1)n=e.charCodeAt(t)+((n<<5)-n),n&=n;return n=(n%t.length+t.length)%t.length,t[n]}(e.string,e.colors):e.string&&!e.colors?function(e){let t=0;if(0===e.length)return t.toString();for(let n=0;n<e.length;n+=1)t=e.charCodeAt(n)+((t<<5)-t),t&=t;let n="#";for(let e=0;e<3;e+=1)n+=`00${(t>>8*e&255).toString(16)}`.substr(-2);return n}(e.string):e.colors&&!e.string?function(e){return e[Math.floor(Math.random()*e.length)]}(e.colors):t}function So(e,t){return n=>"dark"===n.colorMode?t:e}function Ao(e){const{orientation:t,vertical:n,horizontal:r}=e;return t?"vertical"===t?n:r:{}}function Eo(e){return T(e)&&e.reference?e.reference:String(e)}var Co=(e,...t)=>t.map(Eo).join(` ${e} `).replace(/calc/g,""),To=(...e)=>`calc(${Co("+",...e)})`,Ro=(...e)=>`calc(${Co("-",...e)})`,Po=(...e)=>`calc(${Co("*",...e)})`,Lo=(...e)=>`calc(${Co("/",...e)})`,Do=e=>{const t=Eo(e);return null==t||Number.isNaN(parseFloat(t))?Po(t,-1):String(t).startsWith("-")?String(t).slice(1):`-${t}`},Io=Object.assign((e=>({add:(...t)=>Io(To(e,...t)),subtract:(...t)=>Io(Ro(e,...t)),multiply:(...t)=>Io(Po(e,...t)),divide:(...t)=>Io(Lo(e,...t)),negate:()=>Io(Do(e)),toString:()=>e.toString()})),{add:To,subtract:Ro,multiply:Po,divide:Lo,negate:Do});function ko(e){const t=function(e,t="-"){return e.replace(/\s+/g,t)}(e.toString());return t.includes("\\.")?e:function(e){return!Number.isInteger(parseFloat(e.toString()))}(e)?t.replace(".","\\."):e}function Bo(e,t){return`var(${ko(e)}${t?`, ${t}`:""})`}function Fo(e,t){const n=function(e,t=""){return`--${function(e,t=""){return[t,ko(e)].filter(Boolean).join("-")}(e,t)}`}(e,null==t?void 0:t.prefix);return{variable:n,reference:Bo(n,(r=null==t?void 0:t.fallback,"string"==typeof r?r:null==r?void 0:r.reference))};var r}var No={parts:Ea.keys,baseStyle:{root:{},container:{borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},button:{transitionProperty:"common",transitionDuration:"normal",fontSize:"1rem",_focusVisible:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:4,py:2},panel:{pt:2,px:4,pb:5},icon:{fontSize:"1.25em"}}};function Oo(e){const{theme:t,colorScheme:n}=e;return So(xo(t,`${n}.100`,n),_o(`${n}.200`,.16)(t))(e)}var zo={subtle:e=>{const{colorScheme:t}=e;return{container:{bg:Oo(e)},icon:{color:So(`${t}.500`,`${t}.200`)(e)},spinner:{color:So(`${t}.500`,`${t}.200`)(e)}}},"left-accent":e=>{const{colorScheme:t}=e;return{container:{paddingStart:3,borderStartWidth:"4px",borderStartColor:So(`${t}.500`,`${t}.200`)(e),bg:Oo(e)},icon:{color:So(`${t}.500`,`${t}.200`)(e)},spinner:{color:So(`${t}.500`,`${t}.200`)(e)}}},"top-accent":e=>{const{colorScheme:t}=e;return{container:{pt:2,borderTopWidth:"4px",borderTopColor:So(`${t}.500`,`${t}.200`)(e),bg:Oo(e)},icon:{color:So(`${t}.500`,`${t}.200`)(e)},spinner:{color:So(`${t}.500`,`${t}.200`)(e)}}},solid:e=>{const{colorScheme:t}=e;return{container:{bg:So(`${t}.500`,`${t}.200`)(e),color:So("white","gray.900")(e)}}}},Uo={parts:Ca.keys,baseStyle:{container:{px:4,py:3},title:{fontWeight:"bold",lineHeight:6,marginEnd:2},description:{lineHeight:6},icon:{flexShrink:0,marginEnd:3,w:5,h:6},spinner:{flexShrink:0,marginEnd:3,w:5,h:5}},variants:zo,defaultProps:{variant:"subtle",colorScheme:"blue"}},Ho={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},Go={...Ho,max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem",container:{sm:"640px",md:"768px",lg:"1024px",xl:"1280px"}},Vo=e=>({transform:"translate(25%, 25%)",borderRadius:"full",border:"0.2em solid",borderColor:So("white","gray.800")(e)}),jo=e=>({bg:So("gray.200","whiteAlpha.400")(e)}),Wo=e=>{const{name:t,theme:n}=e,r=t?Mo({string:t}):"gray.400",i=(e=>t=>"dark"===(e=>t=>{const n=xo(t,e);return new po(n).isDark()?"dark":"light"})(e)(t))(r)(n);let a="white";return i||(a="gray.800"),{bg:r,color:a,borderColor:So("white","gray.800")(e),verticalAlign:"top"}};function Xo(e){const t="100%"!==e?Go[e]:void 0;return{container:{width:e,height:e,fontSize:`calc(${t??e} / 2.5)`},excessLabel:{width:e,height:e},label:{fontSize:`calc(${t??e} / 2.5)`,lineHeight:"100%"!==e?t??e:void 0}}}var qo={"2xs":Xo(4),xs:Xo(6),sm:Xo(8),md:Xo(12),lg:Xo(16),xl:Xo(24),"2xl":Xo(32),full:Xo("100%")},Yo={parts:Ta.keys,baseStyle:e=>({badge:Vo(e),excessLabel:jo(e),container:Wo(e)}),sizes:qo,defaultProps:{size:"md"}},Zo={solid:e=>{const{colorScheme:t,theme:n}=e;return{bg:So(`${t}.500`,_o(`${t}.500`,.6)(n))(e),color:So("white","whiteAlpha.800")(e)}},subtle:e=>{const{colorScheme:t,theme:n}=e;return{bg:So(`${t}.100`,_o(`${t}.200`,.16)(n))(e),color:So(`${t}.800`,`${t}.200`)(e)}},outline:e=>{const{colorScheme:t,theme:n}=e,r=_o(`${t}.200`,.8)(n),i=So(xo(n,`${t}.500`),r)(e);return{color:i,boxShadow:`inset 0 0 0px 1px ${i}`}}},Jo={baseStyle:{px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold"},variants:Zo,defaultProps:{variant:"subtle",colorScheme:"gray"}},$o={parts:Ra.keys,baseStyle:{link:{transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}}}},Ko=e=>{const{colorScheme:t,theme:n}=e;if("gray"===t)return{color:So("inherit","whiteAlpha.900")(e),_hover:{bg:So("gray.100","whiteAlpha.200")(e)},_active:{bg:So("gray.200","whiteAlpha.300")(e)}};const r=_o(`${t}.200`,.12)(n),i=_o(`${t}.200`,.24)(n);return{color:So(`${t}.600`,`${t}.200`)(e),bg:"transparent",_hover:{bg:So(`${t}.50`,r)(e)},_active:{bg:So(`${t}.100`,i)(e)}}},Qo={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},es={ghost:Ko,outline:e=>{const{colorScheme:t}=e,n=So("gray.200","whiteAlpha.300")(e);return{border:"1px solid",borderColor:"gray"===t?n:"currentColor",".chakra-button__group[data-attached] > &:not(:last-of-type)":{marginEnd:"-1px"},...Ko(e)}},solid:e=>{const{colorScheme:t}=e;if("gray"===t){const t=So("gray.100","whiteAlpha.200")(e);return{bg:t,_hover:{bg:So("gray.200","whiteAlpha.300")(e),_disabled:{bg:t}},_active:{bg:So("gray.300","whiteAlpha.400")(e)}}}const{bg:n=`${t}.500`,color:r="white",hoverBg:i=`${t}.600`,activeBg:a=`${t}.700`}=Qo[t]??{},o=So(n,`${t}.200`)(e);return{bg:o,color:So(r,"gray.800")(e),_hover:{bg:So(i,`${t}.300`)(e),_disabled:{bg:o}},_active:{bg:So(a,`${t}.400`)(e)}}},link:e=>{const{colorScheme:t}=e;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:So(`${t}.500`,`${t}.200`)(e),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:So(`${t}.700`,`${t}.500`)(e)}}},unstyled:{bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:0,p:0}},ts={baseStyle:{lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},variants:es,sizes:{lg:{h:12,minW:12,fontSize:"lg",px:6},md:{h:10,minW:10,fontSize:"md",px:4},sm:{h:8,minW:8,fontSize:"sm",px:3},xs:{h:6,minW:6,fontSize:"xs",px:2}},defaultProps:{variant:"solid",size:"md",colorScheme:"gray"}},ns=e=>{const{colorScheme:t}=e;return{w:"100%",transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:So(`${t}.500`,`${t}.200`)(e),borderColor:So(`${t}.500`,`${t}.200`)(e),color:So("white","gray.900")(e),_hover:{bg:So(`${t}.600`,`${t}.300`)(e),borderColor:So(`${t}.600`,`${t}.300`)(e)},_disabled:{borderColor:So("gray.200","transparent")(e),bg:So("gray.200","whiteAlpha.300")(e),color:So("gray.500","whiteAlpha.500")(e)}},_indeterminate:{bg:So(`${t}.500`,`${t}.200`)(e),borderColor:So(`${t}.500`,`${t}.200`)(e),color:So("white","gray.900")(e)},_disabled:{bg:So("gray.100","whiteAlpha.100")(e),borderColor:So("gray.100","transparent")(e)},_focusVisible:{boxShadow:"outline"},_invalid:{borderColor:So("red.500","red.300")(e)}}},rs={_disabled:{cursor:"not-allowed"}},is={userSelect:"none",_disabled:{opacity:.4}},as={transitionProperty:"transform",transitionDuration:"normal"},os={parts:Pa.keys,baseStyle:e=>({icon:as,container:rs,control:ns(e),label:is}),sizes:{sm:{control:{h:3,w:3},label:{fontSize:"sm"},icon:{fontSize:"0.45rem"}},md:{control:{w:4,h:4},label:{fontSize:"md"},icon:{fontSize:"0.625rem"}},lg:{control:{w:5,h:5},label:{fontSize:"lg"},icon:{fontSize:"0.625rem"}}},defaultProps:{size:"md",colorScheme:"blue"}},ss=Fo("close-button-size"),ls={baseStyle:e=>{const t=So("blackAlpha.100","whiteAlpha.100")(e),n=So("blackAlpha.200","whiteAlpha.200")(e);return{w:[ss.reference],h:[ss.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{bg:t},_active:{bg:n},_focusVisible:{boxShadow:"outline"}}},sizes:{lg:{[ss.variable]:"40px",fontSize:"16px"},md:{[ss.variable]:"32px",fontSize:"12px"},sm:{[ss.variable]:"24px",fontSize:"10px"}},defaultProps:{size:"md"}},{variants:cs,defaultProps:us}=Jo,ds={baseStyle:{fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm"},variants:cs,defaultProps:us};function hs(e){return"full"===e?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:e}}}var fs={bg:"blackAlpha.600",zIndex:"overlay"},ps={display:"flex",zIndex:"modal",justifyContent:"center"},ms=e=>{const{isFullHeight:t}=e;return{...t&&{height:"100vh"},zIndex:"modal",maxH:"100vh",bg:So("white","gray.700")(e),color:"inherit",boxShadow:So("lg","dark-lg")(e)}},gs={px:6,py:4,fontSize:"xl",fontWeight:"semibold"},vs={position:"absolute",top:2,insetEnd:3},ys={px:6,py:2,flex:1,overflow:"auto"},bs={px:6,py:4},xs={xs:hs("xs"),sm:hs("md"),md:hs("lg"),lg:hs("2xl"),xl:hs("4xl"),full:hs("full")},_s={parts:La.keys,baseStyle:e=>({overlay:fs,dialogContainer:ps,dialog:ms(e),header:gs,closeButton:vs,body:ys,footer:bs}),sizes:xs,defaultProps:{size:"xs"}},ws={parts:Da.keys,baseStyle:{preview:{borderRadius:"md",py:"3px",transitionProperty:"common",transitionDuration:"normal"},input:{borderRadius:"md",py:"3px",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},textarea:{borderRadius:"md",py:"3px",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}}}},Ms=e=>({marginStart:1,color:So("red.500","red.300")(e)}),Ss=e=>({mt:2,color:So("gray.500","whiteAlpha.600")(e),lineHeight:"normal",fontSize:"sm"}),As={parts:Ia.keys,baseStyle:e=>({container:{width:"100%",position:"relative"},requiredIndicator:Ms(e),helperText:Ss(e)})},Es=e=>({color:So("red.500","red.300")(e),mt:2,fontSize:"sm",lineHeight:"normal"}),Cs=e=>({marginEnd:"0.5em",color:So("red.500","red.300")(e)}),Ts={parts:ka.keys,baseStyle:e=>({text:Es(e),icon:Cs(e)})},Rs={lg:{fontSize:"lg",px:4,h:12,borderRadius:"md"},md:{fontSize:"md",px:4,h:10,borderRadius:"md"},sm:{fontSize:"sm",px:3,h:8,borderRadius:"sm"},xs:{fontSize:"xs",px:2,h:6,borderRadius:"sm"}},Ps={lg:{field:Rs.lg,addon:Rs.lg},md:{field:Rs.md,addon:Rs.md},sm:{field:Rs.sm,addon:Rs.sm},xs:{field:Rs.xs,addon:Rs.xs}};function Ls(e){const{focusBorderColor:t,errorBorderColor:n}=e;return{focusBorderColor:t||So("blue.500","blue.300")(e),errorBorderColor:n||So("red.500","red.300")(e)}}var Ds={outline:e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:r}=Ls(e);return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:So("gray.300","whiteAlpha.400")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_disabled:{opacity:.4,cursor:"not-allowed"},_invalid:{borderColor:xo(t,r),boxShadow:`0 0 0 1px ${xo(t,r)}`},_focusVisible:{zIndex:1,borderColor:xo(t,n),boxShadow:`0 0 0 1px ${xo(t,n)}`}},addon:{border:"1px solid",borderColor:So("inherit","whiteAlpha.50")(e),bg:So("gray.100","whiteAlpha.300")(e)}}},filled:e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:r}=Ls(e);return{field:{border:"2px solid",borderColor:"transparent",bg:So("gray.100","whiteAlpha.50")(e),_hover:{bg:So("gray.200","whiteAlpha.100")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_disabled:{opacity:.4,cursor:"not-allowed"},_invalid:{borderColor:xo(t,r)},_focusVisible:{bg:"transparent",borderColor:xo(t,n)}},addon:{border:"2px solid",borderColor:"transparent",bg:So("gray.100","whiteAlpha.50")(e)}}},flushed:e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:r}=Ls(e);return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:0,px:0,bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:xo(t,r),boxShadow:`0px 1px 0px 0px ${xo(t,r)}`},_focusVisible:{borderColor:xo(t,n),boxShadow:`0px 1px 0px 0px ${xo(t,n)}`}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:0,px:0,bg:"transparent"}}},unstyled:{field:{bg:"transparent",px:0,height:"auto"},addon:{bg:"transparent",px:0,height:"auto"}}},Is={parts:Ba.keys,baseStyle:{field:{width:"100%",minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal"}},sizes:Ps,variants:Ds,defaultProps:{size:"md",variant:"outline"}},ks={baseStyle:e=>({bg:So("gray.100","whiteAlpha")(e),borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"})},Bs={parts:Fa.keys,baseStyle:{container:{},item:{},icon:{marginEnd:"0.5rem",display:"inline",verticalAlign:"text-bottom"}}},Fs=e=>({bg:So("#fff","gray.700")(e),boxShadow:So("sm","dark-lg")(e),color:"inherit",minW:"3xs",py:"2",zIndex:1,borderRadius:"md",borderWidth:"1px"}),Ns=e=>({py:"0.4rem",px:"0.8rem",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{bg:So("gray.100","whiteAlpha.100")(e)},_active:{bg:So("gray.200","whiteAlpha.200")(e)},_expanded:{bg:So("gray.100","whiteAlpha.100")(e)},_disabled:{opacity:.4,cursor:"not-allowed"}}),Os={mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},zs={opacity:.6},Us={border:0,borderBottom:"1px solid",borderColor:"inherit",my:"0.5rem",opacity:.6},Hs={transitionProperty:"common",transitionDuration:"normal"},Gs={parts:Na.keys,baseStyle:e=>({button:Hs,list:Fs(e),item:Ns(e),groupTitle:Os,command:zs,divider:Us})},Vs={bg:"blackAlpha.600",zIndex:"modal"},js=e=>{const{isCentered:t,scrollBehavior:n}=e;return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:t?"center":"flex-start",overflow:"inside"===n?"hidden":"auto"}},Ws=e=>{const{scrollBehavior:t}=e;return{borderRadius:"md",bg:So("white","gray.700")(e),color:"inherit",my:"3.75rem",zIndex:"modal",maxH:"inside"===t?"calc(100% - 7.5rem)":void 0,boxShadow:So("lg","dark-lg")(e)}},Xs={px:6,py:4,fontSize:"xl",fontWeight:"semibold"},qs={position:"absolute",top:2,insetEnd:3},Ys=e=>{const{scrollBehavior:t}=e;return{px:6,py:2,flex:1,overflow:"inside"===t?"auto":void 0}},Zs={px:6,py:4};function Js(e){return"full"===e?{dialog:{maxW:"100vw",minH:"100vh","@supports(min-height: -webkit-fill-available)":{minH:"-webkit-fill-available"},my:0,borderRadius:0}}:{dialog:{maxW:e}}}var $s,Ks={xs:Js("xs"),sm:Js("sm"),md:Js("md"),lg:Js("lg"),xl:Js("xl"),"2xl":Js("2xl"),"3xl":Js("3xl"),"4xl":Js("4xl"),"5xl":Js("5xl"),"6xl":Js("6xl"),full:Js("full")},Qs={parts:Oa.keys,baseStyle:e=>({overlay:Vs,dialogContainer:js(e),dialog:Ws(e),header:Xs,closeButton:qs,body:Ys(e),footer:Zs}),sizes:Ks,defaultProps:{size:"md"}},el={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},{variants:tl,defaultProps:nl}=Is,rl=Fo("number-input-stepper-width"),il=Fo("number-input-input-padding"),al=Io(rl).add("0.5rem").toString(),ol={[rl.variable]:"24px",[il.variable]:al},sl=(null==($s=Is.baseStyle)?void 0:$s.field)??{},ll={width:[rl.reference]},cl=e=>({borderStart:"1px solid",borderStartColor:So("inherit","whiteAlpha.300")(e),color:So("inherit","whiteAlpha.800")(e),_active:{bg:So("gray.200","whiteAlpha.300")(e)},_disabled:{opacity:.4,cursor:"not-allowed"}});function ul(e){var t;const n=Is.sizes[e],r={lg:"md",md:"md",sm:"sm",xs:"sm"},i=(null==(t=n.field)?void 0:t.fontSize)??"md",a=el.fontSizes[i];return{field:{...n.field,paddingInlineEnd:il.reference,verticalAlign:"top"},stepper:{fontSize:Io(a).multiply(.75).toString(),_first:{borderTopEndRadius:r[e]},_last:{borderBottomEndRadius:r[e],mt:"-1px",borderTopWidth:1}}}}var dl={xs:ul("xs"),sm:ul("sm"),md:ul("md"),lg:ul("lg")},hl={parts:za.keys,baseStyle:e=>({root:ol,field:sl,stepperGroup:ll,stepper:cl(e)}),sizes:dl,variants:tl,defaultProps:nl},fl={baseStyle:{...Is.baseStyle.field,textAlign:"center"},sizes:{lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}},variants:{outline:e=>Is.variants.outline(e).field??{},flushed:e=>Is.variants.flushed(e).field??{},filled:e=>Is.variants.filled(e).field??{},unstyled:Is.variants.unstyled.field??{}},defaultProps:Is.defaultProps},pl=Fo("popper-bg"),ml=Fo("popper-arrow-bg"),gl=Fo("popper-arrow-shadow-color"),vl={zIndex:10},yl=e=>{const t=So("white","gray.700")(e),n=So("gray.200","whiteAlpha.300")(e);return{[pl.variable]:`colors.${t}`,bg:pl.reference,[ml.variable]:pl.reference,[gl.variable]:`colors.${n}`,width:"xs",border:"1px solid",borderColor:"inherit",borderRadius:"md",boxShadow:"sm",zIndex:"inherit",_focusVisible:{outline:0,boxShadow:"outline"}}},bl={px:3,py:2,borderBottomWidth:"1px"},xl={px:3,py:2},_l={px:3,py:2,borderTopWidth:"1px"},wl={position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2},Ml={parts:Ua.keys,baseStyle:e=>({popper:vl,content:yl(e),header:bl,body:xl,footer:_l,arrow:{},closeButton:wl})};function Sl(e){const{colorScheme:t,theme:n,isIndeterminate:r,hasStripe:i}=e,a=So(wo(),wo("1rem","rgba(0,0,0,0.1)"))(e),o=So(`${t}.500`,`${t}.200`)(e),s=`linear-gradient(\n    to right,\n    transparent 0%,\n    ${xo(n,o)} 50%,\n    transparent 100%\n  )`;return{...!r&&i&&a,...r?{bgImage:s}:{bgColor:o}}}var Al={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},El=e=>({bg:So("gray.100","whiteAlpha.300")(e)}),Cl=e=>({transitionProperty:"common",transitionDuration:"slow",...Sl(e)}),Tl={parts:Ha.keys,sizes:{xs:{track:{h:"0.25rem"}},sm:{track:{h:"0.5rem"}},md:{track:{h:"0.75rem"}},lg:{track:{h:"1rem"}}},baseStyle:e=>({label:Al,filledTrack:Cl(e),track:El(e)}),defaultProps:{size:"md",colorScheme:"blue"}},Rl=e=>{const{control:t={}}=os.baseStyle(e);return{...t,borderRadius:"full",_checked:{...t._checked,_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}}}},Pl={parts:Ga.keys,baseStyle:e=>({label:os.baseStyle(e).label,container:os.baseStyle(e).container,control:Rl(e)}),sizes:{md:{control:{w:4,h:4},label:{fontSize:"md"}},lg:{control:{w:5,h:5},label:{fontSize:"lg"}},sm:{control:{width:3,height:3},label:{fontSize:"sm"}}},defaultProps:{size:"md",colorScheme:"blue"}},Ll=e=>({...Is.baseStyle.field,bg:So("white","gray.700")(e),appearance:"none",paddingBottom:"1px",lineHeight:"normal","> option, > optgroup":{bg:So("white","gray.700")(e)}}),Dl={width:"1.5rem",height:"100%",insetEnd:"0.5rem",position:"relative",color:"currentColor",fontSize:"1.25rem",_disabled:{opacity:.5}},Il={paddingInlineEnd:"2rem"},kl=a()({},Is.sizes,{lg:{field:Il},md:{field:Il},sm:{field:Il},xs:{field:Il,icon:{insetEnd:"0.25rem"}}}),Bl={parts:Va.keys,baseStyle:e=>({field:Ll(e),icon:Dl}),sizes:kl,variants:Is.variants,defaultProps:Is.defaultProps},Fl=Fo("skeleton-start-color"),Nl=Fo("skeleton-end-color"),Ol={baseStyle:e=>{const t=So("gray.100","gray.800")(e),n=So("gray.400","gray.600")(e),{startColor:r=t,endColor:i=n,theme:a}=e,o=xo(a,r),s=xo(a,i);return{[Fl.variable]:o,[Nl.variable]:s,opacity:.7,borderRadius:"2px",borderColor:o,background:s}}},zl={baseStyle:e=>({borderRadius:"md",fontWeight:"semibold",_focusVisible:{boxShadow:"outline",padding:"1rem",position:"fixed",top:"1.5rem",insetStart:"1.5rem",bg:So("white","gray.700")(e)}})};function Ul(e){return Ao({orientation:e.orientation,vertical:{left:"50%",transform:"translateX(-50%)",_active:{transform:"translateX(-50%) scale(1.15)"}},horizontal:{top:"50%",transform:"translateY(-50%)",_active:{transform:"translateY(-50%) scale(1.15)"}}})}var Hl=e=>{const{orientation:t}=e;return{display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"},...Ao({orientation:t,vertical:{h:"100%"},horizontal:{w:"100%"}})}},Gl=e=>({overflow:"hidden",borderRadius:"sm",bg:So("gray.200","whiteAlpha.200")(e),_disabled:{bg:So("gray.300","whiteAlpha.300")(e)}}),Vl=e=>({display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{bg:"gray.300"},...Ul(e)}),jl=e=>{const{colorScheme:t}=e;return{width:"inherit",height:"inherit",bg:So(`${t}.500`,`${t}.200`)(e)}},Wl={lg:e=>({thumb:{w:"16px",h:"16px"},track:Ao({orientation:e.orientation,horizontal:{h:"4px"},vertical:{w:"4px"}})}),md:e=>({thumb:{w:"14px",h:"14px"},track:Ao({orientation:e.orientation,horizontal:{h:"4px"},vertical:{w:"4px"}})}),sm:e=>({thumb:{w:"10px",h:"10px"},track:Ao({orientation:e.orientation,horizontal:{h:"2px"},vertical:{w:"2px"}})})},Xl={parts:ja.keys,sizes:Wl,baseStyle:e=>({container:Hl(e),track:Gl(e),thumb:Vl(e),filledTrack:jl(e)}),defaultProps:{size:"md",colorScheme:"blue"}},ql=Fo("spinner-size"),Yl={baseStyle:{width:[ql.reference],height:[ql.reference]},sizes:{xs:{[ql.variable]:"0.75rem"},sm:{[ql.variable]:"1rem"},md:{[ql.variable]:"1.5rem"},lg:{[ql.variable]:"2rem"},xl:{[ql.variable]:"3rem"}},defaultProps:{size:"md"}},Zl={parts:Wa.keys,baseStyle:{container:{},label:{fontWeight:"medium"},helpText:{opacity:.8,marginBottom:2},number:{verticalAlign:"baseline",fontWeight:"semibold"},icon:{marginEnd:1,w:"14px",h:"14px",verticalAlign:"middle"}},sizes:{md:{label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}}},defaultProps:{size:"md"}},Jl=Fo("switch-track-width"),$l=Fo("switch-track-height"),Kl=Fo("switch-track-diff"),Ql=Io.subtract(Jl,$l),ec=Fo("switch-thumb-x"),tc=e=>{const{colorScheme:t}=e;return{borderRadius:"full",p:"2px",width:[Jl.reference],height:[$l.reference],transitionProperty:"common",transitionDuration:"fast",bg:So("gray.300","whiteAlpha.400")(e),_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{bg:So(`${t}.500`,`${t}.200`)(e)}}},nc={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[$l.reference],height:[$l.reference],_checked:{transform:`translateX(${ec.reference})`}},rc={sm:{container:{[Jl.variable]:"1.375rem",[$l.variable]:"0.75rem"}},md:{container:{[Jl.variable]:"1.875rem",[$l.variable]:"1rem"}},lg:{container:{[Jl.variable]:"2.875rem",[$l.variable]:"1.5rem"}}},ic={parts:Xa.keys,baseStyle:e=>({container:{[Kl.variable]:Ql,[ec.variable]:Kl.reference,_rtl:{[ec.variable]:Io(Kl).negate().toString()}},track:tc(e),thumb:nc}),sizes:rc,defaultProps:{size:"md",colorScheme:"blue"}},ac={"&[data-is-numeric=true]":{textAlign:"end"}},oc={simple:e=>{const{colorScheme:t}=e;return{th:{color:So("gray.600","gray.400")(e),borderBottom:"1px",borderColor:So(`${t}.100`,`${t}.700`)(e),...ac},td:{borderBottom:"1px",borderColor:So(`${t}.100`,`${t}.700`)(e),...ac},caption:{color:So("gray.600","gray.100")(e)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}},striped:e=>{const{colorScheme:t}=e;return{th:{color:So("gray.600","gray.400")(e),borderBottom:"1px",borderColor:So(`${t}.100`,`${t}.700`)(e),...ac},td:{borderBottom:"1px",borderColor:So(`${t}.100`,`${t}.700`)(e),...ac},caption:{color:So("gray.600","gray.100")(e)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:So(`${t}.100`,`${t}.700`)(e)},td:{background:So(`${t}.100`,`${t}.700`)(e)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}},unstyled:{}},sc={parts:qa.keys,baseStyle:{table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}},variants:oc,sizes:{sm:{th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}},md:{th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}},lg:{th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}}},defaultProps:{variant:"simple",size:"md",colorScheme:"gray"}},lc=e=>{const{orientation:t}=e;return{display:"vertical"===t?"flex":"block"}},cc=e=>{const{isFitted:t}=e;return{flex:t?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focusVisible:{zIndex:1,boxShadow:"outline"},_disabled:{cursor:"not-allowed",opacity:.4}}},uc=e=>{const{align:t="start",orientation:n}=e;return{justifyContent:{end:"flex-end",center:"center",start:"flex-start"}[t],flexDirection:"vertical"===n?"column":"row"}},dc={p:4},hc={line:e=>{const{colorScheme:t,orientation:n}=e,r="vertical"===n?"borderStart":"borderBottom";return{tablist:{[r]:"2px solid",borderColor:"inherit"},tab:{[r]:"2px solid",borderColor:"transparent",["vertical"===n?"marginStart":"marginBottom"]:"-2px",_selected:{color:So(`${t}.600`,`${t}.300`)(e),borderColor:"currentColor"},_active:{bg:So("gray.200","whiteAlpha.300")(e)},_disabled:{_active:{bg:"none"}}}}},enclosed:e=>{const{colorScheme:t}=e;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",_selected:{color:So(`${t}.600`,`${t}.300`)(e),borderColor:"inherit",borderBottomColor:So("white","gray.800")(e)}},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}},"enclosed-colored":e=>{const{colorScheme:t}=e;return{tab:{border:"1px solid",borderColor:"inherit",bg:So("gray.50","whiteAlpha.50")(e),mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{bg:So("#fff","gray.800")(e),color:So(`${t}.600`,`${t}.300`)(e),borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"}},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}},"soft-rounded":e=>{const{colorScheme:t,theme:n}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:xo(n,`${t}.700`),bg:xo(n,`${t}.100`)}}}},"solid-rounded":e=>{const{colorScheme:t}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",color:So("gray.600","inherit")(e),_selected:{color:So("#fff","gray.800")(e),bg:So(`${t}.600`,`${t}.300`)(e)}}}},unstyled:{}},fc={parts:Ya.keys,baseStyle:e=>({root:lc(e),tab:cc(e),tablist:uc(e),tabpanel:dc}),sizes:{sm:{tab:{py:1,px:4,fontSize:"sm"}},md:{tab:{fontSize:"md",py:2,px:4}},lg:{tab:{fontSize:"lg",py:3,px:4}}},variants:hc,defaultProps:{size:"md",variant:"line",colorScheme:"blue"}},pc={subtle:e=>({container:Jo.variants.subtle(e)}),solid:e=>({container:Jo.variants.solid(e)}),outline:e=>({container:Jo.variants.outline(e)})},mc={parts:Za.keys,variants:pc,baseStyle:{container:{fontWeight:"medium",lineHeight:1.2,outline:0,borderRadius:"md",_focusVisible:{boxShadow:"outline"}},label:{lineHeight:1.2,overflow:"visible"},closeButton:{fontSize:"18px",w:"1.25rem",h:"1.25rem",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"0.375rem",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focusVisible:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}}},sizes:{sm:{container:{minH:"1.25rem",minW:"1.25rem",fontSize:"xs",px:2},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}},md:{container:{minH:"1.5rem",minW:"1.5rem",fontSize:"sm",px:2}},lg:{container:{minH:8,minW:8,fontSize:"md",px:3}}},defaultProps:{size:"md",variant:"subtle",colorScheme:"gray"}},gc={...Is.baseStyle.field,paddingY:"8px",minHeight:"80px",lineHeight:"short",verticalAlign:"top"},vc={outline:e=>Is.variants.outline(e).field??{},flushed:e=>Is.variants.flushed(e).field??{},filled:e=>Is.variants.filled(e).field??{},unstyled:Is.variants.unstyled.field??{}},yc={baseStyle:gc,sizes:{xs:Is.sizes.xs.field??{},sm:Is.sizes.sm.field??{},md:Is.sizes.md.field??{},lg:Is.sizes.lg.field??{}},variants:vc,defaultProps:{size:"md",variant:"outline"}},bc=Fo("tooltip-bg"),xc=Fo("popper-arrow-bg"),_c={Accordion:No,Alert:Uo,Avatar:Yo,Badge:Jo,Breadcrumb:$o,Button:ts,Checkbox:os,CloseButton:ls,Code:ds,Container:{baseStyle:{w:"100%",mx:"auto",maxW:"60ch",px:"1rem"}},Divider:{baseStyle:{opacity:.6,borderColor:"inherit"},variants:{solid:{borderStyle:"solid"},dashed:{borderStyle:"dashed"}},defaultProps:{variant:"solid"}},Drawer:_s,Editable:ws,Form:As,FormError:Ts,FormLabel:{baseStyle:{fontSize:"md",marginEnd:3,mb:2,fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}}},Heading:{baseStyle:{fontFamily:"heading",fontWeight:"bold"},sizes:{"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},defaultProps:{size:"xl"}},Input:Is,Kbd:ks,Link:{baseStyle:{transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}}},List:Bs,Menu:Gs,Modal:Qs,NumberInput:hl,PinInput:fl,Popover:Ml,Progress:Tl,Radio:Pl,Select:Bl,Skeleton:Ol,SkipLink:zl,Slider:Xl,Spinner:Yl,Stat:Zl,Switch:ic,Table:sc,Tabs:fc,Tag:mc,Textarea:yc,Tooltip:{baseStyle:e=>{const t=So("gray.700","gray.300")(e);return{[bc.variable]:`colors.${t}`,px:"8px",py:"2px",bg:[bc.reference],[xc.variable]:[bc.reference],color:So("whiteAlpha.900","gray.900")(e),borderRadius:"sm",fontWeight:"medium",fontSize:"sm",boxShadow:"md",maxW:"320px",zIndex:"tooltip"}}}},wc={breakpoints:{base:"0em",sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"},zIndices:{hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},radii:{none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},blur:{none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},colors:{transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"},linkedin:{50:"#E8F4F9",100:"#CFEDFB",200:"#9BDAF3",300:"#68C7EC",400:"#34B3E4",500:"#00A0DC",600:"#008CC9",700:"#0077B5",800:"#005E93",900:"#004471"},facebook:{50:"#E8F4F9",100:"#D9DEE9",200:"#B7C2DA",300:"#6482C0",400:"#4267B2",500:"#385898",600:"#314E89",700:"#29487D",800:"#223B67",900:"#1E355B"},messenger:{50:"#D0E6FF",100:"#B9DAFF",200:"#A2CDFF",300:"#7AB8FF",400:"#2E90FF",500:"#0078FF",600:"#0063D1",700:"#0052AC",800:"#003C7E",900:"#002C5C"},whatsapp:{50:"#dffeec",100:"#b9f5d0",200:"#90edb3",300:"#65e495",400:"#3cdd78",500:"#22c35e",600:"#179848",700:"#0c6c33",800:"#01421c",900:"#001803"},twitter:{50:"#E5F4FD",100:"#C8E9FB",200:"#A8DCFA",300:"#83CDF7",400:"#57BBF5",500:"#1DA1F2",600:"#1A94DA",700:"#1681BF",800:"#136B9E",900:"#0D4D71"},telegram:{50:"#E3F2F9",100:"#C5E4F3",200:"#A2D4EC",300:"#7AC1E4",400:"#47A9DA",500:"#0088CC",600:"#007AB8",700:"#006BA1",800:"#005885",900:"#003F5E"}},...el,sizes:Go,shadows:{xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},space:Ho,borders:{none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},transition:{property:{common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},easing:{"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},duration:{"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"}}},Mc=["borders","breakpoints","colors","components","config","direction","fonts","fontSizes","fontWeights","letterSpacings","lineHeights","radii","shadows","sizes","space","styles","transition","zIndices"],Sc={semanticTokens:{colors:{"chakra-body-text":{_light:"gray.800",_dark:"whiteAlpha.900"},"chakra-body-bg":{_light:"white",_dark:"gray.800"},"chakra-border-color":{_light:"gray.200",_dark:"whiteAlpha.300"},"chakra-placeholder-color":{_light:"gray.500",_dark:"whiteAlpha.400"}}},direction:"ltr",...wc,components:_c,styles:{global:{body:{fontFamily:"body",color:"chakra-body-text",bg:"chakra-body-bg",transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:"chakra-placeholder-color"},"*, *::before, &::after":{borderColor:"chakra-border-color",wordWrap:"break-word"}}},config:{useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"}},Ac={path:t.createElement("g",{stroke:"currentColor",strokeWidth:"1.5"},t.createElement("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),t.createElement("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),t.createElement("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})),viewBox:"0 0 24 24"},Ec=fa(((e,n)=>{const{as:r,viewBox:i,color:a="currentColor",focusable:o=!1,children:s,className:l,__css:c,...u}=e,d={ref:n,focusable:o,className:ne("chakra-icon",l),__css:{w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:a,...c}},h=i??Ac.viewBox;if(r&&"string"!=typeof r)return t.createElement(va.svg,{as:r,...d,...u});const f=s??Ac.path;return t.createElement(va.svg,{verticalAlign:"middle",viewBox:h,...d,...u},f)})),Cc=Ec;function Tc(e){const{viewBox:n="0 0 24 24",d:r,displayName:i,defaultProps:a={}}=e,o=t.Children.toArray(e.path);return fa(((e,i)=>t.createElement(Ec,{ref:i,viewBox:n,...a,...e},o.length?o:t.createElement("path",{fill:"currentColor",d:r}))))}var Rc={border:"0px",clip:"rect(0px, 0px, 0px, 0px)",height:"1px",width:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},Pc=va("span",{baseStyle:Rc});va("input",{baseStyle:Rc});var Lc=function(){var e=or.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),Dc=fa(((e,n)=>{const r=ma("Spinner",e),{label:i="Loading...",thickness:a="2px",speed:o="0.45s",emptyColor:s="transparent",className:l,...c}=Wi(e),u=ne("chakra-spinner",l),d={display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:a,borderBottomColor:s,borderLeftColor:s,animation:`${Lc} ${o} linear infinite`,...r};return t.createElement(va.div,{ref:n,__css:d,className:u,...c},i&&t.createElement(Pc,null,i))})),Ic=e=>t.createElement(Ec,{viewBox:"0 0 24 24",...e},t.createElement("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})),[kc,Bc]=cr({name:"AlertContext",errorMessage:"useAlertContext: `context` is undefined. Seems you forgot to wrap alert components in `<Alert />`"}),[Fc,Nc]=cr({name:"AlertStylesContext",errorMessage:"useAlertStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Alert />\" "}),Oc={info:{icon:e=>t.createElement(Ec,{viewBox:"0 0 24 24",...e},t.createElement("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"})),colorScheme:"blue"},warning:{icon:Ic,colorScheme:"orange"},success:{icon:e=>t.createElement(Ec,{viewBox:"0 0 24 24",...e},t.createElement("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"})),colorScheme:"green"},error:{icon:Ic,colorScheme:"red"},loading:{icon:Dc,colorScheme:"blue"}},zc=fa((function(e,n){const{status:r="info",addRole:i=!0,...a}=Wi(e),o=e.colorScheme??function(e){return Oc[e].colorScheme}(r),s=ga("Alert",{...e,colorScheme:o}),l={width:"100%",display:"flex",alignItems:"center",position:"relative",overflow:"hidden",...s.container};return t.createElement(kc,{value:{status:r}},t.createElement(Fc,{value:s},t.createElement(va.div,{role:i?"alert":void 0,ref:n,...a,className:ne("chakra-alert",e.className),__css:l})))})),Uc=fa((function(e,n){const r={display:"inline",...Nc().description};return t.createElement(va.div,{ref:n,...e,className:ne("chakra-alert__desc",e.className),__css:r})}));function Hc(e){const{status:n}=Bc(),r=function(e){return Oc[e].icon}(n),i=Nc(),a="loading"===n?i.spinner:i.icon;return t.createElement(va.span,{display:"inherit",...e,className:ne("chakra-alert__icon",e.className),__css:a},e.children||t.createElement(r,{h:"100%",w:"100%"}))}var Gc=fa((function(e,n){const r=Nc();return t.createElement(va.div,{ref:n,...e,className:ne("chakra-alert__title",e.className),__css:r.title})}));function Vc(e){return t.createElement(Ec,{focusable:"false","aria-hidden":!0,...e},t.createElement("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"}))}var jc=fa((function(e,n){const r=ma("CloseButton",e),{children:i,isDisabled:a,__css:o,...s}=Wi(e);return t.createElement(va.button,{type:"button","aria-label":"Close",ref:n,disabled:a,__css:{outline:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,...r,...o},...s},i||t.createElement(Vc,{width:"1em",height:"1em"}))})),Wc=function(e,t){return Wc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Wc(e,t)};function Xc(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Wc(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var qc=function(){return qc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},qc.apply(this,arguments)};function Yc(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function Zc(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function Jc(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create,Object.create;var $c=("undefined"==typeof process||process.env,"production");const Kc=1/60*1e3,Qc="undefined"!=typeof performance?()=>performance.now():()=>Date.now(),eu="undefined"!=typeof window?e=>window.requestAnimationFrame(e):e=>setTimeout((()=>e(Qc())),Kc);let tu=!0,nu=!1,ru=!1;const iu={delta:0,timestamp:0},au=["read","update","preRender","render","postRender"],ou=au.reduce(((e,t)=>(e[t]=function(e){let t=[],n=[],r=0,i=!1,a=!1;const o=new WeakSet,s={schedule:(e,a=!1,s=!1)=>{const l=s&&i,c=l?t:n;return a&&o.add(e),-1===c.indexOf(e)&&(c.push(e),l&&i&&(r=t.length)),e},cancel:e=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1),o.delete(e)},process:e=>{if(i)a=!0;else{if(i=!0,[t,n]=[n,t],n.length=0,r=t.length,r)for(let n=0;n<r;n++){const r=t[n];r(e),o.has(r)&&(s.schedule(r),nu=!0)}i=!1,a&&(a=!1,s.process(e))}}};return s}(),e)),{}),su=au.reduce(((e,t)=>{const n=ou[t];return e[t]=(e,t=!1,r=!1)=>(nu||hu(),n.schedule(e,t,r)),e}),{}),lu=au.reduce(((e,t)=>(e[t]=ou[t].cancel,e)),{}),cu=au.reduce(((e,t)=>(e[t]=()=>ou[t].process(iu),e)),{}),uu=e=>ou[e].process(iu),du=e=>{nu=!1,iu.delta=tu?Kc:Math.max(Math.min(e-iu.timestamp,40),1),iu.timestamp=e,ru=!0,au.forEach(uu),ru=!1,nu&&(tu=!1,eu(du))},hu=()=>{nu=!0,tu=!0,ru||eu(du)},fu=()=>iu,pu=su;var mu="undefined"!=typeof document,gu=mu?t.useLayoutEffect:t.useEffect;function vu(){var e=(0,t.useRef)(!1);return gu((function(){return e.current=!0,function(){e.current=!1}}),[]),e}var yu=(0,t.createContext)(null);function bu(e){var n=(0,t.useRef)(null);return null===n.current&&(n.current=e()),n.current}var xu=0,_u=function(){return xu++},wu=function(){return bu(_u)},Mu=function(e){var n=e.children,r=e.initial,i=e.isPresent,a=e.onExitComplete,o=e.custom,s=e.presenceAffectsLayout,l=bu(Su),c=wu(),u=(0,t.useMemo)((function(){return{id:c,initial:r,isPresent:i,custom:o,onExitComplete:function(e){var t,n;l.set(e,!0);try{for(var r=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(l.values()),i=r.next();!i.done;i=r.next())if(!i.value)return}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}null==a||a()},register:function(e){return l.set(e,!1),function(){return l.delete(e)}}}}),s?void 0:[i]);return(0,t.useMemo)((function(){l.forEach((function(e,t){return l.set(t,!1)}))}),[i]),t.useEffect((function(){!i&&!l.size&&(null==a||a())}),[i]),t.createElement(yu.Provider,{value:u},n)};function Su(){return new Map}var Au=(0,t.createContext)({});function Eu(e){return(0,t.useEffect)((function(){return function(){return e()}}),[])}var Cu=function(e){return e.key||""},Tu=function(e){var n=e.children,r=e.custom,i=e.initial,a=void 0===i||i,o=e.onExitComplete,s=e.exitBeforeEnter,l=e.presenceAffectsLayout,c=void 0===l||l,u=Zc(function(){var e=vu(),n=Zc((0,t.useState)(0),2),r=n[0],i=n[1],a=(0,t.useCallback)((function(){e.current&&i(r+1)}),[r]);return[(0,t.useCallback)((function(){return pu.postRender(a)}),[a]),r]}(),1),d=u[0],h=(0,t.useContext)(Au).forceRender;h&&(d=h);var f=vu(),p=function(e){var n=[];return t.Children.forEach(e,(function(e){(0,t.isValidElement)(e)&&n.push(e)})),n}(n),m=p,g=new Set,v=(0,t.useRef)(m),y=(0,t.useRef)(new Map).current,b=(0,t.useRef)(!0);if(gu((function(){b.current=!1,function(e,t){e.forEach((function(e){var n=Cu(e);t.set(n,e)}))}(p,y),v.current=m})),Eu((function(){b.current=!0,y.clear(),g.clear()})),b.current)return t.createElement(t.Fragment,null,m.map((function(e){return t.createElement(Mu,{key:Cu(e),isPresent:!0,initial:!!a&&void 0,presenceAffectsLayout:c},e)})));m=Jc([],Zc(m),!1);for(var x=v.current.map(Cu),_=p.map(Cu),w=x.length,M=0;M<w;M++){var S=x[M];-1===_.indexOf(S)&&g.add(S)}return s&&g.size&&(m=[]),g.forEach((function(e){if(-1===_.indexOf(e)){var n=y.get(e);if(n){var i=x.indexOf(e);m.splice(i,0,t.createElement(Mu,{key:Cu(n),isPresent:!1,onExitComplete:function(){y.delete(e),g.delete(e);var t=v.current.findIndex((function(t){return t.key===e}));if(v.current.splice(t,1),!g.size){if(v.current=p,!1===f.current)return;d(),o&&o()}},custom:r,presenceAffectsLayout:c},n))}}})),m=m.map((function(e){var n=e.key;return g.has(n)?e:t.createElement(Mu,{key:Cu(e),isPresent:!0,presenceAffectsLayout:c},e)})),"production"!==$c&&s&&m.length>1&&console.warn("You're attempting to animate multiple children within AnimatePresence, but its exitBeforeEnter prop is set to true. This will lead to odd visual behaviour."),t.createElement(t.Fragment,null,g.size?m:m.map((function(e){return(0,t.cloneElement)(e)})))};function Ru(){var e=(0,t.useContext)(yu);if(null===e)return[!0,null];var n=e.isPresent,r=e.onExitComplete,i=e.register,a=wu();return(0,t.useEffect)((function(){return i(a)}),[]),!n&&r?[!1,function(){return null==r?void 0:r(a)}]:[!0]}var Pu=function(e){return{isEnabled:function(t){return e.some((function(e){return!!t[e]}))}}},Lu={measureLayout:Pu(["layout","layoutId","drag"]),animation:Pu(["animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag","whileInView"]),exit:Pu(["exit"]),drag:Pu(["drag","dragControls"]),focus:Pu(["whileFocus"]),hover:Pu(["whileHover","onHoverStart","onHoverEnd"]),tap:Pu(["whileTap","onTap","onTapStart","onTapCancel"]),pan:Pu(["onPan","onPanStart","onPanSessionStart","onPanEnd"]),inView:Pu(["whileInView","onViewportEnter","onViewportLeave"])},Du=(0,t.createContext)({strict:!1}),Iu=Object.keys(Lu),ku=Iu.length,Bu=(0,t.createContext)({transformPagePoint:function(e){return e},isStatic:!1,reducedMotion:"never"}),Fu=(0,t.createContext)({}),Nu={current:null},Ou=!1;function zu(e,n,r,i){var a,o,s=(0,t.useContext)(Du),l=(0,t.useContext)(Fu).visualElement,c=(0,t.useContext)(yu),u=(!Ou&&function(){if(Ou=!0,mu)if(window.matchMedia){var e=window.matchMedia("(prefers-reduced-motion)"),t=function(){return Nu.current=e.matches};e.addListener(t),t()}else Nu.current=!1}(),a=Zc((0,t.useState)(Nu.current),1)[0],"never"!==(o=(0,t.useContext)(Bu).reducedMotion)&&("always"===o||a)),d=(0,t.useRef)(void 0);i||(i=s.renderer),!d.current&&i&&(d.current=i(e,{visualState:n,parent:l,props:r,presenceId:null==c?void 0:c.id,blockInitialAnimation:!1===(null==c?void 0:c.initial),shouldReduceMotion:u}));var h=d.current;return gu((function(){null==h||h.syncRender()})),(0,t.useEffect)((function(){var e;null===(e=null==h?void 0:h.animationState)||void 0===e||e.animateChanges()})),gu((function(){return function(){return null==h?void 0:h.notifyUnmount()}}),[]),h}function Uu(e){return"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function Hu(e){return Array.isArray(e)}function Gu(e){return"string"==typeof e||Hu(e)}function Vu(e,t,n,r,i){var a;return void 0===r&&(r={}),void 0===i&&(i={}),"function"==typeof t&&(t=t(null!=n?n:e.custom,r,i)),"string"==typeof t&&(t=null===(a=e.variants)||void 0===a?void 0:a[t]),"function"==typeof t&&(t=t(null!=n?n:e.custom,r,i)),t}function ju(e,t,n){var r=e.getProps();return Vu(r,t,null!=n?n:r.custom,function(e){var t={};return e.forEachValue((function(e,n){return t[n]=e.get()})),t}(e),function(e){var t={};return e.forEachValue((function(e,n){return t[n]=e.getVelocity()})),t}(e))}function Wu(e){var t;return"function"==typeof(null===(t=e.animate)||void 0===t?void 0:t.start)||Gu(e.initial)||Gu(e.animate)||Gu(e.whileHover)||Gu(e.whileDrag)||Gu(e.whileTap)||Gu(e.whileFocus)||Gu(e.exit)}function Xu(e){return Boolean(Wu(e)||e.variants)}function qu(e){return Array.isArray(e)?e.join(" "):e}var Yu={hasAnimatedSinceResize:!0,hasEverUpdated:!1},Zu=1,Ju=(0,t.createContext)({}),$u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xc(t,e),t.prototype.getSnapshotBeforeUpdate=function(){return this.updateProps(),null},t.prototype.componentDidUpdate=function(){},t.prototype.updateProps=function(){var e=this.props,t=e.visualElement,n=e.props;t&&t.setProps(n)},t.prototype.render=function(){return this.props.children},t}(t.Component);function Ku(e){var n=e.preloadedFeatures,r=e.createVisualElement,i=e.projectionNodeConstructor,a=e.useRender,o=e.useVisualState,s=e.Component;return n&&function(e){for(var t in e)null!==e[t]&&("projectionNodeConstructor"===t?Lu.projectionNodeConstructor=e[t]:Lu[t].Component=e[t])}(n),(0,t.forwardRef)((function(e,l){var c=function(e){var n,r=e.layoutId,i=null===(n=(0,t.useContext)(Au))||void 0===n?void 0:n.id;return i&&void 0!==r?i+"-"+r:r}(e);e=qc(qc({},e),{layoutId:c});var u=(0,t.useContext)(Bu),d=null,h=function(e){var n=function(e,t){if(Wu(e)){var n=e.initial,r=e.animate;return{initial:!1===n||Gu(n)?n:void 0,animate:Gu(r)?r:void 0}}return!1!==e.inherit?t:{}}(e,(0,t.useContext)(Fu)),r=n.initial,i=n.animate;return(0,t.useMemo)((function(){return{initial:r,animate:i}}),[qu(r),qu(i)])}(e),f=u.isStatic?void 0:bu((function(){if(Yu.hasEverUpdated)return Zu++})),p=o(e,u.isStatic);return!u.isStatic&&mu&&(h.visualElement=zu(s,p,qc(qc({},u),e),r),function(e,n,r,i){var a,o=n.layoutId,s=n.layout,l=n.drag,c=n.dragConstraints,u=n.layoutScroll,d=(0,t.useContext)(Ju);i&&r&&!(null==r?void 0:r.projection)&&(r.projection=new i(e,r.getLatestValues(),null===(a=r.parent)||void 0===a?void 0:a.projection),r.projection.setOptions({layoutId:o,layout:s,alwaysMeasureLayout:Boolean(l)||c&&Uu(c),visualElement:r,scheduleRender:function(){return r.scheduleRender()},animationType:"string"==typeof s?s:"both",initialPromotionConfig:d,layoutScroll:u}))}(f,e,h.visualElement,i||Lu.projectionNodeConstructor),d=function(e,n,r){var i=[],a=(0,t.useContext)(Du);if(!n)return null;"production"!==$c&&r&&a.strict;for(var o=0;o<ku;o++){var s=Iu[o],l=Lu[s],c=l.isEnabled,u=l.Component;c(e)&&u&&i.push(t.createElement(u,qc({key:s},e,{visualElement:n})))}return i}(e,h.visualElement,n)),t.createElement($u,{visualElement:h.visualElement,props:qc(qc({},u),e)},d,t.createElement(Fu.Provider,{value:h},a(s,e,f,function(e,n,r){return(0,t.useCallback)((function(t){var i;t&&(null===(i=e.mount)||void 0===i||i.call(e,t)),n&&(t?n.mount(t):n.unmount()),r&&("function"==typeof r?r(t):Uu(r)&&(r.current=t))}),[n])}(p,h.visualElement,l),p,u.isStatic,h.visualElement)))}))}function Qu(e){function t(t,n){return void 0===n&&(n={}),Ku(e(t,n))}if("undefined"==typeof Proxy)return t;var n=new Map;return new Proxy(t,{get:function(e,r){return n.has(r)||n.set(r,t(r)),n.get(r)}})}var ed=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","svg","switch","symbol","text","tspan","use","view"];function td(e){return"string"==typeof e&&!e.includes("-")&&!!(ed.indexOf(e)>-1||/[A-Z]/.test(e))}var nd={},rd=["","X","Y","Z"],id=["transformPerspective","x","y","z"];function ad(e,t){return id.indexOf(e)-id.indexOf(t)}["translate","scale","rotate","skew"].forEach((function(e){return rd.forEach((function(t){return id.push(e+t)}))}));var od=new Set(id);function sd(e){return od.has(e)}var ld=new Set(["originX","originY","originZ"]);function cd(e){return ld.has(e)}function ud(e,t){var n=t.layout,r=t.layoutId;return sd(e)||cd(e)||(n||void 0!==r)&&(!!nd[e]||"opacity"===e)}var dd=function(e){return Boolean(null!==e&&"object"==typeof e&&e.getVelocity)},hd={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"};function fd(e){return e.startsWith("--")}var pd=function(e,t){return t&&"number"==typeof e?t.transform(e):e};const md=(e,t)=>n=>Math.max(Math.min(n,t),e),gd=e=>e%1?Number(e.toFixed(5)):e,vd=/(-)?([\d]*\.?[\d])+/g,yd=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))/gi,bd=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i;function xd(e){return"string"==typeof e}const _d=e=>({test:t=>xd(t)&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),wd=_d("deg"),Md=_d("%"),Sd=_d("px"),Ad=_d("vh"),Ed=_d("vw"),Cd=Object.assign(Object.assign({},Md),{parse:e=>Md.parse(e)/100,transform:e=>Md.transform(100*e)}),Td={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},Rd=Object.assign(Object.assign({},Td),{transform:md(0,1)}),Pd=Object.assign(Object.assign({},Td),{default:1});var Ld=qc(qc({},Td),{transform:Math.round}),Dd={borderWidth:Sd,borderTopWidth:Sd,borderRightWidth:Sd,borderBottomWidth:Sd,borderLeftWidth:Sd,borderRadius:Sd,radius:Sd,borderTopLeftRadius:Sd,borderTopRightRadius:Sd,borderBottomRightRadius:Sd,borderBottomLeftRadius:Sd,width:Sd,maxWidth:Sd,height:Sd,maxHeight:Sd,size:Sd,top:Sd,right:Sd,bottom:Sd,left:Sd,padding:Sd,paddingTop:Sd,paddingRight:Sd,paddingBottom:Sd,paddingLeft:Sd,margin:Sd,marginTop:Sd,marginRight:Sd,marginBottom:Sd,marginLeft:Sd,rotate:wd,rotateX:wd,rotateY:wd,rotateZ:wd,scale:Pd,scaleX:Pd,scaleY:Pd,scaleZ:Pd,skew:wd,skewX:wd,skewY:wd,distance:Sd,translateX:Sd,translateY:Sd,translateZ:Sd,x:Sd,y:Sd,z:Sd,perspective:Sd,transformPerspective:Sd,opacity:Rd,originX:Cd,originY:Cd,originZ:Sd,zIndex:Ld,fillOpacity:Rd,strokeOpacity:Rd,numOctaves:Ld};function Id(e,t,n,r){var i,a=e.style,o=e.vars,s=e.transform,l=e.transformKeys,c=e.transformOrigin;l.length=0;var u=!1,d=!1,h=!0;for(var f in t){var p=t[f];if(fd(f))o[f]=p;else{var m=Dd[f],g=pd(p,m);if(sd(f)){if(u=!0,s[f]=g,l.push(f),!h)continue;p!==(null!==(i=m.default)&&void 0!==i?i:0)&&(h=!1)}else cd(f)?(c[f]=g,d=!0):a[f]=g}}u?a.transform=function(e,t,n,r){var i=e.transform,a=e.transformKeys,o=t.enableHardwareAcceleration,s=void 0===o||o,l=t.allowTransformNone,c=void 0===l||l,u="";a.sort(ad);for(var d=!1,h=a.length,f=0;f<h;f++){var p=a[f];u+="".concat(hd[p]||p,"(").concat(i[p],") "),"z"===p&&(d=!0)}return!d&&s?u+="translateZ(0)":u=u.trim(),r?u=r(i,n?"":u):c&&n&&(u="none"),u}(e,n,h,r):r?a.transform=r({},""):!t.transform&&a.transform&&(a.transform="none"),d&&(a.transformOrigin=function(e){var t=e.originX,n=void 0===t?"50%":t,r=e.originY,i=void 0===r?"50%":r,a=e.originZ,o=void 0===a?0:a;return"".concat(n," ").concat(i," ").concat(o)}(c))}function kd(e,t,n){for(var r in t)dd(t[r])||ud(r,n)||(e[r]=t[r])}function Bd(e,n,r){var i={},a=function(e,n,r){var i={};return kd(i,e.style||{},e),Object.assign(i,function(e,n,r){var i=e.transformTemplate;return(0,t.useMemo)((function(){var e={style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}};Id(e,n,{enableHardwareAcceleration:!r},i);var t=e.style;return qc(qc({},e.vars),t)}),[n])}(e,n,r)),e.transformValues&&(i=e.transformValues(i)),i}(e,n,r);return Boolean(e.drag)&&!1!==e.dragListener&&(i.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),i.style=a,i}var Fd=new Set(["initial","animate","exit","style","variants","transition","transformTemplate","transformValues","custom","inherit","layout","layoutId","layoutDependency","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","dragSnapToOrigin","_dragX","_dragY","dragElastic","dragMomentum","dragPropagation","dragTransition","whileDrag","onPan","onPanStart","onPanEnd","onPanSessionStart","onTap","onTapStart","onTapCancel","onHoverStart","onHoverEnd","whileFocus","whileTap","whileHover","whileInView","onViewportEnter","onViewportLeave","viewport","layoutScroll"]);function Nd(e){return Fd.has(e)}var Od,zd=function(e){return!Nd(e)};try{(Od=require("@emotion/is-prop-valid").default)&&(zd=function(e){return e.startsWith("on")?!Nd(e):Od(e)})}catch($s){}function Ud(e,t,n){return"string"==typeof e?e:Sd.transform(t+n*e)}var Hd={offset:"stroke-dashoffset",array:"stroke-dasharray"},Gd={offset:"strokeDashoffset",array:"strokeDasharray"};function Vd(e,t,n,r){var i=t.attrX,a=t.attrY,o=t.originX,s=t.originY,l=t.pathLength,c=t.pathSpacing,u=void 0===c?1:c,d=t.pathOffset,h=void 0===d?0:d;Id(e,Yc(t,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]),n,r),e.attrs=e.style,e.style={};var f=e.attrs,p=e.style,m=e.dimensions;f.transform&&(m&&(p.transform=f.transform),delete f.transform),m&&(void 0!==o||void 0!==s||p.transform)&&(p.transformOrigin=function(e,t,n){var r=Ud(t,e.x,e.width),i=Ud(n,e.y,e.height);return"".concat(r," ").concat(i)}(m,void 0!==o?o:.5,void 0!==s?s:.5)),void 0!==i&&(f.x=i),void 0!==a&&(f.y=a),void 0!==l&&function(e,t,n,r,i){void 0===n&&(n=1),void 0===r&&(r=0),void 0===i&&(i=!0),e.pathLength=1;var a=i?Hd:Gd;e[a.offset]=Sd.transform(-r);var o=Sd.transform(t),s=Sd.transform(n);e[a.array]="".concat(o," ").concat(s)}(f,l,u,h,!1)}var jd=function(){return qc(qc({},{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}),{attrs:{}})};function Wd(e,n){var r=(0,t.useMemo)((function(){var t=jd();return Vd(t,n,{enableHardwareAcceleration:!1},e.transformTemplate),qc(qc({},t.attrs),{style:qc({},t.style)})}),[n]);if(e.style){var i={};kd(i,e.style,e),r.style=qc(qc({},i),r.style)}return r}function Xd(e){return void 0===e&&(e=!1),function(n,r,i,a,o,s){var l=o.latestValues,c=(td(n)?Wd:Bd)(r,l,s),u=function(e,t,n){var r={};for(var i in e)(zd(i)||!0===n&&Nd(i)||!t&&!Nd(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}(r,"string"==typeof n,e),d=qc(qc(qc({},u),c),{ref:a});return i&&(d["data-projection-id"]=i),(0,t.createElement)(n,d)}}var qd=/([a-z])([A-Z])/g,Yd=function(e){return e.replace(qd,"$1-$2").toLowerCase()};function Zd(e,t,n,r){var i=t.style,a=t.vars;for(var o in Object.assign(e.style,i,r&&r.getProjectionStyles(n)),a)e.style.setProperty(o,a[o])}var Jd=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength"]);function $d(e,t,n,r){for(var i in Zd(e,t,void 0,r),t.attrs)e.setAttribute(Jd.has(i)?i:Yd(i),t.attrs[i])}function Kd(e){var t=e.style,n={};for(var r in t)(dd(t[r])||ud(r,e))&&(n[r]=t[r]);return n}function Qd(e){var t=Kd(e);for(var n in e)dd(e[n])&&(t["x"===n||"y"===n?"attr"+n.toUpperCase():n]=e[n]);return t}function eh(e){return"object"==typeof e&&"function"==typeof e.start}var th=function(e){return Array.isArray(e)},nh=function(e){return th(e)?e[e.length-1]||0:e};function rh(e){var t,n=dd(e)?e.get():e;return t=n,Boolean(t&&"object"==typeof t&&t.mix&&t.toValue)?n.toValue():n}function ih(e,t,n,r){var i=e.scrapeMotionValuesFromProps,a=e.createRenderState,o=e.onMount,s={latestValues:oh(t,n,r,i),renderState:a()};return o&&(s.mount=function(e){return o(t,e,s)}),s}var ah=function(e){return function(n,r){var i=(0,t.useContext)(Fu),a=(0,t.useContext)(yu);return r?ih(e,n,i,a):bu((function(){return ih(e,n,i,a)}))}};function oh(e,t,n,r){var i={},a=!1===(null==n?void 0:n.initial),o=r(e);for(var s in o)i[s]=rh(o[s]);var l=e.initial,c=e.animate,u=Wu(e),d=Xu(e);t&&d&&!u&&!1!==e.inherit&&(null!=l||(l=t.initial),null!=c||(c=t.animate));var h=a||!1===l,f=h?c:l;return f&&"boolean"!=typeof f&&!eh(f)&&(Array.isArray(f)?f:[f]).forEach((function(t){var n=Vu(e,t);if(n){var r=n.transitionEnd;n.transition;var a=Yc(n,["transitionEnd","transition"]);for(var o in a){var s=a[o];Array.isArray(s)&&(s=s[h?s.length-1:0]),null!==s&&(i[o]=s)}for(var o in r)i[o]=r[o]}})),i}var sh,lh={useVisualState:ah({scrapeMotionValuesFromProps:Qd,createRenderState:jd,onMount:function(e,t,n){var r=n.renderState,i=n.latestValues;try{r.dimensions="function"==typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(e){r.dimensions={x:0,y:0,width:0,height:0}}Vd(r,i,{enableHardwareAcceleration:!1},e.transformTemplate),$d(t,r)}})},ch={useVisualState:ah({scrapeMotionValuesFromProps:Kd,createRenderState:function(){return{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}}})};function uh(e,t,n,r){return void 0===r&&(r={passive:!0}),e.addEventListener(t,n,r),function(){return e.removeEventListener(t,n)}}function dh(e,n,r,i){(0,t.useEffect)((function(){var t=e.current;if(r&&t)return uh(t,n,r,i)}),[e,n,r,i])}function hh(e){return"undefined"!=typeof PointerEvent&&e instanceof PointerEvent?!("mouse"!==e.pointerType):e instanceof MouseEvent}function fh(e){return!!e.touches}!function(e){e.Animate="animate",e.Hover="whileHover",e.Tap="whileTap",e.Drag="whileDrag",e.Focus="whileFocus",e.InView="whileInView",e.Exit="exit"}(sh||(sh={}));var ph={pageX:0,pageY:0};function mh(e,t){void 0===t&&(t="page");var n=e.touches[0]||e.changedTouches[0]||ph;return{x:n[t+"X"],y:n[t+"Y"]}}function gh(e,t){return void 0===t&&(t="page"),{x:e[t+"X"],y:e[t+"Y"]}}function vh(e,t){return void 0===t&&(t="page"),{point:fh(e)?mh(e,t):gh(e,t)}}var yh=function(e,t){void 0===t&&(t=!1);var n,r=function(t){return e(t,vh(t))};return t?(n=r,function(e){var t=e instanceof MouseEvent;(!t||t&&0===e.button)&&n(e)}):r},bh={pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointercancel:"mousecancel",pointerover:"mouseover",pointerout:"mouseout",pointerenter:"mouseenter",pointerleave:"mouseleave"},xh={pointerdown:"touchstart",pointermove:"touchmove",pointerup:"touchend",pointercancel:"touchcancel"};function _h(e){return mu&&null===window.onpointerdown?e:mu&&null===window.ontouchstart?xh[e]:mu&&null===window.onmousedown?bh[e]:e}function wh(e,t,n,r){return uh(e,_h(t),yh(n,"pointerdown"===t),r)}function Mh(e,t,n,r){return dh(e,_h(t),n&&yh(n,"pointerdown"===t),r)}function Sh(e){var t=null;return function(){return null===t&&(t=e,function(){t=null})}}var Ah=Sh("dragHorizontal"),Eh=Sh("dragVertical");function Ch(e){var t=!1;if("y"===e)t=Eh();else if("x"===e)t=Ah();else{var n=Ah(),r=Eh();n&&r?t=function(){n(),r()}:(n&&n(),r&&r())}return t}function Th(){var e=Ch(!0);return!e||(e(),!1)}function Rh(e,t,n){return function(r,i){var a;hh(r)&&!Th()&&(null===(a=e.animationState)||void 0===a||a.setActive(sh.Hover,t),null==n||n(r,i))}}var Ph=function(e,t){return!!t&&(e===t||Ph(e,t.parentElement))};const Lh=(e,t)=>n=>t(e(n)),Dh=(...e)=>e.reduce(Lh);var Ih=new Set,kh=new WeakMap,Bh=new WeakMap,Fh=function(e){var t;null===(t=kh.get(e.target))||void 0===t||t(e)},Nh=function(e){e.forEach(Fh)};var Oh={some:0,all:1};function zh(e,n,r,i){var a=i.root,o=i.margin,s=i.amount,l=void 0===s?"some":s,c=i.once;(0,t.useEffect)((function(){if(e){var t={root:null==a?void 0:a.current,rootMargin:o,threshold:"number"==typeof l?l:Oh[l]};return function(e,t,n){var r=function(e){var t=e.root,n=Yc(e,["root"]),r=t||document;Bh.has(r)||Bh.set(r,{});var i=Bh.get(r),a=JSON.stringify(n);return i[a]||(i[a]=new IntersectionObserver(Nh,qc({root:t},n))),i[a]}(t);return kh.set(e,n),r.observe(e),function(){kh.delete(e),r.unobserve(e)}}(r.getInstance(),t,(function(e){var t,i=e.isIntersecting;if(n.isInView!==i&&(n.isInView=i,!c||i||!n.hasEnteredView)){i&&(n.hasEnteredView=!0),null===(t=r.animationState)||void 0===t||t.setActive(sh.InView,i);var a=r.getProps(),o=i?a.onViewportEnter:a.onViewportLeave;null==o||o(e)}}))}}),[e,a,o,l])}function Uh(e,n,r,i){var a=i.fallback,o=void 0===a||a;(0,t.useEffect)((function(){var t;e&&o&&("production"!==$c&&(t="IntersectionObserver not available on this device. whileInView animations will trigger on mount.",Ih.has(t)||(console.warn(t),Ih.add(t))),requestAnimationFrame((function(){var e;n.hasEnteredView=!0;var t=r.getProps().onViewportEnter;null==t||t(null),null===(e=r.animationState)||void 0===e||e.setActive(sh.InView,!0)})))}),[e])}var Hh=function(e){return function(t){return e(t),null}},Gh={inView:Hh((function(e){var n=e.visualElement,r=e.whileInView,i=e.onViewportEnter,a=e.onViewportLeave,o=e.viewport,s=void 0===o?{}:o,l=(0,t.useRef)({hasEnteredView:!1,isInView:!1}),c=Boolean(r||i||a);s.once&&l.current.hasEnteredView&&(c=!1),("undefined"==typeof IntersectionObserver?Uh:zh)(c,l.current,n,s)})),tap:Hh((function(e){var n=e.onTap,r=e.onTapStart,i=e.onTapCancel,a=e.whileTap,o=e.visualElement,s=n||r||i||a,l=(0,t.useRef)(!1),c=(0,t.useRef)(null),u={passive:!(r||n||i||m)};function d(){var e;null===(e=c.current)||void 0===e||e.call(c),c.current=null}function h(){var e;return d(),l.current=!1,null===(e=o.animationState)||void 0===e||e.setActive(sh.Tap,!1),!Th()}function f(e,t){h()&&(Ph(o.getInstance(),e.target)?null==n||n(e,t):null==i||i(e,t))}function p(e,t){h()&&(null==i||i(e,t))}function m(e,t){var n;d(),l.current||(l.current=!0,c.current=Dh(wh(window,"pointerup",f,u),wh(window,"pointercancel",p,u)),null===(n=o.animationState)||void 0===n||n.setActive(sh.Tap,!0),null==r||r(e,t))}Mh(o,"pointerdown",s?m:void 0,u),Eu(d)})),focus:Hh((function(e){var t=e.whileFocus,n=e.visualElement;dh(n,"focus",t?function(){var e;null===(e=n.animationState)||void 0===e||e.setActive(sh.Focus,!0)}:void 0),dh(n,"blur",t?function(){var e;null===(e=n.animationState)||void 0===e||e.setActive(sh.Focus,!1)}:void 0)})),hover:Hh((function(e){var t=e.onHoverStart,n=e.onHoverEnd,r=e.whileHover,i=e.visualElement;Mh(i,"pointerenter",t||r?Rh(i,!0,t):void 0,{passive:!t}),Mh(i,"pointerleave",n||r?Rh(i,!1,n):void 0,{passive:!n})}))};function Vh(e,t){if(!Array.isArray(t))return!1;var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const jh=(e,t,n)=>Math.min(Math.max(n,e),t);function Wh(e,t){return e*Math.sqrt(1-t*t)}const Xh=["duration","bounce"],qh=["stiffness","damping","mass"];function Yh(e,t){return t.some((t=>void 0!==e[t]))}function Zh(e){var{from:t=0,to:n=1,restSpeed:r=2,restDelta:i}=e,a=Yc(e,["from","to","restSpeed","restDelta"]);const o={done:!1,value:t};let{stiffness:s,damping:l,mass:c,velocity:u,duration:d,isResolvedFromDuration:h}=function(e){let t=Object.assign({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!Yh(e,qh)&&Yh(e,Xh)){const n=function({duration:e=800,bounce:t=.25,velocity:n=0,mass:r=1}){let i,a,o=1-t;o=jh(.05,1,o),e=jh(.01,10,e/1e3),o<1?(i=t=>{const r=t*o,i=r*e;return.001-(r-n)/Wh(t,o)*Math.exp(-i)},a=t=>{const r=t*o*e,a=r*n+n,s=Math.pow(o,2)*Math.pow(t,2)*e,l=Math.exp(-r),c=Wh(Math.pow(t,2),o);return(.001-i(t)>0?-1:1)*((a-s)*l)/c}):(i=t=>Math.exp(-t*e)*((t-n)*e+1)-.001,a=t=>Math.exp(-t*e)*(e*e*(n-t)));const s=function(e,t,n){let r=n;for(let n=1;n<12;n++)r-=e(r)/t(r);return r}(i,a,5/e);if(e*=1e3,isNaN(s))return{stiffness:100,damping:10,duration:e};{const t=Math.pow(s,2)*r;return{stiffness:t,damping:2*o*Math.sqrt(r*t),duration:e}}}(e);t=Object.assign(Object.assign(Object.assign({},t),n),{velocity:0,mass:1}),t.isResolvedFromDuration=!0}return t}(a),f=Jh,p=Jh;function m(){const e=u?-u/1e3:0,r=n-t,a=l/(2*Math.sqrt(s*c)),o=Math.sqrt(s/c)/1e3;if(void 0===i&&(i=Math.min(Math.abs(n-t)/100,.4)),a<1){const t=Wh(o,a);f=i=>{const s=Math.exp(-a*o*i);return n-s*((e+a*o*r)/t*Math.sin(t*i)+r*Math.cos(t*i))},p=n=>{const i=Math.exp(-a*o*n);return a*o*i*(Math.sin(t*n)*(e+a*o*r)/t+r*Math.cos(t*n))-i*(Math.cos(t*n)*(e+a*o*r)-t*r*Math.sin(t*n))}}else if(1===a)f=t=>n-Math.exp(-o*t)*(r+(e+o*r)*t);else{const t=o*Math.sqrt(a*a-1);f=i=>{const s=Math.exp(-a*o*i),l=Math.min(t*i,300);return n-s*((e+a*o*r)*Math.sinh(l)+t*r*Math.cosh(l))/t}}}return m(),{next:e=>{const t=f(e);if(h)o.done=e>=d;else{const a=1e3*p(e),s=Math.abs(a)<=r,l=Math.abs(n-t)<=i;o.done=s&&l}return o.value=o.done?n:t,o},flipTarget:()=>{u=-u,[t,n]=[n,t],m()}}}Zh.needsInterpolation=(e,t)=>"string"==typeof e||"string"==typeof t;const Jh=e=>0,$h=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r},Kh=(e,t,n)=>-n*e+n*t+e,Qh=(e,t)=>n=>Math.max(Math.min(n,t),e),ef=e=>e%1?Number(e.toFixed(5)):e,tf=/(-)?([\d]*\.?[\d])+/g,nf=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))/gi,rf=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i;function af(e){return"string"==typeof e}const of={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},sf=Object.assign(Object.assign({},of),{transform:Qh(0,1)}),lf=(Object.assign(Object.assign({},of),{default:1}),(e,t)=>n=>Boolean(af(n)&&rf.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t))),cf=(e,t,n)=>r=>{if(!af(r))return r;const[i,a,o,s]=r.match(tf);return{[e]:parseFloat(i),[t]:parseFloat(a),[n]:parseFloat(o),alpha:void 0!==s?parseFloat(s):1}},uf=Qh(0,255),df=Object.assign(Object.assign({},of),{transform:e=>Math.round(uf(e))}),hf={test:lf("rgb","red"),parse:cf("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+df.transform(e)+", "+df.transform(t)+", "+df.transform(n)+", "+ef(sf.transform(r))+")"},ff={test:lf("#"),parse:function(e){let t="",n="",r="",i="";return e.length>5?(t=e.substr(1,2),n=e.substr(3,2),r=e.substr(5,2),i=e.substr(7,2)):(t=e.substr(1,1),n=e.substr(2,1),r=e.substr(3,1),i=e.substr(4,1),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:hf.transform},pf=e=>({test:t=>af(t)&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),mf=(pf("deg"),pf("%")),gf=(pf("px"),pf("vh"),pf("vw"),Object.assign(Object.assign({},mf),{parse:e=>mf.parse(e)/100,transform:e=>mf.transform(100*e)}),{test:lf("hsl","hue"),parse:cf("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+mf.transform(ef(t))+", "+mf.transform(ef(n))+", "+ef(sf.transform(r))+")"});function vf(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function yf({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,n/=100;let i=0,a=0,o=0;if(t/=100){const r=n<.5?n*(1+t):n+t-n*t,s=2*n-r;i=vf(s,r,e+1/3),a=vf(s,r,e),o=vf(s,r,e-1/3)}else i=a=o=n;return{red:Math.round(255*i),green:Math.round(255*a),blue:Math.round(255*o),alpha:r}}const bf=(e,t,n)=>{const r=e*e,i=t*t;return Math.sqrt(Math.max(0,n*(i-r)+r))},xf=[ff,hf,gf],_f=e=>xf.find((t=>t.test(e))),wf=e=>`'${e}' is not an animatable color. Use the equivalent color code instead.`,Mf=(e,t)=>{let n=_f(e),r=_f(t);wf(e),wf(t);let i=n.parse(e),a=r.parse(t);n===gf&&(i=yf(i),n=hf),r===gf&&(a=yf(a),r=hf);const o=Object.assign({},i);return e=>{for(const t in o)"alpha"!==t&&(o[t]=bf(i[t],a[t],e));return o.alpha=Kh(i.alpha,a.alpha,e),n.transform(o)}},Sf=e=>hf.test(e)||ff.test(e)||gf.test(e),Af=e=>hf.test(e)?hf.parse(e):gf.test(e)?gf.parse(e):ff.parse(e),Ef=e=>af(e)?e:e.hasOwnProperty("red")?hf.transform(e):gf.transform(e),Cf="${c}",Tf="${n}";function Rf(e){"number"==typeof e&&(e=`${e}`);const t=[];let n=0;const r=e.match(nf);r&&(n=r.length,e=e.replace(nf,Cf),t.push(...r.map(Af)));const i=e.match(tf);return i&&(e=e.replace(tf,Tf),t.push(...i.map(of.parse))),{values:t,numColors:n,tokenised:e}}function Pf(e){return Rf(e).values}function Lf(e){const{values:t,numColors:n,tokenised:r}=Rf(e),i=t.length;return e=>{let t=r;for(let r=0;r<i;r++)t=t.replace(r<n?Cf:Tf,r<n?Ef(e[r]):ef(e[r]));return t}}const Df=e=>"number"==typeof e?0:e,If={test:function(e){var t,n,r,i;return isNaN(e)&&af(e)&&(null!==(n=null===(t=e.match(tf))||void 0===t?void 0:t.length)&&void 0!==n?n:0)+(null!==(i=null===(r=e.match(nf))||void 0===r?void 0:r.length)&&void 0!==i?i:0)>0},parse:Pf,createTransformer:Lf,getAnimatableNone:function(e){const t=Pf(e);return Lf(e)(t.map(Df))}},kf=e=>"number"==typeof e;function Bf(e,t){return kf(e)?n=>Kh(e,t,n):Sf(e)?Mf(e,t):zf(e,t)}const Ff=(e,t)=>{const n=[...e],r=n.length,i=e.map(((e,n)=>Bf(e,t[n])));return e=>{for(let t=0;t<r;t++)n[t]=i[t](e);return n}},Nf=(e,t)=>{const n=Object.assign(Object.assign({},e),t),r={};for(const i in n)void 0!==e[i]&&void 0!==t[i]&&(r[i]=Bf(e[i],t[i]));return e=>{for(const t in r)n[t]=r[t](e);return n}};function Of(e){const t=If.parse(e),n=t.length;let r=0,i=0,a=0;for(let e=0;e<n;e++)r||"number"==typeof t[e]?r++:void 0!==t[e].hue?a++:i++;return{parsed:t,numNumbers:r,numRGB:i,numHSL:a}}const zf=(e,t)=>{const n=If.createTransformer(t),r=Of(e),i=Of(t);return r.numHSL===i.numHSL&&r.numRGB===i.numRGB&&r.numNumbers>=i.numNumbers?Dh(Ff(r.parsed,i.parsed),n):n=>`${n>0?t:e}`},Uf=(e,t)=>n=>Kh(e,t,n);function Hf(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const a=e.length;t.length,!r||!Array.isArray(r)||r.length,e[0]>e[a-1]&&(e=[].concat(e),t=[].concat(t),e.reverse(),t.reverse());const o=function(e,t,n){const r=[],i=n||("number"==typeof(a=e[0])?Uf:"string"==typeof a?Sf(a)?Mf:zf:Array.isArray(a)?Ff:"object"==typeof a?Nf:void 0);var a;const o=e.length-1;for(let n=0;n<o;n++){let a=i(e[n],e[n+1]);if(t){const e=Array.isArray(t)?t[n]:t;a=Dh(e,a)}r.push(a)}return r}(t,r,i),s=2===a?function([e,t],[n]){return r=>n($h(e,t,r))}(e,o):function(e,t){const n=e.length,r=n-1;return i=>{let a=0,o=!1;if(i<=e[0]?o=!0:i>=e[r]&&(a=r-1,o=!0),!o){let t=1;for(;t<n&&!(e[t]>i||t===r);t++);a=t-1}const s=$h(e[a],e[a+1],i);return t[a](s)}}(e,o);return n?t=>s(jh(e[0],e[a-1],t)):s}const Gf=e=>t=>1-e(1-t),Vf=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,jf=e=>t=>t*t*((e+1)*t-e),Wf=e=>e,Xf=(2,e=>Math.pow(e,2));const qf=Gf(Xf),Yf=Vf(Xf),Zf=e=>1-Math.sin(Math.acos(e)),Jf=Gf(Zf),$f=Vf(Jf),Kf=jf(1.525),Qf=Gf(Kf),ep=Vf(Kf),tp=(e=>{const t=jf(1.525);return e=>(e*=2)<1?.5*t(e):.5*(2-Math.pow(2,-10*(e-1)))})(),np=e=>{if(1===e||0===e)return e;const t=e*e;return e<.36363636363636365?7.5625*t:e<.7272727272727273?9.075*t-9.9*e+3.4:e<.9?12.066481994459833*t-19.63545706371191*e+8.898060941828255:10.8*e*e-20.52*e+10.72},rp=Gf(np);function ip(e,t){return e.map((()=>t||Yf)).splice(0,e.length-1)}function ap({from:e=0,to:t=1,ease:n,offset:r,duration:i=300}){const a={done:!1,value:e},o=Array.isArray(t)?t:[e,t],s=function(e,t){return e.map((e=>e*t))}(r&&r.length===o.length?r:function(e){const t=e.length;return e.map(((e,n)=>0!==n?n/(t-1):0))}(o),i);function l(){return Hf(s,o,{ease:Array.isArray(n)?n:ip(o,n)})}let c=l();return{next:e=>(a.value=c(e),a.done=e>=i,a),flipTarget:()=>{o.reverse(),c=l()}}}const op={keyframes:ap,spring:Zh,decay:function({velocity:e=0,from:t=0,power:n=.8,timeConstant:r=350,restDelta:i=.5,modifyTarget:a}){const o={done:!1,value:t};let s=n*e;const l=t+s,c=void 0===a?l:a(l);return c!==l&&(s=c-t),{next:e=>{const t=-s*Math.exp(-e/r);return o.done=!(t>i||t<-i),o.value=o.done?c:c+t,o},flipTarget:()=>{}}}},sp=1/60*1e3,lp="undefined"!=typeof performance?()=>performance.now():()=>Date.now(),cp="undefined"!=typeof window?e=>window.requestAnimationFrame(e):e=>setTimeout((()=>e(lp())),sp);let up=!0,dp=!1,hp=!1;const fp={delta:0,timestamp:0},pp=["read","update","preRender","render","postRender"],mp=pp.reduce(((e,t)=>(e[t]=function(e){let t=[],n=[],r=0,i=!1,a=!1;const o=new WeakSet,s={schedule:(e,a=!1,s=!1)=>{const l=s&&i,c=l?t:n;return a&&o.add(e),-1===c.indexOf(e)&&(c.push(e),l&&i&&(r=t.length)),e},cancel:e=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1),o.delete(e)},process:e=>{if(i)a=!0;else{if(i=!0,[t,n]=[n,t],n.length=0,r=t.length,r)for(let n=0;n<r;n++){const r=t[n];r(e),o.has(r)&&(s.schedule(r),dp=!0)}i=!1,a&&(a=!1,s.process(e))}}};return s}(),e)),{}),gp=pp.reduce(((e,t)=>{const n=mp[t];return e[t]=(e,t=!1,r=!1)=>(dp||xp(),n.schedule(e,t,r)),e}),{}),vp=pp.reduce(((e,t)=>(e[t]=mp[t].cancel,e)),{}),yp=(pp.reduce(((e,t)=>(e[t]=()=>mp[t].process(fp),e)),{}),e=>mp[e].process(fp)),bp=e=>{dp=!1,fp.delta=up?sp:Math.max(Math.min(e-fp.timestamp,40),1),fp.timestamp=e,hp=!0,pp.forEach(yp),hp=!1,dp&&(up=!1,cp(bp))},xp=()=>{dp=!0,up=!0,hp||cp(bp)},_p=gp;function wp(e,t,n=0){return e-t-n}const Mp=e=>{const t=({delta:t})=>e(t);return{start:()=>_p.update(t,!0),stop:()=>vp.update(t)}};function Sp(e){var t,n,{from:r,autoplay:i=!0,driver:a=Mp,elapsed:o=0,repeat:s=0,repeatType:l="loop",repeatDelay:c=0,onPlay:u,onStop:d,onComplete:h,onRepeat:f,onUpdate:p}=e,m=Yc(e,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]);let g,v,y,{to:b}=m,x=0,_=m.duration,w=!1,M=!0;const S=function(e){if(Array.isArray(e.to))return ap;if(op[e.type])return op[e.type];const t=new Set(Object.keys(e));return t.has("ease")||t.has("duration")&&!t.has("dampingRatio")?ap:t.has("dampingRatio")||t.has("stiffness")||t.has("mass")||t.has("damping")||t.has("restSpeed")||t.has("restDelta")?Zh:ap}(m);(null===(n=(t=S).needsInterpolation)||void 0===n?void 0:n.call(t,r,b))&&(y=Hf([0,100],[r,b],{clamp:!1}),r=0,b=100);const A=S(Object.assign(Object.assign({},m),{from:r,to:b}));return i&&(null==u||u(),g=a((function(e){if(M||(e=-e),o+=e,!w){const e=A.next(Math.max(0,o));v=e.value,y&&(v=y(v)),w=M?e.done:o<=0}null==p||p(v),w&&(0===x&&(null!=_||(_=o)),x<s?function(e,t,n,r){return r?e>=t+n:e<=-n}(o,_,c,M)&&(x++,"reverse"===l?(M=x%2==0,o=function(e,t,n=0,r=!0){return r?wp(t+-e,t,n):t-(e-t)+n}(o,_,c,M)):(o=wp(o,_,c),"mirror"===l&&A.flipTarget()),w=!1,f&&f()):(g.stop(),h&&h()))})),g.start()),{stop:()=>{null==d||d(),g.stop()}}}function Ap(e,t){return t?e*(1e3/t):0}var Ep=function(e){return 1e3*e};const Cp=(e,t)=>1-3*t+3*e,Tp=(e,t)=>3*t-6*e,Rp=e=>3*e,Pp=(e,t,n)=>((Cp(t,n)*e+Tp(t,n))*e+Rp(t))*e,Lp=(e,t,n)=>3*Cp(t,n)*e*e+2*Tp(t,n)*e+Rp(t),Dp=.1;function Ip(e,t,n,r){if(e===t&&n===r)return Wf;const i=new Float32Array(11);for(let t=0;t<11;++t)i[t]=Pp(t*Dp,e,n);return a=>0===a||1===a?a:Pp(function(t){let r=0,a=1;for(;10!==a&&i[a]<=t;++a)r+=Dp;--a;const o=r+(t-i[a])/(i[a+1]-i[a])*Dp,s=Lp(o,e,n);return s>=.001?function(e,t,n,r){for(let i=0;i<8;++i){const i=Lp(t,n,r);if(0===i)return t;t-=(Pp(t,n,r)-e)/i}return t}(t,o,e,n):0===s?o:function(e,t,n,r,i){let a,o,s=0;do{o=t+(n-t)/2,a=Pp(o,r,i)-e,a>0?n=o:t=o}while(Math.abs(a)>1e-7&&++s<10);return o}(t,r,r+Dp,e,n)}(a),t,r)}var kp={linear:Wf,easeIn:Xf,easeInOut:Yf,easeOut:qf,circIn:Zf,circInOut:$f,circOut:Jf,backIn:Kf,backInOut:ep,backOut:Qf,anticipate:tp,bounceIn:rp,bounceInOut:e=>e<.5?.5*(1-np(1-2*e)):.5*np(2*e-1)+.5,bounceOut:np},Bp=function(e){if(Array.isArray(e)){e.length;var t=Zc(e,4);return Ip(t[0],t[1],t[2],t[3])}return"string"==typeof e?("Invalid easing type '".concat(e,"'"),kp[e]):e};const Fp=(e,t)=>n=>Boolean(xd(n)&&bd.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),Np=(e,t,n)=>r=>{if(!xd(r))return r;const[i,a,o,s]=r.match(vd);return{[e]:parseFloat(i),[t]:parseFloat(a),[n]:parseFloat(o),alpha:void 0!==s?parseFloat(s):1}},Op=md(0,255),zp=Object.assign(Object.assign({},Td),{transform:e=>Math.round(Op(e))}),Up={test:Fp("rgb","red"),parse:Np("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+zp.transform(e)+", "+zp.transform(t)+", "+zp.transform(n)+", "+gd(Rd.transform(r))+")"},Hp={test:Fp("#"),parse:function(e){let t="",n="",r="",i="";return e.length>5?(t=e.substr(1,2),n=e.substr(3,2),r=e.substr(5,2),i=e.substr(7,2)):(t=e.substr(1,1),n=e.substr(2,1),r=e.substr(3,1),i=e.substr(4,1),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:Up.transform},Gp={test:Fp("hsl","hue"),parse:Np("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Md.transform(gd(t))+", "+Md.transform(gd(n))+", "+gd(Rd.transform(r))+")"},Vp={test:e=>Up.test(e)||Hp.test(e)||Gp.test(e),parse:e=>Up.test(e)?Up.parse(e):Gp.test(e)?Gp.parse(e):Hp.parse(e),transform:e=>xd(e)?e:e.hasOwnProperty("red")?Up.transform(e):Gp.transform(e)},jp="${c}",Wp="${n}";function Xp(e){"number"==typeof e&&(e=`${e}`);const t=[];let n=0;const r=e.match(yd);r&&(n=r.length,e=e.replace(yd,jp),t.push(...r.map(Vp.parse)));const i=e.match(vd);return i&&(e=e.replace(vd,Wp),t.push(...i.map(Td.parse))),{values:t,numColors:n,tokenised:e}}function qp(e){return Xp(e).values}function Yp(e){const{values:t,numColors:n,tokenised:r}=Xp(e),i=t.length;return e=>{let t=r;for(let r=0;r<i;r++)t=t.replace(r<n?jp:Wp,r<n?Vp.transform(e[r]):gd(e[r]));return t}}const Zp=e=>"number"==typeof e?0:e,Jp={test:function(e){var t,n,r,i;return isNaN(e)&&xd(e)&&(null!==(n=null===(t=e.match(vd))||void 0===t?void 0:t.length)&&void 0!==n?n:0)+(null!==(i=null===(r=e.match(yd))||void 0===r?void 0:r.length)&&void 0!==i?i:0)>0},parse:qp,createTransformer:Yp,getAnimatableNone:function(e){const t=qp(e);return Yp(e)(t.map(Zp))}};var $p=function(e,t){return!("zIndex"===e||"number"!=typeof t&&!Array.isArray(t)&&("string"!=typeof t||!Jp.test(t)||t.startsWith("url(")))},Kp=function(){return{type:"spring",stiffness:500,damping:25,restSpeed:10}},Qp=function(e){return{type:"spring",stiffness:550,damping:0===e?2*Math.sqrt(550):30,restSpeed:10}},em=function(){return{type:"keyframes",ease:"linear",duration:.3}},tm=function(e){return{type:"keyframes",duration:.8,values:e}},nm={x:Kp,y:Kp,z:Kp,rotate:Kp,rotateX:Kp,rotateY:Kp,rotateZ:Kp,scaleX:Qp,scaleY:Qp,scale:Qp,opacity:em,backgroundColor:em,color:em,default:Qp};const rm=new Set(["brightness","contrast","saturate","opacity"]);function im(e){let[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(vd)||[];if(!r)return e;const i=n.replace(r,"");let a=rm.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+i+")"}const am=/([a-z-]*)\(.*?\)/g,om=Object.assign(Object.assign({},Jp),{getAnimatableNone:e=>{const t=e.match(am);return t?t.map(im).join(" "):e}});var sm=qc(qc({},Dd),{color:Vp,backgroundColor:Vp,outlineColor:Vp,fill:Vp,stroke:Vp,borderColor:Vp,borderTopColor:Vp,borderRightColor:Vp,borderBottomColor:Vp,borderLeftColor:Vp,filter:om,WebkitFilter:om}),lm=function(e){return sm[e]};function cm(e,t){var n,r=lm(e);return r!==om&&(r=Jp),null===(n=r.getAnimatableNone)||void 0===n?void 0:n.call(r,t)}function um(e,t,n){var r,i,a,o;return Array.isArray(t.to)&&(null!==(r=e.duration)&&void 0!==r||(e.duration=.8)),function(e){Array.isArray(e.to)&&null===e.to[0]&&(e.to=Jc([],Zc(e.to),!1),e.to[0]=e.from)}(t),function(e){e.when,e.delay,e.delayChildren,e.staggerChildren,e.staggerDirection,e.repeat,e.repeatType,e.repeatDelay,e.from;var t=Yc(e,["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from"]);return!!Object.keys(t).length}(e)||(e=qc(qc({},e),(i=n,a=t.to,o=th(a)?tm:nm[i]||nm.default,qc({to:a},o(a))))),qc(qc({},t),function(e){var t=e.ease,n=e.times,r=e.yoyo,i=e.flip,a=e.loop,o=Yc(e,["ease","times","yoyo","flip","loop"]),s=qc({},o);return n&&(s.offset=n),o.duration&&(s.duration=Ep(o.duration)),o.repeatDelay&&(s.repeatDelay=Ep(o.repeatDelay)),t&&(s.ease=function(e){return Array.isArray(e)&&"number"!=typeof e[0]}(t)?t.map(Bp):Bp(t)),"tween"===o.type&&(s.type="keyframes"),(r||a||i)&&(r?s.repeatType="reverse":a?s.repeatType="loop":i&&(s.repeatType="mirror"),s.repeat=a||r||i||o.repeat),"spring"!==o.type&&(s.type="keyframes"),s}(e))}function dm(e){return 0===e||"string"==typeof e&&0===parseFloat(e)&&-1===e.indexOf(" ")}function hm(e){return"number"==typeof e?0:cm("",e)}function fm(e,t){return e[t]||e.default||e}function pm(e,t,n,r){return void 0===r&&(r={}),t.start((function(i){var a,o,s=function(e,t,n,r,i){var a,o=fm(r,e),s=null!==(a=o.from)&&void 0!==a?a:t.get(),l=$p(e,n);"none"===s&&l&&"string"==typeof n?s=cm(e,n):dm(s)&&"string"==typeof n?s=hm(n):!Array.isArray(n)&&dm(n)&&"string"==typeof s&&(n=hm(s));var c=$p(e,s);return"You are trying to animate ".concat(e,' from "').concat(s,'" to "').concat(n,'". ').concat(s," is not an animatable value - to enable this animation set ").concat(s," to a value animatable to ").concat(n," via the `style` property."),c&&l&&!1!==o.type?function(){var r={from:s,to:n,velocity:t.getVelocity(),onComplete:i,onUpdate:function(e){return t.set(e)}};return"inertia"===o.type||"decay"===o.type?function({from:e=0,velocity:t=0,min:n,max:r,power:i=.8,timeConstant:a=750,bounceStiffness:o=500,bounceDamping:s=10,restDelta:l=1,modifyTarget:c,driver:u,onUpdate:d,onComplete:h,onStop:f}){let p;function m(e){return void 0!==n&&e<n||void 0!==r&&e>r}function g(e){return void 0===n?r:void 0===r||Math.abs(n-e)<Math.abs(r-e)?n:r}function v(e){null==p||p.stop(),p=Sp(Object.assign(Object.assign({},e),{driver:u,onUpdate:t=>{var n;null==d||d(t),null===(n=e.onUpdate)||void 0===n||n.call(e,t)},onComplete:h,onStop:f}))}function y(e){v(Object.assign({type:"spring",stiffness:o,damping:s,restDelta:l},e))}if(m(e))y({from:e,velocity:t,to:g(e)});else{let r=i*t+e;void 0!==c&&(r=c(r));const o=g(r),s=o===n?-1:1;let u,d;const h=e=>{u=d,d=e,t=Ap(e-u,fp.delta),(1===s&&e>o||-1===s&&e<o)&&y({from:e,to:o,velocity:t})};v({type:"decay",from:e,velocity:t,timeConstant:a,power:i,restDelta:l,modifyTarget:c,onUpdate:m(r)?h:void 0})}return{stop:()=>null==p?void 0:p.stop()}}(qc(qc({},r),o)):Sp(qc(qc({},um(o,r,e)),{onUpdate:function(e){var t;r.onUpdate(e),null===(t=o.onUpdate)||void 0===t||t.call(o,e)},onComplete:function(){var e;r.onComplete(),null===(e=o.onComplete)||void 0===e||e.call(o)}}))}:function(){var e,r,a=nh(n);return t.set(a),i(),null===(e=null==o?void 0:o.onUpdate)||void 0===e||e.call(o,a),null===(r=null==o?void 0:o.onComplete)||void 0===r||r.call(o),{stop:function(){}}}}(e,t,n,r,i),l=function(e,t){var n,r;return null!==(r=null!==(n=(fm(e,t)||{}).delay)&&void 0!==n?n:e.delay)&&void 0!==r?r:0}(r,e),c=function(){return o=s()};return l?a=window.setTimeout(c,Ep(l)):c(),function(){clearTimeout(a),null==o||o.stop()}}))}function mm(e,t){-1===e.indexOf(t)&&e.push(t)}function gm(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var vm=function(){function e(){this.subscriptions=[]}return e.prototype.add=function(e){var t=this;return mm(this.subscriptions,e),function(){return gm(t.subscriptions,e)}},e.prototype.notify=function(e,t,n){var r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(var i=0;i<r;i++){var a=this.subscriptions[i];a&&a(e,t,n)}},e.prototype.getSize=function(){return this.subscriptions.length},e.prototype.clear=function(){this.subscriptions.length=0},e}(),ym=function(){function e(e){var t=this;this.version="7.0.0",this.timeDelta=0,this.lastUpdated=0,this.updateSubscribers=new vm,this.velocityUpdateSubscribers=new vm,this.renderSubscribers=new vm,this.canTrackVelocity=!1,this.updateAndNotify=function(e,n){void 0===n&&(n=!0),t.prev=t.current,t.current=e;var r=fu(),i=r.delta,a=r.timestamp;t.lastUpdated!==a&&(t.timeDelta=i,t.lastUpdated=a,pu.postRender(t.scheduleVelocityCheck)),t.prev!==t.current&&t.updateSubscribers.notify(t.current),t.velocityUpdateSubscribers.getSize()&&t.velocityUpdateSubscribers.notify(t.getVelocity()),n&&t.renderSubscribers.notify(t.current)},this.scheduleVelocityCheck=function(){return pu.postRender(t.velocityCheck)},this.velocityCheck=function(e){e.timestamp!==t.lastUpdated&&(t.prev=t.current,t.velocityUpdateSubscribers.notify(t.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=function(e){return!isNaN(parseFloat(e))}(this.current)}return e.prototype.onChange=function(e){return this.updateSubscribers.add(e)},e.prototype.clearListeners=function(){this.updateSubscribers.clear()},e.prototype.onRenderRequest=function(e){return e(this.get()),this.renderSubscribers.add(e)},e.prototype.attach=function(e){this.passiveEffect=e},e.prototype.set=function(e,t){void 0===t&&(t=!0),t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)},e.prototype.get=function(){return this.current},e.prototype.getPrevious=function(){return this.prev},e.prototype.getVelocity=function(){return this.canTrackVelocity?Ap(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0},e.prototype.start=function(e){var t=this;return this.stop(),new Promise((function(n){t.hasAnimated=!0,t.stopAnimation=e(n)})).then((function(){return t.clearAnimation()}))},e.prototype.stop=function(){this.stopAnimation&&this.stopAnimation(),this.clearAnimation()},e.prototype.isAnimating=function(){return!!this.stopAnimation},e.prototype.clearAnimation=function(){this.stopAnimation=null},e.prototype.destroy=function(){this.updateSubscribers.clear(),this.renderSubscribers.clear(),this.stop()},e}();function bm(e){return new ym(e)}var xm=function(e){return function(t){return t.test(e)}},_m=[Td,Sd,Md,wd,Ed,Ad,{test:function(e){return"auto"===e},parse:function(e){return e}}],wm=function(e){return _m.find(xm(e))},Mm=Jc(Jc([],Zc(_m),!1),[Vp,Jp],!1),Sm=function(e){return Mm.find(xm(e))};function Am(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,bm(n))}function Em(e,t){if(t)return(t[e]||t.default||t).from}function Cm(e,t,n){var r;void 0===n&&(n={});var i=ju(e,t,n.custom),a=(i||{}).transition,o=void 0===a?e.getDefaultTransition()||{}:a;n.transitionOverride&&(o=n.transitionOverride);var s=i?function(){return Tm(e,i,n)}:function(){return Promise.resolve()},l=(null===(r=e.variantChildren)||void 0===r?void 0:r.size)?function(r){void 0===r&&(r=0);var i=o.delayChildren,a=void 0===i?0:i,s=o.staggerChildren,l=o.staggerDirection;return function(e,t,n,r,i,a){void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=1);var o=[],s=(e.variantChildren.size-1)*r,l=1===i?function(e){return void 0===e&&(e=0),e*r}:function(e){return void 0===e&&(e=0),s-e*r};return Array.from(e.variantChildren).sort(Rm).forEach((function(e,r){o.push(Cm(e,t,qc(qc({},a),{delay:n+l(r)})).then((function(){return e.notifyAnimationComplete(t)})))})),Promise.all(o)}(e,t,a+r,s,l,n)}:function(){return Promise.resolve()},c=o.when;if(c){var u=Zc("beforeChildren"===c?[s,l]:[l,s],2),d=u[0],h=u[1];return d().then(h)}return Promise.all([s(),l(n.delay)])}function Tm(e,t,n){var r,i=void 0===n?{}:n,a=i.delay,o=void 0===a?0:a,s=i.transitionOverride,l=i.type,c=e.makeTargetAnimatable(t),u=c.transition,d=void 0===u?e.getDefaultTransition():u,h=c.transitionEnd,f=Yc(c,["transition","transitionEnd"]);s&&(d=s);var p=[],m=l&&(null===(r=e.animationState)||void 0===r?void 0:r.getState()[l]);for(var g in f){var v=e.getValue(g),y=f[g];if(!(!v||void 0===y||m&&Pm(m,g))){var b=qc({delay:o},d);e.shouldReduceMotion&&sd(g)&&(b=qc(qc({},b),{type:!1,delay:0}));var x=pm(g,v,y,b);p.push(x)}}return Promise.all(p).then((function(){h&&function(e,t){var n=ju(e,t),r=n?e.makeTargetAnimatable(n,!1):{},i=r.transitionEnd,a=void 0===i?{}:i;r.transition;var o=Yc(r,["transitionEnd","transition"]);for(var s in o=qc(qc({},o),a))Am(e,s,nh(o[s]))}(e,h)}))}function Rm(e,t){return e.sortNodePosition(t)}function Pm(e,t){var n=e.protectedKeys,r=e.needsAnimating,i=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,i}var Lm=[sh.Animate,sh.InView,sh.Focus,sh.Hover,sh.Tap,sh.Drag,sh.Exit],Dm=Jc([],Zc(Lm),!1).reverse(),Im=Lm.length;function km(e){var t=function(e){return function(t){return Promise.all(t.map((function(t){var n=t.animation,r=t.options;return function(e,t,n){var r;if(void 0===n&&(n={}),e.notifyAnimationStart(t),Array.isArray(t)){var i=t.map((function(t){return Cm(e,t,n)}));r=Promise.all(i)}else if("string"==typeof t)r=Cm(e,t,n);else{var a="function"==typeof t?ju(e,t,n.custom):t;r=Tm(e,a,n)}return r.then((function(){return e.notifyAnimationComplete(t)}))}(e,n,r)})))}}(e),n=function(){var e;return(e={})[sh.Animate]=Bm(!0),e[sh.InView]=Bm(),e[sh.Hover]=Bm(),e[sh.Tap]=Bm(),e[sh.Drag]=Bm(),e[sh.Focus]=Bm(),e[sh.Exit]=Bm(),e}(),r={},i=!0,a=function(t,n){var r=ju(e,n);if(r){r.transition;var i=r.transitionEnd,a=Yc(r,["transition","transitionEnd"]);t=qc(qc(qc({},t),a),i)}return t};function o(o,s){for(var l,c=e.getProps(),u=e.getVariantContext(!0)||{},d=[],h=new Set,f={},p=1/0,m=function(t){var r=Dm[t],m=n[r],g=null!==(l=c[r])&&void 0!==l?l:u[r],v=Gu(g),y=r===s?m.isActive:null;!1===y&&(p=t);var b=g===u[r]&&g!==c[r]&&v;if(b&&i&&e.manuallyAnimateOnMount&&(b=!1),m.protectedKeys=qc({},f),!m.isActive&&null===y||!g&&!m.prevProp||eh(g)||"boolean"==typeof g)return"continue";var x=function(e,t){return"string"==typeof t?t!==e:!!Hu(t)&&!Vh(t,e)}(m.prevProp,g),_=x||r===s&&m.isActive&&!b&&v||t>p&&v,w=Array.isArray(g)?g:[g],M=w.reduce(a,{});!1===y&&(M={});var S=m.prevResolvedValues,A=void 0===S?{}:S,E=qc(qc({},A),M),C=function(e){_=!0,h.delete(e),m.needsAnimating[e]=!0};for(var T in E){var R=M[T],P=A[T];f.hasOwnProperty(T)||(R!==P?th(R)&&th(P)?!Vh(R,P)||x?C(T):m.protectedKeys[T]=!0:void 0!==R?C(T):h.add(T):void 0!==R&&h.has(T)?C(T):m.protectedKeys[T]=!0)}m.prevProp=g,m.prevResolvedValues=M,m.isActive&&(f=qc(qc({},f),M)),i&&e.blockInitialAnimation&&(_=!1),_&&!b&&d.push.apply(d,Jc([],Zc(w.map((function(e){return{animation:e,options:qc({type:r},o)}}))),!1))},g=0;g<Im;g++)m(g);if(r=qc({},f),h.size){var v={};h.forEach((function(t){var n=e.getBaseTarget(t);void 0!==n&&(v[t]=n)})),d.push({animation:v})}var y=Boolean(d.length);return i&&!1===c.initial&&!e.manuallyAnimateOnMount&&(y=!1),i=!1,y?t(d):Promise.resolve()}return{isAnimated:function(e){return void 0!==r[e]},animateChanges:o,setActive:function(t,r,i){var a;if(n[t].isActive===r)return Promise.resolve();null===(a=e.variantChildren)||void 0===a||a.forEach((function(e){var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)})),n[t].isActive=r;var s=o(i,t);for(var l in n)n[l].protectedKeys={};return s},setAnimateFunction:function(n){t=n(e)},getState:function(){return n}}}function Bm(e){return void 0===e&&(e=!1),{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}var Fm={animation:Hh((function(e){var n=e.visualElement,r=e.animate;n.animationState||(n.animationState=km(n)),eh(r)&&(0,t.useEffect)((function(){return r.subscribe(n)}),[r])})),exit:Hh((function(e){var n=e.custom,r=e.visualElement,i=Zc(Ru(),2),a=i[0],o=i[1],s=(0,t.useContext)(yu);(0,t.useEffect)((function(){var e,t;r.isPresent=a;var i=null===(e=r.animationState)||void 0===e?void 0:e.setActive(sh.Exit,!a,{custom:null!==(t=null==s?void 0:s.custom)&&void 0!==t?t:n});!a&&(null==i||i.then(o))}),[a])}))};const Nm=e=>e.hasOwnProperty("x")&&e.hasOwnProperty("y"),Om=e=>Nm(e)&&e.hasOwnProperty("z"),zm=(e,t)=>Math.abs(e-t);function Um(e,t){if(kf(e)&&kf(t))return zm(e,t);if(Nm(e)&&Nm(t)){const n=zm(e.x,t.x),r=zm(e.y,t.y),i=Om(e)&&Om(t)?zm(e.z,t.z):0;return Math.sqrt(Math.pow(n,2)+Math.pow(r,2)+Math.pow(i,2))}}var Hm=function(){function e(e,t,n){var r=(void 0===n?{}:n).transformPagePoint,i=this;if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=function(){if(i.lastMoveEvent&&i.lastMoveEventInfo){var e=jm(i.lastMoveEventInfo,i.history),t=null!==i.startEvent,n=Um(e.offset,{x:0,y:0})>=3;if(t||n){var r=e.point,a=fu().timestamp;i.history.push(qc(qc({},r),{timestamp:a}));var o=i.handlers,s=o.onStart,l=o.onMove;t||(s&&s(i.lastMoveEvent,e),i.startEvent=i.lastMoveEvent),l&&l(i.lastMoveEvent,e)}}},this.handlePointerMove=function(e,t){i.lastMoveEvent=e,i.lastMoveEventInfo=Gm(t,i.transformPagePoint),hh(e)&&0===e.buttons?i.handlePointerUp(e,t):pu.update(i.updatePoint,!0)},this.handlePointerUp=function(e,t){i.end();var n=i.handlers,r=n.onEnd,a=n.onSessionEnd,o=jm(Gm(t,i.transformPagePoint),i.history);i.startEvent&&r&&r(e,o),a&&a(e,o)},!(fh(e)&&e.touches.length>1)){this.handlers=t,this.transformPagePoint=r;var a=Gm(vh(e),this.transformPagePoint),o=a.point,s=fu().timestamp;this.history=[qc(qc({},o),{timestamp:s})];var l=t.onSessionStart;l&&l(e,jm(a,this.history)),this.removeListeners=Dh(wh(window,"pointermove",this.handlePointerMove),wh(window,"pointerup",this.handlePointerUp),wh(window,"pointercancel",this.handlePointerUp))}}return e.prototype.updateHandlers=function(e){this.handlers=e},e.prototype.end=function(){this.removeListeners&&this.removeListeners(),lu.update(this.updatePoint)},e}();function Gm(e,t){return t?{point:t(e.point)}:e}function Vm(e,t){return{x:e.x-t.x,y:e.y-t.y}}function jm(e,t){var n=e.point;return{point:n,delta:Vm(n,Xm(t)),offset:Vm(n,Wm(t)),velocity:qm(t,.1)}}function Wm(e){return e[0]}function Xm(e){return e[e.length-1]}function qm(e,t){if(e.length<2)return{x:0,y:0};for(var n=e.length-1,r=null,i=Xm(e);n>=0&&(r=e[n],!(i.timestamp-r.timestamp>Ep(t)));)n--;if(!r)return{x:0,y:0};var a=(i.timestamp-r.timestamp)/1e3;if(0===a)return{x:0,y:0};var o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Ym(e){return e.max-e.min}function Zm(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=.01),Um(e,t)<n}function Jm(e,t,n,r){void 0===r&&(r=.5),e.origin=r,e.originPoint=Kh(t.min,t.max,e.origin),e.scale=Ym(n)/Ym(t),(Zm(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Kh(n.min,n.max,e.origin)-e.originPoint,(Zm(e.translate)||isNaN(e.translate))&&(e.translate=0)}function $m(e,t,n,r){Jm(e.x,t.x,n.x,null==r?void 0:r.originX),Jm(e.y,t.y,n.y,null==r?void 0:r.originY)}function Km(e,t,n){e.min=n.min+t.min,e.max=e.min+Ym(t)}function Qm(e,t,n){e.min=t.min-n.min,e.max=e.min+Ym(t)}function eg(e,t,n){Qm(e.x,t.x,n.x),Qm(e.y,t.y,n.y)}function tg(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function ng(e,t){var n,r=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&(r=(n=Zc([i,r],2))[0],i=n[1]),{min:r,max:i}}var rg=.35;function ig(e,t,n){return{min:ag(e,t),max:ag(e,n)}}function ag(e,t){var n;return"number"==typeof e?e:null!==(n=e[t])&&void 0!==n?n:0}function og(e){return[e("x"),e("y")]}function sg(e){var t=e.top;return{x:{min:e.left,max:e.right},y:{min:t,max:e.bottom}}}function lg(e){return void 0===e||1===e}function cg(e){var t=e.scale,n=e.scaleX,r=e.scaleY;return!lg(t)||!lg(n)||!lg(r)}function ug(e){return cg(e)||dg(e.x)||dg(e.y)||e.z||e.rotate||e.rotateX||e.rotateY}function dg(e){return e&&"0%"!==e}function hg(e,t,n){return n+t*(e-n)}function fg(e,t,n,r,i){return void 0!==i&&(e=hg(e,i,r)),hg(e,n,r)+t}function pg(e,t,n,r,i){void 0===t&&(t=0),void 0===n&&(n=1),e.min=fg(e.min,t,n,r,i),e.max=fg(e.max,t,n,r,i)}function mg(e,t){var n=t.x,r=t.y;pg(e.x,n.translate,n.scale,n.originPoint),pg(e.y,r.translate,r.scale,r.originPoint)}function gg(e,t){e.min=e.min+t,e.max=e.max+t}function vg(e,t,n){var r=Zc(n,3),i=r[0],a=r[1],o=r[2],s=void 0!==t[o]?t[o]:.5,l=Kh(e.min,e.max,s);pg(e,t[i],t[a],l,t.scale)}var yg=["x","scaleX","originX"],bg=["y","scaleY","originY"];function xg(e,t){vg(e.x,t,yg),vg(e.y,t,bg)}function _g(e,t){return sg(function(e,t){if(!t)return e;var n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}var wg=new WeakMap,Mg=function(){function e(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}return e.prototype.start=function(e,t){var n=this,r=(void 0===t?{}:t).snapToCursor,i=void 0!==r&&r;!1!==this.visualElement.isPresent&&(this.panSession=new Hm(e,{onSessionStart:function(e){n.stopAnimation(),i&&n.snapToCursor(vh(e,"page").point)},onStart:function(e,t){var r,i=n.getProps(),a=i.drag,o=i.dragPropagation,s=i.onDragStart;(!a||o||(n.openGlobalLock&&n.openGlobalLock(),n.openGlobalLock=Ch(a),n.openGlobalLock))&&(n.isDragging=!0,n.currentDirection=null,n.resolveConstraints(),n.visualElement.projection&&(n.visualElement.projection.isAnimationBlocked=!0,n.visualElement.projection.target=void 0),og((function(e){var t,r,i=n.getAxisMotionValue(e).get()||0;if(Md.test(i)){var a=null===(r=null===(t=n.visualElement.projection)||void 0===t?void 0:t.layout)||void 0===r?void 0:r.actual[e];a&&(i=Ym(a)*(parseFloat(i)/100))}n.originPoint[e]=i})),null==s||s(e,t),null===(r=n.visualElement.animationState)||void 0===r||r.setActive(sh.Drag,!0))},onMove:function(e,t){var r=n.getProps(),i=r.dragPropagation,a=r.dragDirectionLock,o=r.onDirectionLock,s=r.onDrag;if(i||n.openGlobalLock){var l=t.offset;if(a&&null===n.currentDirection)return n.currentDirection=function(e,t){void 0===t&&(t=10);var n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}(l),void(null!==n.currentDirection&&(null==o||o(n.currentDirection)));n.updateAxis("x",t.point,l),n.updateAxis("y",t.point,l),n.visualElement.syncRender(),null==s||s(e,t)}},onSessionEnd:function(e,t){return n.stop(e,t)}},{transformPagePoint:this.visualElement.getTransformPagePoint()}))},e.prototype.stop=function(e,t){var n=this.isDragging;if(this.cancel(),n){var r=t.velocity;this.startAnimation(r);var i=this.getProps().onDragEnd;null==i||i(e,t)}},e.prototype.cancel=function(){var e,t;this.isDragging=!1,this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!1),null===(e=this.panSession)||void 0===e||e.end(),this.panSession=void 0,!this.getProps().dragPropagation&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),null===(t=this.visualElement.animationState)||void 0===t||t.setActive(sh.Drag,!1)},e.prototype.updateAxis=function(e,t,n){var r=this.getProps().drag;if(n&&Sg(e,r,this.currentDirection)){var i=this.getAxisMotionValue(e),a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=function(e,t,n){var r=t.min,i=t.max;return void 0!==r&&e<r?e=n?Kh(r,e,n.min):Math.max(e,r):void 0!==i&&e>i&&(e=n?Kh(i,e,n.max):Math.min(e,i)),e}(a,this.constraints[e],this.elastic[e])),i.set(a)}},e.prototype.resolveConstraints=function(){var e=this,t=this.getProps(),n=t.dragConstraints,r=t.dragElastic,i=(this.visualElement.projection||{}).layout,a=this.constraints;n&&Uu(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!n||!i)&&function(e,t){var n=t.top,r=t.left,i=t.bottom,a=t.right;return{x:tg(e.x,r,a),y:tg(e.y,n,i)}}(i.actual,n),this.elastic=function(e){return void 0===e&&(e=rg),!1===e?e=0:!0===e&&(e=rg),{x:ig(e,"left","right"),y:ig(e,"top","bottom")}}(r),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&og((function(t){e.getAxisMotionValue(t)&&(e.constraints[t]=function(e,t){var n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(i.actual[t],e.constraints[t]))}))},e.prototype.resolveRefConstraints=function(){var e=this.getProps(),t=e.dragConstraints,n=e.onMeasureDragConstraints;if(!t||!Uu(t))return!1;var r=t.current,i=this.visualElement.projection;if(!i||!i.layout)return!1;var a=function(e,t,n){var r=_g(e,n),i=t.scroll;return i&&(gg(r.x,i.x),gg(r.y,i.y)),r}(r,i.root,this.visualElement.getTransformPagePoint()),o=function(e,t){return{x:ng(e.x,t.x),y:ng(e.y,t.y)}}(i.layout.actual,a);if(n){var s=n(function(e){var t=e.x,n=e.y;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(o));this.hasMutatedConstraints=!!s,s&&(o=sg(s))}return o},e.prototype.startAnimation=function(e){var t=this,n=this.getProps(),r=n.drag,i=n.dragMomentum,a=n.dragElastic,o=n.dragTransition,s=n.dragSnapToOrigin,l=n.onDragTransitionEnd,c=this.constraints||{},u=og((function(n){var l;if(Sg(n,r,t.currentDirection)){var u=null!==(l=null==c?void 0:c[n])&&void 0!==l?l:{};s&&(u={min:0,max:0});var d=a?200:1e6,h=a?40:1e7,f=qc(qc({type:"inertia",velocity:i?e[n]:0,bounceStiffness:d,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10},o),u);return t.startAxisValueAnimation(n,f)}}));return Promise.all(u).then(l)},e.prototype.startAxisValueAnimation=function(e,t){return pm(e,this.getAxisMotionValue(e),0,t)},e.prototype.stopAnimation=function(){var e=this;og((function(t){return e.getAxisMotionValue(t).stop()}))},e.prototype.getAxisMotionValue=function(e){var t,n,r="_drag"+e.toUpperCase();return this.visualElement.getProps()[r]||this.visualElement.getValue(e,null!==(n=null===(t=this.visualElement.getProps().initial)||void 0===t?void 0:t[e])&&void 0!==n?n:0)},e.prototype.snapToCursor=function(e){var t=this;og((function(n){if(Sg(n,t.getProps().drag,t.currentDirection)){var r=t.visualElement.projection,i=t.getAxisMotionValue(n);if(r&&r.layout){var a=r.layout.actual[n],o=a.min,s=a.max;i.set(e[n]-Kh(o,s,.5))}}}))},e.prototype.scalePositionWithinConstraints=function(){var e,t=this,n=this.getProps(),r=n.drag,i=n.dragConstraints,a=this.visualElement.projection;if(Uu(i)&&a&&this.constraints){this.stopAnimation();var o={x:0,y:0};og((function(e){var n,r,i,a,s,l=t.getAxisMotionValue(e);if(l){var c=l.get();o[e]=(n={min:c,max:c},r=t.constraints[e],i=.5,a=Ym(n),(s=Ym(r))>a?i=$h(r.min,r.max-a,n.min):a>s&&(i=$h(n.min,n.max-s,r.min)),jh(0,1,i))}}));var s=this.visualElement.getProps().transformTemplate;this.visualElement.getInstance().style.transform=s?s({},""):"none",null===(e=a.root)||void 0===e||e.updateScroll(),a.updateLayout(),this.resolveConstraints(),og((function(e){if(Sg(e,r,null)){var n=t.getAxisMotionValue(e),i=t.constraints[e],a=i.min,s=i.max;n.set(Kh(a,s,o[e]))}}))}},e.prototype.addListeners=function(){var e,t=this;wg.set(this.visualElement,this);var n=wh(this.visualElement.getInstance(),"pointerdown",(function(e){var n=t.getProps(),r=n.drag,i=n.dragListener;r&&(void 0===i||i)&&t.start(e)})),r=function(){Uu(t.getProps().dragConstraints)&&(t.constraints=t.resolveRefConstraints())},i=this.visualElement.projection,a=i.addEventListener("measure",r);i&&!i.layout&&(null===(e=i.root)||void 0===e||e.updateScroll(),i.updateLayout()),r();var o=uh(window,"resize",(function(){return t.scalePositionWithinConstraints()})),s=i.addEventListener("didUpdate",(function(e){var n=e.delta,r=e.hasLayoutChanged;t.isDragging&&r&&(og((function(e){var r=t.getAxisMotionValue(e);r&&(t.originPoint[e]+=n[e].translate,r.set(r.get()+n[e].translate))})),t.visualElement.syncRender())}));return function(){o(),n(),a(),null==s||s()}},e.prototype.getProps=function(){var e=this.visualElement.getProps(),t=e.drag,n=void 0!==t&&t,r=e.dragDirectionLock,i=void 0!==r&&r,a=e.dragPropagation,o=void 0!==a&&a,s=e.dragConstraints,l=void 0!==s&&s,c=e.dragElastic,u=void 0===c?rg:c,d=e.dragMomentum,h=void 0===d||d;return qc(qc({},e),{drag:n,dragDirectionLock:i,dragPropagation:o,dragConstraints:l,dragElastic:u,dragMomentum:h})},e}();function Sg(e,t,n){return!(!0!==t&&t!==e||null!==n&&n!==e)}var Ag={pan:Hh((function(e){var n=e.onPan,r=e.onPanStart,i=e.onPanEnd,a=e.onPanSessionStart,o=e.visualElement,s=n||r||i||a,l=(0,t.useRef)(null),c=(0,t.useContext)(Bu).transformPagePoint,u={onSessionStart:a,onStart:r,onMove:n,onEnd:function(e,t){l.current=null,i&&i(e,t)}};(0,t.useEffect)((function(){null!==l.current&&l.current.updateHandlers(u)})),Mh(o,"pointerdown",s&&function(e){l.current=new Hm(e,u,{transformPagePoint:c})}),Eu((function(){return l.current&&l.current.end()}))})),drag:Hh((function(e){var n=e.dragControls,r=e.visualElement,i=bu((function(){return new Mg(r)}));(0,t.useEffect)((function(){return n&&n.subscribe(i)}),[i,n]),(0,t.useEffect)((function(){return i.addListeners()}),[i])}))},Eg=["LayoutMeasure","BeforeLayoutMeasure","LayoutUpdate","ViewportBoxUpdate","Update","Render","AnimationComplete","LayoutAnimationComplete","AnimationStart","LayoutAnimationStart","SetAxisTarget","Unmount"],Cg=function(e){var t=e.treeType,n=void 0===t?"":t,r=e.build,i=e.getBaseTarget,a=e.makeTargetAnimatable,o=e.measureViewportBox,s=e.render,l=e.readValueFromInstance,c=e.removeValueFromRenderState,u=e.sortNodePosition,d=e.scrapeMotionValuesFromProps;return function(e,t){var h=e.parent,f=e.props,p=e.presenceId,m=e.blockInitialAnimation,g=e.visualState,v=e.shouldReduceMotion;void 0===t&&(t={});var y,b,x=!1,_=g.latestValues,w=g.renderState,M=function(){var e=Eg.map((function(){return new vm})),t={},n={clearAllListeners:function(){return e.forEach((function(e){return e.clear()}))},updatePropListeners:function(e){Eg.forEach((function(r){var i,a="on"+r,o=e[a];null===(i=t[r])||void 0===i||i.call(t),o&&(t[r]=n[a](o))}))}};return e.forEach((function(e,t){n["on"+Eg[t]]=function(t){return e.add(t)},n["notify"+Eg[t]]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.notify.apply(e,Jc([],Zc(t),!1))}})),n}(),S=new Map,A=new Map,E={},C=qc({},_);function T(){y&&x&&(R(),s(y,w,f.style,N.projection))}function R(){r(N,w,_,t,f)}function P(){M.notifyUpdate(_)}function L(e,t){var n=t.onChange((function(t){_[e]=t,f.onUpdate&&pu.update(P,!1,!0)})),r=t.onRenderRequest(N.scheduleRender);A.set(e,(function(){n(),r()}))}var D=d(f);for(var I in D){var k=D[I];void 0!==_[I]&&dd(k)&&k.set(_[I],!1)}var B=Wu(f),F=Xu(f),N=qc(qc({treeType:n,current:null,depth:h?h.depth+1:0,parent:h,children:new Set,presenceId:p,shouldReduceMotion:v,variantChildren:F?new Set:void 0,isVisible:void 0,manuallyAnimateOnMount:Boolean(null==h?void 0:h.isMounted()),blockInitialAnimation:m,isMounted:function(){return Boolean(y)},mount:function(e){x=!0,y=N.current=e,N.projection&&N.projection.mount(e),F&&h&&!B&&(b=null==h?void 0:h.addVariantChild(N)),S.forEach((function(e,t){return L(t,e)})),null==h||h.children.add(N),N.setProps(f)},unmount:function(){var e;null===(e=N.projection)||void 0===e||e.unmount(),lu.update(P),lu.render(T),A.forEach((function(e){return e()})),null==b||b(),null==h||h.children.delete(N),M.clearAllListeners(),y=void 0,x=!1},addVariantChild:function(e){var t,n=N.getClosestVariantNode();if(n)return null===(t=n.variantChildren)||void 0===t||t.add(e),function(){return n.variantChildren.delete(e)}},sortNodePosition:function(e){return u&&n===e.treeType?u(N.getInstance(),e.getInstance()):0},getClosestVariantNode:function(){return F?N:null==h?void 0:h.getClosestVariantNode()},getLayoutId:function(){return f.layoutId},getInstance:function(){return y},getStaticValue:function(e){return _[e]},setStaticValue:function(e,t){return _[e]=t},getLatestValues:function(){return _},setVisibility:function(e){N.isVisible!==e&&(N.isVisible=e,N.scheduleRender())},makeTargetAnimatable:function(e,t){return void 0===t&&(t=!0),a(N,e,f,t)},measureViewportBox:function(){return o(y,f)},addValue:function(e,t){N.hasValue(e)&&N.removeValue(e),S.set(e,t),_[e]=t.get(),L(e,t)},removeValue:function(e){var t;S.delete(e),null===(t=A.get(e))||void 0===t||t(),A.delete(e),delete _[e],c(e,w)},hasValue:function(e){return S.has(e)},getValue:function(e,t){var n=S.get(e);return void 0===n&&void 0!==t&&(n=bm(t),N.addValue(e,n)),n},forEachValue:function(e){return S.forEach(e)},readValue:function(e){var n;return null!==(n=_[e])&&void 0!==n?n:l(y,e,t)},setBaseTarget:function(e,t){C[e]=t},getBaseTarget:function(e){if(i){var t=i(f,e);if(void 0!==t&&!dd(t))return t}return C[e]}},M),{build:function(){return R(),w},scheduleRender:function(){pu.render(T,!1,!0)},syncRender:T,setProps:function(e){(e.transformTemplate||f.transformTemplate)&&N.scheduleRender(),f=e,M.updatePropListeners(e),E=function(e,t,n){var r;for(var i in t){var a=t[i],o=n[i];if(dd(a))e.addValue(i,a);else if(dd(o))e.addValue(i,bm(a));else if(o!==a)if(e.hasValue(i)){var s=e.getValue(i);!s.hasAnimated&&s.set(a)}else e.addValue(i,bm(null!==(r=e.getStaticValue(i))&&void 0!==r?r:a))}for(var i in n)void 0===t[i]&&e.removeValue(i);return t}(N,d(f),E)},getProps:function(){return f},getVariant:function(e){var t;return null===(t=f.variants)||void 0===t?void 0:t[e]},getDefaultTransition:function(){return f.transition},getTransformPagePoint:function(){return f.transformPagePoint},getVariantContext:function(e){if(void 0===e&&(e=!1),e)return null==h?void 0:h.getVariantContext();if(!B){var t=(null==h?void 0:h.getVariantContext())||{};return void 0!==f.initial&&(t.initial=f.initial),t}for(var n={},r=0;r<Rg;r++){var i=Tg[r],a=f[i];(Gu(a)||!1===a)&&(n[i]=a)}return n}});return N}},Tg=Jc(["initial"],Zc(Lm),!1),Rg=Tg.length;function Pg(e){return"string"==typeof e&&e.startsWith("var(--")}var Lg=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function Dg(e,t,n){void 0===n&&(n=1),'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.');var r=Zc(function(e){var t=Lg.exec(e);if(!t)return[,];var n=Zc(t,3);return[n[1],n[2]]}(e),2),i=r[0],a=r[1];if(i){var o=window.getComputedStyle(t).getPropertyValue(i);return o?o.trim():Pg(a)?Dg(a,t,n+1):a}}var Ig,kg=new Set(["width","height","top","left","right","bottom","x","y"]),Bg=function(e){return kg.has(e)},Fg=function(e,t){e.set(t,!1),e.set(t)},Ng=function(e){return e===Td||e===Sd};!function(e){e.width="width",e.height="height",e.left="left",e.right="right",e.top="top",e.bottom="bottom"}(Ig||(Ig={}));var Og=function(e,t){return parseFloat(e.split(", ")[t])},zg=function(e,t){return function(n,r){var i=r.transform;if("none"===i||!i)return 0;var a=i.match(/^matrix3d\((.+)\)$/);if(a)return Og(a[1],t);var o=i.match(/^matrix\((.+)\)$/);return o?Og(o[1],e):0}},Ug=new Set(["x","y","z"]),Hg=id.filter((function(e){return!Ug.has(e)})),Gg={width:function(e,t){var n=e.x,r=t.paddingLeft,i=void 0===r?"0":r,a=t.paddingRight,o=void 0===a?"0":a;return n.max-n.min-parseFloat(i)-parseFloat(o)},height:function(e,t){var n=e.y,r=t.paddingTop,i=void 0===r?"0":r,a=t.paddingBottom,o=void 0===a?"0":a;return n.max-n.min-parseFloat(i)-parseFloat(o)},top:function(e,t){var n=t.top;return parseFloat(n)},left:function(e,t){var n=t.left;return parseFloat(n)},bottom:function(e,t){var n=e.y,r=t.top;return parseFloat(r)+(n.max-n.min)},right:function(e,t){var n=e.x,r=t.left;return parseFloat(r)+(n.max-n.min)},x:zg(4,13),y:zg(5,14)};function Vg(e,t,n,r){return function(e){return Object.keys(e).some(Bg)}(t)?function(e,t,n,r){void 0===n&&(n={}),void 0===r&&(r={}),t=qc({},t),r=qc({},r);var i=Object.keys(t).filter(Bg),a=[],o=!1,s=[];if(i.forEach((function(i){var l=e.getValue(i);if(e.hasValue(i)){var c,u=n[i],d=wm(u),h=t[i];if(th(h)){var f=h.length,p=null===h[0]?1:0;u=h[p],d=wm(u);for(var m=p;m<f;m++)c?wm(h[m]):(c=wm(h[m]))===d||Ng(d)&&Ng(c)}else c=wm(h);if(d!==c)if(Ng(d)&&Ng(c)){var g=l.get();"string"==typeof g&&l.set(parseFloat(g)),"string"==typeof h?t[i]=parseFloat(h):Array.isArray(h)&&c===Sd&&(t[i]=h.map(parseFloat))}else(null==d?void 0:d.transform)&&(null==c?void 0:c.transform)&&(0===u||0===h)?0===u?l.set(c.transform(u)):t[i]=d.transform(h):(o||(a=function(e){var t=[];return Hg.forEach((function(n){var r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),t.length&&e.syncRender(),t}(e),o=!0),s.push(i),r[i]=void 0!==r[i]?r[i]:t[i],Fg(l,h))}})),s.length){var l=s.indexOf("height")>=0?window.pageYOffset:null,c=function(e,t,n){var r=t.measureViewportBox(),i=t.getInstance(),a=getComputedStyle(i),o=a.display,s={};"none"===o&&t.setStaticValue("display",e.display||"block"),n.forEach((function(e){s[e]=Gg[e](r,a)})),t.syncRender();var l=t.measureViewportBox();return n.forEach((function(n){var r=t.getValue(n);Fg(r,s[n]),e[n]=Gg[n](l,a)})),e}(t,e,s);return a.length&&a.forEach((function(t){var n=Zc(t,2),r=n[0],i=n[1];e.getValue(r).set(i)})),e.syncRender(),null!==l&&window.scrollTo({top:l}),{target:c,transitionEnd:r}}return{target:t,transitionEnd:r}}(e,t,n,r):{target:t,transitionEnd:r}}var jg={treeType:"dom",readValueFromInstance:function(e,t){if(sd(t)){var n=lm(t);return n&&n.default||0}var r,i=(r=e,window.getComputedStyle(r));return(fd(t)?i.getPropertyValue(t):i[t])||0},sortNodePosition:function(e,t){return 2&e.compareDocumentPosition(t)?1:-1},getBaseTarget:function(e,t){var n;return null===(n=e.style)||void 0===n?void 0:n[t]},measureViewportBox:function(e,t){return _g(e,t.transformPagePoint)},resetTransform:function(e,t,n){var r=n.transformTemplate;t.style.transform=r?r({},""):"none",e.scheduleRender()},restoreTransform:function(e,t){e.style.transform=t.style.transform},removeValueFromRenderState:function(e,t){var n=t.vars,r=t.style;delete n[e],delete r[e]},makeTargetAnimatable:function(e,t,n,r){var i=t.transition,a=t.transitionEnd,o=Yc(t,["transition","transitionEnd"]),s=n.transformValues;void 0===r&&(r=!0);var l=function(e,t,n){var r,i,a={};for(var o in e)a[o]=null!==(r=Em(o,t))&&void 0!==r?r:null===(i=n.getValue(o))||void 0===i?void 0:i.get();return a}(o,i||{},e);if(s&&(a&&(a=s(a)),o&&(o=s(o)),l&&(l=s(l))),r){!function(e,t,n){var r,i,a,o,s=Object.keys(t).filter((function(t){return!e.hasValue(t)})),l=s.length;if(l)for(var c=0;c<l;c++){var u=s[c],d=t[u],h=null;Array.isArray(d)&&(h=d[0]),null===h&&(h=null!==(i=null!==(r=n[u])&&void 0!==r?r:e.readValue(u))&&void 0!==i?i:t[u]),null!=h&&("string"==typeof h&&(/^\-?\d*\.?\d+$/.test(h)||/^0[^.\s]+$/.test(h))?h=parseFloat(h):!Sm(h)&&Jp.test(d)&&(h=cm(u,d)),e.addValue(u,bm(h)),null!==(a=(o=n)[u])&&void 0!==a||(o[u]=h),e.setBaseTarget(u,h))}}(e,o,l);var c=function(e,t,n,r){var i=function(e,t,n){var r,i=Yc(t,[]),a=e.getInstance();if(!(a instanceof Element))return{target:i,transitionEnd:n};for(var o in n&&(n=qc({},n)),e.forEachValue((function(e){var t=e.get();if(Pg(t)){var n=Dg(t,a);n&&e.set(n)}})),i){var s=i[o];if(Pg(s)){var l=Dg(s,a);l&&(i[o]=l,n&&(null!==(r=n[o])&&void 0!==r||(n[o]=s)))}}return{target:i,transitionEnd:n}}(e,t,r);return Vg(e,t=i.target,n,r=i.transitionEnd)}(e,o,l,a);a=c.transitionEnd,o=c.target}return qc({transition:i,transitionEnd:a},o)},scrapeMotionValuesFromProps:Kd,build:function(e,t,n,r,i){void 0!==e.isVisible&&(t.style.visibility=e.isVisible?"visible":"hidden"),Id(t,n,r,i.transformTemplate)},render:Zd},Wg=Cg(jg),Xg=Cg(qc(qc({},jg),{getBaseTarget:function(e,t){return e[t]},readValueFromInstance:function(e,t){var n;return sd(t)?(null===(n=lm(t))||void 0===n?void 0:n.default)||0:(t=Jd.has(t)?t:Yd(t),e.getAttribute(t))},scrapeMotionValuesFromProps:Qd,build:function(e,t,n,r,i){Vd(t,n,r,i.transformTemplate)},render:$d})),qg=function(e,t){return td(e)?Xg(t,{enableHardwareAcceleration:!1}):Wg(t,{enableHardwareAcceleration:!0})};function Yg(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}var Zg={correct:function(e,t){if(!t.target)return e;if("string"==typeof e){if(!Sd.test(e))return e;e=parseFloat(e)}var n=Yg(e,t.target.x),r=Yg(e,t.target.y);return"".concat(n,"% ").concat(r,"%")}},Jg="_$css",$g={correct:function(e,t){var n=t.treeScale,r=t.projectionDelta,i=e,a=e.includes("var("),o=[];a&&(e=e.replace(Lg,(function(e){return o.push(e),Jg})));var s=Jp.parse(e);if(s.length>5)return i;var l=Jp.createTransformer(e),c="number"!=typeof s[0]?1:0,u=r.x.scale*n.x,d=r.y.scale*n.y;s[0+c]/=u,s[1+c]/=d;var h=Kh(u,d,.5);"number"==typeof s[2+c]&&(s[2+c]/=h),"number"==typeof s[3+c]&&(s[3+c]/=h);var f=l(s);if(a){var p=0;f=f.replace(Jg,(function(){var e=o[p];return p++,e}))}return f}},Kg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xc(t,e),t.prototype.componentDidMount=function(){var e,t=this,n=this.props,r=n.visualElement,i=n.layoutGroup,a=n.switchLayoutGroup,o=n.layoutId,s=r.projection;e=Qg,Object.assign(nd,e),s&&((null==i?void 0:i.group)&&i.group.add(s),(null==a?void 0:a.register)&&o&&a.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",(function(){t.safeToRemove()})),s.setOptions(qc(qc({},s.options),{onExitComplete:function(){return t.safeToRemove()}}))),Yu.hasEverUpdated=!0},t.prototype.getSnapshotBeforeUpdate=function(e){var t=this,n=this.props,r=n.layoutDependency,i=n.visualElement,a=n.drag,o=n.isPresent,s=i.projection;return s?(s.isPresent=o,a||e.layoutDependency!==r||void 0===r?s.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?s.promote():s.relegate()||pu.postRender((function(){var e;(null===(e=s.getStack())||void 0===e?void 0:e.members.length)||t.safeToRemove()}))),null):null},t.prototype.componentDidUpdate=function(){var e=this.props.visualElement.projection;e&&(e.root.didUpdate(),!e.currentAnimation&&e.isLead()&&this.safeToRemove())},t.prototype.componentWillUnmount=function(){var e=this.props,t=e.visualElement,n=e.layoutGroup,r=e.switchLayoutGroup,i=t.projection;i&&(i.scheduleCheckAfterUnmount(),(null==n?void 0:n.group)&&n.group.remove(i),(null==r?void 0:r.deregister)&&r.deregister(i))},t.prototype.safeToRemove=function(){var e=this.props.safeToRemove;null==e||e()},t.prototype.render=function(){return null},t}(t.Component),Qg={borderRadius:qc(qc({},Zg),{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:Zg,borderTopRightRadius:Zg,borderBottomLeftRadius:Zg,borderBottomRightRadius:Zg,boxShadow:$g},ev={measureLayout:function(e){var n=Zc(Ru(),2),r=n[0],i=n[1],a=(0,t.useContext)(Au);return t.createElement(Kg,qc({},e,{layoutGroup:a,switchLayoutGroup:(0,t.useContext)(Ju),isPresent:r,safeToRemove:i}))}},tv=["TopLeft","TopRight","BottomLeft","BottomRight"],nv=tv.length,rv=function(e){return"string"==typeof e?parseFloat(e):e},iv=function(e){return"number"==typeof e||Sd.test(e)};function av(e,t){var n;return null!==(n=e[t])&&void 0!==n?n:e.borderRadius}var ov=lv(0,.5,Jf),sv=lv(.5,.95,Wf);function lv(e,t,n){return function(r){return r<e?0:r>t?1:n($h(e,t,r))}}function cv(e,t){e.min=t.min,e.max=t.max}function uv(e,t){cv(e.x,t.x),cv(e.y,t.y)}function dv(e,t,n,r,i){return e=hg(e-=t,1/n,r),void 0!==i&&(e=hg(e,1/i,r)),e}function hv(e,t,n,r,i){var a=Zc(n,3),o=a[0],s=a[1],l=a[2];!function(e,t,n,r,i,a,o){if(void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r=.5),void 0===a&&(a=e),void 0===o&&(o=e),Md.test(t)&&(t=parseFloat(t),t=Kh(o.min,o.max,t/100)-o.min),"number"==typeof t){var s=Kh(a.min,a.max,r);e===a&&(s-=t),e.min=dv(e.min,t,n,s,i),e.max=dv(e.max,t,n,s,i)}}(e,t[o],t[s],t[l],t.scale,r,i)}var fv=["x","scaleX","originX"],pv=["y","scaleY","originY"];function mv(e,t,n,r){hv(e.x,t,fv,null==n?void 0:n.x,null==r?void 0:r.x),hv(e.y,t,pv,null==n?void 0:n.y,null==r?void 0:r.y)}function gv(e){return 0===e.translate&&1===e.scale}function vv(e){return gv(e.x)&&gv(e.y)}function yv(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}var bv=function(){function e(){this.members=[]}return e.prototype.add=function(e){mm(this.members,e),e.scheduleRender()},e.prototype.remove=function(e){if(gm(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){var t=this.members[this.members.length-1];t&&this.promote(t)}},e.prototype.relegate=function(e){var t,n=this.members.findIndex((function(t){return e===t}));if(0===n)return!1;for(var r=n;r>=0;r--){var i=this.members[r];if(!1!==i.isPresent){t=i;break}}return!!t&&(this.promote(t),!0)},e.prototype.promote=function(e,t){var n,r=this.lead;e!==r&&(this.prevLead=r,this.lead=e,e.show(),r&&(r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues,e.snapshot.isShared=!0),(null===(n=e.root)||void 0===n?void 0:n.isUpdating)&&(e.isLayoutDirty=!0),!1===e.options.crossfade&&r.hide()))},e.prototype.exitAnimationComplete=function(){this.members.forEach((function(e){var t,n,r,i,a;null===(n=(t=e.options).onExitComplete)||void 0===n||n.call(t),null===(a=null===(r=e.resumingFrom)||void 0===r?void 0:(i=r.options).onExitComplete)||void 0===a||a.call(i)}))},e.prototype.scheduleRender=function(){this.members.forEach((function(e){e.instance&&e.scheduleRender(!1)}))},e.prototype.removeLeadSnapshot=function(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)},e}();function xv(e,t,n){var r=e.x.translate/t.x,i=e.y.translate/t.y,a="translate3d(".concat(r,"px, ").concat(i,"px, 0) ");if(a+="scale(".concat(1/t.x,", ").concat(1/t.y,") "),n){var o=n.rotate,s=n.rotateX,l=n.rotateY;o&&(a+="rotate(".concat(o,"deg) ")),s&&(a+="rotateX(".concat(s,"deg) ")),l&&(a+="rotateY(".concat(l,"deg) "))}var c=e.x.scale*t.x,u=e.y.scale*t.y;return"translate3d(0px, 0px, 0) scale(1, 1) scale(1, 1)"===(a+="scale(".concat(c,", ").concat(u,")"))?"none":a}var _v=function(e,t){return e.depth-t.depth},wv=function(){function e(){this.children=[],this.isDirty=!1}return e.prototype.add=function(e){mm(this.children,e),this.isDirty=!0},e.prototype.remove=function(e){gm(this.children,e),this.isDirty=!0},e.prototype.forEach=function(e){this.isDirty&&this.children.sort(_v),this.isDirty=!1,this.children.forEach(e)},e}();function Mv(e){var t=e.attachResizeListener,n=e.defaultParent,r=e.measureScroll,i=e.checkIsScrollRoot,a=e.resetTransform;return function(){function e(e,t,r){void 0===t&&(t={}),void 0===r&&(r=null==n?void 0:n());var i=this;this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.potentialNodes=new Map,this.checkUpdateFailed=function(){i.isUpdating&&(i.isUpdating=!1,i.clearAllSnapshots())},this.updateProjection=function(){i.nodes.forEach(Pv),i.nodes.forEach(Lv)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.id=e,this.latestValues=t,this.root=r?r.root||r:this,this.path=r?Jc(Jc([],Zc(r.path),!1),[r],!1):[],this.parent=r,this.depth=r?r.depth+1:0,e&&this.root.registerPotentialNode(e,this);for(var a=0;a<this.path.length;a++)this.path[a].shouldResetTransform=!0;this.root===this&&(this.nodes=new wv)}return e.prototype.addEventListener=function(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new vm),this.eventHandlers.get(e).add(t)},e.prototype.notifyListeners=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=this.eventHandlers.get(e);null==r||r.notify.apply(r,Jc([],Zc(t),!1))},e.prototype.hasListeners=function(e){return this.eventHandlers.has(e)},e.prototype.registerPotentialNode=function(e,t){this.potentialNodes.set(e,t)},e.prototype.mount=function(e,n){var r,i=this;if(void 0===n&&(n=!1),!this.instance){this.isSVG=e instanceof SVGElement&&"svg"!==e.tagName,this.instance=e;var a=this.options,o=a.layoutId,s=a.layout,l=a.visualElement;if(l&&!l.getInstance()&&l.mount(e),this.root.nodes.add(this),null===(r=this.parent)||void 0===r||r.children.add(this),this.id&&this.root.potentialNodes.delete(this.id),n&&(s||o)&&(this.isLayoutDirty=!0),t){var c,u=function(){return i.root.updateBlockedByResize=!1};t(e,(function(){i.root.updateBlockedByResize=!0,clearTimeout(c),c=window.setTimeout(u,250),Yu.hasAnimatedSinceResize&&(Yu.hasAnimatedSinceResize=!1,i.nodes.forEach(Rv))}))}o&&this.root.registerSharedNode(o,this),!1!==this.options.animate&&l&&(o||s)&&this.addEventListener("didUpdate",(function(e){var t,n,r,a,o,s=e.delta,c=e.hasLayoutChanged,u=e.hasRelativeTargetChanged,d=e.layout;if(i.isTreeAnimationBlocked())return i.target=void 0,void(i.relativeTarget=void 0);var h=null!==(n=null!==(t=i.options.transition)&&void 0!==t?t:l.getDefaultTransition())&&void 0!==n?n:Nv,f=l.getProps(),p=f.onLayoutAnimationStart,m=f.onLayoutAnimationComplete,g=!i.targetLayout||!yv(i.targetLayout,d)||u,v=!c&&u;if((null===(r=i.resumeFrom)||void 0===r?void 0:r.instance)||v||c&&(g||!i.currentAnimation)){i.resumeFrom&&(i.resumingFrom=i.resumeFrom,i.resumingFrom.resumingFrom=void 0),i.setAnimationOrigin(s,v);var y=qc(qc({},fm(h,"layout")),{onPlay:p,onComplete:m});l.shouldReduceMotion&&(y.delay=0,y.type=!1),i.startAnimation(y)}else c||0!==i.animationProgress||i.finishAnimation(),i.isLead()&&(null===(o=(a=i.options).onExitComplete)||void 0===o||o.call(a));i.targetLayout=d}))}},e.prototype.unmount=function(){var e,t;this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this),null===(e=this.getStack())||void 0===e||e.remove(this),null===(t=this.parent)||void 0===t||t.children.delete(this),this.instance=void 0,lu.preRender(this.updateProjection)},e.prototype.blockUpdate=function(){this.updateManuallyBlocked=!0},e.prototype.unblockUpdate=function(){this.updateManuallyBlocked=!1},e.prototype.isUpdateBlocked=function(){return this.updateManuallyBlocked||this.updateBlockedByResize},e.prototype.isTreeAnimationBlocked=function(){var e;return this.isAnimationBlocked||(null===(e=this.parent)||void 0===e?void 0:e.isTreeAnimationBlocked())||!1},e.prototype.startUpdate=function(){var e;this.isUpdateBlocked()||(this.isUpdating=!0,null===(e=this.nodes)||void 0===e||e.forEach(Dv))},e.prototype.willUpdate=function(e){var t,n,r;if(void 0===e&&(e=!0),this.root.isUpdateBlocked())null===(n=(t=this.options).onExitComplete)||void 0===n||n.call(t);else if(!this.root.isUpdating&&this.root.startUpdate(),!this.isLayoutDirty){this.isLayoutDirty=!0;for(var i=0;i<this.path.length;i++){var a=this.path[i];a.shouldResetTransform=!0,a.updateScroll()}var o=this.options,s=o.layoutId,l=o.layout;if(void 0!==s||l){var c=null===(r=this.options.visualElement)||void 0===r?void 0:r.getProps().transformTemplate;this.prevTransformTemplateValue=null==c?void 0:c(this.latestValues,""),this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}}},e.prototype.didUpdate=function(){if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(Cv);this.isUpdating&&(this.isUpdating=!1,this.potentialNodes.size&&(this.potentialNodes.forEach(Ov),this.potentialNodes.clear()),this.nodes.forEach(Tv),this.nodes.forEach(Sv),this.nodes.forEach(Av),this.clearAllSnapshots(),cu.update(),cu.preRender(),cu.render())},e.prototype.clearAllSnapshots=function(){this.nodes.forEach(Ev),this.sharedNodes.forEach(Iv)},e.prototype.scheduleUpdateProjection=function(){pu.preRender(this.updateProjection,!1,!0)},e.prototype.scheduleCheckAfterUnmount=function(){var e=this;pu.postRender((function(){e.isLayoutDirty?e.root.didUpdate():e.root.checkUpdateFailed()}))},e.prototype.updateSnapshot=function(){if(!this.snapshot&&this.instance){var e=this.measure(),t=this.removeTransform(this.removeElementScroll(e));Uv(t),this.snapshot={measured:e,layout:t,latestValues:{}}}},e.prototype.updateLayout=function(){var e;if(this.instance&&(this.updateScroll(),this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty)){if(this.resumeFrom&&!this.resumeFrom.instance)for(var t=0;t<this.path.length;t++)this.path[t].updateScroll();var n=this.measure();Uv(n);var r=this.layout;this.layout={measured:n,actual:this.removeElementScroll(n)},this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.actual),null===(e=this.options.visualElement)||void 0===e||e.notifyLayoutMeasure(this.layout.actual,null==r?void 0:r.actual)}},e.prototype.updateScroll=function(){this.options.layoutScroll&&this.instance&&(this.isScrollRoot=i(this.instance),this.scroll=r(this.instance))},e.prototype.resetTransform=function(){var e;if(a){var t=this.isLayoutDirty||this.shouldResetTransform,n=this.projectionDelta&&!vv(this.projectionDelta),r=null===(e=this.options.visualElement)||void 0===e?void 0:e.getProps().transformTemplate,i=null==r?void 0:r(this.latestValues,""),o=i!==this.prevTransformTemplateValue;t&&(n||ug(this.latestValues)||o)&&(a(this.instance,i),this.shouldResetTransform=!1,this.scheduleRender())}},e.prototype.measure=function(){var e=this.options.visualElement;if(!e)return{x:{min:0,max:0},y:{min:0,max:0}};var t=e.measureViewportBox(),n=this.root.scroll;return n&&(gg(t.x,n.x),gg(t.y,n.y)),t},e.prototype.removeElementScroll=function(e){var t={x:{min:0,max:0},y:{min:0,max:0}};uv(t,e);for(var n=0;n<this.path.length;n++){var r=this.path[n],i=r.scroll,a=r.options,o=r.isScrollRoot;if(r!==this.root&&i&&a.layoutScroll){if(o){uv(t,e);var s=this.root.scroll;s&&(gg(t.x,-s.x),gg(t.y,-s.y))}gg(t.x,i.x),gg(t.y,i.y)}}return t},e.prototype.applyTransform=function(e,t){void 0===t&&(t=!1);var n={x:{min:0,max:0},y:{min:0,max:0}};uv(n,e);for(var r=0;r<this.path.length;r++){var i=this.path[r];!t&&i.options.layoutScroll&&i.scroll&&i!==i.root&&xg(n,{x:-i.scroll.x,y:-i.scroll.y}),ug(i.latestValues)&&xg(n,i.latestValues)}return ug(this.latestValues)&&xg(n,this.latestValues),n},e.prototype.removeTransform=function(e){var t,n={x:{min:0,max:0},y:{min:0,max:0}};uv(n,e);for(var r=0;r<this.path.length;r++){var i=this.path[r];if(i.instance&&ug(i.latestValues)){cg(i.latestValues)&&i.updateSnapshot();var a={x:{min:0,max:0},y:{min:0,max:0}};uv(a,i.measure()),mv(n,i.latestValues,null===(t=i.snapshot)||void 0===t?void 0:t.layout,a)}}return ug(this.latestValues)&&mv(n,this.latestValues),n},e.prototype.setTargetDelta=function(e){this.targetDelta=e,this.root.scheduleUpdateProjection()},e.prototype.setOptions=function(e){var t;this.options=qc(qc(qc({},this.options),e),{crossfade:null===(t=e.crossfade)||void 0===t||t})},e.prototype.clearMeasurements=function(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1},e.prototype.resolveTargetDelta=function(){var e,t,n,r,i=this.options,a=i.layout,o=i.layoutId;this.layout&&(a||o)&&(this.targetDelta||this.relativeTarget||(this.relativeParent=this.getClosestProjectingParent(),this.relativeParent&&this.relativeParent.layout&&(this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},eg(this.relativeTargetOrigin,this.layout.actual,this.relativeParent.layout.actual),uv(this.relativeTarget,this.relativeTargetOrigin))),(this.relativeTarget||this.targetDelta)&&(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&(null===(e=this.relativeParent)||void 0===e?void 0:e.target)?(t=this.target,n=this.relativeTarget,r=this.relativeParent.target,Km(t.x,n.x,r.x),Km(t.y,n.y,r.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.actual):uv(this.target,this.layout.actual),mg(this.target,this.targetDelta)):uv(this.target,this.layout.actual),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,this.relativeParent=this.getClosestProjectingParent(),this.relativeParent&&Boolean(this.relativeParent.resumingFrom)===Boolean(this.resumingFrom)&&!this.relativeParent.options.layoutScroll&&this.relativeParent.target&&(this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},eg(this.relativeTargetOrigin,this.target,this.relativeParent.target),uv(this.relativeTarget,this.relativeTargetOrigin)))))},e.prototype.getClosestProjectingParent=function(){if(this.parent&&!ug(this.parent.latestValues))return(this.parent.relativeTarget||this.parent.targetDelta)&&this.parent.layout?this.parent:this.parent.getClosestProjectingParent()},e.prototype.calcProjection=function(){var e,t=this.options,n=t.layout,r=t.layoutId;if(this.isTreeAnimating=Boolean((null===(e=this.parent)||void 0===e?void 0:e.isTreeAnimating)||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),this.layout&&(n||r)){var i=this.getLead();uv(this.layoutCorrected,this.layout.actual),function(e,t,n,r){var i,a;void 0===r&&(r=!1);var o=n.length;if(o){var s,l;t.x=t.y=1;for(var c=0;c<o;c++)l=(s=n[c]).projectionDelta,"contents"!==(null===(a=null===(i=s.instance)||void 0===i?void 0:i.style)||void 0===a?void 0:a.display)&&(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&xg(e,{x:-s.scroll.x,y:-s.scroll.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,mg(e,l)),r&&ug(s.latestValues)&&xg(e,s.latestValues))}}(this.layoutCorrected,this.treeScale,this.path,Boolean(this.resumingFrom)||this!==i);var a=i.target;if(a){this.projectionDelta||(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}});var o=this.treeScale.x,s=this.treeScale.y,l=this.projectionTransform;$m(this.projectionDelta,this.layoutCorrected,a,this.latestValues),this.projectionTransform=xv(this.projectionDelta,this.treeScale),this.projectionTransform===l&&this.treeScale.x===o&&this.treeScale.y===s||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",a))}}},e.prototype.hide=function(){this.isVisible=!1},e.prototype.show=function(){this.isVisible=!0},e.prototype.scheduleRender=function(e){var t,n,r;void 0===e&&(e=!0),null===(n=(t=this.options).scheduleRender)||void 0===n||n.call(t),e&&(null===(r=this.getStack())||void 0===r||r.scheduleRender()),this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)},e.prototype.setAnimationOrigin=function(e,t){var n,r=this;void 0===t&&(t=!1);var i=this.snapshot,a=(null==i?void 0:i.latestValues)||{},o=qc({},this.latestValues),s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeTarget=this.relativeTargetOrigin=void 0,this.attemptToResolveRelativeTarget=!t;var l={x:{min:0,max:0},y:{min:0,max:0}},c=null==i?void 0:i.isShared,u=((null===(n=this.getStack())||void 0===n?void 0:n.members.length)||0)<=1,d=Boolean(c&&!u&&!0===this.options.crossfade&&!this.path.some(Fv));this.animationProgress=0,this.mixTargetDelta=function(t){var n,i,h,f,p,m=t/1e3;kv(s.x,e.x,m),kv(s.y,e.y,m),r.setTargetDelta(s),r.relativeTarget&&r.relativeTargetOrigin&&r.layout&&(null===(n=r.relativeParent)||void 0===n?void 0:n.layout)&&(eg(l,r.layout.actual,r.relativeParent.layout.actual),i=r.relativeTarget,h=r.relativeTargetOrigin,f=l,p=m,Bv(i.x,h.x,f.x,p),Bv(i.y,h.y,f.y,p)),c&&(r.animationValues=o,function(e,t,n,r,i,a){var o,s,l,c;i?(e.opacity=Kh(0,null!==(o=n.opacity)&&void 0!==o?o:1,ov(r)),e.opacityExit=Kh(null!==(s=t.opacity)&&void 0!==s?s:1,0,sv(r))):a&&(e.opacity=Kh(null!==(l=t.opacity)&&void 0!==l?l:1,null!==(c=n.opacity)&&void 0!==c?c:1,r));for(var u=0;u<nv;u++){var d="border".concat(tv[u],"Radius"),h=av(t,d),f=av(n,d);void 0===h&&void 0===f||(h||(h=0),f||(f=0),0===h||0===f||iv(h)===iv(f)?(e[d]=Math.max(Kh(rv(h),rv(f),r),0),(Md.test(f)||Md.test(h))&&(e[d]+="%")):e[d]=f)}(t.rotate||n.rotate)&&(e.rotate=Kh(t.rotate||0,n.rotate||0,r))}(o,a,r.latestValues,m,d,u)),r.root.scheduleUpdateProjection(),r.scheduleRender(),r.animationProgress=m},this.mixTargetDelta(0)},e.prototype.startAnimation=function(e){var t,n,r=this;this.notifyListeners("animationStart"),null===(t=this.currentAnimation)||void 0===t||t.stop(),this.resumingFrom&&(null===(n=this.resumingFrom.currentAnimation)||void 0===n||n.stop()),this.pendingAnimation&&(lu.update(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=pu.update((function(){Yu.hasAnimatedSinceResize=!0,r.currentAnimation=function(e,t,n){void 0===n&&(n={});var r=dd(0)?0:bm(0);return pm("",r,1e3,n),{stop:function(){return r.stop()},isAnimating:function(){return r.isAnimating()}}}(0,0,qc(qc({},e),{onUpdate:function(t){var n;r.mixTargetDelta(t),null===(n=e.onUpdate)||void 0===n||n.call(e,t)},onComplete:function(){var t;null===(t=e.onComplete)||void 0===t||t.call(e),r.completeAnimation()}})),r.resumingFrom&&(r.resumingFrom.currentAnimation=r.currentAnimation),r.pendingAnimation=void 0}))},e.prototype.completeAnimation=function(){var e;this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0),null===(e=this.getStack())||void 0===e||e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")},e.prototype.finishAnimation=function(){var e;this.currentAnimation&&(null===(e=this.mixTargetDelta)||void 0===e||e.call(this,1e3),this.currentAnimation.stop()),this.completeAnimation()},e.prototype.applyTransformsToTarget=function(){var e=this.getLead(),t=e.targetWithTransforms,n=e.target,r=e.layout,i=e.latestValues;t&&n&&r&&(uv(t,n),xg(t,i),$m(this.projectionDeltaWithTransform,this.layoutCorrected,t,i))},e.prototype.registerSharedNode=function(e,t){var n,r,i;this.sharedNodes.has(e)||this.sharedNodes.set(e,new bv),this.sharedNodes.get(e).add(t),t.promote({transition:null===(n=t.options.initialPromotionConfig)||void 0===n?void 0:n.transition,preserveFollowOpacity:null===(i=null===(r=t.options.initialPromotionConfig)||void 0===r?void 0:r.shouldPreserveFollowOpacity)||void 0===i?void 0:i.call(r,t)})},e.prototype.isLead=function(){var e=this.getStack();return!e||e.lead===this},e.prototype.getLead=function(){var e;return this.options.layoutId&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this},e.prototype.getPrevLead=function(){var e;return this.options.layoutId?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0},e.prototype.getStack=function(){var e=this.options.layoutId;if(e)return this.root.sharedNodes.get(e)},e.prototype.promote=function(e){var t=void 0===e?{}:e,n=t.needsReset,r=t.transition,i=t.preserveFollowOpacity,a=this.getStack();a&&a.promote(this,i),n&&(this.projectionDelta=void 0,this.needsReset=!0),r&&this.setOptions({transition:r})},e.prototype.relegate=function(){var e=this.getStack();return!!e&&e.relegate(this)},e.prototype.resetRotation=function(){var e=this.options.visualElement;if(e){for(var t=!1,n={},r=0;r<rd.length;r++){var i="rotate"+rd[r];e.getStaticValue(i)&&(t=!0,n[i]=e.getStaticValue(i),e.setStaticValue(i,0))}if(t){for(var i in null==e||e.syncRender(),n)e.setStaticValue(i,n[i]);e.scheduleRender()}}},e.prototype.getProjectionStyles=function(e){var t,n,r,i,a,o;void 0===e&&(e={});var s={};if(!this.instance||this.isSVG)return s;if(!this.isVisible)return{visibility:"hidden"};s.visibility="";var l=null===(t=this.options.visualElement)||void 0===t?void 0:t.getProps().transformTemplate;if(this.needsReset)return this.needsReset=!1,s.opacity="",s.pointerEvents=rh(e.pointerEvents)||"",s.transform=l?l(this.latestValues,""):"none",s;var c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){var u={};return this.options.layoutId&&(u.opacity=null!==(n=this.latestValues.opacity)&&void 0!==n?n:1,u.pointerEvents=rh(e.pointerEvents)||""),this.hasProjected&&!ug(this.latestValues)&&(u.transform=l?l({},""):"none",this.hasProjected=!1),u}var d=c.animationValues||c.latestValues;this.applyTransformsToTarget(),s.transform=xv(this.projectionDeltaWithTransform,this.treeScale,d),l&&(s.transform=l(d,s.transform));var h=this.projectionDelta,f=h.x,p=h.y;for(var m in s.transformOrigin="".concat(100*f.origin,"% ").concat(100*p.origin,"% 0"),c.animationValues?s.opacity=c===this?null!==(i=null!==(r=d.opacity)&&void 0!==r?r:this.latestValues.opacity)&&void 0!==i?i:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:s.opacity=c===this?null!==(a=d.opacity)&&void 0!==a?a:"":null!==(o=d.opacityExit)&&void 0!==o?o:0,nd)if(void 0!==d[m]){var g=nd[m],v=g.correct,y=g.applyTo,b=v(d[m],c);if(y)for(var x=y.length,_=0;_<x;_++)s[y[_]]=b;else s[m]=b}return this.options.layoutId&&(s.pointerEvents=c===this?rh(e.pointerEvents)||"":"none"),s},e.prototype.clearSnapshot=function(){this.resumeFrom=this.snapshot=void 0},e.prototype.resetTree=function(){this.root.nodes.forEach((function(e){var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(Cv),this.root.sharedNodes.clear()},e}()}function Sv(e){e.updateLayout()}function Av(e){var t,n,r,i,a=null!==(n=null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)&&void 0!==n?n:e.snapshot;if(e.isLead()&&e.layout&&a&&e.hasListeners("didUpdate")){var o=e.layout,s=o.actual,l=o.measured;"size"===e.options.animationType?og((function(e){var t=a.isShared?a.measured[e]:a.layout[e],n=Ym(t);t.min=s[e].min,t.max=t.min+n})):"position"===e.options.animationType&&og((function(e){var t=a.isShared?a.measured[e]:a.layout[e],n=Ym(s[e]);t.max=t.min+n}));var c={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};$m(c,s,a.layout);var u={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};a.isShared?$m(u,e.applyTransform(l,!0),a.measured):$m(u,s,a.layout);var d=!vv(c),h=!1;if(!e.resumeFrom&&(e.relativeParent=e.getClosestProjectingParent(),e.relativeParent&&!e.relativeParent.resumeFrom)){var f=e.relativeParent,p=f.snapshot,m=f.layout;if(p&&m){var g={x:{min:0,max:0},y:{min:0,max:0}};eg(g,a.layout,p.layout);var v={x:{min:0,max:0},y:{min:0,max:0}};eg(v,s,m.actual),yv(g,v)||(h=!0)}}e.notifyListeners("didUpdate",{layout:s,snapshot:a,delta:u,layoutDelta:c,hasLayoutChanged:d,hasRelativeTargetChanged:h})}else e.isLead()&&(null===(i=(r=e.options).onExitComplete)||void 0===i||i.call(r));e.options.transition=void 0}function Ev(e){e.clearSnapshot()}function Cv(e){e.clearMeasurements()}function Tv(e){var t=e.options.visualElement;(null==t?void 0:t.getProps().onBeforeLayoutMeasure)&&t.notifyBeforeLayoutMeasure(),e.resetTransform()}function Rv(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0}function Pv(e){e.resolveTargetDelta()}function Lv(e){e.calcProjection()}function Dv(e){e.resetRotation()}function Iv(e){e.removeLeadSnapshot()}function kv(e,t,n){e.translate=Kh(t.translate,0,n),e.scale=Kh(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Bv(e,t,n,r){e.min=Kh(t.min,n.min,r),e.max=Kh(t.max,n.max,r)}function Fv(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}var Nv={duration:.45,ease:[.4,0,.1,1]};function Ov(e,t){for(var n=e.root,r=e.path.length-1;r>=0;r--)if(Boolean(e.path[r].instance)){n=e.path[r];break}var i=(n&&n!==e.root?n.instance:document).querySelector('[data-projection-id="'.concat(t,'"]'));i&&e.mount(i,!0)}function zv(e){e.min=Math.round(e.min),e.max=Math.round(e.max)}function Uv(e){zv(e.x),zv(e.y)}var Hv=Mv({attachResizeListener:function(e,t){return uh(e,"resize",t)},measureScroll:function(){return{x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}},checkIsScrollRoot:function(){return!0}}),Gv={current:void 0},Vv=Mv({measureScroll:function(e){return{x:e.scrollLeft,y:e.scrollTop}},defaultParent:function(){if(!Gv.current){var e=new Hv(0,{});e.mount(window),e.setOptions({layoutScroll:!0}),Gv.current=e}return Gv.current},resetTransform:function(e,t){e.style.transform=null!=t?t:"none"},checkIsScrollRoot:function(e){return Boolean("fixed"===window.getComputedStyle(e).position)}}),jv=qc(qc(qc(qc({},Fm),Gh),Ag),ev),Wv=Qu((function(e,t){return function(e,t,n,r,i){var a=t.forwardMotionProps,o=void 0!==a&&a,s=td(e)?lh:ch;return qc(qc({},s),{preloadedFeatures:n,useRender:Xd(o),createVisualElement:r,projectionNodeConstructor:i,Component:e})}(e,t,jv,qg,Vv)}));function Xv(e,t){const n=qv(e,t);return{position:n,index:n?e[n].findIndex((e=>e.id===t)):-1}}var qv=(e,t)=>{var n;return null==(n=Object.values(e).flat().find((e=>e.id===t)))?void 0:n.position};function Yv(e){return{position:"fixed",zIndex:5500,pointerEvents:"none",display:"flex",flexDirection:"column",margin:"top"===e||"bottom"===e?"0 auto":void 0,top:e.includes("top")?"env(safe-area-inset-top, 0px)":void 0,bottom:e.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,right:e.includes("left")?void 0:"env(safe-area-inset-right, 0px)",left:e.includes("right")?void 0:"env(safe-area-inset-left, 0px)"}}var Zv=function(e){let t=e;const n=new Set,r=e=>{t=e(t),n.forEach((e=>e()))};return{getState:()=>t,subscribe:t=>(n.add(t),()=>{r((()=>e)),n.delete(t)}),removeToast:(e,t)=>{r((n=>({...n,[t]:n[t].filter((t=>t.id!=e))})))},notify:(e,t)=>{const n=function(e,t={}){Jv+=1;const n=t.id??Jv,r=t.position??"bottom";return{id:n,message:e,position:r,duration:t.duration,onCloseComplete:t.onCloseComplete,onRequestRemove:()=>Zv.removeToast(String(n),r),status:t.status,requestClose:!1,containerStyle:t.containerStyle}}(e,t),{position:i,id:a}=n;return r((e=>{const t=i.includes("top")?[n,...e[i]??[]]:[...e[i]??[],n];return{...e,[i]:t}})),a},update:(e,t)=>{e&&r((n=>{const r={...n},{position:i,index:a}=Xv(r,e);return i&&-1!==a&&(r[i][a]={...r[i][a],...t,message:Kv(t)}),r}))},closeAll:({positions:e}={})=>{r((t=>(e??["bottom","bottom-right","bottom-left","top","top-left","top-right"]).reduce(((e,n)=>(e[n]=t[n].map((e=>({...e,requestClose:!0}))),e)),{...t})))},close:e=>{r((t=>{const n=qv(t,e);return n?{...t,[n]:t[n].map((t=>t.id==e?{...t,requestClose:!0}:t))}:t}))},isActive:e=>Boolean(Xv(Zv.getState(),e).position)}}({top:[],"top-left":[],"top-right":[],"bottom-left":[],bottom:[],"bottom-right":[]}),Jv=0,$v=e=>{const{status:n,variant:r="solid",id:i,title:a,isClosable:o,onClose:s,description:l,icon:c}=e,u=i?{root:`toast-${i}`,title:`toast-${i}-title`,description:`toast-${i}-description`}:void 0;return t.createElement(zc,{addRole:!1,status:n,variant:r,id:null==u?void 0:u.root,alignItems:"start",borderRadius:"md",boxShadow:"lg",paddingEnd:8,textAlign:"start",width:"auto"},t.createElement(Hc,null,c),t.createElement(va.div,{flex:"1",maxWidth:"100%"},a&&t.createElement(Gc,{id:null==u?void 0:u.title},a),l&&t.createElement(Uc,{id:null==u?void 0:u.description,display:"block"},l)),o&&t.createElement(jc,{size:"sm",onClick:s,position:"absolute",insetEnd:1,top:1}))};function Kv(e={}){const{render:n,toastComponent:r=$v}=e;return i=>E(n)?n(i):t.createElement(r,{...i,...e})}var Qv={initial:e=>{const{position:t}=e,n=["top","bottom"].includes(t)?"y":"x";let r=["top-right","bottom-right"].includes(t)?1:-1;return"bottom"===t&&(r=1),{opacity:0,[n]:24*r}},animate:{opacity:1,y:0,x:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:.85,transition:{duration:.2,ease:[.4,0,1,1]}}},ey=(0,t.memo)((e=>{const{id:n,message:r,onCloseComplete:i,onRequestRemove:a,requestClose:o=!1,position:s="bottom",duration:l=5e3,containerStyle:c,motionVariants:u=Qv,toastSpacing:d="0.5rem"}=e,[h,f]=(0,t.useState)(l),p=function(e){return null===e||e.isPresent}((0,t.useContext)(yu));ct((()=>{p||null==i||i()}),[p]),ct((()=>{f(l)}),[l]);const m=()=>{p&&a()};(0,t.useEffect)((()=>{p&&o&&a()}),[p,o,a]),function(e,n){const r=tt(e);(0,t.useEffect)((()=>{if(null==n)return;let e=null;return e=window.setTimeout((()=>{r()}),n),()=>{e&&window.clearTimeout(e)}}),[n,r])}(m,h);const g=(0,t.useMemo)((()=>({pointerEvents:"auto",maxWidth:560,minWidth:300,margin:d,...c})),[c,d]),v=(0,t.useMemo)((()=>function(e){let t="center";return e.includes("right")&&(t="flex-end"),e.includes("left")&&(t="flex-start"),{display:"flex",flexDirection:"column",alignItems:t}}(s)),[s]);return t.createElement(Wv.li,{layout:!0,className:"chakra-toast",variants:u,initial:"initial",animate:"animate",exit:"exit",onHoverStart:()=>f(null),onHoverEnd:()=>f(l),custom:{position:s},style:v},t.createElement(va.div,{role:"status","aria-atomic":"true",className:"chakra-toast__inner",__css:g},he(r,{id:n,onClose:m})))})),ty=e=>{const n=(0,t.useSyncExternalStore)(Zv.subscribe,Zv.getState,Zv.getState),{children:r,motionVariants:i,component:a=ey,portalProps:o}=e,s=z(n).map((e=>{const r=n[e];return t.createElement("ul",{role:"region","aria-live":"polite",key:e,id:`chakra-toast-manager-${e}`,style:Yv(e)},t.createElement(Tu,{initial:!1},r.map((e=>t.createElement(a,{key:e.id,motionVariants:i,...e})))))}));return t.createElement(t.Fragment,null,r,t.createElement(_r,{...o},s))};function ny({children:e,toastOptions:n,...r}){return t.createElement(Sa,{...r},e,t.createElement(ty,{...n}))}function ry(e,t,n,r){if((E(e)||E(t))&&Object.prototype.hasOwnProperty.call(r,n))return(...n)=>{const r=E(e)?e(...n):e,i=E(t)?t(...n):t;return a()({},r,i,ry)}}ny.defaultProps={theme:Sc},fa((function(e,n){const{ratio:r=4/3,children:i,className:a,...o}=e,s=t.Children.only(i),l=ne("chakra-aspect-ratio",a);return t.createElement(va.div,{ref:n,position:"relative",className:l,_before:{height:0,content:'""',display:"block",paddingBottom:Ye(r,(e=>1/e*100+"%"))},__css:{"& > *:not(style)":{overflow:"hidden",position:"absolute",top:"0",right:"0",bottom:"0",left:"0",display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"},"& > img, & > video":{objectFit:"cover"}},...o},s)})),fa((function(e,n){const r=ma("Badge",e),{className:i,...a}=Wi(e);return t.createElement(va.span,{ref:n,className:ne("chakra-badge",e.className),...a,__css:{display:"inline-block",whiteSpace:"nowrap",verticalAlign:"middle",...r}})}));var iy=va("div"),ay=fa((function(e,n){const{size:r,centerContent:i=!0,...a}=e,o=i?{display:"flex",alignItems:"center",justifyContent:"center"}:{};return t.createElement(iy,{ref:n,boxSize:r,__css:{...o,flexShrink:0,flexGrow:0},...a})}));fa((function(e,n){const{size:r,...i}=e;return t.createElement(ay,{size:r,ref:n,borderRadius:"9999px",...i})}));var oy=va("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}}),sy={horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}};fa((function(e,n){const{axis:r="both",...i}=e;return t.createElement(va.div,{ref:n,__css:sy[r],...i,position:"absolute"})})),fa((function(e,n){const r=ma("Code",e),{className:i,...a}=Wi(e);return t.createElement(va.code,{ref:n,className:ne("chakra-code",e.className),...a,__css:{display:"inline-block",...r}})})),fa((function(e,n){const{className:r,centerContent:i,...a}=Wi(e),o=ma("Container",e);return t.createElement(va.div,{ref:n,className:ne("chakra-container",r),...a,__css:{...o,...i&&{display:"flex",flexDirection:"column",alignItems:"center"}}})})),fa((function(e,n){const{borderLeftWidth:r,borderBottomWidth:i,borderTopWidth:a,borderRightWidth:o,borderWidth:s,borderStyle:l,borderColor:c,...u}=ma("Divider",e),{className:d,orientation:h="horizontal",__css:f,...p}=Wi(e),m={vertical:{borderLeftWidth:r||o||s||"1px",height:"100%"},horizontal:{borderBottomWidth:i||a||s||"1px",width:"100%"}};return t.createElement(va.hr,{ref:n,"aria-orientation":h,...p,__css:{...u,border:"0",borderColor:c,borderStyle:l,...m[h],...f},className:ne("chakra-divider",d)})}));var ly=fa((function(e,n){const{direction:r,align:i,justify:a,wrap:o,basis:s,grow:l,shrink:c,...u}=e,d={display:"flex",flexDirection:r,alignItems:i,justifyContent:a,flexWrap:o,flexBasis:s,flexGrow:l,flexShrink:c};return t.createElement(va.div,{ref:n,__css:d,...u})})),cy=fa((function(e,n){const{templateAreas:r,gap:i,rowGap:a,columnGap:o,column:s,row:l,autoFlow:c,autoRows:u,templateRows:d,autoColumns:h,templateColumns:f,...p}=e,m={display:"grid",gridTemplateAreas:r,gridGap:i,gridRowGap:a,gridColumnGap:o,gridAutoColumns:h,gridColumn:s,gridRow:l,gridAutoFlow:c,gridAutoRows:u,gridTemplateRows:d,gridTemplateColumns:f};return t.createElement(va.div,{ref:n,__css:m,...p})}));function uy(e){return Ye(e,(e=>"auto"===e?"auto":`span ${e}/span ${e}`))}var dy=fa((function(e,n){const{area:r,colSpan:i,colStart:a,colEnd:o,rowEnd:s,rowSpan:l,rowStart:c,...u}=e,d=O({gridArea:r,gridColumn:uy(i),gridRow:uy(l),gridColumnStart:a,gridColumnEnd:o,gridRowStart:c,gridRowEnd:s});return t.createElement(va.div,{ref:n,__css:d,...u})}));fa((function(e,n){const r=ma("Heading",e),{className:i,...a}=Wi(e);return t.createElement(va.h2,{ref:n,className:ne("chakra-heading",e.className),...a,__css:r})})),fa((function(e,n){const r=ma("Mark",e),i=Wi(e);return t.createElement(iy,{ref:n,...i,as:"mark",__css:{bg:"transparent",whiteSpace:"nowrap",...r}})})),fa((function(e,n){const r=ma("Kbd",e),{className:i,...a}=Wi(e);return t.createElement(va.kbd,{ref:n,className:ne("chakra-kbd",i),...a,__css:{fontFamily:"mono",...r}})})),fa((function(e,n){const r=ma("Link",e),{className:i,isExternal:a,...o}=Wi(e);return t.createElement(va.a,{target:a?"_blank":void 0,rel:a?"noopener":void 0,ref:n,className:ne("chakra-link",i),...o,__css:r})})),fa((function(e,n){const{isExternal:r,target:i,rel:a,className:o,...s}=e;return t.createElement(va.a,{...s,ref:n,className:ne("chakra-linkbox__overlay",o),rel:r?"noopener noreferrer":a,target:r?"_blank":i,__css:{position:"static","&::before":{content:"''",cursor:"inherit",display:"block",position:"absolute",top:0,left:0,zIndex:0,width:"100%",height:"100%"}}})})),fa((function(e,n){const{className:r,...i}=e;return t.createElement(va.div,{ref:n,position:"relative",...i,className:ne("chakra-linkbox",r),__css:{"a[href]:not(.chakra-linkbox__overlay), abbr[title]":{position:"relative",zIndex:1}}})}));var[hy,fy]=cr({name:"ListStylesContext",errorMessage:"useListStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<List />\" "}),py=fa((function(e,n){const r=ga("List",e),{children:i,styleType:a="none",stylePosition:o,spacing:s,...l}=Wi(e),c=ur(i),u=s?{"& > *:not(style) ~ *:not(style)":{mt:s}}:{};return t.createElement(hy,{value:r},t.createElement(va.ul,{ref:n,listStyleType:a,listStylePosition:o,role:"list",__css:{...r.container,...u},...l},c))}));fa(((e,n)=>{const{as:r,...i}=e;return t.createElement(py,{ref:n,as:"ol",styleType:"decimal",marginStart:"1em",...i})})),fa((function(e,n){const{as:r,...i}=e;return t.createElement(py,{ref:n,as:"ul",styleType:"initial",marginStart:"1em",...i})}));var my=fa((function(e,n){const r=fy();return t.createElement(va.li,{ref:n,...e,__css:r.item})}));fa((function(e,n){const r=fy();return t.createElement(Ec,{ref:n,role:"presentation",...e,__css:r.icon})})),fa((function(e,n){const{columns:r,spacingX:i,spacingY:a,spacing:o,minChildWidth:s,...l}=e,c=ra(),u=s?function(e,t){return Ye(e,(e=>{const n=function(e,t,n){const r=Array.isArray(t)?t:[t],i=Array.isArray(n)?n:[n];return n=>{const a=i.filter(Boolean),o=r.map(((t,r)=>"breakpoints"===e?function(e,t,n){if(null==t)return t;const r=t=>{var n,r;return null==(r=null==(n=e.__breakpoints)?void 0:n.asArray)?void 0:r[t]};return r(t)??r(n)??n}(n,t,a[r]??t):function(e,t,n){if(null==t)return t;const r=t=>{var n,r;return null==(r=null==(n=e.__cssMap)?void 0:n[t])?void 0:r.value};return r(t)??r(n)??n}(n,`${e}.${t}`,a[r]??t)));return Array.isArray(t)?o:o[0]}}("sizes",e,S(r=e)?`${r}px`:r)(t);var r;return P(e)?null:`repeat(auto-fit, minmax(${n}, 1fr))`}))}(s,c):Ye(r,(e=>P(e)?null:`repeat(${e}, minmax(0, 1fr))`));return t.createElement(cy,{ref:n,gap:o,columnGap:i,rowGap:a,templateColumns:u,...l})})),va("div",{baseStyle:{flex:1,justifySelf:"stretch",alignSelf:"stretch"}});var gy="& > *:not(style) ~ *:not(style)",vy=e=>t.createElement(va.div,{className:"chakra-stack__item",...e,__css:{display:"inline-block",flex:"0 0 auto",minWidth:0,...e.__css}}),yy=fa(((e,n)=>{const{isInline:r,direction:i,align:a,justify:o,spacing:s="0.5rem",wrap:l,children:c,divider:u,className:d,shouldWrapChildren:h,...f}=e,p=r?"row":i??"column",m=(0,t.useMemo)((()=>function(e){const{spacing:t,direction:n}=e,r={column:{marginTop:t,marginEnd:0,marginBottom:0,marginStart:0},row:{marginTop:0,marginEnd:0,marginBottom:0,marginStart:t},"column-reverse":{marginTop:0,marginEnd:0,marginBottom:t,marginStart:0},"row-reverse":{marginTop:0,marginEnd:t,marginBottom:0,marginStart:0}};return{flexDirection:n,[gy]:Ye(n,(e=>r[e]))}}({direction:p,spacing:s})),[p,s]),g=(0,t.useMemo)((()=>function(e){const{spacing:t,direction:n}=e,r={column:{my:t,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},"column-reverse":{my:t,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},row:{mx:t,my:0,borderLeftWidth:"1px",borderBottomWidth:0},"row-reverse":{mx:t,my:0,borderLeftWidth:"1px",borderBottomWidth:0}};return{"&":Ye(n,(e=>r[e]))}}({spacing:s,direction:p})),[s,p]),v=!!u,y=!h&&!v,b=ur(c),x=y?b:b.map(((e,n)=>{const r=void 0!==e.key?e.key:n,i=n+1===b.length,a=h?t.createElement(vy,{key:r},e):e;if(!v)return a;const o=(0,t.cloneElement)(u,{__css:g}),s=i?null:o;return t.createElement(t.Fragment,{key:r},a,s)})),_=ne("chakra-stack",d);return t.createElement(va.div,{ref:n,display:"flex",alignItems:a,justifyContent:o,flexDirection:m.flexDirection,flexWrap:l,className:_,__css:v?{}:{[gy]:m[gy]},...f},x)}));fa(((e,n)=>t.createElement(yy,{align:"center",...e,direction:"row",ref:n})));var by=fa(((e,n)=>t.createElement(yy,{align:"center",...e,direction:"column",ref:n}))),xy=fa((function(e,n){const r=ma("Text",e),{className:i,align:a,decoration:o,casing:s,...l}=Wi(e),c=O({textAlign:e.align,textDecoration:e.decoration,textTransform:e.casing});return t.createElement(va.p,{ref:n,className:ne("chakra-text",e.className),...c,...l,__css:r})}));function _y(e){return"number"==typeof e?`${e}px`:e}fa((function(e,n){const{spacing:r="0.5rem",spacingX:i,spacingY:a,children:o,justify:s,direction:l,align:c,className:u,shouldWrapChildren:d,...h}=e,f=(0,t.useMemo)((()=>{const{spacingX:e=r,spacingY:t=r}={spacingX:i,spacingY:a};return{"--chakra-wrap-x-spacing":t=>Ye(e,(e=>_y(Mr("space",e)(t)))),"--chakra-wrap-y-spacing":e=>Ye(t,(t=>_y(Mr("space",t)(e)))),"--wrap-x-spacing":"calc(var(--chakra-wrap-x-spacing) / 2)","--wrap-y-spacing":"calc(var(--chakra-wrap-y-spacing) / 2)",display:"flex",flexWrap:"wrap",justifyContent:s,alignItems:c,flexDirection:l,listStyleType:"none",padding:"0",margin:"calc(var(--wrap-y-spacing) * -1) calc(var(--wrap-x-spacing) * -1)","& > *:not(style)":{margin:"var(--wrap-y-spacing) var(--wrap-x-spacing)"}}}),[r,i,a,s,c,l]),p=d?t.Children.map(o,((e,n)=>t.createElement(wy,{key:n},e))):o;return t.createElement(va.div,{ref:n,className:ne("chakra-wrap",u),overflow:"hidden",...h},t.createElement(va.ul,{className:"chakra-wrap__list",__css:f},p))}));var wy=fa((function(e,n){const{className:r,...i}=e;return t.createElement(va.li,{ref:n,__css:{display:"flex",alignItems:"flex-start"},className:ne("chakra-wrap__listitem",r),...i})})),[My,Sy]=cr({strict:!1,name:"ButtonGroupContext"});function Ay(e){const{children:n,className:r,...i}=e,a=(0,t.isValidElement)(n)?(0,t.cloneElement)(n,{"aria-hidden":!0,focusable:!1}):n,o=ne("chakra-button__icon",r);return t.createElement(va.span,{display:"inline-flex",alignSelf:"center",flexShrink:0,...i,className:o},a)}function Ey(e){const{label:n,placement:r,spacing:i="0.5rem",children:a=t.createElement(Dc,{color:"currentColor",width:"1em",height:"1em"}),className:o,__css:s,...l}=e,c=ne("chakra-button__spinner",o),u="start"===r?"marginEnd":"marginStart",d=(0,t.useMemo)((()=>({display:"flex",alignItems:"center",position:n?"relative":"absolute",[u]:n?i:0,fontSize:"1em",lineHeight:"normal",...s})),[s,n,u,i]);return t.createElement(va.div,{className:c,...l,__css:d},a)}var Cy=fa(((e,n)=>{const r=Sy(),i=ma("Button",{...r,...e}),{isDisabled:o=(null==r?void 0:r.isDisabled),isLoading:s,isActive:l,children:c,leftIcon:u,rightIcon:d,loadingText:h,iconSpacing:f="0.5rem",type:p,spinner:m,spinnerPlacement:g="start",className:v,as:y,...b}=Wi(e),x=(0,t.useMemo)((()=>{const e=a()({},(null==i?void 0:i._focus)??{},{zIndex:1});return{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none",...i,...!!r&&{_focus:e}}}),[i,r]),{ref:_,type:w}=function(e){const[n,r]=(0,t.useState)(!e),i=(0,t.useCallback)((e=>{e&&r("BUTTON"===e.tagName)}),[]);return{ref:i,type:n?"button":void 0}}(y),M={rightIcon:d,leftIcon:u,iconSpacing:f,children:c};return t.createElement(va.button,{disabled:o||s,ref:mt(n,_),as:y,type:p??w,"data-active":ee(l),"data-loading":ee(s),__css:x,className:ne("chakra-button",v),...b},s&&"start"===g&&t.createElement(Ey,{className:"chakra-button__spinner--start",label:h,placement:"start",spacing:f},m),s?h||t.createElement(va.span,{opacity:0},t.createElement(Ty,{...M})):t.createElement(Ty,{...M}),s&&"end"===g&&t.createElement(Ey,{className:"chakra-button__spinner--end",label:h,placement:"end",spacing:f},m))}));function Ty(e){const{leftIcon:n,rightIcon:r,children:i,iconSpacing:a}=e;return t.createElement(t.Fragment,null,n&&t.createElement(Ay,{marginEnd:a},n),i,r&&t.createElement(Ay,{marginStart:a},r))}var Ry=fa((function(e,n){const{size:r,colorScheme:i,variant:a,className:o,spacing:s="0.5rem",isAttached:l,isDisabled:c,...u}=e,d=ne("chakra-button__group",o),h=(0,t.useMemo)((()=>({size:r,colorScheme:i,variant:a,isDisabled:c})),[r,i,a,c]);let f={display:"inline-flex"};return f=l?{...f,"> *:first-of-type:not(:last-of-type)":{borderEndRadius:0},"> *:not(:first-of-type):not(:last-of-type)":{borderRadius:0},"> *:not(:first-of-type):last-of-type":{borderStartRadius:0}}:{...f,"& > *:not(style) ~ *:not(style)":{marginStart:s}},t.createElement(My,{value:h},t.createElement(va.div,{ref:n,role:"group",__css:f,className:d,"data-attached":l?"":void 0,...u}))})),Py=fa(((e,n)=>{const{icon:r,children:i,isRound:a,"aria-label":o,...s}=e,l=r||i,c=(0,t.isValidElement)(l)?(0,t.cloneElement)(l,{"aria-hidden":!0,focusable:!1}):null;return t.createElement(Cy,{padding:"0",borderRadius:a?"full":void 0,ref:n,"aria-label":o,...s},c)})),Ly=i(3379),Dy=i.n(Ly),Iy=i(7795),ky=i.n(Iy),By=i(569),Fy=i.n(By),Ny=i(3565),Oy=i.n(Ny),zy=i(9216),Uy=i.n(zy),Hy=i(4589),Gy=i.n(Hy),Vy=i(1566),jy={};jy.styleTagTransform=Gy(),jy.setAttributes=Oy(),jy.insert=Fy().bind(null,"head"),jy.domAPI=ky(),jy.insertStyleElement=Uy(),Dy()(Vy.Z,jy),Vy.Z&&Vy.Z.locals&&Vy.Z.locals;var Wy=i(9),Xy={};Xy.styleTagTransform=Gy(),Xy.setAttributes=Oy(),Xy.insert=Fy().bind(null,"head"),Xy.domAPI=ky(),Xy.insertStyleElement=Uy(),Dy()(Wy.Z,Xy),Wy.Z&&Wy.Z.locals&&Wy.Z.locals;var qy=i(8690),Yy={};function Zy(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}Yy.styleTagTransform=Gy(),Yy.setAttributes=Oy(),Yy.insert=Fy().bind(null,"head"),Yy.domAPI=ky(),Yy.insertStyleElement=Uy(),Dy()(qy.Z,Yy),qy.Z&&qy.Z.locals&&qy.Z.locals;const Jy=e=>{let t;const n=new Set,r=(e,r)=>{const i="function"==typeof e?e(t):e;if(i!==t){const e=t;t=(null!=r?r:"object"!=typeof i)?i:Object.assign({},t,i),n.forEach((n=>n(t,e)))}},i=()=>t,a={setState:r,getState:i,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>n.clear()};return t=e(r,i,a),a},$y=e=>e?Jy(e):Jy;var Ky=i(2798);const{useSyncExternalStoreWithSelector:Qy}=Ky,eb=e=>{const n="function"==typeof e?$y(e):e,r=(e,r)=>function(e,n=e.getState,r){const i=Qy(e.subscribe,e.getState,e.getServerState||e.getState,n,r);return(0,t.useDebugValue)(i),i}(n,e,r);return Object.assign(r,n),r};var tb,nb;try{tb=Map}catch(e){}try{nb=Set}catch(e){}function rb(e,t,n){if(!e||"object"!=typeof e||"function"==typeof e)return e;if(e.nodeType&&"cloneNode"in e)return e.cloneNode(!0);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);if(Array.isArray(e))return e.map(ib);if(tb&&e instanceof tb)return new Map(Array.from(e.entries()));if(nb&&e instanceof nb)return new Set(Array.from(e.values()));if(e instanceof Object){t.push(e);var r=Object.create(e);for(var i in n.push(r),e){var a=t.findIndex((function(t){return t===e[i]}));r[i]=a>-1?n[a]:rb(e[i],t,n)}return r}return e}function ib(e){return rb(e,[],[])}const ab=Object.prototype.toString,ob=Error.prototype.toString,sb=RegExp.prototype.toString,lb="undefined"!=typeof Symbol?Symbol.prototype.toString:()=>"",cb=/^Symbol\((.*)\)(.*)$/;function ub(e,t=!1){if(null==e||!0===e||!1===e)return""+e;const n=typeof e;if("number"===n)return function(e){return e!=+e?"NaN":0===e&&1/e<0?"-0":""+e}(e);if("string"===n)return t?`"${e}"`:e;if("function"===n)return"[Function "+(e.name||"anonymous")+"]";if("symbol"===n)return lb.call(e).replace(cb,"Symbol($1)");const r=ab.call(e).slice(8,-1);return"Date"===r?isNaN(e.getTime())?""+e:e.toISOString(e):"Error"===r||e instanceof Error?"["+ob.call(e)+"]":"RegExp"===r?sb.call(e):null}function db(e,t){let n=ub(e,t);return null!==n?n:JSON.stringify(e,(function(e,n){let r=ub(this[e],t);return null!==r?r:n}),2)}let hb={default:"${path} is invalid",required:"${path} is a required field",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:e,type:t,value:n,originalValue:r})=>{let i=null!=r&&r!==n,a=`${e} must be a \`${t}\` type, but the final value was: \`${db(n,!0)}\``+(i?` (cast from the value \`${db(r,!0)}\`).`:".");return null===n&&(a+='\n If "null" is intended as an empty value be sure to mark the schema as `.nullable()`'),a},defined:"${path} must be defined"},fb={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},pb={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},mb={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},gb={noUnknown:"${path} field has unspecified keys: ${unknown}"},vb={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"};Object.assign(Object.create(null),{mixed:hb,string:fb,number:pb,date:mb,object:gb,array:vb,boolean:{isValue:"${path} field must be ${value}"}});var yb=i(8721),bb=i.n(yb);const xb=e=>e&&e.__isYupSchema__;function _b(e){return null==e?[]:[].concat(e)}function wb(){return wb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wb.apply(this,arguments)}let Mb=/\$\{\s*(\w+)\s*\}/g;class Sb extends Error{static formatError(e,t){const n=t.label||t.path||"this";return n!==t.path&&(t=wb({},t,{path:n})),"string"==typeof e?e.replace(Mb,((e,n)=>db(t[n]))):"function"==typeof e?e(t):e}static isError(e){return e&&"ValidationError"===e.name}constructor(e,t,n,r){super(),this.value=void 0,this.path=void 0,this.type=void 0,this.errors=void 0,this.params=void 0,this.inner=void 0,this.name="ValidationError",this.value=t,this.path=n,this.type=r,this.errors=[],this.inner=[],_b(e).forEach((e=>{Sb.isError(e)?(this.errors.push(...e.errors),this.inner=this.inner.concat(e.inner.length?e.inner:e)):this.errors.push(e)})),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0],Error.captureStackTrace&&Error.captureStackTrace(this,Sb)}}function Ab(e,t){let{endEarly:n,tests:r,args:i,value:a,errors:o,sort:s,path:l}=e,c=(e=>{let t=!1;return(...n)=>{t||(t=!0,e(...n))}})(t),u=r.length;const d=[];if(o=o||[],!u)return o.length?c(new Sb(o,a,l)):c(null,a);for(let e=0;e<r.length;e++)(0,r[e])(i,(function(e){if(e){if(!Sb.isError(e))return c(e,a);if(n)return e.value=a,c(e,a);d.push(e)}if(--u<=0){if(d.length&&(s&&d.sort(s),o.length&&d.push(...o),o=d),o.length)return void c(new Sb(o,a,l),a);c(null,a)}}))}var Eb=i(6604),Cb=i.n(Eb),Tb=i(5760);class Rb{constructor(e,t={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,"string"!=typeof e)throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),""===e)throw new TypeError("ref must be a non-empty string");this.isContext="$"===this.key[0],this.isValue="."===this.key[0],this.isSibling=!this.isContext&&!this.isValue;let n=this.isContext?"$":this.isValue?".":"";this.path=this.key.slice(n.length),this.getter=this.path&&(0,Tb.getter)(this.path,!0),this.map=t.map}getValue(e,t,n){let r=this.isContext?n:this.isValue?e:t;return this.getter&&(r=this.getter(r||{})),this.map&&(r=this.map(r)),r}cast(e,t){return this.getValue(e,null==t?void 0:t.parent,null==t?void 0:t.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(e){return e&&e.__isYupRef}}function Pb(){return Pb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pb.apply(this,arguments)}function Lb(e){function t(t,n){let{value:r,path:i="",label:a,options:o,originalValue:s,sync:l}=t,c=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["value","path","label","options","originalValue","sync"]);const{name:u,test:d,params:h,message:f}=e;let{parent:p,context:m}=o;function g(e){return Rb.isRef(e)?e.getValue(r,p,m):e}function v(e={}){const t=Cb()(Pb({value:r,originalValue:s,label:a,path:e.path||i},h,e.params),g),n=new Sb(Sb.formatError(e.message||f,t),r,t.path,e.type||u);return n.params=t,n}let y,b=Pb({path:i,parent:p,type:u,createError:v,resolve:g,options:o,originalValue:s},c);if(l){try{var x;if(y=d.call(b,r,b),"function"==typeof(null==(x=y)?void 0:x.then))throw new Error(`Validation test of type: "${b.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`)}catch(e){return void n(e)}Sb.isError(y)?n(y):y?n(null,y):n(v())}else try{Promise.resolve(d.call(b,r,b)).then((e=>{Sb.isError(e)?n(e):e?n(null,e):n(v())})).catch(n)}catch(e){n(e)}}return t.OPTIONS=e,t}function Db(e,t,n,r=n){let i,a,o;return t?((0,Tb.forEach)(t,((s,l,c)=>{let u=l?(e=>e.substr(0,e.length-1).substr(1))(s):s;if((e=e.resolve({context:r,parent:i,value:n})).innerType){let r=c?parseInt(u,10):0;if(n&&r>=n.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${s}, in the path: ${t}. because there is no value at that index. `);i=n,n=n&&n[r],e=e.innerType}if(!c){if(!e.fields||!e.fields[u])throw new Error(`The schema does not contain the path: ${t}. (failed at: ${o} which is a type: "${e._type}")`);i=n,n=n&&n[u],e=e.fields[u]}a=u,o=l?"["+s+"]":"."+s})),{schema:e,parent:i,parentPath:a}):{parent:i,parentPath:t,schema:e}}Rb.prototype.__isYupRef=!0;class Ib{constructor(){this.list=void 0,this.refs=void 0,this.list=new Set,this.refs=new Map}get size(){return this.list.size+this.refs.size}describe(){const e=[];for(const t of this.list)e.push(t);for(const[,t]of this.refs)e.push(t.describe());return e}toArray(){return Array.from(this.list).concat(Array.from(this.refs.values()))}resolveAll(e){return this.toArray().reduce(((t,n)=>t.concat(Rb.isRef(n)?e(n):n)),[])}add(e){Rb.isRef(e)?this.refs.set(e.key,e):this.list.add(e)}delete(e){Rb.isRef(e)?this.refs.delete(e.key):this.list.delete(e)}clone(){const e=new Ib;return e.list=new Set(this.list),e.refs=new Map(this.refs),e}merge(e,t){const n=this.clone();return e.list.forEach((e=>n.add(e))),e.refs.forEach((e=>n.add(e))),t.list.forEach((e=>n.delete(e))),t.refs.forEach((e=>n.delete(e))),n}}function kb(){return kb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kb.apply(this,arguments)}class Bb{constructor(e){this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this._typeError=void 0,this._whitelist=new Ib,this._blacklist=new Ib,this.exclusiveTests=Object.create(null),this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation((()=>{this.typeError(hb.notType)})),this.type=(null==e?void 0:e.type)||"mixed",this.spec=kb({strip:!1,strict:!1,abortEarly:!0,recursive:!0,nullable:!1,presence:"optional"},null==e?void 0:e.spec)}get _type(){return this.type}_typeCheck(e){return!0}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const t=Object.create(Object.getPrototypeOf(this));return t.type=this.type,t._typeError=this._typeError,t._whitelistError=this._whitelistError,t._blacklistError=this._blacklistError,t._whitelist=this._whitelist.clone(),t._blacklist=this._blacklist.clone(),t.exclusiveTests=kb({},this.exclusiveTests),t.deps=[...this.deps],t.conditions=[...this.conditions],t.tests=[...this.tests],t.transforms=[...this.transforms],t.spec=ib(kb({},this.spec,e)),t}label(e){let t=this.clone();return t.spec.label=e,t}meta(...e){if(0===e.length)return this.spec.meta;let t=this.clone();return t.spec.meta=Object.assign(t.spec.meta||{},e[0]),t}withMutation(e){let t=this._mutate;this._mutate=!0;let n=e(this);return this._mutate=t,n}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&"mixed"!==this.type)throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${e.type}`);let t=this,n=e.clone();const r=kb({},t.spec,n.spec);return n.spec=r,n._typeError||(n._typeError=t._typeError),n._whitelistError||(n._whitelistError=t._whitelistError),n._blacklistError||(n._blacklistError=t._blacklistError),n._whitelist=t._whitelist.merge(e._whitelist,e._blacklist),n._blacklist=t._blacklist.merge(e._blacklist,e._whitelist),n.tests=t.tests,n.exclusiveTests=t.exclusiveTests,n.withMutation((t=>{e.tests.forEach((e=>{t.test(e.OPTIONS)}))})),n.transforms=[...t.transforms,...n.transforms],n}isType(e){return!(!this.spec.nullable||null!==e)||this._typeCheck(e)}resolve(e){let t=this;if(t.conditions.length){let n=t.conditions;t=t.clone(),t.conditions=[],t=n.reduce(((t,n)=>n.resolve(t,e)),t),t=t.resolve(e)}return t}cast(e,t={}){let n=this.resolve(kb({value:e},t)),r=n._cast(e,t);if(void 0!==e&&!1!==t.assert&&!0!==n.isType(r)){let i=db(e),a=db(r);throw new TypeError(`The value of ${t.path||"field"} could not be cast to a value that satisfies the schema type: "${n._type}". \n\nattempted value: ${i} \n`+(a!==i?`result of cast: ${a}`:""))}return r}_cast(e,t){let n=void 0===e?e:this.transforms.reduce(((t,n)=>n.call(this,t,e,this)),e);return void 0===n&&(n=this.getDefault()),n}_validate(e,t={},n){let{sync:r,path:i,from:a=[],originalValue:o=e,strict:s=this.spec.strict,abortEarly:l=this.spec.abortEarly}=t,c=e;s||(c=this._cast(c,kb({assert:!1},t)));let u={value:c,path:i,options:t,originalValue:o,schema:this,label:this.spec.label,sync:r,from:a},d=[];this._typeError&&d.push(this._typeError);let h=[];this._whitelistError&&h.push(this._whitelistError),this._blacklistError&&h.push(this._blacklistError),Ab({args:u,value:c,path:i,sync:r,tests:d,endEarly:l},(e=>{e?n(e,c):Ab({tests:this.tests.concat(h),args:u,path:i,sync:r,value:c,endEarly:l},n)}))}validate(e,t,n){let r=this.resolve(kb({},t,{value:e}));return"function"==typeof n?r._validate(e,t,n):new Promise(((n,i)=>r._validate(e,t,((e,t)=>{e?i(e):n(t)}))))}validateSync(e,t){let n;return this.resolve(kb({},t,{value:e}))._validate(e,kb({},t,{sync:!0}),((e,t)=>{if(e)throw e;n=t})),n}isValid(e,t){return this.validate(e,t).then((()=>!0),(e=>{if(Sb.isError(e))return!1;throw e}))}isValidSync(e,t){try{return this.validateSync(e,t),!0}catch(e){if(Sb.isError(e))return!1;throw e}}_getDefault(){let e=this.spec.default;return null==e?e:"function"==typeof e?e.call(this):ib(e)}getDefault(e){return this.resolve(e||{})._getDefault()}default(e){return 0===arguments.length?this._getDefault():this.clone({default:e})}strict(e=!0){let t=this.clone();return t.spec.strict=e,t}_isPresent(e){return null!=e}defined(e=hb.defined){return this.test({message:e,name:"defined",exclusive:!0,test:e=>void 0!==e})}required(e=hb.required){return this.clone({presence:"required"}).withMutation((t=>t.test({message:e,name:"required",exclusive:!0,test(e){return this.schema._isPresent(e)}})))}notRequired(){let e=this.clone({presence:"optional"});return e.tests=e.tests.filter((e=>"required"!==e.OPTIONS.name)),e}nullable(e=!0){return this.clone({nullable:!1!==e})}transform(e){let t=this.clone();return t.transforms.push(e),t}test(...e){let t;if(t=1===e.length?"function"==typeof e[0]?{test:e[0]}:e[0]:2===e.length?{name:e[0],test:e[1]}:{name:e[0],message:e[1],test:e[2]},void 0===t.message&&(t.message=hb.default),"function"!=typeof t.test)throw new TypeError("`test` is a required parameters");let n=this.clone(),r=Lb(t),i=t.exclusive||t.name&&!0===n.exclusiveTests[t.name];if(t.exclusive&&!t.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return t.name&&(n.exclusiveTests[t.name]=!!t.exclusive),n.tests=n.tests.filter((e=>{if(e.OPTIONS.name===t.name){if(i)return!1;if(e.OPTIONS.test===r.OPTIONS.test)return!1}return!0})),n.tests.push(r),n}when(e,t){Array.isArray(e)||"string"==typeof e||(t=e,e=".");let n=this.clone(),r=_b(e).map((e=>new Rb(e)));return r.forEach((e=>{e.isSibling&&n.deps.push(e.key)})),n.conditions.push(new class{constructor(e,t){if(this.fn=void 0,this.refs=e,this.refs=e,"function"==typeof t)return void(this.fn=t);if(!bb()(t,"is"))throw new TypeError("`is:` is required for `when()` conditions");if(!t.then&&!t.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:n,then:r,otherwise:i}=t,a="function"==typeof n?n:(...e)=>e.every((e=>e===n));this.fn=function(...e){let t=e.pop(),n=e.pop(),o=a(...e)?r:i;if(o)return"function"==typeof o?o(n):n.concat(o.resolve(t))}}resolve(e,t){let n=this.refs.map((e=>e.getValue(null==t?void 0:t.value,null==t?void 0:t.parent,null==t?void 0:t.context))),r=this.fn.apply(e,n.concat(e,t));if(void 0===r||r===e)return e;if(!xb(r))throw new TypeError("conditions must return a schema object");return r.resolve(t)}}(r,t)),n}typeError(e){let t=this.clone();return t._typeError=Lb({message:e,name:"typeError",test(e){return!(void 0!==e&&!this.schema.isType(e))||this.createError({params:{type:this.schema._type}})}}),t}oneOf(e,t=hb.oneOf){let n=this.clone();return e.forEach((e=>{n._whitelist.add(e),n._blacklist.delete(e)})),n._whitelistError=Lb({message:t,name:"oneOf",test(e){if(void 0===e)return!0;let t=this.schema._whitelist,n=t.resolveAll(this.resolve);return!!n.includes(e)||this.createError({params:{values:t.toArray().join(", "),resolved:n}})}}),n}notOneOf(e,t=hb.notOneOf){let n=this.clone();return e.forEach((e=>{n._blacklist.add(e),n._whitelist.delete(e)})),n._blacklistError=Lb({message:t,name:"notOneOf",test(e){let t=this.schema._blacklist,n=t.resolveAll(this.resolve);return!n.includes(e)||this.createError({params:{values:t.toArray().join(", "),resolved:n}})}}),n}strip(e=!0){let t=this.clone();return t.spec.strip=e,t}describe(){const e=this.clone(),{label:t,meta:n}=e.spec,r={meta:n,label:t,type:e.type,oneOf:e._whitelist.describe(),notOneOf:e._blacklist.describe(),tests:e.tests.map((e=>({name:e.OPTIONS.name,params:e.OPTIONS.params}))).filter(((e,t,n)=>n.findIndex((t=>t.name===e.name))===t))};return r}}Bb.prototype.__isYupSchema__=!0;for(const e of["validate","validateSync"])Bb.prototype[`${e}At`]=function(t,n,r={}){const{parent:i,parentPath:a,schema:o}=Db(this,t,n,r.context);return o[e](i&&i[a],kb({},r,{parent:i,path:t}))};for(const e of["equals","is"])Bb.prototype[e]=Bb.prototype.oneOf;for(const e of["not","nope"])Bb.prototype[e]=Bb.prototype.notOneOf;Bb.prototype.optional=Bb.prototype.notRequired;Bb.prototype;const Fb=e=>null==e;let Nb=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,Ob=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,zb=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Ub=e=>Fb(e)||e===e.trim(),Hb={}.toString();function Gb(){return new Vb}class Vb extends Bb{constructor(){super({type:"string"}),this.withMutation((()=>{this.transform((function(e){if(this.isType(e))return e;if(Array.isArray(e))return e;const t=null!=e&&e.toString?e.toString():e;return t===Hb?e:t}))}))}_typeCheck(e){return e instanceof String&&(e=e.valueOf()),"string"==typeof e}_isPresent(e){return super._isPresent(e)&&!!e.length}length(e,t=fb.length){return this.test({message:t,name:"length",exclusive:!0,params:{length:e},test(t){return Fb(t)||t.length===this.resolve(e)}})}min(e,t=fb.min){return this.test({message:t,name:"min",exclusive:!0,params:{min:e},test(t){return Fb(t)||t.length>=this.resolve(e)}})}max(e,t=fb.max){return this.test({name:"max",exclusive:!0,message:t,params:{max:e},test(t){return Fb(t)||t.length<=this.resolve(e)}})}matches(e,t){let n,r,i=!1;return t&&("object"==typeof t?({excludeEmptyString:i=!1,message:n,name:r}=t):n=t),this.test({name:r||"matches",message:n||fb.matches,params:{regex:e},test:t=>Fb(t)||""===t&&i||-1!==t.search(e)})}email(e=fb.email){return this.matches(Nb,{name:"email",message:e,excludeEmptyString:!0})}url(e=fb.url){return this.matches(Ob,{name:"url",message:e,excludeEmptyString:!0})}uuid(e=fb.uuid){return this.matches(zb,{name:"uuid",message:e,excludeEmptyString:!1})}ensure(){return this.default("").transform((e=>null===e?"":e))}trim(e=fb.trim){return this.transform((e=>null!=e?e.trim():e)).test({message:e,name:"trim",test:Ub})}lowercase(e=fb.lowercase){return this.transform((e=>Fb(e)?e:e.toLowerCase())).test({message:e,name:"string_case",exclusive:!0,test:e=>Fb(e)||e===e.toLowerCase()})}uppercase(e=fb.uppercase){return this.transform((e=>Fb(e)?e:e.toUpperCase())).test({message:e,name:"string_case",exclusive:!0,test:e=>Fb(e)||e===e.toUpperCase()})}}function jb(){return new Wb}Gb.prototype=Vb.prototype;class Wb extends Bb{constructor(){super({type:"number"}),this.withMutation((()=>{this.transform((function(e){let t=e;if("string"==typeof t){if(t=t.replace(/\s/g,""),""===t)return NaN;t=+t}return this.isType(t)?t:parseFloat(t)}))}))}_typeCheck(e){return e instanceof Number&&(e=e.valueOf()),"number"==typeof e&&!(e=>e!=+e)(e)}min(e,t=pb.min){return this.test({message:t,name:"min",exclusive:!0,params:{min:e},test(t){return Fb(t)||t>=this.resolve(e)}})}max(e,t=pb.max){return this.test({message:t,name:"max",exclusive:!0,params:{max:e},test(t){return Fb(t)||t<=this.resolve(e)}})}lessThan(e,t=pb.lessThan){return this.test({message:t,name:"max",exclusive:!0,params:{less:e},test(t){return Fb(t)||t<this.resolve(e)}})}moreThan(e,t=pb.moreThan){return this.test({message:t,name:"min",exclusive:!0,params:{more:e},test(t){return Fb(t)||t>this.resolve(e)}})}positive(e=pb.positive){return this.moreThan(0,e)}negative(e=pb.negative){return this.lessThan(0,e)}integer(e=pb.integer){return this.test({name:"integer",message:e,test:e=>Fb(e)||Number.isInteger(e)})}truncate(){return this.transform((e=>Fb(e)?e:0|e))}round(e){var t;let n=["ceil","floor","round","trunc"];if("trunc"===(e=(null==(t=e)?void 0:t.toLowerCase())||"round"))return this.truncate();if(-1===n.indexOf(e.toLowerCase()))throw new TypeError("Only valid options for round() are: "+n.join(", "));return this.transform((t=>Fb(t)?t:Math[e](t)))}}jb.prototype=Wb.prototype;var Xb=/^(\d{4}|[+\-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;let qb=new Date("");function Yb(){return new Zb}class Zb extends Bb{constructor(){super({type:"date"}),this.withMutation((()=>{this.transform((function(e){return this.isType(e)?e:(e=function(e){var t,n,r=[1,4,5,6,7,10,11],i=0;if(n=Xb.exec(e)){for(var a,o=0;a=r[o];++o)n[a]=+n[a]||0;n[2]=(+n[2]||1)-1,n[3]=+n[3]||1,n[7]=n[7]?String(n[7]).substr(0,3):0,void 0!==n[8]&&""!==n[8]||void 0!==n[9]&&""!==n[9]?("Z"!==n[8]&&void 0!==n[9]&&(i=60*n[10]+n[11],"+"===n[9]&&(i=0-i)),t=Date.UTC(n[1],n[2],n[3],n[4],n[5]+i,n[6],n[7])):t=+new Date(n[1],n[2],n[3],n[4],n[5],n[6],n[7])}else t=Date.parse?Date.parse(e):NaN;return t}(e),isNaN(e)?qb:new Date(e))}))}))}_typeCheck(e){return t=e,"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(e.getTime());var t}prepareParam(e,t){let n;if(Rb.isRef(e))n=e;else{let r=this.cast(e);if(!this._typeCheck(r))throw new TypeError(`\`${t}\` must be a Date or a value that can be \`cast()\` to a Date`);n=r}return n}min(e,t=mb.min){let n=this.prepareParam(e,"min");return this.test({message:t,name:"min",exclusive:!0,params:{min:e},test(e){return Fb(e)||e>=this.resolve(n)}})}max(e,t=mb.max){let n=this.prepareParam(e,"max");return this.test({message:t,name:"max",exclusive:!0,params:{max:e},test(e){return Fb(e)||e<=this.resolve(n)}})}}Zb.INVALID_DATE=qb,Yb.prototype=Zb.prototype,Yb.INVALID_DATE=qb;var Jb=i(1865),$b=i.n(Jb),Kb=i(8929),Qb=i.n(Kb),ex=i(7523),tx=i.n(ex),nx=i(4633),rx=i.n(nx);function ix(e,t){let n=1/0;return e.some(((e,r)=>{var i;if(-1!==(null==(i=t.path)?void 0:i.indexOf(e)))return n=r,!0})),n}function ax(e){return(t,n)=>ix(e,t)-ix(e,n)}function ox(){return ox=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ox.apply(this,arguments)}let sx=e=>"[object Object]"===Object.prototype.toString.call(e);const lx=ax([]);class cx extends Bb{constructor(e){super({type:"object"}),this.fields=Object.create(null),this._sortErrors=lx,this._nodes=[],this._excludedEdges=[],this.withMutation((()=>{this.transform((function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e=null}return this.isType(e)?e:null})),e&&this.shape(e)}))}_typeCheck(e){return sx(e)||"function"==typeof e}_cast(e,t={}){var n;let r=super._cast(e,t);if(void 0===r)return this.getDefault();if(!this._typeCheck(r))return r;let i=this.fields,a=null!=(n=t.stripUnknown)?n:this.spec.noUnknown,o=this._nodes.concat(Object.keys(r).filter((e=>-1===this._nodes.indexOf(e)))),s={},l=ox({},t,{parent:s,__validating:t.__validating||!1}),c=!1;for(const e of o){let n=i[e],o=bb()(r,e);if(n){let i,a=r[e];l.path=(t.path?`${t.path}.`:"")+e,n=n.resolve({value:a,context:t.context,parent:s});let o="spec"in n?n.spec:void 0,u=null==o?void 0:o.strict;if(null==o?void 0:o.strip){c=c||e in r;continue}i=t.__validating&&u?r[e]:n.cast(r[e],l),void 0!==i&&(s[e]=i)}else o&&!a&&(s[e]=r[e]);s[e]!==r[e]&&(c=!0)}return c?s:r}_validate(e,t={},n){let r=[],{sync:i,from:a=[],originalValue:o=e,abortEarly:s=this.spec.abortEarly,recursive:l=this.spec.recursive}=t;a=[{schema:this,value:o},...a],t.__validating=!0,t.originalValue=o,t.from=a,super._validate(e,t,((e,c)=>{if(e){if(!Sb.isError(e)||s)return void n(e,c);r.push(e)}if(!l||!sx(c))return void n(r[0]||null,c);o=o||c;let u=this._nodes.map((e=>(n,r)=>{let i=-1===e.indexOf(".")?(t.path?`${t.path}.`:"")+e:`${t.path||""}["${e}"]`,s=this.fields[e];s&&"validate"in s?s.validate(c[e],ox({},t,{path:i,from:a,strict:!0,parent:c,originalValue:o[e]}),r):r(null)}));Ab({sync:i,tests:u,value:c,errors:r,endEarly:s,sort:this._sortErrors,path:t.path},n)}))}clone(e){const t=super.clone(e);return t.fields=ox({},this.fields),t._nodes=this._nodes,t._excludedEdges=this._excludedEdges,t._sortErrors=this._sortErrors,t}concat(e){let t=super.concat(e),n=t.fields;for(let[e,t]of Object.entries(this.fields)){const r=n[e];void 0===r?n[e]=t:r instanceof Bb&&t instanceof Bb&&(n[e]=t.concat(r))}return t.withMutation((()=>t.shape(n,this._excludedEdges)))}getDefaultFromShape(){let e={};return this._nodes.forEach((t=>{const n=this.fields[t];e[t]="default"in n?n.getDefault():void 0})),e}_getDefault(){return"default"in this.spec?super._getDefault():this._nodes.length?this.getDefaultFromShape():void 0}shape(e,t=[]){let n=this.clone(),r=Object.assign(n.fields,e);return n.fields=r,n._sortErrors=ax(Object.keys(r)),t.length&&(Array.isArray(t[0])||(t=[t]),n._excludedEdges=[...n._excludedEdges,...t]),n._nodes=function(e,t=[]){let n=[],r=new Set,i=new Set(t.map((([e,t])=>`${e}-${t}`)));function a(e,t){let a=(0,Tb.split)(e)[0];r.add(a),i.has(`${t}-${a}`)||n.push([t,a])}for(const t in e)if(bb()(e,t)){let n=e[t];r.add(t),Rb.isRef(n)&&n.isSibling?a(n.path,t):xb(n)&&"deps"in n&&n.deps.forEach((e=>a(e,t)))}return rx().array(Array.from(r),n).reverse()}(r,n._excludedEdges),n}pick(e){const t={};for(const n of e)this.fields[n]&&(t[n]=this.fields[n]);return this.clone().withMutation((e=>(e.fields={},e.shape(t))))}omit(e){const t=this.clone(),n=t.fields;t.fields={};for(const t of e)delete n[t];return t.withMutation((()=>t.shape(n)))}from(e,t,n){let r=(0,Tb.getter)(e,!0);return this.transform((i=>{if(null==i)return i;let a=i;return bb()(i,e)&&(a=ox({},i),n||delete a[e],a[t]=r(i)),a}))}noUnknown(e=!0,t=gb.noUnknown){"string"==typeof e&&(t=e,e=!0);let n=this.test({name:"noUnknown",exclusive:!0,message:t,test(t){if(null==t)return!0;const n=function(e,t){let n=Object.keys(e.fields);return Object.keys(t).filter((e=>-1===n.indexOf(e)))}(this.schema,t);return!e||0===n.length||this.createError({params:{unknown:n.join(", ")}})}});return n.spec.noUnknown=e,n}unknown(e=!0,t=gb.noUnknown){return this.noUnknown(!e,t)}transformKeys(e){return this.transform((t=>t&&tx()(t,((t,n)=>e(n)))))}camelCase(){return this.transformKeys(Qb())}snakeCase(){return this.transformKeys($b())}constantCase(){return this.transformKeys((e=>$b()(e).toUpperCase()))}describe(){let e=super.describe();return e.fields=Cb()(this.fields,(e=>e.describe())),e}}function ux(e){return new cx(e)}function dx(){return dx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dx.apply(this,arguments)}function hx(e){return new fx(e)}ux.prototype=cx.prototype;class fx extends Bb{constructor(e){super({type:"array"}),this.innerType=void 0,this.innerType=e,this.withMutation((()=>{this.transform((function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e=null}return this.isType(e)?e:null}))}))}_typeCheck(e){return Array.isArray(e)}get _subType(){return this.innerType}_cast(e,t){const n=super._cast(e,t);if(!this._typeCheck(n)||!this.innerType)return n;let r=!1;const i=n.map(((e,n)=>{const i=this.innerType.cast(e,dx({},t,{path:`${t.path||""}[${n}]`}));return i!==e&&(r=!0),i}));return r?i:n}_validate(e,t={},n){var r,i;let a=[],o=t.sync,s=t.path,l=this.innerType,c=null!=(r=t.abortEarly)?r:this.spec.abortEarly,u=null!=(i=t.recursive)?i:this.spec.recursive,d=null!=t.originalValue?t.originalValue:e;super._validate(e,t,((e,r)=>{if(e){if(!Sb.isError(e)||c)return void n(e,r);a.push(e)}if(!u||!l||!this._typeCheck(r))return void n(a[0]||null,r);d=d||r;let i=new Array(r.length);for(let e=0;e<r.length;e++){let n=r[e],a=`${t.path||""}[${e}]`,o=dx({},t,{path:a,strict:!0,parent:r,index:e,originalValue:d[e]});i[e]=(e,t)=>l.validate(n,o,t)}Ab({sync:o,path:s,value:r,errors:a,endEarly:c,tests:i},n)}))}clone(e){const t=super.clone(e);return t.innerType=this.innerType,t}concat(e){let t=super.concat(e);return t.innerType=this.innerType,e.innerType&&(t.innerType=t.innerType?t.innerType.concat(e.innerType):e.innerType),t}of(e){let t=this.clone();if(!xb(e))throw new TypeError("`array.of()` sub-schema must be a valid yup schema not: "+db(e));return t.innerType=e,t}length(e,t=vb.length){return this.test({message:t,name:"length",exclusive:!0,params:{length:e},test(t){return Fb(t)||t.length===this.resolve(e)}})}min(e,t){return t=t||vb.min,this.test({message:t,name:"min",exclusive:!0,params:{min:e},test(t){return Fb(t)||t.length>=this.resolve(e)}})}max(e,t){return t=t||vb.max,this.test({message:t,name:"max",exclusive:!0,params:{max:e},test(t){return Fb(t)||t.length<=this.resolve(e)}})}ensure(){return this.default((()=>[])).transform(((e,t)=>this._typeCheck(e)?e:null==t?[]:[].concat(t)))}compact(e){let t=e?(t,n,r)=>!e(t,n,r):e=>!!e;return this.transform((e=>null!=e?e.filter(t):e))}describe(){let e=super.describe();return this.innerType&&(e.innerType=this.innerType.describe()),e}nullable(e=!0){return super.nullable(e)}defined(){return super.defined()}required(e){return super.required(e)}}var px;hx.prototype=fx.prototype;var mx=new Uint8Array(16);function gx(){if(!px&&!(px="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return px(mx)}const vx=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,yx=function(e){return"string"==typeof e&&vx.test(e)};for(var bx=[],xx=0;xx<256;++xx)bx.push((xx+256).toString(16).substr(1));const _x=function(e,t,n){var r=(e=e||{}).random||(e.rng||gx)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(bx[e[t+0]]+bx[e[t+1]]+bx[e[t+2]]+bx[e[t+3]]+"-"+bx[e[t+4]]+bx[e[t+5]]+"-"+bx[e[t+6]]+bx[e[t+7]]+"-"+bx[e[t+8]]+bx[e[t+9]]+"-"+bx[e[t+10]]+bx[e[t+11]]+bx[e[t+12]]+bx[e[t+13]]+bx[e[t+14]]+bx[e[t+15]]).toLowerCase();if(!yx(n))throw TypeError("Stringified UUID is invalid");return n}(r)};var wx=i(4099),Mx=i(949);const Sx={sunOnly:{name:"sun",efficiency:1},beamOnly:{name:"beam",efficiency:1},sunAndBeam:{name:"sun and beam",efficiency:1.5},eclipsed:{name:"eclipsed",efficiency:0}},Ax={power:{pvVoltage:4.7,currentDensity:170.5,area:.0128,batteryVoltage:3.6,capacity:1.125,powerStoringConsumption:1.2},duties:[{name:"beaming",duration:null,cycles:null,consumption:3.2,type:"space power"}]};function Ex(e,t,n){const r=Number(e.cycles),i=1e3*Number(e.duration),a=(t-i*r)/r,o=Math.floor(Mx.SIM_LENGTH/t*r);return Array.from({length:o},((e,t)=>{const r=n.valueOf()+a*(t+1)+i*t;return{start:r,end:r+i}}))}function Cx(e,t=!0){const n=(0,wx.generateTLE)({...e.orbit,epoch:new Date(e.orbit.epoch)}),r=(0,wx.twoline2satrec)(n.tle1,n.tle2);try{(0,wx.getOrbitAtTime)({orbit:r},new Date)}catch{const n=`Unable to propagate orbital parameters for ${e.name}. ${t?"Please try different values or choose a TLE.":"Please try different offsets in the power configuration menu."}`;throw new Error(n)}r.period=2*Math.PI*60*1e3/r.no;const i={sources:Sx,voltage:e.power.pvVoltage,currentDensity:e.power.currentDensity,area:e.power.area},a={voltage:e.power.batteryVoltage,capacity:e.power.capacity},o=e.duties.map((e=>({name:e.name,type:e.type,consumption:Number(e.consumption),duration:1e3*Number(e.duration)||null,cycles:Number(e.cycles)||null,intervals:"cyclical"===e.type?Ex(e,r.period,r.epochdate):null})));o.unshift({name:"Power storing",type:"power storing",consumption:e.power.powerStoringConsumption});const s=function(e,t,n){const{area:r,voltage:i,currentDensity:a}=e,o=[];return Object.entries(e.sources).forEach((e=>{const s=a*e[1].efficiency*r*i,l=[];t.forEach((e=>{const t=(s-e.consumption)/n.voltage;l.push(t)})),o[e[1].name]=l})),o}(i,o,a);return{name:e.name,id:e.id,params:{orbit:r,battery:a,pv:i,load:{powerProfiles:s,duties:o}},isCustomer:t}}const{earthRadius:Tx}=i(6150),{getOrbitAtTime:Rx,getSunPosition:Px,getEarthRotationAngle:Lx,getDistance:Dx}=i(4099),{isEclipsed:Ix,getChargeState:kx,getNetCurrent:Bx}=i(549),{SIM_LENGTH:Fx,FRAMES:Nx,BEAM_DISTANCE:Ox}=i(949);function zx(e,t){const n=[],r=[],i=[];return t.forEach((t=>{const a=Rx(e,new Date(t));n.push(a.x),r.push(a.y),i.push(a.z)})),{x:n,y:r,z:i}}function Ux(e,t,n){return n.map(((n,r)=>{const i={x:e.positions.x[r],y:e.positions.y[r],z:e.positions.z[r]},a={x:t.x[r],y:t.y[r],z:t.z[r]};return Ix(i,a)}))}function Hx(e,t){return t.map(((t,n)=>e.reduce(((e,t)=>t.activated[n]||e),!1)?1:0))}function Gx(e,t,n){return n.map(((n,r)=>function(e,t,n){let r;if(t){const i=t.filter((t=>t.customerId===e.id));r=i.reduce(((e,t)=>t.activated[n]||e),!1)}else r=!1;const i=!e.performance.isEclipsed[n];return!i&&r?"beam":i&&r?"sun and beam":i||r?i&&!r?"sun":void 0:"eclipsed"}(e,t,r)))}function Vx(e,t,n=!0){const r=Fx/36e5/Nx;let i=1;return t.map(((t,a)=>{let o=e.performance.sources[a];return!1===n&&("sun and beam"===o&&(o="sun"),"beam"===o&&(o="eclipsed")),i=kx(e.params,e.performance.currentDuties[a],o,i,r),i}))}const jx=ux().shape({satellites:hx().of(ux().shape({name:Gb().min(2,"Too Short!").max(50,"Too Long!").trim(),orbit:ux().shape({tle:Gb(),meanMotionDot:jb().min(-1,"Must be more than -1").max(1,"Must be less than 1").required("meanMotionDot is required"),bstar:jb().min(-2,"Must be between -2 and 2").max(2,"Must be between -2 and 2").required("bstar is required"),inclination:jb().min(0,"Must be 0-360°").max(360,"Must be 0-360°").required("inclination is required"),rightAscension:jb().min(0,"Must be 0-360°").max(360,"Must be 0-360°").required("right ascension is required"),eccentricity:jb().min(0,"Must be between 0 and 1").max(1,"Must be between 0 and 1").required("eccentricity is required"),perigee:jb().min(0,"Must be 0-360°").max(360,"Must be 0-360°").required("perigee is required"),meanAnomaly:jb().min(0,"Must be 0-360°").max(360,"Must be 0-360°").required("mean anomaly is required"),meanMotion:jb().min(0,"Must be greater than 0").max(16,"Must be less than 16").required("mean motion is required")}),power:ux().shape({pvVoltage:jb().min(0,"Must be positive").required("pv voltage is required"),currentDensity:jb().min(0,"Must be positive").required("pv current density is required"),area:jb().min(0,"Must be greater than 0").required("pv area is required"),batteryVoltage:jb().min(0,"Must be positive").required("battery voltage is required"),capacity:jb().min(0,"Must be greater than 0").required("battery capacity is required"),powerStoringConsumption:jb().min(0,"Must be greater than 0").required("Power storing consumption is required")}),duties:hx().of(ux().shape({type:Gb().oneOf(["cyclical"]).required("Type is required"),name:Gb().min(2,"Too Short!").max(30,"Too Long!").required("required!"),priority:jb().integer().min(1).required("Priority is required"),consumption:jb().min(0,"Must be positive").required("Consumption is required"),duration:jb().min(0,"Must be positive").when("type",{is:"cyclical",then:jb().required("Duration is required")}),cycles:jb().min(0,"Must be positive").when("type",{is:"cyclical",then:jb().required("Cycles is required")})}))})),powerSats:jb().integer().min(0,"Must be an integer greater than or equal to 0"),offsets:ux().shape({inclination:jb().min(0,"Must be 0-36°").max(36,"Must be 0-36°").required("inclination is required"),rightAscension:jb().min(0,"Must be 0-36°").max(36,"Must be 0-36°").required("right ascension is required"),eccentricity:jb().min(0,"Must be between 0 and 1").max(1,"Must be between 0 and 1").required("eccentricity is required"),perigee:jb().min(0,"Must be 0-36°").max(36,"Must be 0-36°").required("perigee is required"),meanAnomaly:jb().min(0,"Must be 0-360°").max(360,"Must be 0-360°").required("mean anomaly is required"),meanMotion:jb().min(0,"Must be greater than 0").max(16,"Must be less than 16").required("mean motion is required")})}),Wx={showLabel:!1},Xx={simulation:{name:"simulation",templateRows:"0.5fr 2fr 0.125fr",templateColumns:"1fr",templateAreas:"",simulationArea:" 1 / 1 / 4 / 2",headerArea:" 1 / 1 / 2 / 4",footerArea:"3 / 1 / 4 / 2"},mission:{name:"mission",templateRows:"0.75fr 1.75fr 0.125fr",templateColumns:"1fr 2.25fr",templateAreas:'"simulation parameters"\n  "select parameters"\n  "footer footer"',simulationArea:"simulation",headerArea:"",footerArea:"footer"},performance:{name:"performance",templateRows:"1fr 1.5fr 0.125fr",templateColumns:"1fr 2fr",templateAreas:'"simulation performance"\n  "summary performance"\n  "footer footer"'}},qx=$y((()=>({frame:0}))),Yx=(Zx=e=>({isPaused:!1,speed:1,cameraTarget:{name:"earth",ref:null,lock:!0,id:null},refs:new Map,satelliteOptions:new Map,view:Xx.simulation,mission:null,togglePaused:()=>e((e=>({isPaused:!e.isPaused}))),setSpeed:t=>e((()=>({speed:t}))),attachCamera:t=>e((e=>({cameraTarget:{...e.cameraTarget,ref:e.refs.get(t),id:t,name:e.satelliteOptions.get(t).name}}))),detachCamera:()=>e((e=>({cameraTarget:{...e.cameraTarget,name:"earth",ref:null,id:null}}))),toggleLabel:t=>e((e=>{const n=e.satelliteOptions.get(t);return{satelliteOptions:new Map(e.satelliteOptions).set(t,{...n,showLabel:!n.showLabel})}})),toggleAllLabels:t=>e((e=>{const n=new Map(e.satelliteOptions);return t?n.forEach(((e,t)=>n.set(t,{...e,showLabel:!0}))):n.forEach(((e,t)=>n.set(t,{...e,showLabel:!1}))),{satelliteOptions:n}})),setLockCamera:t=>e((e=>({cameraTarget:{...e.cameraTarget,lock:t}}))),storeRef:(t,n)=>e((e=>({refs:new Map(e.refs).set(t,n)}))),initializeMission:t=>e((()=>{e((()=>({mission:null})));const n=(e=>{const t=e.satellites.map((e=>Cx(e))),n=function(e){const t=e.getTime(),n=Fx/Nx;return Array.from({length:Nx},((e,r)=>t+r*n))}(t[0].params.orbit.epochdate),r=function(e){const t=[],n=[],r=[];return e.forEach((e=>{const i=Px(new Date(e));t.push(i.x),n.push(i.y),r.push(i.z)})),{x:t,y:n,z:r}}(n),i=n.map((e=>Lx(e)));t.forEach((e=>{var t,i;e.positions=zx(e.params,n),e.performance={currentDuties:(t=e.params.load.duties,i=n,i.map((e=>{let n=0;return t.forEach(((t,r)=>{"power storing"!==t.type&&t.intervals.forEach((t=>{e>=t.start&&e<=t.end&&(n=r)}))})),n}))),isEclipsed:Ux(e,r,n)}}));const a=function(e,t,n){if(0===e)return[];if(e===t)return Array.from({length:t},(()=>[n]));if(e<t){const r=Math.ceil(t/e);return Array.from({length:t},((e,t)=>t%r?[n]:null))}if(e>t){const r=Math.ceil(e/t);return Array.from({length:t},(()=>{let e=0;return Array.from({length:r},((t,r)=>{r%2==0&&(e+=1);const i={};return Object.entries(n).forEach((t=>{i[t[0]]=t[1]*e*(-1)**r})),i}))}))}}(e.spacePowers,e.satellites.length,e.offsets),o=[];e.satellites.forEach(((e,t)=>{if(a[t])return a[t].forEach((n=>o.push(function(e,t,n){const r={...t};return Object.entries(n).forEach((e=>{r[e[0]]=t[e[0]]+e[1]})),Cx({...Ax,name:e,id:_x(),orbit:r},!1)}(`Space Power ${t+1}`,e.orbit,n))))}));const s=[];o.forEach((e=>{e.positions=zx(e.params,n);const i=function(e,t,n){return t.map((t=>{const r=`${e.name} - ${t.name}`,i=n.map(((n,r)=>{const i={x:e.positions.x[r],y:e.positions.y[r],z:e.positions.z[r]},a={x:t.positions.x[r],y:t.positions.y[r],z:t.positions.z[r]};return Dx(i,a)})),a=i.map((e=>e*Tx<Ox));return{name:r,distances:i,activated:a,customerId:t.id,spacePowerId:e.id,id:_x()}}))}(e,t,n);e.performance={currentDuties:Hx(i,n),isEclipsed:Ux(e,r,n)},s.push(...i)})),t.forEach((e=>{e.performance.sources=Gx(e,s,n),e.performance={...e.performance,chargeState:Vx(e,n),chargeStateNoBeams:Vx(e,n,!1)};const[t,r]=function(e){let t=0;const n=e.performance.sources.reduce(((n,r,i)=>{const a=e.performance.currentDuties[i],o=Bx(e.params,r,a);let s=r;return"sun and beam"===r?(s="sun",t+=1):"beam"===r&&(t+=1,s="eclipsed"),o-Bx(e.params,s,a)+n}),0);return t=t/Nx*Fx/6e4,[n*(Fx/36e5)/Nx,t]}(e);e.summary={dischargeSaved:t,timeCharged:r}})),o.forEach((e=>{e.performance.sources=Gx(e,s,n),e.performance={...e.performance,chargeState:Vx(e,n)}}));const l={name:"fleet",performance:{chargeState:n.map(((e,n)=>t.reduce(((e,t)=>e+t.performance.chargeState[n]),0)/t.length)),chargeStateNoBeams:n.map(((e,n)=>t.reduce(((e,t)=>e+t.performance.chargeStateNoBeams[n]),0)/t.length))},summary:{dischargeSaved:t.reduce(((e,t)=>e+t.summary.dischargeSaved),0),timeCharged:t.reduce(((e,t)=>e+t.summary.timeCharged),0)}};return{success:!0,time:n,satellites:{customers:t,spacePowers:o,fleet:l},beams:s,sun:r,earth:i}})(t),r=[...n.satellites.customers,...n.satellites.spacePowers],i=new Map;return r.forEach((e=>{i.set(e.id,{...Wx,name:e.name,color:e.isCustomer?"red":"yellow"})})),{mission:n,satelliteOptions:i}})),setView:t=>e((()=>({view:Xx[`${t.target.value}`]})))}),Zx?eb(Zx):eb);var Zx,[Jx,$x]=cr({name:"FormControlStylesContext",errorMessage:"useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<FormControl />\" "}),[Kx,Qx]=cr({strict:!1,name:"FormControlContext"}),e_=fa((function(e,n){const r=ga("Form",e),i=Wi(e),{getRootProps:a,htmlProps:o,...s}=function(e){const{id:n,isRequired:r,isInvalid:i,isDisabled:a,isReadOnly:o,...s}=e,l=ot(),c=n||`field-${l}`,u=`${c}-label`,d=`${c}-feedback`,h=`${c}-helptext`,[f,p]=(0,t.useState)(!1),[m,g]=(0,t.useState)(!1),[v,y]=rt(),b=(0,t.useCallback)(((e={},t=null)=>({id:h,...e,ref:lr(t,(e=>{e&&g(!0)}))})),[h]),x=(0,t.useCallback)(((e={},t=null)=>({...e,ref:t,"data-focus":ee(v),"data-disabled":ee(a),"data-invalid":ee(i),"data-readonly":ee(o),id:e.id??u,htmlFor:e.htmlFor??c})),[c,a,v,i,o,u]),_=(0,t.useCallback)(((e={},t=null)=>({id:d,...e,ref:lr(t,(e=>{e&&p(!0)})),"aria-live":"polite"})),[d]),w=(0,t.useCallback)(((e={},t=null)=>({...e,...s,ref:t,role:"group"})),[s]),M=(0,t.useCallback)(((e={},t=null)=>({...e,ref:t,role:"presentation","aria-hidden":!0,children:e.children||"*"})),[]);return{isRequired:!!r,isInvalid:!!i,isReadOnly:!!o,isDisabled:!!a,isFocused:!!v,onFocus:y.on,onBlur:y.off,hasFeedbackText:f,setHasFeedbackText:p,hasHelpText:m,setHasHelpText:g,id:c,labelId:u,feedbackId:d,helpTextId:h,htmlProps:s,getHelpTextProps:b,getErrorMessageProps:_,getRootProps:w,getLabelProps:x,getRequiredIndicatorProps:M}}(i),l=ne("chakra-form-control",e.className);return t.createElement(Kx,{value:s},t.createElement(Jx,{value:r},t.createElement(va.div,{...a({},n),className:l,__css:r.container})))})),t_=fa((function(e,n){const r=Qx(),i=$x(),a=ne("chakra-form__helper-text",e.className);return t.createElement(va.div,{...null==r?void 0:r.getHelpTextProps(e,n),__css:i.helperText,className:a})}));function n_(e){const{isDisabled:t,isInvalid:n,isReadOnly:r,isRequired:i,...a}=r_(e);return{...a,disabled:t,readOnly:r,required:i,"aria-invalid":te(n),"aria-required":te(i),"aria-readonly":te(r)}}function r_(e){const t=Qx(),{id:n,disabled:r,readOnly:i,required:a,isRequired:o,isInvalid:s,isReadOnly:l,isDisabled:c,onFocus:u,onBlur:d,...h}=e,f=e["aria-describedby"]?[e["aria-describedby"]]:[];return(null==t?void 0:t.hasFeedbackText)&&(null==t?void 0:t.isInvalid)&&f.push(t.feedbackId),(null==t?void 0:t.hasHelpText)&&f.push(t.helpTextId),{...h,"aria-describedby":f.join(" ")||void 0,id:n??(null==t?void 0:t.id),isDisabled:r??c??(null==t?void 0:t.isDisabled),isReadOnly:i??l??(null==t?void 0:t.isReadOnly),isRequired:a??o??(null==t?void 0:t.isRequired),isInvalid:s??(null==t?void 0:t.isInvalid),onFocus:fe(null==t?void 0:t.onFocus,u),onBlur:fe(null==t?void 0:t.onBlur,d)}}var[i_,a_]=cr({name:"FormErrorStylesContext",errorMessage:"useFormErrorStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<FormError />\" "}),o_=fa(((e,n)=>{const r=ga("FormError",e),i=Wi(e),a=Qx();return(null==a?void 0:a.isInvalid)?t.createElement(i_,{value:r},t.createElement(va.div,{...null==a?void 0:a.getErrorMessageProps(i,n),className:ne("chakra-form__error-message",e.className),__css:{display:"flex",alignItems:"center",...r.text}})):null}));fa(((e,n)=>{const r=a_(),i=Qx();if(!(null==i?void 0:i.isInvalid))return null;const a=ne("chakra-form__error-icon",e.className);return t.createElement(Cc,{ref:n,"aria-hidden":!0,...e,__css:r.icon,className:a},t.createElement("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"}))}));var s_=fa((function(e,n){const r=ma("FormLabel",e),i=Wi(e),{className:a,children:o,requiredIndicator:s=t.createElement(l_,null),optionalIndicator:l=null,...c}=i,u=Qx(),d=(null==u?void 0:u.getLabelProps(c,n))??{ref:n,...c};return t.createElement(va.label,{...d,className:ne("chakra-form__label",i.className),__css:{display:"block",textAlign:"start",...r}},o,(null==u?void 0:u.isRequired)?s:l)})),l_=fa((function(e,n){const r=Qx(),i=$x();if(!(null==r?void 0:r.isRequired))return null;const a=ne("chakra-form__required-indicator",e.className);return t.createElement(va.span,{...null==r?void 0:r.getRequiredIndicatorProps(e,n),__css:i.requiredIndicator,className:a})})),c_=fa((function(e,n){const{children:r,placeholder:i,className:a,...o}=e;return t.createElement(va.select,{...o,ref:n,className:ne("chakra-select",a)},i&&t.createElement("option",{value:""},i),r)})),u_=fa(((e,n)=>{const r=ga("Select",e),{rootProps:i,placeholder:o,icon:s,color:l,height:c,h:u,minH:d,minHeight:h,iconColor:f,iconSize:p,...m}=Wi(e),[g,v]=B(m,Ni),y=n_(v),b={width:"100%",height:"fit-content",position:"relative",color:l},x=a()({paddingEnd:"2rem"},r.field,{_focus:{zIndex:"unset"}});return t.createElement(va.div,{className:"chakra-select__wrapper",__css:b,...g,...i},t.createElement(c_,{ref:n,height:u??c,minH:d??h,placeholder:o,...y,__css:x},e.children),t.createElement(f_,{"data-disabled":ee(y.disabled),...(f||l)&&{color:f||l},__css:r.icon,...p&&{fontSize:p}},s))})),d_=e=>t.createElement("svg",{viewBox:"0 0 24 24",...e},t.createElement("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})),h_=va("div",{baseStyle:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)"}}),f_=e=>{const{children:n=t.createElement(d_,null),...r}=e,i=(0,t.cloneElement)(n,{role:"presentation",className:"chakra-select__icon",focusable:!1,"aria-hidden":!0,style:{width:"1em",height:"1em",color:"currentColor"}});return t.createElement(h_,{...r,className:"chakra-select__icon-wrapper"},(0,t.isValidElement)(n)?i:null)};const p_="143",m_={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},g_={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},v_=0,y_=1,b_=2,x_=3,__=0,w_=1,M_=2,S_=3,A_=0,E_=1,C_=2,T_=1,R_=2,P_=0,L_=1,D_=2,I_=3,k_=4,B_=5,F_=100,N_=101,O_=102,z_=103,U_=104,H_=200,G_=201,V_=202,j_=203,W_=204,X_=205,q_=206,Y_=207,Z_=208,J_=209,$_=210,K_=0,Q_=1,ew=2,tw=3,nw=4,rw=5,iw=6,aw=7,ow=0,sw=1,lw=2,cw=0,uw=1,dw=2,hw=3,fw=4,pw=5,mw=300,gw=301,vw=302,yw=303,bw=304,xw=306,_w=1e3,ww=1001,Mw=1002,Sw=1003,Aw=1004,Ew=1004,Cw=1005,Tw=1005,Rw=1006,Pw=1007,Lw=1007,Dw=1008,Iw=1008,kw=1009,Bw=1010,Fw=1011,Nw=1012,Ow=1013,zw=1014,Uw=1015,Hw=1016,Gw=1017,Vw=1018,jw=1020,Ww=1021,Xw=1022,qw=1023,Yw=1024,Zw=1025,Jw=1026,$w=1027,Kw=1028,Qw=1029,eM=1030,tM=1031,nM=1033,rM=33776,iM=33777,aM=33778,oM=33779,sM=35840,lM=35841,cM=35842,uM=35843,dM=36196,hM=37492,fM=37496,pM=37808,mM=37809,gM=37810,vM=37811,yM=37812,bM=37813,xM=37814,_M=37815,wM=37816,MM=37817,SM=37818,AM=37819,EM=37820,CM=37821,TM=36492,RM=2200,PM=2201,LM=2202,DM=2300,IM=2301,kM=2302,BM=2400,FM=2401,NM=2402,OM=2500,zM=2501,UM=0,HM=1,GM=2,VM=3e3,jM=3001,WM=3200,XM=3201,qM=0,YM=1,ZM="",JM="srgb",$M="srgb-linear",KM=0,QM=7680,eS=7681,tS=7682,nS=7683,rS=34055,iS=34056,aS=5386,oS=512,sS=513,lS=514,cS=515,uS=516,dS=517,hS=518,fS=519,pS=35044,mS=35048,gS=35040,vS=35045,yS=35049,bS=35041,xS=35046,_S=35050,wS=35042,MS="100",SS="300 es",AS=1035;class ES{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}const CS=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let TS=1234567;const RS=Math.PI/180,PS=180/Math.PI;function LS(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(CS[255&e]+CS[e>>8&255]+CS[e>>16&255]+CS[e>>24&255]+"-"+CS[255&t]+CS[t>>8&255]+"-"+CS[t>>16&15|64]+CS[t>>24&255]+"-"+CS[63&n|128]+CS[n>>8&255]+"-"+CS[n>>16&255]+CS[n>>24&255]+CS[255&r]+CS[r>>8&255]+CS[r>>16&255]+CS[r>>24&255]).toLowerCase()}function DS(e,t,n){return Math.max(t,Math.min(n,e))}function IS(e,t){return(e%t+t)%t}function kS(e,t,n){return(1-n)*e+n*t}function BS(e){return 0==(e&e-1)&&0!==e}function FS(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function NS(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}var OS=Object.freeze({__proto__:null,DEG2RAD:RS,RAD2DEG:PS,generateUUID:LS,clamp:DS,euclideanModulo:IS,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:kS,damp:function(e,t,n,r){return kS(e,t,1-Math.exp(-n*r))},pingpong:function(e,t=1){return t-Math.abs(IS(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(TS=e);let t=TS+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*RS},radToDeg:function(e){return e*PS},isPowerOfTwo:BS,ceilPowerOfTwo:FS,floorPowerOfTwo:NS,setQuaternionFromProperEuler:function(e,t,n,r,i){const a=Math.cos,o=Math.sin,s=a(n/2),l=o(n/2),c=a((t+r)/2),u=o((t+r)/2),d=a((t-r)/2),h=o((t-r)/2),f=a((r-t)/2),p=o((r-t)/2);switch(i){case"XYX":e.set(s*u,l*d,l*h,s*c);break;case"YZY":e.set(l*h,s*u,l*d,s*c);break;case"ZXZ":e.set(l*d,l*h,s*u,s*c);break;case"XZX":e.set(s*u,l*p,l*f,s*c);break;case"YXY":e.set(l*f,s*u,l*p,s*c);break;case"ZYZ":e.set(l*p,l*f,s*u,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:function(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}},denormalize:function(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}});class zS{constructor(e=0,t=0){zS.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class US{constructor(){US.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,r,i,a,o,s,l){const c=this.elements;return c[0]=e,c[1]=r,c[2]=o,c[3]=t,c[4]=i,c[5]=s,c[6]=n,c[7]=a,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[3],s=n[6],l=n[1],c=n[4],u=n[7],d=n[2],h=n[5],f=n[8],p=r[0],m=r[3],g=r[6],v=r[1],y=r[4],b=r[7],x=r[2],_=r[5],w=r[8];return i[0]=a*p+o*v+s*x,i[3]=a*m+o*y+s*_,i[6]=a*g+o*b+s*w,i[1]=l*p+c*v+u*x,i[4]=l*m+c*y+u*_,i[7]=l*g+c*b+u*w,i[2]=d*p+h*v+f*x,i[5]=d*m+h*y+f*_,i[8]=d*g+h*b+f*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8];return t*a*c-t*o*l-n*i*c+n*o*s+r*i*l-r*a*s}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=c*a-o*l,d=o*s-c*i,h=l*i-a*s,f=t*u+n*d+r*h;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);const p=1/f;return e[0]=u*p,e[1]=(r*l-c*n)*p,e[2]=(o*n-r*a)*p,e[3]=d*p,e[4]=(c*t-r*s)*p,e[5]=(r*i-o*t)*p,e[6]=h*p,e[7]=(n*s-l*t)*p,e[8]=(a*t-n*i)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,a,o){const s=Math.cos(i),l=Math.sin(i);return this.set(n*s,n*l,-n*(s*a+l*o)+a+e,-r*l,r*s,-r*(-l*a+s*o)+o+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],a=r[3],o=r[6],s=r[1],l=r[4],c=r[7];return r[0]=t*i+n*s,r[3]=t*a+n*l,r[6]=t*o+n*c,r[1]=-n*i+t*s,r[4]=-n*a+t*l,r[7]=-n*o+t*c,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function HS(e){for(let t=e.length-1;t>=0;--t)if(e[t]>65535)return!0;return!1}const GS={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function VS(e,t){return new GS[e](t)}function jS(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function WS(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function XS(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}const qS={[JM]:{[$M]:WS},[$M]:{[JM]:XS}},YS={legacyMode:!0,get workingColorSpace(){return $M},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(this.legacyMode||t===n||!t||!n)return e;if(qS[t]&&void 0!==qS[t][n]){const r=qS[t][n];return e.r=r(e.r),e.g=r(e.g),e.b=r(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},ZS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},JS={r:0,g:0,b:0},$S={h:0,s:0,l:0},KS={h:0,s:0,l:0};function QS(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function eA(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}class tA{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=JM){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,YS.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=$M){return this.r=e,this.g=t,this.b=n,YS.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=$M){if(e=IS(e,1),t=DS(t,0,1),n=DS(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=QS(i,r,e+1/3),this.g=QS(i,r,e),this.b=QS(i,r,e-1/3)}return YS.toWorkingColorSpace(this,r),this}setStyle(e,t=JM){function n(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e;const i=r[1],a=r[2];switch(i){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,YS.toWorkingColorSpace(this,t),n(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,YS.toWorkingColorSpace(this,t),n(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const r=parseFloat(e[1])/360,i=parseInt(e[2],10)/100,a=parseInt(e[3],10)/100;return n(e[4]),this.setHSL(r,i,a,t)}}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const e=r[1],n=e.length;if(3===n)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,YS.toWorkingColorSpace(this,t),this;if(6===n)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,YS.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=JM){const n=ZS[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=WS(e.r),this.g=WS(e.g),this.b=WS(e.b),this}copyLinearToSRGB(e){return this.r=XS(e.r),this.g=XS(e.g),this.b=XS(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=JM){return YS.fromWorkingColorSpace(eA(this,JS),e),DS(255*JS.r,0,255)<<16^DS(255*JS.g,0,255)<<8^DS(255*JS.b,0,255)<<0}getHexString(e=JM){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=$M){YS.fromWorkingColorSpace(eA(this,JS),t);const n=JS.r,r=JS.g,i=JS.b,a=Math.max(n,r,i),o=Math.min(n,r,i);let s,l;const c=(o+a)/2;if(o===a)s=0,l=0;else{const e=a-o;switch(l=c<=.5?e/(a+o):e/(2-a-o),a){case n:s=(r-i)/e+(r<i?6:0);break;case r:s=(i-n)/e+2;break;case i:s=(n-r)/e+4}s/=6}return e.h=s,e.s=l,e.l=c,e}getRGB(e,t=$M){return YS.fromWorkingColorSpace(eA(this,JS),t),e.r=JS.r,e.g=JS.g,e.b=JS.b,e}getStyle(e=JM){return YS.fromWorkingColorSpace(eA(this,JS),e),e!==JM?`color(${e} ${JS.r} ${JS.g} ${JS.b})`:`rgb(${255*JS.r|0},${255*JS.g|0},${255*JS.b|0})`}offsetHSL(e,t,n){return this.getHSL($S),$S.h+=e,$S.s+=t,$S.l+=n,this.setHSL($S.h,$S.s,$S.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL($S),e.getHSL(KS);const n=kS($S.h,KS.h,t),r=kS($S.s,KS.s,t),i=kS($S.l,KS.l,t);return this.setHSL(n,r,i),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}let nA;tA.NAMES=ZS;class rA{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===nA&&(nA=jS("canvas")),nA.width=e.width,nA.height=e.height;const n=nA.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=nA}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=jS("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let e=0;e<i.length;e++)i[e]=255*WS(i[e]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*WS(t[e]/255)):t[e]=WS(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class iA{constructor(e=null){this.isSource=!0,this.uuid=LS(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(aA(r[t].image)):e.push(aA(r[t]))}else e=aA(r);n.url=e}return t||(e.images[this.uuid]=n),n}}function aA(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?rA.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let oA=0;class sA extends ES{constructor(e=sA.DEFAULT_IMAGE,t=sA.DEFAULT_MAPPING,n=ww,r=ww,i=Rw,a=Dw,o=qw,s=kw,l=1,c=VM){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:oA++}),this.uuid=LS(),this.name="",this.source=new iA(e),this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=a,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=s,this.offset=new zS(0,0),this.repeat=new zS(1,1),this.center=new zS(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new US,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==mw)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case _w:e.x=e.x-Math.floor(e.x);break;case ww:e.x=e.x<0?0:1;break;case Mw:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case _w:e.y=e.y-Math.floor(e.y);break;case ww:e.y=e.y<0?0:1;break;case Mw:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}sA.DEFAULT_IMAGE=null,sA.DEFAULT_MAPPING=mw;class lA{constructor(e=0,t=0,n=0,r=1){lA.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const a=.01,o=.1,s=e.elements,l=s[0],c=s[4],u=s[8],d=s[1],h=s[5],f=s[9],p=s[2],m=s[6],g=s[10];if(Math.abs(c-d)<a&&Math.abs(u-p)<a&&Math.abs(f-m)<a){if(Math.abs(c+d)<o&&Math.abs(u+p)<o&&Math.abs(f+m)<o&&Math.abs(l+h+g-3)<o)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,s=(h+1)/2,v=(g+1)/2,y=(c+d)/4,b=(u+p)/4,x=(f+m)/4;return e>s&&e>v?e<a?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=y/n,i=b/n):s>v?s<a?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(s),n=y/r,i=x/r):v<a?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=b/i,r=x/i),this.set(n,r,i,t),this}let v=Math.sqrt((m-f)*(m-f)+(u-p)*(u-p)+(d-c)*(d-c));return Math.abs(v)<.001&&(v=1),this.x=(m-f)/v,this.y=(u-p)/v,this.z=(d-c)/v,this.w=Math.acos((l+h+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class cA extends ES{constructor(e,t,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new lA(0,0,e,t),this.scissorTest=!1,this.viewport=new lA(0,0,e,t);const r={width:e,height:t,depth:1};this.texture=new sA(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Rw,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new iA(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class uA extends sA{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Sw,this.minFilter=Sw,this.wrapR=ww,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class dA extends cA{constructor(e,t,n){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new uA(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class hA extends sA{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Sw,this.minFilter=Sw,this.wrapR=ww,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class fA extends cA{constructor(e,t,n){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new hA(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class pA extends cA{constructor(e,t,n,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const i=this.texture;this.texture=[];for(let e=0;e<n;e++)this.texture[e]=i.clone(),this.texture[e].isRenderTargetTexture=!0}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class mA{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,i,a,o){let s=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3];const d=i[a+0],h=i[a+1],f=i[a+2],p=i[a+3];if(0===o)return e[t+0]=s,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===o)return e[t+0]=d,e[t+1]=h,e[t+2]=f,void(e[t+3]=p);if(u!==p||s!==d||l!==h||c!==f){let e=1-o;const t=s*d+l*h+c*f+u*p,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),a=Math.atan2(i,t*n);e=Math.sin(e*a)/i,o=Math.sin(o*a)/i}const i=o*n;if(s=s*e+d*i,l=l*e+h*i,c=c*e+f*i,u=u*e+p*i,e===1-o){const e=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=e,l*=e,c*=e,u*=e}}e[t]=s,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,r,i,a){const o=n[r],s=n[r+1],l=n[r+2],c=n[r+3],u=i[a],d=i[a+1],h=i[a+2],f=i[a+3];return e[t]=o*f+c*u+s*h-l*d,e[t+1]=s*f+c*d+l*u-o*h,e[t+2]=l*f+c*h+o*d-s*u,e[t+3]=c*f-o*u-s*d-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,r=e._y,i=e._z,a=e._order,o=Math.cos,s=Math.sin,l=o(n/2),c=o(r/2),u=o(i/2),d=s(n/2),h=s(r/2),f=s(i/2);switch(a){case"XYZ":this._x=d*c*u+l*h*f,this._y=l*h*u-d*c*f,this._z=l*c*f+d*h*u,this._w=l*c*u-d*h*f;break;case"YXZ":this._x=d*c*u+l*h*f,this._y=l*h*u-d*c*f,this._z=l*c*f-d*h*u,this._w=l*c*u+d*h*f;break;case"ZXY":this._x=d*c*u-l*h*f,this._y=l*h*u+d*c*f,this._z=l*c*f+d*h*u,this._w=l*c*u-d*h*f;break;case"ZYX":this._x=d*c*u-l*h*f,this._y=l*h*u+d*c*f,this._z=l*c*f-d*h*u,this._w=l*c*u+d*h*f;break;case"YZX":this._x=d*c*u+l*h*f,this._y=l*h*u+d*c*f,this._z=l*c*f-d*h*u,this._w=l*c*u-d*h*f;break;case"XZY":this._x=d*c*u-l*h*f,this._y=l*h*u-d*c*f,this._z=l*c*f+d*h*u,this._w=l*c*u+d*h*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],o=t[5],s=t[9],l=t[2],c=t[6],u=t[10],d=n+o+u;if(d>0){const e=.5/Math.sqrt(d+1);this._w=.25/e,this._x=(c-s)*e,this._y=(i-l)*e,this._z=(a-r)*e}else if(n>o&&n>u){const e=2*Math.sqrt(1+n-o-u);this._w=(c-s)/e,this._x=.25*e,this._y=(r+a)/e,this._z=(i+l)/e}else if(o>u){const e=2*Math.sqrt(1+o-n-u);this._w=(i-l)/e,this._x=(r+a)/e,this._y=.25*e,this._z=(s+c)/e}else{const e=2*Math.sqrt(1+u-n-o);this._w=(a-r)/e,this._x=(i+l)/e,this._y=(s+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(DS(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,a=e._w,o=t._x,s=t._y,l=t._z,c=t._w;return this._x=n*c+a*o+r*l-i*s,this._y=r*c+a*s+i*o-n*l,this._z=i*c+a*l+n*s-r*o,this._w=a*c-n*o-r*s-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,a=this._w;let o=a*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;const s=1-o*o;if(s<=Number.EPSILON){const e=1-t;return this._w=e*a+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(s),c=Math.atan2(l,o),u=Math.sin((1-t)*c)/l,d=Math.sin(t*c)/l;return this._w=a*u+this._w*d,this._x=n*u+this._x*d,this._y=r*u+this._y*d,this._z=i*u+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class gA{constructor(e=0,t=0,n=0){gA.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(yA.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(yA.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,l=s*t+a*r-o*n,c=s*n+o*t-i*r,u=s*r+i*n-a*t,d=-i*t-a*n-o*r;return this.x=l*s+d*-i+c*-o-u*-a,this.y=c*s+d*-a+u*-i-l*-o,this.z=u*s+d*-o+l*-a-c*-i,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return vA.copy(this).projectOnVector(e),this.sub(vA)}reflect(e){return this.sub(vA.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(DS(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const vA=new gA,yA=new mA;class bA{constructor(e=new gA(1/0,1/0,1/0),t=new gA(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0;for(let s=0,l=e.length;s<l;s+=3){const l=e[s],c=e[s+1],u=e[s+2];l<t&&(t=l),c<n&&(n=c),u<r&&(r=u),l>i&&(i=l),c>a&&(a=c),u>o&&(o=u)}return this.min.set(t,n,r),this.max.set(i,a,o),this}setFromBufferAttribute(e){let t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0;for(let s=0,l=e.count;s<l;s++){const l=e.getX(s),c=e.getY(s),u=e.getZ(s);l<t&&(t=l),c<n&&(n=c),u<r&&(r=u),l>i&&(i=l),c>a&&(a=c),u>o&&(o=u)}return this.min.set(t,n,r),this.max.set(i,a,o),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=_A.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n)if(t&&null!=n.attributes&&void 0!==n.attributes.position){const t=n.attributes.position;for(let n=0,r=t.count;n<r;n++)_A.fromBufferAttribute(t,n).applyMatrix4(e.matrixWorld),this.expandByPoint(_A)}else null===n.boundingBox&&n.computeBoundingBox(),wA.copy(n.boundingBox),wA.applyMatrix4(e.matrixWorld),this.union(wA);const r=e.children;for(let e=0,n=r.length;e<n;e++)this.expandByObject(r[e],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,_A),_A.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(RA),PA.subVectors(this.max,RA),MA.subVectors(e.a,RA),SA.subVectors(e.b,RA),AA.subVectors(e.c,RA),EA.subVectors(SA,MA),CA.subVectors(AA,SA),TA.subVectors(MA,AA);let t=[0,-EA.z,EA.y,0,-CA.z,CA.y,0,-TA.z,TA.y,EA.z,0,-EA.x,CA.z,0,-CA.x,TA.z,0,-TA.x,-EA.y,EA.x,0,-CA.y,CA.x,0,-TA.y,TA.x,0];return!!IA(t,MA,SA,AA,PA)&&(t=[1,0,0,0,1,0,0,0,1],!!IA(t,MA,SA,AA,PA)&&(LA.crossVectors(EA,CA),t=[LA.x,LA.y,LA.z],IA(t,MA,SA,AA,PA)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return _A.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(_A).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(xA[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),xA[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),xA[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),xA[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),xA[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),xA[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),xA[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),xA[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(xA)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const xA=[new gA,new gA,new gA,new gA,new gA,new gA,new gA,new gA],_A=new gA,wA=new bA,MA=new gA,SA=new gA,AA=new gA,EA=new gA,CA=new gA,TA=new gA,RA=new gA,PA=new gA,LA=new gA,DA=new gA;function IA(e,t,n,r,i){for(let a=0,o=e.length-3;a<=o;a+=3){DA.fromArray(e,a);const o=i.x*Math.abs(DA.x)+i.y*Math.abs(DA.y)+i.z*Math.abs(DA.z),s=t.dot(DA),l=n.dot(DA),c=r.dot(DA);if(Math.max(-Math.max(s,l,c),Math.min(s,l,c))>o)return!1}return!0}const kA=new bA,BA=new gA,FA=new gA,NA=new gA;class OA{constructor(e=new gA,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):kA.setFromPoints(e).getCenter(n);let r=0;for(let t=0,i=e.length;t<i;t++)r=Math.max(r,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){NA.subVectors(e,this.center);const t=NA.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.add(NA.multiplyScalar(n/e)),this.radius+=n}return this}union(e){return!0===this.center.equals(e.center)?FA.set(0,0,1).multiplyScalar(e.radius):FA.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(BA.copy(e.center).add(FA)),this.expandByPoint(BA.copy(e.center).sub(FA)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const zA=new gA,UA=new gA,HA=new gA,GA=new gA,VA=new gA,jA=new gA,WA=new gA;class XA{constructor(e=new gA,t=new gA(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,zA)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=zA.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(zA.copy(this.direction).multiplyScalar(t).add(this.origin),zA.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){UA.copy(e).add(t).multiplyScalar(.5),HA.copy(t).sub(e).normalize(),GA.copy(this.origin).sub(UA);const i=.5*e.distanceTo(t),a=-this.direction.dot(HA),o=GA.dot(this.direction),s=-GA.dot(HA),l=GA.lengthSq(),c=Math.abs(1-a*a);let u,d,h,f;if(c>0)if(u=a*s-o,d=a*o-s,f=i*c,u>=0)if(d>=-f)if(d<=f){const e=1/c;u*=e,d*=e,h=u*(u+a*d+2*o)+d*(a*u+d+2*s)+l}else d=i,u=Math.max(0,-(a*d+o)),h=-u*u+d*(d+2*s)+l;else d=-i,u=Math.max(0,-(a*d+o)),h=-u*u+d*(d+2*s)+l;else d<=-f?(u=Math.max(0,-(-a*i+o)),d=u>0?-i:Math.min(Math.max(-i,-s),i),h=-u*u+d*(d+2*s)+l):d<=f?(u=0,d=Math.min(Math.max(-i,-s),i),h=d*(d+2*s)+l):(u=Math.max(0,-(a*i+o)),d=u>0?i:Math.min(Math.max(-i,-s),i),h=-u*u+d*(d+2*s)+l);else d=a>0?-i:i,u=Math.max(0,-(a*d+o)),h=-u*u+d*(d+2*s)+l;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),r&&r.copy(HA).multiplyScalar(d).add(UA),h}intersectSphere(e,t){zA.subVectors(e.center,this.origin);const n=zA.dot(this.direction),r=zA.dot(zA)-n*n,i=e.radius*e.radius;if(r>i)return null;const a=Math.sqrt(i-r),o=n-a,s=n+a;return o<0&&s<0?null:o<0?this.at(s,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,a,o,s;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,d=this.origin;return l>=0?(n=(e.min.x-d.x)*l,r=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,r=(e.min.x-d.x)*l),c>=0?(i=(e.min.y-d.y)*c,a=(e.max.y-d.y)*c):(i=(e.max.y-d.y)*c,a=(e.min.y-d.y)*c),n>a||i>r?null:((i>n||n!=n)&&(n=i),(a<r||r!=r)&&(r=a),u>=0?(o=(e.min.z-d.z)*u,s=(e.max.z-d.z)*u):(o=(e.max.z-d.z)*u,s=(e.min.z-d.z)*u),n>s||o>r?null:((o>n||n!=n)&&(n=o),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,zA)}intersectTriangle(e,t,n,r,i){VA.subVectors(t,e),jA.subVectors(n,e),WA.crossVectors(VA,jA);let a,o=this.direction.dot(WA);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}GA.subVectors(this.origin,e);const s=a*this.direction.dot(jA.crossVectors(GA,jA));if(s<0)return null;const l=a*this.direction.dot(VA.cross(GA));if(l<0)return null;if(s+l>o)return null;const c=-a*GA.dot(WA);return c<0?null:this.at(c/o,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class qA{constructor(){qA.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,r,i,a,o,s,l,c,u,d,h,f,p,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=a,g[9]=o,g[13]=s,g[2]=l,g[6]=c,g[10]=u,g[14]=d,g[3]=h,g[7]=f,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new qA).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/YA.setFromMatrixColumn(e,0).length(),i=1/YA.setFromMatrixColumn(e,1).length(),a=1/YA.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){const e=a*c,n=a*u,r=o*c,i=o*u;t[0]=s*c,t[4]=-s*u,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-o*s,t[2]=i-e*l,t[6]=r+n*l,t[10]=a*s}else if("YXZ"===e.order){const e=s*c,n=s*u,r=l*c,i=l*u;t[0]=e+i*o,t[4]=r*o-n,t[8]=a*l,t[1]=a*u,t[5]=a*c,t[9]=-o,t[2]=n*o-r,t[6]=i+e*o,t[10]=a*s}else if("ZXY"===e.order){const e=s*c,n=s*u,r=l*c,i=l*u;t[0]=e-i*o,t[4]=-a*u,t[8]=r+n*o,t[1]=n+r*o,t[5]=a*c,t[9]=i-e*o,t[2]=-a*l,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){const e=a*c,n=a*u,r=o*c,i=o*u;t[0]=s*c,t[4]=r*l-n,t[8]=e*l+i,t[1]=s*u,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){const e=a*s,n=a*l,r=o*s,i=o*l;t[0]=s*c,t[4]=i-e*u,t[8]=r*u+n,t[1]=u,t[5]=a*c,t[9]=-o*c,t[2]=-l*c,t[6]=n*u+r,t[10]=e-i*u}else if("XZY"===e.order){const e=a*s,n=a*l,r=o*s,i=o*l;t[0]=s*c,t[4]=-u,t[8]=l*c,t[1]=e*u+i,t[5]=a*c,t[9]=n*u-r,t[2]=r*u-n,t[6]=o*c,t[10]=i*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(JA,e,$A)}lookAt(e,t,n){const r=this.elements;return eE.subVectors(e,t),0===eE.lengthSq()&&(eE.z=1),eE.normalize(),KA.crossVectors(n,eE),0===KA.lengthSq()&&(1===Math.abs(n.z)?eE.x+=1e-4:eE.z+=1e-4,eE.normalize(),KA.crossVectors(n,eE)),KA.normalize(),QA.crossVectors(eE,KA),r[0]=KA.x,r[4]=QA.x,r[8]=eE.x,r[1]=KA.y,r[5]=QA.y,r[9]=eE.y,r[2]=KA.z,r[6]=QA.z,r[10]=eE.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[4],s=n[8],l=n[12],c=n[1],u=n[5],d=n[9],h=n[13],f=n[2],p=n[6],m=n[10],g=n[14],v=n[3],y=n[7],b=n[11],x=n[15],_=r[0],w=r[4],M=r[8],S=r[12],A=r[1],E=r[5],C=r[9],T=r[13],R=r[2],P=r[6],L=r[10],D=r[14],I=r[3],k=r[7],B=r[11],F=r[15];return i[0]=a*_+o*A+s*R+l*I,i[4]=a*w+o*E+s*P+l*k,i[8]=a*M+o*C+s*L+l*B,i[12]=a*S+o*T+s*D+l*F,i[1]=c*_+u*A+d*R+h*I,i[5]=c*w+u*E+d*P+h*k,i[9]=c*M+u*C+d*L+h*B,i[13]=c*S+u*T+d*D+h*F,i[2]=f*_+p*A+m*R+g*I,i[6]=f*w+p*E+m*P+g*k,i[10]=f*M+p*C+m*L+g*B,i[14]=f*S+p*T+m*D+g*F,i[3]=v*_+y*A+b*R+x*I,i[7]=v*w+y*E+b*P+x*k,i[11]=v*M+y*C+b*L+x*B,i[15]=v*S+y*T+b*D+x*F,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],o=e[5],s=e[9],l=e[13],c=e[2],u=e[6],d=e[10],h=e[14];return e[3]*(+i*s*u-r*l*u-i*o*d+n*l*d+r*o*h-n*s*h)+e[7]*(+t*s*h-t*l*d+i*a*d-r*a*h+r*l*c-i*s*c)+e[11]*(+t*l*u-t*o*h-i*a*u+n*a*h+i*o*c-n*l*c)+e[15]*(-r*o*c-t*s*u+t*o*d+r*a*u-n*a*d+n*s*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11],f=e[12],p=e[13],m=e[14],g=e[15],v=u*m*l-p*d*l+p*s*h-o*m*h-u*s*g+o*d*g,y=f*d*l-c*m*l-f*s*h+a*m*h+c*s*g-a*d*g,b=c*p*l-f*u*l+f*o*h-a*p*h-c*o*g+a*u*g,x=f*u*s-c*p*s-f*o*d+a*p*d+c*o*m-a*u*m,_=t*v+n*y+r*b+i*x;if(0===_)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/_;return e[0]=v*w,e[1]=(p*d*i-u*m*i-p*r*h+n*m*h+u*r*g-n*d*g)*w,e[2]=(o*m*i-p*s*i+p*r*l-n*m*l-o*r*g+n*s*g)*w,e[3]=(u*s*i-o*d*i-u*r*l+n*d*l+o*r*h-n*s*h)*w,e[4]=y*w,e[5]=(c*m*i-f*d*i+f*r*h-t*m*h-c*r*g+t*d*g)*w,e[6]=(f*s*i-a*m*i-f*r*l+t*m*l+a*r*g-t*s*g)*w,e[7]=(a*d*i-c*s*i+c*r*l-t*d*l-a*r*h+t*s*h)*w,e[8]=b*w,e[9]=(f*u*i-c*p*i-f*n*h+t*p*h+c*n*g-t*u*g)*w,e[10]=(a*p*i-f*o*i+f*n*l-t*p*l-a*n*g+t*o*g)*w,e[11]=(c*o*i-a*u*i-c*n*l+t*u*l+a*n*h-t*o*h)*w,e[12]=x*w,e[13]=(c*p*r-f*u*r+f*n*d-t*p*d-c*n*m+t*u*m)*w,e[14]=(f*o*r-a*p*r-f*n*s+t*p*s+a*n*m-t*o*m)*w,e[15]=(a*u*r-c*o*r+c*n*s-t*u*s-a*n*d+t*o*d)*w,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,o=e.y,s=e.z,l=i*a,c=i*o;return this.set(l*a+n,l*o-r*s,l*s+r*o,0,l*o+r*s,c*o+n,c*s-r*a,0,l*s-r*o,c*s+r*a,i*s*s+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,a){return this.set(1,n,i,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,a=t._y,o=t._z,s=t._w,l=i+i,c=a+a,u=o+o,d=i*l,h=i*c,f=i*u,p=a*c,m=a*u,g=o*u,v=s*l,y=s*c,b=s*u,x=n.x,_=n.y,w=n.z;return r[0]=(1-(p+g))*x,r[1]=(h+b)*x,r[2]=(f-y)*x,r[3]=0,r[4]=(h-b)*_,r[5]=(1-(d+g))*_,r[6]=(m+v)*_,r[7]=0,r[8]=(f+y)*w,r[9]=(m-v)*w,r[10]=(1-(d+p))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=YA.set(r[0],r[1],r[2]).length();const a=YA.set(r[4],r[5],r[6]).length(),o=YA.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],ZA.copy(this);const s=1/i,l=1/a,c=1/o;return ZA.elements[0]*=s,ZA.elements[1]*=s,ZA.elements[2]*=s,ZA.elements[4]*=l,ZA.elements[5]*=l,ZA.elements[6]*=l,ZA.elements[8]*=c,ZA.elements[9]*=c,ZA.elements[10]*=c,t.setFromRotationMatrix(ZA),n.x=i,n.y=a,n.z=o,this}makePerspective(e,t,n,r,i,a){const o=this.elements,s=2*i/(t-e),l=2*i/(n-r),c=(t+e)/(t-e),u=(n+r)/(n-r),d=-(a+i)/(a-i),h=-2*a*i/(a-i);return o[0]=s,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=l,o[9]=u,o[13]=0,o[2]=0,o[6]=0,o[10]=d,o[14]=h,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,n,r,i,a){const o=this.elements,s=1/(t-e),l=1/(n-r),c=1/(a-i),u=(t+e)*s,d=(n+r)*l,h=(a+i)*c;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-u,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-d,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-h,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const YA=new gA,ZA=new qA,JA=new gA(0,0,0),$A=new gA(1,1,1),KA=new gA,QA=new gA,eE=new gA,tE=new qA,nE=new mA;class rE{constructor(e=0,t=0,n=0,r=rE.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,i=r[0],a=r[4],o=r[8],s=r[1],l=r[5],c=r[9],u=r[2],d=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(DS(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-DS(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,h),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-u,i),this._z=0);break;case"ZXY":this._x=Math.asin(DS(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,h),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-DS(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(DS(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,i)):(this._x=0,this._y=Math.atan2(o,h));break;case"XZY":this._z=Math.asin(-DS(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return tE.makeRotationFromQuaternion(e),this.setFromRotationMatrix(tE,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return nE.setFromEuler(this),this.setFromQuaternion(nE,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}rE.DefaultOrder="XYZ",rE.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class iE{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let aE=0;const oE=new gA,sE=new mA,lE=new qA,cE=new gA,uE=new gA,dE=new gA,hE=new mA,fE=new gA(1,0,0),pE=new gA(0,1,0),mE=new gA(0,0,1),gE={type:"added"},vE={type:"removed"};class yE extends ES{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:aE++}),this.uuid=LS(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=yE.DefaultUp.clone();const e=new gA,t=new rE,n=new mA,r=new gA(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new qA},normalMatrix:{value:new US}}),this.matrix=new qA,this.matrixWorld=new qA,this.matrixAutoUpdate=yE.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new iE,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return sE.setFromAxisAngle(e,t),this.quaternion.multiply(sE),this}rotateOnWorldAxis(e,t){return sE.setFromAxisAngle(e,t),this.quaternion.premultiply(sE),this}rotateX(e){return this.rotateOnAxis(fE,e)}rotateY(e){return this.rotateOnAxis(pE,e)}rotateZ(e){return this.rotateOnAxis(mE,e)}translateOnAxis(e,t){return oE.copy(e).applyQuaternion(this.quaternion),this.position.add(oE.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(fE,e)}translateY(e){return this.translateOnAxis(pE,e)}translateZ(e){return this.translateOnAxis(mE,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(lE.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?cE.copy(e):cE.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),uE.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?lE.lookAt(uE,cE,this.up):lE.lookAt(cE,uE,this.up),this.quaternion.setFromRotationMatrix(lE),r&&(lE.extractRotation(r.matrixWorld),sE.setFromRotationMatrix(lE),this.quaternion.premultiply(sE.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(gE)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(vE)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(vE)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),lE.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),lE.multiply(e.parent.matrixWorld)),e.applyMatrix4(lE),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(uE,e,dE),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(uE,hE,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=a(e.geometries),r=a(e.materials),i=a(e.textures),o=a(e.images),s=a(e.shapes),l=a(e.skeletons),c=a(e.animations),u=a(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),o.length>0&&(n.images=o),s.length>0&&(n.shapes=s),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=r,n;function a(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const n=e.children[t];this.add(n.clone())}return this}}yE.DefaultUp=new gA(0,1,0),yE.DefaultMatrixAutoUpdate=!0;const bE=new gA,xE=new gA,_E=new gA,wE=new gA,ME=new gA,SE=new gA,AE=new gA,EE=new gA,CE=new gA,TE=new gA;class RE{constructor(e=new gA,t=new gA,n=new gA){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),bE.subVectors(e,t),r.cross(bE);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){bE.subVectors(r,t),xE.subVectors(n,t),_E.subVectors(e,t);const a=bE.dot(bE),o=bE.dot(xE),s=bE.dot(_E),l=xE.dot(xE),c=xE.dot(_E),u=a*l-o*o;if(0===u)return i.set(-2,-1,-1);const d=1/u,h=(l*s-o*c)*d,f=(a*c-o*s)*d;return i.set(1-h-f,f,h)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,wE),wE.x>=0&&wE.y>=0&&wE.x+wE.y<=1}static getUV(e,t,n,r,i,a,o,s){return this.getBarycoord(e,t,n,r,wE),s.set(0,0),s.addScaledVector(i,wE.x),s.addScaledVector(a,wE.y),s.addScaledVector(o,wE.z),s}static isFrontFacing(e,t,n,r){return bE.subVectors(n,t),xE.subVectors(e,t),bE.cross(xE).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return bE.subVectors(this.c,this.b),xE.subVectors(this.a,this.b),.5*bE.cross(xE).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return RE.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return RE.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return RE.getUV(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return RE.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return RE.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let a,o;ME.subVectors(r,n),SE.subVectors(i,n),EE.subVectors(e,n);const s=ME.dot(EE),l=SE.dot(EE);if(s<=0&&l<=0)return t.copy(n);CE.subVectors(e,r);const c=ME.dot(CE),u=SE.dot(CE);if(c>=0&&u<=c)return t.copy(r);const d=s*u-c*l;if(d<=0&&s>=0&&c<=0)return a=s/(s-c),t.copy(n).addScaledVector(ME,a);TE.subVectors(e,i);const h=ME.dot(TE),f=SE.dot(TE);if(f>=0&&h<=f)return t.copy(i);const p=h*l-s*f;if(p<=0&&l>=0&&f<=0)return o=l/(l-f),t.copy(n).addScaledVector(SE,o);const m=c*f-h*u;if(m<=0&&u-c>=0&&h-f>=0)return AE.subVectors(i,r),o=(u-c)/(u-c+(h-f)),t.copy(r).addScaledVector(AE,o);const g=1/(m+p+d);return a=p*g,o=d*g,t.copy(n).addScaledVector(ME,a).addScaledVector(SE,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let PE=0;class LE extends ES{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:PE++}),this.uuid=LS(),this.name="",this.type="Material",this.blending=L_,this.side=A_,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=W_,this.blendDst=X_,this.blendEquation=F_,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=tw,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=fS,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=QM,this.stencilZFail=QM,this.stencilZPass=QM,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===T_;continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==L_&&(n.blending=this.blending),this.side!==A_&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class DE extends LE{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new tA(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ow,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const IE=new gA,kE=new zS;class BE{constructor(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=pS,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),i=new tA),t[n++]=i.r,t[n++]=i.g,t[n++]=i.b}return this}copyVector2sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),i=new zS),t[n++]=i.x,t[n++]=i.y}return this}copyVector3sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),i=new gA),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z}return this}copyVector4sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),i=new lA),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z,t[n++]=i.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)kE.fromBufferAttribute(this,t),kE.applyMatrix3(e),this.setXY(t,kE.x,kE.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)IE.fromBufferAttribute(this,t),IE.applyMatrix3(e),this.setXYZ(t,IE.x,IE.y,IE.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)IE.fromBufferAttribute(this,t),IE.applyMatrix4(e),this.setXYZ(t,IE.x,IE.y,IE.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)IE.fromBufferAttribute(this,t),IE.applyNormalMatrix(e),this.setXYZ(t,IE.x,IE.y,IE.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)IE.fromBufferAttribute(this,t),IE.transformDirection(e),this.setXYZ(t,IE.x,IE.y,IE.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==pS&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}class FE extends BE{constructor(e,t,n){super(new Int8Array(e),t,n)}}class NE extends BE{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class OE extends BE{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class zE extends BE{constructor(e,t,n){super(new Int16Array(e),t,n)}}class UE extends BE{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class HE extends BE{constructor(e,t,n){super(new Int32Array(e),t,n)}}class GE extends BE{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class VE extends BE{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}}class jE extends BE{constructor(e,t,n){super(new Float32Array(e),t,n)}}class WE extends BE{constructor(e,t,n){super(new Float64Array(e),t,n)}}let XE=0;const qE=new qA,YE=new yE,ZE=new gA,JE=new bA,$E=new bA,KE=new gA;class QE extends ES{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:XE++}),this.uuid=LS(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(HS(e)?GE:UE)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new US).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return qE.makeRotationFromQuaternion(e),this.applyMatrix4(qE),this}rotateX(e){return qE.makeRotationX(e),this.applyMatrix4(qE),this}rotateY(e){return qE.makeRotationY(e),this.applyMatrix4(qE),this}rotateZ(e){return qE.makeRotationZ(e),this.applyMatrix4(qE),this}translate(e,t,n){return qE.makeTranslation(e,t,n),this.applyMatrix4(qE),this}scale(e,t,n){return qE.makeScale(e,t,n),this.applyMatrix4(qE),this}lookAt(e){return YE.lookAt(e),YE.updateMatrix(),this.applyMatrix4(YE.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ZE).negate(),this.translate(ZE.x,ZE.y,ZE.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new jE(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new bA);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new gA(-1/0,-1/0,-1/0),new gA(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];JE.setFromBufferAttribute(n),this.morphTargetsRelative?(KE.addVectors(this.boundingBox.min,JE.min),this.boundingBox.expandByPoint(KE),KE.addVectors(this.boundingBox.max,JE.max),this.boundingBox.expandByPoint(KE)):(this.boundingBox.expandByPoint(JE.min),this.boundingBox.expandByPoint(JE.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new OA);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new gA,1/0);if(e){const n=this.boundingSphere.center;if(JE.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];$E.setFromBufferAttribute(n),this.morphTargetsRelative?(KE.addVectors(JE.min,$E.min),JE.expandByPoint(KE),KE.addVectors(JE.max,$E.max),JE.expandByPoint(KE)):(JE.expandByPoint($E.min),JE.expandByPoint($E.max))}JE.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)KE.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(KE));if(t)for(let i=0,a=t.length;i<a;i++){const a=t[i],o=this.morphTargetsRelative;for(let t=0,i=a.count;t<i;t++)KE.fromBufferAttribute(a,t),o&&(ZE.fromBufferAttribute(e,t),KE.add(ZE)),r=Math.max(r,n.distanceToSquared(KE))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,r=t.position.array,i=t.normal.array,a=t.uv.array,o=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new BE(new Float32Array(4*o),4));const s=this.getAttribute("tangent").array,l=[],c=[];for(let e=0;e<o;e++)l[e]=new gA,c[e]=new gA;const u=new gA,d=new gA,h=new gA,f=new zS,p=new zS,m=new zS,g=new gA,v=new gA;function y(e,t,n){u.fromArray(r,3*e),d.fromArray(r,3*t),h.fromArray(r,3*n),f.fromArray(a,2*e),p.fromArray(a,2*t),m.fromArray(a,2*n),d.sub(u),h.sub(u),p.sub(f),m.sub(f);const i=1/(p.x*m.y-m.x*p.y);isFinite(i)&&(g.copy(d).multiplyScalar(m.y).addScaledVector(h,-p.y).multiplyScalar(i),v.copy(h).multiplyScalar(p.x).addScaledVector(d,-m.x).multiplyScalar(i),l[e].add(g),l[t].add(g),l[n].add(g),c[e].add(v),c[t].add(v),c[n].add(v))}let b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(let e=0,t=b.length;e<t;++e){const t=b[e],r=t.start;for(let e=r,i=r+t.count;e<i;e+=3)y(n[e+0],n[e+1],n[e+2])}const x=new gA,_=new gA,w=new gA,M=new gA;function S(e){w.fromArray(i,3*e),M.copy(w);const t=l[e];x.copy(t),x.sub(w.multiplyScalar(w.dot(t))).normalize(),_.crossVectors(M,t);const n=_.dot(c[e])<0?-1:1;s[4*e]=x.x,s[4*e+1]=x.y,s[4*e+2]=x.z,s[4*e+3]=n}for(let e=0,t=b.length;e<t;++e){const t=b[e],r=t.start;for(let e=r,i=r+t.count;e<i;e+=3)S(n[e+0]),S(n[e+1]),S(n[e+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new BE(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new gA,i=new gA,a=new gA,o=new gA,s=new gA,l=new gA,c=new gA,u=new gA;if(e)for(let d=0,h=e.count;d<h;d+=3){const h=e.getX(d+0),f=e.getX(d+1),p=e.getX(d+2);r.fromBufferAttribute(t,h),i.fromBufferAttribute(t,f),a.fromBufferAttribute(t,p),c.subVectors(a,i),u.subVectors(r,i),c.cross(u),o.fromBufferAttribute(n,h),s.fromBufferAttribute(n,f),l.fromBufferAttribute(n,p),o.add(c),s.add(c),l.add(c),n.setXYZ(h,o.x,o.y,o.z),n.setXYZ(f,s.x,s.y,s.z),n.setXYZ(p,l.x,l.y,l.z)}else for(let e=0,o=t.count;e<o;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),a.fromBufferAttribute(t,e+2),c.subVectors(a,i),u.subVectors(r,i),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const r in n){if(void 0===e.attributes[r])continue;const i=n[r].array,a=e.attributes[r],o=a.array,s=a.itemSize*t,l=Math.min(o.length,i.length-s);for(let e=0,t=s;e<l;e++,t++)i[t]=o[e]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)KE.fromBufferAttribute(e,t),KE.normalize(),e.setXYZ(t,KE.x,KE.y,KE.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,a=new n.constructor(t.length*r);let o=0,s=0;for(let i=0,l=t.length;i<l;i++){o=e.isInterleavedBufferAttribute?t[i]*e.data.stride+e.offset:t[i]*r;for(let e=0;e<r;e++)a[s++]=n[o++]}return new BE(a,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new QE,n=this.index.array,r=this.attributes;for(const i in r){const a=e(r[i],n);t.setAttribute(i,a)}const i=this.morphAttributes;for(const r in i){const a=[],o=i[r];for(let t=0,r=o.length;t<r;t++){const r=e(o[t],n);a.push(r)}t.morphAttributes[r]=a}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let e=0,n=a.length;e<n;e++){const n=a[e];t.addGroup(n.start,n.count,n.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const t in n){const r=n[t];e.data.attributes[t]=r.toJSON(e.data)}const r={};let i=!1;for(const t in this.morphAttributes){const n=this.morphAttributes[t],a=[];for(let t=0,r=n.length;t<r;t++){const r=n[t];a.push(r.toJSON(e.data))}a.length>0&&(r[t]=a,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return null!==o&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const e in r){const n=r[e];this.setAttribute(e,n.clone(t))}const i=e.morphAttributes;for(const e in i){const n=[],r=i[e];for(let e=0,i=r.length;e<i;e++)n.push(r[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let e=0,t=a.length;e<t;e++){const t=a[e];this.addGroup(t.start,t.count,t.materialIndex)}const o=e.boundingBox;null!==o&&(this.boundingBox=o.clone());const s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const eC=new qA,tC=new XA,nC=new OA,rC=new gA,iC=new gA,aC=new gA,oC=new gA,sC=new gA,lC=new gA,cC=new gA,uC=new gA,dC=new gA,hC=new zS,fC=new zS,pC=new zS,mC=new gA,gC=new gA;class vC extends yE{constructor(e=new QE,t=new DE){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),nC.copy(n.boundingSphere),nC.applyMatrix4(i),!1===e.ray.intersectsSphere(nC))return;if(eC.copy(i).invert(),tC.copy(e.ray).applyMatrix4(eC),null!==n.boundingBox&&!1===tC.intersectsBox(n.boundingBox))return;let a;const o=n.index,s=n.attributes.position,l=n.morphAttributes.position,c=n.morphTargetsRelative,u=n.attributes.uv,d=n.attributes.uv2,h=n.groups,f=n.drawRange;if(null!==o)if(Array.isArray(r))for(let n=0,i=h.length;n<i;n++){const i=h[n],p=r[i.materialIndex];for(let n=Math.max(i.start,f.start),r=Math.min(o.count,Math.min(i.start+i.count,f.start+f.count));n<r;n+=3){const r=o.getX(n),h=o.getX(n+1),f=o.getX(n+2);a=yC(this,p,e,tC,s,l,c,u,d,r,h,f),a&&(a.faceIndex=Math.floor(n/3),a.face.materialIndex=i.materialIndex,t.push(a))}}else for(let n=Math.max(0,f.start),i=Math.min(o.count,f.start+f.count);n<i;n+=3){const i=o.getX(n),h=o.getX(n+1),f=o.getX(n+2);a=yC(this,r,e,tC,s,l,c,u,d,i,h,f),a&&(a.faceIndex=Math.floor(n/3),t.push(a))}else if(void 0!==s)if(Array.isArray(r))for(let n=0,i=h.length;n<i;n++){const i=h[n],o=r[i.materialIndex];for(let n=Math.max(i.start,f.start),r=Math.min(s.count,Math.min(i.start+i.count,f.start+f.count));n<r;n+=3)a=yC(this,o,e,tC,s,l,c,u,d,n,n+1,n+2),a&&(a.faceIndex=Math.floor(n/3),a.face.materialIndex=i.materialIndex,t.push(a))}else for(let n=Math.max(0,f.start),i=Math.min(s.count,f.start+f.count);n<i;n+=3)a=yC(this,r,e,tC,s,l,c,u,d,n,n+1,n+2),a&&(a.faceIndex=Math.floor(n/3),t.push(a))}}function yC(e,t,n,r,i,a,o,s,l,c,u,d){rC.fromBufferAttribute(i,c),iC.fromBufferAttribute(i,u),aC.fromBufferAttribute(i,d);const h=e.morphTargetInfluences;if(a&&h){cC.set(0,0,0),uC.set(0,0,0),dC.set(0,0,0);for(let e=0,t=a.length;e<t;e++){const t=h[e],n=a[e];0!==t&&(oC.fromBufferAttribute(n,c),sC.fromBufferAttribute(n,u),lC.fromBufferAttribute(n,d),o?(cC.addScaledVector(oC,t),uC.addScaledVector(sC,t),dC.addScaledVector(lC,t)):(cC.addScaledVector(oC.sub(rC),t),uC.addScaledVector(sC.sub(iC),t),dC.addScaledVector(lC.sub(aC),t)))}rC.add(cC),iC.add(uC),aC.add(dC)}e.isSkinnedMesh&&(e.boneTransform(c,rC),e.boneTransform(u,iC),e.boneTransform(d,aC));const f=function(e,t,n,r,i,a,o,s){let l;if(l=t.side===E_?r.intersectTriangle(o,a,i,!0,s):r.intersectTriangle(i,a,o,t.side!==C_,s),null===l)return null;gC.copy(s),gC.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(gC);return c<n.near||c>n.far?null:{distance:c,point:gC.clone(),object:e}}(e,t,n,r,rC,iC,aC,mC);if(f){s&&(hC.fromBufferAttribute(s,c),fC.fromBufferAttribute(s,u),pC.fromBufferAttribute(s,d),f.uv=RE.getUV(mC,rC,iC,aC,hC,fC,pC,new zS)),l&&(hC.fromBufferAttribute(l,c),fC.fromBufferAttribute(l,u),pC.fromBufferAttribute(l,d),f.uv2=RE.getUV(mC,rC,iC,aC,hC,fC,pC,new zS));const e={a:c,b:u,c:d,normal:new gA,materialIndex:0};RE.getNormal(rC,iC,aC,e.normal),f.face=e}return f}class bC extends QE{constructor(e=1,t=1,n=1,r=1,i=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:a};const o=this;r=Math.floor(r),i=Math.floor(i),a=Math.floor(a);const s=[],l=[],c=[],u=[];let d=0,h=0;function f(e,t,n,r,i,a,f,p,m,g,v){const y=a/m,b=f/g,x=a/2,_=f/2,w=p/2,M=m+1,S=g+1;let A=0,E=0;const C=new gA;for(let a=0;a<S;a++){const o=a*b-_;for(let s=0;s<M;s++){const d=s*y-x;C[e]=d*r,C[t]=o*i,C[n]=w,l.push(C.x,C.y,C.z),C[e]=0,C[t]=0,C[n]=p>0?1:-1,c.push(C.x,C.y,C.z),u.push(s/m),u.push(1-a/g),A+=1}}for(let e=0;e<g;e++)for(let t=0;t<m;t++){const n=d+t+M*e,r=d+t+M*(e+1),i=d+(t+1)+M*(e+1),a=d+(t+1)+M*e;s.push(n,r,a),s.push(r,i,a),E+=6}o.addGroup(h,E,v),h+=E,d+=A}f("z","y","x",-1,-1,n,t,e,a,i,0),f("z","y","x",1,-1,n,t,-e,a,i,1),f("x","z","y",1,1,e,n,t,r,a,2),f("x","z","y",1,-1,e,n,-t,r,a,3),f("x","y","z",1,-1,e,t,n,r,i,4),f("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new jE(l,3)),this.setAttribute("normal",new jE(c,3)),this.setAttribute("uv",new jE(u,2))}static fromJSON(e){return new bC(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function xC(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function _C(e){const t={};for(let n=0;n<e.length;n++){const r=xC(e[n]);for(const e in r)t[e]=r[e]}return t}const wC={clone:xC,merge:_C};class MC extends LE{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=xC(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const r=this.uniforms[n].value;r&&r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class SC extends yE{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new qA,this.projectionMatrix=new qA,this.projectionMatrixInverse=new qA}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class AC extends SC{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*PS*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*RS*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*PS*Math.atan(Math.tan(.5*RS*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*RS*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const a=this.view;if(null!==this.view&&this.view.enabled){const e=a.fullWidth,o=a.fullHeight;i+=a.offsetX*r/e,t-=a.offsetY*n/o,r*=a.width/e,n*=a.height/o}const o=this.filmOffset;0!==o&&(i+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const EC=90;class CC extends yE{constructor(e,t,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const r=new AC(EC,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new gA(1,0,0)),this.add(r);const i=new AC(EC,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new gA(-1,0,0)),this.add(i);const a=new AC(EC,1,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(new gA(0,1,0)),this.add(a);const o=new AC(EC,1,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new gA(0,-1,0)),this.add(o);const s=new AC(EC,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new gA(0,0,1)),this.add(s);const l=new AC(EC,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new gA(0,0,-1)),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,i,a,o,s,l]=this.children,c=e.getRenderTarget(),u=e.toneMapping,d=e.xr.enabled;e.toneMapping=cw,e.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,a),e.setRenderTarget(n,3),e.render(t,o),e.setRenderTarget(n,4),e.render(t,s),n.texture.generateMipmaps=h,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(c),e.toneMapping=u,e.xr.enabled=d,n.texture.needsPMREMUpdate=!0}}class TC extends sA{constructor(e,t,n,r,i,a,o,s,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:gw,n,r,i,a,o,s,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class RC extends cA{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new TC(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Rw}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new bC(5,5,5),o=new MC({name:"CubemapFromEquirect",uniforms:xC(n),vertexShader:r,fragmentShader:i,side:E_,blending:P_});o.uniforms.tEquirect.value=t;const s=new vC(a,o),l=t.minFilter;return t.minFilter===Dw&&(t.minFilter=Rw),new CC(1,10,this).update(e,s),t.minFilter=l,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,n,r);e.setRenderTarget(i)}}const PC=new gA,LC=new gA,DC=new US;class IC{constructor(e=new gA(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=PC.subVectors(n,t).cross(LC.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const n=e.delta(PC),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(n).multiplyScalar(i).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||DC.getNormalMatrix(e),r=this.coplanarPoint(PC).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const kC=new OA,BC=new gA;class FC{constructor(e=new IC,t=new IC,n=new IC,r=new IC,i=new IC,a=new IC){this.planes=[e,t,n,r,i,a]}set(e,t,n,r,i,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],l=n[5],c=n[6],u=n[7],d=n[8],h=n[9],f=n[10],p=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return t[0].setComponents(o-r,u-s,p-d,y-m).normalize(),t[1].setComponents(o+r,u+s,p+d,y+m).normalize(),t[2].setComponents(o+i,u+l,p+h,y+g).normalize(),t[3].setComponents(o-i,u-l,p-h,y-g).normalize(),t[4].setComponents(o-a,u-c,p-f,y-v).normalize(),t[5].setComponents(o+a,u+c,p+f,y+v).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),kC.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(kC)}intersectsSprite(e){return kC.center.set(0,0,0),kC.radius=.7071067811865476,kC.applyMatrix4(e.matrixWorld),this.intersectsSphere(kC)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let e=0;e<6;e++)if(t[e].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(BC.x=r.normal.x>0?e.max.x:e.min.x,BC.y=r.normal.y>0?e.max.y:e.min.y,BC.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(BC)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function NC(){let e=null,t=!1,n=null,r=null;function i(t,a){n(t,a),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function OC(e,t){const n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const a=r.get(t);void 0===a?r.set(t,function(t,r){const i=t.array,a=t.usage,o=e.createBuffer();let s;if(e.bindBuffer(r,o),e.bufferData(r,i,a),t.onUploadCallback(),i instanceof Float32Array)s=5126;else if(i instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");s=5131}else s=5123;else if(i instanceof Int16Array)s=5122;else if(i instanceof Uint32Array)s=5125;else if(i instanceof Int32Array)s=5124;else if(i instanceof Int8Array)s=5120;else if(i instanceof Uint8Array)s=5121;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);s=5121}return{buffer:o,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,i)):a.version<t.version&&(function(t,r,i){const a=r.array,o=r.updateRange;e.bindBuffer(i,t),-1===o.count?e.bufferSubData(i,0,a):(n?e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a,o.offset,o.count):e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1)}(a.buffer,t,i),a.version=t.version)}}}class zC extends QE{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,a=t/2,o=Math.floor(n),s=Math.floor(r),l=o+1,c=s+1,u=e/o,d=t/s,h=[],f=[],p=[],m=[];for(let e=0;e<c;e++){const t=e*d-a;for(let n=0;n<l;n++){const r=n*u-i;f.push(r,-t,0),p.push(0,0,1),m.push(n/o),m.push(1-e/s)}}for(let e=0;e<s;e++)for(let t=0;t<o;t++){const n=t+l*e,r=t+l*(e+1),i=t+1+l*(e+1),a=t+1+l*e;h.push(n,r,a),h.push(r,i,a)}this.setIndex(h),this.setAttribute("position",new jE(f,3)),this.setAttribute("normal",new jE(p,3)),this.setAttribute("uv",new jE(m,2))}static fromJSON(e){return new zC(e.width,e.height,e.widthSegments,e.heightSegments)}}const UC={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},HC={common:{diffuse:{value:new tA(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new US},uv2Transform:{value:new US},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new zS(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new tA(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new tA(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new US}},sprite:{diffuse:{value:new tA(16777215)},opacity:{value:1},center:{value:new zS(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new US}}},GC={basic:{uniforms:_C([HC.common,HC.specularmap,HC.envmap,HC.aomap,HC.lightmap,HC.fog]),vertexShader:UC.meshbasic_vert,fragmentShader:UC.meshbasic_frag},lambert:{uniforms:_C([HC.common,HC.specularmap,HC.envmap,HC.aomap,HC.lightmap,HC.emissivemap,HC.fog,HC.lights,{emissive:{value:new tA(0)}}]),vertexShader:UC.meshlambert_vert,fragmentShader:UC.meshlambert_frag},phong:{uniforms:_C([HC.common,HC.specularmap,HC.envmap,HC.aomap,HC.lightmap,HC.emissivemap,HC.bumpmap,HC.normalmap,HC.displacementmap,HC.fog,HC.lights,{emissive:{value:new tA(0)},specular:{value:new tA(1118481)},shininess:{value:30}}]),vertexShader:UC.meshphong_vert,fragmentShader:UC.meshphong_frag},standard:{uniforms:_C([HC.common,HC.envmap,HC.aomap,HC.lightmap,HC.emissivemap,HC.bumpmap,HC.normalmap,HC.displacementmap,HC.roughnessmap,HC.metalnessmap,HC.fog,HC.lights,{emissive:{value:new tA(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:UC.meshphysical_vert,fragmentShader:UC.meshphysical_frag},toon:{uniforms:_C([HC.common,HC.aomap,HC.lightmap,HC.emissivemap,HC.bumpmap,HC.normalmap,HC.displacementmap,HC.gradientmap,HC.fog,HC.lights,{emissive:{value:new tA(0)}}]),vertexShader:UC.meshtoon_vert,fragmentShader:UC.meshtoon_frag},matcap:{uniforms:_C([HC.common,HC.bumpmap,HC.normalmap,HC.displacementmap,HC.fog,{matcap:{value:null}}]),vertexShader:UC.meshmatcap_vert,fragmentShader:UC.meshmatcap_frag},points:{uniforms:_C([HC.points,HC.fog]),vertexShader:UC.points_vert,fragmentShader:UC.points_frag},dashed:{uniforms:_C([HC.common,HC.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:UC.linedashed_vert,fragmentShader:UC.linedashed_frag},depth:{uniforms:_C([HC.common,HC.displacementmap]),vertexShader:UC.depth_vert,fragmentShader:UC.depth_frag},normal:{uniforms:_C([HC.common,HC.bumpmap,HC.normalmap,HC.displacementmap,{opacity:{value:1}}]),vertexShader:UC.meshnormal_vert,fragmentShader:UC.meshnormal_frag},sprite:{uniforms:_C([HC.sprite,HC.fog]),vertexShader:UC.sprite_vert,fragmentShader:UC.sprite_frag},background:{uniforms:{uvTransform:{value:new US},t2D:{value:null}},vertexShader:UC.background_vert,fragmentShader:UC.background_frag},cube:{uniforms:_C([HC.envmap,{opacity:{value:1}}]),vertexShader:UC.cube_vert,fragmentShader:UC.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:UC.equirect_vert,fragmentShader:UC.equirect_frag},distanceRGBA:{uniforms:_C([HC.common,HC.displacementmap,{referencePosition:{value:new gA},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:UC.distanceRGBA_vert,fragmentShader:UC.distanceRGBA_frag},shadow:{uniforms:_C([HC.lights,HC.fog,{color:{value:new tA(0)},opacity:{value:1}}]),vertexShader:UC.shadow_vert,fragmentShader:UC.shadow_frag}};function VC(e,t,n,r,i,a){const o=new tA(0);let s,l,c=!0===i?0:1,u=null,d=0,h=null;function f(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,a)}return{getClearColor:function(){return o},setClearColor:function(e,t=1){o.set(e),c=t,f(o,c)},getClearAlpha:function(){return c},setClearAlpha:function(e){c=e,f(o,c)},render:function(n,i){let a=!1,p=!0===i.isScene?i.background:null;p&&p.isTexture&&(p=t.get(p));const m=e.xr,g=m.getSession&&m.getSession();g&&"additive"===g.environmentBlendMode&&(p=null),null===p?f(o,c):p&&p.isColor&&(f(p,1),a=!0),(e.autoClear||a)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),p&&(p.isCubeTexture||p.mapping===xw)?(void 0===l&&(l=new vC(new bC(1,1,1),new MC({name:"BackgroundCubeMaterial",uniforms:xC(GC.cube.uniforms),vertexShader:GC.cube.vertexShader,fragmentShader:GC.cube.fragmentShader,side:E_,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(l)),l.material.uniforms.envMap.value=p,l.material.uniforms.flipEnvMap.value=p.isCubeTexture&&!1===p.isRenderTargetTexture?-1:1,u===p&&d===p.version&&h===e.toneMapping||(l.material.needsUpdate=!0,u=p,d=p.version,h=e.toneMapping),l.layers.enableAll(),n.unshift(l,l.geometry,l.material,0,0,null)):p&&p.isTexture&&(void 0===s&&(s=new vC(new zC(2,2),new MC({name:"BackgroundMaterial",uniforms:xC(GC.background.uniforms),vertexShader:GC.background.vertexShader,fragmentShader:GC.background.fragmentShader,side:A_,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(s)),s.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),s.material.uniforms.uvTransform.value.copy(p.matrix),u===p&&d===p.version&&h===e.toneMapping||(s.material.needsUpdate=!0,u=p,d=p.version,h=e.toneMapping),s.layers.enableAll(),n.unshift(s,s.geometry,s.material,0,0,null))}}}function jC(e,t,n,r){const i=e.getParameter(34921),a=r.isWebGL2?null:t.get("OES_vertex_array_object"),o=r.isWebGL2||null!==a,s={},l=f(null);let c=l,u=!1;function d(t){return r.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function h(t){return r.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function f(e){const t=[],n=[],r=[];for(let e=0;e<i;e++)t[e]=0,n[e]=0,r[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function p(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function m(e){g(e,0)}function g(n,i){const a=c.newAttributes,o=c.enabledAttributes,s=c.attributeDivisors;a[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),s[n]!==i&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i)}function v(){const t=c.newAttributes,n=c.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function y(t,n,i,a,o,s){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,a,o,s):e.vertexAttribIPointer(t,n,i,o,s)}function b(){x(),u=!0,c!==l&&(c=l,d(c.object))}function x(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,h,b,x){let _=!1;if(o){const t=function(t,n,i){const o=!0===i.wireframe;let l=s[t.id];void 0===l&&(l={},s[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[o];return void 0===u&&(u=f(r.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),c[o]=u),u}(b,h,l);c!==t&&(c=t,d(c.object)),_=function(e,t,n,r){const i=c.attributes,a=t.attributes;let o=0;const s=n.getAttributes();for(const t in s)if(s[t].location>=0){const n=i[t];let r=a[t];if(void 0===r&&("instanceMatrix"===t&&e.instanceMatrix&&(r=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(r=e.instanceColor)),void 0===n)return!0;if(n.attribute!==r)return!0;if(r&&n.data!==r.data)return!0;o++}return c.attributesNum!==o||c.index!==r}(i,b,h,x),_&&function(e,t,n,r){const i={},a=t.attributes;let o=0;const s=n.getAttributes();for(const t in s)if(s[t].location>=0){let n=a[t];void 0===n&&("instanceMatrix"===t&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(n=e.instanceColor));const r={};r.attribute=n,n&&n.data&&(r.data=n.data),i[t]=r,o++}c.attributes=i,c.attributesNum=o,c.index=r}(i,b,h,x)}else{const e=!0===l.wireframe;c.geometry===b.id&&c.program===h.id&&c.wireframe===e||(c.geometry=b.id,c.program=h.id,c.wireframe=e,_=!0)}null!==x&&n.update(x,34963),(_||u)&&(u=!1,function(i,a,o,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;p();const l=s.attributes,c=o.getAttributes(),u=a.defaultAttributeValues;for(const t in c){const r=c[t];if(r.location>=0){let a=l[t];if(void 0===a&&("instanceMatrix"===t&&i.instanceMatrix&&(a=i.instanceMatrix),"instanceColor"===t&&i.instanceColor&&(a=i.instanceColor)),void 0!==a){const t=a.normalized,o=a.itemSize,l=n.get(a);if(void 0===l)continue;const c=l.buffer,u=l.type,d=l.bytesPerElement;if(a.isInterleavedBufferAttribute){const n=a.data,l=n.stride,h=a.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<r.locationSize;e++)g(r.location+e,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<r.locationSize;e++)m(r.location+e);e.bindBuffer(34962,c);for(let e=0;e<r.locationSize;e++)y(r.location+e,o/r.locationSize,u,t,l*d,(h+o/r.locationSize*e)*d)}else{if(a.isInstancedBufferAttribute){for(let e=0;e<r.locationSize;e++)g(r.location+e,a.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=a.meshPerAttribute*a.count)}else for(let e=0;e<r.locationSize;e++)m(r.location+e);e.bindBuffer(34962,c);for(let e=0;e<r.locationSize;e++)y(r.location+e,o/r.locationSize,u,t,o*d,o/r.locationSize*e*d)}}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(r.location,n);break;case 3:e.vertexAttrib3fv(r.location,n);break;case 4:e.vertexAttrib4fv(r.location,n);break;default:e.vertexAttrib1fv(r.location,n)}}}}v()}(i,l,h,b),null!==x&&e.bindBuffer(34963,n.get(x).buffer))},reset:b,resetDefaultState:x,dispose:function(){b();for(const e in s){const t=s[e];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0===s[e.id])return;const t=s[e.id];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete s[e.id]},releaseStatesOfProgram:function(e){for(const t in s){const n=s[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)h(r[e].object),delete r[e];delete n[e.id]}},initAttributes:p,enableAttribute:m,disableUnusedAttributes:v}}function WC(e,t,n,r){const i=r.isWebGL2;let a;this.setMode=function(e){a=e},this.render=function(t,r){e.drawArrays(a,t,r),n.update(r,a,1)},this.renderInstances=function(r,o,s){if(0===s)return;let l,c;if(i)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](a,r,o,s),n.update(o,a,s)}}function XC(e,t,n){let r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const a="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;let o=void 0!==n.precision?n.precision:"highp";const s=i(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);const l=a||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,u=e.getParameter(34930),d=e.getParameter(35660),h=e.getParameter(3379),f=e.getParameter(34076),p=e.getParameter(34921),m=e.getParameter(36347),g=e.getParameter(36348),v=e.getParameter(36349),y=d>0,b=a||t.has("OES_texture_float");return{isWebGL2:a,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:d,maxTextureSize:h,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:a?e.getParameter(36183):0}}function qC(e){const t=this;let n=null,r=0,i=!1,a=!1;const o=new IC,s=new US,l={value:null,needsUpdate:!1};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function u(e,n,r,i){const a=null!==e?e.length:0;let c=null;if(0!==a){if(c=l.value,!0!==i||null===c){const t=r+4*a,i=n.matrixWorldInverse;s.getNormalMatrix(i),(null===c||c.length<t)&&(c=new Float32Array(t));for(let t=0,n=r;t!==a;++t,n+=4)o.copy(e[t]).applyMatrix4(i,s),o.normal.toArray(c,n),c[n+3]=o.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,a){const o=0!==e.length||t||0!==r||i;return i=t,n=u(e,a,0),r=e.length,o},this.beginShadows=function(){a=!0,u(null)},this.endShadows=function(){a=!1,c()},this.setState=function(t,o,s){const d=t.clippingPlanes,h=t.clipIntersection,f=t.clipShadows,p=e.get(t);if(!i||null===d||0===d.length||a&&!f)a?u(null):c();else{const e=a?0:r,t=4*e;let i=p.clippingState||null;l.value=i,i=u(d,o,t,s);for(let e=0;e!==t;++e)i[e]=n[e];p.clippingState=i,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}}}function YC(e){let t=new WeakMap;function n(e,t){return t===yw?e.mapping=gw:t===bw&&(e.mapping=vw),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){const a=i.mapping;if(a===yw||a===bw){if(t.has(i))return n(t.get(i).texture,i.mapping);{const a=i.image;if(a&&a.height>0){const o=new RC(a.height/2);return o.fromEquirectangularTexture(e,i),t.set(i,o),i.addEventListener("dispose",r),n(o.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}GC.physical={uniforms:_C([GC.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new zS(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new tA(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new zS},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new tA(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new tA(1,1,1)},specularColorMap:{value:null}}]),vertexShader:UC.meshphysical_vert,fragmentShader:UC.meshphysical_frag};class ZC extends SC{constructor(e=-1,t=1,n=1,r=-1,i=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,a=n+e,o=r+t,s=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,a=i+e*this.view.width,o-=t*this.view.offsetY,s=o-t*this.view.height}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const JC=[.125,.215,.35,.446,.526,.582],$C=new ZC,KC=new tA;let QC=null;const eT=(1+Math.sqrt(5))/2,tT=1/eT,nT=[new gA(1,1,1),new gA(-1,1,1),new gA(1,1,-1),new gA(-1,1,-1),new gA(0,eT,tT),new gA(0,eT,-tT),new gA(tT,0,eT),new gA(-tT,0,eT),new gA(eT,tT,0),new gA(-eT,tT,0)];class rT{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){QC=this._renderer.getRenderTarget(),this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=sT(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=oT(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(QC),e.scissorTest=!1,aT(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===gw||e.mapping===vw?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),QC=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Rw,minFilter:Rw,generateMipmaps:!1,type:Hw,format:qw,encoding:VM,depthBuffer:!1},r=iT(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=iT(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],r=[];let i=e;const a=e-4+1+JC.length;for(let o=0;o<a;o++){const a=Math.pow(2,i);n.push(a);let s=1/a;o>e-4?s=JC[o-e+4-1]:0===o&&(s=0),r.push(s);const l=1/(a-2),c=-l,u=1+l,d=[c,c,u,c,u,u,c,c,u,u,c,u],h=6,f=6,p=3,m=2,g=1,v=new Float32Array(p*f*h),y=new Float32Array(m*f*h),b=new Float32Array(g*f*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(r,p*f*e),y.set(d,m*f*e);const i=[e,e,e,e,e,e];b.set(i,g*f*e)}const x=new QE;x.setAttribute("position",new BE(v,p)),x.setAttribute("uv",new BE(y,m)),x.setAttribute("faceIndex",new BE(b,g)),t.push(x),i>4&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(e,t,n){const r=new Float32Array(20),i=new gA(0,1,0);return new MC({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:P_,depthTest:!1,depthWrite:!1})}(r,e,t)}return r}_compileMaterial(e){const t=new vC(this._lodPlanes[0],e);this._renderer.compile(t,$C)}_sceneToCubeUV(e,t,n,r){const i=new AC(90,1,t,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,c=s.toneMapping;s.getClearColor(KC),s.toneMapping=cw,s.autoClear=!1;const u=new DE({name:"PMREM.Background",side:E_,depthWrite:!1,depthTest:!1}),d=new vC(new bC,u);let h=!1;const f=e.background;f?f.isColor&&(u.color.copy(f),e.background=null,h=!0):(u.color.copy(KC),h=!0);for(let t=0;t<6;t++){const n=t%3;0===n?(i.up.set(0,a[t],0),i.lookAt(o[t],0,0)):1===n?(i.up.set(0,0,a[t]),i.lookAt(0,o[t],0)):(i.up.set(0,a[t],0),i.lookAt(0,0,o[t]));const l=this._cubeSize;aT(r,n*l,t>2?l:0,l,l),s.setRenderTarget(r),h&&s.render(d,i),s.render(e,i)}d.geometry.dispose(),d.material.dispose(),s.toneMapping=c,s.autoClear=l,e.background=f}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===gw||e.mapping===vw;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=sT()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=oT());const i=r?this._cubemapMaterial:this._equirectMaterial,a=new vC(this._lodPlanes[0],i);i.uniforms.envMap.value=e;const o=this._cubeSize;aT(t,0,0,3*o,2*o),n.setRenderTarget(t),n.render(a,$C)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let t=1;t<this._lodPlanes.length;t++){const n=Math.sqrt(this._sigmas[t]*this._sigmas[t]-this._sigmas[t-1]*this._sigmas[t-1]),r=nT[(t-1)%nT.length];this._blur(e,t-1,t,n,r)}t.autoClear=n}_blur(e,t,n,r,i){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",i),this._halfBlur(a,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,a,o){const s=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new vC(this._lodPlanes[r],l),u=l.uniforms,d=this._sizeLods[n]-1,h=isFinite(i)?Math.PI/(2*d):2*Math.PI/39,f=i/h,p=isFinite(i)?1+Math.floor(3*f):20;p>20&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${p} samples when the maximum is set to 20`);const m=[];let g=0;for(let e=0;e<20;++e){const t=e/f,n=Math.exp(-t*t/2);m.push(n),0===e?g+=n:e<p&&(g+=2*n)}for(let e=0;e<m.length;e++)m[e]=m[e]/g;u.envMap.value=e.texture,u.samples.value=p,u.weights.value=m,u.latitudinal.value="latitudinal"===a,o&&(u.poleAxis.value=o);const{_lodMax:v}=this;u.dTheta.value=h,u.mipInt.value=v-n;const y=this._sizeLods[r];aT(t,3*y*(r>v-4?r-v+4:0),4*(this._cubeSize-y),3*y,2*y),s.setRenderTarget(t),s.render(c,$C)}}function iT(e,t,n){const r=new cA(e,t,n);return r.texture.mapping=xw,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function aT(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function oT(){return new MC({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:P_,depthTest:!1,depthWrite:!1})}function sT(){return new MC({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:P_,depthTest:!1,depthWrite:!1})}function lT(e){let t=new WeakMap,n=null;function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const a=i.mapping,o=a===yw||a===bw,s=a===gw||a===vw;if(o||s){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;let r=t.get(i);return null===n&&(n=new rT(e)),r=o?n.fromEquirectangular(i,r):n.fromCubemap(i,r),t.set(i,r),r.texture}if(t.has(i))return t.get(i).texture;{const a=i.image;if(o&&a&&a.height>0||s&&a&&function(e){let t=0;for(let n=0;n<6;n++)void 0!==e[n]&&t++;return 6===t}(a)){null===n&&(n=new rT(e));const a=o?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,a),i.addEventListener("dispose",r),a.texture}return null}}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function cT(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function uT(e,t,n,r){const i={},a=new WeakMap;function o(e){const s=e.target;null!==s.index&&t.remove(s.index);for(const e in s.attributes)t.remove(s.attributes[e]);s.removeEventListener("dispose",o),delete i[s.id];const l=a.get(s);l&&(t.remove(l),a.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){const n=[],r=e.index,i=e.attributes.position;let o=0;if(null!==r){const e=r.array;o=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],a=e[t+2];n.push(r,i,i,a,a,r)}}else{const e=i.array;o=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}const s=new(HS(n)?GE:UE)(n,1);s.version=o;const l=a.get(e);l&&t.remove(l),a.set(e,s)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",o),i[t.id]=!0,n.memory.geometries++),t},update:function(e){const n=e.attributes;for(const e in n)t.update(n[e],34962);const r=e.morphAttributes;for(const e in r){const n=r[e];for(let e=0,r=n.length;e<r;e++)t.update(n[e],34962)}},getWireframeAttribute:function(e){const t=a.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return a.get(e)}}}function dT(e,t,n,r){const i=r.isWebGL2;let a,o,s;this.setMode=function(e){a=e},this.setIndex=function(e){o=e.type,s=e.bytesPerElement},this.render=function(t,r){e.drawElements(a,r,o,t*s),n.update(r,a,1)},this.renderInstances=function(r,l,c){if(0===c)return;let u,d;if(i)u=e,d="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),d="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[d](a,l,o,r*s,c),n.update(l,a,c)}}function hT(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function fT(e,t){return e[0]-t[0]}function pT(e,t){return Math.abs(t[1])-Math.abs(e[1])}function mT(e,t){let n=1;const r=t.isInterleavedBufferAttribute?t.data.array:t.array;r instanceof Int8Array?n=127:r instanceof Uint8Array?n=255:r instanceof Uint16Array?n=65535:r instanceof Int16Array?n=32767:r instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),e.divideScalar(n)}function gT(e,t,n){const r={},i=new Float32Array(8),a=new WeakMap,o=new lA,s=[];for(let e=0;e<8;e++)s[e]=[e,0];return{update:function(l,c,u,d){const h=l.morphTargetInfluences;if(!0===t.isWebGL2){const f=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,p=void 0!==f?f.length:0;let m=a.get(c);if(void 0===m||m.count!==p){void 0!==m&&m.texture.dispose();const y=void 0!==c.morphAttributes.position,b=void 0!==c.morphAttributes.normal,x=void 0!==c.morphAttributes.color,_=c.morphAttributes.position||[],w=c.morphAttributes.normal||[],M=c.morphAttributes.color||[];let S=0;!0===y&&(S=1),!0===b&&(S=2),!0===x&&(S=3);let A=c.attributes.position.count*S,E=1;A>t.maxTextureSize&&(E=Math.ceil(A/t.maxTextureSize),A=t.maxTextureSize);const C=new Float32Array(A*E*4*p),T=new uA(C,A,E,p);T.type=Uw,T.needsUpdate=!0;const R=4*S;for(let L=0;L<p;L++){const D=_[L],I=w[L],k=M[L],B=A*E*4*L;for(let F=0;F<D.count;F++){const N=F*R;!0===y&&(o.fromBufferAttribute(D,F),!0===D.normalized&&mT(o,D),C[B+N+0]=o.x,C[B+N+1]=o.y,C[B+N+2]=o.z,C[B+N+3]=0),!0===b&&(o.fromBufferAttribute(I,F),!0===I.normalized&&mT(o,I),C[B+N+4]=o.x,C[B+N+5]=o.y,C[B+N+6]=o.z,C[B+N+7]=0),!0===x&&(o.fromBufferAttribute(k,F),!0===k.normalized&&mT(o,k),C[B+N+8]=o.x,C[B+N+9]=o.y,C[B+N+10]=o.z,C[B+N+11]=4===k.itemSize?o.w:1)}}function P(){T.dispose(),a.delete(c),c.removeEventListener("dispose",P)}m={count:p,texture:T,size:new zS(A,E)},a.set(c,m),c.addEventListener("dispose",P)}let g=0;for(let O=0;O<h.length;O++)g+=h[O];const v=c.morphTargetsRelative?1:1-g;d.getUniforms().setValue(e,"morphTargetBaseInfluence",v),d.getUniforms().setValue(e,"morphTargetInfluences",h),d.getUniforms().setValue(e,"morphTargetsTexture",m.texture,n),d.getUniforms().setValue(e,"morphTargetsTextureSize",m.size)}else{const z=void 0===h?0:h.length;let U=r[c.id];if(void 0===U||U.length!==z){U=[];for(let W=0;W<z;W++)U[W]=[W,0];r[c.id]=U}for(let X=0;X<z;X++){const q=U[X];q[0]=X,q[1]=h[X]}U.sort(pT);for(let Y=0;Y<8;Y++)Y<z&&U[Y][1]?(s[Y][0]=U[Y][0],s[Y][1]=U[Y][1]):(s[Y][0]=Number.MAX_SAFE_INTEGER,s[Y][1]=0);s.sort(fT);const H=c.morphAttributes.position,G=c.morphAttributes.normal;let V=0;for(let Z=0;Z<8;Z++){const J=s[Z],$=J[0],K=J[1];$!==Number.MAX_SAFE_INTEGER&&K?(H&&c.getAttribute("morphTarget"+Z)!==H[$]&&c.setAttribute("morphTarget"+Z,H[$]),G&&c.getAttribute("morphNormal"+Z)!==G[$]&&c.setAttribute("morphNormal"+Z,G[$]),i[Z]=K,V+=K):(H&&!0===c.hasAttribute("morphTarget"+Z)&&c.deleteAttribute("morphTarget"+Z),G&&!0===c.hasAttribute("morphNormal"+Z)&&c.deleteAttribute("morphNormal"+Z),i[Z]=0)}const j=c.morphTargetsRelative?1:1-V;d.getUniforms().setValue(e,"morphTargetBaseInfluence",j),d.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function vT(e,t,n,r){let i=new WeakMap;function a(e){const t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){const o=r.render.frame,s=e.geometry,l=t.get(e,s);return i.get(l)!==o&&(t.update(l),i.set(l,o)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",a)&&e.addEventListener("dispose",a),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),l},dispose:function(){i=new WeakMap}}}const yT=new sA,bT=new uA,xT=new hA,_T=new TC,wT=[],MT=[],ST=new Float32Array(16),AT=new Float32Array(9),ET=new Float32Array(4);function CT(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let a=wT[i];if(void 0===a&&(a=new Float32Array(i),wT[i]=a),0!==t){r.toArray(a,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(a,i)}return a}function TT(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function RT(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function PT(e,t){let n=MT[t];void 0===n&&(n=new Int32Array(t),MT[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function LT(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function DT(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(TT(n,t))return;e.uniform2fv(this.addr,t),RT(n,t)}}function IT(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(TT(n,t))return;e.uniform3fv(this.addr,t),RT(n,t)}}function kT(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(TT(n,t))return;e.uniform4fv(this.addr,t),RT(n,t)}}function BT(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(TT(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),RT(n,t)}else{if(TT(n,r))return;ET.set(r),e.uniformMatrix2fv(this.addr,!1,ET),RT(n,r)}}function FT(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(TT(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),RT(n,t)}else{if(TT(n,r))return;AT.set(r),e.uniformMatrix3fv(this.addr,!1,AT),RT(n,r)}}function NT(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(TT(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),RT(n,t)}else{if(TT(n,r))return;ST.set(r),e.uniformMatrix4fv(this.addr,!1,ST),RT(n,r)}}function OT(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function zT(e,t){const n=this.cache;TT(n,t)||(e.uniform2iv(this.addr,t),RT(n,t))}function UT(e,t){const n=this.cache;TT(n,t)||(e.uniform3iv(this.addr,t),RT(n,t))}function HT(e,t){const n=this.cache;TT(n,t)||(e.uniform4iv(this.addr,t),RT(n,t))}function GT(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function VT(e,t){const n=this.cache;TT(n,t)||(e.uniform2uiv(this.addr,t),RT(n,t))}function jT(e,t){const n=this.cache;TT(n,t)||(e.uniform3uiv(this.addr,t),RT(n,t))}function WT(e,t){const n=this.cache;TT(n,t)||(e.uniform4uiv(this.addr,t),RT(n,t))}function XT(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(t||yT,i)}function qT(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||xT,i)}function YT(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||_T,i)}function ZT(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||bT,i)}function JT(e,t){e.uniform1fv(this.addr,t)}function $T(e,t){const n=CT(t,this.size,2);e.uniform2fv(this.addr,n)}function KT(e,t){const n=CT(t,this.size,3);e.uniform3fv(this.addr,n)}function QT(e,t){const n=CT(t,this.size,4);e.uniform4fv(this.addr,n)}function eR(e,t){const n=CT(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function tR(e,t){const n=CT(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function nR(e,t){const n=CT(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function rR(e,t){e.uniform1iv(this.addr,t)}function iR(e,t){e.uniform2iv(this.addr,t)}function aR(e,t){e.uniform3iv(this.addr,t)}function oR(e,t){e.uniform4iv(this.addr,t)}function sR(e,t){e.uniform1uiv(this.addr,t)}function lR(e,t){e.uniform2uiv(this.addr,t)}function cR(e,t){e.uniform3uiv(this.addr,t)}function uR(e,t){e.uniform4uiv(this.addr,t)}function dR(e,t,n){const r=t.length,i=PT(n,r);e.uniform1iv(this.addr,i);for(let e=0;e!==r;++e)n.setTexture2D(t[e]||yT,i[e])}function hR(e,t,n){const r=t.length,i=PT(n,r);e.uniform1iv(this.addr,i);for(let e=0;e!==r;++e)n.setTexture3D(t[e]||xT,i[e])}function fR(e,t,n){const r=t.length,i=PT(n,r);e.uniform1iv(this.addr,i);for(let e=0;e!==r;++e)n.setTextureCube(t[e]||_T,i[e])}function pR(e,t,n){const r=t.length,i=PT(n,r);e.uniform1iv(this.addr,i);for(let e=0;e!==r;++e)n.setTexture2DArray(t[e]||bT,i[e])}class mR{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return LT;case 35664:return DT;case 35665:return IT;case 35666:return kT;case 35674:return BT;case 35675:return FT;case 35676:return NT;case 5124:case 35670:return OT;case 35667:case 35671:return zT;case 35668:case 35672:return UT;case 35669:case 35673:return HT;case 5125:return GT;case 36294:return VT;case 36295:return jT;case 36296:return WT;case 35678:case 36198:case 36298:case 36306:case 35682:return XT;case 35679:case 36299:case 36307:return qT;case 35680:case 36300:case 36308:case 36293:return YT;case 36289:case 36303:case 36311:case 36292:return ZT}}(t.type)}}class gR{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return JT;case 35664:return $T;case 35665:return KT;case 35666:return QT;case 35674:return eR;case 35675:return tR;case 35676:return nR;case 5124:case 35670:return rR;case 35667:case 35671:return iR;case 35668:case 35672:return aR;case 35669:case 35673:return oR;case 5125:return sR;case 36294:return lR;case 36295:return cR;case 36296:return uR;case 35678:case 36198:case 36298:case 36306:case 35682:return dR;case 35679:case 36299:case 36307:return hR;case 35680:case 36300:case 36308:case 36293:return fR;case 36289:case 36303:case 36311:case 36292:return pR}}(t.type)}}class vR{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let i=0,a=r.length;i!==a;++i){const a=r[i];a.setValue(e,t[a.id],n)}}}const yR=/(\w+)(\])?(\[|\.)?/g;function bR(e,t){e.seq.push(t),e.map[t.id]=t}function xR(e,t,n){const r=e.name,i=r.length;for(yR.lastIndex=0;;){const a=yR.exec(r),o=yR.lastIndex;let s=a[1];const l="]"===a[2],c=a[3];if(l&&(s|=0),void 0===c||"["===c&&o+2===i){bR(n,void 0===c?new mR(s,e,t):new gR(s,e,t));break}{let e=n.map[s];void 0===e&&(e=new vR(s),bR(n,e)),n=e}}}class _R{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);xR(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,a=t.length;i!==a;++i){const a=t[i],o=n[a.id];!1!==o.needsUpdate&&a.setValue(e,o.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n}}function wR(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}let MR=0;function SR(e,t,n){const r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";const a=/ERROR: 0:(\d+)/.exec(i);if(a){const r=parseInt(a[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){const n=e.split("\n"),r=[],i=Math.max(t-6,0),a=Math.min(t+6,n.length);for(let e=i;e<a;e++){const i=e+1;r.push(`${i===t?">":" "} ${i}: ${n[e]}`)}return r.join("\n")}(e.getShaderSource(t),r)}return i}function AR(e,t){const n=function(e){switch(e){case VM:return["Linear","( value )"];case jM:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function ER(e,t){let n;switch(t){case uw:n="Linear";break;case dw:n="Reinhard";break;case hw:n="OptimizedCineon";break;case fw:n="ACESFilmic";break;case pw:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function CR(e){return""!==e}function TR(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function RR(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const PR=/^[ \t]*#include +<([\w\d./]+)>/gm;function LR(e){return e.replace(PR,DR)}function DR(e,t){const n=UC[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return LR(n)}const IR=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,kR=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function BR(e){return e.replace(kR,NR).replace(IR,FR)}function FR(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),NR(0,t,n,r)}function NR(e,t,n,r){let i="";for(let e=parseInt(t);e<parseInt(n);e++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return i}function OR(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function zR(e,t,n,r){const i=e.getContext(),a=n.defines;let o=n.vertexShader,s=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===w_?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===M_?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===S_&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case gw:case vw:t="ENVMAP_TYPE_CUBE";break;case xw:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";return e.envMap&&e.envMapMode===vw&&(t="ENVMAP_MODE_REFRACTION"),t}(n),d=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case ow:t="ENVMAP_BLENDING_MULTIPLY";break;case sw:t="ENVMAP_BLENDING_MIX";break;case lw:t="ENVMAP_BLENDING_ADD"}return t}(n),h=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),f=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(CR).join("\n")}(n),p=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(a),m=i.createProgram();let g,v,y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=[p].filter(CR).join("\n"),g.length>0&&(g+="\n"),v=[f,p].filter(CR).join("\n"),v.length>0&&(v+="\n")):(g=[OR(n),"#define SHADER_NAME "+n.shaderName,p,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(CR).join("\n"),v=[f,OR(n),"#define SHADER_NAME "+n.shaderName,p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==cw?"#define TONE_MAPPING":"",n.toneMapping!==cw?UC.tonemapping_pars_fragment:"",n.toneMapping!==cw?ER("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",UC.encodings_pars_fragment,AR("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(CR).join("\n")),o=LR(o),o=TR(o,n),o=RR(o,n),s=LR(s),s=TR(s,n),s=RR(s,n),o=BR(o),s=BR(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in",n.glslVersion===SS?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===SS?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const b=y+v+s,x=wR(i,35633,y+g+o),_=wR(i,35632,b);if(i.attachShader(m,x),i.attachShader(m,_),void 0!==n.index0AttributeName?i.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m),e.debug.checkShaderErrors){const e=i.getProgramInfoLog(m).trim(),t=i.getShaderInfoLog(x).trim(),n=i.getShaderInfoLog(_).trim();let r=!0,a=!0;if(!1===i.getProgramParameter(m,35714)){r=!1;const t=SR(i,x,"vertex"),n=SR(i,_,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,35715)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+n)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):""!==t&&""!==n||(a=!1);a&&(this.diagnostics={runnable:r,programLog:e,vertexShader:{log:t,prefix:g},fragmentShader:{log:n,prefix:v}})}let w,M;return i.deleteShader(x),i.deleteShader(_),this.getUniforms=function(){return void 0===w&&(w=new _R(i,m)),w},this.getAttributes=function(){return void 0===M&&(M=function(e,t){const n={},r=e.getProgramParameter(t,35721);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i),a=r.name;let o=1;35674===r.type&&(o=2),35675===r.type&&(o=3),35676===r.type&&(o=4),n[a]={type:r.type,location:e.getAttribLocation(t,a),locationSize:o}}return n}(i,m)),M},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=MR++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=x,this.fragmentShader=_,this}let UR=0;class HR{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(r)&&(a.add(r),r.usedTimes++),!1===a.has(i)&&(a.add(i),i.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const e of t)e.usedTimes--,0===e.usedTimes&&this.shaderCache.delete(e.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return!1===t.has(e)&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(!1===t.has(e)){const n=new GR(e);t.set(e,n)}return t.get(e)}}class GR{constructor(e){this.id=UR++,this.code=e,this.usedTimes=0}}function VR(e,t,n,r,i,a,o){const s=new iE,l=new HR,c=[],u=i.isWebGL2,d=i.logarithmicDepthBuffer,h=i.vertexTextures;let f=i.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(a,s,c,m,g){const v=m.fog,y=g.geometry,b=a.isMeshStandardMaterial?m.environment:null,x=(a.isMeshStandardMaterial?n:t).get(a.envMap||b),_=x&&x.mapping===xw?x.image.height:null,w=p[a.type];null!==a.precision&&(f=i.getMaxPrecision(a.precision),f!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",f,"instead."));const M=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,S=void 0!==M?M.length:0;let A,E,C,T,R=0;if(void 0!==y.morphAttributes.position&&(R=1),void 0!==y.morphAttributes.normal&&(R=2),void 0!==y.morphAttributes.color&&(R=3),w){const e=GC[w];A=e.vertexShader,E=e.fragmentShader}else A=a.vertexShader,E=a.fragmentShader,l.update(a),C=l.getVertexShaderID(a),T=l.getFragmentShaderID(a);const P=e.getRenderTarget(),L=a.alphaTest>0,D=a.clearcoat>0,I=a.iridescence>0;return{isWebGL2:u,shaderID:w,shaderName:a.type,vertexShader:A,fragmentShader:E,defines:a.defines,customVertexShaderID:C,customFragmentShaderID:T,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:f,instancing:!0===g.isInstancedMesh,instancingColor:!0===g.isInstancedMesh&&null!==g.instanceColor,supportsVertexTextures:h,outputEncoding:null===P?e.outputEncoding:!0===P.isXRRenderTarget?P.texture.encoding:VM,map:!!a.map,matcap:!!a.matcap,envMap:!!x,envMapMode:x&&x.mapping,envMapCubeUVHeight:_,lightMap:!!a.lightMap,aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,objectSpaceNormalMap:a.normalMapType===YM,tangentSpaceNormalMap:a.normalMapType===qM,decodeVideoTexture:!!a.map&&!0===a.map.isVideoTexture&&a.map.encoding===jM,clearcoat:D,clearcoatMap:D&&!!a.clearcoatMap,clearcoatRoughnessMap:D&&!!a.clearcoatRoughnessMap,clearcoatNormalMap:D&&!!a.clearcoatNormalMap,iridescence:I,iridescenceMap:I&&!!a.iridescenceMap,iridescenceThicknessMap:I&&!!a.iridescenceThicknessMap,displacementMap:!!a.displacementMap,roughnessMap:!!a.roughnessMap,metalnessMap:!!a.metalnessMap,specularMap:!!a.specularMap,specularIntensityMap:!!a.specularIntensityMap,specularColorMap:!!a.specularColorMap,opaque:!1===a.transparent&&a.blending===L_,alphaMap:!!a.alphaMap,alphaTest:L,gradientMap:!!a.gradientMap,sheen:a.sheen>0,sheenColorMap:!!a.sheenColorMap,sheenRoughnessMap:!!a.sheenRoughnessMap,transmission:a.transmission>0,transmissionMap:!!a.transmissionMap,thicknessMap:!!a.thicknessMap,combine:a.combine,vertexTangents:!!a.normalMap&&!!y.attributes.tangent,vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!y.attributes.color&&4===y.attributes.color.itemSize,vertexUvs:!!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatMap||a.clearcoatRoughnessMap||a.clearcoatNormalMap||a.iridescenceMap||a.iridescenceThicknessMap||a.displacementMap||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||a.sheenColorMap||a.sheenRoughnessMap),uvsVertexOnly:!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatNormalMap||a.iridescenceMap||a.iridescenceThicknessMap||a.transmission>0||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||a.sheen>0||a.sheenColorMap||a.sheenRoughnessMap||!a.displacementMap),fog:!!v,useFog:!0===a.fog,fogExp2:v&&v.isFogExp2,flatShading:!!a.flatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===g.isSkinnedMesh,morphTargets:void 0!==y.morphAttributes.position,morphNormals:void 0!==y.morphAttributes.normal,morphColors:void 0!==y.morphAttributes.color,morphTargetsCount:S,morphTextureStride:R,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:a.toneMapped?e.toneMapping:cw,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:a.premultipliedAlpha,doubleSided:a.side===C_,flipSided:a.side===E_,useDepthPacking:!!a.depthPacking,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionDerivatives:a.extensions&&a.extensions.derivatives,extensionFragDepth:a.extensions&&a.extensions.fragDepth,extensionDrawBuffers:a.extensions&&a.extensions.drawBuffers,extensionShaderTextureLOD:a.extensions&&a.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(function(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.combine),e.push(t.vertexUvs),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){s.disableAll(),t.isWebGL2&&s.enable(0),t.supportsVertexTextures&&s.enable(1),t.instancing&&s.enable(2),t.instancingColor&&s.enable(3),t.map&&s.enable(4),t.matcap&&s.enable(5),t.envMap&&s.enable(6),t.lightMap&&s.enable(7),t.aoMap&&s.enable(8),t.emissiveMap&&s.enable(9),t.bumpMap&&s.enable(10),t.normalMap&&s.enable(11),t.objectSpaceNormalMap&&s.enable(12),t.tangentSpaceNormalMap&&s.enable(13),t.clearcoat&&s.enable(14),t.clearcoatMap&&s.enable(15),t.clearcoatRoughnessMap&&s.enable(16),t.clearcoatNormalMap&&s.enable(17),t.iridescence&&s.enable(18),t.iridescenceMap&&s.enable(19),t.iridescenceThicknessMap&&s.enable(20),t.displacementMap&&s.enable(21),t.specularMap&&s.enable(22),t.roughnessMap&&s.enable(23),t.metalnessMap&&s.enable(24),t.gradientMap&&s.enable(25),t.alphaMap&&s.enable(26),t.alphaTest&&s.enable(27),t.vertexColors&&s.enable(28),t.vertexAlphas&&s.enable(29),t.vertexUvs&&s.enable(30),t.vertexTangents&&s.enable(31),t.uvsVertexOnly&&s.enable(32),t.fog&&s.enable(33),e.push(s.mask),s.disableAll(),t.useFog&&s.enable(0),t.flatShading&&s.enable(1),t.logarithmicDepthBuffer&&s.enable(2),t.skinning&&s.enable(3),t.morphTargets&&s.enable(4),t.morphNormals&&s.enable(5),t.morphColors&&s.enable(6),t.premultipliedAlpha&&s.enable(7),t.shadowMapEnabled&&s.enable(8),t.physicallyCorrectLights&&s.enable(9),t.doubleSided&&s.enable(10),t.flipSided&&s.enable(11),t.useDepthPacking&&s.enable(12),t.dithering&&s.enable(13),t.specularIntensityMap&&s.enable(14),t.specularColorMap&&s.enable(15),t.transmission&&s.enable(16),t.transmissionMap&&s.enable(17),t.thicknessMap&&s.enable(18),t.sheen&&s.enable(19),t.sheenColorMap&&s.enable(20),t.sheenRoughnessMap&&s.enable(21),t.decodeVideoTexture&&s.enable(22),t.opaque&&s.enable(23),e.push(s.mask)}(n,t),n.push(e.outputEncoding)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=p[e.type];let n;if(t){const e=GC[t];n=wC.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,t=c.length;e<t;e++){const t=c[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new zR(e,n,t,a),c.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){const t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:c,dispose:function(){l.dispose()}}}function jR(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function WR(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function XR(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function qR(){const e=[];let t=0;const n=[],r=[],i=[];function a(n,r,i,a,o,s){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:a,renderOrder:n.renderOrder,z:o,group:s},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=a,l.renderOrder=n.renderOrder,l.z=o,l.group=s),t++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,o,s,l,c){const u=a(e,t,o,s,l,c);o.transmission>0?r.push(u):!0===o.transparent?i.push(u):n.push(u)},unshift:function(e,t,o,s,l,c){const u=a(e,t,o,s,l,c);o.transmission>0?r.unshift(u):!0===o.transparent?i.unshift(u):n.unshift(u)},finish:function(){for(let n=t,r=e.length;n<r;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||WR),r.length>1&&r.sort(t||XR),i.length>1&&i.sort(t||XR)}}}function YR(){let e=new WeakMap;return{get:function(t,n){let r;return!1===e.has(t)?(r=new qR,e.set(t,[r])):n>=e.get(t).length?(r=new qR,e.get(t).push(r)):r=e.get(t)[n],r},dispose:function(){e=new WeakMap}}}function ZR(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new gA,color:new tA};break;case"SpotLight":n={position:new gA,direction:new gA,color:new tA,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new gA,color:new tA,distance:0,decay:0};break;case"HemisphereLight":n={direction:new gA,skyColor:new tA,groundColor:new tA};break;case"RectAreaLight":n={color:new tA,position:new gA,halfWidth:new gA,halfHeight:new gA}}return e[t.id]=n,n}}}let JR=0;function $R(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function KR(e,t){const n=new ZR,r=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new zS};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new zS,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let e=0;e<9;e++)i.probe.push(new gA);const a=new gA,o=new qA,s=new qA;return{setup:function(a,o){let s=0,l=0,c=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let u=0,d=0,h=0,f=0,p=0,m=0,g=0,v=0;a.sort($R);const y=!0!==o?Math.PI:1;for(let e=0,t=a.length;e<t;e++){const t=a[e],o=t.color,b=t.intensity,x=t.distance,_=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)s+=o.r*b*y,l+=o.g*b*y,c+=o.b*b*y;else if(t.isLightProbe)for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],b);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*y),t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[u]=n,i.directionalShadowMap[u]=_,i.directionalShadowMatrix[u]=t.shadow.matrix,m++}i.directional[u]=e,u++}else if(t.isSpotLight){const e=n.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(o).multiplyScalar(b*y),e.distance=x,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.spotShadow[h]=n,i.spotShadowMap[h]=_,i.spotShadowMatrix[h]=t.shadow.matrix,v++}i.spot[h]=e,h++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(o).multiplyScalar(b),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[f]=e,f++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*y),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[d]=n,i.pointShadowMap[d]=_,i.pointShadowMatrix[d]=t.shadow.matrix,g++}i.point[d]=e,d++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(b*y),e.groundColor.copy(t.groundColor).multiplyScalar(b*y),i.hemi[p]=e,p++}}f>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=HC.LTC_FLOAT_1,i.rectAreaLTC2=HC.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=HC.LTC_HALF_1,i.rectAreaLTC2=HC.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=s,i.ambient[1]=l,i.ambient[2]=c;const b=i.hash;b.directionalLength===u&&b.pointLength===d&&b.spotLength===h&&b.rectAreaLength===f&&b.hemiLength===p&&b.numDirectionalShadows===m&&b.numPointShadows===g&&b.numSpotShadows===v||(i.directional.length=u,i.spot.length=h,i.rectArea.length=f,i.point.length=d,i.hemi.length=p,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=v,i.spotShadowMap.length=v,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotShadowMatrix.length=v,b.directionalLength=u,b.pointLength=d,b.spotLength=h,b.rectAreaLength=f,b.hemiLength=p,b.numDirectionalShadows=m,b.numPointShadows=g,b.numSpotShadows=v,i.version=JR++)},setupView:function(e,t){let n=0,r=0,l=0,c=0,u=0;const d=t.matrixWorldInverse;for(let t=0,h=e.length;t<h;t++){const h=e[t];if(h.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(h.matrixWorld),a.setFromMatrixPosition(h.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(d),n++}else if(h.isSpotLight){const e=i.spot[l];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(d),e.direction.setFromMatrixPosition(h.matrixWorld),a.setFromMatrixPosition(h.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(d),l++}else if(h.isRectAreaLight){const e=i.rectArea[c];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(d),s.identity(),o.copy(h.matrixWorld),o.premultiply(d),s.extractRotation(o),e.halfWidth.set(.5*h.width,0,0),e.halfHeight.set(0,.5*h.height,0),e.halfWidth.applyMatrix4(s),e.halfHeight.applyMatrix4(s),c++}else if(h.isPointLight){const e=i.point[r];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(d),r++}else if(h.isHemisphereLight){const e=i.hemi[u];e.direction.setFromMatrixPosition(h.matrixWorld),e.direction.transformDirection(d),u++}}},state:i}}function QR(e,t){const n=new KR(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function eP(e,t){let n=new WeakMap;return{get:function(r,i=0){let a;return!1===n.has(r)?(a=new QR(e,t),n.set(r,[a])):i>=n.get(r).length?(a=new QR(e,t),n.get(r).push(a)):a=n.get(r)[i],a},dispose:function(){n=new WeakMap}}}class tP extends LE{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=WM,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class nP extends LE{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new gA,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function rP(e,t,n){let r=new FC;const i=new zS,a=new zS,o=new lA,s=new tP({depthPacking:XM}),l=new nP,c={},u=n.maxTextureSize,d={0:E_,1:A_,2:C_},h=new MC({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new zS},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const p=new QE;p.setAttribute("position",new BE(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new vC(p,h),g=this;function v(n,r){const a=t.update(m);h.defines.VSM_SAMPLES!==n.blurSamples&&(h.defines.VSM_SAMPLES=n.blurSamples,f.defines.VSM_SAMPLES=n.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new cA(i.x,i.y)),h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,a,h,m,null),f.uniforms.shadow_pass.value=n.mapPass.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,a,f,m,null)}function y(t,n,r,i,a,o){let u=null;const h=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(u=void 0!==h?h:!0===r.isPointLight?l:s,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0){const e=u.uuid,t=n.uuid;let r=c[e];void 0===r&&(r={},c[e]=r);let i=r[t];void 0===i&&(i=u.clone(),r[t]=i),u=i}return u.visible=n.visible,u.wireframe=n.wireframe,u.side=o===S_?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:d[n.side],u.alphaMap=n.alphaMap,u.alphaTest=n.alphaTest,u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.displacementMap=n.displacementMap,u.displacementScale=n.displacementScale,u.displacementBias=n.displacementBias,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,!0===r.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(r.matrixWorld),u.nearDistance=i,u.farDistance=a),u}function b(n,i,a,o,s){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===S_)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);const r=t.update(n),i=n.material;if(Array.isArray(i)){const t=r.groups;for(let l=0,c=t.length;l<c;l++){const c=t[l],u=i[c.materialIndex];if(u&&u.visible){const t=y(n,u,o,a.near,a.far,s);e.renderBufferDirect(a,null,r,t,n,c)}}}else if(i.visible){const t=y(n,i,o,a.near,a.far,s);e.renderBufferDirect(a,null,r,t,n,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)b(l[e],i,a,o,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=w_,this.render=function(t,n,s){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),h=e.state;h.setBlending(P_),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(let l=0,c=t.length;l<c;l++){const c=t[l],d=c.shadow;if(void 0===d){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===d.autoUpdate&&!1===d.needsUpdate)continue;i.copy(d.mapSize);const f=d.getFrameExtents();if(i.multiply(f),a.copy(d.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(a.x=Math.floor(u/f.x),i.x=a.x*f.x,d.mapSize.x=a.x),i.y>u&&(a.y=Math.floor(u/f.y),i.y=a.y*f.y,d.mapSize.y=a.y)),null===d.map){const e=this.type!==S_?{minFilter:Sw,magFilter:Sw}:{};d.map=new cA(i.x,i.y,e),d.map.texture.name=c.name+".shadowMap",d.camera.updateProjectionMatrix()}e.setRenderTarget(d.map),e.clear();const p=d.getViewportCount();for(let e=0;e<p;e++){const t=d.getViewport(e);o.set(a.x*t.x,a.y*t.y,a.x*t.z,a.y*t.w),h.viewport(o),d.updateMatrices(c,e),r=d.getFrustum(),b(n,s,d.camera,c,this.type)}!0!==d.isPointLightShadow&&this.type===S_&&v(d,s),d.needsUpdate=!1}g.needsUpdate=!1,e.setRenderTarget(l,c,d)}}function iP(e,t,n){const r=n.isWebGL2,i=new function(){let t=!1;const n=new lA;let r=null;const i=new lA(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,a,o,s){!0===s&&(t*=o,r*=o,a*=o),n.set(t,r,a,o),!1===i.equals(n)&&(e.clearColor(t,r,a,o),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},a=new function(){let t=!1,n=null,r=null,i=null;return{setTest:function(e){e?U(2929):H(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case K_:e.depthFunc(512);break;case Q_:e.depthFunc(519);break;case ew:e.depthFunc(513);break;case tw:e.depthFunc(515);break;case nw:e.depthFunc(514);break;case rw:e.depthFunc(518);break;case iw:e.depthFunc(516);break;case aw:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},o=new function(){let t=!1,n=null,r=null,i=null,a=null,o=null,s=null,l=null,c=null;return{setTest:function(e){t||(e?U(2960):H(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&i===n&&a===o||(e.stencilFunc(t,n,o),r=t,i=n,a=o)},setOp:function(t,n,r){o===t&&s===n&&l===r||(e.stencilOp(t,n,r),o=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,o=null,s=null,l=null,c=null}}},s=new WeakMap,l=new WeakMap;let c={},u={},d=new WeakMap,h=[],f=null,p=!1,m=null,g=null,v=null,y=null,b=null,x=null,_=null,w=!1,M=null,S=null,A=null,E=null,C=null;const T=e.getParameter(35661);let R=!1,P=0;const L=e.getParameter(7938);-1!==L.indexOf("WebGL")?(P=parseFloat(/^WebGL (\d)/.exec(L)[1]),R=P>=1):-1!==L.indexOf("OpenGL ES")&&(P=parseFloat(/^OpenGL ES (\d)/.exec(L)[1]),R=P>=2);let D=null,I={};const k=e.getParameter(3088),B=e.getParameter(2978),F=(new lA).fromArray(k),N=(new lA).fromArray(B);function O(t,n,r){const i=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let t=0;t<r;t++)e.texImage2D(n+t,0,6408,1,1,0,6408,5121,i);return a}const z={};function U(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function H(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}z[3553]=O(3553,3553,1),z[34067]=O(34067,34069,6),i.setClear(0,0,0,1),a.setClear(1),o.setClear(0),U(2929),a.setFunc(tw),W(!1),X(y_),U(2884),j(P_);const G={[F_]:32774,[N_]:32778,[O_]:32779};if(r)G[z_]=32775,G[U_]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&(G[z_]=e.MIN_EXT,G[U_]=e.MAX_EXT)}const V={[H_]:0,[G_]:1,[V_]:768,[W_]:770,[$_]:776,[Z_]:774,[q_]:772,[j_]:769,[X_]:771,[J_]:775,[Y_]:773};function j(t,n,r,i,a,o,s,l){if(t!==P_){if(!1===p&&(U(3042),p=!0),t===B_)a=a||n,o=o||r,s=s||i,n===g&&a===b||(e.blendEquationSeparate(G[n],G[a]),g=n,b=a),r===v&&i===y&&o===x&&s===_||(e.blendFuncSeparate(V[r],V[i],V[o],V[s]),v=r,y=i,x=o,_=s),m=t,w=null;else if(t!==m||l!==w){if(g===F_&&b===F_||(e.blendEquation(32774),g=F_,b=F_),l)switch(t){case L_:e.blendFuncSeparate(1,771,1,771);break;case D_:e.blendFunc(1,1);break;case I_:e.blendFuncSeparate(0,769,0,1);break;case k_:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case L_:e.blendFuncSeparate(770,771,1,771);break;case D_:e.blendFunc(770,1);break;case I_:e.blendFuncSeparate(0,769,0,1);break;case k_:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}v=null,y=null,x=null,_=null,m=t,w=l}}else!0===p&&(H(3042),p=!1)}function W(t){M!==t&&(t?e.frontFace(2304):e.frontFace(2305),M=t)}function X(t){t!==v_?(U(2884),t!==S&&(t===y_?e.cullFace(1029):t===b_?e.cullFace(1028):e.cullFace(1032))):H(2884),S=t}function q(t,n,r){t?(U(32823),E===n&&C===r||(e.polygonOffset(n,r),E=n,C=r)):H(32823)}function Y(t){void 0===t&&(t=33984+T-1),D!==t&&(e.activeTexture(t),D=t)}return{buffers:{color:i,depth:a,stencil:o},enable:U,disable:H,bindFramebuffer:function(t,n){return u[t]!==n&&(e.bindFramebuffer(t,n),u[t]=n,r&&(36009===t&&(u[36160]=n),36160===t&&(u[36009]=n)),!0)},drawBuffers:function(r,i){let a=h,o=!1;if(r)if(a=d.get(i),void 0===a&&(a=[],d.set(i,a)),r.isWebGLMultipleRenderTargets){const e=r.texture;if(a.length!==e.length||36064!==a[0]){for(let t=0,n=e.length;t<n;t++)a[t]=36064+t;a.length=e.length,o=!0}}else 36064!==a[0]&&(a[0]=36064,o=!0);else 1029!==a[0]&&(a[0]=1029,o=!0);o&&(n.isWebGL2?e.drawBuffers(a):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(a))},useProgram:function(t){return f!==t&&(e.useProgram(t),f=t,!0)},setBlending:j,setMaterial:function(e,t){e.side===C_?H(2884):U(2884);let n=e.side===E_;t&&(n=!n),W(n),e.blending===L_&&!1===e.transparent?j(P_):j(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),a.setFunc(e.depthFunc),a.setTest(e.depthTest),a.setMask(e.depthWrite),i.setMask(e.colorWrite);const r=e.stencilWrite;o.setTest(r),r&&(o.setMask(e.stencilWriteMask),o.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),o.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),q(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?U(32926):H(32926)},setFlipSided:W,setCullFace:X,setLineWidth:function(t){t!==A&&(R&&e.lineWidth(t),A=t)},setPolygonOffset:q,setScissorTest:function(e){e?U(3089):H(3089)},activeTexture:Y,bindTexture:function(t,n){null===D&&Y();let r=I[D];void 0===r&&(r={type:void 0,texture:void 0},I[D]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||z[t]),r.type=t,r.texture=n)},unbindTexture:function(){const t=I[D];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},updateUBOMapping:function(t,n){let r=l.get(n);void 0===r&&(r=new WeakMap,l.set(n,r));let i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){const r=l.get(n).get(t);s.get(t)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),s.set(t,r))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===F.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),F.copy(t))},viewport:function(t){!1===N.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),N.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===r&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),c={},D=null,I={},u={},d=new WeakMap,h=[],f=null,p=!1,m=null,g=null,v=null,y=null,b=null,x=null,_=null,w=!1,M=null,S=null,A=null,E=null,C=null,F.set(0,0,e.canvas.width,e.canvas.height),N.set(0,0,e.canvas.width,e.canvas.height),i.reset(),a.reset(),o.reset()}}}function aP(e,t,n,r,i,a,o){const s=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,d=i.maxSamples,h=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,f=/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let m;const g=new WeakMap;let v=!1;try{v="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function y(e,t){return v?new OffscreenCanvas(e,t):jS("canvas")}function b(e,t,n,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?NS:Math.floor,a=r(i*e.width),o=r(i*e.height);void 0===m&&(m=y(a,o));const s=n?y(a,o):m;return s.width=a,s.height=o,s.getContext("2d").drawImage(e,0,0,a,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+a+"x"+o+")."),s}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function x(e){return BS(e.width)&&BS(e.height)}function _(e,t){return e.generateMipmaps&&t&&e.minFilter!==Sw&&e.minFilter!==Rw}function w(t){e.generateMipmap(t)}function M(n,r,i,a,o=!1){if(!1===s)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=r;return 6403===r&&(5126===i&&(l=33326),5131===i&&(l=33325),5121===i&&(l=33321)),33319===r&&(5126===i&&(l=33328),5131===i&&(l=33327),5121===i&&(l=33323)),6408===r&&(5126===i&&(l=34836),5131===i&&(l=34842),5121===i&&(l=a===jM&&!1===o?35907:32856),32819===i&&(l=32854),32820===i&&(l=32855)),33325!==l&&33326!==l&&33327!==l&&33328!==l&&34842!==l&&34836!==l||t.get("EXT_color_buffer_float"),l}function S(e,t,n){return!0===_(e,n)||e.isFramebufferTexture&&e.minFilter!==Sw&&e.minFilter!==Rw?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function A(e){return e===Sw||e===Aw||e===Cw?9728:9729}function E(e){const t=e.target;t.removeEventListener("dispose",E),function(e){const t=r.get(e);if(void 0===t.__webglInit)return;const n=e.source,i=g.get(n);if(i){const r=i[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&T(e),0===Object.keys(i).length&&g.delete(n)}r.remove(e)}(t),t.isVideoTexture&&p.delete(t)}function C(t){const n=t.target;n.removeEventListener("dispose",C),function(t){const n=t.texture,i=r.get(t),a=r.get(n);if(void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),o.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(i.__webglFramebuffer[t]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[t]);else{if(e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let t=0;t<i.__webglColorRenderbuffer.length;t++)i.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(i.__webglColorRenderbuffer[t]);i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);i.__webglTexture&&(e.deleteTexture(i.__webglTexture),o.memory.textures--),r.remove(n[t])}r.remove(n),r.remove(t)}(n)}function T(t){const n=r.get(t);e.deleteTexture(n.__webglTexture);const i=t.source;delete g.get(i)[n.__cacheKey],o.memory.textures--}let R=0;function P(e,t){const i=r.get(e);if(e.isVideoTexture&&function(e){const t=o.render.frame;p.get(e)!==t&&(p.set(e,t),e.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&i.__version!==e.version){const n=e.image;if(null===n)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==n.complete)return void B(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}const L={[_w]:10497,[ww]:33071,[Mw]:33648},D={[Sw]:9728,[Aw]:9984,[Cw]:9986,[Rw]:9729,[Pw]:9985,[Dw]:9987};function I(n,a,o){if(o?(e.texParameteri(n,10242,L[a.wrapS]),e.texParameteri(n,10243,L[a.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,L[a.wrapR]),e.texParameteri(n,10240,D[a.magFilter]),e.texParameteri(n,10241,D[a.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),a.wrapS===ww&&a.wrapT===ww||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,A(a.magFilter)),e.texParameteri(n,10241,A(a.minFilter)),a.minFilter!==Sw&&a.minFilter!==Rw&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const o=t.get("EXT_texture_filter_anisotropic");if(a.type===Uw&&!1===t.has("OES_texture_float_linear"))return;if(!1===s&&a.type===Hw&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function k(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",E));const i=n.source;let a=g.get(i);void 0===a&&(a={},g.set(i,a));const s=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.encoding),t.join()}(n);if(s!==t.__cacheKey){void 0===a[s]&&(a[s]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,r=!0),a[s].usedTimes++;const i=a[t.__cacheKey];void 0!==i&&(a[t.__cacheKey].usedTimes--,0===i.usedTimes&&T(n)),t.__cacheKey=s,t.__webglTexture=a[s].texture}return r}function B(t,r,i){let o=3553;r.isDataArrayTexture&&(o=35866),r.isData3DTexture&&(o=32879);const l=k(t,r),c=r.source;if(n.activeTexture(33984+i),n.bindTexture(o,t.__webglTexture),c.version!==c.__currentVersion||!0===l){e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const t=function(e){return!s&&(e.wrapS!==ww||e.wrapT!==ww||e.minFilter!==Sw&&e.minFilter!==Rw)}(r)&&!1===x(r.image);let i=b(r.image,t,!1,u);i=H(r,i);const d=x(i)||s,h=a.convert(r.format,r.encoding);let f,p=a.convert(r.type),m=M(r.internalFormat,h,p,r.encoding,r.isVideoTexture);I(o,r,d);const g=r.mipmaps,v=s&&!0!==r.isVideoTexture,y=void 0===c.__currentVersion||!0===l,A=S(r,i,d);if(r.isDepthTexture)m=6402,s?m=r.type===Uw?36012:r.type===zw?33190:r.type===jw?35056:33189:r.type===Uw&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===Jw&&6402===m&&r.type!==Nw&&r.type!==zw&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=zw,p=a.convert(r.type)),r.format===$w&&6402===m&&(m=34041,r.type!==jw&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=jw,p=a.convert(r.type))),y&&(v?n.texStorage2D(3553,1,m,i.width,i.height):n.texImage2D(3553,0,m,i.width,i.height,0,h,p,null));else if(r.isDataTexture)if(g.length>0&&d){v&&y&&n.texStorage2D(3553,A,m,g[0].width,g[0].height);for(let e=0,t=g.length;e<t;e++)f=g[e],v?n.texSubImage2D(3553,e,0,0,f.width,f.height,h,p,f.data):n.texImage2D(3553,e,m,f.width,f.height,0,h,p,f.data);r.generateMipmaps=!1}else v?(y&&n.texStorage2D(3553,A,m,i.width,i.height),n.texSubImage2D(3553,0,0,0,i.width,i.height,h,p,i.data)):n.texImage2D(3553,0,m,i.width,i.height,0,h,p,i.data);else if(r.isCompressedTexture){v&&y&&n.texStorage2D(3553,A,m,g[0].width,g[0].height);for(let e=0,t=g.length;e<t;e++)f=g[e],r.format!==qw?null!==h?v?n.compressedTexSubImage2D(3553,e,0,0,f.width,f.height,h,f.data):n.compressedTexImage2D(3553,e,m,f.width,f.height,0,f.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):v?n.texSubImage2D(3553,e,0,0,f.width,f.height,h,p,f.data):n.texImage2D(3553,e,m,f.width,f.height,0,h,p,f.data)}else if(r.isDataArrayTexture)v?(y&&n.texStorage3D(35866,A,m,i.width,i.height,i.depth),n.texSubImage3D(35866,0,0,0,0,i.width,i.height,i.depth,h,p,i.data)):n.texImage3D(35866,0,m,i.width,i.height,i.depth,0,h,p,i.data);else if(r.isData3DTexture)v?(y&&n.texStorage3D(32879,A,m,i.width,i.height,i.depth),n.texSubImage3D(32879,0,0,0,0,i.width,i.height,i.depth,h,p,i.data)):n.texImage3D(32879,0,m,i.width,i.height,i.depth,0,h,p,i.data);else if(r.isFramebufferTexture){if(y)if(v)n.texStorage2D(3553,A,m,i.width,i.height);else{let e=i.width,t=i.height;for(let r=0;r<A;r++)n.texImage2D(3553,r,m,e,t,0,h,p,null),e>>=1,t>>=1}}else if(g.length>0&&d){v&&y&&n.texStorage2D(3553,A,m,g[0].width,g[0].height);for(let e=0,t=g.length;e<t;e++)f=g[e],v?n.texSubImage2D(3553,e,0,0,h,p,f):n.texImage2D(3553,e,m,h,p,f);r.generateMipmaps=!1}else v?(y&&n.texStorage2D(3553,A,m,i.width,i.height),n.texSubImage2D(3553,0,0,0,h,p,i)):n.texImage2D(3553,0,m,h,p,i);_(r,d)&&w(o),c.__currentVersion=c.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}function F(t,i,o,s,l){const c=a.convert(o.format,o.encoding),u=a.convert(o.type),d=M(o.internalFormat,c,u,o.encoding);r.get(i).__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,d,i.width,i.height,i.depth,0,c,u,null):n.texImage2D(l,0,d,i.width,i.height,0,c,u,null)),n.bindFramebuffer(36160,t),U(i)?h.framebufferTexture2DMultisampleEXT(36160,s,l,r.get(o).__webglTexture,0,z(i)):e.framebufferTexture2D(36160,s,l,r.get(o).__webglTexture,0),n.bindFramebuffer(36160,null)}function N(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r||U(n)){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===Uw?i=36012:t.type===zw&&(i=33190));const r=z(n);U(n)?h.renderbufferStorageMultisampleEXT(36161,r,i,n.width,n.height):e.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){const i=z(n);r&&!1===U(n)?e.renderbufferStorageMultisample(36161,i,35056,n.width,n.height):U(n)?h.renderbufferStorageMultisampleEXT(36161,i,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let i=0;i<t.length;i++){const o=t[i],s=a.convert(o.format,o.encoding),l=a.convert(o.type),c=M(o.internalFormat,s,l,o.encoding),u=z(n);r&&!1===U(n)?e.renderbufferStorageMultisample(36161,u,c,n.width,n.height):U(n)?h.renderbufferStorageMultisampleEXT(36161,u,c,n.width,n.height):e.renderbufferStorage(36161,c,n.width,n.height)}}e.bindRenderbuffer(36161,null)}function O(t){const i=r.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),P(i.depthTexture,0);const a=r.get(i.depthTexture).__webglTexture,o=z(i);if(i.depthTexture.format===Jw)U(i)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,a,0,o):e.framebufferTexture2D(36160,36096,3553,a,0);else{if(i.depthTexture.format!==$w)throw new Error("Unknown depthTexture format");U(i)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,a,0,o):e.framebufferTexture2D(36160,33306,3553,a,0)}}(i.__webglFramebuffer,t)}else if(a){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(36160,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=e.createRenderbuffer(),N(i.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),N(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function z(e){return Math.min(d,e.samples)}function U(e){const n=r.get(e);return s&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function H(e,n){const r=e.encoding,i=e.format,a=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===AS||r!==VM&&(r===jM?!1===s?!0===t.has("EXT_sRGB")&&i===qw?(e.format=AS,e.minFilter=Rw,e.generateMipmaps=!1):n=rA.sRGBToLinear(n):i===qw&&a===kw||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",r)),n}this.allocateTextureUnit=function(){const e=R;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),R+=1,e},this.resetTextureUnits=function(){R=0},this.setTexture2D=P,this.setTexture2DArray=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?B(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?B(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=function(t,i){const o=r.get(t);t.version>0&&o.__version!==t.version?function(t,r,i){if(6!==r.image.length)return;const o=k(t,r),l=r.source;if(n.activeTexture(33984+i),n.bindTexture(34067,t.__webglTexture),l.version!==l.__currentVersion||!0===o){e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const t=r.isCompressedTexture||r.image[0].isCompressedTexture,i=r.image[0]&&r.image[0].isDataTexture,u=[];for(let e=0;e<6;e++)u[e]=t||i?i?r.image[e].image:r.image[e]:b(r.image[e],!1,!0,c),u[e]=H(r,u[e]);const d=u[0],h=x(d)||s,f=a.convert(r.format,r.encoding),p=a.convert(r.type),m=M(r.internalFormat,f,p,r.encoding),g=s&&!0!==r.isVideoTexture,v=void 0===l.__currentVersion||!0===o;let y,A=S(r,d,h);if(I(34067,r,h),t){g&&v&&n.texStorage2D(34067,A,m,d.width,d.height);for(let e=0;e<6;e++){y=u[e].mipmaps;for(let t=0;t<y.length;t++){const i=y[t];r.format!==qw?null!==f?g?n.compressedTexSubImage2D(34069+e,t,0,0,i.width,i.height,f,i.data):n.compressedTexImage2D(34069+e,t,m,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):g?n.texSubImage2D(34069+e,t,0,0,i.width,i.height,f,p,i.data):n.texImage2D(34069+e,t,m,i.width,i.height,0,f,p,i.data)}}}else{y=r.mipmaps,g&&v&&(y.length>0&&A++,n.texStorage2D(34067,A,m,u[0].width,u[0].height));for(let e=0;e<6;e++)if(i){g?n.texSubImage2D(34069+e,0,0,0,u[e].width,u[e].height,f,p,u[e].data):n.texImage2D(34069+e,0,m,u[e].width,u[e].height,0,f,p,u[e].data);for(let t=0;t<y.length;t++){const r=y[t].image[e].image;g?n.texSubImage2D(34069+e,t+1,0,0,r.width,r.height,f,p,r.data):n.texImage2D(34069+e,t+1,m,r.width,r.height,0,f,p,r.data)}}else{g?n.texSubImage2D(34069+e,0,0,0,f,p,u[e]):n.texImage2D(34069+e,0,m,f,p,u[e]);for(let t=0;t<y.length;t++){const r=y[t];g?n.texSubImage2D(34069+e,t+1,0,0,f,p,r.image[e]):n.texImage2D(34069+e,t+1,m,f,p,r.image[e])}}}_(r,h)&&w(34067),l.__currentVersion=l.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}(o,t,i):(n.activeTexture(33984+i),n.bindTexture(34067,o.__webglTexture))},this.rebindTextures=function(e,t,n){const i=r.get(e);void 0!==t&&F(i.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&O(e)},this.setupRenderTarget=function(t){const l=t.texture,c=r.get(t),u=r.get(l);t.addEventListener("dispose",C),!0!==t.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=l.version,o.memory.textures++);const d=!0===t.isWebGLCubeRenderTarget,h=!0===t.isWebGLMultipleRenderTargets,f=x(t)||s;if(d){c.__webglFramebuffer=[];for(let t=0;t<6;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else{if(c.__webglFramebuffer=e.createFramebuffer(),h)if(i.drawBuffers){const n=t.texture;for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(s&&t.samples>0&&!1===U(t)){const r=h?l:[l];c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer);for(let n=0;n<r.length;n++){const i=r[n];c.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(36161,c.__webglColorRenderbuffer[n]);const o=a.convert(i.format,i.encoding),s=a.convert(i.type),l=M(i.internalFormat,o,s,i.encoding),u=z(t);e.renderbufferStorageMultisample(36161,u,l,t.width,t.height),e.framebufferRenderbuffer(36160,36064+n,36161,c.__webglColorRenderbuffer[n])}e.bindRenderbuffer(36161,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),N(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}}if(d){n.bindTexture(34067,u.__webglTexture),I(34067,l,f);for(let e=0;e<6;e++)F(c.__webglFramebuffer[e],t,l,36064,34069+e);_(l,f)&&w(34067),n.unbindTexture()}else if(h){const e=t.texture;for(let i=0,a=e.length;i<a;i++){const a=e[i],o=r.get(a);n.bindTexture(3553,o.__webglTexture),I(3553,a,f),F(c.__webglFramebuffer,t,a,36064+i,3553),_(a,f)&&w(3553)}n.unbindTexture()}else{let e=3553;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(s?e=t.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(e,u.__webglTexture),I(e,l,f),F(c.__webglFramebuffer,t,l,36064,e),_(l,f)&&w(e),n.unbindTexture()}t.depthBuffer&&O(t)},this.updateRenderTargetMipmap=function(e){const t=x(e)||s,i=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let a=0,o=i.length;a<o;a++){const o=i[a];if(_(o,t)){const t=e.isWebGLCubeRenderTarget?34067:3553,i=r.get(o).__webglTexture;n.bindTexture(t,i),w(t),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(s&&t.samples>0&&!1===U(t)){const i=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],a=t.width,o=t.height;let s=16384;const l=[],c=t.stencilBuffer?33306:36096,u=r.get(t),d=!0===t.isWebGLMultipleRenderTargets;if(d)for(let t=0;t<i.length;t++)n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+t,36161,null),n.bindFramebuffer(36160,u.__webglFramebuffer),e.framebufferTexture2D(36009,36064+t,3553,null,0);n.bindFramebuffer(36008,u.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,u.__webglFramebuffer);for(let n=0;n<i.length;n++){l.push(36064+n),t.depthBuffer&&l.push(c);const h=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;if(!1===h&&(t.depthBuffer&&(s|=256),t.stencilBuffer&&(s|=1024)),d&&e.framebufferRenderbuffer(36008,36064,36161,u.__webglColorRenderbuffer[n]),!0===h&&(e.invalidateFramebuffer(36008,[c]),e.invalidateFramebuffer(36009,[c])),d){const t=r.get(i[n]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,t,0)}e.blitFramebuffer(0,0,a,o,0,0,a,o,s,9728),f&&e.invalidateFramebuffer(36008,l)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),d)for(let t=0;t<i.length;t++){n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+t,36161,u.__webglColorRenderbuffer[t]);const a=r.get(i[t]).__webglTexture;n.bindFramebuffer(36160,u.__webglFramebuffer),e.framebufferTexture2D(36009,36064+t,3553,a,0)}n.bindFramebuffer(36009,u.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=O,this.setupFrameBufferTexture=F,this.useMultisampledRTT=U}function oP(e,t,n){const r=n.isWebGL2;return{convert:function(n,i=null){let a;if(n===kw)return 5121;if(n===Gw)return 32819;if(n===Vw)return 32820;if(n===Bw)return 5120;if(n===Fw)return 5122;if(n===Nw)return 5123;if(n===Ow)return 5124;if(n===zw)return 5125;if(n===Uw)return 5126;if(n===Hw)return r?5131:(a=t.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(n===Ww)return 6406;if(n===qw)return 6408;if(n===Yw)return 6409;if(n===Zw)return 6410;if(n===Jw)return 6402;if(n===$w)return 34041;if(n===Kw)return 6403;if(n===Xw)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(n===AS)return a=t.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(n===Qw)return 36244;if(n===eM)return 33319;if(n===tM)return 33320;if(n===nM)return 36249;if(n===rM||n===iM||n===aM||n===oM)if(i===jM){if(a=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(n===rM)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===iM)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===aM)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===oM)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=t.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(n===rM)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===iM)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===aM)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===oM)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===sM||n===lM||n===cM||n===uM){if(a=t.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(n===sM)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===lM)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===cM)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===uM)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===dM)return a=t.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===hM||n===fM){if(a=t.get("WEBGL_compressed_texture_etc"),null===a)return null;if(n===hM)return i===jM?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(n===fM)return i===jM?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(n===pM||n===mM||n===gM||n===vM||n===yM||n===bM||n===xM||n===_M||n===wM||n===MM||n===SM||n===AM||n===EM||n===CM){if(a=t.get("WEBGL_compressed_texture_astc"),null===a)return null;if(n===pM)return i===jM?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===mM)return i===jM?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===gM)return i===jM?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===vM)return i===jM?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===yM)return i===jM?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===bM)return i===jM?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===xM)return i===jM?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===_M)return i===jM?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===wM)return i===jM?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===MM)return i===jM?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===SM)return i===jM?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===AM)return i===jM?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===EM)return i===jM?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===CM)return i===jM?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===TM){if(a=t.get("EXT_texture_compression_bptc"),null===a)return null;if(n===TM)return i===jM?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}return n===jw?r?34042:(a=t.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[n]?e[n]:null}}}class sP extends AC{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class lP extends yE{constructor(){super(),this.isGroup=!0,this.type="Group"}}const cP={type:"move"};class uP{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new lP,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new lP,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new gA,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new gA),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new lP,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new gA,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new gA),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,a=null;const o=this._targetRay,s=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){a=!0;for(const r of e.hand.values()){const e=t.getJointPose(r,n);if(void 0===l.joints[r.jointName]){const e=new lP;e.matrixAutoUpdate=!1,e.visible=!1,l.joints[r.jointName]=e,l.add(e)}const i=l.joints[r.jointName];null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.jointRadius=e.radius),i.visible=null!==e}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],o=r.position.distanceTo(i.position),s=.02,c=.005;l.inputState.pinching&&o>s+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&o<=s-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1));null!==o&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(cP)))}return null!==o&&(o.visible=null!==r),null!==s&&(s.visible=null!==i),null!==l&&(l.visible=null!==a),this}}class dP extends sA{constructor(e,t,n,r,i,a,o,s,l,c){if((c=void 0!==c?c:Jw)!==Jw&&c!==$w)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Jw&&(n=zw),void 0===n&&c===$w&&(n=jw),super(null,r,i,a,o,s,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==o?o:Sw,this.minFilter=void 0!==s?s:Sw,this.flipY=!1,this.generateMipmaps=!1}}class hP extends ES{constructor(e,t){super();const n=this;let r=null,i=1,a=null,o="local-floor",s=null,l=null,c=null,u=null,d=null,h=null;const f=t.getContextAttributes();let p=null,m=null;const g=[],v=[],y=new AC;y.layers.enable(1),y.viewport=new lA;const b=new AC;b.layers.enable(2),b.viewport=new lA;const x=[y,b],_=new sP;_.layers.enable(1),_.layers.enable(2);let w=null,M=null;function S(e){const t=v.indexOf(e.inputSource);if(-1===t)return;const n=g[t];void 0!==n&&n.dispatchEvent({type:e.type,data:e.inputSource})}function A(){r.removeEventListener("select",S),r.removeEventListener("selectstart",S),r.removeEventListener("selectend",S),r.removeEventListener("squeeze",S),r.removeEventListener("squeezestart",S),r.removeEventListener("squeezeend",S),r.removeEventListener("end",A),r.removeEventListener("inputsourceschange",E);for(let e=0;e<g.length;e++){const t=v[e];null!==t&&(v[e]=null,g[e].disconnect(t))}w=null,M=null,e.setRenderTarget(p),d=null,u=null,c=null,r=null,m=null,L.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function E(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=v.indexOf(n);r>=0&&(v[r]=null,g[r].dispatchEvent({type:"disconnected",data:n}))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let r=v.indexOf(n);if(-1===r){for(let e=0;e<g.length;e++){if(e>=v.length){v.push(n),r=e;break}if(null===v[e]){v[e]=n,r=e;break}}if(-1===r)break}const i=g[r];i&&i.dispatchEvent({type:"connected",data:n})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=g[e];return void 0===t&&(t=new uP,g[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=g[e];return void 0===t&&(t=new uP,g[e]=t),t.getGripSpace()},this.getHand=function(e){let t=g[e];return void 0===t&&(t=new uP,g[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){o=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return s||a},this.setReferenceSpace=function(e){s=e},this.getBaseLayer=function(){return null!==u?u:d},this.getBinding=function(){return c},this.getFrame=function(){return h},this.getSession=function(){return r},this.setSession=async function(l){if(r=l,null!==r){if(p=e.getRenderTarget(),r.addEventListener("select",S),r.addEventListener("selectstart",S),r.addEventListener("selectend",S),r.addEventListener("squeeze",S),r.addEventListener("squeezestart",S),r.addEventListener("squeezeend",S),r.addEventListener("end",A),r.addEventListener("inputsourceschange",E),!0!==f.xrCompatible&&await t.makeXRCompatible(),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2){const n={antialias:void 0!==r.renderState.layers||f.antialias,alpha:f.alpha,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:i};d=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:d}),m=new cA(d.framebufferWidth,d.framebufferHeight,{format:qw,type:kw,encoding:e.outputEncoding})}else{let n=null,a=null,o=null;f.depth&&(o=f.stencil?35056:33190,n=f.stencil?$w:Jw,a=f.stencil?jw:zw);const s={colorFormat:32856,depthFormat:o,scaleFactor:i};c=new XRWebGLBinding(r,t),u=c.createProjectionLayer(s),r.updateRenderState({layers:[u]}),m=new cA(u.textureWidth,u.textureHeight,{format:qw,type:kw,depthTexture:new dP(u.textureWidth,u.textureHeight,a,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:f.stencil,encoding:e.outputEncoding,samples:f.antialias?4:0}),e.properties.get(m).__ignoreDepthValues=u.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(1),s=null,a=await r.requestReferenceSpace(o),L.setContext(r),L.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const C=new gA,T=new gA;function R(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;_.near=b.near=y.near=e.near,_.far=b.far=y.far=e.far,w===_.near&&M===_.far||(r.updateRenderState({depthNear:_.near,depthFar:_.far}),w=_.near,M=_.far);const t=e.parent,n=_.cameras;R(_,t);for(let e=0;e<n.length;e++)R(n[e],t);_.matrixWorld.decompose(_.position,_.quaternion,_.scale),e.position.copy(_.position),e.quaternion.copy(_.quaternion),e.scale.copy(_.scale),e.matrix.copy(_.matrix),e.matrixWorld.copy(_.matrixWorld);const i=e.children;for(let e=0,t=i.length;e<t;e++)i[e].updateMatrixWorld(!0);2===n.length?function(e,t,n){C.setFromMatrixPosition(t.matrixWorld),T.setFromMatrixPosition(n.matrixWorld);const r=C.distanceTo(T),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],u=(i[8]-1)/i[0],d=(a[8]+1)/a[0],h=o*u,f=o*d,p=r/(-u+d),m=p*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=o+p,v=s+p,y=h-m,b=f+(r-m),x=l*s/v*g,_=c*s/v*g;e.projectionMatrix.makePerspective(y,b,x,_,g,v)}(_,y,b):_.projectionMatrix.copy(y.projectionMatrix)},this.getCamera=function(){return _},this.getFoveation=function(){return null!==u?u.fixedFoveation:null!==d?d.fixedFoveation:void 0},this.setFoveation=function(e){null!==u&&(u.fixedFoveation=e),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=e)};let P=null;const L=new NC;L.setAnimationLoop((function(t,n){if(l=n.getViewerPose(s||a),h=n,null!==l){const t=l.views;null!==d&&(e.setRenderTargetFramebuffer(m,d.framebuffer),e.setRenderTarget(m));let n=!1;t.length!==_.cameras.length&&(_.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){const i=t[r];let a=null;if(null!==d)a=d.getViewport(i);else{const t=c.getViewSubImage(u,i);a=t.viewport,0===r&&(e.setRenderTargetTextures(m,t.colorTexture,u.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(m))}let o=x[r];void 0===o&&(o=new AC,o.layers.enable(r),o.viewport=new lA,x[r]=o),o.matrix.fromArray(i.transform.matrix),o.projectionMatrix.fromArray(i.projectionMatrix),o.viewport.set(a.x,a.y,a.width,a.height),0===r&&_.matrix.copy(o.matrix),!0===n&&_.cameras.push(o)}}for(let e=0;e<g.length;e++){const t=v[e],r=g[e];null!==t&&void 0!==r&&r.update(t,n,s||a)}P&&P(t,n),h=null})),this.setAnimationLoop=function(e){P=e},this.dispose=function(){}}}function fP(e,t){function n(n,r){n.opacity.value=r.opacity,r.color&&n.diffuse.value.copy(r.color),r.emissive&&n.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(n.map.value=r.map),r.alphaMap&&(n.alphaMap.value=r.alphaMap),r.bumpMap&&(n.bumpMap.value=r.bumpMap,n.bumpScale.value=r.bumpScale,r.side===E_&&(n.bumpScale.value*=-1)),r.displacementMap&&(n.displacementMap.value=r.displacementMap,n.displacementScale.value=r.displacementScale,n.displacementBias.value=r.displacementBias),r.emissiveMap&&(n.emissiveMap.value=r.emissiveMap),r.normalMap&&(n.normalMap.value=r.normalMap,n.normalScale.value.copy(r.normalScale),r.side===E_&&n.normalScale.value.negate()),r.specularMap&&(n.specularMap.value=r.specularMap),r.alphaTest>0&&(n.alphaTest.value=r.alphaTest);const i=t.get(r).envMap;if(i&&(n.envMap.value=i,n.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,n.reflectivity.value=r.reflectivity,n.ior.value=r.ior,n.refractionRatio.value=r.refractionRatio),r.lightMap){n.lightMap.value=r.lightMap;const t=!0!==e.physicallyCorrectLights?Math.PI:1;n.lightMapIntensity.value=r.lightMapIntensity*t}let a,o;r.aoMap&&(n.aoMap.value=r.aoMap,n.aoMapIntensity.value=r.aoMapIntensity),r.map?a=r.map:r.specularMap?a=r.specularMap:r.displacementMap?a=r.displacementMap:r.normalMap?a=r.normalMap:r.bumpMap?a=r.bumpMap:r.roughnessMap?a=r.roughnessMap:r.metalnessMap?a=r.metalnessMap:r.alphaMap?a=r.alphaMap:r.emissiveMap?a=r.emissiveMap:r.clearcoatMap?a=r.clearcoatMap:r.clearcoatNormalMap?a=r.clearcoatNormalMap:r.clearcoatRoughnessMap?a=r.clearcoatRoughnessMap:r.iridescenceMap?a=r.iridescenceMap:r.iridescenceThicknessMap?a=r.iridescenceThicknessMap:r.specularIntensityMap?a=r.specularIntensityMap:r.specularColorMap?a=r.specularColorMap:r.transmissionMap?a=r.transmissionMap:r.thicknessMap?a=r.thicknessMap:r.sheenColorMap?a=r.sheenColorMap:r.sheenRoughnessMap&&(a=r.sheenRoughnessMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),n.uvTransform.value.copy(a.matrix)),r.aoMap?o=r.aoMap:r.lightMap&&(o=r.lightMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),n.uv2Transform.value.copy(o.matrix))}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,i,a,o){r.isMeshBasicMaterial||r.isMeshLambertMaterial?n(e,r):r.isMeshToonMaterial?(n(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,r)):r.isMeshPhongMaterial?(n(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(n(e,r),function(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap),t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function(e,t,n){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap)),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===E_&&e.clearcoatNormalScale.value.negate())),t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap)),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)),e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,r,o)):r.isMeshMatcapMaterial?(n(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?n(e,r):r.isMeshDistanceMaterial?(n(e,r),function(e,t){e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?n(e,r):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){let i;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?i=t.map:t.alphaMap&&(i=t.alphaMap),void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,i,a):r.isSpriteMaterial?function(e,t){let n;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?n=t.map:t.alphaMap&&(n=t.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function pP(e,t,n,r){let i={},a={},o=[];const s=n.isWebGL2?e.getParameter(35375):0;function l(e,t,n){const r=e.value;if(void 0===n[t])return n[t]="number"==typeof r?r:r.clone(),!0;if("number"==typeof r){if(n[t]!==r)return n[t]=r,!0}else{const e=n[t];if(!1===e.equals(r))return e.copy(r),!0}return!1}function c(e){const t=e.value,n={boundary:0,storage:0};return"number"==typeof t?(n.boundary=4,n.storage=4):t.isVector2?(n.boundary=8,n.storage=8):t.isVector3||t.isColor?(n.boundary=16,n.storage=12):t.isVector4?(n.boundary=16,n.storage=16):t.isMatrix3?(n.boundary=48,n.storage=48):t.isMatrix4?(n.boundary=64,n.storage=64):t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",t),n}function u(t){const n=t.target;n.removeEventListener("dispose",u);const r=o.indexOf(n.__bindingPointIndex);o.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete a[n.id]}return{bind:function(e,t){const n=t.program;r.uniformBlockBinding(e,n)},update:function(n,d){let h=i[n.id];void 0===h&&(function(e){const t=e.uniforms;let n=0;let r=0;for(let e=0,i=t.length;e<i;e++){const i=t[e],a=c(i);if(i.__data=new Float32Array(a.storage/Float32Array.BYTES_PER_ELEMENT),i.__offset=n,e>0){r=n%16;const e=16-r;0!==r&&e-a.boundary<0&&(n+=16-r,i.__offset=n)}n+=a.storage}r=n%16,r>0&&(n+=16-r),e.__size=n,e.__cache={}}(n),h=function(t){const n=function(){for(let e=0;e<s;e++)if(-1===o.indexOf(e))return o.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const r=e.createBuffer(),i=t.__size,a=t.usage;return e.bindBuffer(35345,r),e.bufferData(35345,i,a),e.bindBuffer(35345,null),e.bindBufferBase(35345,n,r),r}(n),i[n.id]=h,n.addEventListener("dispose",u));const f=d.program;r.updateUBOMapping(n,f);const p=t.render.frame;a[n.id]!==p&&(function(t){const n=i[t.id],r=t.uniforms,a=t.__cache;e.bindBuffer(35345,n);for(let t=0,n=r.length;t<n;t++){const n=r[t];if(!0===l(n,t,a)){const t=n.value,r=n.__offset;"number"==typeof t?(n.__data[0]=t,e.bufferSubData(35345,r,n.__data)):(n.value.isMatrix3?(n.__data[0]=n.value.elements[0],n.__data[1]=n.value.elements[1],n.__data[2]=n.value.elements[2],n.__data[3]=n.value.elements[0],n.__data[4]=n.value.elements[3],n.__data[5]=n.value.elements[4],n.__data[6]=n.value.elements[5],n.__data[7]=n.value.elements[0],n.__data[8]=n.value.elements[6],n.__data[9]=n.value.elements[7],n.__data[10]=n.value.elements[8],n.__data[11]=n.value.elements[0]):t.toArray(n.__data),e.bufferSubData(35345,r,n.__data))}}e.bindBuffer(35345,null)}(n),a[n.id]=p)},dispose:function(){for(const t in i)e.deleteBuffer(i[t]);o=[],i={},a={}}}}function mP(e={}){this.isWebGLRenderer=!0;const t=void 0!==e.canvas?e.canvas:function(){const e=jS("canvas");return e.style.display="block",e}(),n=void 0!==e.context?e.context:null,r=void 0===e.depth||e.depth,i=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,o=void 0===e.premultipliedAlpha||e.premultipliedAlpha,s=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let u;u=null!==n?n.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;let d=null,h=null;const f=[],p=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=VM,this.physicallyCorrectLights=!1,this.toneMapping=cw,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const m=this;let g=!1,v=0,y=0,b=null,x=-1,_=null;const w=new lA,M=new lA;let S=null,A=t.width,E=t.height,C=1,T=null,R=null;const P=new lA(0,0,A,E),L=new lA(0,0,A,E);let D=!1;const I=new FC;let k=!1,B=!1,F=null;const N=new qA,O=new zS,z=new gA,U={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function H(){return null===b?C:1}let G,V,j,W,X,q,Y,Z,J,$,K,Q,ee,te,ne,re,ie,ae,oe,se,le,ce,ue,de,he=n;function fe(e,n){for(let r=0;r<e.length;r++){const i=e[r],a=t.getContext(i,n);if(null!==a)return a}return null}try{const e={alpha:!0,depth:r,stencil:i,antialias:a,premultipliedAlpha:o,preserveDrawingBuffer:s,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${p_}`),t.addEventListener("webglcontextlost",ge,!1),t.addEventListener("webglcontextrestored",ve,!1),t.addEventListener("webglcontextcreationerror",ye,!1),null===he){const t=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&t.shift(),he=fe(t,e),null===he)throw fe(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===he.getShaderPrecisionFormat&&(he.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function pe(){G=new cT(he),V=new XC(he,G,e),G.init(V),ce=new oP(he,G,V),j=new iP(he,G,V),W=new hT,X=new jR,q=new aP(he,G,j,X,V,ce,W),Y=new YC(m),Z=new lT(m),J=new OC(he,V),ue=new jC(he,G,J,V),$=new uT(he,J,W,ue),K=new vT(he,$,J,W),oe=new gT(he,V,q),re=new qC(X),Q=new VR(m,Y,Z,G,V,ue,re),ee=new fP(m,X),te=new YR,ne=new eP(G,V),ae=new VC(m,Y,j,K,u,o),ie=new rP(m,K,V),de=new pP(he,W,V,j),se=new WC(he,G,W,V),le=new dT(he,G,W,V),W.programs=Q.programs,m.capabilities=V,m.extensions=G,m.properties=X,m.renderLists=te,m.shadowMap=ie,m.state=j,m.info=W}pe();const me=new hP(m,he);function ge(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function ve(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const e=W.autoReset,t=ie.enabled,n=ie.autoUpdate,r=ie.needsUpdate,i=ie.type;pe(),W.autoReset=e,ie.enabled=t,ie.autoUpdate=n,ie.needsUpdate=r,ie.type=i}function ye(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function be(e){const t=e.target;t.removeEventListener("dispose",be),function(e){(function(e){const t=X.get(e).programs;void 0!==t&&(t.forEach((function(e){Q.releaseProgram(e)})),e.isShaderMaterial&&Q.releaseShaderCache(e))})(e),X.remove(e)}(t)}this.xr=me,this.getContext=function(){return he},this.getContextAttributes=function(){return he.getContextAttributes()},this.forceContextLoss=function(){const e=G.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=G.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return C},this.setPixelRatio=function(e){void 0!==e&&(C=e,this.setSize(A,E,!1))},this.getSize=function(e){return e.set(A,E)},this.setSize=function(e,n,r){me.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(A=e,E=n,t.width=Math.floor(e*C),t.height=Math.floor(n*C),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(A*C,E*C).floor()},this.setDrawingBufferSize=function(e,n,r){A=e,E=n,C=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(w)},this.getViewport=function(e){return e.copy(P)},this.setViewport=function(e,t,n,r){e.isVector4?P.set(e.x,e.y,e.z,e.w):P.set(e,t,n,r),j.viewport(w.copy(P).multiplyScalar(C).floor())},this.getScissor=function(e){return e.copy(L)},this.setScissor=function(e,t,n,r){e.isVector4?L.set(e.x,e.y,e.z,e.w):L.set(e,t,n,r),j.scissor(M.copy(L).multiplyScalar(C).floor())},this.getScissorTest=function(){return D},this.setScissorTest=function(e){j.setScissorTest(D=e)},this.setOpaqueSort=function(e){T=e},this.setTransparentSort=function(e){R=e},this.getClearColor=function(e){return e.copy(ae.getClearColor())},this.setClearColor=function(){ae.setClearColor.apply(ae,arguments)},this.getClearAlpha=function(){return ae.getClearAlpha()},this.setClearAlpha=function(){ae.setClearAlpha.apply(ae,arguments)},this.clear=function(e=!0,t=!0,n=!0){let r=0;e&&(r|=16384),t&&(r|=256),n&&(r|=1024),he.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ge,!1),t.removeEventListener("webglcontextrestored",ve,!1),t.removeEventListener("webglcontextcreationerror",ye,!1),te.dispose(),ne.dispose(),X.dispose(),Y.dispose(),Z.dispose(),K.dispose(),ue.dispose(),de.dispose(),Q.dispose(),me.dispose(),me.removeEventListener("sessionstart",_e),me.removeEventListener("sessionend",we),F&&(F.dispose(),F=null),Me.stop()},this.renderBufferDirect=function(e,t,n,r,i,a){null===t&&(t=U);const o=i.isMesh&&i.matrixWorld.determinant()<0,s=function(e,t,n,r,i){!0!==t.isScene&&(t=U),q.resetTextureUnits();const a=t.fog,o=r.isMeshStandardMaterial?t.environment:null,s=null===b?m.outputEncoding:!0===b.isXRRenderTarget?b.texture.encoding:VM,l=(r.isMeshStandardMaterial?Z:Y).get(r.envMap||o),c=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!r.normalMap&&!!n.attributes.tangent,d=!!n.morphAttributes.position,f=!!n.morphAttributes.normal,p=!!n.morphAttributes.color,g=r.toneMapped?m.toneMapping:cw,v=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,y=void 0!==v?v.length:0,w=X.get(r),M=h.state.lights;if(!0===k&&(!0===B||e!==_)){const t=e===_&&r.id===x;re.setState(r,e,t)}let S=!1;r.version===w.__version?w.needsLights&&w.lightsStateVersion!==M.state.version||w.outputEncoding!==s||i.isInstancedMesh&&!1===w.instancing?S=!0:i.isInstancedMesh||!0!==w.instancing?i.isSkinnedMesh&&!1===w.skinning?S=!0:i.isSkinnedMesh||!0!==w.skinning?w.envMap!==l||!0===r.fog&&w.fog!==a?S=!0:void 0===w.numClippingPlanes||w.numClippingPlanes===re.numPlanes&&w.numIntersection===re.numIntersection?(w.vertexAlphas!==c||w.vertexTangents!==u||w.morphTargets!==d||w.morphNormals!==f||w.morphColors!==p||w.toneMapping!==g||!0===V.isWebGL2&&w.morphTargetsCount!==y)&&(S=!0):S=!0:S=!0:S=!0:(S=!0,w.__version=r.version);let A=w.currentProgram;!0===S&&(A=Te(r,t,i));let T=!1,R=!1,P=!1;const L=A.getUniforms(),D=w.uniforms;if(j.useProgram(A.program)&&(T=!0,R=!0,P=!0),r.id!==x&&(x=r.id,R=!0),T||_!==e){if(L.setValue(he,"projectionMatrix",e.projectionMatrix),V.logarithmicDepthBuffer&&L.setValue(he,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),_!==e&&(_=e,R=!0,P=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){const t=L.map.cameraPosition;void 0!==t&&t.setValue(he,z.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&L.setValue(he,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&L.setValue(he,"viewMatrix",e.matrixWorldInverse)}if(i.isSkinnedMesh){L.setOptional(he,i,"bindMatrix"),L.setOptional(he,i,"bindMatrixInverse");const e=i.skeleton;e&&(V.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),L.setValue(he,"boneTexture",e.boneTexture,q),L.setValue(he,"boneTextureSize",e.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const I=n.morphAttributes;if((void 0!==I.position||void 0!==I.normal||void 0!==I.color&&!0===V.isWebGL2)&&oe.update(i,n,r,A),(R||w.receiveShadow!==i.receiveShadow)&&(w.receiveShadow=i.receiveShadow,L.setValue(he,"receiveShadow",i.receiveShadow)),R&&(L.setValue(he,"toneMappingExposure",m.toneMappingExposure),w.needsLights&&function(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}(D,P),a&&!0===r.fog&&ee.refreshFogUniforms(D,a),ee.refreshMaterialUniforms(D,r,C,E,F),_R.upload(he,w.uniformsList,D,q)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(_R.upload(he,w.uniformsList,D,q),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&L.setValue(he,"center",i.center),L.setValue(he,"modelViewMatrix",i.modelViewMatrix),L.setValue(he,"normalMatrix",i.normalMatrix),L.setValue(he,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const e=r.uniformsGroups;for(let t=0,n=e.length;t<n;t++)if(V.isWebGL2){const n=e[t];de.update(n,A),de.bind(n,A)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return A}(e,t,n,r,i);j.setMaterial(r,o);let l=n.index;const c=n.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;let u,d=1;!0===r.wireframe&&(l=$.getWireframeAttribute(n),d=2),ue.setup(i,r,s,n,l);let f=se;null!==l&&(u=J.get(l),f=le,f.setIndex(u));const p=null!==l?l.count:c.count,g=n.drawRange.start*d,v=n.drawRange.count*d,y=null!==a?a.start*d:0,w=null!==a?a.count*d:1/0,M=Math.max(g,y),S=Math.min(p,g+v,y+w)-1,A=Math.max(0,S-M+1);if(0!==A){if(i.isMesh)!0===r.wireframe?(j.setLineWidth(r.wireframeLinewidth*H()),f.setMode(1)):f.setMode(4);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),j.setLineWidth(e*H()),i.isLineSegments?f.setMode(1):i.isLineLoop?f.setMode(2):f.setMode(3)}else i.isPoints?f.setMode(0):i.isSprite&&f.setMode(4);if(i.isInstancedMesh)f.renderInstances(M,A,i.count);else if(n.isInstancedBufferGeometry){const e=Math.min(n.instanceCount,n._maxInstanceCount);f.renderInstances(M,A,e)}else f.render(M,A)}},this.compile=function(e,t){h=ne.get(e),h.init(),p.push(h),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(h.pushLight(e),e.castShadow&&h.pushShadow(e))})),h.setupLights(m.physicallyCorrectLights),e.traverse((function(t){const n=t.material;if(n)if(Array.isArray(n))for(let r=0;r<n.length;r++)Te(n[r],e,t);else Te(n,e,t)})),p.pop(),h=null};let xe=null;function _e(){Me.stop()}function we(){Me.start()}const Me=new NC;function Se(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)h.pushLight(e),e.castShadow&&h.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||I.intersectsSprite(e)){r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(N);const t=K.update(e),i=e.material;i.visible&&d.push(e,t,i,n,z.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==W.render.frame&&(e.skeleton.update(),e.skeleton.frame=W.render.frame),!e.frustumCulled||I.intersectsObject(e))){r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(N);const t=K.update(e),i=e.material;if(Array.isArray(i)){const r=t.groups;for(let a=0,o=r.length;a<o;a++){const o=r[a],s=i[o.materialIndex];s&&s.visible&&d.push(e,t,s,n,z.z,o)}}else i.visible&&d.push(e,t,i,n,z.z,null)}const i=e.children;for(let e=0,a=i.length;e<a;e++)Se(i[e],t,n,r)}function Ae(e,t,n,r){const i=e.opaque,o=e.transmissive,s=e.transparent;h.setupLightsView(n),o.length>0&&function(e,t,n){const r=V.isWebGL2;null===F&&(F=new cA(1,1,{generateMipmaps:!0,type:G.has("EXT_color_buffer_half_float")?Hw:kw,minFilter:Dw,samples:r&&!0===a?4:0})),m.getDrawingBufferSize(O),r?F.setSize(O.x,O.y):F.setSize(NS(O.x),NS(O.y));const i=m.getRenderTarget();m.setRenderTarget(F),m.clear();const o=m.toneMapping;m.toneMapping=cw,Ee(e,t,n),m.toneMapping=o,q.updateMultisampleRenderTarget(F),q.updateRenderTargetMipmap(F),m.setRenderTarget(i)}(i,t,n),r&&j.viewport(w.copy(r)),i.length>0&&Ee(i,t,n),o.length>0&&Ee(o,t,n),s.length>0&&Ee(s,t,n),j.buffers.depth.setTest(!0),j.buffers.depth.setMask(!0),j.buffers.color.setMask(!0),j.setPolygonOffset(!1)}function Ee(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,a=e.length;i<a;i++){const a=e[i],o=a.object,s=a.geometry,l=null===r?a.material:r,c=a.group;o.layers.test(n.layers)&&Ce(o,t,n,s,l,c)}}function Ce(e,t,n,r,i,a){e.onBeforeRender(m,t,n,r,i,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(m,t,n,r,e,a),!0===i.transparent&&i.side===C_?(i.side=E_,i.needsUpdate=!0,m.renderBufferDirect(n,t,r,i,e,a),i.side=A_,i.needsUpdate=!0,m.renderBufferDirect(n,t,r,i,e,a),i.side=C_):m.renderBufferDirect(n,t,r,i,e,a),e.onAfterRender(m,t,n,r,i,a)}function Te(e,t,n){!0!==t.isScene&&(t=U);const r=X.get(e),i=h.state.lights,a=h.state.shadowsArray,o=i.state.version,s=Q.getParameters(e,i.state,a,t,n),l=Q.getProgramCacheKey(s);let c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?Z:Y).get(e.envMap||r.environment),void 0===c&&(e.addEventListener("dispose",be),c=new Map,r.programs=c);let u=c.get(l);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===o)return Re(e,s),u}else s.uniforms=Q.getUniforms(e),e.onBuild(n,s,m),e.onBeforeCompile(s,m),u=Q.acquireProgram(s,l),c.set(l,u),r.uniforms=s.uniforms;const d=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(d.clippingPlanes=re.uniform),Re(e,s),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=o,r.needsLights&&(d.ambientLightColor.value=i.state.ambient,d.lightProbe.value=i.state.probe,d.directionalLights.value=i.state.directional,d.directionalLightShadows.value=i.state.directionalShadow,d.spotLights.value=i.state.spot,d.spotLightShadows.value=i.state.spotShadow,d.rectAreaLights.value=i.state.rectArea,d.ltc_1.value=i.state.rectAreaLTC1,d.ltc_2.value=i.state.rectAreaLTC2,d.pointLights.value=i.state.point,d.pointLightShadows.value=i.state.pointShadow,d.hemisphereLights.value=i.state.hemi,d.directionalShadowMap.value=i.state.directionalShadowMap,d.directionalShadowMatrix.value=i.state.directionalShadowMatrix,d.spotShadowMap.value=i.state.spotShadowMap,d.spotShadowMatrix.value=i.state.spotShadowMatrix,d.pointShadowMap.value=i.state.pointShadowMap,d.pointShadowMatrix.value=i.state.pointShadowMatrix);const f=u.getUniforms(),p=_R.seqWithValue(f.seq,d);return r.currentProgram=u,r.uniformsList=p,u}function Re(e,t){const n=X.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Me.setAnimationLoop((function(e){xe&&xe(e)})),"undefined"!=typeof self&&Me.setContext(self),this.setAnimationLoop=function(e){xe=e,me.setAnimationLoop(e),null===e?Me.stop():Me.start()},me.addEventListener("sessionstart",_e),me.addEventListener("sessionend",we),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===g)return;!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===me.enabled&&!0===me.isPresenting&&(!0===me.cameraAutoUpdate&&me.updateCamera(t),t=me.getCamera()),!0===e.isScene&&e.onBeforeRender(m,e,t,b),h=ne.get(e,p.length),h.init(),p.push(h),N.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),I.setFromProjectionMatrix(N),B=this.localClippingEnabled,k=re.init(this.clippingPlanes,B,t),d=te.get(e,f.length),d.init(),f.push(d),Se(e,t,0,m.sortObjects),d.finish(),!0===m.sortObjects&&d.sort(T,R),!0===k&&re.beginShadows();const n=h.state.shadowsArray;if(ie.render(n,e,t),!0===k&&re.endShadows(),!0===this.info.autoReset&&this.info.reset(),ae.render(d,e),h.setupLights(m.physicallyCorrectLights),t.isArrayCamera){const n=t.cameras;for(let t=0,r=n.length;t<r;t++){const r=n[t];Ae(d,e,r,r.viewport)}}else Ae(d,e,t);null!==b&&(q.updateMultisampleRenderTarget(b),q.updateRenderTargetMipmap(b)),!0===e.isScene&&e.onAfterRender(m,e,t),ue.resetDefaultState(),x=-1,_=null,p.pop(),h=p.length>0?p[p.length-1]:null,f.pop(),d=f.length>0?f[f.length-1]:null},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(e,t,n){X.get(e.texture).__webglTexture=t,X.get(e.depthTexture).__webglTexture=n;const r=X.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===G.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){const n=X.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,n=0){b=e,v=t,y=n;let r=!0;if(e){const t=X.get(e);void 0!==t.__useDefaultFramebuffer?(j.bindFramebuffer(36160,null),r=!1):void 0===t.__webglFramebuffer?q.setupRenderTarget(e):t.__hasExternalTextures&&q.rebindTextures(e,X.get(e.texture).__webglTexture,X.get(e.depthTexture).__webglTexture)}let i=null,a=!1,o=!1;if(e){const n=e.texture;(n.isData3DTexture||n.isDataArrayTexture)&&(o=!0);const r=X.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=r[t],a=!0):i=V.isWebGL2&&e.samples>0&&!1===q.useMultisampledRTT(e)?X.get(e).__webglMultisampledFramebuffer:r,w.copy(e.viewport),M.copy(e.scissor),S=e.scissorTest}else w.copy(P).multiplyScalar(C).floor(),M.copy(L).multiplyScalar(C).floor(),S=D;if(j.bindFramebuffer(36160,i)&&V.drawBuffers&&r&&j.drawBuffers(e,i),j.viewport(w),j.scissor(M),j.setScissorTest(S),a){const r=X.get(e.texture);he.framebufferTexture2D(36160,36064,34069+t,r.__webglTexture,n)}else if(o){const r=X.get(e.texture),i=t||0;he.framebufferTextureLayer(36160,36064,r.__webglTexture,n||0,i)}x=-1},this.readRenderTargetPixels=function(e,t,n,r,i,a,o){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=X.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){j.bindFramebuffer(36160,s);try{const o=e.texture,s=o.format,l=o.type;if(s!==qw&&ce.convert(s)!==he.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===Hw&&(G.has("EXT_color_buffer_half_float")||V.isWebGL2&&G.has("EXT_color_buffer_float"));if(!(l===kw||ce.convert(l)===he.getParameter(35738)||l===Uw&&(V.isWebGL2||G.has("OES_texture_float")||G.has("WEBGL_color_buffer_float"))||c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&he.readPixels(t,n,r,i,ce.convert(s),ce.convert(l),a)}finally{const e=null!==b?X.get(b).__webglFramebuffer:null;j.bindFramebuffer(36160,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){const r=Math.pow(2,-n),i=Math.floor(t.image.width*r),a=Math.floor(t.image.height*r);q.setTexture2D(t,0),he.copyTexSubImage2D(3553,n,0,0,e.x,e.y,i,a),j.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r=0){const i=t.image.width,a=t.image.height,o=ce.convert(n.format),s=ce.convert(n.type);q.setTexture2D(n,0),he.pixelStorei(37440,n.flipY),he.pixelStorei(37441,n.premultiplyAlpha),he.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?he.texSubImage2D(3553,r,e.x,e.y,i,a,o,s,t.image.data):t.isCompressedTexture?he.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):he.texSubImage2D(3553,r,e.x,e.y,o,s,t.image),0===r&&n.generateMipmaps&&he.generateMipmap(3553),j.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r,i=0){if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const a=e.max.x-e.min.x+1,o=e.max.y-e.min.y+1,s=e.max.z-e.min.z+1,l=ce.convert(r.format),c=ce.convert(r.type);let u;if(r.isData3DTexture)q.setTexture3D(r,0),u=32879;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");q.setTexture2DArray(r,0),u=35866}he.pixelStorei(37440,r.flipY),he.pixelStorei(37441,r.premultiplyAlpha),he.pixelStorei(3317,r.unpackAlignment);const d=he.getParameter(3314),h=he.getParameter(32878),f=he.getParameter(3316),p=he.getParameter(3315),g=he.getParameter(32877),v=n.isCompressedTexture?n.mipmaps[0]:n.image;he.pixelStorei(3314,v.width),he.pixelStorei(32878,v.height),he.pixelStorei(3316,e.min.x),he.pixelStorei(3315,e.min.y),he.pixelStorei(32877,e.min.z),n.isDataTexture||n.isData3DTexture?he.texSubImage3D(u,i,t.x,t.y,t.z,a,o,s,l,c,v.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),he.compressedTexSubImage3D(u,i,t.x,t.y,t.z,a,o,s,l,v.data)):he.texSubImage3D(u,i,t.x,t.y,t.z,a,o,s,l,c,v),he.pixelStorei(3314,d),he.pixelStorei(32878,h),he.pixelStorei(3316,f),he.pixelStorei(3315,p),he.pixelStorei(32877,g),0===i&&r.generateMipmaps&&he.generateMipmap(u),j.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?q.setTextureCube(e,0):e.isData3DTexture?q.setTexture3D(e,0):e.isDataArrayTexture?q.setTexture2DArray(e,0):q.setTexture2D(e,0),j.unbindTexture()},this.resetState=function(){v=0,y=0,b=null,j.reset(),ue.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class gP extends mP{}gP.prototype.isWebGL1Renderer=!0;class vP{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new tA(e),this.density=t}clone(){return new vP(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class yP{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new tA(e),this.near=t,this.far=n}clone(){return new yP(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class bP extends yE{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}class xP{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=pS,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=LS()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=LS()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=LS()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const _P=new gA;class wP{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)_P.fromBufferAttribute(this,t),_P.applyMatrix4(e),this.setXYZ(t,_P.x,_P.y,_P.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)_P.fromBufferAttribute(this,t),_P.applyNormalMatrix(e),this.setXYZ(t,_P.x,_P.y,_P.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)_P.fromBufferAttribute(this,t),_P.transformDirection(e),this.setXYZ(t,_P.x,_P.y,_P.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new BE(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new wP(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class MP extends LE{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new tA(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let SP;const AP=new gA,EP=new gA,CP=new gA,TP=new zS,RP=new zS,PP=new qA,LP=new gA,DP=new gA,IP=new gA,kP=new zS,BP=new zS,FP=new zS;class NP extends yE{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",void 0===SP){SP=new QE;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new xP(e,5);SP.setIndex([0,1,2,0,2,3]),SP.setAttribute("position",new wP(t,3,0,!1)),SP.setAttribute("uv",new wP(t,2,3,!1))}this.geometry=SP,this.material=void 0!==e?e:new MP,this.center=new zS(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),EP.setFromMatrixScale(this.matrixWorld),PP.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),CP.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&EP.multiplyScalar(-CP.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const a=this.center;OP(LP.set(-.5,-.5,0),CP,a,EP,r,i),OP(DP.set(.5,-.5,0),CP,a,EP,r,i),OP(IP.set(.5,.5,0),CP,a,EP,r,i),kP.set(0,0),BP.set(1,0),FP.set(1,1);let o=e.ray.intersectTriangle(LP,DP,IP,!1,AP);if(null===o&&(OP(DP.set(-.5,.5,0),CP,a,EP,r,i),BP.set(0,1),o=e.ray.intersectTriangle(LP,IP,DP,!1,AP),null===o))return;const s=e.ray.origin.distanceTo(AP);s<e.near||s>e.far||t.push({distance:s,point:AP.clone(),uv:RE.getUV(AP,LP,DP,IP,kP,BP,FP,new zS),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function OP(e,t,n,r,i,a){TP.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(RP.x=a*TP.x-i*TP.y,RP.y=i*TP.x+a*TP.y):RP.copy(TP),e.copy(t),e.x+=RP.x,e.y+=RP.y,e.applyMatrix4(PP)}const zP=new gA,UP=new gA;class HP extends yE{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let e=0,n=t.length;e<n;e++){const n=t[e];this.addLevel(n.object.clone(),n.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const n=this.levels;let r;for(r=0;r<n.length&&!(t<n[r].distance);r++);return n.splice(r,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){zP.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(zP);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){zP.setFromMatrixPosition(e.matrixWorld),UP.setFromMatrixPosition(this.matrixWorld);const n=zP.distanceTo(UP)/e.zoom;let r,i;for(t[0].object.visible=!0,r=1,i=t.length;r<i&&n>=t[r].distance;r++)t[r-1].object.visible=!1,t[r].object.visible=!0;for(this._currentLevel=r-1;r<i;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let e=0,r=n.length;e<r;e++){const r=n[e];t.object.levels.push({object:r.object.uuid,distance:r.distance})}return t}}const GP=new gA,VP=new lA,jP=new lA,WP=new gA,XP=new qA;class qP extends vC{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new qA,this.bindMatrixInverse=new qA}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new lA,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,r=this.geometry;VP.fromBufferAttribute(r.attributes.skinIndex,e),jP.fromBufferAttribute(r.attributes.skinWeight,e),GP.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let e=0;e<4;e++){const r=jP.getComponent(e);if(0!==r){const i=VP.getComponent(e);XP.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),t.addScaledVector(WP.copy(GP).applyMatrix4(XP),r)}}return t.applyMatrix4(this.bindMatrixInverse)}}class YP extends yE{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ZP extends sA{constructor(e=null,t=1,n=1,r,i,a,o,s,l=Sw,c=Sw,u,d){super(null,a,o,s,l,c,r,i,u,d),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const JP=new qA,$P=new qA;class KP{constructor(e=[],t=[]){this.uuid=LS(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new qA)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new qA;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let r=0,i=e.length;r<i;r++){const i=e[r]?e[r].matrixWorld:$P;JP.multiplyMatrices(i,t[r]),JP.toArray(n,16*r)}null!==r&&(r.needsUpdate=!0)}clone(){return new KP(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=FS(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new ZP(t,e,e,qw,Uw);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const r=e.bones[n];let i=t[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new YP),this.bones.push(i),this.boneInverses.push((new qA).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){const i=t[r];e.bones.push(i.uuid);const a=n[r];e.boneInverses.push(a.toArray())}return e}}class QP extends BE{constructor(e,t,n,r=1){"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const eL=new qA,tL=new qA,nL=[],rL=new vC;class iL extends vC{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new QP(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(rL.geometry=this.geometry,rL.material=this.material,void 0!==rL.material)for(let i=0;i<r;i++){this.getMatrixAt(i,eL),tL.multiplyMatrices(n,eL),rL.matrixWorld=tL,rL.raycast(e,nL);for(let e=0,n=nL.length;e<n;e++){const n=nL[e];n.instanceId=i,n.object=this,t.push(n)}nL.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new QP(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class aL extends LE{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new tA(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const oL=new gA,sL=new gA,lL=new qA,cL=new XA,uL=new OA;class dL extends yE{constructor(e=new QE,t=new aL){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)oL.fromBufferAttribute(t,e-1),sL.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=oL.distanceTo(sL);e.setAttribute("lineDistance",new jE(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),uL.copy(n.boundingSphere),uL.applyMatrix4(r),uL.radius+=i,!1===e.ray.intersectsSphere(uL))return;lL.copy(r).invert(),cL.copy(e.ray).applyMatrix4(lL);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=new gA,c=new gA,u=new gA,d=new gA,h=this.isLineSegments?2:1,f=n.index,p=n.attributes.position;if(null!==f)for(let n=Math.max(0,a.start),r=Math.min(f.count,a.start+a.count)-1;n<r;n+=h){const r=f.getX(n),i=f.getX(n+1);if(l.fromBufferAttribute(p,r),c.fromBufferAttribute(p,i),cL.distanceSqToSegment(l,c,d,u)>s)continue;d.applyMatrix4(this.matrixWorld);const a=e.ray.origin.distanceTo(d);a<e.near||a>e.far||t.push({distance:a,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}else for(let n=Math.max(0,a.start),r=Math.min(p.count,a.start+a.count)-1;n<r;n+=h){if(l.fromBufferAttribute(p,n),c.fromBufferAttribute(p,n+1),cL.distanceSqToSegment(l,c,d,u)>s)continue;d.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(d);r<e.near||r>e.far||t.push({distance:r,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}const hL=new gA,fL=new gA;class pL extends dL{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)hL.fromBufferAttribute(t,e),fL.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+hL.distanceTo(fL);e.setAttribute("lineDistance",new jE(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class mL extends dL{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class gL extends LE{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new tA(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const vL=new qA,yL=new XA,bL=new OA,xL=new gA;class _L extends yE{constructor(e=new QE,t=new gL){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),bL.copy(n.boundingSphere),bL.applyMatrix4(r),bL.radius+=i,!1===e.ray.intersectsSphere(bL))return;vL.copy(r).invert(),yL.copy(e.ray).applyMatrix4(vL);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=n.index,c=n.attributes.position;if(null!==l)for(let n=Math.max(0,a.start),i=Math.min(l.count,a.start+a.count);n<i;n++){const i=l.getX(n);xL.fromBufferAttribute(c,i),wL(xL,i,s,r,e,t,this)}else for(let n=Math.max(0,a.start),i=Math.min(c.count,a.start+a.count);n<i;n++)xL.fromBufferAttribute(c,n),wL(xL,n,s,r,e,t,this)}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function wL(e,t,n,r,i,a,o){const s=yL.distanceSqToPoint(e);if(s<n){const n=new gA;yL.closestPointToPoint(e,n),n.applyMatrix4(r);const l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;a.push({distance:l,distanceToRay:Math.sqrt(s),point:n,index:t,face:null,object:o})}}class ML extends sA{constructor(e,t,n,r,i,a,o,s,l){super(e,t,n,r,i,a,o,s,l),this.isVideoTexture=!0,this.minFilter=void 0!==a?a:Rw,this.magFilter=void 0!==i?i:Rw,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1=="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class SL extends sA{constructor(e,t,n){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=n,this.magFilter=Sw,this.minFilter=Sw,this.generateMipmaps=!1,this.needsUpdate=!0}}class AL extends sA{constructor(e,t,n,r,i,a,o,s,l,c,u,d){super(null,a,o,s,l,c,r,i,u,d),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class EL extends sA{constructor(e,t,n,r,i,a,o,s,l){super(e,t,n,r,i,a,o,s,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class CL{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),i=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),i+=n.distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const i=n.length;let a;a=t||e*n[i-1];let o,s=0,l=i-1;for(;s<=l;)if(r=Math.floor(s+(l-s)/2),o=n[r]-a,o<0)s=r+1;else{if(!(o>0)){l=r;break}l=r-1}if(r=l,n[r]===a)return r/(i-1);const c=n[r];return(r+(a-c)/(n[r+1]-c))/(i-1)}getTangent(e,t){const n=1e-4;let r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);const a=this.getPoint(r),o=this.getPoint(i),s=t||(a.isVector2?new zS:new gA);return s.copy(o).sub(a).normalize(),s}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new gA,r=[],i=[],a=[],o=new gA,s=new qA;for(let t=0;t<=e;t++){const n=t/e;r[t]=this.getTangentAt(n,new gA)}i[0]=new gA,a[0]=new gA;let l=Number.MAX_VALUE;const c=Math.abs(r[0].x),u=Math.abs(r[0].y),d=Math.abs(r[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),d<=l&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],o),a[0].crossVectors(r[0],i[0]);for(let t=1;t<=e;t++){if(i[t]=i[t-1].clone(),a[t]=a[t-1].clone(),o.crossVectors(r[t-1],r[t]),o.length()>Number.EPSILON){o.normalize();const e=Math.acos(DS(r[t-1].dot(r[t]),-1,1));i[t].applyMatrix4(s.makeRotationAxis(o,e))}a[t].crossVectors(r[t],i[t])}if(!0===t){let t=Math.acos(DS(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(o.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(s.makeRotationAxis(r[n],t*n)),a[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:a}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class TL extends CL{constructor(e=0,t=0,n=1,r=1,i=0,a=2*Math.PI,o=!1,s=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=a,this.aClockwise=o,this.aRotation=s}getPoint(e,t){const n=t||new zS,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const a=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=a?0:r),!0!==this.aClockwise||a||(i===r?i=-r:i-=r);const o=this.aStartAngle+e*i;let s=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=s-this.aX,r=l-this.aY;s=n*e-r*t+this.aX,l=n*t+r*e+this.aY}return n.set(s,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class RL extends TL{constructor(e,t,n,r,i,a){super(e,t,n,n,r,i,a),this.isArcCurve=!0,this.type="ArcCurve"}}function PL(){let e=0,t=0,n=0,r=0;function i(i,a,o,s){e=i,t=o,n=-3*i+3*a-2*o-s,r=2*i-2*a+o+s}return{initCatmullRom:function(e,t,n,r,a){i(t,n,a*(n-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,a,o,s){let l=(t-e)/a-(n-e)/(a+o)+(n-t)/o,c=(n-t)/o-(r-t)/(o+s)+(r-n)/s;l*=o,c*=o,i(t,n,l,c)},calc:function(i){const a=i*i;return e+t*i+n*a+r*(a*i)}}}const LL=new gA,DL=new PL,IL=new PL,kL=new PL;class BL extends CL{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new gA){const n=t,r=this.points,i=r.length,a=(i-(this.closed?0:1))*e;let o,s,l=Math.floor(a),c=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/i)+1)*i:0===c&&l===i-1&&(l=i-2,c=1),this.closed||l>0?o=r[(l-1)%i]:(LL.subVectors(r[0],r[1]).add(r[0]),o=LL);const u=r[l%i],d=r[(l+1)%i];if(this.closed||l+2<i?s=r[(l+2)%i]:(LL.subVectors(r[i-1],r[i-2]).add(r[i-1]),s=LL),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(o.distanceToSquared(u),e),n=Math.pow(u.distanceToSquared(d),e),r=Math.pow(d.distanceToSquared(s),e);n<1e-4&&(n=1),t<1e-4&&(t=n),r<1e-4&&(r=n),DL.initNonuniformCatmullRom(o.x,u.x,d.x,s.x,t,n,r),IL.initNonuniformCatmullRom(o.y,u.y,d.y,s.y,t,n,r),kL.initNonuniformCatmullRom(o.z,u.z,d.z,s.z,t,n,r)}else"catmullrom"===this.curveType&&(DL.initCatmullRom(o.x,u.x,d.x,s.x,this.tension),IL.initCatmullRom(o.y,u.y,d.y,s.y,this.tension),kL.initCatmullRom(o.z,u.z,d.z,s.z,this.tension));return n.set(DL.calc(c),IL.calc(c),kL.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new gA).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function FL(e,t,n,r,i){const a=.5*(r-t),o=.5*(i-n),s=e*e;return(2*n-2*r+a+o)*(e*s)+(-3*n+3*r-2*a-o)*s+a*e+n}function NL(e,t,n,r){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function OL(e,t,n,r,i){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}class zL extends CL{constructor(e=new zS,t=new zS,n=new zS,r=new zS){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new zS){const n=t,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(OL(e,r.x,i.x,a.x,o.x),OL(e,r.y,i.y,a.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class UL extends CL{constructor(e=new gA,t=new gA,n=new gA,r=new gA){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new gA){const n=t,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(OL(e,r.x,i.x,a.x,o.x),OL(e,r.y,i.y,a.y,o.y),OL(e,r.z,i.z,a.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class HL extends CL{constructor(e=new zS,t=new zS){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new zS){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const n=t||new zS;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class GL extends CL{constructor(e=new gA,t=new gA){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new gA){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class VL extends CL{constructor(e=new zS,t=new zS,n=new zS){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new zS){const n=t,r=this.v0,i=this.v1,a=this.v2;return n.set(NL(e,r.x,i.x,a.x),NL(e,r.y,i.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class jL extends CL{constructor(e=new gA,t=new gA,n=new gA){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new gA){const n=t,r=this.v0,i=this.v1,a=this.v2;return n.set(NL(e,r.x,i.x,a.x),NL(e,r.y,i.y,a.y),NL(e,r.z,i.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class WL extends CL{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new zS){const n=t,r=this.points,i=(r.length-1)*e,a=Math.floor(i),o=i-a,s=r[0===a?a:a-1],l=r[a],c=r[a>r.length-2?r.length-1:a+1],u=r[a>r.length-3?r.length-1:a+2];return n.set(FL(o,s.x,l.x,c.x,u.x),FL(o,s.y,l.y,c.y,u.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new zS).fromArray(n))}return this}}var XL=Object.freeze({__proto__:null,ArcCurve:RL,CatmullRomCurve3:BL,CubicBezierCurve:zL,CubicBezierCurve3:UL,EllipseCurve:TL,LineCurve:HL,LineCurve3:GL,QuadraticBezierCurve:VL,QuadraticBezierCurve3:jL,SplineCurve:WL});class qL extends CL{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new HL(t,e))}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let i=0;for(;i<r.length;){if(r[i]>=n){const e=r[i]-n,a=this.curves[i],o=a.getLength(),s=0===o?0:1-e/o;return a.getPointAt(s,t)}i++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const a=i[r],o=a.isEllipseCurve?2*e:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o);for(let e=0;e<s.length;e++){const r=s[e];n&&n.equals(r)||(t.push(r),n=r)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new XL[n.type]).fromJSON(n))}return this}}class YL extends qL{constructor(e){super(),this.type="Path",this.currentPoint=new zS,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new HL(this.currentPoint.clone(),new zS(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const i=new VL(this.currentPoint.clone(),new zS(e,t),new zS(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,a){const o=new zL(this.currentPoint.clone(),new zS(e,t),new zS(n,r),new zS(i,a));return this.curves.push(o),this.currentPoint.set(i,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new WL(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,a){const o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,n,r,i,a),this}absarc(e,t,n,r,i,a){return this.absellipse(e,t,n,n,r,i,a),this}ellipse(e,t,n,r,i,a,o,s){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,r,i,a,o,s),this}absellipse(e,t,n,r,i,a,o,s){const l=new TL(e,t,n,r,i,a,o,s);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class ZL extends QE{constructor(e=[new zS(0,-.5),new zS(.5,0),new zS(0,.5)],t=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=DS(r,0,2*Math.PI);const i=[],a=[],o=[],s=[],l=[],c=1/t,u=new gA,d=new zS,h=new gA,f=new gA,p=new gA;let m=0,g=0;for(let t=0;t<=e.length-1;t++)switch(t){case 0:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,h.x=1*g,h.y=-m,h.z=0*g,p.copy(h),h.normalize(),s.push(h.x,h.y,h.z);break;case e.length-1:s.push(p.x,p.y,p.z);break;default:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,h.x=1*g,h.y=-m,h.z=0*g,f.copy(h),h.x+=p.x,h.y+=p.y,h.z+=p.z,h.normalize(),s.push(h.x,h.y,h.z),p.copy(f)}for(let i=0;i<=t;i++){const h=n+i*c*r,f=Math.sin(h),p=Math.cos(h);for(let n=0;n<=e.length-1;n++){u.x=e[n].x*f,u.y=e[n].y,u.z=e[n].x*p,a.push(u.x,u.y,u.z),d.x=i/t,d.y=n/(e.length-1),o.push(d.x,d.y);const r=s[3*n+0]*f,c=s[3*n+1],h=s[3*n+0]*p;l.push(r,c,h)}}for(let n=0;n<t;n++)for(let t=0;t<e.length-1;t++){const r=t+n*e.length,a=r,o=r+e.length,s=r+e.length+1,l=r+1;i.push(a,o,l),i.push(s,l,o)}this.setIndex(i),this.setAttribute("position",new jE(a,3)),this.setAttribute("uv",new jE(o,2)),this.setAttribute("normal",new jE(l,3))}static fromJSON(e){return new ZL(e.points,e.segments,e.phiStart,e.phiLength)}}class JL extends ZL{constructor(e=1,t=1,n=4,r=8){const i=new YL;i.absarc(0,-t/2,e,1.5*Math.PI,0),i.absarc(0,t/2,e,0,.5*Math.PI),super(i.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new JL(e.radius,e.length,e.capSegments,e.radialSegments)}}class $L extends QE{constructor(e=1,t=8,n=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const i=[],a=[],o=[],s=[],l=new gA,c=new zS;a.push(0,0,0),o.push(0,0,1),s.push(.5,.5);for(let i=0,u=3;i<=t;i++,u+=3){const d=n+i/t*r;l.x=e*Math.cos(d),l.y=e*Math.sin(d),a.push(l.x,l.y,l.z),o.push(0,0,1),c.x=(a[u]/e+1)/2,c.y=(a[u+1]/e+1)/2,s.push(c.x,c.y)}for(let e=1;e<=t;e++)i.push(e,e+1,0);this.setIndex(i),this.setAttribute("position",new jE(a,3)),this.setAttribute("normal",new jE(o,3)),this.setAttribute("uv",new jE(s,2))}static fromJSON(e){return new $L(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class KL extends QE{constructor(e=1,t=1,n=1,r=8,i=1,a=!1,o=0,s=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s};const l=this;r=Math.floor(r),i=Math.floor(i);const c=[],u=[],d=[],h=[];let f=0;const p=[],m=n/2;let g=0;function v(n){const i=f,a=new zS,p=new gA;let v=0;const y=!0===n?e:t,b=!0===n?1:-1;for(let e=1;e<=r;e++)u.push(0,m*b,0),d.push(0,b,0),h.push(.5,.5),f++;const x=f;for(let e=0;e<=r;e++){const t=e/r*s+o,n=Math.cos(t),i=Math.sin(t);p.x=y*i,p.y=m*b,p.z=y*n,u.push(p.x,p.y,p.z),d.push(0,b,0),a.x=.5*n+.5,a.y=.5*i*b+.5,h.push(a.x,a.y),f++}for(let e=0;e<r;e++){const t=i+e,r=x+e;!0===n?c.push(r,r+1,t):c.push(r+1,r,t),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}!function(){const a=new gA,v=new gA;let y=0;const b=(t-e)/n;for(let l=0;l<=i;l++){const c=[],g=l/i,y=g*(t-e)+e;for(let e=0;e<=r;e++){const t=e/r,i=t*s+o,l=Math.sin(i),p=Math.cos(i);v.x=y*l,v.y=-g*n+m,v.z=y*p,u.push(v.x,v.y,v.z),a.set(l,b,p).normalize(),d.push(a.x,a.y,a.z),h.push(t,1-g),c.push(f++)}p.push(c)}for(let e=0;e<r;e++)for(let t=0;t<i;t++){const n=p[t][e],r=p[t+1][e],i=p[t+1][e+1],a=p[t][e+1];c.push(n,r,a),c.push(r,i,a),y+=6}l.addGroup(g,y,0),g+=y}(),!1===a&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(c),this.setAttribute("position",new jE(u,3)),this.setAttribute("normal",new jE(d,3)),this.setAttribute("uv",new jE(h,2))}static fromJSON(e){return new KL(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class QL extends KL{constructor(e=1,t=1,n=8,r=1,i=!1,a=0,o=2*Math.PI){super(0,e,t,n,r,i,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:o}}static fromJSON(e){return new QL(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class eD extends QE{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const i=[],a=[];function o(e,t,n,r){const i=r+1,a=[];for(let r=0;r<=i;r++){a[r]=[];const o=e.clone().lerp(n,r/i),s=t.clone().lerp(n,r/i),l=i-r;for(let e=0;e<=l;e++)a[r][e]=0===e&&r===i?o:o.clone().lerp(s,e/l)}for(let e=0;e<i;e++)for(let t=0;t<2*(i-e)-1;t++){const n=Math.floor(t/2);t%2==0?(s(a[e][n+1]),s(a[e+1][n]),s(a[e][n])):(s(a[e][n+1]),s(a[e+1][n+1]),s(a[e+1][n]))}}function s(e){i.push(e.x,e.y,e.z)}function l(t,n){const r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function c(e,t,n,r){r<0&&1===e.x&&(a[t]=e.x-1),0===n.x&&0===n.z&&(a[t]=r/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}!function(e){const n=new gA,r=new gA,i=new gA;for(let a=0;a<t.length;a+=3)l(t[a+0],n),l(t[a+1],r),l(t[a+2],i),o(n,r,i,e)}(r),function(e){const t=new gA;for(let n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){const e=new gA;for(let n=0;n<i.length;n+=3){e.x=i[n+0],e.y=i[n+1],e.z=i[n+2];const r=u(e)/2/Math.PI+.5,o=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);a.push(r,1-o)}var t;(function(){const e=new gA,t=new gA,n=new gA,r=new gA,o=new zS,s=new zS,l=new zS;for(let d=0,h=0;d<i.length;d+=9,h+=6){e.set(i[d+0],i[d+1],i[d+2]),t.set(i[d+3],i[d+4],i[d+5]),n.set(i[d+6],i[d+7],i[d+8]),o.set(a[h+0],a[h+1]),s.set(a[h+2],a[h+3]),l.set(a[h+4],a[h+5]),r.copy(e).add(t).add(n).divideScalar(3);const f=u(r);c(o,h+0,e,f),c(s,h+2,t,f),c(l,h+4,n,f)}})(),function(){for(let e=0;e<a.length;e+=6){const t=a[e+0],n=a[e+2],r=a[e+4],i=Math.max(t,n,r),o=Math.min(t,n,r);i>.9&&o<.1&&(t<.2&&(a[e+0]+=1),n<.2&&(a[e+2]+=1),r<.2&&(a[e+4]+=1))}}()}(),this.setAttribute("position",new jE(i,3)),this.setAttribute("normal",new jE(i.slice(),3)),this.setAttribute("uv",new jE(a,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(e){return new eD(e.vertices,e.indices,e.radius,e.details)}}class tD extends eD{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new tD(e.radius,e.detail)}}const nD=new gA,rD=new gA,iD=new gA,aD=new RE;class oD extends QE{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const n=4,r=Math.pow(10,n),i=Math.cos(RS*t),a=e.getIndex(),o=e.getAttribute("position"),s=a?a.count:o.count,l=[0,0,0],c=["a","b","c"],u=new Array(3),d={},h=[];for(let e=0;e<s;e+=3){a?(l[0]=a.getX(e),l[1]=a.getX(e+1),l[2]=a.getX(e+2)):(l[0]=e,l[1]=e+1,l[2]=e+2);const{a:t,b:n,c:s}=aD;if(t.fromBufferAttribute(o,l[0]),n.fromBufferAttribute(o,l[1]),s.fromBufferAttribute(o,l[2]),aD.getNormal(iD),u[0]=`${Math.round(t.x*r)},${Math.round(t.y*r)},${Math.round(t.z*r)}`,u[1]=`${Math.round(n.x*r)},${Math.round(n.y*r)},${Math.round(n.z*r)}`,u[2]=`${Math.round(s.x*r)},${Math.round(s.y*r)},${Math.round(s.z*r)}`,u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let e=0;e<3;e++){const t=(e+1)%3,n=u[e],r=u[t],a=aD[c[e]],o=aD[c[t]],s=`${n}_${r}`,f=`${r}_${n}`;f in d&&d[f]?(iD.dot(d[f].normal)<=i&&(h.push(a.x,a.y,a.z),h.push(o.x,o.y,o.z)),d[f]=null):s in d||(d[s]={index0:l[e],index1:l[t],normal:iD.clone()})}}for(const e in d)if(d[e]){const{index0:t,index1:n}=d[e];nD.fromBufferAttribute(o,t),rD.fromBufferAttribute(o,n),h.push(nD.x,nD.y,nD.z),h.push(rD.x,rD.y,rD.z)}this.setAttribute("position",new jE(h,3))}}}class sD extends YL{constructor(e){super(e),this.uuid=LS(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new YL).fromJSON(n))}return this}}function lD(e,t,n,r,i){let a,o;if(i===function(e,t,n,r){let i=0;for(let a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}(e,t,n,r)>0)for(a=t;a<n;a+=r)o=RD(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=RD(a,e[a],e[a+1],o);return o&&MD(o,o.next)&&(PD(o),o=o.next),o}function cD(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!MD(r,r.next)&&0!==wD(r.prev,r,r.next))r=r.next;else{if(PD(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function uD(e,t,n,r,i,a,o){if(!e)return;!o&&a&&function(e,t,n,r){let i=e;do{null===i.z&&(i.z=yD(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,n,r,i,a,o,s,l,c=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ,r);t++);for(l=c;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,c*=2}while(o>1)}(i)}(e,r,i,a);let s,l,c=e;for(;e.prev!==e.next;)if(s=e.prev,l=e.next,a?hD(e,r,i,a):dD(e))t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),PD(e),e=l.next,c=l.next;else if((e=l)===c){o?1===o?uD(e=fD(cD(e),t,n),t,n,r,i,a,2):2===o&&pD(e,t,n,r,i,a):uD(cD(e),t,n,r,i,a,1);break}}function dD(e){const t=e.prev,n=e,r=e.next;if(wD(t,n,r)>=0)return!1;let i=e.next.next;for(;i!==e.prev;){if(xD(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&wD(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function hD(e,t,n,r){const i=e.prev,a=e,o=e.next;if(wD(i,a,o)>=0)return!1;const s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,l=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,c=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,u=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,d=yD(s,l,t,n,r),h=yD(c,u,t,n,r);let f=e.prevZ,p=e.nextZ;for(;f&&f.z>=d&&p&&p.z<=h;){if(f!==e.prev&&f!==e.next&&xD(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&wD(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,p!==e.prev&&p!==e.next&&xD(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&wD(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;f&&f.z>=d;){if(f!==e.prev&&f!==e.next&&xD(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&wD(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=h;){if(p!==e.prev&&p!==e.next&&xD(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&wD(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function fD(e,t,n){let r=e;do{const i=r.prev,a=r.next.next;!MD(i,a)&&SD(i,r,r.next,a)&&CD(i,a)&&CD(a,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(a.i/n),PD(r),PD(r.next),r=e=a),r=r.next}while(r!==e);return cD(r)}function pD(e,t,n,r,i,a){let o=e;do{let e=o.next.next;for(;e!==o.prev;){if(o.i!==e.i&&_D(o,e)){let s=TD(o,e);return o=cD(o,o.next),s=cD(s,s.next),uD(o,t,n,r,i,a),void uD(s,t,n,r,i,a)}e=e.next}o=o.next}while(o!==e)}function mD(e,t){return e.x-t.x}function gD(e,t){if(t=function(e,t){let n=t;const r=e.x,i=e.y;let a,o=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const e=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=r&&e>o){if(o=e,e===r){if(i===n.y)return n;if(i===n.next.y)return n.next}a=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!a)return null;if(r===o)return a;const s=a,l=a.x,c=a.y;let u,d=1/0;n=a;do{r>=n.x&&n.x>=l&&r!==n.x&&xD(i<c?r:o,i,l,c,i<c?o:r,i,n.x,n.y)&&(u=Math.abs(i-n.y)/(r-n.x),CD(n,e)&&(u<d||u===d&&(n.x>a.x||n.x===a.x&&vD(a,n)))&&(a=n,d=u)),n=n.next}while(n!==s);return a}(e,t),t){const n=TD(t,e);cD(t,t.next),cD(n,n.next)}}function vD(e,t){return wD(e.prev,e,t.prev)<0&&wD(t.next,e,e.next)<0}function yD(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function bD(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function xD(e,t,n,r,i,a,o,s){return(i-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(r-s)-(n-o)*(t-s)>=0&&(n-o)*(a-s)-(i-o)*(r-s)>=0}function _D(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&SD(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(CD(e,t)&&CD(t,e)&&function(e,t){let n=e,r=!1;const i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(wD(e.prev,e,t.prev)||wD(e,t.prev,t))||MD(e,t)&&wD(e.prev,e,e.next)>0&&wD(t.prev,t,t.next)>0)}function wD(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function MD(e,t){return e.x===t.x&&e.y===t.y}function SD(e,t,n,r){const i=ED(wD(e,t,n)),a=ED(wD(e,t,r)),o=ED(wD(n,r,e)),s=ED(wD(n,r,t));return i!==a&&o!==s||!(0!==i||!AD(e,n,t))||!(0!==a||!AD(e,r,t))||!(0!==o||!AD(n,e,r))||!(0!==s||!AD(n,t,r))}function AD(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function ED(e){return e>0?1:e<0?-1:0}function CD(e,t){return wD(e.prev,e,e.next)<0?wD(e,t,e.next)>=0&&wD(e,e.prev,t)>=0:wD(e,t,e.prev)<0||wD(e,e.next,t)<0}function TD(e,t){const n=new LD(e.i,e.x,e.y),r=new LD(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function RD(e,t,n,r){const i=new LD(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function PD(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function LD(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class DD{static area(e){const t=e.length;let n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}static isClockWise(e){return DD.area(e)<0}static triangulateShape(e,t){const n=[],r=[],i=[];ID(e),kD(n,e);let a=e.length;t.forEach(ID);for(let e=0;e<t.length;e++)r.push(a),a+=t[e].length,kD(n,t[e]);const o=function(e,t,n=2){const r=t&&t.length,i=r?t[0]*n:e.length;let a=lD(e,0,i,n,!0);const o=[];if(!a||a.next===a.prev)return o;let s,l,c,u,d,h,f;if(r&&(a=function(e,t,n,r){const i=[];let a,o,s,l,c;for(a=0,o=t.length;a<o;a++)s=t[a]*r,l=a<o-1?t[a+1]*r:e.length,c=lD(e,s,l,r,!1),c===c.next&&(c.steiner=!0),i.push(bD(c));for(i.sort(mD),a=0;a<i.length;a++)gD(i[a],n),n=cD(n,n.next);return n}(e,t,a,n)),e.length>80*n){s=c=e[0],l=u=e[1];for(let t=n;t<i;t+=n)d=e[t],h=e[t+1],d<s&&(s=d),h<l&&(l=h),d>c&&(c=d),h>u&&(u=h);f=Math.max(c-s,u-l),f=0!==f?1/f:0}return uD(a,o,n,s,l,f),o}(n,r);for(let e=0;e<o.length;e+=3)i.push(o.slice(e,e+3));return i}}function ID(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function kD(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class BD extends QE{constructor(e=new sD([new zS(.5,.5),new zS(-.5,.5),new zS(-.5,-.5),new zS(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],i=[];for(let t=0,n=e.length;t<n;t++)a(e[t]);function a(e){const a=[],o=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:1;let c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:.2,d=void 0!==t.bevelSize?t.bevelSize:u-.1,h=void 0!==t.bevelOffset?t.bevelOffset:0,f=void 0!==t.bevelSegments?t.bevelSegments:3;const p=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:FD;let g,v,y,b,x,_=!1;p&&(g=p.getSpacedPoints(s),_=!0,c=!1,v=p.computeFrenetFrames(s,!1),y=new gA,b=new gA,x=new gA),c||(f=0,u=0,d=0,h=0);const w=e.extractPoints(o);let M=w.shape;const S=w.holes;if(!DD.isClockWise(M)){M=M.reverse();for(let e=0,t=S.length;e<t;e++){const t=S[e];DD.isClockWise(t)&&(S[e]=t.reverse())}}const A=DD.triangulateShape(M,S),E=M;for(let e=0,t=S.length;e<t;e++){const t=S[e];M=M.concat(t)}function C(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}const T=M.length,R=A.length;function P(e,t,n){let r,i,a;const o=e.x-t.x,s=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=o*o+s*s,d=o*c-s*l;if(Math.abs(d)>Number.EPSILON){const d=Math.sqrt(u),h=Math.sqrt(l*l+c*c),f=t.x-s/d,p=t.y+o/d,m=((n.x-c/h-f)*c-(n.y+l/h-p)*l)/(o*c-s*l);r=f+o*m-e.x,i=p+s*m-e.y;const g=r*r+i*i;if(g<=2)return new zS(r,i);a=Math.sqrt(g/2)}else{let e=!1;o>Number.EPSILON?l>Number.EPSILON&&(e=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(s)===Math.sign(c)&&(e=!0),e?(r=-s,i=o,a=Math.sqrt(u)):(r=o,i=s,a=Math.sqrt(u/2))}return new zS(r/a,i/a)}const L=[];for(let e=0,t=E.length,n=t-1,r=e+1;e<t;e++,n++,r++)n===t&&(n=0),r===t&&(r=0),L[e]=P(E[e],E[n],E[r]);const D=[];let I,k=L.concat();for(let e=0,t=S.length;e<t;e++){const t=S[e];I=[];for(let e=0,n=t.length,r=n-1,i=e+1;e<n;e++,r++,i++)r===n&&(r=0),i===n&&(i=0),I[e]=P(t[e],t[r],t[i]);D.push(I),k=k.concat(I)}for(let e=0;e<f;e++){const t=e/f,n=u*Math.cos(t*Math.PI/2),r=d*Math.sin(t*Math.PI/2)+h;for(let e=0,t=E.length;e<t;e++){const t=C(E[e],L[e],r);N(t.x,t.y,-n)}for(let e=0,t=S.length;e<t;e++){const t=S[e];I=D[e];for(let e=0,i=t.length;e<i;e++){const i=C(t[e],I[e],r);N(i.x,i.y,-n)}}}const B=d+h;for(let e=0;e<T;e++){const t=c?C(M[e],k[e],B):M[e];_?(b.copy(v.normals[0]).multiplyScalar(t.x),y.copy(v.binormals[0]).multiplyScalar(t.y),x.copy(g[0]).add(b).add(y),N(x.x,x.y,x.z)):N(t.x,t.y,0)}for(let e=1;e<=s;e++)for(let t=0;t<T;t++){const n=c?C(M[t],k[t],B):M[t];_?(b.copy(v.normals[e]).multiplyScalar(n.x),y.copy(v.binormals[e]).multiplyScalar(n.y),x.copy(g[e]).add(b).add(y),N(x.x,x.y,x.z)):N(n.x,n.y,l/s*e)}for(let e=f-1;e>=0;e--){const t=e/f,n=u*Math.cos(t*Math.PI/2),r=d*Math.sin(t*Math.PI/2)+h;for(let e=0,t=E.length;e<t;e++){const t=C(E[e],L[e],r);N(t.x,t.y,l+n)}for(let e=0,t=S.length;e<t;e++){const t=S[e];I=D[e];for(let e=0,i=t.length;e<i;e++){const i=C(t[e],I[e],r);_?N(i.x,i.y+g[s-1].y,g[s-1].x+n):N(i.x,i.y,l+n)}}}function F(e,t){let n=e.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=e.length-1);for(let e=0,n=s+2*f;e<n;e++){const n=T*e,a=T*(e+1);z(t+r+n,t+i+n,t+i+a,t+r+a)}}}function N(e,t,n){a.push(e),a.push(t),a.push(n)}function O(e,t,i){U(e),U(t),U(i);const a=r.length/3,o=m.generateTopUV(n,r,a-3,a-2,a-1);H(o[0]),H(o[1]),H(o[2])}function z(e,t,i,a){U(e),U(t),U(a),U(t),U(i),U(a);const o=r.length/3,s=m.generateSideWallUV(n,r,o-6,o-3,o-2,o-1);H(s[0]),H(s[1]),H(s[3]),H(s[1]),H(s[2]),H(s[3])}function U(e){r.push(a[3*e+0]),r.push(a[3*e+1]),r.push(a[3*e+2])}function H(e){i.push(e.x),i.push(e.y)}!function(){const e=r.length/3;if(c){let e=0,t=T*e;for(let e=0;e<R;e++){const n=A[e];O(n[2]+t,n[1]+t,n[0]+t)}e=s+2*f,t=T*e;for(let e=0;e<R;e++){const n=A[e];O(n[0]+t,n[1]+t,n[2]+t)}}else{for(let e=0;e<R;e++){const t=A[e];O(t[2],t[1],t[0])}for(let e=0;e<R;e++){const t=A[e];O(t[0]+T*s,t[1]+T*s,t[2]+T*s)}}n.addGroup(e,r.length/3-e,0)}(),function(){const e=r.length/3;let t=0;F(E,t),t+=E.length;for(let e=0,n=S.length;e<n;e++){const n=S[e];F(n,t),t+=n.length}n.addGroup(e,r.length/3-e,1)}()}this.setAttribute("position",new jE(r,3)),this.setAttribute("uv",new jE(i,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let t=0,r=e.length;t<r;t++){const r=e[t];n.shapes.push(r.uuid)}else n.shapes.push(e.uuid);return n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let r=0,i=e.shapes.length;r<i;r++){const i=t[e.shapes[r]];n.push(i)}const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new XL[r.type]).fromJSON(r)),new BD(n,e.options)}}const FD={generateTopUV:function(e,t,n,r,i){const a=t[3*n],o=t[3*n+1],s=t[3*r],l=t[3*r+1],c=t[3*i],u=t[3*i+1];return[new zS(a,o),new zS(s,l),new zS(c,u)]},generateSideWallUV:function(e,t,n,r,i,a){const o=t[3*n],s=t[3*n+1],l=t[3*n+2],c=t[3*r],u=t[3*r+1],d=t[3*r+2],h=t[3*i],f=t[3*i+1],p=t[3*i+2],m=t[3*a],g=t[3*a+1],v=t[3*a+2];return Math.abs(s-u)<Math.abs(o-c)?[new zS(o,1-l),new zS(c,1-d),new zS(h,1-p),new zS(m,1-v)]:[new zS(s,1-l),new zS(u,1-d),new zS(f,1-p),new zS(g,1-v)]}};class ND extends eD{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ND(e.radius,e.detail)}}class OD extends eD{constructor(e=1,t=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new OD(e.radius,e.detail)}}class zD extends QE{constructor(e=.5,t=1,n=8,r=1,i=0,a=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},n=Math.max(3,n);const o=[],s=[],l=[],c=[];let u=e;const d=(t-e)/(r=Math.max(1,r)),h=new gA,f=new zS;for(let e=0;e<=r;e++){for(let e=0;e<=n;e++){const r=i+e/n*a;h.x=u*Math.cos(r),h.y=u*Math.sin(r),s.push(h.x,h.y,h.z),l.push(0,0,1),f.x=(h.x/t+1)/2,f.y=(h.y/t+1)/2,c.push(f.x,f.y)}u+=d}for(let e=0;e<r;e++){const t=e*(n+1);for(let e=0;e<n;e++){const r=e+t,i=r,a=r+n+1,s=r+n+2,l=r+1;o.push(i,a,l),o.push(a,s,l)}}this.setIndex(o),this.setAttribute("position",new jE(s,3)),this.setAttribute("normal",new jE(l,3)),this.setAttribute("uv",new jE(c,2))}static fromJSON(e){return new zD(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class UD extends QE{constructor(e=new sD([new zS(0,.5),new zS(-.5,-.5),new zS(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],i=[],a=[];let o=0,s=0;if(!1===Array.isArray(e))l(e);else for(let t=0;t<e.length;t++)l(e[t]),this.addGroup(o,s,t),o+=s,s=0;function l(e){const o=r.length/3,l=e.extractPoints(t);let c=l.shape;const u=l.holes;!1===DD.isClockWise(c)&&(c=c.reverse());for(let e=0,t=u.length;e<t;e++){const t=u[e];!0===DD.isClockWise(t)&&(u[e]=t.reverse())}const d=DD.triangulateShape(c,u);for(let e=0,t=u.length;e<t;e++){const t=u[e];c=c.concat(t)}for(let e=0,t=c.length;e<t;e++){const t=c[e];r.push(t.x,t.y,0),i.push(0,0,1),a.push(t.x,t.y)}for(let e=0,t=d.length;e<t;e++){const t=d[e],r=t[0]+o,i=t[1]+o,a=t[2]+o;n.push(r,i,a),s+=3}}this.setIndex(n),this.setAttribute("position",new jE(r,3)),this.setAttribute("normal",new jE(i,3)),this.setAttribute("uv",new jE(a,2))}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let r=0,i=e.shapes.length;r<i;r++){const i=t[e.shapes[r]];n.push(i)}return new UD(n,e.curveSegments)}}class HD extends QE{constructor(e=1,t=32,n=16,r=0,i=2*Math.PI,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const s=Math.min(a+o,Math.PI);let l=0;const c=[],u=new gA,d=new gA,h=[],f=[],p=[],m=[];for(let h=0;h<=n;h++){const g=[],v=h/n;let y=0;0==h&&0==a?y=.5/t:h==n&&s==Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){const s=n/t;u.x=-e*Math.cos(r+s*i)*Math.sin(a+v*o),u.y=e*Math.cos(a+v*o),u.z=e*Math.sin(r+s*i)*Math.sin(a+v*o),f.push(u.x,u.y,u.z),d.copy(u).normalize(),p.push(d.x,d.y,d.z),m.push(s+y,1-v),g.push(l++)}c.push(g)}for(let e=0;e<n;e++)for(let r=0;r<t;r++){const t=c[e][r+1],i=c[e][r],o=c[e+1][r],l=c[e+1][r+1];(0!==e||a>0)&&h.push(t,i,l),(e!==n-1||s<Math.PI)&&h.push(i,o,l)}this.setIndex(h),this.setAttribute("position",new jE(f,3)),this.setAttribute("normal",new jE(p,3)),this.setAttribute("uv",new jE(m,2))}static fromJSON(e){return new HD(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class GD extends eD{constructor(e=1,t=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new GD(e.radius,e.detail)}}class VD extends QE{constructor(e=1,t=.4,n=8,r=6,i=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);const a=[],o=[],s=[],l=[],c=new gA,u=new gA,d=new gA;for(let a=0;a<=n;a++)for(let h=0;h<=r;h++){const f=h/r*i,p=a/n*Math.PI*2;u.x=(e+t*Math.cos(p))*Math.cos(f),u.y=(e+t*Math.cos(p))*Math.sin(f),u.z=t*Math.sin(p),o.push(u.x,u.y,u.z),c.x=e*Math.cos(f),c.y=e*Math.sin(f),d.subVectors(u,c).normalize(),s.push(d.x,d.y,d.z),l.push(h/r),l.push(a/n)}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){const n=(r+1)*e+t-1,i=(r+1)*(e-1)+t-1,o=(r+1)*(e-1)+t,s=(r+1)*e+t;a.push(n,i,s),a.push(i,o,s)}this.setIndex(a),this.setAttribute("position",new jE(o,3)),this.setAttribute("normal",new jE(s,3)),this.setAttribute("uv",new jE(l,2))}static fromJSON(e){return new VD(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class jD extends QE{constructor(e=1,t=.4,n=64,r=8,i=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:a},n=Math.floor(n),r=Math.floor(r);const o=[],s=[],l=[],c=[],u=new gA,d=new gA,h=new gA,f=new gA,p=new gA,m=new gA,g=new gA;for(let o=0;o<=n;++o){const y=o/n*i*Math.PI*2;v(y,i,a,e,h),v(y+.01,i,a,e,f),m.subVectors(f,h),g.addVectors(f,h),p.crossVectors(m,g),g.crossVectors(p,m),p.normalize(),g.normalize();for(let e=0;e<=r;++e){const i=e/r*Math.PI*2,a=-t*Math.cos(i),f=t*Math.sin(i);u.x=h.x+(a*g.x+f*p.x),u.y=h.y+(a*g.y+f*p.y),u.z=h.z+(a*g.z+f*p.z),s.push(u.x,u.y,u.z),d.subVectors(u,h).normalize(),l.push(d.x,d.y,d.z),c.push(o/n),c.push(e/r)}}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),a=(r+1)*e+t,s=(r+1)*(e-1)+t;o.push(n,i,s),o.push(i,a,s)}function v(e,t,n,r,i){const a=Math.cos(e),o=Math.sin(e),s=n/t*e,l=Math.cos(s);i.x=r*(2+l)*.5*a,i.y=r*(2+l)*o*.5,i.z=r*Math.sin(s)*.5}this.setIndex(o),this.setAttribute("position",new jE(s,3)),this.setAttribute("normal",new jE(l,3)),this.setAttribute("uv",new jE(c,2))}static fromJSON(e){return new jD(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class WD extends QE{constructor(e=new jL(new gA(-1,-1,0),new gA(-1,1,0),new gA(1,1,0)),t=64,n=1,r=8,i=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i};const a=e.computeFrenetFrames(t,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new gA,s=new gA,l=new zS;let c=new gA;const u=[],d=[],h=[],f=[];function p(i){c=e.getPointAt(i/t,c);const l=a.normals[i],h=a.binormals[i];for(let e=0;e<=r;e++){const t=e/r*Math.PI*2,i=Math.sin(t),a=-Math.cos(t);s.x=a*l.x+i*h.x,s.y=a*l.y+i*h.y,s.z=a*l.z+i*h.z,s.normalize(),d.push(s.x,s.y,s.z),o.x=c.x+n*s.x,o.y=c.y+n*s.y,o.z=c.z+n*s.z,u.push(o.x,o.y,o.z)}}!function(){for(let e=0;e<t;e++)p(e);p(!1===i?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=r;n++)l.x=e/t,l.y=n/r,h.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),a=(r+1)*e+t,o=(r+1)*(e-1)+t;f.push(n,i,o),f.push(i,a,o)}}()}(),this.setIndex(f),this.setAttribute("position",new jE(u,3)),this.setAttribute("normal",new jE(d,3)),this.setAttribute("uv",new jE(h,2))}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new WD((new XL[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class XD extends QE{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],n=new Set,r=new gA,i=new gA;if(null!==e.index){const a=e.attributes.position,o=e.index;let s=e.groups;0===s.length&&(s=[{start:0,count:o.count,materialIndex:0}]);for(let e=0,l=s.length;e<l;++e){const l=s[e],c=l.start;for(let e=c,s=c+l.count;e<s;e+=3)for(let s=0;s<3;s++){const l=o.getX(e+s),c=o.getX(e+(s+1)%3);r.fromBufferAttribute(a,l),i.fromBufferAttribute(a,c),!0===qD(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}}else{const a=e.attributes.position;for(let e=0,o=a.count/3;e<o;e++)for(let o=0;o<3;o++){const s=3*e+o,l=3*e+(o+1)%3;r.fromBufferAttribute(a,s),i.fromBufferAttribute(a,l),!0===qD(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}this.setAttribute("position",new jE(t,3))}}}function qD(e,t,n){const r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`,i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`;return!0!==n.has(r)&&!0!==n.has(i)&&(n.add(r),n.add(i),!0)}var YD=Object.freeze({__proto__:null,BoxGeometry:bC,BoxBufferGeometry:bC,CapsuleGeometry:JL,CapsuleBufferGeometry:JL,CircleGeometry:$L,CircleBufferGeometry:$L,ConeGeometry:QL,ConeBufferGeometry:QL,CylinderGeometry:KL,CylinderBufferGeometry:KL,DodecahedronGeometry:tD,DodecahedronBufferGeometry:tD,EdgesGeometry:oD,ExtrudeGeometry:BD,ExtrudeBufferGeometry:BD,IcosahedronGeometry:ND,IcosahedronBufferGeometry:ND,LatheGeometry:ZL,LatheBufferGeometry:ZL,OctahedronGeometry:OD,OctahedronBufferGeometry:OD,PlaneGeometry:zC,PlaneBufferGeometry:zC,PolyhedronGeometry:eD,PolyhedronBufferGeometry:eD,RingGeometry:zD,RingBufferGeometry:zD,ShapeGeometry:UD,ShapeBufferGeometry:UD,SphereGeometry:HD,SphereBufferGeometry:HD,TetrahedronGeometry:GD,TetrahedronBufferGeometry:GD,TorusGeometry:VD,TorusBufferGeometry:VD,TorusKnotGeometry:jD,TorusKnotBufferGeometry:jD,TubeGeometry:WD,TubeBufferGeometry:WD,WireframeGeometry:XD});class ZD extends LE{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new tA(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class JD extends MC{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class $D extends LE{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new tA(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new tA(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qM,this.normalScale=new zS(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class KD extends $D{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new zS(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return DS(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new tA(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new tA(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new tA(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class QD extends LE{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new tA(16777215),this.specular=new tA(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new tA(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qM,this.normalScale=new zS(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ow,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class eI extends LE{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new tA(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new tA(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qM,this.normalScale=new zS(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class tI extends LE{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qM,this.normalScale=new zS(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class nI extends LE{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new tA(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new tA(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ow,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class rI extends LE{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new tA(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qM,this.normalScale=new zS(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class iI extends aL{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function aI(e,t,n){return sI(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)}function oI(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function sI(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function lI(e){const t=e.length,n=new Array(t);for(let e=0;e!==t;++e)n[e]=e;return n.sort((function(t,n){return e[t]-e[n]})),n}function cI(e,t,n){const r=e.length,i=new e.constructor(r);for(let a=0,o=0;o!==r;++a){const r=n[a]*t;for(let n=0;n!==t;++n)i[o++]=e[r+n]}return i}function uI(e,t,n,r){let i=1,a=e[0];for(;void 0!==a&&void 0===a[r];)a=e[i++];if(void 0===a)return;let o=a[r];if(void 0!==o)if(Array.isArray(o))do{o=a[r],void 0!==o&&(t.push(a.time),n.push.apply(n,o)),a=e[i++]}while(void 0!==a);else if(void 0!==o.toArray)do{o=a[r],void 0!==o&&(t.push(a.time),o.toArray(n,n.length)),a=e[i++]}while(void 0!==a);else do{o=a[r],void 0!==o&&(t.push(a.time),n.push(o)),a=e[i++]}while(void 0!==a)}var dI=Object.freeze({__proto__:null,arraySlice:aI,convertArray:oI,isTypedArray:sI,getKeyframeOrder:lI,sortedArray:cI,flattenJSON:uI,subclip:function(e,t,n,r,i=30){const a=e.clone();a.name=t;const o=[];for(let e=0;e<a.tracks.length;++e){const t=a.tracks[e],s=t.getValueSize(),l=[],c=[];for(let e=0;e<t.times.length;++e){const a=t.times[e]*i;if(!(a<n||a>=r)){l.push(t.times[e]);for(let n=0;n<s;++n)c.push(t.values[e*s+n])}}0!==l.length&&(t.times=oI(l,t.times.constructor),t.values=oI(c,t.values.constructor),o.push(t))}a.tracks=o;let s=1/0;for(let e=0;e<a.tracks.length;++e)s>a.tracks[e].times[0]&&(s=a.tracks[e].times[0]);for(let e=0;e<a.tracks.length;++e)a.tracks[e].shift(-1*s);return a.resetDuration(),a},makeClipAdditive:function(e,t=0,n=e,r=30){r<=0&&(r=30);const i=n.tracks.length,a=t/r;for(let t=0;t<i;++t){const r=n.tracks[t],i=r.ValueTypeName;if("bool"===i||"string"===i)continue;const o=e.tracks.find((function(e){return e.name===r.name&&e.ValueTypeName===i}));if(void 0===o)continue;let s=0;const l=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=l/3);let c=0;const u=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const d=r.times.length-1;let h;if(a<=r.times[0]){const e=s,t=l-s;h=aI(r.values,e,t)}else if(a>=r.times[d]){const e=d*l+s,t=e+l-s;h=aI(r.values,e,t)}else{const e=r.createInterpolant(),t=s,n=l-s;e.evaluate(a),h=aI(e.resultBuffer,t,n)}"quaternion"===i&&(new mA).fromArray(h).normalize().conjugate().toArray(h);const f=o.times.length;for(let e=0;e<f;++e){const t=e*u+c;if("quaternion"===i)mA.multiplyQuaternionsFlat(o.values,t,h,0,o.values,t);else{const e=u-2*c;for(let n=0;n<e;++n)o.values[t+n]-=h[n]}}}return e.blendMode=zM,e}});class hI{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let a;n:{r:if(!(e<r)){for(let a=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(i=r,r=t[++n],e<r)break t}a=t.length;break n}if(e>=i)break e;{const o=t[1];e<o&&(n=2,i=o);for(let a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===a)break;if(r=i,i=t[--n-1],e>=i)break t}a=n,n=0}}for(;n<a;){const r=n+a>>>1;e<t[r]?a=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let e=0;e!==r;++e)t[e]=n[i+e];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class fI extends hI{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:BM,endingEnd:BM}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,a=e+1,o=r[i],s=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case FM:i=e,o=2*t-n;break;case NM:i=r.length-2,o=t+r[i]-r[i+1];break;default:i=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case FM:a=e,s=2*n-t;break;case NM:a=1,s=n+r[1]-r[0];break;default:a=e-1,s=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(s-n),this._offsetPrev=i*c,this._offsetNext=a*c}interpolate_(e,t,n,r){const i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,c=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,h=this._weightNext,f=(n-t)/(r-t),p=f*f,m=p*f,g=-d*m+2*d*p-d*f,v=(1+d)*m+(-1.5-2*d)*p+(-.5+d)*f+1,y=(-1-h)*m+(1.5+h)*p+.5*f,b=h*m-h*p;for(let e=0;e!==o;++e)i[e]=g*a[c+e]+v*a[l+e]+y*a[s+e]+b*a[u+e];return i}}class pI extends hI{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,c=(n-t)/(r-t),u=1-c;for(let e=0;e!==o;++e)i[e]=a[l+e]*u+a[s+e]*c;return i}}class mI extends hI{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class gI{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=oI(t,this.TimeBufferType),this.values=oI(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:oI(e.times,Array),values:oI(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new mI(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new pI(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new fI(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case DM:t=this.InterpolantFactoryMethodDiscrete;break;case IM:t=this.InterpolantFactoryMethodLinear;break;case kM:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return DM;case this.InterpolantFactoryMethodLinear:return IM;case this.InterpolantFactoryMethodSmooth:return kM}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,a=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(a=Math.max(a,1),i=a-1);const e=this.getValueSize();this.times=aI(n,i,a),this.values=aI(this.values,i*e,a*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let t=0;t!==i;t++){const r=n[t];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,r),e=!1;break}if(null!==a&&a>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,r,a),e=!1;break}a=r}if(void 0!==r&&sI(r))for(let t=0,n=r.length;t!==n;++t){const n=r[t];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}return e}optimize(){const e=aI(this.times),t=aI(this.values),n=this.getValueSize(),r=this.getInterpolation()===kM,i=e.length-1;let a=1;for(let o=1;o<i;++o){let i=!1;const s=e[o];if(s!==e[o+1]&&(1!==o||s!==e[0]))if(r)i=!0;else{const e=o*n,r=e-n,a=e+n;for(let o=0;o!==n;++o){const n=t[e+o];if(n!==t[r+o]||n!==t[a+o]){i=!0;break}}}if(i){if(o!==a){e[a]=e[o];const r=o*n,i=a*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++a}}if(i>0){e[a]=e[i];for(let e=i*n,r=a*n,o=0;o!==n;++o)t[r+o]=t[e+o];++a}return a!==e.length?(this.times=aI(e,0,a),this.values=aI(t,0,a*n)):(this.times=e,this.values=t),this}clone(){const e=aI(this.times,0),t=aI(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}gI.prototype.TimeBufferType=Float32Array,gI.prototype.ValueBufferType=Float32Array,gI.prototype.DefaultInterpolation=IM;class vI extends gI{}vI.prototype.ValueTypeName="bool",vI.prototype.ValueBufferType=Array,vI.prototype.DefaultInterpolation=DM,vI.prototype.InterpolantFactoryMethodLinear=void 0,vI.prototype.InterpolantFactoryMethodSmooth=void 0;class yI extends gI{}yI.prototype.ValueTypeName="color";class bI extends gI{}bI.prototype.ValueTypeName="number";class xI extends hI{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-t)/(r-t);let l=e*o;for(let e=l+o;l!==e;l+=4)mA.slerpFlat(i,0,a,l-o,a,l,s);return i}}class _I extends gI{InterpolantFactoryMethodLinear(e){return new xI(this.times,this.values,this.getValueSize(),e)}}_I.prototype.ValueTypeName="quaternion",_I.prototype.DefaultInterpolation=IM,_I.prototype.InterpolantFactoryMethodSmooth=void 0;class wI extends gI{}wI.prototype.ValueTypeName="string",wI.prototype.ValueBufferType=Array,wI.prototype.DefaultInterpolation=DM,wI.prototype.InterpolantFactoryMethodLinear=void 0,wI.prototype.InterpolantFactoryMethodSmooth=void 0;class MI extends gI{}MI.prototype.ValueTypeName="vector";class SI{constructor(e,t=-1,n,r=OM){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=LS(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let e=0,i=n.length;e!==i;++e)t.push(AI(n[e]).scale(r));const i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,r=n.length;e!==r;++e)t.push(gI.toJSON(n[e]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const i=t.length,a=[];for(let e=0;e<i;e++){let o=[],s=[];o.push((e+i-1)%i,e,(e+1)%i),s.push(0,1,0);const l=lI(o);o=cI(o,1,l),s=cI(s,1,l),r||0!==o[0]||(o.push(i),s.push(s[0])),a.push(new bI(".morphTargetInfluences["+t[e].name+"]",o,s).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let e=0;e<n.length;e++)if(n[e].name===t)return n[e];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let t=0,n=e.length;t<n;t++){const n=e[t],a=n.name.match(i);if(a&&a.length>1){const e=a[1];let t=r[e];t||(r[e]=t=[]),t.push(n)}}const a=[];for(const e in r)a.push(this.CreateFromMorphTargetSequence(e,r[e],t,n));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,r,i){if(0!==n.length){const a=[],o=[];uI(n,a,o,r),0!==a.length&&i.push(new e(t,a,o))}},r=[],i=e.name||"default",a=e.fps||30,o=e.blendMode;let s=e.length||-1;const l=e.hierarchy||[];for(let e=0;e<l.length;e++){const i=l[e].keys;if(i&&0!==i.length)if(i[0].morphTargets){const e={};let t;for(t=0;t<i.length;t++)if(i[t].morphTargets)for(let n=0;n<i[t].morphTargets.length;n++)e[i[t].morphTargets[n]]=-1;for(const n in e){const e=[],a=[];for(let r=0;r!==i[t].morphTargets.length;++r){const r=i[t];e.push(r.time),a.push(r.morphTarget===n?1:0)}r.push(new bI(".morphTargetInfluence["+n+"]",e,a))}s=e.length*a}else{const a=".bones["+t[e].name+"]";n(MI,a+".position",i,"pos",r),n(_I,a+".quaternion",i,"rot",r),n(MI,a+".scale",i,"scl",r)}}return 0===r.length?null:new this(i,s,r,o)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function AI(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return bI;case"vector":case"vector2":case"vector3":case"vector4":return MI;case"color":return yI;case"quaternion":return _I;case"bool":case"boolean":return vI;case"string":return wI}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];uI(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const EI={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class CI{constructor(e,t,n){const r=this;let i,a=!1,o=0,s=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){s++,!1===a&&void 0!==r.onStart&&r.onStart(e,o,s),a=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,s),o===s&&(a=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}const TI=new CI;class RI{constructor(e){this.manager=void 0!==e?e:TI,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const PI={};class LI extends Error{constructor(e,t){super(e),this.response=t}}class DI extends RI{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=EI.get(e);if(void 0!==i)return this.manager.itemStart(e),setTimeout((()=>{t&&t(i),this.manager.itemEnd(e)}),0),i;if(void 0!==PI[e])return void PI[e].push({onLoad:t,onProgress:n,onError:r});PI[e]=[],PI[e].push({onLoad:t,onProgress:n,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,s=this.responseType;fetch(a).then((t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=PI[e],r=t.body.getReader(),i=t.headers.get("Content-Length"),a=i?parseInt(i):0,o=0!==a;let s=0;const l=new ReadableStream({start(e){!function t(){r.read().then((({done:r,value:i})=>{if(r)e.close();else{s+=i.byteLength;const r=new ProgressEvent("progress",{lengthComputable:o,loaded:s,total:a});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(r)}e.enqueue(i),t()}}))}()}});return new Response(l)}throw new LI(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`,t)})).then((e=>{switch(s){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,o)));case"json":return e.json();default:if(void 0===o)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(o),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then((e=>r.decode(e)))}}})).then((t=>{EI.add(e,t);const n=PI[e];delete PI[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onLoad&&r.onLoad(t)}})).catch((t=>{const n=PI[e];if(void 0===n)throw this.manager.itemError(e),t;delete PI[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class II extends RI{constructor(e){super(e)}load(e,t,n,r){const i=this,a=new DI(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=SI.parse(e[n]);t.push(r)}return t}}class kI extends RI{constructor(e){super(e)}load(e,t,n,r){const i=this,a=[],o=new AL,s=new DI(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(i.withCredentials);let l=0;function c(c){s.load(e[c],(function(e){const n=i.parse(e,!0);a[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(o.minFilter=Rw),o.image=a,o.format=n.format,o.needsUpdate=!0,t&&t(o))}),n,r)}if(Array.isArray(e))for(let t=0,n=e.length;t<n;++t)c(t);else s.load(e,(function(e){const n=i.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){a[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)a[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),a[t].format=n.format,a[t].width=n.width,a[t].height=n.height}o.image=a}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=Rw),o.format=n.format,o.needsUpdate=!0,t&&t(o)}),n,r);return o}}class BI extends RI{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,a=EI.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;const o=jS("img");function s(){c(),EI.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){c(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function c(){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1)}return o.addEventListener("load",s,!1),o.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o}}class FI extends RI{constructor(e){super(e)}load(e,t,n,r){const i=new TC,a=new BI(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;function s(n){a.load(e[n],(function(e){i.images[n]=e,o++,6===o&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(let t=0;t<e.length;++t)s(t);return i}}class NI extends RI{constructor(e){super(e)}load(e,t,n,r){const i=this,a=new ZP,o=new DI(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(i.withCredentials),o.load(e,(function(e){const n=i.parse(e);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:ww,a.wrapT=void 0!==n.wrapT?n.wrapT:ww,a.magFilter=void 0!==n.magFilter?n.magFilter:Rw,a.minFilter=void 0!==n.minFilter?n.minFilter:Rw,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(a.encoding=n.encoding),void 0!==n.flipY&&(a.flipY=n.flipY),void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=Dw),1===n.mipmapCount&&(a.minFilter=Rw),void 0!==n.generateMipmaps&&(a.generateMipmaps=n.generateMipmaps),a.needsUpdate=!0,t&&t(a,n))}),n,r),a}}class OI extends RI{constructor(e){super(e)}load(e,t,n,r){const i=new sA,a=new BI(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}class zI extends yE{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new tA(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class UI extends zI{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(yE.DefaultUp),this.updateMatrix(),this.groundColor=new tA(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const HI=new qA,GI=new gA,VI=new gA;class jI{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new zS(512,512),this.map=null,this.mapPass=null,this.matrix=new qA,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new FC,this._frameExtents=new zS(1,1),this._viewportCount=1,this._viewports=[new lA(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;GI.setFromMatrixPosition(e.matrixWorld),t.position.copy(GI),VI.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(VI),t.updateMatrixWorld(),HI.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(HI),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class WI extends jI{constructor(){super(new AC(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*PS*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class XI extends zI{constructor(e,t,n=0,r=Math.PI/3,i=0,a=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(yE.DefaultUp),this.updateMatrix(),this.target=new yE,this.distance=n,this.angle=r,this.penumbra=i,this.decay=a,this.shadow=new WI}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const qI=new qA,YI=new gA,ZI=new gA;class JI extends jI{constructor(){super(new AC(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new zS(4,2),this._viewportCount=6,this._viewports=[new lA(2,1,1,1),new lA(0,1,1,1),new lA(3,1,1,1),new lA(1,1,1,1),new lA(3,0,1,1),new lA(1,0,1,1)],this._cubeDirections=[new gA(1,0,0),new gA(-1,0,0),new gA(0,0,1),new gA(0,0,-1),new gA(0,1,0),new gA(0,-1,0)],this._cubeUps=[new gA(0,1,0),new gA(0,1,0),new gA(0,1,0),new gA(0,1,0),new gA(0,0,1),new gA(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),YI.setFromMatrixPosition(e.matrixWorld),n.position.copy(YI),ZI.copy(n.position),ZI.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(ZI),n.updateMatrixWorld(),r.makeTranslation(-YI.x,-YI.y,-YI.z),qI.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(qI)}}class $I extends zI{constructor(e,t,n=0,r=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new JI}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class KI extends jI{constructor(){super(new ZC(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class QI extends zI{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(yE.DefaultUp),this.updateMatrix(),this.target=new yE,this.shadow=new KI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class ek extends zI{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class tk extends zI{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class nk{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new gA)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*i),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*r*1.092548),t.addScaledVector(a[5],r*i*1.092548),t.addScaledVector(a[6],.315392*(3*i*i-1)),t.addScaledVector(a[7],n*i*1.092548),t.addScaledVector(a[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*r),t.addScaledVector(a[2],1.023328*i),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*r),t.addScaledVector(a[5],.858086*r*i),t.addScaledVector(a[6],.743125*i*i-.247708),t.addScaledVector(a[7],.858086*n*i),t.addScaledVector(a[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}class rk extends zI{constructor(e=new nk,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class ik extends RI{constructor(e){super(e),this.textures={}}load(e,t,n,r){const i=this,a=new DI(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}parse(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const r=ik.createMaterialFromType(e.type);if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenColor&&(r.sheenColor=(new tA).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.iridescence&&(r.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(r.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const t in e.uniforms){const i=e.uniforms[t];switch(r.uniforms[t]={},i.type){case"t":r.uniforms[t].value=n(i.value);break;case"c":r.uniforms[t].value=(new tA).setHex(i.value);break;case"v2":r.uniforms[t].value=(new zS).fromArray(i.value);break;case"v3":r.uniforms[t].value=(new gA).fromArray(i.value);break;case"v4":r.uniforms[t].value=(new lA).fromArray(i.value);break;case"m3":r.uniforms[t].value=(new US).fromArray(i.value);break;case"m4":r.uniforms[t].value=(new qA).fromArray(i.value);break;default:r.uniforms[t].value=i.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(const t in e.extensions)r.extensions[t]=e.extensions[t];if(void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),r.normalScale=(new zS).fromArray(t)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(r.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new zS).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(r.iridescenceMap=n(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=n(e.thicknessMap)),void 0!==e.sheenColorMap&&(r.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){return new{ShadowMaterial:ZD,SpriteMaterial:MP,RawShaderMaterial:JD,ShaderMaterial:MC,PointsMaterial:gL,MeshPhysicalMaterial:KD,MeshStandardMaterial:$D,MeshPhongMaterial:QD,MeshToonMaterial:eI,MeshNormalMaterial:tI,MeshLambertMaterial:nI,MeshDepthMaterial:tP,MeshDistanceMaterial:nP,MeshBasicMaterial:DE,MeshMatcapMaterial:rI,LineDashedMaterial:iI,LineBasicMaterial:aL,Material:LE}[e]}}class ak{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class ok extends QE{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class sk extends RI{constructor(e){super(e)}load(e,t,n,r){const i=this,a=new DI(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}parse(e){const t={},n={};function r(e,r){if(void 0!==t[r])return t[r];const i=e.interleavedBuffers[r],a=function(e,t){if(void 0!==n[t])return n[t];const r=e.arrayBuffers[t],i=new Uint32Array(r).buffer;return n[t]=i,i}(e,i.buffer),o=VS(i.type,a),s=new xP(o,i.stride);return s.uuid=i.uuid,t[r]=s,s}const i=e.isInstancedBufferGeometry?new ok:new QE,a=e.data.index;if(void 0!==a){const e=VS(a.type,a.array);i.setIndex(new BE(e,1))}const o=e.data.attributes;for(const t in o){const n=o[t];let a;if(n.isInterleavedBufferAttribute){const t=r(e.data,n.data);a=new wP(t,n.itemSize,n.offset,n.normalized)}else{const e=VS(n.type,n.array);a=new(n.isInstancedBufferAttribute?QP:BE)(e,n.itemSize,n.normalized)}void 0!==n.name&&(a.name=n.name),void 0!==n.usage&&a.setUsage(n.usage),void 0!==n.updateRange&&(a.updateRange.offset=n.updateRange.offset,a.updateRange.count=n.updateRange.count),i.setAttribute(t,a)}const s=e.data.morphAttributes;if(s)for(const t in s){const n=s[t],a=[];for(let t=0,i=n.length;t<i;t++){const i=n[t];let o;if(i.isInterleavedBufferAttribute){const t=r(e.data,i.data);o=new wP(t,i.itemSize,i.offset,i.normalized)}else{const e=VS(i.type,i.array);o=new BE(e,i.itemSize,i.normalized)}void 0!==i.name&&(o.name=i.name),a.push(o)}i.morphAttributes[t]=a}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let e=0,t=l.length;e!==t;++e){const t=l[e];i.addGroup(t.start,t.count,t.materialIndex)}const c=e.data.boundingSphere;if(void 0!==c){const e=new gA;void 0!==c.center&&e.fromArray(c.center),i.boundingSphere=new OA(e,c.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}class lk extends RI{constructor(e){super(e)}load(e,t,n,r){const i=this,a=""===this.path?ak.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const o=new DI(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){let a=null;try{a=JSON.parse(n)}catch(t){return void 0!==r&&r(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}const o=a.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?i.parse(a,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,r)}async loadAsync(e,t){const n=""===this.path?ak.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;const r=new DI(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const i=await r.loadAsync(e,t),a=JSON.parse(i),o=a.metadata;if(void 0===o||void 0===o.type||"geometry"===o.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(a)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,(function(){void 0!==t&&t(l)})),o=this.parseTextures(e.textures,a),s=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,s,o,n),c=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,c),void 0!==t){let e=!1;for(const t in a)if(a[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),i=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,i),o=this.parseMaterials(e.materials,a),s=this.parseObject(e.object,r,o,a,t),l=this.parseSkeletons(e.skeletons,s);return this.bindSkeletons(s,l),s}parseShapes(e){const t={};if(void 0!==e)for(let n=0,r=e.length;n<r;n++){const r=(new sD).fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse((function(e){e.isBone&&(r[e.uuid]=e)})),void 0!==e)for(let t=0,i=e.length;t<i;t++){const i=(new KP).fromJSON(e[t],r);n[i.uuid]=i}return n}parseGeometries(e,t){const n={};if(void 0!==e){const r=new sk;for(let i=0,a=e.length;i<a;i++){let a;const o=e[i];switch(o.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(o);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:o.type in YD?a=YD[o.type].fromJSON(o,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${o.type}"`)}a.uuid=o.uuid,void 0!==o.name&&(a.name=o.name),!0===a.isBufferGeometry&&void 0!==o.userData&&(a.userData=o.userData),n[o.uuid]=a}}return n}parseMaterials(e,t){const n={},r={};if(void 0!==e){const i=new ik;i.setTextures(t);for(let t=0,a=e.length;t<a;t++){const a=e[t];if("MultiMaterial"===a.type){const e=[];for(let t=0;t<a.materials.length;t++){const r=a.materials[t];void 0===n[r.uuid]&&(n[r.uuid]=i.parse(r)),e.push(n[r.uuid])}r[a.uuid]=e}else void 0===n[a.uuid]&&(n[a.uuid]=i.parse(a)),r[a.uuid]=n[a.uuid]}}return r}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const r=e[n],i=SI.parse(r);t[i.uuid]=i}return t}parseImages(e,t){const n=this,r={};let i;function a(e){if("string"==typeof e){const t=e;return function(e){return n.manager.itemStart(e),i.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemError(e),n.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t)}return e.data?{data:VS(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const n=new CI(t);i=new BI(n),i.setCrossOrigin(this.crossOrigin);for(let t=0,n=e.length;t<n;t++){const n=e[t],i=n.url;if(Array.isArray(i)){const e=[];for(let t=0,n=i.length;t<n;t++){const n=a(i[t]);null!==n&&(n instanceof HTMLImageElement?e.push(n):e.push(new ZP(n.data,n.width,n.height)))}r[n.uuid]=new iA(e)}else{const e=a(n.url);r[n.uuid]=new iA(e)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function i(e){if("string"==typeof e){const n=e,i=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:t.resourcePath+n;return await r.loadAsync(i)}return e.data?{data:VS(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){r=new BI(this.manager),r.setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){const r=e[t],a=r.url;if(Array.isArray(a)){const e=[];for(let t=0,n=a.length;t<n;t++){const n=a[t],r=await i(n);null!==r&&(r instanceof HTMLImageElement?e.push(r):e.push(new ZP(r.data,r.width,r.height)))}n[r.uuid]=new iA(e)}else{const e=await i(r.url);n[r.uuid]=new iA(e)}}}return n}parseTextures(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const r={};if(void 0!==e)for(let i=0,a=e.length;i<a;i++){const a=e[i];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===t[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const o=t[a.image],s=o.data;let l;Array.isArray(s)?(l=new TC,6===s.length&&(l.needsUpdate=!0)):(l=s&&s.data?new ZP:new sA,s&&(l.needsUpdate=!0)),l.source=o,l.uuid=a.uuid,void 0!==a.name&&(l.name=a.name),void 0!==a.mapping&&(l.mapping=n(a.mapping,ck)),void 0!==a.offset&&l.offset.fromArray(a.offset),void 0!==a.repeat&&l.repeat.fromArray(a.repeat),void 0!==a.center&&l.center.fromArray(a.center),void 0!==a.rotation&&(l.rotation=a.rotation),void 0!==a.wrap&&(l.wrapS=n(a.wrap[0],uk),l.wrapT=n(a.wrap[1],uk)),void 0!==a.format&&(l.format=a.format),void 0!==a.type&&(l.type=a.type),void 0!==a.encoding&&(l.encoding=a.encoding),void 0!==a.minFilter&&(l.minFilter=n(a.minFilter,dk)),void 0!==a.magFilter&&(l.magFilter=n(a.magFilter,dk)),void 0!==a.anisotropy&&(l.anisotropy=a.anisotropy),void 0!==a.flipY&&(l.flipY=a.flipY),void 0!==a.premultiplyAlpha&&(l.premultiplyAlpha=a.premultiplyAlpha),void 0!==a.unpackAlignment&&(l.unpackAlignment=a.unpackAlignment),void 0!==a.userData&&(l.userData=a.userData),r[a.uuid]=l}return r}parseObject(e,t,n,r,i){let a,o,s;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function c(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];void 0===n[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),t.push(n[i])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function u(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),r[e]}switch(e.type){case"Scene":a=new bP,void 0!==e.background&&(Number.isInteger(e.background)?a.background=new tA(e.background):a.background=u(e.background)),void 0!==e.environment&&(a.environment=u(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?a.fog=new yP(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(a.fog=new vP(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":a=new AC(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(a.focus=e.focus),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.filmGauge&&(a.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(a.filmOffset=e.filmOffset),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new ZC(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new ek(e.color,e.intensity);break;case"DirectionalLight":a=new QI(e.color,e.intensity);break;case"PointLight":a=new $I(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new tk(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new XI(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new UI(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=(new rk).fromJSON(e);break;case"SkinnedMesh":o=l(e.geometry),s=c(e.material),a=new qP(o,s),void 0!==e.bindMode&&(a.bindMode=e.bindMode),void 0!==e.bindMatrix&&a.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(a.skeleton=e.skeleton);break;case"Mesh":o=l(e.geometry),s=c(e.material),a=new vC(o,s);break;case"InstancedMesh":o=l(e.geometry),s=c(e.material);const t=e.count,n=e.instanceMatrix,r=e.instanceColor;a=new iL(o,s,t),a.instanceMatrix=new QP(new Float32Array(n.array),16),void 0!==r&&(a.instanceColor=new QP(new Float32Array(r.array),r.itemSize));break;case"LOD":a=new HP;break;case"Line":a=new dL(l(e.geometry),c(e.material));break;case"LineLoop":a=new mL(l(e.geometry),c(e.material));break;case"LineSegments":a=new pL(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":a=new _L(l(e.geometry),c(e.material));break;case"Sprite":a=new NP(c(e.material));break;case"Group":a=new lP;break;case"Bone":a=new YP;break;default:a=new yE}if(a.uuid=e.uuid,void 0!==e.name&&(a.name=e.name),void 0!==e.matrix?(a.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==e.position&&a.position.fromArray(e.position),void 0!==e.rotation&&a.rotation.fromArray(e.rotation),void 0!==e.quaternion&&a.quaternion.fromArray(e.quaternion),void 0!==e.scale&&a.scale.fromArray(e.scale)),void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(a.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(a.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(a.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&a.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(a.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.frustumCulled&&(a.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(a.renderOrder=e.renderOrder),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.layers&&(a.layers.mask=e.layers),void 0!==e.children){const o=e.children;for(let e=0;e<o.length;e++)a.add(this.parseObject(o[e],t,n,r,i))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const n=t[e];a.animations.push(i[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(a.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],r=a.getObjectByProperty("uuid",n.object);void 0!==r&&a.addLevel(r,n.distance)}}return a}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}}const ck={UVMapping:mw,CubeReflectionMapping:gw,CubeRefractionMapping:vw,EquirectangularReflectionMapping:yw,EquirectangularRefractionMapping:bw,CubeUVReflectionMapping:xw},uk={RepeatWrapping:_w,ClampToEdgeWrapping:ww,MirroredRepeatWrapping:Mw},dk={NearestFilter:Sw,NearestMipmapNearestFilter:Aw,NearestMipmapLinearFilter:Cw,LinearFilter:Rw,LinearMipmapNearestFilter:Pw,LinearMipmapLinearFilter:Dw};class hk extends RI{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,a=EI.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;const o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){EI.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}let fk;const pk={getContext:function(){return void 0===fk&&(fk=new(window.AudioContext||window.webkitAudioContext)),fk},setContext:function(e){fk=e}};class mk extends RI{constructor(e){super(e)}load(e,t,n,r){const i=this,a=new DI(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{const e=n.slice(0);pk.getContext().decodeAudioData(e,(function(e){t(e)}))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}}class gk extends rk{constructor(e,t,n=1){super(void 0,n),this.isHemisphereLightProbe=!0;const r=(new tA).set(e),i=(new tA).set(t),a=new gA(r.r,r.g,r.b),o=new gA(i.r,i.g,i.b),s=Math.sqrt(Math.PI),l=s*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(o).multiplyScalar(s),this.sh.coefficients[1].copy(a).sub(o).multiplyScalar(l)}}class vk extends rk{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const n=(new tA).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const yk=new qA,bk=new qA,xk=new qA;class _k{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new AC,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new AC,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,xk.copy(e.projectionMatrix);const n=t.eyeSep/2,r=n*t.near/t.focus,i=t.near*Math.tan(RS*t.fov*.5)/t.zoom;let a,o;bk.elements[12]=-n,yk.elements[12]=n,a=-i*t.aspect+r,o=i*t.aspect+r,xk.elements[0]=2*t.near/(o-a),xk.elements[8]=(o+a)/(o-a),this.cameraL.projectionMatrix.copy(xk),a=-i*t.aspect-r,o=i*t.aspect-r,xk.elements[0]=2*t.near/(o-a),xk.elements[8]=(o+a)/(o-a),this.cameraR.projectionMatrix.copy(xk)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(bk),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(yk)}}class wk{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Mk(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=Mk();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function Mk(){return("undefined"==typeof performance?Date:performance).now()}const Sk=new gA,Ak=new mA,Ek=new gA,Ck=new gA;class Tk extends yE{constructor(){super(),this.type="AudioListener",this.context=pk.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new wk}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Sk,Ak,Ek),Ck.set(0,0,-1).applyQuaternion(Ak),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Sk.x,e),t.positionY.linearRampToValueAtTime(Sk.y,e),t.positionZ.linearRampToValueAtTime(Sk.z,e),t.forwardX.linearRampToValueAtTime(Ck.x,e),t.forwardY.linearRampToValueAtTime(Ck.y,e),t.forwardZ.linearRampToValueAtTime(Ck.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition(Sk.x,Sk.y,Sk.z),t.setOrientation(Ck.x,Ck.y,Ck.z,n.x,n.y,n.z)}}class Rk extends yE{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Pk=new gA,Lk=new mA,Dk=new gA,Ik=new gA;class kk extends Rk{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(Pk,Lk,Dk),Ik.set(0,0,1).applyQuaternion(Lk);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Pk.x,e),t.positionY.linearRampToValueAtTime(Pk.y,e),t.positionZ.linearRampToValueAtTime(Pk.z,e),t.orientationX.linearRampToValueAtTime(Ik.x,e),t.orientationY.linearRampToValueAtTime(Ik.y,e),t.orientationZ.linearRampToValueAtTime(Ik.z,e)}else t.setPosition(Pk.x,Pk.y,Pk.z),t.setOrientation(Ik.x,Ik.y,Ik.z)}}class Bk{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class Fk{constructor(e,t,n){let r,i,a;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,i=e*r+r;let a=this.cumulativeWeight;if(0===a){for(let e=0;e!==r;++e)n[i+e]=n[e];a=t}else{a+=t;const e=t/a;this._mixBufferRegion(n,i,0,e,r)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-i,t)}a>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let e=t,i=t+t;e!==i;++e)if(n[e]!==n[e+t]){o.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let e=n,i=r;e!==i;++e)t[e]=t[r+e%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,i){if(r>=.5)for(let r=0;r!==i;++r)e[t+r]=e[n+r]}_slerp(e,t,n,r){mA.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,i){const a=this._workIndex*i;mA.multiplyQuaternionsFlat(e,a,e,t,e,n),mA.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,n,r,i){const a=1-r;for(let o=0;o!==i;++o){const i=t+o;e[i]=e[i]*a+e[n+o]*r}}_lerpAdditive(e,t,n,r,i){for(let a=0;a!==i;++a){const i=t+a;e[i]=e[i]+e[n+a]*r}}}const Nk=new RegExp("[\\[\\]\\.:\\/]","g"),Ok="[^\\[\\]\\.:\\/]",zk="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",Uk=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Ok)+/(WCOD+)?/.source.replace("WCOD",zk)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Ok)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Ok)+"$"),Hk=["material","materials","bones"];class Gk{constructor(e,t,n){this.path=t,this.parsedPath=n||Gk.parseTrackName(t),this.node=Gk.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Gk.Composite(e,t,n):new Gk(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Nk,"")}static parseTrackName(e){const t=Uk.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==Hk.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const a=n(i.children);if(a)return a}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=Gk.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const a=e[r];if(void 0===a){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let o=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?o=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(o=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=i}else void 0!==a.fromArray&&void 0!==a.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(s=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Gk.Composite=class{constructor(e,t,n){const r=n||Gk.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},Gk.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Gk.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Gk.prototype.GetterByBindingType=[Gk.prototype._getValue_direct,Gk.prototype._getValue_array,Gk.prototype._getValue_arrayElement,Gk.prototype._getValue_toArray],Gk.prototype.SetterByBindingTypeAndVersioning=[[Gk.prototype._setValue_direct,Gk.prototype._setValue_direct_setNeedsUpdate,Gk.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Gk.prototype._setValue_array,Gk.prototype._setValue_array_setNeedsUpdate,Gk.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Gk.prototype._setValue_arrayElement,Gk.prototype._setValue_arrayElement_setNeedsUpdate,Gk.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Gk.prototype._setValue_fromArray,Gk.prototype._setValue_fromArray_setNeedsUpdate,Gk.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Vk{constructor(){this.isAnimationObjectGroup=!0,this.uuid=LS(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,a=i.length;let o,s=e.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],d=u.uuid;let h=t[d];if(void 0===h){h=s++,t[d]=h,e.push(u);for(let e=0,t=a;e!==t;++e)i[e].push(new Gk(u,n[e],r[e]))}else if(h<l){o=e[h];const s=--l,c=e[s];t[c.uuid]=h,e[h]=c,t[d]=s,e[s]=u;for(let e=0,t=a;e!==t;++e){const t=i[e],a=t[s];let o=t[h];t[h]=a,void 0===o&&(o=new Gk(u,n[e],r[e])),t[s]=o}}else e[h]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_;for(let a=0,o=arguments.length;a!==o;++a){const o=arguments[a],s=o.uuid,l=t[s];if(void 0!==l&&l>=i){const a=i++,c=e[a];t[c.uuid]=l,e[l]=c,t[s]=a,e[a]=o;for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[a],i=t[l];t[l]=r,t[a]=i}}}this.nCachedObjects_=i}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_,a=e.length;for(let o=0,s=arguments.length;o!==s;++o){const s=arguments[o].uuid,l=t[s];if(void 0!==l)if(delete t[s],l<i){const o=--i,s=e[o],c=--a,u=e[c];t[s.uuid]=l,e[l]=s,t[u.uuid]=o,e[o]=u,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[o],i=t[c];t[l]=r,t[o]=i,t.pop()}}else{const i=--a,o=e[i];i>0&&(t[o.uuid]=l),e[l]=o,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e];t[l]=t[i],t.pop()}}}this.nCachedObjects_=i}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const i=this._bindings;if(void 0!==r)return i[r];const a=this._paths,o=this._parsedPaths,s=this._objects,l=s.length,c=this.nCachedObjects_,u=new Array(l);r=i.length,n[e]=r,a.push(e),o.push(t),i.push(u);for(let n=c,r=s.length;n!==r;++n){const r=s[n];u[n]=new Gk(r,e,t)}return u}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const r=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];t[e[o]]=n,a[n]=s,a.pop(),i[n]=i[o],i.pop(),r[n]=r[o],r.pop()}}}class jk{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const i=t.tracks,a=i.length,o=new Array(a),s={endingStart:BM,endingEnd:BM};for(let e=0;e!==a;++e){const t=i[e].createInterpolant(null);o[e]=t,t.settings=s}this._interpolantSettings=s,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=PM,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,r=e._clip.duration,i=r/n,a=n/r;e.warp(1,i,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,i=r.time,a=this.timeScale;let o=this._timeScaleInterpolant;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const s=o.parameterPositions,l=o.sampleValues;return s[0]=i,s[1]=i+n,l[0]=e/a,l[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const i=this._startTime;if(null!==i){const r=(e-i)*n;if(r<0||0===n)return;this._startTime=null,t=n*r}t*=this._updateTimeScale(e);const a=this._updateTime(t),o=this._updateWeight(e);if(o>0){const e=this._interpolants,t=this._propertyBindings;if(this.blendMode===zM)for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(a),t[n].accumulateAdditive(o);else for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(a),t[n].accumulate(r,o)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,i=this._loopCount;const a=n===LM;if(0===e)return-1===i?r:a&&1==(1&i)?t-r:r;if(n===RM){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),r>=t||r<0){const n=Math.floor(r/t);r-=t*n,i+=Math.abs(n);const o=this.repetitions-i;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===o){const t=e<0;this._setEndings(t,!t,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(a&&1==(1&i))return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=FM,r.endingEnd=FM):(r.endingStart=e?this.zeroSlopeAtStart?FM:BM:NM,r.endingEnd=t?this.zeroSlopeAtEnd?FM:BM:NM)}_scheduleFading(e,t,n){const r=this._mixer,i=r.time;let a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,s=a.sampleValues;return o[0]=i,s[0]=t,o[1]=i+e,s[1]=n,this}}const Wk=new Float32Array(1);class Xk extends ES{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName;let c=l[s];void 0===c&&(c={},l[s]=c);for(let e=0;e!==i;++e){const i=r[e],l=i.name;let u=c[l];if(void 0!==u)++u.referenceCount,a[e]=u;else{if(u=a[e],void 0!==u){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,s,l));continue}const r=t&&t._propertyBindings[e].binding.parsedPath;u=new Fk(Gk.create(n,l,r),i.ValueTypeName,i.getValueSize()),++u.referenceCount,this._addInactiveBinding(u,s,l),a[e]=u}o[e].resultBuffer=u.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,i=this._actionsByClip;let a=i[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{const t=a.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const i=e._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,l=s[s.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,s[c]=l,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete a[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.referenceCount&&this._removeInactiveBinding(n)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,i=this._bindings;let a=r[t];void 0===a&&(a={},r[t]=a),a[n]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,o=a[r],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete o[i],0===Object.keys(o).length&&delete a[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new pI(new Float32Array(2),new Float32Array(2),1,Wk),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}clipAction(e,t,n){const r=t||this._root,i=r.uuid;let a="string"==typeof e?SI.findByName(r,e):e;const o=null!==a?a.uuid:e,s=this._actionsByClip[o];let l=null;if(void 0===n&&(n=null!==a?a.blendMode:OM),void 0!==s){const e=s.actionByRoot[i];if(void 0!==e&&e.blendMode===n)return e;l=s.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;const c=new jk(this,a,t,n);return this._bindAction(c,l),this._addInactiveAction(c,o,i),c}existingAction(e,t){const n=t||this._root,r=n.uuid,i="string"==typeof e?SI.findByName(n,e):e,a=i?i.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1;for(let o=0;o!==n;++o)t[o]._update(r,e,i,a);const o=this._bindings,s=this._nActiveBindings;for(let e=0;e!==s;++e)o[e].apply(a);return this}setTime(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const e=i.knownActions;for(let n=0,r=e.length;n!==r;++n){const r=e[n];this._deactivateAction(r);const i=r._cacheIndex,a=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,a._cacheIndex=i,t[i]=a,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const e in n){const r=n[e].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}const r=this._bindingsByRootAndName[t];if(void 0!==r)for(const e in r){const t=r[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class qk{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new qk(void 0===this.value.clone?this.value:this.value.clone())}}let Yk=0;class Zk extends ES{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Yk++}),this.name="",this.usage=pS,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let e=0,n=t.length;e<n;e++)this.uniforms.push(t[e].clone());return this}clone(){return(new this.constructor).copy(this)}}class Jk extends xP{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class $k{constructor(e,t,n,r,i){this.isGLBufferAttribute=!0,this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class Kk{constructor(e,t,n=0,r=1/0){this.ray=new XA(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new iE,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return eB(e,this,n,t),n.sort(Qk),n}intersectObjects(e,t=!0,n=[]){for(let r=0,i=e.length;r<i;r++)eB(e[r],this,n,t);return n.sort(Qk),n}}function Qk(e,t){return e.distance-t.distance}function eB(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r){const r=e.children;for(let e=0,i=r.length;e<i;e++)eB(r[e],t,n,!0)}}class tB{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(DS(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class nB{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return(new this.constructor).copy(this)}}const rB=new zS;class iB{constructor(e=new zS(1/0,1/0),t=new zS(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=rB.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return rB.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const aB=new gA,oB=new gA;class sB{constructor(e=new gA,t=new gA){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){aB.subVectors(e,this.start),oB.subVectors(this.end,this.start);const n=oB.dot(oB);let r=oB.dot(aB)/n;return t&&(r=DS(r,0,1)),r}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const lB=new gA;class cB extends yE{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const n=new QE,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let e=0,t=1,n=32;e<n;e++,t++){const i=e/n*Math.PI*2,a=t/n*Math.PI*2;r.push(Math.cos(i),Math.sin(i),1,Math.cos(a),Math.sin(a),1)}n.setAttribute("position",new jE(r,3));const i=new aL({fog:!1,toneMapped:!1});this.cone=new pL(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),lB.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(lB),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const uB=new gA,dB=new qA,hB=new qA;class fB extends pL{constructor(e){const t=pB(e),n=new QE,r=[],i=[],a=new tA(0,0,1),o=new tA(0,1,0);for(let e=0;e<t.length;e++){const n=t[e];n.parent&&n.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(a.r,a.g,a.b),i.push(o.r,o.g,o.b))}n.setAttribute("position",new jE(r,3)),n.setAttribute("color",new jE(i,3)),super(n,new aL({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");hB.copy(this.root.matrixWorld).invert();for(let e=0,n=0;e<t.length;e++){const i=t[e];i.parent&&i.parent.isBone&&(dB.multiplyMatrices(hB,i.matrixWorld),uB.setFromMatrixPosition(dB),r.setXYZ(n,uB.x,uB.y,uB.z),dB.multiplyMatrices(hB,i.parent.matrixWorld),uB.setFromMatrixPosition(dB),r.setXYZ(n+1,uB.x,uB.y,uB.z),n+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function pB(e){const t=[];!0===e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,pB(e.children[n]));return t}class mB extends vC{constructor(e,t,n){super(new HD(t,4,2),new DE({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.light.updateMatrixWorld(),this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const gB=new gA,vB=new tA,yB=new tA;class bB extends yE{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const r=new OD(t);r.rotateY(.5*Math.PI),this.material=new DE({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const i=r.getAttribute("position"),a=new Float32Array(3*i.count);r.setAttribute("color",new BE(a,3)),this.add(new vC(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");vB.copy(this.light.color),yB.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const r=e<n/2?vB:yB;t.setXYZ(e,r.r,r.g,r.b)}t.needsUpdate=!0}e.lookAt(gB.setFromMatrixPosition(this.light.matrixWorld).negate())}}class xB extends pL{constructor(e=10,t=10,n=4473924,r=8947848){n=new tA(n),r=new tA(r);const i=t/2,a=e/t,o=e/2,s=[],l=[];for(let e=0,c=0,u=-o;e<=t;e++,u+=a){s.push(-o,0,u,o,0,u),s.push(u,0,-o,u,0,o);const t=e===i?n:r;t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3}const c=new QE;c.setAttribute("position",new jE(s,3)),c.setAttribute("color",new jE(l,3)),super(c,new aL({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}class _B extends pL{constructor(e=10,t=16,n=8,r=64,i=4473924,a=8947848){i=new tA(i),a=new tA(a);const o=[],s=[];for(let n=0;n<=t;n++){const r=n/t*(2*Math.PI),l=Math.sin(r)*e,c=Math.cos(r)*e;o.push(0,0,0),o.push(l,0,c);const u=1&n?i:a;s.push(u.r,u.g,u.b),s.push(u.r,u.g,u.b)}for(let t=0;t<=n;t++){const l=1&t?i:a,c=e-e/n*t;for(let e=0;e<r;e++){let t=e/r*(2*Math.PI),n=Math.sin(t)*c,i=Math.cos(t)*c;o.push(n,0,i),s.push(l.r,l.g,l.b),t=(e+1)/r*(2*Math.PI),n=Math.sin(t)*c,i=Math.cos(t)*c,o.push(n,0,i),s.push(l.r,l.g,l.b)}}const l=new QE;l.setAttribute("position",new jE(o,3)),l.setAttribute("color",new jE(s,3)),super(l,new aL({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}}const wB=new gA,MB=new gA,SB=new gA;class AB extends yE{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);let r=new QE;r.setAttribute("position",new jE([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const i=new aL({fog:!1,toneMapped:!1});this.lightPlane=new dL(r,i),this.add(this.lightPlane),r=new QE,r.setAttribute("position",new jE([0,0,0,0,0,1],3)),this.targetLine=new dL(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){wB.setFromMatrixPosition(this.light.matrixWorld),MB.setFromMatrixPosition(this.light.target.matrixWorld),SB.subVectors(MB,wB),this.lightPlane.lookAt(MB),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(MB),this.targetLine.scale.z=SB.length()}}const EB=new gA,CB=new SC;class TB extends pL{constructor(e){const t=new QE,n=new aL({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],a={};function o(e,t){s(e),s(t)}function s(e){r.push(0,0,0),i.push(0,0,0),void 0===a[e]&&(a[e]=[]),a[e].push(r.length/3-1)}o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4"),t.setAttribute("position",new jE(r,3)),t.setAttribute("color",new jE(i,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const l=new tA(16755200),c=new tA(16711680),u=new tA(43775),d=new tA(16777215),h=new tA(3355443);this.setColors(l,c,u,d,h)}setColors(e,t,n,r,i){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,i.r,i.g,i.b),a.setXYZ(41,i.r,i.g,i.b),a.setXYZ(42,i.r,i.g,i.b),a.setXYZ(43,i.r,i.g,i.b),a.setXYZ(44,i.r,i.g,i.b),a.setXYZ(45,i.r,i.g,i.b),a.setXYZ(46,i.r,i.g,i.b),a.setXYZ(47,i.r,i.g,i.b),a.setXYZ(48,i.r,i.g,i.b),a.setXYZ(49,i.r,i.g,i.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap;CB.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),RB("c",t,e,CB,0,0,-1),RB("t",t,e,CB,0,0,1),RB("n1",t,e,CB,-1,-1,-1),RB("n2",t,e,CB,1,-1,-1),RB("n3",t,e,CB,-1,1,-1),RB("n4",t,e,CB,1,1,-1),RB("f1",t,e,CB,-1,-1,1),RB("f2",t,e,CB,1,-1,1),RB("f3",t,e,CB,-1,1,1),RB("f4",t,e,CB,1,1,1),RB("u1",t,e,CB,.7,1.1,-1),RB("u2",t,e,CB,-.7,1.1,-1),RB("u3",t,e,CB,0,2,-1),RB("cf1",t,e,CB,-1,0,1),RB("cf2",t,e,CB,1,0,1),RB("cf3",t,e,CB,0,-1,1),RB("cf4",t,e,CB,0,1,1),RB("cn1",t,e,CB,-1,0,-1),RB("cn2",t,e,CB,1,0,-1),RB("cn3",t,e,CB,0,-1,-1),RB("cn4",t,e,CB,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function RB(e,t,n,r,i,a,o){EB.set(i,a,o).unproject(r);const s=t[e];if(void 0!==s){const e=n.getAttribute("position");for(let t=0,n=s.length;t<n;t++)e.setXYZ(s[t],EB.x,EB.y,EB.z)}}const PB=new bA;class LB extends pL{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new QE;i.setIndex(new BE(n,1)),i.setAttribute("position",new BE(r,3)),super(i,new aL({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&PB.setFromObject(this.object),PB.isEmpty())return;const t=PB.min,n=PB.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}}class DB extends pL{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new QE;r.setIndex(new BE(n,1)),r.setAttribute("position",new jE([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new aL({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class IB extends dL{constructor(e,t=1,n=16776960){const r=n,i=new QE;i.setAttribute("position",new jE([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),i.computeBoundingSphere(),super(i,new aL({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=new QE;a.setAttribute("position",new jE([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),a.computeBoundingSphere(),this.add(new vC(a,new DE({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}}const kB=new gA;let BB,FB;class NB extends yE{constructor(e=new gA(0,0,1),t=new gA(0,0,0),n=1,r=16776960,i=.2*n,a=.2*i){super(),this.type="ArrowHelper",void 0===BB&&(BB=new QE,BB.setAttribute("position",new jE([0,0,0,0,1,0],3)),FB=new KL(0,.5,1,5,1),FB.translate(0,-.5,0)),this.position.copy(t),this.line=new dL(BB,new aL({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new vC(FB,new DE({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{kB.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(kB,t)}}setLength(e,t=.2*e,n=.2*t){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class OB extends pL{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new QE;n.setAttribute("position",new jE(t,3)),n.setAttribute("color",new jE([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(n,new aL({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){const r=new tA,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class zB{constructor(){this.type="ShapePath",this.color=new tA,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new YL,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,i,a){return this.currentPath.bezierCurveTo(e,t,n,r,i,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function n(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n],i=new sD;i.curves=r.curves,t.push(i)}return t}function r(e,t){const n=t.length;let r=!1;for(let i=n-1,a=0;a<n;i=a++){let n=t[i],o=t[a],s=o.x-n.x,l=o.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[a],s=-s,o=t[i],l=-l),e.y<n.y||e.y>o.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-s*(e.y-n.y);if(0===t)return!0;if(t<0)continue;r=!r}}else{if(e.y!==n.y)continue;if(o.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=o.x)return!0}}return r}const i=DD.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===t)return n(a);let o,s,l;const c=[];if(1===a.length)return s=a[0],l=new sD,l.curves=s.curves,c.push(l),c;let u=!i(a[0].getPoints());u=e?!u:u;const d=[],h=[];let f,p,m=[],g=0;h[g]=void 0,m[g]=[];for(let t=0,n=a.length;t<n;t++)s=a[t],f=s.getPoints(),o=i(f),o=e?!o:o,o?(!u&&h[g]&&g++,h[g]={s:new sD,p:f},h[g].s.curves=s.curves,u&&g++,m[g]=[]):m[g].push({h:s,p:f[0]});if(!h[0])return n(a);if(h.length>1){let e=!1,t=0;for(let e=0,t=h.length;e<t;e++)d[e]=[];for(let n=0,i=h.length;n<i;n++){const i=m[n];for(let a=0;a<i.length;a++){const o=i[a];let s=!0;for(let i=0;i<h.length;i++)r(o.p,h[i].p)&&(n!==i&&t++,s?(s=!1,d[i].push(o)):e=!0);s&&d[n].push(o)}}t>0&&!1===e&&(m=d)}for(let e=0,t=h.length;e<t;e++){l=h[e].s,c.push(l),p=m[e];for(let e=0,t=p.length;e<t;e++)l.holes.push(p[e].h)}return c}}const UB=HB();function HB(){const e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),r=new Uint32Array(512),i=new Uint32Array(512);for(let e=0;e<256;++e){const t=e-127;t<-27?(r[e]=0,r[256|e]=32768,i[e]=24,i[256|e]=24):t<-14?(r[e]=1024>>-t-14,r[256|e]=1024>>-t-14|32768,i[e]=-t-1,i[256|e]=-t-1):t<=15?(r[e]=t+15<<10,r[256|e]=t+15<<10|32768,i[e]=13,i[256|e]=13):t<128?(r[e]=31744,r[256|e]=64512,i[e]=24,i[256|e]=24):(r[e]=31744,r[256|e]=64512,i[e]=13,i[256|e]=13)}const a=new Uint32Array(2048),o=new Uint32Array(64),s=new Uint32Array(64);for(let e=1;e<1024;++e){let t=e<<13,n=0;for(;0==(8388608&t);)t<<=1,n-=8388608;t&=-8388609,n+=947912704,a[e]=t|n}for(let e=1024;e<2048;++e)a[e]=939524096+(e-1024<<13);for(let e=1;e<31;++e)o[e]=e<<23;o[31]=1199570944,o[32]=2147483648;for(let e=33;e<63;++e)o[e]=2147483648+(e-32<<23);o[63]=3347054592;for(let e=1;e<64;++e)32!==e&&(s[e]=1024);return{floatView:t,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:a,exponentTable:o,offsetTable:s}}var GB=Object.freeze({__proto__:null,toHalfFloat:function(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=DS(e,-65504,65504),UB.floatView[0]=e;const t=UB.uint32View[0],n=t>>23&511;return UB.baseTable[n]+((8388607&t)>>UB.shiftTable[n])},fromHalfFloat:function(e){const t=e>>10;return UB.uint32View[0]=UB.mantissaTable[UB.offsetTable[t]+(1023&e)]+UB.exponentTable[t],UB.floatView[0]}});class VB extends QE{constructor(){console.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js"),super()}}class jB extends QE{constructor(){console.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js"),super()}}function WB(){console.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")}function XB(){console.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")}function qB(){console.error("THREE.ImmediateRenderObject has been removed.")}class YB extends cA{constructor(e,t,n){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(e,t,n),this.samples=4}}class ZB extends uA{constructor(e,t,n,r){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(e,t,n,r)}}class JB extends hA{constructor(e,t,n,r){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(e,t,n,r)}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:p_}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=p_);var $B=i(2576);const KB="undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?t.useEffect:t.useLayoutEffect;function QB(e){const n="function"==typeof e?function(e){let t;const n=new Set,r=(e,r)=>{const i="function"==typeof e?e(t):e;if(i!==t){const e=t;t=r?i:Object.assign({},t,i),n.forEach((n=>n(t,e)))}},i=()=>t,a={setState:r,getState:i,subscribe:(e,r,a)=>r||a?((e,r=i,a=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let o=r(t);function s(){const n=r(t);if(!a(o,n)){const t=o;e(o=n,t)}}return n.add(s),()=>n.delete(s)})(e,r,a):(n.add(e),()=>n.delete(e)),destroy:()=>n.clear()};return t=e(r,i,a),a}(e):e,r=(e=n.getState,r=Object.is)=>{const[,i]=(0,t.useReducer)((e=>e+1),0),a=n.getState(),o=(0,t.useRef)(a),s=(0,t.useRef)(e),l=(0,t.useRef)(r),c=(0,t.useRef)(!1),u=(0,t.useRef)();let d;void 0===u.current&&(u.current=e(a));let h=!1;(o.current!==a||s.current!==e||l.current!==r||c.current)&&(d=e(a),h=!r(u.current,d)),KB((()=>{h&&(u.current=d),o.current=a,s.current=e,l.current=r,c.current=!1}));const f=(0,t.useRef)(a);KB((()=>{const e=()=>{try{const e=n.getState(),t=s.current(e);l.current(u.current,t)||(o.current=e,u.current=t,i())}catch(e){c.current=!0,i()}},t=n.subscribe(e);return n.getState()!==f.current&&e(),t}),[]);const p=h?d:u.current;return(0,t.useDebugValue)(p),p};return Object.assign(r,n),r[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const e=[r,n];return{next(){const t=e.length<=0;return{value:e.shift(),done:t}}}},r}var eF=i(6525),tF=i.n(eF),nF=i(5431);function rF(e,t,n=((e,t)=>e===t)){if(e===t)return!0;if(!e||!t)return!1;const r=e.length;if(t.length!==r)return!1;for(let i=0;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}const iF=[];function aF(e,t,n=!1,r={}){for(const e of iF)if(rF(t,e.keys,e.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(e,"error"))throw e.error;if(Object.prototype.hasOwnProperty.call(e,"response"))return e.response;if(!n)throw e.promise}const i={keys:t,equal:r.equal,promise:e(...t).then((e=>i.response=e)).then((()=>{r.lifespan&&r.lifespan>0&&setTimeout((()=>{const e=iF.indexOf(i);-1!==e&&iF.splice(e,1)}),r.lifespan)})).catch((e=>i.error=e))};if(iF.push(i),!n)throw i.promise}var oF,sF;const lF=e=>e&&e.isOrthographicCamera,cF="undefined"!=typeof window&&(null!=(oF=window.document)&&oF.createElement||"ReactNative"===(null==(sF=window.navigator)?void 0:sF.product))?t.useLayoutEffect:t.useEffect;function uF(e){const n=t.useRef(e);return cF((()=>{n.current=e}),[e]),n}function dF({set:e}){return cF((()=>(e(new Promise((()=>null))),()=>e(!1))),[e]),null}class hF extends t.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}hF.getDerivedStateFromError=()=>({error:!0});const fF="__default";function pF(e){return Array.isArray(e)?Math.min(Math.max(e[0],window.devicePixelRatio),e[1]):e}const mF=e=>{var t;return null==(t=e.__r3f)?void 0:t.root.getState()},gF={obj:e=>e===Object(e)&&!gF.arr(e)&&"function"!=typeof e,fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,boo:e=>"boolean"==typeof e,und:e=>void 0===e,arr:e=>Array.isArray(e),equ(e,t,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof e!=typeof t||!!e!=!!t)return!1;if(gF.str(e)||gF.num(e))return e===t;const a=gF.obj(e);if(a&&"reference"===r)return e===t;const o=gF.arr(e);if(o&&"reference"===n)return e===t;if((o||a)&&e===t)return!0;let s;for(s in e)if(!(s in t))return!1;for(s in i?t:e)if(e[s]!==t[s])return!1;if(gF.und(s)){if(o&&0===e.length&&0===t.length)return!0;if(a&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}};function vF(e,t){const n=e;return(null!=t&&t.primitive||!n.__r3f)&&(n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...t}),e}function yF(e,t){let n=e;if(t.includes("-")){const r=t.split("-"),i=r.pop();return n=r.reduce(((e,t)=>e[t]),e),{target:n,key:i}}return{target:n,key:t}}const bF=/-\d+$/;function xF(e,t,n){if(gF.str(n)){if(bF.test(n)){const t=n.replace(bF,""),{target:r,key:i}=yF(e,t);Array.isArray(r[i])||(r[i]=[])}const{target:r,key:i}=yF(e,n);t.__r3f.previousAttach=r[i],r[i]=t}else t.__r3f.previousAttach=n(e,t)}function _F(e,t,n){var r,i;if(gF.str(n)){const{target:r,key:i}=yF(e,n),a=t.__r3f.previousAttach;void 0===a?delete r[i]:r[i]=a}else null==(r=t.__r3f)||null==r.previousAttach||r.previousAttach(e,t);null==(i=t.__r3f)||delete i.previousAttach}function wF(e,{children:t,key:n,ref:r,...i},{children:a,key:o,ref:s,...l}={},c=!1){var u;const d=null!=(u=null==e?void 0:e.__r3f)?u:{},h=Object.entries(i),f=[];if(c){const e=Object.keys(l);for(let t=0;t<e.length;t++)i.hasOwnProperty(e[t])||h.unshift([e[t],fF+"remove"])}h.forEach((([t,n])=>{var r;if(null!=(r=e.__r3f)&&r.primitive&&"object"===t)return;if(gF.equ(n,l[t]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(t))return f.push([t,n,!0,[]]);let i=[];t.includes("-")&&(i=t.split("-")),f.push([t,n,!1,i])}));const p={...i};return d.memoizedProps&&d.memoizedProps.args&&(p.args=d.memoizedProps.args),d.memoizedProps&&d.memoizedProps.attach&&(p.attach=d.memoizedProps.attach),{memoized:p,changes:f}}function MF(e,t){var n,r;const i=null!=(n=e.__r3f)?n:{},a=i.root,o=null!=(r=null==a||null==a.getState?void 0:a.getState())?r:{},{memoized:s,changes:l}=(c=t)&&c.memoized&&c.changes?t:wF(e,t);var c;const u=i.eventCount;if(e.__r3f&&(e.__r3f.memoizedProps=s),l.forEach((([t,n,r,a])=>{let l=e,c=l[t];if(a.length&&(c=a.reduce(((e,t)=>e[t]),e),!c||!c.set)){const[n,...r]=a.reverse();l=r.reverse().reduce(((e,t)=>e[t]),e),t=n}var u;if(n===fF+"remove")if(c&&c.constructor)n=new c.constructor(...null!=(u=s.args)?u:[]);else if(l.constructor){var d;const e=new l.constructor(...null!=(d=l.__r3f.memoizedProps.args)?d:[]);n=e[c],e.dispose&&e.dispose()}else n=0;if(r)n?i.handlers[t]=n:delete i.handlers[t],i.eventCount=Object.keys(i.handlers).length;else if(c&&c.set&&(c.copy||c instanceof iE)){if(Array.isArray(n))c.fromArray?c.fromArray(n):c.set(...n);else if(c.copy&&n&&n.constructor&&c.constructor.name===n.constructor.name)c.copy(n);else if(void 0!==n){const e=c instanceof tA;!e&&c.setScalar?c.setScalar(n):c instanceof iE&&n instanceof iE?c.mask=n.mask:c.set(n)}}else l[t]=n,!o.linear&&l[t]instanceof sA&&(l[t].encoding=jM);SF(e)})),i.parent&&o.internal&&e.raycast&&u!==i.eventCount){const t=o.internal.interaction.indexOf(e);t>-1&&o.internal.interaction.splice(t,1),i.eventCount&&o.internal.interaction.push(e)}return l.length&&e.parent&&AF(e),e}function SF(e){var t,n;const r=null==(t=e.__r3f)||null==(n=t.root)||null==n.getState?void 0:n.getState();r&&0===r.internal.frames&&r.invalidate()}function AF(e){null==e.onUpdate||e.onUpdate(e)}function EF(e,t){e.manual||(lF(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function CF(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function TF(e,t,n,r){const i=n.get(t);i&&(n.delete(t),0===n.size&&(e.delete(r),i.target.releasePointerCapture(r)))}let RF={},PF=e=>{RF={...RF,...e}};const LF=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],DF=e=>!(null==e||!e.render),IF=t.createContext(null);let kF,BF=new Set,FF=new Set,NF=new Set;const OF=e=>function(e,t){const n={callback:e};return t.add(n),()=>{t.delete(n)}}(e,BF);function zF(e,t){e.forEach((({callback:e})=>e(t)))}let UF,HF;function GF(e,t,n){let r=t.clock.getDelta();for("never"===t.frameloop&&"number"==typeof e&&(r=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),UF=t.internal.subscribers,kF=0;kF<UF.length;kF++)HF=UF[kF],HF.ref.current(HF.store.getState(),r,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}function VF(){const e=t.useContext(IF);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function jF(e=(e=>e),t){return VF()(e,t)}function WF(e,t=0){const n=VF(),r=n.getState().internal.subscribe,i=uF(e);return cF((()=>r(i,t,n)),[t,r,n]),null}function XF(e,t){return function(n,...r){const i=new n;return e&&e(i),Promise.all(r.map((e=>new Promise(((n,r)=>i.load(e,(e=>{e.scene&&Object.assign(e,function(e){const t={nodes:{},materials:{}};return e&&e.traverse((e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material)})),t}(e.scene)),n(e)}),t,(t=>r(new Error(`Could not load ${e}: ${t.message})`)))))))))}}function qF(e,t,n,r){const i=Array.isArray(t)?t:[t],a=((e,t,n)=>aF(e,t,!1,n))(XF(n,r),[e,...i],{equal:gF.equ});return Array.isArray(t)?a:a[0]}qF.preload=function(e,t,n){const r=Array.isArray(t)?t:[t];return((e,t,n)=>{aF(e,t,!0,void 0)})(XF(n),[e,...r])},qF.clear=function(e,t){return(e=>{if(void 0===e||0===e.length)iF.splice(0,iF.length);else{const t=iF.find((t=>rF(e,t.keys,t.equal)));if(t){const e=iF.indexOf(t);-1!==e&&iF.splice(e,1)}}})([e,...Array.isArray(t)?t:[t]])};const YF=new Map,{invalidate:ZF,advance:JF}=function(e){let t,n,r,i=!1;function a(o){if(n=requestAnimationFrame(a),i=!0,t=0,BF.size&&zF(BF,o),e.forEach((e=>{var n;r=e.store.getState(),!r.internal.active||!("always"===r.frameloop||r.internal.frames>0)||null!=(n=r.gl.xr)&&n.isPresenting||(t+=GF(o,r))})),FF.size&&zF(FF,o),0===t)return NF.size&&zF(NF,o),i=!1,cancelAnimationFrame(n)}return{loop:a,invalidate:function t(n,r=1){var o;if(!n)return e.forEach((e=>t(e.store.getState())),r);null!=(o=n.gl.xr)&&o.isPresenting||!n.internal.active||"never"===n.frameloop||(n.internal.frames=Math.min(60,n.internal.frames+r),i||(i=!0,requestAnimationFrame(a)))},advance:function(t,n=!0,r,i){n&&zF(BF,t),r?GF(t,r,i):e.forEach((e=>GF(t,e.store.getState()))),n&&zF(FF,t)}}}(YF),{reconciler:$F,applyProps:KF}=function(e,t){function n(e,{args:t=[],attach:n,...r},i){let a,o=`${e[0].toUpperCase()}${e.slice(1)}`;if(void 0===n&&(o.endsWith("Geometry")?n="geometry":o.endsWith("Material")&&(n="material")),"primitive"===e){if(void 0===r.object)throw new Error("R3F: Primitives without 'object' are invalid!");a=vF(r.object,{type:e,root:i,attach:n,primitive:!0})}else{const r=RF[o];if(!r)throw new Error(`R3F: ${o} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(t))throw new Error("R3F: The args prop must be an array!");a=vF(new r(...t),{type:e,root:i,attach:n,memoizedProps:{args:t}})}return"inject"!==o&&MF(a,r),a}function r(e,t){let n=!1;var r,i;t&&(null!=(r=t.__r3f)&&r.attach?xF(e,t,t.__r3f.attach):t.isObject3D&&e.isObject3D&&(e.add(t),n=!0),n||null==(i=e.__r3f)||i.objects.push(t),t.__r3f||vF(t,{}),t.__r3f.parent=e,AF(t),SF(t))}function i(e,t,n){let r=!1;if(t){var i,a;if(null!=(i=t.__r3f)&&i.attach)xF(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){t.parent=e,t.dispatchEvent({type:"added"});const i=e.children.filter((e=>e!==t)),a=i.indexOf(n);e.children=[...i.slice(0,a),t,...i.slice(a)],r=!0}r||null==(a=e.__r3f)||a.objects.push(t),t.__r3f||vF(t,{}),t.__r3f.parent=e,AF(t),SF(t)}}function a(e,t,n=!1){e&&[...e].forEach((e=>o(t,e,n)))}function o(e,t,n){if(t){var r,i,o;if(t.__r3f&&(t.__r3f.parent=null),null!=(r=e.__r3f)&&r.objects&&(e.__r3f.objects=e.__r3f.objects.filter((e=>e!==t))),null!=(i=t.__r3f)&&i.attach)_F(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){var s;e.remove(t),null!=(s=t.__r3f)&&s.root&&function(e,t){const{internal:n}=e.getState();n.interaction=n.interaction.filter((e=>e!==t)),n.initialHits=n.initialHits.filter((e=>e!==t)),n.hovered.forEach(((e,r)=>{e.eventObject!==t&&e.object!==t||n.hovered.delete(r)})),n.capturedMap.forEach(((e,r)=>{TF(n.capturedMap,t,e,r)}))}(t.__r3f.root,t)}const c=null==(o=t.__r3f)?void 0:o.primitive,u=void 0===n?null!==t.dispose&&!c:n;var l;c||(a(null==(l=t.__r3f)?void 0:l.objects,t,u),a(t.children,t,u)),t.__r3f&&(delete t.__r3f.root,delete t.__r3f.objects,delete t.__r3f.handlers,delete t.__r3f.memoizedProps,c||delete t.__r3f),u&&t.dispose&&"Scene"!==t.type&&(0,nF.unstable_scheduleCallback)(nF.unstable_IdlePriority,(()=>{try{t.dispose()}catch(e){}})),SF(e)}}const s=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters."),l=tF()({createInstance:n,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(e,t)=>{if(!t)return;const n=e.getState().scene;n.__r3f.root=e,r(n,t)},removeChildFromContainer:(e,t)=>{t&&o(e.getState().scene,t)},insertInContainerBefore:(e,t,n)=>{t&&n&&i(e.getState().scene,t,n)},getRootHostContext:()=>null,getChildHostContext:e=>e,finalizeInitialChildren(e){var t;const n=null!=(t=null==e?void 0:e.__r3f)?t:{};return Boolean(n.handlers)},prepareUpdate(e,t,n,r){if(e.__r3f.primitive&&r.object&&r.object!==e)return[!0];{const{args:t=[],children:i,...a}=r,{args:o=[],children:s,...l}=n;if(!Array.isArray(t))throw new Error("R3F: the args prop must be an array!");if(t.some(((e,t)=>e!==o[t])))return[!0];const c=wF(e,a,l,!0);return c.changes.length?[!1,c]:null}},commitUpdate(e,[t,i],a,s,l,c){t?function(e,t,i,a){var s;const l=null==(s=e.__r3f)?void 0:s.parent;if(!l)return;const c=n(t,i,e.__r3f.root);"primitive"!==t&&e.children&&(e.children.forEach((e=>r(c,e))),e.children=[]),e.__r3f.objects.forEach((e=>r(c,e))),e.__r3f.objects=[],o(l,e),r(l,c),c.raycast&&c.__r3f.eventCount&&c.__r3f.root.getState().internal.interaction.push(c),[a,a.alternate].forEach((e=>{null!==e&&(e.stateNode=c,e.ref&&("function"==typeof e.ref?e.ref(c):e.ref.current=c))}))}(e,a,l,c):MF(e,i)},commitMount(e,t,n,r){var i;const a=null!=(i=e.__r3f)?i:{};e.raycast&&a.handlers&&a.eventCount&&e.__r3f.root.getState().internal.interaction.push(e)},getPublicInstance:e=>e,prepareForCommit:()=>null,preparePortalMount:e=>vF(e.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(e){var t;const{attach:n,parent:r}=null!=(t=null==e?void 0:e.__r3f)?t:{};n&&r&&_F(r,e,n),e.isObject3D&&(e.visible=!1),SF(e)},unhideInstance(e,t){var n;const{attach:r,parent:i}=null!=(n=null==e?void 0:e.__r3f)?n:{};r&&i&&xF(i,e,r),(e.isObject3D&&null==t.visible||t.visible)&&(e.visible=!0),SF(e)},createTextInstance:s,hideTextInstance:s,unhideTextInstance:s,getCurrentEventPriority:()=>t?t():$B.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:"undefined"!=typeof performance&&gF.fun(performance.now)?performance.now:gF.fun(Date.now)?Date.now:()=>0,scheduleTimeout:gF.fun(setTimeout)?setTimeout:void 0,cancelTimeout:gF.fun(clearTimeout)?clearTimeout:void 0});return{reconciler:l,applyProps:MF}}(0,(function(){var e,t;switch(null==(e=window)||null==(t=e.event)?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return $B.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return $B.ContinuousEventPriority;default:return $B.DefaultEventPriority}})),QF={objects:"shallow",strict:!1},eN=(e,t)=>{const n="function"==typeof e?e(t):e;return DF(n)?n:new mP({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0,...e})};function tN(n){const r=YF.get(n),i=null==r?void 0:r.fiber,a=null==r?void 0:r.store;r&&console.warn("R3F.createRoot should only be called once!");const o="function"==typeof reportError?reportError:console.error,s=a||((e,n)=>{const r=QB(((r,i)=>{const a=new gA,o=new gA,s=new gA;function l(e=i().camera,t=o,n=i().size){const{width:r,height:l,top:c,left:u}=n,d=r/l;t instanceof gA?s.copy(t):s.set(...t);const h=e.getWorldPosition(a).distanceTo(s);if(lF(e))return{width:r/e.zoom,height:l/e.zoom,top:c,left:u,factor:1,distance:h,aspect:d};{const t=e.fov*Math.PI/180,n=2*Math.tan(t/2)*h,i=n*(r/l);return{width:i,height:n,top:c,left:u,factor:r/i,distance:h,aspect:d}}}let c;const u=e=>r((t=>({performance:{...t.performance,current:e}}))),d=new zS,h={set:r,get:i,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,invalidate:(t=1)=>e(i(),t),advance:(e,t)=>n(e,t,i()),legacy:!1,linear:!1,flat:!1,scene:vF(new bP),controls:null,clock:new wk,pointer:d,mouse:d,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const e=i();c&&clearTimeout(c),e.performance.current!==e.performance.min&&u(e.performance.min),c=setTimeout((()=>u(i().performance.max)),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:l},setEvents:e=>r((t=>({...t,events:{...t.events,...e}}))),setSize:(e,t,n,a,s)=>{const c=i().camera,u={width:e,height:t,top:a||0,left:s||0,updateStyle:n};r((e=>({size:u,viewport:{...e.viewport,...l(c,o,u)}})))},setDpr:e=>r((t=>{const n=pF(e);return{viewport:{...t.viewport,dpr:n,initialDpr:t.viewport.initialDpr||n}}})),setFrameloop:(e="always")=>{const t=i().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),r((()=>({frameloop:e})))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:t.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(e,t,n)=>{const r=i().internal;return r.priority=r.priority+(t>0?1:0),r.subscribers.push({ref:e,priority:t,store:n}),r.subscribers=r.subscribers.sort(((e,t)=>e.priority-t.priority)),()=>{const n=i().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(t>0?1:0),n.subscribers=n.subscribers.filter((t=>t.ref!==e)))}}}};return h})),i=r.getState();let a=i.size,o=i.viewport.dpr,s=i.camera;return r.subscribe((()=>{const{camera:e,size:t,viewport:n,gl:i,set:l}=r.getState();t===a&&n.dpr===o||(a=t,o=n.dpr,EF(e,t),i.setPixelRatio(n.dpr),i.setSize(t.width,t.height,t.updateStyle)),e!==s&&(s=e,l((t=>({viewport:{...t.viewport,...t.viewport.getCurrentViewport(e)}}))))})),r.subscribe((t=>e(t))),r})(ZF,JF),l=i||$F.createContainer(s,$B.ConcurrentRoot,null,!1,null,"",o,null);let c;r||YF.set(n,{fiber:l,store:s});let u=!1;return{configure(t={}){let{gl:r,size:i,events:a,onCreated:o,shadows:l=!1,linear:d=!1,flat:h=!1,legacy:f=!1,orthographic:p=!1,frameloop:m="always",dpr:g=[1,2],performance:v,raycaster:y,camera:b,onPointerMissed:x}=t,_=s.getState(),w=_.gl;_.gl||_.set({gl:w=eN(r,n)});let M=_.raycaster;M||_.set({raycaster:M=new Kk});const{params:S,...A}=y||{};if(gF.equ(A,M,QF)||KF(M,{...A}),gF.equ(S,M.params,QF)||KF(M,{params:{...M.params,...S}}),!_.camera){const e=b instanceof SC,t=e?b:p?new ZC(0,0,0,0,.1,1e3):new AC(75,0,.1,1e3);e||(t.position.z=5,b&&KF(t,b),null!=b&&b.rotation||t.lookAt(0,0,0)),_.set({camera:t})}if(!_.xr){const e=(e,t)=>{const n=s.getState();"never"!==n.frameloop&&JF(e,!0,n,t)},t=()=>{const t=s.getState();t.gl.xr.enabled=t.gl.xr.isPresenting,t.gl.xr.setAnimationLoop(t.gl.xr.isPresenting?e:null),t.gl.xr.isPresenting||ZF(t)},n={connect(){const e=s.getState().gl;e.xr.addEventListener("sessionstart",t),e.xr.addEventListener("sessionend",t)},disconnect(){const e=s.getState().gl;e.xr.removeEventListener("sessionstart",t),e.xr.removeEventListener("sessionend",t)}};w.xr&&n.connect(),_.set({xr:n})}if(w.shadowMap){const e=gF.boo(l);if(e&&w.shadowMap.enabled!==l||!gF.equ(l,w.shadowMap,QF)){const t=w.shadowMap.enabled;w.shadowMap.enabled=!!l,e?w.shadowMap.type=M_:Object.assign(w.shadowMap,l),t!==w.shadowMap.enabled&&(w.shadowMap.needsUpdate=!0)}}!function(e,t,n){const r=n.pop(),i=n.reduce(((e,t)=>e[t]),e);i[r]=t}(e,f,["ColorManagement","legacyMode"]);const E=d?VM:jM,C=h?cw:fw;w.outputEncoding!==E&&(w.outputEncoding=E),w.toneMapping!==C&&(w.toneMapping=C),_.legacy!==f&&_.set((()=>({legacy:f}))),_.linear!==d&&_.set((()=>({linear:d}))),_.flat!==h&&_.set((()=>({flat:h}))),!r||gF.fun(r)||DF(r)||gF.equ(r,w,QF)||KF(w,r),a&&!_.events.handlers&&_.set({events:a(s)}),g&&_.viewport.dpr!==pF(g)&&_.setDpr(g);const T=function(e,t){if(t)return t;if(e instanceof HTMLCanvasElement&&e.parentElement){const{width:t,height:n,top:r,left:i}=e.parentElement.getBoundingClientRect();return{width:t,height:n,top:r,left:i}}return{width:0,height:0,top:0,left:0}}(n,i);return gF.equ(T,_.size,QF)||_.setSize(T.width,T.height,T.updateStyle,T.top,T.left),_.frameloop!==m&&_.setFrameloop(m),_.onPointerMissed||_.set({onPointerMissed:x}),v&&!gF.equ(v,_.performance,QF)&&_.set((e=>({performance:{...e.performance,...v}}))),c=o,u=!0,this},render(e){return u||this.configure(),$F.updateContainer(t.createElement(nN,{store:s,children:e,onCreated:c,rootElement:n}),l,null,(()=>{})),s},unmount(){rN(n)}}}function nN({store:e,children:n,onCreated:r,rootElement:i}){return cF((()=>{const t=e.getState();t.set((e=>({internal:{...e.internal,active:!0}}))),r&&r(t),e.getState().events.connected||null==t.events.connect||t.events.connect(i)}),[]),t.createElement(IF.Provider,{value:e},n)}function rN(e,t){const n=YF.get(e),r=null==n?void 0:n.fiber;if(r){const i=null==n?void 0:n.store.getState();i&&(i.internal.active=!1),$F.updateContainer(null,r,null,(()=>{i&&setTimeout((()=>{try{var n,r,a,o;null==i.events.disconnect||i.events.disconnect(),null==(n=i.gl)||null==(r=n.renderLists)||null==r.dispose||r.dispose(),null==(a=i.gl)||null==a.forceContextLoss||a.forceContextLoss(),null!=(o=i.gl)&&o.xr&&i.xr.disconnect(),function(e){e.dispose&&"Scene"!==e.type&&e.dispose();for(const t in e)null==t.dispose||t.dispose(),delete e[t]}(i),YF.delete(e),t&&t(e)}catch(e){}}),500)}))}}function iN({state:e={},children:n,container:r}){const{events:i,size:a,...o}=e,s=VF(),[l]=t.useState((()=>new Kk)),[c]=t.useState((()=>new zS)),u=t.useCallback(((e,t)=>{const n={...e};let u;if(Object.keys(e).forEach((r=>{(LF.includes(r)||e[r]!==t[r])&&delete n[r]})),t&&a){const n=t.camera;u=e.viewport.getCurrentViewport(n,new gA,a),n!==e.camera&&EF(n,a)}return{...n,scene:r,raycaster:l,pointer:c,mouse:c,previousRoot:s,events:{...e.events,...null==t?void 0:t.events,...i},size:{...e.size,...a},viewport:{...e.viewport,...u},...o}}),[e]),[d]=t.useState((()=>{const e=s.getState(),t=QB(((t,n)=>({...e,scene:r,raycaster:l,pointer:c,mouse:c,previousRoot:s,events:{...e.events,...i},size:{...e.size,...a},...o,set:t,get:n,setEvents:e=>t((t=>({...t,events:{...t.events,...e}})))})));return t}));return t.useEffect((()=>{const e=s.subscribe((e=>d.setState((t=>u(e,t)))));return()=>{e(),d.destroy()}}),[]),t.useEffect((()=>{d.setState((e=>u(s.getState(),e)))}),[u]),t.createElement(t.Fragment,null,$F.createPortal(t.createElement(IF.Provider,{value:d},n),d,null))}$F.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:t.version}),t.unstable_act;var aN=i(2127),oN=(i(6111),Math.sqrt(50)),sN=Math.sqrt(10),lN=Math.sqrt(2);function cN(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=oN?10:a>=sN?5:a>=lN?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=oN?10:a>=sN?5:a>=lN?2:1)}function uN(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=oN?i*=10:a>=sN?i*=5:a>=lN&&(i*=2),t<e?-i:i}function dN(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function hN(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function fN(e){let t,n,r;function i(e,r,i=0,a=e.length){if(i<a){if(0!==t(r,r))return a;do{const t=i+a>>>1;n(e[t],r)<0?i=t+1:a=t}while(i<a)}return i}return 2!==e.length?(t=dN,n=(t,n)=>dN(e(t),n),r=(t,n)=>e(t)-n):(t=e===dN||e===hN?e:pN,n=e,r=e),{left:i,center:function(e,t,n=0,a=e.length){const o=i(e,t,n,a-1);return o>n&&r(e[o-1],t)>-r(e[o],t)?o-1:o},right:function(e,r,i=0,a=e.length){if(i<a){if(0!==t(r,r))return a;do{const t=i+a>>>1;n(e[t],r)<=0?i=t+1:a=t}while(i<a)}return i}}}function pN(){return 0}const mN=fN(dN),gN=mN.right,vN=(mN.left,fN((function(e){return null===e?NaN:+e})).center,gN);function yN(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function bN(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function xN(){}var _N=.7,wN=1/_N,MN="\\s*([+-]?\\d+)\\s*",SN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",AN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",EN=/^#([0-9a-f]{3,8})$/,CN=new RegExp(`^rgb\\(${MN},${MN},${MN}\\)$`),TN=new RegExp(`^rgb\\(${AN},${AN},${AN}\\)$`),RN=new RegExp(`^rgba\\(${MN},${MN},${MN},${SN}\\)$`),PN=new RegExp(`^rgba\\(${AN},${AN},${AN},${SN}\\)$`),LN=new RegExp(`^hsl\\(${SN},${AN},${AN}\\)$`),DN=new RegExp(`^hsla\\(${SN},${AN},${AN},${SN}\\)$`),IN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function kN(){return this.rgb().formatHex()}function BN(){return this.rgb().formatRgb()}function FN(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=EN.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?NN(t):3===n?new HN(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?ON(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?ON(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=CN.exec(e))?new HN(t[1],t[2],t[3],1):(t=TN.exec(e))?new HN(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=RN.exec(e))?ON(t[1],t[2],t[3],t[4]):(t=PN.exec(e))?ON(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=LN.exec(e))?qN(t[1],t[2]/100,t[3]/100,1):(t=DN.exec(e))?qN(t[1],t[2]/100,t[3]/100,t[4]):IN.hasOwnProperty(e)?NN(IN[e]):"transparent"===e?new HN(NaN,NaN,NaN,0):null}function NN(e){return new HN(e>>16&255,e>>8&255,255&e,1)}function ON(e,t,n,r){return r<=0&&(e=t=n=NaN),new HN(e,t,n,r)}function zN(e){return e instanceof xN||(e=FN(e)),e?new HN((e=e.rgb()).r,e.g,e.b,e.opacity):new HN}function UN(e,t,n,r){return 1===arguments.length?zN(e):new HN(e,t,n,null==r?1:r)}function HN(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function GN(){return`#${XN(this.r)}${XN(this.g)}${XN(this.b)}`}function VN(){const e=jN(this.opacity);return`${1===e?"rgb(":"rgba("}${WN(this.r)}, ${WN(this.g)}, ${WN(this.b)}${1===e?")":`, ${e})`}`}function jN(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function WN(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function XN(e){return((e=WN(e))<16?"0":"")+e.toString(16)}function qN(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ZN(e,t,n,r)}function YN(e){if(e instanceof ZN)return new ZN(e.h,e.s,e.l,e.opacity);if(e instanceof xN||(e=FN(e)),!e)return new ZN;if(e instanceof ZN)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(o=t===a?(n-r)/s+6*(n<r):n===a?(r-t)/s+2:(t-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new ZN(o,s,l,e.opacity)}function ZN(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function JN(e){return(e=(e||0)%360)<0?e+360:e}function $N(e){return Math.max(0,Math.min(1,e||0))}function KN(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function QN(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}yN(xN,FN,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:kN,formatHex:kN,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return YN(this).formatHsl()},formatRgb:BN,toString:BN}),yN(HN,UN,bN(xN,{brighter(e){return e=null==e?wN:Math.pow(wN,e),new HN(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?_N:Math.pow(_N,e),new HN(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new HN(WN(this.r),WN(this.g),WN(this.b),jN(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:GN,formatHex:GN,formatHex8:function(){return`#${XN(this.r)}${XN(this.g)}${XN(this.b)}${XN(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:VN,toString:VN})),yN(ZN,(function(e,t,n,r){return 1===arguments.length?YN(e):new ZN(e,t,n,null==r?1:r)}),bN(xN,{brighter(e){return e=null==e?wN:Math.pow(wN,e),new ZN(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?_N:Math.pow(_N,e),new ZN(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new HN(KN(e>=240?e-240:e+120,i,r),KN(e,i,r),KN(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ZN(JN(this.h),$N(this.s),$N(this.l),jN(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=jN(this.opacity);return`${1===e?"hsl(":"hsla("}${JN(this.h)}, ${100*$N(this.s)}%, ${100*$N(this.l)}%${1===e?")":`, ${e})`}`}}));const eO=e=>()=>e;function tO(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):eO(isNaN(e)?t:e)}const nO=function e(t){var n=function(e){return 1==(e=+e)?tO:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):eO(isNaN(t)?n:t)}}(t);function r(e,t){var r=n((e=UN(e)).r,(t=UN(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),o=tO(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function rO(e){return function(t){var n,r,i=t.length,a=new Array(i),o=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=UN(t[n]),a[n]=r.r||0,o[n]=r.g||0,s[n]=r.b||0;return a=e(a),o=e(o),s=e(s),r.opacity=1,function(e){return r.r=a(e),r.g=o(e),r.b=s(e),r+""}}}function iO(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=hO(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<i;++n)o[n]=a[n](e);return o}}function aO(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function oO(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function sO(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=hO(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}rO((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],o=r>0?e[r-1]:2*i-a,s=r<t-1?e[r+2]:2*a-i;return QN((n-r/t)*t,o,i,a,s)}})),rO((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],a=e[r%t],o=e[(r+1)%t],s=e[(r+2)%t];return QN((n-r/t)*t,i,a,o,s)}}));var lO=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,cO=new RegExp(lO.source,"g");function uO(e,t){var n,r,i,a=lO.lastIndex=cO.lastIndex=0,o=-1,s=[],l=[];for(e+="",t+="";(n=lO.exec(e))&&(r=cO.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:oO(n,r)})),a=cO.lastIndex;return a<t.length&&(i=t.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function dO(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(a){for(n=0;n<r;++n)i[n]=e[n]*(1-a)+t[n]*a;return i}}function hO(e,t){var n,r,i=typeof t;return null==t||"boolean"===i?eO(t):("number"===i?oO:"string"===i?(n=FN(t))?(t=n,nO):uO:t instanceof FN?nO:t instanceof Date?aO:(r=t,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(t)?iO:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?sO:oO:dO))(e,t)}function fO(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function pO(e){return+e}var mO=[0,1];function gO(e){return e}function vO(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function yO(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=vO(i,r),a=n(o,a)):(r=vO(r,i),a=n(a,o)),function(e){return a(r(e))}}function bO(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=vO(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(t){var n=vN(e,t,1,r)-1;return a[n](i[n](t))}}function xO(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function _O(){return function(){var e,t,n,r,i,a,o=mO,s=mO,l=hO,c=gO;function u(){var e=Math.min(o.length,s.length);return c!==gO&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(o[0],o[e-1])),r=e>2?bO:yO,i=a=null,d}function d(t){return null==t||isNaN(t=+t)?n:(i||(i=r(o.map(e),s,l)))(e(c(t)))}return d.invert=function(n){return c(t((a||(a=r(s,o.map(e),oO)))(n)))},d.domain=function(e){return arguments.length?(o=Array.from(e,pO),u()):o.slice()},d.range=function(e){return arguments.length?(s=Array.from(e),u()):s.slice()},d.rangeRound=function(e){return s=Array.from(e),l=fO,u()},d.clamp=function(e){return arguments.length?(c=!!e||gO,u()):c!==gO},d.interpolate=function(e){return arguments.length?(l=e,u()):l},d.unknown=function(e){return arguments.length?(n=e,d):n},function(n,r){return e=n,t=r,u()}}()(gO,gO)}function wO(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}var MO,SO=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function AO(e){if(!(t=SO.exec(e)))throw new Error("invalid format: "+e);var t;return new EO({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function EO(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function CO(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function TO(e){return(e=CO(Math.abs(e)))?e[1]:NaN}function RO(e,t){var n=CO(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}AO.prototype=EO.prototype,EO.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const PO={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>RO(100*e,t),r:RO,s:function(e,t){var n=CO(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(MO=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+CO(e,Math.max(0,t+a-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function LO(e){return e}var DO,IO,kO,BO=Array.prototype.map,FO=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function NO(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){var r,i,a,o,s=-1;if(n=+n,(e=+e)==(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(o=cN(e,t,n))||!isFinite(o))return[];if(o>0){let n=Math.round(e/o),r=Math.round(t/o);for(n*o<e&&++n,r*o>t&&--r,a=new Array(i=r-n+1);++s<i;)a[s]=(n+s)*o}else{o=-o;let n=Math.round(e*o),r=Math.round(t*o);for(n/o<e&&++n,r/o>t&&--r,a=new Array(i=r-n+1);++s<i;)a[s]=(n+s)/o}return r&&a.reverse(),a}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return function(e,t,n,r){var i,a=uN(e,t,n);switch((r=AO(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(TO(t)/3)))-TO(Math.abs(e)))}(a,o))||(r.precision=i),kO(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,TO(t)-TO(e))+1}(a,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-TO(Math.abs(e)))}(a))||(r.precision=i-2*("%"===r.type))}return IO(r)}(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,a=t(),o=0,s=a.length-1,l=a[o],c=a[s],u=10;for(c<l&&(i=l,l=c,c=i,i=o,o=s,s=i);u-- >0;){if((i=cN(l,c,n))===r)return a[o]=l,a[s]=c,t(a);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}r=i}return e},e}function OO(){var e=_O();return e.copy=function(){return xO(e,OO())},wO.apply(e,arguments),NO(e)}DO=function(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?LO:(t=BO.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,a=[],o=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(e.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",a=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?LO:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(BO.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"−":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=AO(e)).fill,n=e.align,d=e.sign,h=e.symbol,f=e.zero,p=e.width,m=e.comma,g=e.precision,v=e.trim,y=e.type;"n"===y?(m=!0,y="g"):PO[y]||(void 0===g&&(g=12),v=!0,y="g"),(f||"0"===t&&"="===n)&&(f=!0,t="0",n="=");var b="$"===h?i:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===h?a:/[%p]/.test(y)?l:"",_=PO[y],w=/[defgprs%]/.test(y);function M(e){var i,a,l,h=b,M=x;if("c"===y)M=_(e)+M,e="";else{var S=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:_(Math.abs(e),g),v&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),S&&0==+e&&"+"!==d&&(S=!1),h=(S?"("===d?d:c:"-"===d||"("===d?"":d)+h,M=("s"===y?FO[8+MO/3]:"")+M+(S&&"("===d?")":""),w)for(i=-1,a=e.length;++i<a;)if(48>(l=e.charCodeAt(i))||l>57){M=(46===l?o+e.slice(i+1):e.slice(i))+M,e=e.slice(0,i);break}}m&&!f&&(e=r(e,1/0));var A=h.length+e.length+M.length,E=A<p?new Array(p-A+1).join(t):"";switch(m&&f&&(e=r(E+e,E.length?p-M.length:1/0),E=""),n){case"<":e=h+e+M+E;break;case"=":e=h+E+e+M;break;case"^":e=E.slice(0,A=E.length>>1)+h+e+M+E.slice(A);break;default:e=E+h+e+M}return s(e)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),M.toString=function(){return e+""},M}return{format:d,formatPrefix:function(e,t){var n=d(((e=AO(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(TO(t)/3))),i=Math.pow(10,-r),a=FO[8+r/3];return function(e){return n(i*e)+a}}}}({thousands:",",grouping:[3],currency:["$",""]}),IO=DO.format,kO=DO.formatPrefix;var zO=i(8419);const UO=Symbol("implicit");function HO(){var e=new zO.L,t=[],n=[],r=UO;function i(i){let a=e.get(i);if(void 0===a){if(r!==UO)return r;e.set(i,a=t.push(i)-1)}return n[a%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new zO.L;for(const r of n)e.has(r)||e.set(r,t.push(r)-1);return i},i.range=function(e){return arguments.length?(n=Array.from(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return HO(t,n).unknown(r)},wO.apply(i,arguments),i}const GO=1e3,VO=6e4,jO=36e5,WO=864e5,XO=6048e5,qO=31536e6;var YO=new Date,ZO=new Date;function JO(e,t,n,r){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=function(t){return e(t=new Date(+t)),t},i.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},i.round=function(e){var t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},i.range=function(n,r,a){var o,s=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return s;do{s.push(o=new Date(+n)),t(n,a),e(n)}while(o<n&&n<r);return s},i.filter=function(n){return JO((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(i.count=function(t,r){return YO.setTime(+t),ZO.setTime(+r),e(YO),e(ZO),Math.floor(n(YO,ZO))},i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?function(t){return r(t)%e==0}:function(t){return i.count(0,t)%e==0}):i:null}),i}var $O=JO((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));$O.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?JO((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):$O:null};const KO=$O;$O.range;var QO=JO((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*GO)}),(function(e,t){return(t-e)/GO}),(function(e){return e.getUTCSeconds()}));const ez=QO;QO.range;var tz=JO((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*GO)}),(function(e,t){e.setTime(+e+t*VO)}),(function(e,t){return(t-e)/VO}),(function(e){return e.getMinutes()}));const nz=tz;tz.range;var rz=JO((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*GO-e.getMinutes()*VO)}),(function(e,t){e.setTime(+e+t*jO)}),(function(e,t){return(t-e)/jO}),(function(e){return e.getHours()}));const iz=rz;rz.range;var az=JO((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*VO)/WO),(e=>e.getDate()-1));const oz=az;function sz(e){return JO((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*VO)/XO}))}az.range;var lz=sz(0),cz=sz(1),uz=sz(2),dz=sz(3),hz=sz(4),fz=sz(5),pz=sz(6),mz=(lz.range,cz.range,uz.range,dz.range,hz.range,fz.range,pz.range,JO((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()})));const gz=mz;mz.range;var vz=JO((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));vz.every=function(e){return isFinite(e=Math.floor(e))&&e>0?JO((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};const yz=vz;vz.range;var bz=JO((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*VO)}),(function(e,t){return(t-e)/VO}),(function(e){return e.getUTCMinutes()}));const xz=bz;bz.range;var _z=JO((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*jO)}),(function(e,t){return(t-e)/jO}),(function(e){return e.getUTCHours()}));const wz=_z;_z.range;var Mz=JO((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/WO}),(function(e){return e.getUTCDate()-1}));const Sz=Mz;function Az(e){return JO((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/XO}))}Mz.range;var Ez=Az(0),Cz=Az(1),Tz=Az(2),Rz=Az(3),Pz=Az(4),Lz=Az(5),Dz=Az(6),Iz=(Ez.range,Cz.range,Tz.range,Rz.range,Pz.range,Lz.range,Dz.range,JO((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()})));const kz=Iz;Iz.range;var Bz=JO((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));Bz.every=function(e){return isFinite(e=Math.floor(e))&&e>0?JO((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};const Fz=Bz;function Nz(e,t,n,r,i,a){const o=[[ez,1,GO],[ez,5,5e3],[ez,15,15e3],[ez,30,3e4],[a,1,VO],[a,5,3e5],[a,15,9e5],[a,30,18e5],[i,1,jO],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,WO],[r,2,1728e5],[n,1,XO],[t,1,2592e6],[t,3,7776e6],[e,1,qO]];function s(t,n,r){const i=Math.abs(n-t)/r,a=fN((([,,e])=>e)).right(o,i);if(a===o.length)return e.every(uN(t/qO,n/qO,r));if(0===a)return KO.every(Math.max(uN(t,n,r),1));const[s,l]=o[i/o[a-1][2]<o[a][2]/i?a-1:a];return s.every(l)}return[function(e,t,n){const r=t<e;r&&([e,t]=[t,e]);const i=n&&"function"==typeof n.range?n:s(e,t,n),a=i?i.range(e,+t+1):[];return r?a.reverse():a},s]}Bz.range;const[Oz,zz]=Nz(Fz,kz,Ez,Sz,wz,xz),[Uz,Hz]=Nz(yz,gz,lz,oz,iz,nz);function Gz(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Vz(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function jz(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var Wz,Xz,qz={"-":"",_:" ",0:"0"},Yz=/^\s*\d+/,Zz=/^%/,Jz=/[\\^$*+?|[\]().{}]/g;function $z(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function Kz(e){return e.replace(Jz,"\\$&")}function Qz(e){return new RegExp("^(?:"+e.map(Kz).join("|")+")","i")}function eU(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function tU(e,t,n){var r=Yz.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function nU(e,t,n){var r=Yz.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function rU(e,t,n){var r=Yz.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function iU(e,t,n){var r=Yz.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function aU(e,t,n){var r=Yz.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function oU(e,t,n){var r=Yz.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function sU(e,t,n){var r=Yz.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function lU(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function cU(e,t,n){var r=Yz.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function uU(e,t,n){var r=Yz.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function dU(e,t,n){var r=Yz.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function hU(e,t,n){var r=Yz.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function fU(e,t,n){var r=Yz.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function pU(e,t,n){var r=Yz.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function mU(e,t,n){var r=Yz.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function gU(e,t,n){var r=Yz.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function vU(e,t,n){var r=Yz.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function yU(e,t,n){var r=Zz.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function bU(e,t,n){var r=Yz.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function xU(e,t,n){var r=Yz.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function _U(e,t){return $z(e.getDate(),t,2)}function wU(e,t){return $z(e.getHours(),t,2)}function MU(e,t){return $z(e.getHours()%12||12,t,2)}function SU(e,t){return $z(1+oz.count(yz(e),e),t,3)}function AU(e,t){return $z(e.getMilliseconds(),t,3)}function EU(e,t){return AU(e,t)+"000"}function CU(e,t){return $z(e.getMonth()+1,t,2)}function TU(e,t){return $z(e.getMinutes(),t,2)}function RU(e,t){return $z(e.getSeconds(),t,2)}function PU(e){var t=e.getDay();return 0===t?7:t}function LU(e,t){return $z(lz.count(yz(e)-1,e),t,2)}function DU(e){var t=e.getDay();return t>=4||0===t?hz(e):hz.ceil(e)}function IU(e,t){return e=DU(e),$z(hz.count(yz(e),e)+(4===yz(e).getDay()),t,2)}function kU(e){return e.getDay()}function BU(e,t){return $z(cz.count(yz(e)-1,e),t,2)}function FU(e,t){return $z(e.getFullYear()%100,t,2)}function NU(e,t){return $z((e=DU(e)).getFullYear()%100,t,2)}function OU(e,t){return $z(e.getFullYear()%1e4,t,4)}function zU(e,t){var n=e.getDay();return $z((e=n>=4||0===n?hz(e):hz.ceil(e)).getFullYear()%1e4,t,4)}function UU(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+$z(t/60|0,"0",2)+$z(t%60,"0",2)}function HU(e,t){return $z(e.getUTCDate(),t,2)}function GU(e,t){return $z(e.getUTCHours(),t,2)}function VU(e,t){return $z(e.getUTCHours()%12||12,t,2)}function jU(e,t){return $z(1+Sz.count(Fz(e),e),t,3)}function WU(e,t){return $z(e.getUTCMilliseconds(),t,3)}function XU(e,t){return WU(e,t)+"000"}function qU(e,t){return $z(e.getUTCMonth()+1,t,2)}function YU(e,t){return $z(e.getUTCMinutes(),t,2)}function ZU(e,t){return $z(e.getUTCSeconds(),t,2)}function JU(e){var t=e.getUTCDay();return 0===t?7:t}function $U(e,t){return $z(Ez.count(Fz(e)-1,e),t,2)}function KU(e){var t=e.getUTCDay();return t>=4||0===t?Pz(e):Pz.ceil(e)}function QU(e,t){return e=KU(e),$z(Pz.count(Fz(e),e)+(4===Fz(e).getUTCDay()),t,2)}function eH(e){return e.getUTCDay()}function tH(e,t){return $z(Cz.count(Fz(e)-1,e),t,2)}function nH(e,t){return $z(e.getUTCFullYear()%100,t,2)}function rH(e,t){return $z((e=KU(e)).getUTCFullYear()%100,t,2)}function iH(e,t){return $z(e.getUTCFullYear()%1e4,t,4)}function aH(e,t){var n=e.getUTCDay();return $z((e=n>=4||0===n?Pz(e):Pz.ceil(e)).getUTCFullYear()%1e4,t,4)}function oH(){return"+0000"}function sH(){return"%"}function lH(e){return+e}function cH(e){return Math.floor(+e/1e3)}function uH(e){return new Date(e)}function dH(e){return e instanceof Date?+e:+new Date(+e)}function hH(e,t,n,r,i,a,o,s,l,c){var u=_O(),d=u.invert,h=u.domain,f=c(".%L"),p=c(":%S"),m=c("%I:%M"),g=c("%I %p"),v=c("%a %d"),y=c("%b %d"),b=c("%B"),x=c("%Y");function _(e){return(l(e)<e?f:s(e)<e?p:o(e)<e?m:a(e)<e?g:r(e)<e?i(e)<e?v:y:n(e)<e?b:x)(e)}return u.invert=function(e){return new Date(d(e))},u.domain=function(e){return arguments.length?h(Array.from(e,dH)):h().map(uH)},u.ticks=function(t){var n=h();return e(n[0],n[n.length-1],null==t?10:t)},u.tickFormat=function(e,t){return null==t?_:c(t)},u.nice=function(e){var n=h();return e&&"function"==typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?h(function(e,t){var n,r=0,i=(e=e.slice()).length-1,a=e[r],o=e[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),e[r]=t.floor(a),e[i]=t.ceil(o),e}(n,e)):u},u.copy=function(){return xO(u,hH(e,t,n,r,i,a,o,s,l,c))},u}Wz=function(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,s=e.months,l=e.shortMonths,c=Qz(i),u=eU(i),d=Qz(a),h=eU(a),f=Qz(o),p=eU(o),m=Qz(s),g=eU(s),v=Qz(l),y=eU(l),b={a:function(e){return o[e.getDay()]},A:function(e){return a[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:_U,e:_U,f:EU,g:NU,G:zU,H:wU,I:MU,j:SU,L:AU,m:CU,M:TU,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:lH,s:cH,S:RU,u:PU,U:LU,V:IU,w:kU,W:BU,x:null,X:null,y:FU,Y:OU,Z:UU,"%":sH},x={a:function(e){return o[e.getUTCDay()]},A:function(e){return a[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:HU,e:HU,f:XU,g:rH,G:aH,H:GU,I:VU,j:jU,L:WU,m:qU,M:YU,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:lH,s:cH,S:ZU,u:JU,U:$U,V:QU,w:eH,W:tH,x:null,X:null,y:nH,Y:iH,Z:oH,"%":sH},_={a:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=v.exec(t.slice(n));return r?(e.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return S(e,t,n,r)},d:dU,e:dU,f:vU,g:sU,G:oU,H:fU,I:fU,j:hU,L:gU,m:uU,M:pU,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=u.get(r[0].toLowerCase()),n+r[0].length):-1},q:cU,Q:bU,s:xU,S:mU,u:nU,U:rU,V:iU,w:tU,W:aU,x:function(e,t,r){return S(e,n,t,r)},X:function(e,t,n){return S(e,r,t,n)},y:sU,Y:oU,Z:lU,"%":yU};function w(e,t){return function(n){var r,i,a,o=[],s=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===e.charCodeAt(s)&&(o.push(e.slice(l,s)),null!=(i=qz[r=e.charAt(++s)])?r=e.charAt(++s):i="e"===r?" ":"0",(a=t[r])&&(r=a(n,i)),o.push(r),l=s+1);return o.push(e.slice(l,s)),o.join("")}}function M(e,t){return function(n){var r,i,a=jz(1900,void 0,1);if(S(a,e,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(t&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=Vz(jz(a.y,0,1))).getUTCDay(),r=i>4||0===i?Cz.ceil(r):Cz(r),r=Sz.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=Gz(jz(a.y,0,1))).getDay(),r=i>4||0===i?cz.ceil(r):cz(r),r=oz.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?Vz(jz(a.y,0,1)).getUTCDay():Gz(jz(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,Vz(a)):Gz(a)}}function S(e,t,n,r){for(var i,a,o=0,s=t.length,l=n.length;o<s;){if(r>=l)return-1;if(37===(i=t.charCodeAt(o++))){if(i=t.charAt(o++),!(a=_[i in qz?t.charAt(o++):i])||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=w(n,b),b.X=w(r,b),b.c=w(t,b),x.x=w(n,x),x.X=w(r,x),x.c=w(t,x),{format:function(e){var t=w(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=M(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=M(e+="",!0);return t.toString=function(){return e},t}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Xz=Wz.format,Wz.parse,Wz.utcFormat,Wz.utcParse;var fH=i(3905);const pH=Math.PI,mH=2*pH,gH=1e-6,vH=mH-gH;function yH(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function bH(){return new yH}yH.prototype=bH.prototype={constructor:yH,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,s=n-e,l=r-t,c=a-e,u=o-t,d=c*c+u*u;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(d>gH)if(Math.abs(u*s-l*c)>gH&&i){var h=n-a,f=r-o,p=s*s+l*l,m=h*h+f*f,g=Math.sqrt(p),v=Math.sqrt(d),y=i*Math.tan((pH-Math.acos((p+d-m)/(2*g*v)))/2),b=y/v,x=y/g;Math.abs(b-1)>gH&&(this._+="L"+(e+b*c)+","+(t+b*u)),this._+="A"+i+","+i+",0,0,"+ +(u*h>c*f)+","+(this._x1=e+x*s)+","+(this._y1=t+x*l)}else this._+="L"+(this._x1=e)+","+(this._y1=t)},arc:function(e,t,n,r,i,a){e=+e,t=+t,a=!!a;var o=(n=+n)*Math.cos(r),s=n*Math.sin(r),l=e+o,c=t+s,u=1^a,d=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>gH||Math.abs(this._y1-c)>gH)&&(this._+="L"+l+","+c),n&&(d<0&&(d=d%mH+mH),d>vH?this._+="A"+n+","+n+",0,1,"+u+","+(e-o)+","+(t-s)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):d>gH&&(this._+="A"+n+","+n+",0,"+ +(d>=pH)+","+u+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};const xH=bH;function _H(e){return function(){return e}}const wH=Math.abs,MH=Math.atan2,SH=Math.cos,AH=Math.max,EH=Math.min,CH=Math.sin,TH=Math.sqrt,RH=1e-12,PH=Math.PI,LH=PH/2,DH=2*PH;function IH(e){return e>1?0:e<-1?PH:Math.acos(e)}function kH(e){return e>=1?LH:e<=-1?-LH:Math.asin(e)}function BH(e){return e.innerRadius}function FH(e){return e.outerRadius}function NH(e){return e.startAngle}function OH(e){return e.endAngle}function zH(e){return e&&e.padAngle}function UH(e,t,n,r,i,a,o,s){var l=n-e,c=r-t,u=o-i,d=s-a,h=d*l-u*c;if(!(h*h<RH))return[e+(h=(u*(t-a)-d*(e-i))/h)*l,t+h*c]}function HH(e,t,n,r,i,a,o){var s=e-n,l=t-r,c=(o?a:-a)/TH(s*s+l*l),u=c*l,d=-c*s,h=e+u,f=t+d,p=n+u,m=r+d,g=(h+p)/2,v=(f+m)/2,y=p-h,b=m-f,x=y*y+b*b,_=i-a,w=h*m-p*f,M=(b<0?-1:1)*TH(AH(0,_*_*x-w*w)),S=(w*b-y*M)/x,A=(-w*y-b*M)/x,E=(w*b+y*M)/x,C=(-w*y+b*M)/x,T=S-g,R=A-v,P=E-g,L=C-v;return T*T+R*R>P*P+L*L&&(S=E,A=C),{cx:S,cy:A,x01:-u,y01:-d,x11:S*(i/_-1),y11:A*(i/_-1)}}function GH(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function VH(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function jH(e){return e}Array.prototype.slice,TH(3);const WH={draw(e,t){const n=TH(t/PH);e.moveTo(n,0),e.arc(0,0,n,0,DH)}},XH=(TH(1/3),{draw(e,t){const n=TH(t),r=-n/2;e.rect(r,r,n,n)}});CH(PH/10),CH(7*PH/10);CH(DH/10),SH(DH/10),TH(3),TH(3),TH(3),TH(12),i(9983),i(1501);var qH="http://www.w3.org/1999/xhtml";const YH={svg:"http://www.w3.org/2000/svg",xhtml:qH,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ZH(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),YH.hasOwnProperty(t)?{space:YH[t],local:e}:e}function JH(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===qH&&t.documentElement.namespaceURI===qH?t.createElement(e):t.createElementNS(n,e)}}function $H(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function KH(e){var t=ZH(e);return(t.local?$H:JH)(t)}var QH=0;function eG(){this._="@"+(++QH).toString(36)}eG.prototype=function(){return new eG}.prototype={constructor:eG,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};var tG=function(e){return function(){return this.matches(e)}};if("undefined"!=typeof document){var nG=document.documentElement;if(!nG.matches){var rG=nG.webkitMatchesSelector||nG.msMatchesSelector||nG.mozMatchesSelector||nG.oMatchesSelector;tG=function(e){return function(){return rG.call(this,e)}}}}const iG=tG;var aG={},oG=null;function sG(e,t,n){return e=lG(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function lG(e,t,n){return function(r){var i=oG;oG=r;try{e.call(this,this.__data__,t,n)}finally{oG=i}}}function cG(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function uG(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,a=t.length;r<a;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?t.length=i:delete this.__on}}}function dG(e,t,n){var r=aG.hasOwnProperty(e.type)?sG:lG;return function(i,a,o){var s,l=this.__on,c=r(t,a,o);if(l)for(var u=0,d=l.length;u<d;++u)if((s=l[u]).type===e.type&&s.name===e.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=c,s.capture=n),void(s.value=t);this.addEventListener(e.type,c,n),s={type:e.type,name:e.name,value:t,listener:c,capture:n},l?l.push(s):this.__on=[s]}}function hG(){}function fG(e){return null==e?hG:function(){return this.querySelector(e)}}function pG(){return[]}function mG(e){return new Array(e.length)}function gG(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function vG(e,t,n,r,i,a){for(var o,s=0,l=t.length,c=a.length;s<c;++s)(o=t[s])?(o.__data__=a[s],r[s]=o):n[s]=new gG(e,a[s]);for(;s<l;++s)(o=t[s])&&(i[s]=o)}function yG(e,t,n,r,i,a,o){var s,l,c,u={},d=t.length,h=a.length,f=new Array(d);for(s=0;s<d;++s)(l=t[s])&&(f[s]=c="$"+o.call(l,l.__data__,s,t),c in u?i[s]=l:u[c]=l);for(s=0;s<h;++s)(l=u[c="$"+o.call(e,a[s],s,a)])?(r[s]=l,l.__data__=a[s],u[c]=null):n[s]=new gG(e,a[s]);for(s=0;s<d;++s)(l=t[s])&&u[f[s]]===l&&(i[s]=l)}function bG(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function xG(e){return function(){this.removeAttribute(e)}}function _G(e){return function(){this.removeAttributeNS(e.space,e.local)}}function wG(e,t){return function(){this.setAttribute(e,t)}}function MG(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function SG(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function AG(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function EG(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function CG(e){return function(){this.style.removeProperty(e)}}function TG(e,t,n){return function(){this.style.setProperty(e,t,n)}}function RG(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function PG(e){return function(){delete this[e]}}function LG(e,t){return function(){this[e]=t}}function DG(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function IG(e){return e.trim().split(/^|\s+/)}function kG(e){return e.classList||new BG(e)}function BG(e){this._node=e,this._names=IG(e.getAttribute("class")||"")}function FG(e,t){for(var n=kG(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function NG(e,t){for(var n=kG(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function OG(e){return function(){FG(this,e)}}function zG(e){return function(){NG(this,e)}}function UG(e,t){return function(){(t.apply(this,arguments)?FG:NG)(this,e)}}function HG(){this.textContent=""}function GG(e){return function(){this.textContent=e}}function VG(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function jG(){this.innerHTML=""}function WG(e){return function(){this.innerHTML=e}}function XG(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function qG(){this.nextSibling&&this.parentNode.appendChild(this)}function YG(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ZG(){return null}function JG(){var e=this.parentNode;e&&e.removeChild(this)}function $G(e,t,n){var r=EG(e),i=r.CustomEvent;i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function KG(e,t){return function(){return $G(this,e,t)}}function QG(e,t){return function(){return $G(this,e,t.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(aG={mouseenter:"mouseover",mouseleave:"mouseout"})),gG.prototype={constructor:gG,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},BG.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var eV,tV=[null];function nV(e,t){this._groups=e,this._parents=t}function rV(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function iV(e){return(e=rV(Math.abs(e)))?e[1]:NaN}function aV(e,t){var n=rV(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}nV.prototype=function(){return new nV([[document.documentElement]],tV)}.prototype={constructor:nV,select:function(e){"function"!=typeof e&&(e=fG(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o,s=t[i],l=s.length,c=r[i]=new Array(l),u=0;u<l;++u)(a=s[u])&&(o=e.call(a,a.__data__,u,s))&&("__data__"in a&&(o.__data__=a.__data__),c[u]=o);return new nV(r,this._parents)},selectAll:function(e){"function"!=typeof e&&(e=function(e){return null==e?pG:function(){return this.querySelectorAll(e)}}(e));for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o,s=t[a],l=s.length,c=0;c<l;++c)(o=s[c])&&(r.push(e.call(o,o.__data__,c,s)),i.push(o));return new nV(r,i)},filter:function(e){"function"!=typeof e&&(e=iG(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o=t[i],s=o.length,l=r[i]=[],c=0;c<s;++c)(a=o[c])&&e.call(a,a.__data__,c,o)&&l.push(a);return new nV(r,this._parents)},data:function(e,t){if(!e)return p=new Array(this.size()),u=-1,this.each((function(e){p[++u]=e})),p;var n,r=t?yG:vG,i=this._parents,a=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var o=a.length,s=new Array(o),l=new Array(o),c=new Array(o),u=0;u<o;++u){var d=i[u],h=a[u],f=h.length,p=e.call(d,d&&d.__data__,u,i),m=p.length,g=l[u]=new Array(m),v=s[u]=new Array(m);r(d,h,g,v,c[u]=new Array(f),p,t);for(var y,b,x=0,_=0;x<m;++x)if(y=g[x]){for(x>=_&&(_=x+1);!(b=v[_])&&++_<m;);y._next=b||null}}return(s=new nV(s,i))._enter=l,s._exit=c,s},enter:function(){return new nV(this._enter||this._groups.map(mG),this._parents)},exit:function(){return new nV(this._exit||this._groups.map(mG),this._parents)},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l,c=t[s],u=n[s],d=c.length,h=o[s]=new Array(d),f=0;f<d;++f)(l=c[f]||u[f])&&(h[f]=l);for(;s<r;++s)o[s]=t[s];return new nV(o,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&o!==r.nextSibling&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=bG);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,s=n[a],l=s.length,c=i[a]=new Array(l),u=0;u<l;++u)(o=s[u])&&(c[u]=o);c.sort(t)}return new nV(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each((function(){e[++t]=this})),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){var e=0;return this.each((function(){++e})),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,a=t[n],o=0,s=a.length;o<s;++o)(i=a[o])&&e.call(i,i.__data__,o,a);return this},attr:function(e,t){var n=ZH(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?_G:xG:"function"==typeof t?n.local?AG:SG:n.local?MG:wG)(n,t))},style:function(e,t,n){var r;return arguments.length>1?this.each((null==t?CG:"function"==typeof t?RG:TG)(e,t,null==n?"":n)):EG(r=this.node()).getComputedStyle(r,null).getPropertyValue(e)},property:function(e,t){return arguments.length>1?this.each((null==t?PG:"function"==typeof t?DG:LG)(e,t)):this.node()[e]},classed:function(e,t){var n=IG(e+"");if(arguments.length<2){for(var r=kG(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?UG:t?OG:zG)(n,t))},text:function(e){return arguments.length?this.each(null==e?HG:("function"==typeof e?VG:GG)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?jG:("function"==typeof e?XG:WG)(e)):this.node().innerHTML},raise:function(){return this.each(qG)},lower:function(){return this.each(YG)},append:function(e){var t="function"==typeof e?e:KH(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:KH(e),r=null==t?ZG:"function"==typeof t?t:fG(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(JG)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,a=cG(e+""),o=a.length;if(!(arguments.length<2)){for(s=t?dG:uG,null==n&&(n=!1),r=0;r<o;++r)this.each(s(a[r],t,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(r=0,l=s[c];r<o;++r)if((i=a[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?QG:KG)(e,t))}};const oV={"":function(e,t){e:for(var n,r=(e=e.toPrecision(t)).length,i=1,a=-1;i<r;++i)switch(e[i]){case".":a=n=i;break;case"0":0===a&&(a=i),n=i;break;case"e":break e;default:a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(n+1):e},"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return aV(100*e,t)},r:aV,s:function(e,t){var n=rV(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(eV=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+rV(e,Math.max(0,t+a-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};var sV=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function lV(e){return new cV(e)}function cV(e){if(!(t=sV.exec(e)))throw new Error("invalid format: "+e);var t,n=t[1]||" ",r=t[2]||">",i=t[3]||"-",a=t[4]||"",o=!!t[5],s=t[6]&&+t[6],l=!!t[7],c=t[8]&&+t[8].slice(1),u=t[9]||"";"n"===u?(l=!0,u="g"):oV[u]||(u=""),(o||"0"===n&&"="===r)&&(o=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=a,this.zero=o,this.width=s,this.comma=l,this.precision=c,this.type=u}cV.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var uV,dV,hV,fV=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function pV(e){return e}function mV(e){var t,n,r=e.grouping&&e.thousands?(t=e.grouping,n=e.thousands,function(e,r){for(var i=e.length,a=[],o=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(e.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(n)}):pV,i=e.currency,a=e.decimal;function o(e){var t=(e=lV(e)).fill,n=e.align,o=e.sign,s=e.symbol,l=e.zero,c=e.width,u=e.comma,d=e.precision,h=e.type,f="$"===s?i[0]:"#"===s&&/[boxX]/.test(h)?"0"+h.toLowerCase():"",p="$"===s?i[1]:/[%p]/.test(h)?"%":"",m=oV[h],g=!h||/[defgprs%]/.test(h);function v(e){var i,s,v,y=f,b=p;if("c"===h)b=m(e)+b,e="";else{var x=((e=+e)<0||1/e<0)&&(e*=-1,!0);if(e=m(e,d),x)for(i=-1,s=e.length,x=!1;++i<s;)if(48<(v=e.charCodeAt(i))&&v<58||"x"===h&&96<v&&v<103||"X"===h&&64<v&&v<71){x=!0;break}if(y=(x?"("===o?o:"-":"-"===o||"("===o?"":o)+y,b=b+("s"===h?fV[8+eV/3]:"")+(x&&"("===o?")":""),g)for(i=-1,s=e.length;++i<s;)if(48>(v=e.charCodeAt(i))||v>57){b=(46===v?a+e.slice(i+1):e.slice(i))+b,e=e.slice(0,i);break}}u&&!l&&(e=r(e,1/0));var _=y.length+e.length+b.length,w=_<c?new Array(c-_+1).join(t):"";switch(u&&l&&(e=r(w+e,w.length?c-b.length:1/0),w=""),n){case"<":return y+e+b+w;case"=":return y+w+e+b;case"^":return w.slice(0,_=w.length>>1)+y+e+b+w.slice(_)}return w+y+e+b}return d=null==d?h?6:12:/[gprs]/.test(h)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),v.toString=function(){return e+""},v}return{format:o,formatPrefix:function(e,t){var n=o(((e=lV(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(iV(t)/3))),i=Math.pow(10,-r),a=fV[8+r/3];return function(e){return n(i*e)+a}}}}uV=mV({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),dV=uV.format,hV=uV.formatPrefix;var gV={value:function(){}};function vV(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r)throw new Error("illegal type: "+e);r[e]=[]}return new yV(r)}function yV(e){this._=e}function bV(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function xV(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function _V(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=gV,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}yV.prototype=vV.prototype={constructor:yV,on:function(e,t){var n,r=this._,i=bV(e+"",r),a=-1,o=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<o;)if(n=(e=i[a]).type)r[n]=_V(r[n],e.name,t);else if(null==t)for(n in r)r[n]=_V(r[n],e.name,null);return this}for(;++a<o;)if((n=(e=i[a]).type)&&(n=xV(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new yV(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,n=(r=this._[e]).length;a<n;++a)r[a].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};const wV=vV;function MV(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var SV,AV,EV=(1===(SV=MV).length&&(AV=SV,SV=function(e,t){return MV(AV(e),t)}),{left:function(e,t,n,r){for(null==n&&(n=0),null==r&&(r=e.length);n<r;){var i=n+r>>>1;SV(e[i],t)<0?n=i+1:r=i}return n},right:function(e,t,n,r){for(null==n&&(n=0),null==r&&(r=e.length);n<r;){var i=n+r>>>1;SV(e[i],t)>0?r=i:n=i+1}return n}});const CV=EV.right;var TV=Array.prototype;TV.slice,TV.map;var RV=Math.sqrt(50),PV=Math.sqrt(10),LV=Math.sqrt(2);function DV(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=RV?i*=10:a>=PV?i*=5:a>=LV&&(i*=2),t<e?-i:i}var IV="$";function kV(){}function BV(e,t){var n=new kV;if(e instanceof kV)e.each((function(e,t){n.set(t,e)}));else if(Array.isArray(e)){var r,i=-1,a=e.length;if(null==t)for(;++i<a;)n.set(i,e[i]);else for(;++i<a;)n.set(t(r=e[i],i,e),r)}else if(e)for(var o in e)n.set(o,e[o]);return n}function FV(){}kV.prototype=BV.prototype={constructor:kV,has:function(e){return IV+e in this},get:function(e){return this[IV+e]},set:function(e,t){return this[IV+e]=t,this},remove:function(e){var t=IV+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===IV&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===IV&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===IV&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===IV&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===IV&&++e;return e},empty:function(){for(var e in this)if(e[0]===IV)return!1;return!0},each:function(e){for(var t in this)t[0]===IV&&e(this[t],t.slice(1),this)}};var NV=BV.prototype;FV.prototype=function(e,t){var n=new FV;if(e instanceof FV)e.each((function(e){n.add(e)}));else if(e){var r=-1,i=e.length;if(null==t)for(;++r<i;)n.add(e[r]);else for(;++r<i;)n.add(t(e[r],r,e))}return n}.prototype={constructor:FV,has:NV.has,add:function(e){return this[IV+(e+="")]=e,this},remove:NV.remove,clear:NV.clear,values:NV.keys,size:NV.size,empty:NV.empty,each:NV.each};var OV=Array.prototype,zV=OV.map,UV=OV.slice,HV=i(3626),GV=i(3172),VV=i(5720);function jV(e){return+e}var WV=[0,1];function XV(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=t,function(){return n});var n}function qV(e,t,n,r){var i=e[0],a=e[1],o=t[0],s=t[1];return a<i?(i=n(a,i),o=r(s,o)):(i=n(i,a),o=r(o,s)),function(e){return o(i(e))}}function YV(e,t,n,r){var i=Math.min(e.length,t.length)-1,a=new Array(i),o=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)a[s]=n(e[s],e[s+1]),o[s]=r(t[s],t[s+1]);return function(t){var n=CV(e,t,1,i)-1;return o[n](a[n](t))}}function ZV(){var e=function(e,t){var n,r,i,a=WV,o=WV,s=GV.Z,l=!1;function c(){return n=Math.min(a.length,o.length)>2?YV:qV,r=i=null,u}function u(t){return(r||(r=n(a,o,l?function(e){return function(t,n){var r=e(t=+t,n=+n);return function(e){return e<=t?0:e>=n?1:r(e)}}}(e):e,s)))(+t)}return u.invert=function(e){return(i||(i=n(o,a,XV,l?function(e){return function(t,n){var r=e(t=+t,n=+n);return function(e){return e<=0?t:e>=1?n:r(e)}}}(t):t)))(+e)},u.domain=function(e){return arguments.length?(a=zV.call(e,jV),c()):a.slice()},u.range=function(e){return arguments.length?(o=UV.call(e),c()):o.slice()},u.rangeRound=function(e){return o=UV.call(e),s=VV.Z,c()},u.clamp=function(e){return arguments.length?(l=!!e,c()):l},u.interpolate=function(e){return arguments.length?(s=e,c()):s},c()}(XV,HV.Z);return e.copy=function(){return t=e,ZV().domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp());var t},function(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){var r=DV(e,t,n);return function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),a=new Array(i);++r<i;)a[r]=e+r*n;return a}(Math.ceil(e/r)*r,Math.floor(t/r)*r+r/2,r)}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){return function(e,t,n){var r,i=e[0],a=e[e.length-1],o=DV(i,a,null==t?10:t);switch((n=lV(null==n?",f":n)).type){case"s":var s=Math.max(Math.abs(i),Math.abs(a));return null!=n.precision||isNaN(r=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(iV(t)/3)))-iV(Math.abs(e)))}(o,s))||(n.precision=r),hV(n,s);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,iV(t)-iV(e))+1}(o,Math.max(Math.abs(i),Math.abs(a))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=function(e){return Math.max(0,-iV(Math.abs(e)))}(o))||(n.precision=r-2*("%"===n.type))}return dV(n)}(t(),e,n)},e.nice=function(n){var r=t(),i=r.length-1,a=null==n?10:n,o=r[0],s=r[i],l=DV(o,s,a);return l&&(l=DV(Math.floor(o/l)*l,Math.ceil(s/l)*l,a),r[0]=Math.floor(o/l)*l,r[i]=Math.ceil(s/l)*l,t(r)),e},e}(e)}function JV(e){return e.match(/.{6}/g).map((function(e){return"#"+e}))}JV("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),JV("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),JV("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),JV("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5");var $V=i(3861),KV=i(8499);function QV(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}(0,KV.B)((0,$V.Z)(300,.5,0),(0,$V.Z)(-240,.5,1)),(0,KV.B)((0,$V.Z)(-100,.75,.35),(0,$V.Z)(80,1.5,.8)),(0,KV.B)((0,$V.Z)(260,.75,.35),(0,$V.Z)(80,1.5,.8)),(0,$V.Z)(),QV(JV("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),QV(JV("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),QV(JV("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),QV(JV("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));var ej="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tj=function(e){return e},nj=function(e){for(var t=[],n=0,r=e.length;n<r;n++)t[n]=e[r-n-1];return t},rj=function(e,t){e.each((function(){for(var e,n=function(e){return"string"==typeof e?new nV([[document.querySelector(e)]],[document.documentElement]):new nV([[e]],tV)}(this),r=n.text().split(/\s+/).reverse(),i=[],a=(n.attr("y"),parseFloat(n.attr("dy"))||0),o=n.text(null).append("tspan").attr("x",0).attr("dy",a+"em");e=r.pop();)i.push(e),o.text(i.join(" ")),o.node().getComputedTextLength()>t&&i.length>1&&(i.pop(),o.text(i.join(" ")),i=[e],o=n.append("tspan").attr("x",0).attr("dy",1.2+a+"em").text(e))}))},ij={d3_drawShapes:function(e,t,n,r,i,a){"rect"===e?t.attr("height",n).attr("width",r):"circle"===e?t.attr("r",i):"line"===e?t.attr("x1",0).attr("x2",r).attr("y1",0).attr("y2",0):"path"===e&&t.attr("d",a)},d3_addText:function(e,t,n,r,i){t.append("text").attr("class",r+"label");var a=e.selectAll("g."+r+"cell text."+r+"label").data(n).text(tj);return i&&e.selectAll("g."+r+"cell text."+r+"label").call(rj,i),a},d3_calcType:function(e,t,n,r,i,a){var o=e.invertExtent?function(e,t,n){var r=e.range().map((function(r){var i=e.invertExtent(r);return t(i[0])+" "+n+" "+t(i[1])}));return{data:e.range(),labels:r,feature:tj}}(e,i,a):e.ticks?function(e,t,n){var r=[];if(t.length>1)r=t;else for(var i=e.domain(),a=(i[i.length-1]-i[0])/(t-1),o=0;o<t;o++)r.push(i[0]+o*a);var s=r.map(n);return{data:r,labels:s,feature:function(t){return e(t)}}}(e,n,i):function(e){return{data:e.domain(),labels:e.domain(),feature:function(t){return e(t)}}}(e),s=e.range&&e.range()||e.domain();return o.labels=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n=arguments[2],r=arguments[3],i=arguments[4];if("object"===(void 0===t?"undefined":ej(t))){if(0===t.length)return e;for(var a=t.length;a<e.length;a++)t.push(e[a]);return t}if("function"==typeof t){for(var o=[],s=e.length,l=0;l<s;l++)o.push(t({i:l,genLength:s,generatedLabels:e,domain:n,range:r,labelDelimiter:i}));return o}return e}(o.labels,r,e.domain(),s,a),t&&(o.labels=nj(o.labels),o.data=nj(o.data)),o},d3_filterCells:function(e,t){var n=e.data.map((function(t,n){return{data:t,label:e.labels[n]}})).filter(t),r=n.map((function(e){return e.data})),i=n.map((function(e){return e.label}));return e.data=e.data.filter((function(e){return-1!==r.indexOf(e)})),e.labels=e.labels.filter((function(e){return-1!==i.indexOf(e)})),e},d3_placement:function(e,t,n,r,i,a){t.attr("transform",n),r.attr("transform",i),"horizontal"===e&&r.style("text-anchor",a)},d3_addEvents:function(e,t){e.on("mouseover.legend",(function(e){!function(e,t,n){e.call("cellover",n,t)}(t,e,this)})).on("mouseout.legend",(function(e){!function(e,t,n){e.call("cellout",n,t)}(t,e,this)})).on("click.legend",(function(e){!function(e,t,n){e.call("cellclick",n,t)}(t,e,this)}))},d3_title:function(e,t,n,r){if(""!==t){e.selectAll("text."+n+"legendTitle").data([t]).enter().append("text").attr("class",n+"legendTitle"),e.selectAll("text."+n+"legendTitle").text(t),r&&e.selectAll("text."+n+"legendTitle").call(rj,r);var i=e.select("."+n+"legendCells"),a=e.select("."+n+"legendTitle").nodes().map((function(e){return e.getBBox().height}))[0],o=-i.nodes().map((function(e){return e.getBBox().x}))[0];i.attr("transform","translate("+o+","+a+")")}},d3_defaultLocale:{format:dV,formatPrefix:hV},d3_defaultFormatSpecifier:".01f",d3_defaultDelimiter:"to"};var aj=i(270),oj={};oj.styleTagTransform=Gy(),oj.setAttributes=Oy(),oj.insert=Fy().bind(null,"head"),oj.domAPI=ky(),oj.insertStyleElement=Uy(),Dy()(aj.Z,oj),aj.Z&&aj.Z.locals&&aj.Z.locals;var sj=i(5893);const lj=[[139,0,0,1],[205,92,92,1],[0,100,0,1],[85,107,47,1],[0,0,139,1],[173,216,230,1]],cj=lj.map((e=>e.map(((e,t)=>t<3?e/255:1)))),uj={chargeState:{name:"Charge State",unit:"%",label:"",getValue:(e,t)=>100*t.performance.chargeState[e],min:0,max:100},chargeStateNoBeams:{name:"Charge w/o Space Power",label:"w/o Space Power",getValue:(e,t)=>100*t.performance.chargeStateNoBeams[e],min:0,max:100},netCurrent:{name:"Net Current",unit:"A",label:"",getValue:(e,t)=>t.params.load.powerProfiles[t.performance.sources[e]][t.performance.currentDuties[e]]},consumption:{name:"Consumption",unit:"W",label:"",getValue:(e,t)=>t.params.load.duties[t.performance.currentDuties[e]].consumption}},dj=aN.extentDate().accessors([e=>e[0].x]),hj=aN.extentLinear().accessors([e=>e[0].y]).pad([1,0]),fj=aN.annotationSvgGridline();function pj({selected:e,shouldUpdate:n,time:r}){const i=(0,t.useRef)(qx.getState().frame);(0,t.useEffect)((()=>{qx.subscribe((e=>{i.current=e.frame}))}),[]);const a=(0,t.useRef)([]),o=(0,t.useRef)(),s=(0,t.useRef)(),l=()=>{fH.select(s.current).datum(a.current).call(o.current)},c=(0,t.useRef)(),u=()=>r.current.map(((t,n)=>(c.current=[],e.current.satellites.forEach((r=>{e.current.params.forEach((e=>{const i=uj[e];c.current.push({x:t,y:i.getValue(n,r)})}))})),c.current))),d=(0,t.useRef)(),h=(0,t.useRef)(),f=(0,t.useRef)(),p=(0,t.useRef)(),m=(0,t.useRef)(),g=(0,t.useRef)(),v=(0,t.useRef)(),y=()=>{const{satellites:t,params:n}=e.current;v.current=t.map((e=>n.map((t=>`${e.name} ${uj[t].label}`)))).flat(),g.current=HO().domain(v.current).range(lj.slice(0,v.length).map((e=>`rgb(${e.slice(0,3)})`))),f.current=Array.from({length:t.length*n.length},((e,t)=>((e,t)=>aN.seriesWebglLine().crossValue((t=>t[e].x)).mainValue((t=>t[e].y)).defined((()=>1)).equals((e=>e.length>0)).lineWidth(3).context(t).decorate((t=>{aN.webglStrokeColor(cj[e])(t)})))(t,p.current))),h.current||(h.current=aN.seriesWebglMulti()),h.current.series(f.current).context(p.current),m.current=function(){var e=ZV(),t="rect",n=15,r=15,i=10,a=2,o=[5],s=void 0,l=[],c="",u=!1,d="",h=ij.d3_defaultLocale,f=ij.d3_defaultFormatSpecifier,p=10,m="middle",g=ij.d3_defaultDelimiter,v=void 0,y="vertical",b=!1,x=void 0,_=void 0,w=wV("cellover","cellout","cellclick");function M(M){var S=ij.d3_calcType(e,b,o,l,h.format(f),g);M.selectAll("g").data([e]).enter().append("g").attr("class",c+"legendCells"),s&&ij.d3_filterCells(S,s);var A=M.select("."+c+"legendCells").selectAll("."+c+"cell").data(S.data),E=A.enter().append("g").attr("class",c+"cell");E.append(t).attr("class",c+"swatch");var C=M.selectAll("g."+c+"cell "+t+"."+c+"swatch").data(S.data);ij.d3_addEvents(E,w),A.exit().transition().style("opacity",0).remove(),C.exit().transition().style("opacity",0).remove(),C=C.merge(C),ij.d3_drawShapes(t,C,r,n,i,x);var T=ij.d3_addText(M,E,S.labels,c,v);A=E.merge(A);var R=T.nodes().map((function(e){return e.getBBox()})),P=C.nodes().map((function(e){return e.getBBox()}));u?C.attr("class",(function(e){return c+"swatch "+S.feature(e)})):"line"==t?C.style("stroke",S.feature):C.style("fill",S.feature);var L,D=void 0,I=void 0,k="start"==m?0:"middle"==m?.5:1;"vertical"===y?(L=R.map((function(e,t){return Math.max(e.height,P[t].height)})),D=function(e,t){return"translate(0, "+(function(e,t){var n,r=0,i=e.length,a=-1;if(null==t)for(;++a<i;)(n=+e[a])&&(r+=n);else for(;++a<i;)(n=+t(e[a],a,e))&&(r+=n);return r}(L.slice(0,t))+t*a)+")"},I=function(e,t){return"translate( "+(P[t].width+P[t].x+p)+", "+(P[t].y+P[t].height/2+5)+")"}):"horizontal"===y&&(D=function(e,t){return"translate("+t*(P[t].width+a)+",0)"},I=function(e,t){return"translate("+(P[t].width*k+P[t].x)+",\n          "+(P[t].height+P[t].y+p+8)+")"}),ij.d3_placement(y,A,D,T,I,m),ij.d3_title(M,d,c,_),A.transition().style("opacity",1)}return M.scale=function(t){return arguments.length?(e=t,M):e},M.cells=function(e){return arguments.length?((e.length>1||e>=2)&&(o=e),M):o},M.cellFilter=function(e){return arguments.length?(s=e,M):s},M.shape=function(e,n){return arguments.length?(("rect"==e||"circle"==e||"line"==e||"path"==e&&"string"==typeof n)&&(t=e,x=n),M):t},M.shapeWidth=function(e){return arguments.length?(n=+e,M):n},M.shapeHeight=function(e){return arguments.length?(r=+e,M):r},M.shapeRadius=function(e){return arguments.length?(i=+e,M):i},M.shapePadding=function(e){return arguments.length?(a=+e,M):a},M.labels=function(e){return arguments.length?(l=e,M):l},M.labelAlign=function(e){return arguments.length?("start"!=e&&"end"!=e&&"middle"!=e||(m=e),M):m},M.locale=function(e){return arguments.length?(h=mV(e),M):h},M.labelFormat=function(e){return arguments.length?(f=lV(e),M):M.locale().format(f)},M.labelOffset=function(e){return arguments.length?(p=+e,M):p},M.labelDelimiter=function(e){return arguments.length?(g=e,M):g},M.labelWrap=function(e){return arguments.length?(v=e,M):v},M.useClass=function(e){return arguments.length?(!0!==e&&!1!==e||(u=e),M):u},M.orient=function(e){return arguments.length?("horizontal"!=(e=e.toLowerCase())&&"vertical"!=e||(y=e),M):y},M.ascending=function(e){return arguments.length?(b=!!e,M):b},M.classPrefix=function(e){return arguments.length?(c=e,M):c},M.title=function(e){return arguments.length?(d=e,M):d},M.titleWidth=function(e){return arguments.length?(_=e,M):_},M.textWrap=function(e){return arguments.length?(textWrap=e,M):textWrap},M.on=function(){var e=w.on.apply(w,arguments);return e===w?M:e},M}().shape("path",function(e,t){let n=null;function r(){let r;if(n||(n=r=xH()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),r)return n=null,r+""||null}return e="function"==typeof e?e:_H(e||WH),t="function"==typeof t?t:_H(void 0===t?64:+t),r.type=function(t){return arguments.length?(e="function"==typeof t?t:_H(t),r):e},r.size=function(e){return arguments.length?(t="function"==typeof e?e:_H(+e),r):t},r.context=function(e){return arguments.length?(n=null==e?null:e,r):n},r}().type(XH).size(150)()).shapePadding(20).labelWrap(100).scale(g.current),fH.select(d.current).select("svg").call(m.current).select(".legendCells").attr("transform","translate(0,150)").attr("align","center"),o.current||(o.current=aN.chartCartesian(function(){return wO.apply(hH(Uz,Hz,yz,gz,lz,oz,iz,nz,ez,Xz).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}(),OO()).xLabel("Time").svgPlotArea(fj));const r=uj[n[0]];o.current.yLabel(r.unit).chartLabel(r.name).webglPlotArea(h.current).yDomain(hj(a.current))},b=(0,t.useRef)();return OF((()=>{if(r.current)if(o.current)n.current&&(a.current=u(),y(),n.current=!1),b.current=a.current.slice(0,i.current),o.current.xDomain(dj(b.current)),l();else{a.current=u(),y(),l();const e=fH.select("d3fc-canvas canvas").node();p.current=e.getContext("webgl")}})),(0,sj.jsx)(iy,{maxHeight:500,width:"100%",children:(0,sj.jsxs)(ly,{justify:"center",children:[(0,sj.jsx)("div",{style:{width:"80%",height:"500px",padding:"2.5rem"},ref:s,id:"chart"}),(0,sj.jsx)("d3fc-svg",{id:"legend",ref:d,style:{width:"20%",height:"500px"}})]})})}const mj=t.memo(pj);var gj=!1,vj=null,yj=!1,bj=new Set,xj="undefined"!=typeof window&&null!=window.navigator&&/^Mac/.test(window.navigator.platform);function _j(e,t){bj.forEach((n=>n(e,t)))}function wj(e){yj=!0,function(e){return!(e.metaKey||!xj&&e.altKey||e.ctrlKey)}(e)&&(vj="keyboard",_j("keyboard",e))}function Mj(e){vj="pointer","mousedown"!==e.type&&"pointerdown"!==e.type||(yj=!0,_j("pointer",e))}function Sj(e){e.target!==window&&e.target!==document&&(yj||(vj="keyboard",_j("keyboard",e)),yj=!1)}function Aj(){yj=!1}function Ej(){return"pointer"!==vj}function Cj(e){!function(){if("undefined"==typeof window||gj)return;const{focus:e}=HTMLElement.prototype;HTMLElement.prototype.focus=function(...t){yj=!0,e.apply(this,t)},document.addEventListener("keydown",wj,!0),document.addEventListener("keyup",wj,!0),window.addEventListener("focus",Sj,!0),window.addEventListener("blur",Aj,!1),"undefined"!=typeof PointerEvent?(document.addEventListener("pointerdown",Mj,!0),document.addEventListener("pointermove",Mj,!0),document.addEventListener("pointerup",Mj,!0)):(document.addEventListener("mousedown",Mj,!0),document.addEventListener("mousemove",Mj,!0),document.addEventListener("mouseup",Mj,!0)),gj=!0}(),e(Ej());const t=()=>e(Ej());return bj.add(t),()=>{bj.delete(t)}}var[Tj,Rj]=cr({name:"CheckboxGroupContext",strict:!1});function Pj(e){const{colorScheme:n,size:r,variant:i,children:a,isDisabled:o}=e,{value:s,onChange:l}=function(e={}){const{defaultValue:n,value:r,onChange:i,isDisabled:a,isNative:o}=e,s=tt(i),[l,c]=at({value:r,defaultValue:n||[],onChange:s}),u=(0,t.useCallback)((e=>{if(!l)return;const t=I(e)?e.target.checked:!l.includes(e),n=I(e)?e.target.value:e,r=t?M(l,n):l.filter((e=>String(e)!==String(n)));c(r)}),[c,l]),d=(0,t.useCallback)(((e={})=>{const t=o?"checked":"isChecked";return{...e,[t]:l.some((t=>String(e.value)===String(t))),onChange:u}}),[u,o,l]);return{value:l,isDisabled:a,onChange:u,setValue:c,getCheckboxProps:d}}(e),c=(0,t.useMemo)((()=>({size:r,onChange:l,colorScheme:n,value:s,variant:i,isDisabled:o})),[r,l,n,s,i,o]);return t.createElement(Tj,{value:c,children:a})}var Lj=function(e){const t=Wv;return"custom"in t&&"function"==typeof t.custom?t.custom(e):t(e)}(va.svg);function Dj(e){return t.createElement(Lj,{width:"1.2em",viewBox:"0 0 12 10",variants:{unchecked:{opacity:0,strokeDashoffset:16},checked:{opacity:1,strokeDashoffset:0,transition:{duration:.2}}},style:{fill:"none",strokeWidth:2,stroke:"currentColor",strokeDasharray:16},...e},t.createElement("polyline",{points:"1.5 6 4.5 9 10.5 1"}))}function Ij(e){return t.createElement(Lj,{width:"1.2em",viewBox:"0 0 24 24",variants:{unchecked:{scaleX:.65,opacity:0},checked:{scaleX:1,opacity:1,transition:{scaleX:{duration:0},opacity:{duration:.02}}}},style:{stroke:"currentColor",strokeWidth:4},...e},t.createElement("line",{x1:"21",x2:"3",y1:"12",y2:"12"}))}function kj({open:e,children:n}){return t.createElement(Tu,{initial:!1},e&&t.createElement(Wv.div,{variants:{unchecked:{scale:.5},checked:{scale:1}},initial:"unchecked",animate:"checked",exit:"unchecked",style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}},n))}function Bj(e){const{isIndeterminate:n,isChecked:r,...i}=e,a=n?Ij:Dj;return t.createElement(kj,{open:r||n},t.createElement(a,{...i}))}function Fj(e={}){const n=r_(e),{isDisabled:r,isReadOnly:i,isRequired:a,isInvalid:o,id:s,onBlur:l,onFocus:c,"aria-describedby":u}=n,{defaultChecked:d,isChecked:h,isFocusable:f,onChange:p,isIndeterminate:m,name:g,value:v,tabIndex:y,"aria-label":b,"aria-labelledby":x,"aria-invalid":_,...w}=e,M=k(w,["isDisabled","isReadOnly","isRequired","isInvalid","id","onBlur","onFocus","aria-describedby"]),S=tt(p),A=tt(l),E=tt(c),[C,T]=(0,t.useState)(!1),[R,P]=rt(),[L,D]=rt(),[I,B]=rt();(0,t.useEffect)((()=>Cj(T)),[]);const F=(0,t.useRef)(null),[N,O]=(0,t.useState)(!0),[z,U]=(0,t.useState)(!!d),[H,G]=it(h,z),V=(0,t.useCallback)((e=>{i||r?e.preventDefault():(H||U(G?e.target.checked:!!m||e.target.checked),null==S||S(e))}),[i,r,G,H,m,S]);et((()=>{F.current&&(F.current.indeterminate=Boolean(m))}),[m]),ct((()=>{r&&P.off()}),[r,P]),et((()=>{const e=F.current;(null==e?void 0:e.form)&&(e.form.onreset=()=>{U(!!d)})}),[]);const j=r&&!f,W=(0,t.useCallback)((e=>{" "===e.key&&B.on()}),[B]),X=(0,t.useCallback)((e=>{" "===e.key&&B.off()}),[B]);et((()=>{F.current&&F.current.checked!==G&&U(F.current.checked)}),[F.current]);const q=(0,t.useCallback)(((e={},t=null)=>({...e,ref:t,"data-active":ee(I),"data-hover":ee(L),"data-checked":ee(G),"data-focus":ee(R),"data-focus-visible":ee(R&&C),"data-indeterminate":ee(m),"data-disabled":ee(r),"data-invalid":ee(o),"data-readonly":ee(i),"aria-hidden":!0,onMouseDown:fe(e.onMouseDown,(e=>{R&&e.preventDefault(),B.on()})),onMouseUp:fe(e.onMouseUp,B.off),onMouseEnter:fe(e.onMouseEnter,D.on),onMouseLeave:fe(e.onMouseLeave,D.off)})),[I,G,r,R,C,L,m,o,i,B,D.off,D.on]),Y=(0,t.useCallback)(((e={},t=null)=>({...M,...e,ref:lr(t,(e=>{e&&O("LABEL"===e.tagName)})),onClick:fe(e.onClick,(()=>{var e;N||(null==(e=F.current)||e.click(),_e(F.current,{nextTick:!0}))})),"data-disabled":ee(r),"data-checked":ee(G),"data-invalid":ee(o)})),[M,r,G,o,N]),Z=(0,t.useCallback)(((e={},t=null)=>({...e,ref:lr(F,t),type:"checkbox",name:g,value:v,id:s,tabIndex:y,onChange:fe(e.onChange,V),onBlur:fe(e.onBlur,A,P.off),onFocus:fe(e.onFocus,E,P.on),onKeyDown:fe(e.onKeyDown,W),onKeyUp:fe(e.onKeyUp,X),required:a,checked:G,disabled:j,readOnly:i,"aria-label":b,"aria-labelledby":x,"aria-invalid":_?Boolean(_):o,"aria-describedby":u,"aria-disabled":r,style:Rc})),[g,v,s,V,P.off,P.on,A,E,W,X,a,G,j,i,b,x,_,o,u,r,y]),J=(0,t.useCallback)(((e={},t=null)=>({...e,ref:t,onMouseDown:fe(e.onMouseDown,Nj),onTouchStart:fe(e.onTouchStart,Nj),"data-disabled":ee(r),"data-checked":ee(G),"data-invalid":ee(o)})),[G,r,o]);return{state:{isInvalid:o,isFocused:R,isChecked:G,isActive:I,isHovered:L,isIndeterminate:m,isDisabled:r,isReadOnly:i,isRequired:a},getRootProps:Y,getCheckboxProps:q,getInputProps:Z,getLabelProps:J,htmlProps:M}}function Nj(e){e.preventDefault(),e.stopPropagation()}var Oj=va("span",{baseStyle:{display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"top",userSelect:"none",flexShrink:0}}),zj=va("label",{baseStyle:{cursor:"pointer",display:"inline-flex",alignItems:"center",verticalAlign:"top",position:"relative"}}),Uj=fa((function(e,n){const r=Rj(),i=ga("Checkbox",{...r,...e}),a=Wi(e),{spacing:o="0.5rem",className:s,children:l,iconColor:c,iconSize:u,icon:d=t.createElement(Bj,null),isChecked:h,isDisabled:f=(null==r?void 0:r.isDisabled),onChange:p,inputProps:m,...g}=a;let v=h;(null==r?void 0:r.value)&&a.value&&(v=r.value.includes(a.value));let y=p;(null==r?void 0:r.onChange)&&a.value&&(y=pe(r.onChange,p));const{state:b,getInputProps:x,getCheckboxProps:_,getLabelProps:w,getRootProps:M}=Fj({...g,isDisabled:f,isChecked:v,onChange:y}),S=(0,t.useMemo)((()=>({opacity:b.isChecked||b.isIndeterminate?1:0,transform:b.isChecked||b.isIndeterminate?"scale(1)":"scale(0.95)",fontSize:u,color:c,...i.icon})),[c,u,b.isChecked,b.isIndeterminate,i.icon]),A=(0,t.cloneElement)(d,{__css:S,isIndeterminate:b.isIndeterminate,isChecked:b.isChecked});return t.createElement(zj,{__css:i.container,className:ne("chakra-checkbox",s),...M()},t.createElement("input",{className:"chakra-checkbox__input",...x(m,n)}),t.createElement(Oj,{__css:i.control,className:"chakra-checkbox__control",..._()},A),l&&t.createElement(va.span,{className:"chakra-checkbox__label",...w(),__css:{marginStart:o,...i.label}},l))}));const Hj=function({toggleSelected:e,selected:t}){const{customers:n}=Yx((e=>({customers:e.mission.satellites.customers})),Zy),r=t=>{const{id:n}=t.target;e(n)};return(0,sj.jsxs)(by,{width:"50%",children:[(0,sj.jsx)("h4",{children:"Show data for"}),(0,sj.jsx)(Pj,{width:"100%",children:n.map((e=>(0,sj.jsx)(Uj,{onChange:r,id:e.id,align:"start",defaultChecked:t.current.satellites.includes(e),children:e.name},e.id)))})]})},Gj=[{key:"chargeState",name:"Charge State",selection:["chargeState","chargeStateNoBeams"]},{key:"netCurrent",name:"Net Current",selection:["netCurrent"]},{key:"consumption",name:"Consumption",selection:["consumption"]}],Vj=function(){const{customers:e,time:n,spacePowers:r,averages:i}=Yx((e=>({customers:e.mission.satellites.customers,spacePowers:e.mission.satellites.spacePowers,averages:e.mission.satellites.averages,time:e.mission.time})),Zy),a=(0,t.useRef)({satellites:e.slice(0,3),params:["chargeState","chargeStateNoBeams"]}),o=(0,t.useRef)(!1),s=(0,t.useRef)();return(0,t.useEffect)((()=>{a.current.satellites=e.slice(0,3),s.current=n,o.current=!0}),[e,n]),(0,sj.jsxs)(by,{children:[(0,sj.jsx)(mj,{selected:a,shouldUpdate:o,time:s}),(0,sj.jsxs)(ly,{width:"100%",justify:"flex-start",children:[(0,sj.jsx)(Hj,{toggleSelected:t=>{const n=e.find((e=>e.id===t));if(a.current.satellites.includes(n)){if(1===a.current.satellites.length)return;a.current.satellites=a.current.satellites.filter((e=>e.id!==n.id))}else a.current.satellites.push(n);o.current=!0},selected:a}),(0,sj.jsx)(oy,{width:"50%",children:(0,sj.jsxs)(by,{width:"50%",children:[(0,sj.jsx)("h4",{children:"Choose parameter"}),(0,sj.jsx)(u_,{onChange:e=>{a.current.params=Gj.find((t=>t.key===e.target.value)).selection,o.current=!0},children:Gj.map((e=>(0,sj.jsx)("option",{value:e.key,children:e.name},e.key)))})]})}),(0,sj.jsx)(iy,{width:"20%"})]})]})};var[jj,Wj]=cr({name:"StatStylesContext",errorMessage:"useStatStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Stat />\" "}),Xj=fa((function(e,n){const r=Wj();return t.createElement(va.dt,{ref:n,...e,className:ne("chakra-stat__label",e.className),__css:r.label})})),qj=fa((function(e,n){const r=Wj();return t.createElement(va.dd,{ref:n,...e,className:ne("chakra-stat__help-text",e.className),__css:r.helpText})})),Yj=fa((function(e,n){const r=Wj();return t.createElement(va.dd,{ref:n,...e,className:ne("chakra-stat__number",e.className),__css:{...r.number,fontFeatureSettings:"pnum",fontVariantNumeric:"proportional-nums"}})})),Zj=e=>t.createElement(Ec,{color:"red.400",...e},t.createElement("path",{fill:"currentColor",d:"M21,5H3C2.621,5,2.275,5.214,2.105,5.553C1.937,5.892,1.973,6.297,2.2,6.6l9,12 c0.188,0.252,0.485,0.4,0.8,0.4s0.611-0.148,0.8-0.4l9-12c0.228-0.303,0.264-0.708,0.095-1.047C21.725,5.214,21.379,5,21,5z"}));function Jj(e){return t.createElement(Ec,{color:"green.400",...e},t.createElement("path",{fill:"currentColor",d:"M12.8,5.4c-0.377-0.504-1.223-0.504-1.6,0l-9,12c-0.228,0.303-0.264,0.708-0.095,1.047 C2.275,18.786,2.621,19,3,19h18c0.379,0,0.725-0.214,0.895-0.553c0.169-0.339,0.133-0.744-0.095-1.047L12.8,5.4z"}))}function $j(e){const{type:n,"aria-label":r,...i}=e,a=Wj(),o="increase"===n?Jj:Zj,s=r||("increase"===n?"increased by":"decreased by");return t.createElement(t.Fragment,null,t.createElement(Pc,null,s),t.createElement(o,{"aria-hidden":!0,...i,__css:a.icon}))}var Kj=fa((function(e,n){const r=ga("Stat",e),i={position:"relative",flex:"1 1 0%",...r.container},{className:a,children:o,...s}=Wi(e);return t.createElement(jj,{value:r},t.createElement(va.div,{ref:n,...s,className:ne("chakra-stat",a),__css:i},t.createElement("dl",null,o)))})),Qj=fa((function(e,n){return t.createElement(va.div,{...e,ref:n,role:"group",className:ne("chakra-stat__group",e.className),__css:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",alignItems:"flex-start"}})}));const eW=[{key:"dischargeSaved",name:"Discharge Saved",getValue:e=>e.summary.dischargeSaved,format:e=>`${e.toFixed(2)}Ah`,getHelpText:(e,t)=>e.params?`${(e.summary.dischargeSaved/e.params.battery.capacity).toFixed(1)} full batteries`:`${(e.summary.dischargeSaved/t[0].battery.capacity).toFixed(1)} full batteriesd`},{key:"timeCharged",name:"Time spent charging",getValue:e=>e.summary.timeCharged,format:e=>`${e.toFixed(1)} minutes`,getHelpText:e=>{const t=Mx.SIM_LENGTH/864e5;return`${(100*e.summary.timeCharged/(60*t*60)).toFixed(1)}% of ${t} days`}}],tW=function(){const{customers:e,fleet:n}=Yx((e=>({customers:e.mission.satellites.customers,fleet:e.mission.satellites.fleet})),Zy),[r,i]=(0,t.useState)(e[0]);return(0,sj.jsxs)(by,{children:[(0,sj.jsx)("h3",{children:"Summary"}),(0,sj.jsx)(oy,{minWidth:"50%",children:(0,sj.jsxs)(u_,{onChange:t=>{"fleet"===t.target.value?i((()=>n)):i((()=>e.find((e=>e.id===t.target.value))))},children:[e.map((e=>(0,sj.jsx)("option",{value:e.id,children:e.name},e.id))),(0,sj.jsx)("option",{value:"fleet",children:"Fleet"})]})}),(0,sj.jsx)(Qj,{children:eW.map((t=>(0,sj.jsxs)(Kj,{m:5,width:"100%",children:[(0,sj.jsx)(Xj,{children:t.name}),(0,sj.jsx)(Yj,{children:t.format(t.getValue(r))}),(0,sj.jsx)(qj,{children:t.getHelpText(r,e)})]},t.key)))})]})},nW=function(){const{view:e}=Yx((e=>({view:e.view})),Zy);return(0,sj.jsxs)(sj.Fragment,{children:[(0,sj.jsx)(dy,{area:"performance",display:"performance"===e.name?"":"none",children:(0,sj.jsx)(Vj,{})}),(0,sj.jsx)(dy,{area:"summary",display:"performance"===e.name?"":"none",children:(0,sj.jsx)(tW,{})})]})};Tc({d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z",displayName:"CopyIcon"}),Tc({d:"M23.384,21.619,16.855,15.09a9.284,9.284,0,1,0-1.768,1.768l6.529,6.529a1.266,1.266,0,0,0,1.768,0A1.251,1.251,0,0,0,23.384,21.619ZM2.75,9.5a6.75,6.75,0,1,1,6.75,6.75A6.758,6.758,0,0,1,2.75,9.5Z",displayName:"SearchIcon"}),Tc({d:"M23.414,20.591l-4.645-4.645a10.256,10.256,0,1,0-2.828,2.829l4.645,4.644a2.025,2.025,0,0,0,2.828,0A2,2,0,0,0,23.414,20.591ZM10.25,3.005A7.25,7.25,0,1,1,3,10.255,7.258,7.258,0,0,1,10.25,3.005Z",displayName:"Search2Icon"}),Tc({d:"M21.4,13.7C20.6,13.9,19.8,14,19,14c-5,0-9-4-9-9c0-0.8,0.1-1.6,0.3-2.4c0.1-0.3,0-0.7-0.3-1 c-0.3-0.3-0.6-0.4-1-0.3C4.3,2.7,1,7.1,1,12c0,6.1,4.9,11,11,11c4.9,0,9.3-3.3,10.6-8.1c0.1-0.3,0-0.7-0.3-1 C22.1,13.7,21.7,13.6,21.4,13.7z",displayName:"MoonIcon"}),Tc({displayName:"SunIcon",path:t.createElement("g",{strokeLinejoin:"round",strokeLinecap:"round",strokeWidth:"2",fill:"none",stroke:"currentColor"},t.createElement("circle",{cx:"12",cy:"12",r:"5"}),t.createElement("path",{d:"M12 1v2"}),t.createElement("path",{d:"M12 21v2"}),t.createElement("path",{d:"M4.22 4.22l1.42 1.42"}),t.createElement("path",{d:"M18.36 18.36l1.42 1.42"}),t.createElement("path",{d:"M1 12h2"}),t.createElement("path",{d:"M21 12h2"}),t.createElement("path",{d:"M4.22 19.78l1.42-1.42"}),t.createElement("path",{d:"M18.36 5.64l1.42-1.42"}))});var rW=Tc({d:"M0,12a1.5,1.5,0,0,0,1.5,1.5h8.75a.25.25,0,0,1,.25.25V22.5a1.5,1.5,0,0,0,3,0V13.75a.25.25,0,0,1,.25-.25H22.5a1.5,1.5,0,0,0,0-3H13.75a.25.25,0,0,1-.25-.25V1.5a1.5,1.5,0,0,0-3,0v8.75a.25.25,0,0,1-.25.25H1.5A1.5,1.5,0,0,0,0,12Z",displayName:"AddIcon"}),iW=(Tc({displayName:"SmallAddIcon",viewBox:"0 0 20 20",path:t.createElement("path",{fill:"currentColor",d:"M14 9h-3V6c0-.55-.45-1-1-1s-1 .45-1 1v3H6c-.55 0-1 .45-1 1s.45 1 1 1h3v3c0 .55.45 1 1 1s1-.45 1-1v-3h3c.55 0 1-.45 1-1s-.45-1-1-1z",fillRule:"evenodd"})}),Tc({viewBox:"0 0 14 14",d:"M14,7.77 L14,6.17 L12.06,5.53 L11.61,4.44 L12.49,2.6 L11.36,1.47 L9.55,2.38 L8.46,1.93 L7.77,0.01 L6.17,0.01 L5.54,1.95 L4.43,2.4 L2.59,1.52 L1.46,2.65 L2.37,4.46 L1.92,5.55 L0,6.23 L0,7.82 L1.94,8.46 L2.39,9.55 L1.51,11.39 L2.64,12.52 L4.45,11.61 L5.54,12.06 L6.23,13.98 L7.82,13.98 L8.45,12.04 L9.56,11.59 L11.4,12.47 L12.53,11.34 L11.61,9.53 L12.08,8.44 L14,7.75 L14,7.77 Z M7,10 C5.34,10 4,8.66 4,7 C4,5.34 5.34,4 7,4 C8.66,4 10,5.34 10,7 C10,8.66 8.66,10 7,10 Z",displayName:"SettingsIcon"})),aW=(Tc({displayName:"CheckCircleIcon",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"}),Tc({d:"M19.5,9.5h-.75V6.75a6.75,6.75,0,0,0-13.5,0V9.5H4.5a2,2,0,0,0-2,2V22a2,2,0,0,0,2,2h15a2,2,0,0,0,2-2V11.5A2,2,0,0,0,19.5,9.5Zm-9.5,6a2,2,0,1,1,3,1.723V19.5a1,1,0,0,1-2,0V17.223A1.994,1.994,0,0,1,10,15.5ZM7.75,6.75a4.25,4.25,0,0,1,8.5,0V9a.5.5,0,0,1-.5.5H8.25a.5.5,0,0,1-.5-.5Z",displayName:"LockIcon"}),Tc({d:"M19.5,9.5h-.75V6.75A6.751,6.751,0,0,0,5.533,4.811a1.25,1.25,0,1,0,2.395.717A4.251,4.251,0,0,1,16.25,6.75V9a.5.5,0,0,1-.5.5H4.5a2,2,0,0,0-2,2V22a2,2,0,0,0,2,2h15a2,2,0,0,0,2-2V11.5A2,2,0,0,0,19.5,9.5Zm-9.5,6a2,2,0,1,1,3,1.723V19.5a1,1,0,0,1-2,0V17.223A1.994,1.994,0,0,1,10,15.5Z",displayName:"UnlockIcon"}),Tc({displayName:"ViewIcon",path:t.createElement("g",{fill:"currentColor"},t.createElement("path",{d:"M23.432,10.524C20.787,7.614,16.4,4.538,12,4.6,7.6,4.537,3.213,7.615.568,10.524a2.211,2.211,0,0,0,0,2.948C3.182,16.351,7.507,19.4,11.839,19.4h.308c4.347,0,8.671-3.049,11.288-5.929A2.21,2.21,0,0,0,23.432,10.524ZM7.4,12A4.6,4.6,0,1,1,12,16.6,4.6,4.6,0,0,1,7.4,12Z"}),t.createElement("circle",{cx:"12",cy:"12",r:"2"}))}),Tc({displayName:"ViewOffIcon",path:t.createElement("g",{fill:"currentColor"},t.createElement("path",{d:"M23.2,10.549a20.954,20.954,0,0,0-4.3-3.6l4-3.995a1,1,0,1,0-1.414-1.414l-.018.018a.737.737,0,0,1-.173.291l-19.5,19.5c-.008.007-.018.009-.026.017a1,1,0,0,0,1.631,1.088l4.146-4.146a11.26,11.26,0,0,0,4.31.939h.3c4.256,0,8.489-2.984,11.051-5.8A2.171,2.171,0,0,0,23.2,10.549ZM16.313,13.27a4.581,4.581,0,0,1-3,3.028,4.3,4.3,0,0,1-3.1-.19.253.253,0,0,1-.068-.407l5.56-5.559a.252.252,0,0,1,.407.067A4.3,4.3,0,0,1,16.313,13.27Z"}),t.createElement("path",{d:"M7.615,13.4a.244.244,0,0,0,.061-.24A4.315,4.315,0,0,1,7.5,12,4.5,4.5,0,0,1,12,7.5a4.276,4.276,0,0,1,1.16.173.244.244,0,0,0,.24-.062l1.941-1.942a.254.254,0,0,0-.1-.421A10.413,10.413,0,0,0,12,4.75C7.7,4.692,3.4,7.7.813,10.549a2.15,2.15,0,0,0-.007,2.9,21.209,21.209,0,0,0,3.438,3.03.256.256,0,0,0,.326-.029Z"}))}),Tc({d:"M11.2857,6.05714 L10.08571,4.85714 L7.85714,7.14786 L7.85714,1 L6.14286,1 L6.14286,7.14786 L3.91429,4.85714 L2.71429,6.05714 L7,10.42857 L11.2857,6.05714 Z M1,11.2857 L1,13 L13,13 L13,11.2857 L1,11.2857 Z",displayName:"DownloadIcon",viewBox:"0 0 14 14"}),Tc({displayName:"DeleteIcon",path:t.createElement("g",{fill:"currentColor"},t.createElement("path",{d:"M19.452 7.5H4.547a.5.5 0 00-.5.545l1.287 14.136A2 2 0 007.326 24h9.347a2 2 0 001.992-1.819L19.95 8.045a.5.5 0 00-.129-.382.5.5 0 00-.369-.163zm-9.2 13a.75.75 0 01-1.5 0v-9a.75.75 0 011.5 0zm5 0a.75.75 0 01-1.5 0v-9a.75.75 0 011.5 0zM22 4h-4.75a.25.25 0 01-.25-.25V2.5A2.5 2.5 0 0014.5 0h-5A2.5 2.5 0 007 2.5v1.25a.25.25 0 01-.25.25H2a1 1 0 000 2h20a1 1 0 000-2zM9 3.75V2.5a.5.5 0 01.5-.5h5a.5.5 0 01.5.5v1.25a.25.25 0 01-.25.25h-5.5A.25.25 0 019 3.75z"}))}),Tc({displayName:"RepeatIcon",path:t.createElement("g",{fill:"currentColor"},t.createElement("path",{d:"M10.319,4.936a7.239,7.239,0,0,1,7.1,2.252,1.25,1.25,0,1,0,1.872-1.657A9.737,9.737,0,0,0,9.743,2.5,10.269,10.269,0,0,0,2.378,9.61a.249.249,0,0,1-.271.178l-1.033-.13A.491.491,0,0,0,.6,9.877a.5.5,0,0,0-.019.526l2.476,4.342a.5.5,0,0,0,.373.248.43.43,0,0,0,.062,0,.5.5,0,0,0,.359-.152l3.477-3.593a.5.5,0,0,0-.3-.844L5.15,10.172a.25.25,0,0,1-.2-.333A7.7,7.7,0,0,1,10.319,4.936Z"}),t.createElement("path",{d:"M23.406,14.1a.5.5,0,0,0,.015-.526l-2.5-4.329A.5.5,0,0,0,20.546,9a.489.489,0,0,0-.421.151l-3.456,3.614a.5.5,0,0,0,.3.842l1.848.221a.249.249,0,0,1,.183.117.253.253,0,0,1,.023.216,7.688,7.688,0,0,1-5.369,4.9,7.243,7.243,0,0,1-7.1-2.253,1.25,1.25,0,1,0-1.872,1.656,9.74,9.74,0,0,0,9.549,3.03,10.261,10.261,0,0,0,7.369-7.12.251.251,0,0,1,.27-.179l1.058.127a.422.422,0,0,0,.06,0A.5.5,0,0,0,23.406,14.1Z"}))}),Tc({displayName:"RepeatClockIcon",path:t.createElement("g",{fill:"currentColor"},t.createElement("path",{d:"M12.965,6a1,1,0,0,0-1,1v5.5a1,1,0,0,0,1,1h5a1,1,0,0,0,0-2h-3.75a.25.25,0,0,1-.25-.25V7A1,1,0,0,0,12.965,6Z"}),t.createElement("path",{d:"M12.567,1.258A10.822,10.822,0,0,0,2.818,8.4a.25.25,0,0,1-.271.163L.858,8.309a.514.514,0,0,0-.485.213.5.5,0,0,0-.021.53l2.679,4.7a.5.5,0,0,0,.786.107l3.77-3.746a.5.5,0,0,0-.279-.85L5.593,9.007a.25.25,0,0,1-.192-.35,8.259,8.259,0,1,1,7.866,11.59,1.25,1.25,0,0,0,.045,2.5h.047a10.751,10.751,0,1,0-.792-21.487Z"}))}),Tc({displayName:"EditIcon",path:t.createElement("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2"},t.createElement("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t.createElement("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"}))})),oW=(Tc({d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z",displayName:"ChevronLeftIcon"}),Tc({d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z",displayName:"ChevronRightIcon"}),Tc({displayName:"ChevronDownIcon",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})),sW=(Tc({d:"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z",displayName:"ChevronUpIcon"}),Tc({d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z",displayName:"ArrowBackIcon"}),Tc({d:"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z",displayName:"ArrowForwardIcon"}),Tc({d:"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z",displayName:"ArrowUpIcon"}),Tc({viewBox:"0 0 16 16",d:"M11.891 9.992a1 1 0 1 1 1.416 1.415l-4.3 4.3a1 1 0 0 1-1.414 0l-4.3-4.3A1 1 0 0 1 4.71 9.992l3.59 3.591 3.591-3.591zm0-3.984L8.3 2.417 4.709 6.008a1 1 0 0 1-1.416-1.415l4.3-4.3a1 1 0 0 1 1.414 0l4.3 4.3a1 1 0 1 1-1.416 1.415z",displayName:"ArrowUpDownIcon"}),Tc({d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z",displayName:"ArrowDownIcon"}),Tc({displayName:"ExternalLinkIcon",path:t.createElement("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2"},t.createElement("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),t.createElement("path",{d:"M15 3h6v6"}),t.createElement("path",{d:"M10 14L21 3"}))}),Tc({displayName:"LinkIcon",path:t.createElement("g",{fill:"currentColor"},t.createElement("path",{d:"M10.458,18.374,7.721,21.11a2.853,2.853,0,0,1-3.942,0l-.892-.891a2.787,2.787,0,0,1,0-3.941l5.8-5.8a2.789,2.789,0,0,1,3.942,0l.893.892A1,1,0,0,0,14.94,9.952l-.893-.892a4.791,4.791,0,0,0-6.771,0l-5.8,5.8a4.787,4.787,0,0,0,0,6.77l.892.891a4.785,4.785,0,0,0,6.771,0l2.736-2.735a1,1,0,1,0-1.414-1.415Z"}),t.createElement("path",{d:"M22.526,2.363l-.892-.892a4.8,4.8,0,0,0-6.77,0l-2.905,2.9a1,1,0,0,0,1.414,1.414l2.9-2.9a2.79,2.79,0,0,1,3.941,0l.893.893a2.786,2.786,0,0,1,0,3.942l-5.8,5.8a2.769,2.769,0,0,1-1.971.817h0a2.766,2.766,0,0,1-1.969-.816,1,1,0,1,0-1.415,1.412,4.751,4.751,0,0,0,3.384,1.4h0a4.752,4.752,0,0,0,3.385-1.4l5.8-5.8a4.786,4.786,0,0,0,0-6.771Z"}))}),Tc({displayName:"PlusSquareIcon",path:t.createElement("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2"},t.createElement("rect",{height:"18",width:"18",rx:"2",ry:"2",x:"3",y:"3"}),t.createElement("path",{d:"M12 8v8"}),t.createElement("path",{d:"M8 12h8"}))}),Tc({displayName:"CalendarIcon",viewBox:"0 0 14 14",d:"M10.8889,5.5 L3.11111,5.5 L3.11111,7.05556 L10.8889,7.05556 L10.8889,5.5 Z M12.4444,1.05556 L11.6667,1.05556 L11.6667,0 L10.1111,0 L10.1111,1.05556 L3.88889,1.05556 L3.88889,0 L2.33333,0 L2.33333,1.05556 L1.55556,1.05556 C0.692222,1.05556 0.00777777,1.75556 0.00777777,2.61111 L0,12.5 C0,13.3556 0.692222,14 1.55556,14 L12.4444,14 C13.3,14 14,13.3556 14,12.5 L14,2.61111 C14,1.75556 13.3,1.05556 12.4444,1.05556 Z M12.4444,12.5 L1.55556,12.5 L1.55556,3.94444 L12.4444,3.94444 L12.4444,12.5 Z M8.55556,8.61111 L3.11111,8.61111 L3.11111,10.1667 L8.55556,10.1667 L8.55556,8.61111 Z"}),Tc({d:"M0.913134,0.920639 C1.49851,0.331726 2.29348,0 3.12342,0 L10.8766,0 C11.7065,0 12.5015,0.331725 13.0869,0.920639 C13.6721,1.50939 14,2.30689 14,3.13746 L14,8.12943 C13.9962,8.51443 13.9059,8.97125 13.7629,9.32852 C13.6128,9.683 13.3552,10.0709 13.0869,10.3462 C12.813,10.6163 12.4265,10.8761 12.0734,11.0274 C11.7172,11.1716 11.2607,11.263 10.8766,11.2669 L10.1234,11.2669 L10.1234,12.5676 L10.1209,12.5676 C10.1204,12.793 10.0633,13.0791 9.97807,13.262 C9.8627,13.466 9.61158,13.7198 9.40818,13.8382 L9.40824,13.8383 C9.4077,13.8386 9.40716,13.8388 9.40661,13.8391 C9.40621,13.8393 9.4058,13.8396 9.40539,13.8398 L9.40535,13.8397 C9.22958,13.9254 8.94505,13.9951 8.75059,14 L8.74789,14 C8.35724,13.9963 7.98473,13.8383 7.71035,13.5617 L5.39553,11.2669 L3.12342,11.2669 C2.29348,11.2669 1.49851,10.9352 0.913134,10.3462 C0.644826,10.0709 0.387187,9.683 0.23711,9.32852 C0.0941235,8.97125 0.00379528,8.51443 0,8.12943 L0,3.13746 C0,2.30689 0.327915,1.50939 0.913134,0.920639 Z M3.12342,1.59494 C2.71959,1.59494 2.33133,1.75628 2.04431,2.04503 C1.75713,2.33395 1.59494,2.72681 1.59494,3.13746 L1.59494,8.12943 C1.59114,8.35901 1.62114,8.51076 1.71193,8.72129 C1.79563,8.9346 1.88065,9.06264 2.04431,9.22185 C2.33133,9.5106 2.71959,9.67195 3.12342,9.67195 L5.72383,9.67195 C5.93413,9.67195 6.13592,9.75502 6.28527,9.90308 L8.52848,12.1269 L8.52848,10.4694 C8.52848,10.029 8.88552,9.67195 9.32595,9.67195 L10.8766,9.67195 C11.1034,9.67583 11.2517,9.64614 11.4599,9.55518 C11.6712,9.47132 11.7976,9.38635 11.9557,9.22185 C12.1193,9.06264 12.2044,8.9346 12.2881,8.72129 C12.3789,8.51076 12.4089,8.35901 12.4051,8.12943 L12.4051,3.13746 C12.4051,2.72681 12.2429,2.33394 11.9557,2.04503 C11.6687,1.75628 11.2804,1.59494 10.8766,1.59494 L3.12342,1.59494 Z",displayName:"ChatIcon",viewBox:"0 0 14 14"}),Tc({displayName:"TimeIcon",path:t.createElement("g",{fill:"currentColor"},t.createElement("path",{d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm0,22A10,10,0,1,1,22,12,10.011,10.011,0,0,1,12,22Z"}),t.createElement("path",{d:"M17.134,15.81,12.5,11.561V6.5a1,1,0,0,0-2,0V12a1,1,0,0,0,.324.738l4.959,4.545a1.01,1.01,0,0,0,1.413-.061A1,1,0,0,0,17.134,15.81Z"}))}),Tc({displayName:"ArrowRightIcon",path:t.createElement("g",{fill:"currentColor"},t.createElement("path",{d:"M13.584,12a2.643,2.643,0,0,1-.775,1.875L3.268,23.416a1.768,1.768,0,0,1-2.5-2.5l8.739-8.739a.25.25,0,0,0,0-.354L.768,3.084a1.768,1.768,0,0,1,2.5-2.5l9.541,9.541A2.643,2.643,0,0,1,13.584,12Z"}),t.createElement("path",{d:"M23.75,12a2.643,2.643,0,0,1-.775,1.875l-9.541,9.541a1.768,1.768,0,0,1-2.5-2.5l8.739-8.739a.25.25,0,0,0,0-.354L10.934,3.084a1.768,1.768,0,0,1,2.5-2.5l9.541,9.541A2.643,2.643,0,0,1,23.75,12Z"}))}),Tc({displayName:"ArrowLeftIcon",path:t.createElement("g",{fill:"currentColor"},t.createElement("path",{d:"M10.416,12a2.643,2.643,0,0,1,.775-1.875L20.732.584a1.768,1.768,0,0,1,2.5,2.5l-8.739,8.739a.25.25,0,0,0,0,.354l8.739,8.739a1.768,1.768,0,0,1-2.5,2.5l-9.541-9.541A2.643,2.643,0,0,1,10.416,12Z"}),t.createElement("path",{d:"M.25,12a2.643,2.643,0,0,1,.775-1.875L10.566.584a1.768,1.768,0,0,1,2.5,2.5L4.327,11.823a.25.25,0,0,0,0,.354l8.739,8.739a1.768,1.768,0,0,1-2.5,2.5L1.025,13.875A2.643,2.643,0,0,1,.25,12Z"}))}),Tc({displayName:"AtSignIcon",d:"M12,.5A11.634,11.634,0,0,0,.262,12,11.634,11.634,0,0,0,12,23.5a11.836,11.836,0,0,0,6.624-2,1.25,1.25,0,1,0-1.393-2.076A9.34,9.34,0,0,1,12,21a9.132,9.132,0,0,1-9.238-9A9.132,9.132,0,0,1,12,3a9.132,9.132,0,0,1,9.238,9v.891a1.943,1.943,0,0,1-3.884,0V12A5.355,5.355,0,1,0,12,17.261a5.376,5.376,0,0,0,3.861-1.634,4.438,4.438,0,0,0,7.877-2.736V12A11.634,11.634,0,0,0,12,.5Zm0,14.261A2.763,2.763,0,1,1,14.854,12,2.812,2.812,0,0,1,12,14.761Z"}),Tc({displayName:"AttachmentIcon",d:"M21.843,3.455a6.961,6.961,0,0,0-9.846,0L1.619,13.832a5.128,5.128,0,0,0,7.252,7.252L17.3,12.653A3.293,3.293,0,1,0,12.646,8L7.457,13.184A1,1,0,1,0,8.871,14.6L14.06,9.409a1.294,1.294,0,0,1,1.829,1.83L7.457,19.67a3.128,3.128,0,0,1-4.424-4.424L13.411,4.869a4.962,4.962,0,1,1,7.018,7.018L12.646,19.67a1,1,0,1,0,1.414,1.414L21.843,13.3a6.96,6.96,0,0,0,0-9.846Z"}),Tc({displayName:"UpDownIcon",viewBox:"-1 -1 9 11",d:"M 3.5 0L 3.98809 -0.569442L 3.5 -0.987808L 3.01191 -0.569442L 3.5 0ZM 3.5 9L 3.01191 9.56944L 3.5 9.98781L 3.98809 9.56944L 3.5 9ZM 0.488094 3.56944L 3.98809 0.569442L 3.01191 -0.569442L -0.488094 2.43056L 0.488094 3.56944ZM 3.01191 0.569442L 6.51191 3.56944L 7.48809 2.43056L 3.98809 -0.569442L 3.01191 0.569442ZM -0.488094 6.56944L 3.01191 9.56944L 3.98809 8.43056L 0.488094 5.43056L -0.488094 6.56944ZM 3.98809 9.56944L 7.48809 6.56944L 6.51191 5.43056L 3.01191 8.43056L 3.98809 9.56944Z"}),Tc({d:"M23.555,8.729a1.505,1.505,0,0,0-1.406-.98H16.062a.5.5,0,0,1-.472-.334L13.405,1.222a1.5,1.5,0,0,0-2.81,0l-.005.016L8.41,7.415a.5.5,0,0,1-.471.334H1.85A1.5,1.5,0,0,0,.887,10.4l5.184,4.3a.5.5,0,0,1,.155.543L4.048,21.774a1.5,1.5,0,0,0,2.31,1.684l5.346-3.92a.5.5,0,0,1,.591,0l5.344,3.919a1.5,1.5,0,0,0,2.312-1.683l-2.178-6.535a.5.5,0,0,1,.155-.543l5.194-4.306A1.5,1.5,0,0,0,23.555,8.729Z",displayName:"StarIcon"}),Tc({displayName:"EmailIcon",path:t.createElement("g",{fill:"currentColor"},t.createElement("path",{d:"M11.114,14.556a1.252,1.252,0,0,0,1.768,0L22.568,4.87a.5.5,0,0,0-.281-.849A1.966,1.966,0,0,0,22,4H2a1.966,1.966,0,0,0-.289.021.5.5,0,0,0-.281.849Z"}),t.createElement("path",{d:"M23.888,5.832a.182.182,0,0,0-.2.039l-6.2,6.2a.251.251,0,0,0,0,.354l5.043,5.043a.75.75,0,1,1-1.06,1.061l-5.043-5.043a.25.25,0,0,0-.354,0l-2.129,2.129a2.75,2.75,0,0,1-3.888,0L7.926,13.488a.251.251,0,0,0-.354,0L2.529,18.531a.75.75,0,0,1-1.06-1.061l5.043-5.043a.251.251,0,0,0,0-.354l-6.2-6.2a.18.18,0,0,0-.2-.039A.182.182,0,0,0,0,6V18a2,2,0,0,0,2,2H22a2,2,0,0,0,2-2V6A.181.181,0,0,0,23.888,5.832Z"}))}),Tc({d:"M2.20731,0.0127209 C2.1105,-0.0066419 1.99432,-0.00664663 1.91687,0.032079 C0.871279,0.438698 0.212942,1.92964 0.0580392,2.95587 C-0.426031,6.28627 2.20731,9.17133 4.62766,11.0689 C6.77694,12.7534 10.9012,15.5223 13.3409,12.8503 C13.6507,12.5211 14.0186,12.037 13.9993,11.553 C13.9412,10.7397 13.186,10.1588 12.6051,9.71349 C12.1598,9.38432 11.2304,8.47427 10.6495,8.49363 C10.1267,8.51299 9.79754,9.05515 9.46837,9.38432 L8.88748,9.96521 C8.79067,10.062 7.55145,9.24878 7.41591,9.15197 C6.91248,8.8228 6.4284,8.45491 6.00242,8.04829 C5.57644,7.64167 5.18919,7.19632 4.86002,6.73161 C4.7632,6.59607 3.96933,5.41495 4.04678,5.31813 C4.04678,5.31813 4.72448,4.58234 4.91811,4.2919 C5.32473,3.67229 5.63453,3.18822 5.16982,2.45243 C4.99556,2.18135 4.78257,1.96836 4.55021,1.73601 C4.14359,1.34875 3.73698,0.942131 3.27227,0.612963 C3.02055,0.419335 2.59457,0.0708094 2.20731,0.0127209 Z",displayName:"PhoneIcon",viewBox:"0 0 14 14"}),Tc({viewBox:"0 0 10 10",d:"M3,2 C2.44771525,2 2,1.55228475 2,1 C2,0.44771525 2.44771525,0 3,0 C3.55228475,0 4,0.44771525 4,1 C4,1.55228475 3.55228475,2 3,2 Z M3,6 C2.44771525,6 2,5.55228475 2,5 C2,4.44771525 2.44771525,4 3,4 C3.55228475,4 4,4.44771525 4,5 C4,5.55228475 3.55228475,6 3,6 Z M3,10 C2.44771525,10 2,9.55228475 2,9 C2,8.44771525 2.44771525,8 3,8 C3.55228475,8 4,8.44771525 4,9 C4,9.55228475 3.55228475,10 3,10 Z M7,2 C6.44771525,2 6,1.55228475 6,1 C6,0.44771525 6.44771525,0 7,0 C7.55228475,0 8,0.44771525 8,1 C8,1.55228475 7.55228475,2 7,2 Z M7,6 C6.44771525,6 6,5.55228475 6,5 C6,4.44771525 6.44771525,4 7,4 C7.55228475,4 8,4.44771525 8,5 C8,5.55228475 7.55228475,6 7,6 Z M7,10 C6.44771525,10 6,9.55228475 6,9 C6,8.44771525 6.44771525,8 7,8 C7.55228475,8 8,8.44771525 8,9 C8,9.55228475 7.55228475,10 7,10 Z",displayName:"DragHandleIcon"}),Tc({displayName:"SpinnerIcon",path:t.createElement(t.Fragment,null,t.createElement("defs",null,t.createElement("linearGradient",{x1:"28.154%",y1:"63.74%",x2:"74.629%",y2:"17.783%",id:"a"},t.createElement("stop",{stopColor:"currentColor",offset:"0%"}),t.createElement("stop",{stopColor:"#fff",stopOpacity:"0",offset:"100%"}))),t.createElement("g",{transform:"translate(2)",fill:"none"},t.createElement("circle",{stroke:"url(#a)",strokeWidth:"4",cx:"10",cy:"12",r:"10"}),t.createElement("path",{d:"M10 2C4.477 2 0 6.477 0 12",stroke:"currentColor",strokeWidth:"4"}),t.createElement("rect",{fill:"currentColor",x:"8",width:"4",height:"4",rx:"8"})))}),Tc({displayName:"CloseIcon",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"})),lW=Tc({displayName:"SmallCloseIcon",viewBox:"0 0 16 16",path:t.createElement("path",{d:"M9.41 8l2.29-2.29c.19-.18.3-.43.3-.71a1.003 1.003 0 0 0-1.71-.71L8 6.59l-2.29-2.3a1.003 1.003 0 0 0-1.42 1.42L6.59 8 4.3 10.29c-.19.18-.3.43-.3.71a1.003 1.003 0 0 0 1.71.71L8 9.41l2.29 2.29c.18.19.43.3.71.3a1.003 1.003 0 0 0 .71-1.71L9.41 8z",fillRule:"evenodd",fill:"currentColor"})}),cW=(Tc({d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8 0-1.85.63-3.55 1.69-4.9L16.9 18.31C15.55 19.37 13.85 20 12 20zm6.31-3.1L7.1 5.69C8.45 4.63 10.15 4 12 4c4.42 0 8 3.58 8 8 0 1.85-.63 3.55-1.69 4.9z",displayName:"NotAllowedIcon"}),Tc({d:"M21,5H3C2.621,5,2.275,5.214,2.105,5.553C1.937,5.892,1.973,6.297,2.2,6.6l9,12 c0.188,0.252,0.485,0.4,0.8,0.4s0.611-0.148,0.8-0.4l9-12c0.228-0.303,0.264-0.708,0.095-1.047C21.725,5.214,21.379,5,21,5z",displayName:"TriangleDownIcon"}),Tc({d:"M12.8,5.4c-0.377-0.504-1.223-0.504-1.6,0l-9,12c-0.228,0.303-0.264,0.708-0.095,1.047 C2.275,18.786,2.621,19,3,19h18c0.379,0,0.725-0.214,0.895-0.553c0.169-0.339,0.133-0.744-0.095-1.047L12.8,5.4z",displayName:"TriangleUpIcon"}),Tc({displayName:"InfoOutlineIcon",path:t.createElement("g",{fill:"currentColor",stroke:"currentColor",strokeLinecap:"square",strokeWidth:"2"},t.createElement("circle",{cx:"12",cy:"12",fill:"none",r:"11",stroke:"currentColor"}),t.createElement("line",{fill:"none",x1:"11.959",x2:"11.959",y1:"11",y2:"17"}),t.createElement("circle",{cx:"11.959",cy:"7",r:"1",stroke:"none"}))}),Tc({displayName:"BellIcon",d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"}),Tc({d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"}),Tc({d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm0,19a1.5,1.5,0,1,1,1.5-1.5A1.5,1.5,0,0,1,12,19Zm1.6-6.08a1,1,0,0,0-.6.917,1,1,0,1,1-2,0,3,3,0,0,1,1.8-2.75A2,2,0,1,0,10,9.255a1,1,0,1,1-2,0,4,4,0,1,1,5.6,3.666Z",displayName:"QuestionIcon"}),Tc({displayName:"QuestionOutlineIcon",path:t.createElement("g",{stroke:"currentColor",strokeWidth:"1.5"},t.createElement("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),t.createElement("path",{fill:"none",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),t.createElement("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"}))}),Tc({d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z",displayName:"WarningIcon"}),Tc({displayName:"WarningTwoIcon",d:"M23.119,20,13.772,2.15h0a2,2,0,0,0-3.543,0L.881,20a2,2,0,0,0,1.772,2.928H21.347A2,2,0,0,0,23.119,20ZM11,8.423a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Zm1.05,11.51h-.028a1.528,1.528,0,0,1-1.522-1.47,1.476,1.476,0,0,1,1.448-1.53h.028A1.527,1.527,0,0,1,13.5,18.4,1.475,1.475,0,0,1,12.05,19.933Z"}),Tc({viewBox:"0 0 14 14",path:t.createElement("g",{fill:"currentColor"},t.createElement("polygon",{points:"5.5 11.9993304 14 3.49933039 12.5 2 5.5 8.99933039 1.5 4.9968652 0 6.49933039"}))}));function uW(e){const t=e.target,{tagName:n,isContentEditable:r}=t;return"INPUT"!==n&&"TEXTAREA"!==n&&!0!==r}function dW(e={}){const{ref:n,isDisabled:r,isFocusable:i,clickOnEnter:a=!0,clickOnSpace:o=!0,onMouseDown:s,onMouseUp:l,onClick:c,onKeyDown:u,onKeyUp:d,tabIndex:h,onMouseOver:f,onMouseLeave:p,...m}=e,[g,v]=(0,t.useState)(!0),[y,b]=(0,t.useState)(!1),x=function(){const e=(0,t.useRef)(new Map),n=e.current,r=(0,t.useCallback)(((t,n,r,i)=>{e.current.set(r,{type:n,el:t,options:i}),t.addEventListener(n,r,i)}),[]),i=(0,t.useCallback)(((t,n,r,i)=>{t.removeEventListener(n,r,i),e.current.delete(r)}),[]);return(0,t.useEffect)((()=>()=>{n.forEach(((e,t)=>{i(e.el,e.type,t,e.options)}))}),[i,n]),{add:r,remove:i}}(),_=g?h:h||0,w=r&&!i,M=(0,t.useCallback)((e=>{if(r)return e.stopPropagation(),void e.preventDefault();e.currentTarget.focus(),null==c||c(e)}),[r,c]),S=(0,t.useCallback)((e=>{y&&uW(e)&&(e.preventDefault(),e.stopPropagation(),b(!1),x.remove(document,"keyup",S,!1))}),[y,x]),A=(0,t.useCallback)((e=>{if(null==u||u(e),r||e.defaultPrevented||e.metaKey)return;if(!uW(e.nativeEvent)||g)return;const t=a&&"Enter"===e.key;o&&" "===e.key&&(e.preventDefault(),b(!0)),t&&(e.preventDefault(),e.currentTarget.click()),x.add(document,"keyup",S,!1)}),[r,g,u,a,o,x,S]),E=(0,t.useCallback)((e=>{null==d||d(e),r||e.defaultPrevented||e.metaKey||uW(e.nativeEvent)&&!g&&o&&" "===e.key&&(e.preventDefault(),b(!1),e.currentTarget.click())}),[o,g,r,d]),C=(0,t.useCallback)((e=>{0===e.button&&(b(!1),x.remove(document,"mouseup",C,!1))}),[x]),T=(0,t.useCallback)((e=>{if(!oe(e)){if(r)return e.stopPropagation(),void e.preventDefault();g||b(!0),e.currentTarget.focus({preventScroll:!0}),x.add(document,"mouseup",C,!1),null==s||s(e)}}),[r,g,s,x,C]),R=(0,t.useCallback)((e=>{oe(e)||(g||b(!1),null==l||l(e))}),[l,g]),P=(0,t.useCallback)((e=>{r?e.preventDefault():null==f||f(e)}),[r,f]),L=(0,t.useCallback)((e=>{y&&(e.preventDefault(),b(!1)),null==p||p(e)}),[y,p]),D=lr(n,(e=>{e&&"BUTTON"!==e.tagName&&v(!1)}));return g?{...m,ref:D,type:"button","aria-disabled":w?void 0:r,disabled:w,onClick:M,onMouseDown:s,onMouseUp:l,onKeyUp:d,onKeyDown:u,onMouseOver:f,onMouseLeave:p}:{...m,ref:D,role:"button","data-active":ee(y),"aria-disabled":r?"true":void 0,tabIndex:w?void 0:_,onClick:M,onMouseDown:T,onMouseUp:R,onKeyUp:E,onKeyDown:A,onMouseOver:P,onMouseLeave:L}}function hW(e){return e.sort(((e,t)=>{const n=e.compareDocumentPosition(t);if(n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(n&Node.DOCUMENT_POSITION_DISCONNECTED||n&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0}))}function fW(e,t,n){let r=e+1;return n&&r>=t&&(r=0),r}function pW(e,t,n){let r=e-1;return n&&r<0&&(r=t),r}Tc({displayName:"MinusIcon",path:t.createElement("g",{fill:"currentColor"},t.createElement("rect",{height:"4",width:"20",x:"2",y:"10"}))}),Tc({displayName:"HamburgerIcon",viewBox:"0 0 24 24",d:"M 3 5 A 1.0001 1.0001 0 1 0 3 7 L 21 7 A 1.0001 1.0001 0 1 0 21 5 L 3 5 z M 3 11 A 1.0001 1.0001 0 1 0 3 13 L 21 13 A 1.0001 1.0001 0 1 0 21 11 L 3 11 z M 3 17 A 1.0001 1.0001 0 1 0 3 19 L 21 19 A 1.0001 1.0001 0 1 0 21 17 L 3 17 z"});var mW="undefined"!=typeof window?t.useLayoutEffect:t.useEffect;var[gW,vW]=cr({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"});function yW(){return[gW,()=>vW(),()=>function(){const e=(0,t.useRef)(new class{descendants=new Map;register=e=>{var t;if(null!=e)return"object"==typeof(t=e)&&"nodeType"in t&&t.nodeType===Node.ELEMENT_NODE?this.registerNode(e):t=>{this.registerNode(t,e)}};unregister=e=>{this.descendants.delete(e);const t=hW(Array.from(this.descendants.keys()));this.assignIndex(t)};destroy=()=>{this.descendants.clear()};assignIndex=e=>{this.descendants.forEach((t=>{const n=e.indexOf(t.node);t.index=n,t.node.dataset.index=t.index.toString()}))};count=()=>this.descendants.size;enabledCount=()=>this.enabledValues().length;values=()=>Array.from(this.descendants.values()).sort(((e,t)=>e.index-t.index));enabledValues=()=>this.values().filter((e=>!e.disabled));item=e=>{if(0!==this.count())return this.values()[e]};enabledItem=e=>{if(0!==this.enabledCount())return this.enabledValues()[e]};first=()=>this.item(0);firstEnabled=()=>this.enabledItem(0);last=()=>this.item(this.descendants.size-1);lastEnabled=()=>{const e=this.enabledValues().length-1;return this.enabledItem(e)};indexOf=e=>{var t;return e?(null==(t=this.descendants.get(e))?void 0:t.index)??-1:-1};enabledIndexOf=e=>null==e?-1:this.enabledValues().findIndex((t=>t.node.isSameNode(e)));next=(e,t=!0)=>{const n=fW(e,this.count(),t);return this.item(n)};nextEnabled=(e,t=!0)=>{const n=this.item(e);if(!n)return;const r=fW(this.enabledIndexOf(n.node),this.enabledCount(),t);return this.enabledItem(r)};prev=(e,t=!0)=>{const n=pW(e,this.count()-1,t);return this.item(n)};prevEnabled=(e,t=!0)=>{const n=this.item(e);if(!n)return;const r=pW(this.enabledIndexOf(n.node),this.enabledCount()-1,t);return this.enabledItem(r)};registerNode=(e,t)=>{if(!e||this.descendants.has(e))return;const n=hW(Array.from(this.descendants.keys()).concat(e));(null==t?void 0:t.disabled)&&(t.disabled=!!t.disabled);const r={node:e,index:-1,...t};this.descendants.set(e,r),this.assignIndex(n)}});return mW((()=>()=>e.current.destroy())),e.current}(),e=>function(e){const n=vW(),[r,i]=(0,t.useState)(-1),a=(0,t.useRef)(null);mW((()=>()=>{a.current&&n.unregister(a.current)}),[]),mW((()=>{if(!a.current)return;const e=Number(a.current.dataset.index);r==e||Number.isNaN(e)||i(e)}));const o=e?n.register(e):n.register;return{descendants:n,index:r,enabledIndex:n.enabledIndexOf(a.current),register:lr(o,a)}}(e)]}function bW(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function xW(e){return e instanceof bW(e).Element||e instanceof Element}function _W(e){return e instanceof bW(e).HTMLElement||e instanceof HTMLElement}function wW(e){return"undefined"!=typeof ShadowRoot&&(e instanceof bW(e).ShadowRoot||e instanceof ShadowRoot)}var MW=Math.max,SW=Math.min,AW=Math.round;function EW(e,t){void 0===t&&(t=!1);var n=e.getBoundingClientRect(),r=1,i=1;if(_W(e)&&t){var a=e.offsetHeight,o=e.offsetWidth;o>0&&(r=AW(n.width)/o||1),a>0&&(i=AW(n.height)/a||1)}return{width:n.width/r,height:n.height/i,top:n.top/i,right:n.right/r,bottom:n.bottom/i,left:n.left/r,x:n.left/r,y:n.top/i}}function CW(e){var t=bW(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function TW(e){return e?(e.nodeName||"").toLowerCase():null}function RW(e){return((xW(e)?e.ownerDocument:e.document)||window.document).documentElement}function PW(e){return EW(RW(e)).left+CW(e).scrollLeft}function LW(e){return bW(e).getComputedStyle(e)}function DW(e){var t=LW(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function IW(e,t,n){void 0===n&&(n=!1);var r=_W(t),i=_W(t)&&function(e){var t=e.getBoundingClientRect(),n=AW(t.width)/e.offsetWidth||1,r=AW(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),a=RW(t),o=EW(e,i),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&(("body"!==TW(t)||DW(a))&&(s=function(e){return e!==bW(e)&&_W(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:CW(e);var t}(t)),_W(t)?((l=EW(t,!0)).x+=t.clientLeft,l.y+=t.clientTop):a&&(l.x=PW(a))),{x:o.left+s.scrollLeft-l.x,y:o.top+s.scrollTop-l.y,width:o.width,height:o.height}}function kW(e){var t=EW(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function BW(e){return"html"===TW(e)?e:e.assignedSlot||e.parentNode||(wW(e)?e.host:null)||RW(e)}function FW(e){return["html","body","#document"].indexOf(TW(e))>=0?e.ownerDocument.body:_W(e)&&DW(e)?e:FW(BW(e))}function NW(e,t){var n;void 0===t&&(t=[]);var r=FW(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),a=bW(r),o=i?[a].concat(a.visualViewport||[],DW(r)?r:[]):r,s=t.concat(o);return i?s:s.concat(NW(BW(o)))}function OW(e){return["table","td","th"].indexOf(TW(e))>=0}function zW(e){return _W(e)&&"fixed"!==LW(e).position?e.offsetParent:null}function UW(e){for(var t=bW(e),n=zW(e);n&&OW(n)&&"static"===LW(n).position;)n=zW(n);return n&&("html"===TW(n)||"body"===TW(n)&&"static"===LW(n).position)?t:n||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&_W(e)&&"fixed"===LW(e).position)return null;var n=BW(e);for(wW(n)&&(n=n.host);_W(n)&&["html","body"].indexOf(TW(n))<0;){var r=LW(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}var HW="top",GW="bottom",VW="right",jW="left",WW="auto",XW=[HW,GW,VW,jW],qW="start",YW="end",ZW="viewport",JW="popper",$W=XW.reduce((function(e,t){return e.concat([t+"-"+qW,t+"-"+YW])}),[]),KW=[].concat(XW,[WW]).reduce((function(e,t){return e.concat([t,t+"-"+qW,t+"-"+YW])}),[]),QW=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function eX(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}var tX={placement:"bottom",modifiers:[],strategy:"absolute"};function nX(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function rX(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,a=void 0===i?tX:i;return function(e,t,n){void 0===n&&(n=a);var i,o,s={placement:"bottom",orderedModifiers:[],options:Object.assign({},tX,a),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],c=!1,u={state:s,setOptions:function(n){var i="function"==typeof n?n(s.options):n;d(),s.options=Object.assign({},a,s.options,i),s.scrollParents={reference:xW(e)?NW(e):e.contextElement?NW(e.contextElement):[],popper:NW(t)};var o,c,h=function(e){var t=eX(e);return QW.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}((o=[].concat(r,s.options.modifiers),c=o.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{}),Object.keys(c).map((function(e){return c[e]}))));return s.orderedModifiers=h.filter((function(e){return e.enabled})),s.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,i=e.effect;if("function"==typeof i){var a=i({state:s,name:t,instance:u,options:r});l.push(a||function(){})}})),u.update()},forceUpdate:function(){if(!c){var e=s.elements,t=e.reference,n=e.popper;if(nX(t,n)){s.rects={reference:IW(t,UW(n),"fixed"===s.options.strategy),popper:kW(n)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach((function(e){return s.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<s.orderedModifiers.length;r++)if(!0!==s.reset){var i=s.orderedModifiers[r],a=i.fn,o=i.options,l=void 0===o?{}:o,d=i.name;"function"==typeof a&&(s=a({state:s,options:l,name:d,instance:u})||s)}else s.reset=!1,r=-1}}},update:(i=function(){return new Promise((function(e){u.forceUpdate(),e(s)}))},function(){return o||(o=new Promise((function(e){Promise.resolve().then((function(){o=void 0,e(i())}))}))),o}),destroy:function(){d(),c=!0}};if(!nX(e,t))return u;function d(){l.forEach((function(e){return e()})),l=[]}return u.setOptions(n).then((function(e){!c&&n.onFirstUpdate&&n.onFirstUpdate(e)})),u}}var iX={passive:!0};const aX={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,a=void 0===i||i,o=r.resize,s=void 0===o||o,l=bW(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&c.forEach((function(e){e.addEventListener("scroll",n.update,iX)})),s&&l.addEventListener("resize",n.update,iX),function(){a&&c.forEach((function(e){e.removeEventListener("scroll",n.update,iX)})),s&&l.removeEventListener("resize",n.update,iX)}},data:{}};function oX(e){return e.split("-")[0]}function sX(e){return e.split("-")[1]}function lX(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function cX(e){var t,n=e.reference,r=e.element,i=e.placement,a=i?oX(i):null,o=i?sX(i):null,s=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(a){case HW:t={x:s,y:n.y-r.height};break;case GW:t={x:s,y:n.y+n.height};break;case VW:t={x:n.x+n.width,y:l};break;case jW:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var c=a?lX(a):null;if(null!=c){var u="y"===c?"height":"width";switch(o){case qW:t[c]=t[c]-(n[u]/2-r[u]/2);break;case YW:t[c]=t[c]+(n[u]/2-r[u]/2)}}return t}const uX={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=cX({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}};var dX={top:"auto",right:"auto",bottom:"auto",left:"auto"};function hX(e){var t,n=e.popper,r=e.popperRect,i=e.placement,a=e.variation,o=e.offsets,s=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,d=e.isFixed,h=o.x,f=void 0===h?0:h,p=o.y,m=void 0===p?0:p,g="function"==typeof u?u({x:f,y:m}):{x:f,y:m};f=g.x,m=g.y;var v=o.hasOwnProperty("x"),y=o.hasOwnProperty("y"),b=jW,x=HW,_=window;if(c){var w=UW(n),M="clientHeight",S="clientWidth";w===bW(n)&&"static"!==LW(w=RW(n)).position&&"absolute"===s&&(M="scrollHeight",S="scrollWidth"),(i===HW||(i===jW||i===VW)&&a===YW)&&(x=GW,m-=(d&&w===_&&_.visualViewport?_.visualViewport.height:w[M])-r.height,m*=l?1:-1),i!==jW&&(i!==HW&&i!==GW||a!==YW)||(b=VW,f-=(d&&w===_&&_.visualViewport?_.visualViewport.width:w[S])-r.width,f*=l?1:-1)}var A,E=Object.assign({position:s},c&&dX),C=!0===u?function(e){var t=e.x,n=e.y,r=window.devicePixelRatio||1;return{x:AW(t*r)/r||0,y:AW(n*r)/r||0}}({x:f,y:m}):{x:f,y:m};return f=C.x,m=C.y,l?Object.assign({},E,((A={})[x]=y?"0":"",A[b]=v?"0":"",A.transform=(_.devicePixelRatio||1)<=1?"translate("+f+"px, "+m+"px)":"translate3d("+f+"px, "+m+"px, 0)",A)):Object.assign({},E,((t={})[x]=y?m+"px":"",t[b]=v?f+"px":"",t.transform="",t))}const fX={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,a=n.adaptive,o=void 0===a||a,s=n.roundOffsets,l=void 0===s||s,c={placement:oX(t.placement),variation:sX(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,hX(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,hX(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},pX={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];_W(i)&&TW(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],i=t.attributes[e]||{},a=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});_W(r)&&TW(r)&&(Object.assign(r.style,a),Object.keys(i).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]},mX={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,a=void 0===i?[0,0]:i,o=KW.reduce((function(e,n){return e[n]=function(e,t,n){var r=oX(e),i=[jW,HW].indexOf(r)>=0?-1:1,a="function"==typeof n?n(Object.assign({},t,{placement:e})):n,o=a[0],s=a[1];return o=o||0,s=(s||0)*i,[jW,VW].indexOf(r)>=0?{x:s,y:o}:{x:o,y:s}}(n,t.rects,a),e}),{}),s=o[t.placement],l=s.x,c=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=o}};var gX={left:"right",right:"left",bottom:"top",top:"bottom"};function vX(e){return e.replace(/left|right|bottom|top/g,(function(e){return gX[e]}))}var yX={start:"end",end:"start"};function bX(e){return e.replace(/start|end/g,(function(e){return yX[e]}))}function xX(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&wW(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function _X(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function wX(e,t){return t===ZW?_X(function(e){var t=bW(e),n=RW(e),r=t.visualViewport,i=n.clientWidth,a=n.clientHeight,o=0,s=0;return r&&(i=r.width,a=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=r.offsetLeft,s=r.offsetTop)),{width:i,height:a,x:o+PW(e),y:s}}(e)):xW(t)?function(e){var t=EW(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):_X(function(e){var t,n=RW(e),r=CW(e),i=null==(t=e.ownerDocument)?void 0:t.body,a=MW(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=MW(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+PW(e),l=-r.scrollTop;return"rtl"===LW(i||n).direction&&(s+=MW(n.clientWidth,i?i.clientWidth:0)-a),{width:a,height:o,x:s,y:l}}(RW(e)))}function MX(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function SX(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function AX(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,a=n.boundary,o=void 0===a?"clippingParents":a,s=n.rootBoundary,l=void 0===s?ZW:s,c=n.elementContext,u=void 0===c?JW:c,d=n.altBoundary,h=void 0!==d&&d,f=n.padding,p=void 0===f?0:f,m=MX("number"!=typeof p?p:SX(p,XW)),g=u===JW?"reference":JW,v=e.rects.popper,y=e.elements[h?g:u],b=function(e,t,n){var r="clippingParents"===t?function(e){var t=NW(BW(e)),n=["absolute","fixed"].indexOf(LW(e).position)>=0&&_W(e)?UW(e):e;return xW(n)?t.filter((function(e){return xW(e)&&xX(e,n)&&"body"!==TW(e)})):[]}(e):[].concat(t),i=[].concat(r,[n]),a=i[0],o=i.reduce((function(t,n){var r=wX(e,n);return t.top=MW(r.top,t.top),t.right=SW(r.right,t.right),t.bottom=SW(r.bottom,t.bottom),t.left=MW(r.left,t.left),t}),wX(e,a));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}(xW(y)?y:y.contextElement||RW(e.elements.popper),o,l),x=EW(e.elements.reference),_=cX({reference:x,element:v,strategy:"absolute",placement:i}),w=_X(Object.assign({},v,_)),M=u===JW?w:x,S={top:b.top-M.top+m.top,bottom:M.bottom-b.bottom+m.bottom,left:b.left-M.left+m.left,right:M.right-b.right+m.right},A=e.modifiersData.offset;if(u===JW&&A){var E=A[i];Object.keys(S).forEach((function(e){var t=[VW,GW].indexOf(e)>=0?1:-1,n=[HW,GW].indexOf(e)>=0?"y":"x";S[e]+=E[n]*t}))}return S}const EX={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,a=void 0===i||i,o=n.altAxis,s=void 0===o||o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,f=n.flipVariations,p=void 0===f||f,m=n.allowedAutoPlacements,g=t.options.placement,v=oX(g),y=l||(v!==g&&p?function(e){if(oX(e)===WW)return[];var t=vX(e);return[bX(e),t,bX(t)]}(g):[vX(g)]),b=[g].concat(y).reduce((function(e,n){return e.concat(oX(n)===WW?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,a=n.rootBoundary,o=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?KW:l,u=sX(r),d=u?s?$W:$W.filter((function(e){return sX(e)===u})):XW,h=d.filter((function(e){return c.indexOf(e)>=0}));0===h.length&&(h=d);var f=h.reduce((function(t,n){return t[n]=AX(e,{placement:n,boundary:i,rootBoundary:a,padding:o})[oX(n)],t}),{});return Object.keys(f).sort((function(e,t){return f[e]-f[t]}))}(t,{placement:n,boundary:u,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:m}):n)}),[]),x=t.rects.reference,_=t.rects.popper,w=new Map,M=!0,S=b[0],A=0;A<b.length;A++){var E=b[A],C=oX(E),T=sX(E)===qW,R=[HW,GW].indexOf(C)>=0,P=R?"width":"height",L=AX(t,{placement:E,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),D=R?T?VW:jW:T?GW:HW;x[P]>_[P]&&(D=vX(D));var I=vX(D),k=[];if(a&&k.push(L[C]<=0),s&&k.push(L[D]<=0,L[I]<=0),k.every((function(e){return e}))){S=E,M=!1;break}w.set(E,k)}if(M)for(var B=function(e){var t=b.find((function(t){var n=w.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return S=t,"break"},F=p?3:1;F>0&&"break"!==B(F);F--);t.placement!==S&&(t.modifiersData[r]._skip=!0,t.placement=S,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function CX(e,t,n){return MW(e,SW(t,n))}const TX={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,a=void 0===i||i,o=n.altAxis,s=void 0!==o&&o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,h=n.tether,f=void 0===h||h,p=n.tetherOffset,m=void 0===p?0:p,g=AX(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),v=oX(t.placement),y=sX(t.placement),b=!y,x=lX(v),_="x"===x?"y":"x",w=t.modifiersData.popperOffsets,M=t.rects.reference,S=t.rects.popper,A="function"==typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,E="number"==typeof A?{mainAxis:A,altAxis:A}:Object.assign({mainAxis:0,altAxis:0},A),C=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,T={x:0,y:0};if(w){if(a){var R,P="y"===x?HW:jW,L="y"===x?GW:VW,D="y"===x?"height":"width",I=w[x],k=I+g[P],B=I-g[L],F=f?-S[D]/2:0,N=y===qW?M[D]:S[D],O=y===qW?-S[D]:-M[D],z=t.elements.arrow,U=f&&z?kW(z):{width:0,height:0},H=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},G=H[P],V=H[L],j=CX(0,M[D],U[D]),W=b?M[D]/2-F-j-G-E.mainAxis:N-j-G-E.mainAxis,X=b?-M[D]/2+F+j+V+E.mainAxis:O+j+V+E.mainAxis,q=t.elements.arrow&&UW(t.elements.arrow),Y=q?"y"===x?q.clientTop||0:q.clientLeft||0:0,Z=null!=(R=null==C?void 0:C[x])?R:0,J=I+X-Z,$=CX(f?SW(k,I+W-Z-Y):k,I,f?MW(B,J):B);w[x]=$,T[x]=$-I}if(s){var K,Q="x"===x?HW:jW,ee="x"===x?GW:VW,te=w[_],ne="y"===_?"height":"width",re=te+g[Q],ie=te-g[ee],ae=-1!==[HW,jW].indexOf(v),oe=null!=(K=null==C?void 0:C[_])?K:0,se=ae?re:te-M[ne]-S[ne]-oe+E.altAxis,le=ae?te+M[ne]+S[ne]-oe-E.altAxis:ie,ce=f&&ae?function(e,t,n){var r=CX(e,t,n);return r>n?n:r}(se,te,le):CX(f?se:re,te,f?le:ie);w[_]=ce,T[_]=ce-te}t.modifiersData[r]=T}},requiresIfExists:["offset"]},RX={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,a=n.elements.arrow,o=n.modifiersData.popperOffsets,s=oX(n.placement),l=lX(s),c=[jW,VW].indexOf(s)>=0?"height":"width";if(a&&o){var u=function(e,t){return MX("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:SX(e,XW))}(i.padding,n),d=kW(a),h="y"===l?HW:jW,f="y"===l?GW:VW,p=n.rects.reference[c]+n.rects.reference[l]-o[l]-n.rects.popper[c],m=o[l]-n.rects.reference[l],g=UW(a),v=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,y=p/2-m/2,b=u[h],x=v-d[c]-u[f],_=v/2-d[c]/2+y,w=CX(b,_,x),M=l;n.modifiersData[r]=((t={})[M]=w,t.centerOffset=w-_,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&xX(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function PX(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function LX(e){return[HW,VW,GW,jW].some((function(t){return e[t]>=0}))}const DX={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,a=t.modifiersData.preventOverflow,o=AX(t,{elementContext:"reference"}),s=AX(t,{altBoundary:!0}),l=PX(o,r),c=PX(s,i,a),u=LX(l),d=LX(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}};var IX=rX({defaultModifiers:[aX,uX,fX,pX,mX,EX,TX,RX,DX]}),kX=(e,t)=>({var:e,varRef:t?`var(${e}, ${t})`:`var(${e})`}),BX={arrowShadowColor:kX("--popper-arrow-shadow-color"),arrowSize:kX("--popper-arrow-size","8px"),arrowSizeHalf:kX("--popper-arrow-size-half"),arrowBg:kX("--popper-arrow-bg"),transformOrigin:kX("--popper-transform-origin"),arrowOffset:kX("--popper-arrow-offset")},FX={top:"bottom center","top-start":"bottom left","top-end":"bottom right",bottom:"top center","bottom-start":"top left","bottom-end":"top right",left:"right center","left-start":"right top","left-end":"right bottom",right:"left center","right-start":"left top","right-end":"left bottom"},NX={scroll:!0,resize:!0};function OX(e){let t;return t="object"==typeof e?{enabled:!0,options:{...NX,...e}}:{enabled:e,options:NX},t}var zX={name:"matchWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:({state:e})=>{e.styles.popper.width=`${e.rects.reference.width}px`},effect:({state:e})=>()=>{const t=e.elements.reference;e.elements.popper.style.width=`${t.offsetWidth}px`}},UX={name:"transformOrigin",enabled:!0,phase:"write",fn:({state:e})=>{HX(e)},effect:({state:e})=>()=>{HX(e)}},HX=e=>{var t;e.elements.popper.style.setProperty(BX.transformOrigin.var,(t=e.placement,FX[t]))},GX={name:"positionArrow",enabled:!0,phase:"afterWrite",fn:({state:e})=>{VX(e)}},VX=e=>{var t;if(!e.placement)return;const n=jX(e.placement);if((null==(t=e.elements)?void 0:t.arrow)&&n){Object.assign(e.elements.arrow.style,{[n.property]:n.value,width:BX.arrowSize.varRef,height:BX.arrowSize.varRef,zIndex:-1});const t={[BX.arrowSizeHalf.var]:`calc(${BX.arrowSize.varRef} / 2)`,[BX.arrowOffset.var]:`calc(${BX.arrowSizeHalf.varRef} * -1)`};for(const n in t)e.elements.arrow.style.setProperty(n,t[n])}},jX=e=>e.startsWith("top")?{property:"bottom",value:BX.arrowOffset.varRef}:e.startsWith("bottom")?{property:"top",value:BX.arrowOffset.varRef}:e.startsWith("left")?{property:"right",value:BX.arrowOffset.varRef}:e.startsWith("right")?{property:"left",value:BX.arrowOffset.varRef}:void 0,WX={name:"innerArrow",enabled:!0,phase:"main",requires:["arrow"],fn:({state:e})=>{XX(e)},effect:({state:e})=>()=>{XX(e)}},XX=e=>{if(!e.elements.arrow)return;const t=e.elements.arrow.querySelector("[data-popper-arrow-inner]");var n;t&&Object.assign(t.style,{transform:"rotate(45deg)",background:BX.arrowBg.varRef,top:0,left:0,width:"100%",height:"100%",position:"absolute",zIndex:"inherit",boxShadow:(n=e.placement,n.includes("top")?"1px 1px 1px 0 var(--popper-arrow-shadow-color)":n.includes("bottom")?"-1px -1px 1px 0 var(--popper-arrow-shadow-color)":n.includes("right")?"-1px 1px 1px 0 var(--popper-arrow-shadow-color)":n.includes("left")?"1px -1px 1px 0 var(--popper-arrow-shadow-color)":void 0)})},qX={"start-start":{ltr:"left-start",rtl:"right-start"},"start-end":{ltr:"left-end",rtl:"right-end"},"end-start":{ltr:"right-start",rtl:"left-start"},"end-end":{ltr:"right-end",rtl:"left-end"},start:{ltr:"left",rtl:"right"},end:{ltr:"right",rtl:"left"}},YX={"auto-start":"auto-end","auto-end":"auto-start","top-start":"top-end","top-end":"top-start","bottom-start":"bottom-end","bottom-end":"bottom-start"};function ZX(e){const{size:t,shadowColor:n,bg:r,style:i}=e,a={...i,position:"absolute"};return t&&(a["--popper-arrow-size"]=t),n&&(a["--popper-arrow-shadow-color"]=n),r&&(a["--popper-arrow-bg"]=r),a}var[JX,$X,KX,QX]=yW(),[eq,tq]=cr({strict:!1,name:"MenuContext"});function nq(e={}){const{id:n,closeOnSelect:r=!0,closeOnBlur:i=!0,autoSelect:a=!0,isLazy:o,isOpen:s,defaultIsOpen:l,onClose:c,onOpen:u,placement:d="bottom-start",lazyBehavior:h="unmount",direction:f,computePositionOnMount:p=!1,...m}=e,g=(0,t.useRef)(null),v=(0,t.useRef)(null),y=KX(),b=(0,t.useCallback)((()=>{_e(g.current,{nextTick:!0,selectTextIfInput:!1})}),[]),x=(0,t.useCallback)((()=>{const e=setTimeout((()=>{const e=y.firstEnabled();e&&R(e.index)}));k.current.add(e)}),[y]),_=(0,t.useCallback)((()=>{const e=setTimeout((()=>{const e=y.lastEnabled();e&&R(e.index)}));k.current.add(e)}),[y]),w=(0,t.useCallback)((()=>{null==u||u(),a?x():b()}),[a,x,b,u]),{isOpen:M,onOpen:S,onClose:A,onToggle:E}=lt({isOpen:s,defaultIsOpen:l,onClose:c,onOpen:w});!function(e){const{ref:n,handler:r,enabled:i=!0}=e,a=tt(r),o=(0,t.useRef)({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}).current;(0,t.useEffect)((()=>{if(!i)return;const e=e=>{gt(e,n)&&(o.isPointerDown=!0)},t=e=>{o.ignoreEmulatedMouseEvents?o.ignoreEmulatedMouseEvents=!1:o.isPointerDown&&r&&gt(e,n)&&(o.isPointerDown=!1,a(e))},s=e=>{o.ignoreEmulatedMouseEvents=!0,r&&o.isPointerDown&&gt(e,n)&&(o.isPointerDown=!1,a(e))},l=$(n.current);return l.addEventListener("mousedown",e,!0),l.addEventListener("mouseup",t,!0),l.addEventListener("touchstart",e,!0),l.addEventListener("touchend",s,!0),()=>{l.removeEventListener("mousedown",e,!0),l.removeEventListener("mouseup",t,!0),l.removeEventListener("touchstart",e,!0),l.removeEventListener("touchend",s,!0)}}),[r,n,a,o,i])}({enabled:M&&i,ref:g,handler:e=>{var t;(null==(t=v.current)?void 0:t.contains(e.target))||A()}});const C=function(e={}){const{enabled:n=!0,modifiers:r,placement:i="bottom",strategy:a="absolute",arrowPadding:o=8,eventListeners:s=!0,offset:l,gutter:c=8,flip:u=!0,boundary:d="clippingParents",preventOverflow:h=!0,matchWidth:f,direction:p="ltr"}=e,m=(0,t.useRef)(null),g=(0,t.useRef)(null),v=(0,t.useRef)(null),y=function(e,t="ltr"){var n;const r=(null==(n=qX[e])?void 0:n[t])||e;return"ltr"===t?r:YX[e]??r}(i,p),b=(0,t.useRef)((()=>{})),x=(0,t.useCallback)((()=>{var e;n&&m.current&&g.current&&(null==(e=b.current)||e.call(b),v.current=IX(m.current,g.current,{placement:y,modifiers:[WX,GX,UX,{...zX,enabled:!!f},{name:"eventListeners",...OX(s)},{name:"arrow",options:{padding:o}},{name:"offset",options:{offset:l??[0,c]}},{name:"flip",enabled:!!u,options:{padding:8}},{name:"preventOverflow",enabled:!!h,options:{boundary:d}},...r??[]],strategy:a}),v.current.forceUpdate(),b.current=v.current.destroy)}),[y,n,r,f,s,o,l,c,u,h,d,a]);(0,t.useEffect)((()=>()=>{var e;m.current||g.current||(null==(e=v.current)||e.destroy(),v.current=null)}),[]);const _=(0,t.useCallback)((e=>{m.current=e,x()}),[x]),w=(0,t.useCallback)(((e={},t=null)=>({...e,ref:lr(_,t)})),[_]),M=(0,t.useCallback)((e=>{g.current=e,x()}),[x]),S=(0,t.useCallback)(((e={},t=null)=>({...e,ref:lr(M,t),style:{...e.style,position:a,minWidth:f?void 0:"max-content",inset:"0 auto auto 0"}})),[a,M,f]),A=(0,t.useCallback)(((e={},t=null)=>{const{size:n,shadowColor:r,bg:i,style:a,...o}=e;return{...o,ref:t,"data-popper-arrow":"",style:ZX(e)}}),[]),E=(0,t.useCallback)(((e={},t=null)=>({...e,ref:t,"data-popper-arrow-inner":""})),[]);return{update(){var e;null==(e=v.current)||e.update()},forceUpdate(){var e;null==(e=v.current)||e.forceUpdate()},transformOrigin:BX.transformOrigin.varRef,referenceRef:_,popperRef:M,getPopperProps:S,getArrowProps:A,getArrowInnerProps:E,getReferenceProps:w}}({...m,enabled:M||p,placement:d,direction:f}),[T,R]=(0,t.useState)(-1);ct((()=>{M||R(-1)}),[M]),ut(g,{focusRef:v,visible:M,shouldFocus:!0});const P=function(e){const{isOpen:n,ref:r}=e,[i,a]=(0,t.useState)(n),[o,s]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{o||(a(n),s(!0))}),[n,o,i]),nt("animationend",(()=>{a(n)}),(()=>r.current)),{present:!(!n&&!i),onComplete(){var e;const t=new(J(r.current).CustomEvent)("animationend",{bubbles:!0});null==(e=r.current)||e.dispatchEvent(t)}}}({isOpen:M,ref:g}),[L,D]=st(n,"menu-button","menu-list"),I=(0,t.useCallback)((()=>{S(),b()}),[S,b]),k=(0,t.useRef)(new Set([]));ht((()=>{k.current.forEach((e=>clearTimeout(e))),k.current.clear()}));const B=(0,t.useCallback)((()=>{S(),x()}),[x,S]),F=(0,t.useCallback)((()=>{S(),_()}),[S,_]),N=(0,t.useCallback)((()=>{var e,t;const n=$(g.current),r=null==(e=g.current)?void 0:e.contains(n.activeElement);if(!M||r)return;const i=null==(t=y.item(T))?void 0:t.node;i&&_e(i,{selectTextIfInput:!1,preventScroll:!1})}),[M,T,y]);return{openAndFocusMenu:I,openAndFocusFirstItem:B,openAndFocusLastItem:F,onTransitionEnd:N,unstable__animationState:P,descendants:y,popper:C,buttonId:L,menuId:D,forceUpdate:C.forceUpdate,orientation:"vertical",isOpen:M,onToggle:E,onOpen:S,onClose:A,menuRef:g,buttonRef:v,focusedIndex:T,closeOnSelect:r,closeOnBlur:i,autoSelect:a,setFocusedIndex:R,isLazy:o,lazyBehavior:h}}function rq(e){var t;return Z(e)&&!!(null==(t=e.getAttribute("role"))?void 0:t.startsWith("menuitem"))}function iq(e={},n=null){const{onMouseEnter:r,onMouseMove:i,onMouseLeave:a,onClick:o,isDisabled:s,isFocusable:l,closeOnSelect:c,type:u,...d}=e,h=tq(),{setFocusedIndex:f,focusedIndex:p,closeOnSelect:m,onClose:g,menuRef:v,isOpen:y,menuId:b}=h,x=(0,t.useRef)(null),_=`${b}-menuitem-${ot()}`,{index:w,register:M}=QX({disabled:s&&!l}),S=(0,t.useCallback)((e=>{null==r||r(e),s||f(w)}),[f,w,s,r]),A=(0,t.useCallback)((e=>{null==i||i(e),x.current&&!le(x.current)&&S(e)}),[S,i]),E=(0,t.useCallback)((e=>{null==a||a(e),s||f(-1)}),[f,s,a]),C=(0,t.useCallback)((e=>{null==o||o(e),rq(e.currentTarget)&&(c??m)&&g()}),[g,o,m,c]),T=w===p,R=s&&!l;ct((()=>{y&&(T&&!R&&x.current?_e(x.current,{nextTick:!0,selectTextIfInput:!1,preventScroll:!1}):v.current&&!le(v.current)&&_e(v.current,{preventScroll:!1}))}),[T,R,v,y]);const P=dW({onClick:C,onMouseEnter:S,onMouseMove:A,onMouseLeave:E,ref:lr(M,x,n),isDisabled:s,isFocusable:l});return{...d,...P,type:u??P.type,id:_,role:"menuitem",tabIndex:T?0:-1}}var[aq,oq]=cr({name:"MenuStylesContext",errorMessage:"useMenuStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Menu />\" "}),sq=e=>{const{children:n}=e,r=ga("Menu",e),i=Wi(e),{direction:a}=ra(),{descendants:o,...s}=nq({...i,direction:a}),l=(0,t.useMemo)((()=>s),[s]),{isOpen:c,onClose:u,forceUpdate:d}=l;return t.createElement(JX,{value:o},t.createElement(eq,{value:l},t.createElement(aq,{value:r},he(n,{isOpen:c,onClose:u,forceUpdate:d}))))},lq=fa(((e,n)=>{const r=oq();return t.createElement(va.button,{ref:n,...e,__css:{display:"inline-flex",appearance:"none",alignItems:"center",outline:0,...r.button}})})),cq=fa(((e,n)=>{const{children:r,as:i,...a}=e,o=function(e={},n=null){const r=tq(),{onToggle:i,popper:a,openAndFocusFirstItem:o,openAndFocusLastItem:s}=r,l=(0,t.useCallback)((e=>{const t=ae(e),n={Enter:o,ArrowDown:o,ArrowUp:s}[t];n&&(e.preventDefault(),e.stopPropagation(),n(e))}),[o,s]);return{...e,ref:lr(r.buttonRef,n,a.referenceRef),id:r.buttonId,"data-active":ee(r.isOpen),"aria-expanded":r.isOpen,"aria-haspopup":"menu","aria-controls":r.menuId,onClick:fe(e.onClick,i),onKeyDown:fe(e.onKeyDown,l)}}(a,n),s=i||lq;return t.createElement(s,{...o,className:ne("chakra-menu__menu-button",e.className)},t.createElement(va.span,{__css:{pointerEvents:"none",flex:"1 1 auto",minW:0}},e.children))})),uq={enter:{visibility:"visible",opacity:1,scale:1,transition:{duration:.2,ease:[.4,0,.2,1]}},exit:{transitionEnd:{visibility:"hidden"},opacity:0,scale:.8,transition:{duration:.1,easings:"easeOut"}}},dq=function(e){const t=Wv;return"custom"in t&&"function"==typeof t.custom?t.custom(e):t(e)}(va.div),hq=fa(((e,n)=>{var r;const{rootProps:i,...a}=e,{isOpen:o,onTransitionEnd:s,unstable__animationState:l}=tq(),c=function(e={},n=null){const r=tq();if(!r)throw new Error("useMenuContext: context is undefined. Seems you forgot to wrap component within <Menu>");const{focusedIndex:i,setFocusedIndex:a,menuRef:o,isOpen:s,onClose:l,menuId:c,isLazy:u,lazyBehavior:d,unstable__animationState:h}=r,f=$X(),p=function(e={}){const{timeout:n=300,preventDefault:r=(()=>!0)}=e,[i,a]=(0,t.useState)([]),o=(0,t.useRef)(),s=()=>{o.current&&(clearTimeout(o.current),o.current=null)};return(0,t.useEffect)((()=>s),[]),function(e){return t=>{if("Backspace"===t.key){const e=[...i];return e.pop(),void a(e)}if(function(e){const{key:t}=e;return 1===t.length||t.length>1&&/[^a-zA-Z0-9]/.test(t)}(t)){const l=i.concat(t.key);r(t)&&(t.preventDefault(),t.stopPropagation()),a(l),e(l.join("")),s(),o.current=setTimeout((()=>{a([]),o.current=null}),n)}}}}({preventDefault:e=>" "!==e.key&&rq(e.target)}),m=(0,t.useCallback)((e=>{const t=ae(e),n={Tab:e=>e.preventDefault(),Escape:l,ArrowDown:()=>{const e=f.nextEnabled(i);e&&a(e.index)},ArrowUp:()=>{const e=f.prevEnabled(i);e&&a(e.index)}},r=n[t];if(r)return e.preventDefault(),void r(e);const o=p((e=>{const t=function(e,t,n,r){if(null==t)return r;if(!r)return e.find((e=>n(e).toLowerCase().startsWith(t.toLowerCase())));const i=e.filter((e=>n(e).toLowerCase().startsWith(t.toLowerCase())));if(i.length>0){let t;return i.includes(r)?(t=i.indexOf(r)+1,t===i.length&&(t=0),i[t]):(t=e.indexOf(i[0]),e[t])}return r}(f.values(),e,(e=>{var t;return(null==(t=null==e?void 0:e.node)?void 0:t.textContent)??""}),f.item(i));if(t){const e=f.indexOf(t.node);a(e)}}));rq(e.target)&&o(e)}),[f,i,p,l,a]),g=(0,t.useRef)(!1);s&&(g.current=!0);const v=Se({hasBeenSelected:g.current,isLazy:u,lazyBehavior:d,isSelected:h.present});return{...e,ref:lr(o,n),children:v?e.children:null,tabIndex:-1,role:"menu",id:c,style:{...e.style,transformOrigin:"var(--popper-transform-origin)"},"aria-orientation":"vertical",onKeyDown:fe(e.onKeyDown,m)}}(a,n),u=function(e={}){const{popper:t,isOpen:n}=tq();return t.getPopperProps({...e,style:{visibility:n?"visible":"hidden",...e.style}})}(i),d=oq();return t.createElement(va.div,{...u,__css:{zIndex:e.zIndex??(null==(r=d.list)?void 0:r.zIndex)}},t.createElement(dq,{...c,onUpdate:s,onAnimationComplete:pe(l.onComplete,c.onAnimationComplete),className:ne("chakra-menu__menu-list",c.className),variants:uq,initial:!1,animate:o?"enter":"exit",__css:{outline:0,...d.list}}))})),fq=fa(((e,n)=>{const{type:r,...i}=e,a=oq(),o=i.as||r?r??void 0:"button",s=(0,t.useMemo)((()=>({textDecoration:"none",color:"inherit",userSelect:"none",display:"flex",width:"100%",alignItems:"center",textAlign:"start",flex:"0 0 auto",outline:0,...a.item})),[a.item]);return t.createElement(va.button,{ref:n,type:o,...i,__css:s})})),pq=fa(((e,n)=>{const{icon:r,iconSpacing:i="0.75rem",command:a,commandSpacing:o="0.75rem",children:s,...l}=e,c=iq(l,n),u=r||a?t.createElement("span",{style:{pointerEvents:"none",flex:1}},s):s;return t.createElement(fq,{...c,className:ne("chakra-menu__menuitem",c.className)},r&&t.createElement(bq,{fontSize:"0.8em",marginEnd:i},r),u,a&&t.createElement(yq,{marginStart:o},a))})),mq=e=>t.createElement("svg",{viewBox:"0 0 14 14",width:"1em",height:"1em",...e},t.createElement("polygon",{fill:"currentColor",points:"5.5 11.9993304 14 3.49933039 12.5 2 5.5 8.99933039 1.5 4.9968652 0 6.49933039"})),gq=fa(((e,n)=>{const{icon:r,iconSpacing:i="0.75rem",...a}=e,o=function(e={},t=null){const{type:n="radio",isChecked:r,...i}=e;return{...iq(i,t),role:`menuitem${n}`,"aria-checked":r}}(a,n);return t.createElement(fq,{...o,className:ne("chakra-menu__menuitem-option",a.className)},null!==r&&t.createElement(bq,{fontSize:"0.8em",marginEnd:i,opacity:e.isChecked?1:0},r||t.createElement(mq,null)),t.createElement("span",{style:{flex:1}},o.children))}));gq.id="MenuItemOption";var vq=fa(((e,n)=>{const{title:r,children:i,className:a,...o}=e,s=ne("chakra-menu__group__title",a),l=oq();return t.createElement("div",{ref:n,className:"chakra-menu__group",role:"group"},r&&t.createElement(va.p,{className:s,...o,__css:l.groupTitle},r),i)})),yq=fa(((e,n)=>{const r=oq();return t.createElement(va.span,{ref:n,...e,__css:r.command,className:"chakra-menu__command"})})),bq=e=>{const{className:n,children:r,...i}=e,a=t.Children.only(r),o=(0,t.isValidElement)(a)?(0,t.cloneElement)(a,{focusable:"false","aria-hidden":!0,className:ne("chakra-menu__icon",a.props.className)}):null,s=ne("chakra-menu__icon-wrapper",n);return t.createElement(va.span,{className:s,...i,__css:{flexShrink:0}},o)},xq=e=>{const{className:n,...r}=e,i=oq();return t.createElement(va.hr,{role:"separator","aria-orientation":"horizontal",className:ne("chakra-menu__divider",n),...r,__css:i.divider})},_q=fa((function(e,n){const r=ga("Switch",e),{spacing:i="0.5rem",children:a,...o}=Wi(e),{state:s,getInputProps:l,getCheckboxProps:c,getRootProps:u,getLabelProps:d}=Fj(o),h=(0,t.useMemo)((()=>({display:"inline-block",position:"relative",verticalAlign:"middle",lineHeight:0,...r.container})),[r.container]),f=(0,t.useMemo)((()=>({display:"inline-flex",flexShrink:0,justifyContent:"flex-start",boxSizing:"content-box",cursor:"pointer",...r.track})),[r.track]),p=(0,t.useMemo)((()=>({userSelect:"none",marginStart:i,...r.label})),[i,r.label]);return t.createElement(va.label,{...u(),className:ne("chakra-switch",e.className),__css:h},t.createElement("input",{className:"chakra-switch__input",...l({},n)}),t.createElement(va.span,{...c(),className:"chakra-switch__track",__css:f},t.createElement(va.span,{__css:r.thumb,className:"chakra-switch__thumb","data-checked":ee(s.isChecked),"data-hover":ee(s.isHovered)})),a&&t.createElement(va.span,{className:"chakra-switch__label",...d(),__css:p},a))}));function wq(e){const{orientation:t,vertical:n,horizontal:r}=e;return"vertical"===t?n:r}var Mq={width:0,height:0};function Sq(e){const{orientation:t,thumbPercents:n,thumbRects:r,isReversed:i}=e,a="vertical"===t?r.reduce(((e,t)=>e.height>t.height?e:t),Mq):r.reduce(((e,t)=>e.width>t.width?e:t),Mq),o={position:"relative",touchAction:"none",WebkitTapHighlightColor:"rgba(0,0,0,0)",userSelect:"none",outline:0,...wq({orientation:t,vertical:{paddingLeft:a.width/2,paddingRight:a.width/2},horizontal:{paddingTop:a.height/2,paddingBottom:a.height/2}})},s={position:"absolute",...wq({orientation:t,vertical:{left:"50%",transform:"translateX(-50%)",height:"100%"},horizontal:{top:"50%",transform:"translateY(-50%)",width:"100%"}})},l=1===n.length,c=[0,i?100-n[0]:n[0]],u=l?c:n;let d=u[0];!l&&i&&(d=100-d);const h=Math.abs(u[u.length-1]-u[0]);return{trackStyle:s,innerTrackStyle:{...s,...wq({orientation:t,vertical:i?{height:`${h}%`,top:`${d}%`}:{height:`${h}%`,bottom:`${d}%`},horizontal:i?{width:`${h}%`,right:`${d}%`}:{width:`${h}%`,left:`${d}%`}})},rootStyle:o,getThumbStyle:e=>({position:"absolute",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",touchAction:"none",...wq({orientation:t,vertical:{bottom:`calc(${n[e]}% - ${r[e].height/2}px)`},horizontal:{left:`calc(${n[e]}% - ${r[e].width/2}px)`}})})}}function Aq(e){const{isReversed:t,direction:n,orientation:r}=e;return"ltr"===n||"vertical"===r?t:!t}var Eq=(e,t,n,r)=>e.map(((i,a)=>({min:0===a?t:e[a-1]+r,max:a===e.length-1?n:e[a+1]-r}))),[Cq,Tq]=cr({name:"SliderContext",errorMessage:"useSliderContext: `context` is undefined. Seems you forgot to wrap all slider components within <RangeSlider />"}),[Rq,Pq]=cr({name:"RangeSliderStylesContext",errorMessage:"useRangeSliderStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<RangeSlider />\" "}),Lq=fa((function(e,n){const r=ga("Slider",e),i=Wi(e),{direction:a}=ra();i.direction=a;const{getRootProps:o,...s}=function(e){const{min:n=0,max:r=100,onChange:i,value:a,defaultValue:o,isReversed:s,direction:l="ltr",orientation:c="horizontal",id:u,isDisabled:d,isReadOnly:h,onChangeStart:f,onChangeEnd:p,step:m=1,getAriaValueText:g,"aria-valuetext":v,"aria-label":y,"aria-labelledby":b,name:x,focusThumbOnChange:_=!0,minStepsBetweenThumbs:w=0,...M}=e,S=tt(f),A=tt(p),E=tt(g),C=Aq({isReversed:s,direction:l,orientation:c}),[T,R]=at({value:a,defaultValue:o??[25,75],onChange:i});if(!Array.isArray(T))throw new TypeError(`[range-slider] You passed an invalid value for \`value\` or \`defaultValue\`, expected \`Array\` but got \`${typeof T}\``);const[P,L]=rt(),[D,I]=rt(),[k,B]=(0,t.useState)(-1),F=(0,t.useRef)(null),N=!(d||h),O=(0,t.useRef)(T),z=T.map((e=>De(e,n,r))),U=pt(z),H=Eq(z,n,r,w*m),G=z.map((e=>r-e+n)),V=(C?G:z).map((e=>Re(e,n,r))),j="vertical"===c,[W,X]=(0,t.useState)(Array.from({length:z.length}).map((()=>({width:0,height:0}))));(0,t.useEffect)((()=>{var e;if(!Y.current)return;const t=Array.from(null==(e=Y.current)?void 0:e.querySelectorAll("[role=slider]")).map((e=>({width:e.offsetWidth,height:e.offsetHeight})));t.length&&X(t)}),[]);const q=(0,t.useRef)(null),Y=(0,t.useRef)(null),Z=function(e){return{root:`slider-root-${e}`,getThumb:t=>`slider-thumb-${e}-${t}`,getInput:t=>`slider-input-${e}-${t}`,track:`slider-track-${e}`,innerTrack:`slider-filled-track-${e}`,getMarker:t=>`slider-marker-${e}-${t}`,output:`slider-output-${e}`}}(ot(u)),J=(0,t.useCallback)((e=>{var t;if(!q.current)return;F.current="pointer";const i=q.current.getBoundingClientRect(),{clientX:a,clientY:o}=(null==(t=e.touches)?void 0:t[0])??e;let s=(j?i.bottom-o:a-i.left)/(j?i.height:i.width);return C&&(s=1-s),Pe(s,n,r)}),[j,C,r,n]),$=(r-n)/10,K=m||(r-n)/100,Q=(0,t.useMemo)((()=>({setValueAtIndex:(e,t)=>{if(!N)return;const n=H[e];t=De(t=parseFloat(Le(t,n.min,K)),n.min,n.max);const r=[...z];r[e]=t,R(r)},setActiveIndex:B,stepUp:(e,t=K)=>{const n=z[e],r=C?n-t:n+t;Q.setValueAtIndex(e,r)},stepDown:(e,t=K)=>{const n=z[e],r=C?n+t:n-t;Q.setValueAtIndex(e,r)},reset:()=>R(O.current)})),[K,z,C,R,N,H]),ne=(0,t.useCallback)((e=>{const t={ArrowRight:()=>Q.stepUp(k),ArrowUp:()=>Q.stepUp(k),ArrowLeft:()=>Q.stepDown(k),ArrowDown:()=>Q.stepDown(k),PageUp:()=>Q.stepUp(k,$),PageDown:()=>Q.stepDown(k,$),Home:()=>{const{min:e}=H[k];Q.setValueAtIndex(k,e)},End:()=>{const{max:e}=H[k];Q.setValueAtIndex(k,e)}}[ae(e)];t&&(e.preventDefault(),e.stopPropagation(),t(e),F.current="keyboard")}),[Q,k,$,H]),{getThumbStyle:re,rootStyle:ie,trackStyle:oe,innerTrackStyle:se}=(0,t.useMemo)((()=>Sq({isReversed:C,orientation:c,thumbRects:W,thumbPercents:V})),[C,c,V,W]),le=(0,t.useCallback)((e=>{var t;const n=e??k;if(-1!==n&&_){const e=Z.getThumb(n),r=null==(t=Y.current)?void 0:t.ownerDocument.getElementById(e);r&&setTimeout((()=>_e(r)))}}),[_,k,Z]);ct((()=>{"keyboard"===F.current&&(null==A||A(U.current))}),[z,A]),vt(Y,{onPanSessionStart(e){N&&(L.on(),(e=>{const t=J(e)||0,n=z.map((e=>Math.abs(e-t))),r=Math.min(...n);let i=n.indexOf(r);const a=n.filter((e=>e===r));a.length>1&&t>z[i]&&(i=i+a.length-1),B(i),Q.setValueAtIndex(i,t),le(i)})(e),null==S||S(U.current))},onPanSessionEnd(){N&&(L.off(),null==A||A(U.current))},onPan(e){N&&(e=>{if(-1==k)return;const t=J(e)||0;B(k),Q.setValueAtIndex(k,t),le(k)})(e)}});const ce=(0,t.useCallback)(((e={},t=null)=>({...e,...M,id:Z.root,ref:lr(t,Y),tabIndex:-1,"aria-disabled":te(d),"data-focused":ee(D),style:{...e.style,...ie}})),[M,d,D,ie,Z]),ue=(0,t.useCallback)(((e={},t=null)=>({...e,ref:lr(t,q),id:Z.track,"data-disabled":ee(d),style:{...e.style,...oe}})),[d,oe,Z]),de=(0,t.useCallback)(((e={},t=null)=>({...e,ref:t,id:Z.innerTrack,style:{...e.style,...se}})),[se,Z]),he=(0,t.useCallback)(((e,t=null)=>{const{index:n,...r}=e,i=z[n];if(null==i)throw new TypeError(`[range-slider > thumb] Cannot find value at index \`${n}\`. The \`value\` or \`defaultValue\` length is : ${z.length}`);const a=H[n];return{...r,ref:t,role:"slider",tabIndex:N?0:void 0,id:Z.getThumb(n),"data-active":ee(P&&k===n),"aria-valuetext":(null==E?void 0:E(i))??(null==v?void 0:v[n]),"aria-valuemin":a.min,"aria-valuemax":a.max,"aria-valuenow":i,"aria-orientation":c,"aria-disabled":te(d),"aria-readonly":te(h),"aria-label":null==y?void 0:y[n],"aria-labelledby":(null==y?void 0:y[n])||null==b?void 0:b[n],style:{...e.style,...re(n)},onKeyDown:fe(e.onKeyDown,ne),onFocus:fe(e.onFocus,(()=>{I.on(),B(n)})),onBlur:fe(e.onBlur,(()=>{I.off(),B(-1)}))}}),[Z,z,H,N,P,k,E,v,c,d,h,y,b,re,ne,I]),pe=(0,t.useCallback)(((e={},t=null)=>({...e,ref:t,id:Z.output,htmlFor:z.map(((e,t)=>Z.getThumb(t))).join(" "),"aria-live":"off"})),[Z,z]),me=(0,t.useCallback)(((e={},t=null)=>{const{value:i,...a}=e,o=!(i<n||i>r),s=i>=z[0]&&i<=z[z.length-1];let l=Re(i,n,r);l=C?100-l:l;const u={position:"absolute",pointerEvents:"none",...wq({orientation:c,vertical:{bottom:`${l}%`},horizontal:{left:`${l}%`}})};return{...a,ref:t,id:Z.getMarker(e.value),role:"presentation","aria-hidden":!0,"data-disabled":ee(d),"data-invalid":ee(!o),"data-highlighted":ee(s),style:{...e.style,...u}}}),[d,C,r,n,c,z,Z]),ge=(0,t.useCallback)(((e,t=null)=>{const{index:n,...r}=e;return{...r,ref:t,id:Z.getInput(n),type:"hidden",value:z[n],name:Array.isArray(x)?x[n]:`${x}-${n}`}}),[x,z,Z]);return{state:{value:z,isFocused:D,isDragging:P,getThumbPercent:e=>V[e],getThumbMinValue:e=>H[e].min,getThumbMaxValue:e=>H[e].max},actions:Q,getRootProps:ce,getTrackProps:ue,getInnerTrackProps:de,getThumbProps:he,getMarkerProps:me,getInputProps:ge,getOutputProps:pe}}(i),l=(0,t.useMemo)((()=>({...s,name:e.name})),[s,e.name]);return t.createElement(Cq,{value:l},t.createElement(Rq,{value:r},t.createElement(va.div,{...o({},n),className:"chakra-slider",__css:r.container},e.children)))}));function Dq(e){const{orientation:t,vertical:n,horizontal:r}=e;return"vertical"===t?n:r}function Iq(e,t){return t<e?e:e+(t-e)/2}Lq.defaultProps={orientation:"horizontal"},fa((function(e,n){const{getThumbProps:r,getInputProps:i,name:a}=Tq(),o=Pq(),s=r(e,n);return t.createElement(va.div,{...s,className:ne("chakra-slider__thumb",e.className),__css:o.thumb},s.children,a&&t.createElement("input",{...i({index:e.index})}))})),fa((function(e,n){const{getTrackProps:r}=Tq(),i=Pq(),a=r(e,n);return t.createElement(va.div,{...a,className:ne("chakra-slider__track",e.className),__css:i.track,"data-testid":"chakra-range-slider-track"})})),fa((function(e,n){const{getInnerTrackProps:r}=Tq(),i=Pq(),a=r(e,n);return t.createElement(va.div,{...a,className:"chakra-slider__filled-track",__css:i.filledTrack})})),fa((function(e,n){const{getMarkerProps:r}=Tq(),i=r(e,n);return t.createElement(va.div,{...i,className:ne("chakra-slider__marker",e.className)})}));var[kq,Bq]=cr({name:"SliderContext",errorMessage:"useSliderContext: `context` is undefined. Seems you forgot to wrap all slider components within <Slider />"}),[Fq,Nq]=cr({name:"SliderStylesContext",errorMessage:"useSliderStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Slider />\" "}),Oq=fa(((e,n)=>{const r=ga("Slider",e),i=Wi(e),{direction:a}=ra();i.direction=a;const{getInputProps:o,getRootProps:s,...l}=function(e){const{min:n=0,max:r=100,onChange:i,value:a,defaultValue:o,isReversed:s,direction:l="ltr",orientation:c="horizontal",id:u,isDisabled:d,isReadOnly:h,onChangeStart:f,onChangeEnd:p,step:m=1,getAriaValueText:g,"aria-valuetext":v,"aria-label":y,"aria-labelledby":b,name:x,focusThumbOnChange:_=!0,...w}=e,M=tt(f),S=tt(p),A=tt(g),E=Aq({isReversed:s,direction:l,orientation:c}),[C,T]=at({value:a,defaultValue:o??Iq(n,r),onChange:i}),[R,P]=rt(),[L,D]=rt(),I=(0,t.useRef)(null),k=!(d||h),B=De(C,n,r),F=pt(B),N=(0,t.useRef)(F.current),O=Re(E?r-B+n:B,n,r),z="vertical"===c,U=(0,t.useRef)(null),H=(0,t.useRef)(null),G=(0,t.useRef)(null),[V,j]=st(u,"slider-thumb","slider-track"),W=(0,t.useCallback)((e=>{var t;if(!U.current)return;I.current="pointer";const i=Qe(U.current).borderBox,{clientX:a,clientY:o}=(null==(t=e.touches)?void 0:t[0])??e;let s=(z?i.bottom-o:a-i.left)/(z?i.height:i.width);E&&(s=1-s);let l=Pe(s,n,r);return m&&(l=parseFloat(Le(l,n,m))),l=De(l,n,r),l}),[z,E,r,n,m]),X=(r-n)/10,q=m||(r-n)/100,Y=(0,t.useCallback)((e=>{k&&(e=De(e=parseFloat(Le(e,n,q)),n,r),T(e))}),[q,r,n,T,k]),Z=(0,t.useMemo)((()=>({stepUp:(e=q)=>{Y(E?B-e:B+e)},stepDown:(e=q)=>{Y(E?B+e:B-e)},reset:()=>Y(o||0),stepTo:e=>Y(e)})),[Y,E,B,q,o]),J=(0,t.useCallback)((e=>{const t={ArrowRight:()=>Z.stepUp(),ArrowUp:()=>Z.stepUp(),ArrowLeft:()=>Z.stepDown(),ArrowDown:()=>Z.stepDown(),PageUp:()=>Z.stepUp(X),PageDown:()=>Z.stepDown(X),Home:()=>Y(n),End:()=>Y(r)}[ae(e)];t&&(e.preventDefault(),e.stopPropagation(),t(e),I.current="keyboard")}),[Z,Y,r,n,X]),$=(null==A?void 0:A(B))??v,K=function(e,n){const[r,i]=(0,t.useState)(null),a=(0,t.useRef)();return et((()=>{if(!e.current)return;const t=e.current;function n(){a.current=requestAnimationFrame((()=>{const e=Qe(t);i(e)}))}return n(),()=>{a.current&&cancelAnimationFrame(a.current)}}),[n]),r}(H),{getThumbStyle:Q,rootStyle:ne,trackStyle:re,innerTrackStyle:ie}=(0,t.useMemo)((()=>{const e=(null==K?void 0:K.borderBox)??{width:0,height:0};return Sq({isReversed:E,orientation:c,thumbRects:[e],thumbPercents:[O]})}),[E,c,null==K?void 0:K.borderBox,O]),oe=(0,t.useCallback)((()=>{H.current&&_&&setTimeout((()=>_e(H.current)))}),[_]);ct((()=>{oe(),"keyboard"===I.current&&(null==S||S(F.current))}),[B,S]);const se=e=>{const t=W(e);null!=t&&t!==F.current&&T(t)};vt(G,{onPanSessionStart(e){k&&(P.on(),oe(),se(e),null==M||M(F.current))},onPanSessionEnd(){k&&(P.off(),null==S||S(F.current),N.current=F.current)},onPan(e){k&&se(e)}});const le=(0,t.useCallback)(((e={},t=null)=>({...e,...w,ref:lr(t,G),tabIndex:-1,"aria-disabled":te(d),"data-focused":ee(L),style:{...e.style,...ne}})),[w,d,L,ne]),ce=(0,t.useCallback)(((e={},t=null)=>({...e,ref:lr(t,U),id:j,"data-disabled":ee(d),style:{...e.style,...re}})),[d,j,re]),ue=(0,t.useCallback)(((e={},t=null)=>({...e,ref:t,style:{...e.style,...ie}})),[ie]),de=(0,t.useCallback)(((e={},t=null)=>({...e,ref:lr(t,H),role:"slider",tabIndex:k?0:void 0,id:V,"data-active":ee(R),"aria-valuetext":$,"aria-valuemin":n,"aria-valuemax":r,"aria-valuenow":B,"aria-orientation":c,"aria-disabled":te(d),"aria-readonly":te(h),"aria-label":y,"aria-labelledby":y?void 0:b,style:{...e.style,...Q(0)},onKeyDown:fe(e.onKeyDown,J),onFocus:fe(e.onFocus,D.on),onBlur:fe(e.onBlur,D.off)})),[k,V,R,$,n,r,B,c,d,h,y,b,Q,J,D.on,D.off]),he=(0,t.useCallback)(((e={},t=null)=>{const i=!(e.value<n||e.value>r),a=B>=e.value,o=Re(e.value,n,r),s={position:"absolute",pointerEvents:"none",...Dq({orientation:c,vertical:{bottom:E?100-o+"%":`${o}%`},horizontal:{left:E?100-o+"%":`${o}%`}})};return{...e,ref:t,role:"presentation","aria-hidden":!0,"data-disabled":ee(d),"data-invalid":ee(!i),"data-highlighted":ee(a),style:{...e.style,...s}}}),[d,E,r,n,c,B]),pe=(0,t.useCallback)(((e={},t=null)=>({...e,ref:t,type:"hidden",value:B,name:x})),[x,B]);return{state:{value:B,isFocused:L,isDragging:R},actions:Z,getRootProps:le,getTrackProps:ce,getInnerTrackProps:ue,getThumbProps:de,getMarkerProps:he,getInputProps:pe}}(i),c=s(),u=o({},n);return t.createElement(kq,{value:l},t.createElement(Fq,{value:r},t.createElement(va.div,{...c,className:ne("chakra-slider",e.className),__css:r.container},e.children,t.createElement("input",{...u}))))}));Oq.defaultProps={orientation:"horizontal"};var zq=fa(((e,n)=>{const{getThumbProps:r}=Bq(),i=Nq(),a=r(e,n);return t.createElement(va.div,{...a,className:ne("chakra-slider__thumb",e.className),__css:i.thumb})})),Uq=fa(((e,n)=>{const{getTrackProps:r}=Bq(),i=Nq(),a=r(e,n);return t.createElement(va.div,{...a,className:ne("chakra-slider__track",e.className),__css:i.track})})),Hq=fa(((e,n)=>{const{getInnerTrackProps:r}=Bq(),i=Nq(),a=r(e,n);return t.createElement(va.div,{...a,className:ne("chakra-slider__filled-track",e.className),__css:i.filledTrack})}));fa(((e,n)=>{const{getMarkerProps:r}=Bq(),i=r(e,n);return t.createElement(va.div,{...i,className:ne("chakra-slider__marker",e.className)})}));var[Gq,Vq]=cr({name:"RadioGroupContext",strict:!1}),jq=fa(((e,n)=>{const{colorScheme:r,size:i,variant:a,children:o,className:s,isDisabled:l,isFocusable:c,...u}=e,{value:d,onChange:h,getRootProps:f,name:p,htmlProps:m}=function(e={}){const{onChange:n,value:r,defaultValue:i,name:a,isDisabled:o,isFocusable:s,isNative:l,...c}=e,[u,d]=(0,t.useState)(i||""),[h,f]=it(r,u),p=(0,t.useRef)(null),m=(0,t.useCallback)((()=>{const e=p.current;if(!e)return;let t="input:not(:disabled):checked";const n=e.querySelector(t);if(n)return void n.focus();t="input:not(:disabled)";const r=e.querySelector(t);null==r||r.focus()}),[]),g=ot(void 0,"radio"),v=a||g,y=(0,t.useCallback)((e=>{const t=I(e)?e.target.value:e;h||d(t),null==n||n(String(t))}),[n,h]);return{getRootProps:(0,t.useCallback)(((e={},t=null)=>({...e,ref:lr(t,p),role:"radiogroup"})),[]),getRadioProps:(0,t.useCallback)(((e={},t=null)=>{const n=l?"checked":"isChecked";return{...e,ref:t,name:v,[n]:null!=f?e.value===f:void 0,onChange:y,"data-radiogroup":!0}}),[l,v,y,f]),name:v,ref:p,focus:m,setValue:d,value:f,onChange:y,isDisabled:o,isFocusable:s,htmlProps:c}}(u),g=(0,t.useMemo)((()=>({name:p,size:i,onChange:h,colorScheme:r,value:d,variant:a,isDisabled:l,isFocusable:c})),[p,i,h,r,d,a,l,c]),v=f(m,n),y=ne("chakra-radio-group",s);return t.createElement(Gq,{value:g},t.createElement(va.div,{...v,className:y},o))}));function Wq(e){e.preventDefault(),e.stopPropagation()}var Xq=fa(((e,n)=>{const r=Vq(),{onChange:i,value:a}=e,o=ga("Radio",{...r,...e}),s=Wi(e),{spacing:l="0.5rem",children:c,isDisabled:u=(null==r?void 0:r.isDisabled),isFocusable:d=(null==r?void 0:r.isFocusable),inputProps:h,...f}=s;let p=e.isChecked;null!=(null==r?void 0:r.value)&&null!=a&&(p=r.value===a);let m=i;(null==r?void 0:r.onChange)&&null!=a&&(m=pe(r.onChange,i));const g=(null==e?void 0:e.name)??(null==r?void 0:r.name),{getInputProps:v,getCheckboxProps:y,getLabelProps:b,getRootProps:x,htmlProps:_}=function(e={}){const{defaultChecked:n,isChecked:r,isFocusable:i,isDisabled:a,isReadOnly:o,isRequired:s,onChange:l,isInvalid:c,name:u,value:d,id:h,"data-radiogroup":f,"aria-describedby":p,...m}=e,g=ot(void 0,"radio"),v=Qx(),y=Vq();let b=!v||y||f?g:v.id;b=h??b;const x=a??(null==v?void 0:v.isDisabled),_=o??(null==v?void 0:v.isReadOnly),w=s??(null==v?void 0:v.isRequired),M=c??(null==v?void 0:v.isInvalid),[S,A]=(0,t.useState)(!1),[E,C]=rt(),[T,R]=rt(),[P,L]=rt(),[D,I]=(0,t.useState)(Boolean(n)),[k,B]=it(r,D);(0,t.useEffect)((()=>Cj(A)),[]);const F=(0,t.useCallback)((e=>{_||x?e.preventDefault():(k||I(e.target.checked),null==l||l(e))}),[k,x,_,l]),N=(0,t.useCallback)((e=>{" "===e.key&&L.on()}),[L]),O=(0,t.useCallback)((e=>{" "===e.key&&L.off()}),[L]),z=(0,t.useCallback)(((e={},t=null)=>({...e,ref:t,"data-active":ee(P),"data-hover":ee(T),"data-disabled":ee(x),"data-invalid":ee(M),"data-checked":ee(B),"data-focus":ee(E),"data-focus-visible":ee(E&&S),"data-readonly":ee(_),"aria-hidden":!0,onMouseDown:fe(e.onMouseDown,L.on),onMouseUp:fe(e.onMouseUp,L.off),onMouseEnter:fe(e.onMouseEnter,R.on),onMouseLeave:fe(e.onMouseLeave,R.off)})),[P,T,x,M,B,E,_,L.on,L.off,R.on,R.off,S]),{onFocus:U,onBlur:H}=v??{},G=(0,t.useCallback)(((e={},t=null)=>{const n=x&&!i;return{...e,id:b,ref:t,type:"radio",name:u,value:d,onChange:fe(e.onChange,F),onBlur:fe(H,e.onBlur,C.off),onFocus:fe(U,e.onFocus,C.on),onKeyDown:fe(e.onKeyDown,N),onKeyUp:fe(e.onKeyUp,O),checked:B,disabled:n,readOnly:_,required:w,"aria-invalid":te(M),"aria-disabled":te(n),"aria-required":te(w),"data-readonly":ee(_),"aria-describedby":p,style:Rc}}),[x,i,b,u,d,F,H,C,U,N,O,B,_,w,M,p]);return{state:{isInvalid:M,isFocused:E,isChecked:B,isActive:P,isHovered:T,isDisabled:x,isReadOnly:_,isRequired:w},getCheckboxProps:z,getInputProps:G,getLabelProps:(e={},t=null)=>({...e,ref:t,onMouseDown:fe(e.onMouseDown,Wq),onTouchStart:fe(e.onTouchStart,Wq),"data-disabled":ee(x),"data-checked":ee(B),"data-invalid":ee(M)}),getRootProps:(e,t=null)=>({...e,ref:t,"data-disabled":ee(x),"data-checked":ee(B),"data-invalid":ee(M)}),htmlProps:m}}({...f,isChecked:p,isFocusable:d,isDisabled:u,onChange:m,name:g}),[w,M]=B(_,Ni),S=y(M),A=v(h,n),E=b(),C=Object.assign({},w,x()),T={display:"inline-flex",alignItems:"center",verticalAlign:"top",cursor:"pointer",position:"relative",...o.container},R={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0,...o.control},P={userSelect:"none",marginStart:l,...o.label};return t.createElement(va.label,{className:"chakra-radio",...C,__css:T},t.createElement("input",{className:"chakra-radio__input",...A}),t.createElement(va.span,{className:"chakra-radio__control",...S,__css:R}),c&&t.createElement(va.span,{className:"chakra-radio__label",...E,__css:P},c))}));function qq(){const{isPaused:e,togglePaused:t,speed:n,setSpeed:r}=Yx((e=>({isPaused:e.isPaused,togglePaused:e.togglePaused,speed:e.speed,setSpeed:e.setSpeed})),Zy);return(0,sj.jsxs)(sj.Fragment,{children:[(0,sj.jsxs)(pq,{as:ly,justify:"space-between",align:"center",children:[(0,sj.jsx)(Cy,{onClick:()=>t(),children:e?"Resume":"Pause"}),(0,sj.jsxs)(s_,{htmlFor:"loop",alignSelf:"center",mb:0,children:["Loop",(0,sj.jsx)(_q,{id:"loop",mx:1})]})]}),(0,sj.jsxs)(pq,{children:[(0,sj.jsx)(s_,{htmlFor:"speed",children:"Speed"}),(0,sj.jsxs)(Oq,{name:"speed",value:n,onChange:e=>r(e),min:1,max:10,children:[(0,sj.jsx)(Uq,{children:(0,sj.jsx)(Hq,{})}),(0,sj.jsx)(zq,{})]})]})]})}function Yq({satellites:e}){const{cameraTarget:t,attachCamera:n,detachCamera:r,setLockCamera:i}=Yx((e=>({cameraTarget:e.cameraTarget,attachCamera:e.attachCamera,detachCamera:e.detachCamera,setLockCamera:e.setLockCamera})),Zy);return(0,sj.jsxs)(sj.Fragment,{children:[(0,sj.jsxs)(u_,{onChange:e=>{"earth"===e.target.value?r():n(e.target.value)},children:[(0,sj.jsx)("option",{value:"earth",children:"Earth"}),e.customers.map((e=>(0,sj.jsx)("option",{value:e.id,children:e.name},e.id)))]}),(0,sj.jsx)(pq,{children:(0,sj.jsxs)(jq,{onChange:e=>i("1"===e),value:t.lock?"1":"0",disabled:"earth"===t.name,children:[(0,sj.jsx)(Xq,{value:"1",children:"Lock"}),(0,sj.jsx)(Xq,{value:"0",children:"Watch"})]})})]})}const Zq=function({times:e,satellites:t}){if(e)return(0,sj.jsxs)(ly,{align:"center",children:[(0,sj.jsx)(xy,{width:"22ch",children:new Date(e[0]).toString().slice(0,21)}),(0,sj.jsxs)(sq,{closeOnSelect:!1,children:[(0,sj.jsx)(cq,{as:Cy,rightIcon:(0,sj.jsx)(oW,{}),children:"Controls"}),(0,sj.jsxs)(hq,{children:[(0,sj.jsx)(vq,{title:"Animation",children:(0,sj.jsx)(qq,{})}),(0,sj.jsx)(xq,{}),(0,sj.jsx)(vq,{title:"Camera",children:(0,sj.jsx)(Yq,{satellites:t})})]})]})]})},Jq={name:"Cyclical",consumption:3.2,type:"cyclical",duration:600,cycles:6,priority:1},$q={orbit:{epoch:"2022-09-16T04:30:45",meanMotionDot:3242e-8,bstar:.0084918,inclination:87.9147,rightAscension:147.6632,eccentricity:2947e-7,perigee:88.9181,meanAnomaly:343.2887,meanMotion:13.16587847,tle:"",constellation:"OneWeb"},power:{pvVoltage:4.7,currentDensity:170.5,area:.0064,batteryVoltage:3.6,capacity:1.125,powerStoringConsumption:1.2},duties:[{name:"Cyclical",consumption:3.2,type:"cyclical",duration:600,cycles:6,priority:1}]},Kq={satellites:[{orbit:{epoch:"2022-09-16T04:30:45",meanMotionDot:3242e-8,bstar:.0084918,inclination:87.9147,rightAscension:147.6632,eccentricity:2947e-7,perigee:88.9181,meanAnomaly:343.2887,meanMotion:13.16587847,tle:"",constellation:"OneWeb"},power:{pvVoltage:4.7,currentDensity:170.5,area:.0064,batteryVoltage:3.6,capacity:1.125,powerStoringConsumption:1.2},duties:[{name:"Cyclical",consumption:3.2,type:"cyclical",duration:600,cycles:6,priority:1}],name:"Satellite 1",id:_x()},{orbit:{epoch:"2022-09-16T05:06:16",meanMotionDot:1674e-8,bstar:.004385,inclination:87.9151,rightAscension:147.6525,eccentricity:2601e-7,perigee:76.2503,meanAnomaly:352.9196,meanMotion:13.16593118,tle:"",constellation:"OneWeb"},power:{pvVoltage:4.7,currentDensity:170.5,area:.0064,batteryVoltage:3.6,capacity:1.125,powerStoringConsumption:1.2},duties:[{name:"Cyclical",consumption:3.2,type:"cyclical",duration:600,cycles:6,priority:1}],name:"Satellite 2",id:_x()},{orbit:{epoch:"2022-09-16T07:37:44",meanMotionDot:2e-7,bstar:52609e-9,inclination:87.9156,rightAscension:147.6698,eccentricity:1678e-7,perigee:89.1265,meanAnomaly:358.4823,meanMotion:13.16600059,tle:"",constellation:"OneWeb"},power:{pvVoltage:4.7,currentDensity:170.5,area:.0064,batteryVoltage:3.6,capacity:1.125,powerStoringConsumption:1.2},duties:[{name:"Cyclical",consumption:3.2,type:"cyclical",duration:600,cycles:6,priority:1}],name:"Satellite 3",id:_x()}],spacePowers:3,offsets:{inclination:6,rightAscension:0,eccentricity:0,perigee:0,meanAnomaly:0,meanMotion:0}};var[Qq,eY,tY,nY]=yW(),[rY,iY]=cr({name:"TabsContext",errorMessage:"useTabsContext: `context` is undefined. Seems you forgot to wrap all tabs components within <Tabs />"});function aY(e,t){return`${e}--tab-${t}`}function oY(e,t){return`${e}--tabpanel-${t}`}var[sY,lY]=cr({name:"TabsStylesContext",errorMessage:"useTabsStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Tabs />\" "}),cY=fa((function(e,n){const r=ga("Tabs",e),{children:i,className:a,...o}=Wi(e),{htmlProps:s,descendants:l,...c}=function(e){const{defaultIndex:n,onChange:r,index:i,isManual:a,isLazy:o,lazyBehavior:s="unmount",orientation:l="horizontal",direction:c="ltr",...u}=e,[d,h]=(0,t.useState)(n??0),[f,p]=at({defaultValue:n??0,value:i,onChange:r});(0,t.useEffect)((()=>{null!=i&&h(i)}),[i]);const m=tY();return{id:ot(e.id,"tabs"),selectedIndex:f,focusedIndex:d,setSelectedIndex:p,setFocusedIndex:h,isManual:a,isLazy:o,lazyBehavior:s,orientation:l,descendants:m,direction:c,htmlProps:u}}(o),u=(0,t.useMemo)((()=>c),[c]),d=k(s,["isFitted"]);return t.createElement(Qq,{value:l},t.createElement(rY,{value:u},t.createElement(sY,{value:r},t.createElement(va.div,{className:ne("chakra-tabs",a),ref:n,...d,__css:r.root},i))))})),uY=fa((function(e,n){const r=lY(),i=function(e){const{isDisabled:t,isFocusable:n,...r}=e,{setSelectedIndex:i,isManual:a,id:o,setFocusedIndex:s,selectedIndex:l}=iY(),{index:c,register:u}=nY({disabled:t&&!n}),d=c===l;return{...dW({...r,ref:lr(u,e.ref),isDisabled:t,isFocusable:n,onClick:fe(e.onClick,(()=>{i(c)}))}),id:aY(o,c),role:"tab",tabIndex:d?0:-1,type:"button","aria-selected":d,"aria-controls":oY(o,c),onFocus:t?void 0:fe(e.onFocus,(()=>{s(c),!a&&(!t||!n)&&i(c)}))}}({...e,ref:n}),a={outline:"0",display:"flex",alignItems:"center",justifyContent:"center",...r.tab};return t.createElement(va.button,{...i,className:ne("chakra-tabs__tab",e.className),__css:a})})),dY=fa((function(e,n){const r=function(e){const{focusedIndex:n,orientation:r,direction:i}=iY(),a=eY(),o=(0,t.useCallback)((e=>{const t=()=>{const e=a.nextEnabled(n);e&&_e(e.node)},o=()=>{const e=a.prevEnabled(n);e&&_e(e.node)},s="horizontal"===r,l="vertical"===r,c=ae(e),u={["ltr"===i?"ArrowLeft":"ArrowRight"]:()=>s&&o(),["ltr"===i?"ArrowRight":"ArrowLeft"]:()=>s&&t(),ArrowDown:()=>l&&t(),ArrowUp:()=>l&&o(),Home:()=>{const e=a.firstEnabled();e&&_e(e.node)},End:()=>{const e=a.lastEnabled();e&&_e(e.node)}}[c];u&&(e.preventDefault(),u(e))}),[a,n,r,i]);return{...e,role:"tablist","aria-orientation":r,onKeyDown:fe(e.onKeyDown,o)}}({...e,ref:n}),i={display:"flex",...lY().tablist};return t.createElement(va.div,{...r,className:ne("chakra-tabs__tablist",e.className),__css:i})})),hY=fa((function(e,n){const r=function(e){const{isSelected:n,id:r,children:i,...a}=e,{isLazy:o,lazyBehavior:s}=iY(),l=(0,t.useRef)(!1);return n&&(l.current=!0),{tabIndex:0,...a,children:Se({hasBeenSelected:l.current,isSelected:n,isLazy:o,lazyBehavior:s})?i:null,role:"tabpanel",hidden:!n,id:r}}({...e,ref:n}),i=lY();return t.createElement(va.div,{outline:"0",...r,className:ne("chakra-tabs__tab-panel",e.className),__css:i.tabpanel})})),fY=fa((function(e,n){const r=function(e){const n=iY(),{id:r,selectedIndex:i}=n,a=ur(e.children).map(((e,n)=>(0,t.cloneElement)(e,{isSelected:n===i,id:oY(r,n),"aria-labelledby":aY(r,n)})));return{...e,children:a}}(e),i=lY();return t.createElement(va.div,{...r,width:"100%",ref:n,className:ne("chakra-tabs__tab-panels",e.className),__css:i.tabpanels})}));fa((function(e,n){const r=function(){const e=iY(),n=eY(),{selectedIndex:r,orientation:i}=e,a="horizontal"===i,o="vertical"===i,[s,l]=(0,t.useState)((()=>a?{left:0,width:0}:o?{top:0,height:0}:void 0)),[c,u]=(0,t.useState)(!1);return et((()=>{if(C(r))return;const e=n.item(r);if(C(e))return;a&&l({left:e.node.offsetLeft,width:e.node.offsetWidth}),o&&l({top:e.node.offsetTop,height:e.node.offsetHeight});const t=requestAnimationFrame((()=>{u(!0)}));return()=>{t&&cancelAnimationFrame(t)}}),[r,a,o,n]),{position:"absolute",transitionProperty:"left, right, top, bottom, height, width",transitionDuration:c?"200ms":"0ms",transitionTimingFunction:"cubic-bezier(0, 0, 0.2, 1)",...s}}(),i={...e.style,...r},a=lY();return t.createElement(va.div,{ref:n,...e,className:ne("chakra-tabs__tab-indicator",e.className),style:i,__css:a.indicator})}));var pY=i(667),mY=i.n(pY),gY=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===vY}(e)}(e)},vY="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function yY(e,t){return!1!==t.clone&&t.isMergeableObject(e)?xY((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function bY(e,t,n){return e.concat(t).map((function(e){return yY(e,n)}))}function xY(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||bY,n.isMergeableObject=n.isMergeableObject||gY;var r=Array.isArray(t);return r===Array.isArray(e)?r?n.arrayMerge(e,t,n):function(e,t,n){var r={};return n.isMergeableObject(e)&&Object.keys(e).forEach((function(t){r[t]=yY(e[t],n)})),Object.keys(t).forEach((function(i){n.isMergeableObject(t[i])&&e[i]?r[i]=xY(e[i],t[i],n):r[i]=yY(t[i],n)})),r}(e,t,n):yY(t,n)}xY.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return xY(e,n,t)}),{})};const _Y=xY,wY="object"==typeof global&&global&&global.Object===Object&&global;var MY="object"==typeof self&&self&&self.Object===Object&&self;const SY=wY||MY||Function("return this")(),AY=SY.Symbol;var EY=Object.prototype,CY=EY.hasOwnProperty,TY=EY.toString,RY=AY?AY.toStringTag:void 0;var PY=Object.prototype.toString;var LY=AY?AY.toStringTag:void 0;const DY=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":LY&&LY in Object(e)?function(e){var t=CY.call(e,RY),n=e[RY];try{e[RY]=void 0;var r=!0}catch(e){}var i=TY.call(e);return r&&(t?e[RY]=n:delete e[RY]),i}(e):function(e){return PY.call(e)}(e)},IY=function(e,t){return function(n){return e(t(n))}},kY=IY(Object.getPrototypeOf,Object),BY=function(e){return null!=e&&"object"==typeof e};var FY=Function.prototype,NY=Object.prototype,OY=FY.toString,zY=NY.hasOwnProperty,UY=OY.call(Object);const HY=function(e){if(!BY(e)||"[object Object]"!=DY(e))return!1;var t=kY(e);if(null===t)return!0;var n=zY.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&OY.call(n)==UY},GY=function(e,t){return e===t||e!=e&&t!=t},VY=function(e,t){for(var n=e.length;n--;)if(GY(e[n][0],t))return n;return-1};var jY=Array.prototype.splice;function WY(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}WY.prototype.clear=function(){this.__data__=[],this.size=0},WY.prototype.delete=function(e){var t=this.__data__,n=VY(t,e);return!(n<0||(n==t.length-1?t.pop():jY.call(t,n,1),--this.size,0))},WY.prototype.get=function(e){var t=this.__data__,n=VY(t,e);return n<0?void 0:t[n][1]},WY.prototype.has=function(e){return VY(this.__data__,e)>-1},WY.prototype.set=function(e,t){var n=this.__data__,r=VY(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};const XY=WY,qY=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},YY=function(e){if(!qY(e))return!1;var t=DY(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},ZY=SY["__core-js_shared__"];var JY,$Y=(JY=/[^.]+$/.exec(ZY&&ZY.keys&&ZY.keys.IE_PROTO||""))?"Symbol(src)_1."+JY:"";var KY=Function.prototype.toString;const QY=function(e){if(null!=e){try{return KY.call(e)}catch(e){}try{return e+""}catch(e){}}return""};var eZ=/^\[object .+?Constructor\]$/,tZ=Function.prototype,nZ=Object.prototype,rZ=tZ.toString,iZ=nZ.hasOwnProperty,aZ=RegExp("^"+rZ.call(iZ).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const oZ=function(e){return!(!qY(e)||(t=e,$Y&&$Y in t))&&(YY(e)?aZ:eZ).test(QY(e));var t},sZ=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return oZ(n)?n:void 0},lZ=sZ(SY,"Map"),cZ=sZ(Object,"create");var uZ=Object.prototype.hasOwnProperty;var dZ=Object.prototype.hasOwnProperty;function hZ(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}hZ.prototype.clear=function(){this.__data__=cZ?cZ(null):{},this.size=0},hZ.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},hZ.prototype.get=function(e){var t=this.__data__;if(cZ){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return uZ.call(t,e)?t[e]:void 0},hZ.prototype.has=function(e){var t=this.__data__;return cZ?void 0!==t[e]:dZ.call(t,e)},hZ.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=cZ&&void 0===t?"__lodash_hash_undefined__":t,this};const fZ=hZ,pZ=function(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map};function mZ(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}mZ.prototype.clear=function(){this.size=0,this.__data__={hash:new fZ,map:new(lZ||XY),string:new fZ}},mZ.prototype.delete=function(e){var t=pZ(this,e).delete(e);return this.size-=t?1:0,t},mZ.prototype.get=function(e){return pZ(this,e).get(e)},mZ.prototype.has=function(e){return pZ(this,e).has(e)},mZ.prototype.set=function(e,t){var n=pZ(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};const gZ=mZ;function vZ(e){var t=this.__data__=new XY(e);this.size=t.size}vZ.prototype.clear=function(){this.__data__=new XY,this.size=0},vZ.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},vZ.prototype.get=function(e){return this.__data__.get(e)},vZ.prototype.has=function(e){return this.__data__.has(e)},vZ.prototype.set=function(e,t){var n=this.__data__;if(n instanceof XY){var r=n.__data__;if(!lZ||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new gZ(r)}return n.set(e,t),this.size=n.size,this};const yZ=vZ,bZ=function(){try{var e=sZ(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),xZ=function(e,t,n){"__proto__"==t&&bZ?bZ(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n};var _Z=Object.prototype.hasOwnProperty;const wZ=function(e,t,n){var r=e[t];_Z.call(e,t)&&GY(r,n)&&(void 0!==n||t in e)||xZ(e,t,n)},MZ=function(e,t,n,r){var i=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var s=t[a],l=r?r(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),i?xZ(n,s,l):wZ(n,s,l)}return n},SZ=function(e){return BY(e)&&"[object Arguments]"==DY(e)};var AZ=Object.prototype,EZ=AZ.hasOwnProperty,CZ=AZ.propertyIsEnumerable,TZ=SZ(function(){return arguments}())?SZ:function(e){return BY(e)&&EZ.call(e,"callee")&&!CZ.call(e,"callee")};const RZ=TZ,PZ=Array.isArray;var LZ="object"==typeof exports&&exports&&!exports.nodeType&&exports,DZ=LZ&&"object"==typeof module&&module&&!module.nodeType&&module,IZ=DZ&&DZ.exports===LZ?SY.Buffer:void 0;const kZ=(IZ?IZ.isBuffer:void 0)||function(){return!1};var BZ=/^(?:0|[1-9]\d*)$/;const FZ=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&BZ.test(e))&&e>-1&&e%1==0&&e<t},NZ=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var OZ={};OZ["[object Float32Array]"]=OZ["[object Float64Array]"]=OZ["[object Int8Array]"]=OZ["[object Int16Array]"]=OZ["[object Int32Array]"]=OZ["[object Uint8Array]"]=OZ["[object Uint8ClampedArray]"]=OZ["[object Uint16Array]"]=OZ["[object Uint32Array]"]=!0,OZ["[object Arguments]"]=OZ["[object Array]"]=OZ["[object ArrayBuffer]"]=OZ["[object Boolean]"]=OZ["[object DataView]"]=OZ["[object Date]"]=OZ["[object Error]"]=OZ["[object Function]"]=OZ["[object Map]"]=OZ["[object Number]"]=OZ["[object Object]"]=OZ["[object RegExp]"]=OZ["[object Set]"]=OZ["[object String]"]=OZ["[object WeakMap]"]=!1;const zZ=function(e){return function(t){return e(t)}};var UZ="object"==typeof exports&&exports&&!exports.nodeType&&exports,HZ=UZ&&"object"==typeof module&&module&&!module.nodeType&&module,GZ=HZ&&HZ.exports===UZ&&wY.process;const VZ=function(){try{return HZ&&HZ.require&&HZ.require("util").types||GZ&&GZ.binding&&GZ.binding("util")}catch(e){}}();var jZ=VZ&&VZ.isTypedArray;const WZ=jZ?zZ(jZ):function(e){return BY(e)&&NZ(e.length)&&!!OZ[DY(e)]};var XZ=Object.prototype.hasOwnProperty;const qZ=function(e,t){var n=PZ(e),r=!n&&RZ(e),i=!n&&!r&&kZ(e),a=!n&&!r&&!i&&WZ(e),o=n||r||i||a,s=o?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=s.length;for(var c in e)!t&&!XZ.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||FZ(c,l))||s.push(c);return s};var YZ=Object.prototype;const ZZ=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||YZ)},JZ=IY(Object.keys,Object);var $Z=Object.prototype.hasOwnProperty;const KZ=function(e){return null!=e&&NZ(e.length)&&!YY(e)},QZ=function(e){return KZ(e)?qZ(e):function(e){if(!ZZ(e))return JZ(e);var t=[];for(var n in Object(e))$Z.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)};var eJ=Object.prototype.hasOwnProperty;const tJ=function(e){if(!qY(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=ZZ(e),n=[];for(var r in e)("constructor"!=r||!t&&eJ.call(e,r))&&n.push(r);return n},nJ=function(e){return KZ(e)?qZ(e,!0):tJ(e)};var rJ="object"==typeof exports&&exports&&!exports.nodeType&&exports,iJ=rJ&&"object"==typeof module&&module&&!module.nodeType&&module,aJ=iJ&&iJ.exports===rJ?SY.Buffer:void 0,oJ=aJ?aJ.allocUnsafe:void 0;const sJ=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t},lJ=function(){return[]};var cJ=Object.prototype.propertyIsEnumerable,uJ=Object.getOwnPropertySymbols,dJ=uJ?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}(uJ(e),(function(t){return cJ.call(e,t)})))}:lJ;const hJ=dJ,fJ=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e};var pJ=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)fJ(t,hJ(e)),e=kY(e);return t}:lJ;const mJ=pJ,gJ=function(e,t,n){var r=t(e);return PZ(e)?r:fJ(r,n(e))},vJ=function(e){return gJ(e,QZ,hJ)},yJ=function(e){return gJ(e,nJ,mJ)},bJ=sZ(SY,"DataView"),xJ=sZ(SY,"Promise"),_J=sZ(SY,"Set"),wJ=sZ(SY,"WeakMap");var MJ="[object Map]",SJ="[object Promise]",AJ="[object Set]",EJ="[object WeakMap]",CJ="[object DataView]",TJ=QY(bJ),RJ=QY(lZ),PJ=QY(xJ),LJ=QY(_J),DJ=QY(wJ),IJ=DY;(bJ&&IJ(new bJ(new ArrayBuffer(1)))!=CJ||lZ&&IJ(new lZ)!=MJ||xJ&&IJ(xJ.resolve())!=SJ||_J&&IJ(new _J)!=AJ||wJ&&IJ(new wJ)!=EJ)&&(IJ=function(e){var t=DY(e),n="[object Object]"==t?e.constructor:void 0,r=n?QY(n):"";if(r)switch(r){case TJ:return CJ;case RJ:return MJ;case PJ:return SJ;case LJ:return AJ;case DJ:return EJ}return t});const kJ=IJ;var BJ=Object.prototype.hasOwnProperty;const FJ=SY.Uint8Array,NJ=function(e){var t=new e.constructor(e.byteLength);return new FJ(t).set(new FJ(e)),t};var OJ=/\w*$/;var zJ=AY?AY.prototype:void 0,UJ=zJ?zJ.valueOf:void 0;const HJ=function(e,t,n){var r,i,a,o=e.constructor;switch(t){case"[object ArrayBuffer]":return NJ(e);case"[object Boolean]":case"[object Date]":return new o(+e);case"[object DataView]":return function(e,t){var n=t?NJ(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var n=t?NJ(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,n);case"[object Map]":case"[object Set]":return new o;case"[object Number]":case"[object String]":return new o(e);case"[object RegExp]":return(a=new(i=e).constructor(i.source,OJ.exec(i))).lastIndex=i.lastIndex,a;case"[object Symbol]":return r=e,UJ?Object(UJ.call(r)):{}}};var GJ=Object.create,VJ=function(){function e(){}return function(t){if(!qY(t))return{};if(GJ)return GJ(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();const jJ=VJ;var WJ=VZ&&VZ.isMap;const XJ=WJ?zZ(WJ):function(e){return BY(e)&&"[object Map]"==kJ(e)};var qJ=VZ&&VZ.isSet;const YJ=qJ?zZ(qJ):function(e){return BY(e)&&"[object Set]"==kJ(e)};var ZJ="[object Arguments]",JJ="[object Function]",$J={};$J[ZJ]=$J["[object Array]"]=$J["[object ArrayBuffer]"]=$J["[object DataView]"]=$J["[object Boolean]"]=$J["[object Date]"]=$J["[object Float32Array]"]=$J["[object Float64Array]"]=$J["[object Int8Array]"]=$J["[object Int16Array]"]=$J["[object Int32Array]"]=$J["[object Map]"]=$J["[object Number]"]=$J["[object Object]"]=$J["[object RegExp]"]=$J["[object Set]"]=$J["[object String]"]=$J["[object Symbol]"]=$J["[object Uint8Array]"]=$J["[object Uint8ClampedArray]"]=$J["[object Uint16Array]"]=$J["[object Uint32Array]"]=!0,$J["[object Error]"]=$J[JJ]=$J["[object WeakMap]"]=!1;const KJ=function e(t,n,r,i,a,o){var s,l=1&n,c=2&n,u=4&n;if(r&&(s=a?r(t,i,a,o):r(t)),void 0!==s)return s;if(!qY(t))return t;var d=PZ(t);if(d){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&BJ.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(t),!l)return sJ(t,s)}else{var h=kJ(t),f=h==JJ||"[object GeneratorFunction]"==h;if(kZ(t))return function(e,t){if(t)return e.slice();var n=e.length,r=oJ?oJ(n):new e.constructor(n);return e.copy(r),r}(t,l);if("[object Object]"==h||h==ZJ||f&&!a){if(s=c||f?{}:function(e){return"function"!=typeof e.constructor||ZZ(e)?{}:jJ(kY(e))}(t),!l)return c?function(e,t){return MZ(e,mJ(e),t)}(t,function(e,t){return e&&MZ(t,nJ(t),e)}(s,t)):function(e,t){return MZ(e,hJ(e),t)}(t,function(e,t){return e&&MZ(t,QZ(t),e)}(s,t))}else{if(!$J[h])return a?t:{};s=HJ(t,h,l)}}o||(o=new yZ);var p=o.get(t);if(p)return p;o.set(t,s),YJ(t)?t.forEach((function(i){s.add(e(i,n,r,i,t,o))})):XJ(t)&&t.forEach((function(i,a){s.set(a,e(i,n,r,a,t,o))}));var m=d?void 0:(u?c?yJ:vJ:c?nJ:QZ)(t);return function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););}(m||t,(function(i,a){m&&(i=t[a=i]),wZ(s,a,e(i,n,r,a,t,o))})),s},QJ=function(e){return KJ(e,4)},e$=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i},t$=function(e){return"symbol"==typeof e||BY(e)&&"[object Symbol]"==DY(e)};function n$(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(n$.Cache||gZ),n}n$.Cache=gZ;var r$,i$,a$,o$=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s$=/\\(\\)?/g,l$=(r$=function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o$,(function(e,n,r,i){t.push(r?i.replace(s$,"$1"):n||e)})),t},i$=n$(r$,(function(e){return 500===a$.size&&a$.clear(),e})),a$=i$.cache,i$);const c$=l$,u$=function(e){if("string"==typeof e||t$(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t};var d$=AY?AY.prototype:void 0,h$=d$?d$.toString:void 0;const f$=function e(t){if("string"==typeof t)return t;if(PZ(t))return e$(t,e)+"";if(t$(t))return h$?h$.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n},p$=function(e){return null==e?"":f$(e)},m$=function(e){return PZ(e)?e$(e,u$):t$(e)?[e]:sJ(c$(p$(e)))},g$=function(e){return KJ(e,5)};function v$(){return v$=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v$.apply(this,arguments)}function y$(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function b$(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var x$=function(e){return Array.isArray(e)&&0===e.length},_$=function(e){return"function"==typeof e},w$=function(e){return null!==e&&"object"==typeof e},M$=function(e){return String(Math.floor(Number(e)))===e},S$=function(e){return"[object String]"===Object.prototype.toString.call(e)},A$=function(e){return w$(e)&&_$(e.then)};function E$(e,t,n,r){void 0===r&&(r=0);for(var i=m$(t);e&&r<i.length;)e=e[i[r++]];return void 0===e?n:e}function C$(e,t,n){for(var r=QJ(e),i=r,a=0,o=m$(t);a<o.length-1;a++){var s=o[a],l=E$(e,o.slice(0,a+1));if(l&&(w$(l)||Array.isArray(l)))i=i[s]=QJ(l);else{var c=o[a+1];i=i[s]=M$(c)&&Number(c)>=0?[]:{}}}return(0===a?e:i)[o[a]]===n?e:(void 0===n?delete i[o[a]]:i[o[a]]=n,0===a&&void 0===n&&delete r[o[a]],r)}function T$(e,t,n,r){void 0===n&&(n=new WeakMap),void 0===r&&(r={});for(var i=0,a=Object.keys(e);i<a.length;i++){var o=a[i],s=e[o];w$(s)?n.get(s)||(n.set(s,!0),r[o]=Array.isArray(s)?[]:{},T$(s,t,n,r[o])):r[o]=t}return r}var R$=(0,t.createContext)(void 0);R$.displayName="FormikContext";var P$=R$.Provider,L$=R$.Consumer;function D$(e,t){switch(t.type){case"SET_VALUES":return v$({},e,{values:t.payload});case"SET_TOUCHED":return v$({},e,{touched:t.payload});case"SET_ERRORS":return mY()(e.errors,t.payload)?e:v$({},e,{errors:t.payload});case"SET_STATUS":return v$({},e,{status:t.payload});case"SET_ISSUBMITTING":return v$({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return v$({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return v$({},e,{values:C$(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return v$({},e,{touched:C$(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return v$({},e,{errors:C$(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return v$({},e,t.payload);case"SET_FORMIK_STATE":return t.payload(e);case"SUBMIT_ATTEMPT":return v$({},e,{touched:T$(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":case"SUBMIT_SUCCESS":return v$({},e,{isSubmitting:!1});default:return e}}var I$={},k$={};function B$(e){var n=e.validateOnChange,r=void 0===n||n,i=e.validateOnBlur,a=void 0===i||i,o=e.validateOnMount,s=void 0!==o&&o,l=e.isInitialValid,c=e.enableReinitialize,u=void 0!==c&&c,d=e.onSubmit,h=y$(e,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),f=v$({validateOnChange:r,validateOnBlur:a,validateOnMount:s,onSubmit:d},h),p=(0,t.useRef)(f.initialValues),m=(0,t.useRef)(f.initialErrors||I$),g=(0,t.useRef)(f.initialTouched||k$),v=(0,t.useRef)(f.initialStatus),y=(0,t.useRef)(!1),b=(0,t.useRef)({});(0,t.useEffect)((function(){return y.current=!0,function(){y.current=!1}}),[]);var x=(0,t.useReducer)(D$,{values:f.initialValues,errors:f.initialErrors||I$,touched:f.initialTouched||k$,status:f.initialStatus,isSubmitting:!1,isValidating:!1,submitCount:0}),_=x[0],w=x[1],M=(0,t.useCallback)((function(e,t){return new Promise((function(n,r){var i=f.validate(e,t);null==i?n(I$):A$(i)?i.then((function(e){n(e||I$)}),(function(e){r(e)})):n(i)}))}),[f.validate]),S=(0,t.useCallback)((function(e,t){var n=f.validationSchema,r=_$(n)?n(t):n,i=t&&r.validateAt?r.validateAt(t,e):function(e,t,n,r){void 0===n&&(n=!1),void 0===r&&(r={});var i=F$(e);return t[n?"validateSync":"validate"](i,{abortEarly:!1,context:r})}(e,r);return new Promise((function(e,t){i.then((function(){e(I$)}),(function(n){"ValidationError"===n.name?e(function(e){var t={};if(e.inner){if(0===e.inner.length)return C$(t,e.path,e.message);var n=e.inner,r=Array.isArray(n),i=0;for(n=r?n:n[Symbol.iterator]();;){var a;if(r){if(i>=n.length)break;a=n[i++]}else{if((i=n.next()).done)break;a=i.value}var o=a;E$(t,o.path)||(t=C$(t,o.path,o.message))}}return t}(n)):t(n)}))}))}),[f.validationSchema]),A=(0,t.useCallback)((function(e,t){return new Promise((function(n){return n(b.current[e].validate(t))}))}),[]),E=(0,t.useCallback)((function(e){var t=Object.keys(b.current).filter((function(e){return _$(b.current[e].validate)})),n=t.length>0?t.map((function(t){return A(t,E$(e,t))})):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(n).then((function(e){return e.reduce((function(e,n,r){return"DO_NOT_DELETE_YOU_WILL_BE_FIRED"===n||n&&(e=C$(e,t[r],n)),e}),{})}))}),[A]),C=(0,t.useCallback)((function(e){return Promise.all([E(e),f.validationSchema?S(e):{},f.validate?M(e):{}]).then((function(e){var t=e[0],n=e[1],r=e[2];return _Y.all([t,n,r],{arrayMerge:N$})}))}),[f.validate,f.validationSchema,E,M,S]),T=z$((function(e){return void 0===e&&(e=_.values),w({type:"SET_ISVALIDATING",payload:!0}),C(e).then((function(e){return y.current&&(w({type:"SET_ISVALIDATING",payload:!1}),w({type:"SET_ERRORS",payload:e})),e}))}));(0,t.useEffect)((function(){s&&!0===y.current&&mY()(p.current,f.initialValues)&&T(p.current)}),[s,T]);var R=(0,t.useCallback)((function(e){var t=e&&e.values?e.values:p.current,n=e&&e.errors?e.errors:m.current?m.current:f.initialErrors||{},r=e&&e.touched?e.touched:g.current?g.current:f.initialTouched||{},i=e&&e.status?e.status:v.current?v.current:f.initialStatus;p.current=t,m.current=n,g.current=r,v.current=i;var a=function(){w({type:"RESET_FORM",payload:{isSubmitting:!!e&&!!e.isSubmitting,errors:n,touched:r,status:i,values:t,isValidating:!!e&&!!e.isValidating,submitCount:e&&e.submitCount&&"number"==typeof e.submitCount?e.submitCount:0}})};if(f.onReset){var o=f.onReset(_.values,Y);A$(o)?o.then(a):a()}else a()}),[f.initialErrors,f.initialStatus,f.initialTouched]);(0,t.useEffect)((function(){!0!==y.current||mY()(p.current,f.initialValues)||(u&&(p.current=f.initialValues,R()),s&&T(p.current))}),[u,f.initialValues,R,s,T]),(0,t.useEffect)((function(){u&&!0===y.current&&!mY()(m.current,f.initialErrors)&&(m.current=f.initialErrors||I$,w({type:"SET_ERRORS",payload:f.initialErrors||I$}))}),[u,f.initialErrors]),(0,t.useEffect)((function(){u&&!0===y.current&&!mY()(g.current,f.initialTouched)&&(g.current=f.initialTouched||k$,w({type:"SET_TOUCHED",payload:f.initialTouched||k$}))}),[u,f.initialTouched]),(0,t.useEffect)((function(){u&&!0===y.current&&!mY()(v.current,f.initialStatus)&&(v.current=f.initialStatus,w({type:"SET_STATUS",payload:f.initialStatus}))}),[u,f.initialStatus,f.initialTouched]);var P=z$((function(e){if(b.current[e]&&_$(b.current[e].validate)){var t=E$(_.values,e),n=b.current[e].validate(t);return A$(n)?(w({type:"SET_ISVALIDATING",payload:!0}),n.then((function(e){return e})).then((function(t){w({type:"SET_FIELD_ERROR",payload:{field:e,value:t}}),w({type:"SET_ISVALIDATING",payload:!1})}))):(w({type:"SET_FIELD_ERROR",payload:{field:e,value:n}}),Promise.resolve(n))}return f.validationSchema?(w({type:"SET_ISVALIDATING",payload:!0}),S(_.values,e).then((function(e){return e})).then((function(t){w({type:"SET_FIELD_ERROR",payload:{field:e,value:t[e]}}),w({type:"SET_ISVALIDATING",payload:!1})}))):Promise.resolve()})),L=(0,t.useCallback)((function(e,t){var n=t.validate;b.current[e]={validate:n}}),[]),D=(0,t.useCallback)((function(e){delete b.current[e]}),[]),I=z$((function(e,t){return w({type:"SET_TOUCHED",payload:e}),(void 0===t?a:t)?T(_.values):Promise.resolve()})),k=(0,t.useCallback)((function(e){w({type:"SET_ERRORS",payload:e})}),[]),B=z$((function(e,t){var n=_$(e)?e(_.values):e;return w({type:"SET_VALUES",payload:n}),(void 0===t?r:t)?T(n):Promise.resolve()})),F=(0,t.useCallback)((function(e,t){w({type:"SET_FIELD_ERROR",payload:{field:e,value:t}})}),[]),N=z$((function(e,t,n){return w({type:"SET_FIELD_VALUE",payload:{field:e,value:t}}),(void 0===n?r:n)?T(C$(_.values,e,t)):Promise.resolve()})),O=(0,t.useCallback)((function(e,t){var n,r=t,i=e;if(!S$(e)){e.persist&&e.persist();var a=e.target?e.target:e.currentTarget,o=a.type,s=a.name,l=a.id,c=a.value,u=a.checked,d=(a.outerHTML,a.options),h=a.multiple;r=t||s||l,i=/number|range/.test(o)?(n=parseFloat(c),isNaN(n)?"":n):/checkbox/.test(o)?function(e,t,n){if("boolean"==typeof e)return Boolean(t);var r=[],i=!1,a=-1;if(Array.isArray(e))r=e,i=(a=e.indexOf(n))>=0;else if(!n||"true"==n||"false"==n)return Boolean(t);return t&&n&&!i?r.concat(n):i?r.slice(0,a).concat(r.slice(a+1)):r}(E$(_.values,r),u,c):d&&h?function(e){return Array.from(e).filter((function(e){return e.selected})).map((function(e){return e.value}))}(d):c}r&&N(r,i)}),[N,_.values]),z=z$((function(e){if(S$(e))return function(t){return O(t,e)};O(e)})),U=z$((function(e,t,n){return void 0===t&&(t=!0),w({type:"SET_FIELD_TOUCHED",payload:{field:e,value:t}}),(void 0===n?a:n)?T(_.values):Promise.resolve()})),H=(0,t.useCallback)((function(e,t){e.persist&&e.persist();var n=e.target,r=n.name,i=n.id,a=(n.outerHTML,t||r||i);U(a,!0)}),[U]),G=z$((function(e){if(S$(e))return function(t){return H(t,e)};H(e)})),V=(0,t.useCallback)((function(e){_$(e)?w({type:"SET_FORMIK_STATE",payload:e}):w({type:"SET_FORMIK_STATE",payload:function(){return e}})}),[]),j=(0,t.useCallback)((function(e){w({type:"SET_STATUS",payload:e})}),[]),W=(0,t.useCallback)((function(e){w({type:"SET_ISSUBMITTING",payload:e})}),[]),X=z$((function(){return w({type:"SUBMIT_ATTEMPT"}),T().then((function(e){var t=e instanceof Error;if(!t&&0===Object.keys(e).length){var n;try{if(void 0===(n=Z()))return}catch(e){throw e}return Promise.resolve(n).then((function(e){return y.current&&w({type:"SUBMIT_SUCCESS"}),e})).catch((function(e){if(y.current)throw w({type:"SUBMIT_FAILURE"}),e}))}if(y.current&&(w({type:"SUBMIT_FAILURE"}),t))throw e}))})),q=z$((function(e){e&&e.preventDefault&&_$(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&_$(e.stopPropagation)&&e.stopPropagation(),X().catch((function(e){console.warn("Warning: An unhandled error was caught from submitForm()",e)}))})),Y={resetForm:R,validateForm:T,validateField:P,setErrors:k,setFieldError:F,setFieldTouched:U,setFieldValue:N,setStatus:j,setSubmitting:W,setTouched:I,setValues:B,setFormikState:V,submitForm:X},Z=z$((function(){return d(_.values,Y)})),J=z$((function(e){e&&e.preventDefault&&_$(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&_$(e.stopPropagation)&&e.stopPropagation(),R()})),$=(0,t.useCallback)((function(e){return{value:E$(_.values,e),error:E$(_.errors,e),touched:!!E$(_.touched,e),initialValue:E$(p.current,e),initialTouched:!!E$(g.current,e),initialError:E$(m.current,e)}}),[_.errors,_.touched,_.values]),K=(0,t.useCallback)((function(e){return{setValue:function(t,n){return N(e,t,n)},setTouched:function(t,n){return U(e,t,n)},setError:function(t){return F(e,t)}}}),[N,U,F]),Q=(0,t.useCallback)((function(e){var t=w$(e),n=t?e.name:e,r=E$(_.values,n),i={name:n,value:r,onChange:z,onBlur:G};if(t){var a=e.type,o=e.value,s=e.as,l=e.multiple;"checkbox"===a?void 0===o?i.checked=!!r:(i.checked=!(!Array.isArray(r)||!~r.indexOf(o)),i.value=o):"radio"===a?(i.checked=r===o,i.value=o):"select"===s&&l&&(i.value=i.value||[],i.multiple=!0)}return i}),[G,z,_.values]),ee=(0,t.useMemo)((function(){return!mY()(p.current,_.values)}),[p.current,_.values]),te=(0,t.useMemo)((function(){return void 0!==l?ee?_.errors&&0===Object.keys(_.errors).length:!1!==l&&_$(l)?l(f):l:_.errors&&0===Object.keys(_.errors).length}),[l,ee,_.errors,f]);return v$({},_,{initialValues:p.current,initialErrors:m.current,initialTouched:g.current,initialStatus:v.current,handleBlur:G,handleChange:z,handleReset:J,handleSubmit:q,resetForm:R,setErrors:k,setFormikState:V,setFieldTouched:U,setFieldValue:N,setFieldError:F,setStatus:j,setSubmitting:W,setTouched:I,setValues:B,submitForm:X,validateForm:T,validateField:P,isValid:te,dirty:ee,unregisterField:D,registerField:L,getFieldProps:Q,getFieldMeta:$,getFieldHelpers:K,validateOnBlur:a,validateOnChange:r,validateOnMount:s})}function F$(e){var t=Array.isArray(e)?[]:{};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=String(n);!0===Array.isArray(e[r])?t[r]=e[r].map((function(e){return!0===Array.isArray(e)||HY(e)?F$(e):""!==e?e:void 0})):HY(e[r])?t[r]=F$(e[r]):t[r]=""!==e[r]?e[r]:void 0}return t}function N$(e,t,n){var r=e.slice();return t.forEach((function(t,i){if(void 0===r[i]){var a=!1!==n.clone&&n.isMergeableObject(t);r[i]=a?_Y(Array.isArray(t)?[]:{},t,n):t}else n.isMergeableObject(t)?r[i]=_Y(e[i],t,n):-1===e.indexOf(t)&&r.push(t)})),r}var O$="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?t.useLayoutEffect:t.useEffect;function z$(e){var n=(0,t.useRef)(e);return O$((function(){n.current=e})),(0,t.useCallback)((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.current.apply(void 0,t)}),[])}function U$(e){var n=function(n){return(0,t.createElement)(L$,null,(function(r){return(0,t.createElement)(e,Object.assign({},n,{formik:r}))}))},r=e.displayName||e.name||e.constructor&&e.constructor.name||"Component";return n.WrappedComponent=e,n.displayName="FormikConnect("+r+")",er()(n,e)}(0,t.forwardRef)((function(e,n){var r=e.action,i=y$(e,["action"]),a=null!=r?r:"#",o=(0,t.useContext)(R$),s=o.handleReset,l=o.handleSubmit;return(0,t.createElement)("form",Object.assign({onSubmit:l,ref:n,onReset:s,action:a},i))})).displayName="Form";var H$=function(e,t,n){var r=G$(e);return r.splice(t,0,n),r},G$=function(e){if(e){if(Array.isArray(e))return[].concat(e);var t=Object.keys(e).map((function(e){return parseInt(e)})).reduce((function(e,t){return t>e?t:e}),0);return Array.from(v$({},e,{length:t+1}))}return[]},V$=function(e){function n(t){var n;return(n=e.call(this,t)||this).updateArrayField=function(e,t,r){var i=n.props,a=i.name;(0,i.formik.setFormikState)((function(n){var i="function"==typeof r?r:e,o="function"==typeof t?t:e,s=C$(n.values,a,e(E$(n.values,a))),l=r?i(E$(n.errors,a)):void 0,c=t?o(E$(n.touched,a)):void 0;return x$(l)&&(l=void 0),x$(c)&&(c=void 0),v$({},n,{values:s,errors:r?C$(n.errors,a,l):n.errors,touched:t?C$(n.touched,a,c):n.touched})}))},n.push=function(e){return n.updateArrayField((function(t){return[].concat(G$(t),[g$(e)])}),!1,!1)},n.handlePush=function(e){return function(){return n.push(e)}},n.swap=function(e,t){return n.updateArrayField((function(n){return function(e,t,n){var r=G$(e),i=r[t];return r[t]=r[n],r[n]=i,r}(n,e,t)}),!0,!0)},n.handleSwap=function(e,t){return function(){return n.swap(e,t)}},n.move=function(e,t){return n.updateArrayField((function(n){return function(e,t,n){var r=G$(e),i=r[t];return r.splice(t,1),r.splice(n,0,i),r}(n,e,t)}),!0,!0)},n.handleMove=function(e,t){return function(){return n.move(e,t)}},n.insert=function(e,t){return n.updateArrayField((function(n){return H$(n,e,t)}),(function(t){return H$(t,e,null)}),(function(t){return H$(t,e,null)}))},n.handleInsert=function(e,t){return function(){return n.insert(e,t)}},n.replace=function(e,t){return n.updateArrayField((function(n){return function(e,t,n){var r=G$(e);return r[t]=n,r}(n,e,t)}),!1,!1)},n.handleReplace=function(e,t){return function(){return n.replace(e,t)}},n.unshift=function(e){var t=-1;return n.updateArrayField((function(n){var r=n?[e].concat(n):[e];return t<0&&(t=r.length),r}),(function(e){var n=e?[null].concat(e):[null];return t<0&&(t=n.length),n}),(function(e){var n=e?[null].concat(e):[null];return t<0&&(t=n.length),n})),t},n.handleUnshift=function(e){return function(){return n.unshift(e)}},n.handleRemove=function(e){return function(){return n.remove(e)}},n.handlePop=function(){return function(){return n.pop()}},n.remove=n.remove.bind(b$(n)),n.pop=n.pop.bind(b$(n)),n}var r,i;i=e,(r=n).prototype=Object.create(i.prototype),r.prototype.constructor=r,r.__proto__=i;var a=n.prototype;return a.componentDidUpdate=function(e){this.props.validateOnChange&&this.props.formik.validateOnChange&&!mY()(E$(e.formik.values,e.name),E$(this.props.formik.values,this.props.name))&&this.props.formik.validateForm(this.props.formik.values)},a.remove=function(e){var t;return this.updateArrayField((function(n){var r=n?G$(n):[];return t||(t=r[e]),_$(r.splice)&&r.splice(e,1),r}),!0,!0),t},a.pop=function(){var e;return this.updateArrayField((function(t){var n=t;return e||(e=n&&n.pop&&n.pop()),n}),!0,!0),e},a.render=function(){var e={push:this.push,pop:this.pop,swap:this.swap,move:this.move,insert:this.insert,replace:this.replace,unshift:this.unshift,remove:this.remove,handlePush:this.handlePush,handlePop:this.handlePop,handleSwap:this.handleSwap,handleMove:this.handleMove,handleInsert:this.handleInsert,handleReplace:this.handleReplace,handleUnshift:this.handleUnshift,handleRemove:this.handleRemove},n=this.props,r=n.component,i=n.render,a=n.children,o=n.name,s=v$({},e,{form:y$(n.formik,["validate","validationSchema"]),name:o});return r?(0,t.createElement)(r,s):i?i(s):a?"function"==typeof a?a(s):function(e){return 0===t.Children.count(e)}(a)?null:t.Children.only(a):null},n}(t.Component);V$.defaultProps={validateOnChange:!0};var j$=U$(V$),[W$,X$]=(t.Component,t.Component,cr({name:"EditableStylesContext",errorMessage:"useEditableStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Editable />\" "})),[q$,Y$]=cr({name:"EditableContext",errorMessage:"useEditableContext: context is undefined. Seems you forgot to wrap the editable components in `<Editable />`"});function Z$(e={}){const{onChange:n,onCancel:r,onSubmit:i,value:a,isDisabled:o,defaultValue:s,startWithEditView:l,isPreviewFocusable:c=!0,submitOnBlur:u=!0,selectAllOnFocus:d=!0,placeholder:h,onEdit:f,...p}=e,m=Boolean(l&&!o),[g,v]=(0,t.useState)(m),[y,b]=at({defaultValue:s||"",value:a,onChange:n}),[x,_]=(0,t.useState)(y),w=(0,t.useRef)(null),M=(0,t.useRef)(null),S=(0,t.useRef)(null),E=(0,t.useRef)(null),C=(0,t.useRef)(null);!function(e){const{ref:t,elements:n,enabled:r}=e,i=!!Q&&"Safari"===function(e){const{userAgent:t,vendor:n}=e,r=/(android)/i.test(t);switch(!0){case/CriOS/.test(t):return"Chrome for iOS";case/Edg\//.test(t):return"Edge";case r&&/Silk\//.test(t):return"Silk";case/Chrome/.test(t)&&/Google Inc/.test(n):return"Chrome";case/Firefox\/\d+\.\d+$/.test(t):return"Firefox";case r:return"AOSP";case/MSIE|Trident/.test(t):return"IE";case/Safari/.test(e.userAgent)&&/Apple Computer/.test(t):return"Safari";case/AppleWebKit/.test(t):return"WebKit";default:return null}}(window.navigator);dt((()=>$(t.current)),"pointerdown",(e=>{if(!i||!r)return;const a=e.target,o=(n??[t]).some((e=>ie("current"in e?e.current:e,a)));!le(a)&&o&&(e.preventDefault(),_e(a))}))}({ref:w,enabled:g,elements:[E,C]});const P=!g&&!o;et((()=>{g&&_e(w.current,{selectTextIfInput:d})}),[]),ct((()=>{g?(_e(w.current,{selectTextIfInput:d}),null==f||f()):_e(S.current)}),[g,f,d]);const L=(0,t.useCallback)((()=>{P&&v(!0)}),[P]),D=(0,t.useCallback)((()=>{_(y)}),[y]),I=(0,t.useCallback)((()=>{v(!1),b(x),null==r||r(x)}),[r,b,x]),k=(0,t.useCallback)((()=>{v(!1),_(y),null==i||i(y)}),[y,i]),B=(0,t.useCallback)((e=>{b(e.currentTarget.value)}),[b]),F=(0,t.useCallback)((e=>{const t=ae(e),n={Escape:I,Enter:e=>{e.shiftKey||e.metaKey||k()}}[t];n&&(e.preventDefault(),n(e))}),[I,k]),N=(0,t.useCallback)((e=>{const t=ae(e),n={Escape:I}[t];n&&(e.preventDefault(),n(e))}),[I]),O=function(e){return A(e)?function(e){return A(e)&&0===e.length}(e):T(e)?R(e):null==e||""===e}(y),z=(0,t.useCallback)((e=>{const t=function(e){const t=re(e.target??e.currentTarget);return e.relatedTarget??t}(e),n=ie(E.current,t),r=ie(C.current,t);!n&&!r&&(u?k():I())}),[u,k,I]),U=(0,t.useCallback)(((e={},t=null)=>{const n=P&&c?0:void 0;return{...e,ref:lr(t,M),children:O?h:y,hidden:g,"aria-disabled":te(o),tabIndex:n,onFocus:fe(e.onFocus,L,D)}}),[o,g,P,c,O,L,D,h,y]),H=(0,t.useCallback)(((e={},t=null)=>({...e,hidden:!g,placeholder:h,ref:lr(t,w),disabled:o,"aria-disabled":te(o),value:y,onBlur:fe(e.onBlur,z),onChange:fe(e.onChange,B),onKeyDown:fe(e.onKeyDown,F),onFocus:fe(e.onFocus,D)})),[o,g,z,B,F,D,h,y]),G=(0,t.useCallback)(((e={},t=null)=>({...e,hidden:!g,placeholder:h,ref:lr(t,w),disabled:o,"aria-disabled":te(o),value:y,onBlur:fe(e.onBlur,z),onChange:fe(e.onChange,B),onKeyDown:fe(e.onKeyDown,N),onFocus:fe(e.onFocus,D)})),[o,g,z,B,N,D,h,y]),V=(0,t.useCallback)(((e={},t=null)=>({"aria-label":"Edit",...e,type:"button",onClick:fe(e.onClick,L),ref:lr(t,S),disabled:o})),[L,o]),j=(0,t.useCallback)(((e={},t=null)=>({...e,"aria-label":"Submit",ref:lr(C,t),type:"button",onClick:fe(e.onClick,k),disabled:o})),[k,o]),W=(0,t.useCallback)(((e={},t=null)=>({"aria-label":"Cancel",id:"cancel",...e,ref:lr(E,t),type:"button",onClick:fe(e.onClick,I),disabled:o})),[I,o]);return{isEditing:g,isDisabled:o,isValueEmpty:O,value:y,onEdit:L,onCancel:I,onSubmit:k,getPreviewProps:U,getInputProps:H,getTextareaProps:G,getEditButtonProps:V,getSubmitButtonProps:j,getCancelButtonProps:W,htmlProps:p}}var J$=fa((function(e,n){const r=ga("Editable",e),i=Wi(e),{htmlProps:a,...o}=Z$(i),{isEditing:s,onSubmit:l,onCancel:c,onEdit:u}=o,d=ne("chakra-editable",e.className),h=he(e.children,{isEditing:s,onSubmit:l,onCancel:c,onEdit:u});return t.createElement(q$,{value:o},t.createElement(W$,{value:r},t.createElement(va.div,{ref:n,...a,className:d},h)))})),$$={fontSize:"inherit",fontWeight:"inherit",textAlign:"inherit",bg:"transparent"},K$=fa((function(e,n){const{getInputProps:r}=Y$(),i=X$(),a=r(e,n),o=ne("chakra-editable__input",e.className);return t.createElement(va.input,{...a,__css:{outline:0,...$$,...i.input},className:o})}));fa((function(e,n){const{getTextareaProps:r}=Y$(),i=X$(),a=r(e,n),o=ne("chakra-editable__textarea",e.className);return t.createElement(va.textarea,{...a,__css:{outline:0,...$$,...i.textarea},className:o})}));var Q$=fa((function(e,n){const{getPreviewProps:r}=Y$(),i=X$(),a=r(e,n),o=ne("chakra-editable__preview",e.className);return t.createElement(va.span,{...a,__css:{cursor:"text",display:"inline-block",...$$,...i.preview},className:o})})),eK=fa((function(e,n){const{htmlSize:r,...i}=e,a=ga("Input",i),o=n_(Wi(i)),s=ne("chakra-input",e.className);return t.createElement(va.input,{size:r,...o,__css:a.field,ref:n,className:s})}));eK.id="Input";var[tK,nK]=cr({name:"InputGroupStylesContext",errorMessage:"useInputGroupStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<InputGroup />\" "});fa((function(e,n){const r=ga("Input",e),{children:i,className:a,...o}=Wi(e),s=ne("chakra-input__group",a),l={},c=ur(i),u=r.field;c.forEach((e=>{r&&(u&&"InputLeftElement"===e.type.id&&(l.paddingStart=u.height??u.h),u&&"InputRightElement"===e.type.id&&(l.paddingEnd=u.height??u.h),"InputRightAddon"===e.type.id&&(l.borderEndRadius=0),"InputLeftAddon"===e.type.id&&(l.borderStartRadius=0))}));const d=c.map((n=>{var r,i;const a=O({size:(null==(r=n.props)?void 0:r.size)||e.size,variant:(null==(i=n.props)?void 0:i.variant)||e.variant});return"Input"!==n.type.id?(0,t.cloneElement)(n,a):(0,t.cloneElement)(n,Object.assign(a,l,n.props))}));return t.createElement(va.div,{className:s,ref:n,__css:{width:"100%",display:"flex",position:"relative"},...o},t.createElement(tK,{value:r},d))}));var rK={left:{marginEnd:"-1px",borderEndRadius:0,borderEndColor:"transparent"},right:{marginStart:"-1px",borderStartRadius:0,borderStartColor:"transparent"}},iK=va("div",{baseStyle:{flex:"0 0 auto",width:"auto",display:"flex",alignItems:"center",whiteSpace:"nowrap"}}),aK=fa((function(e,n){const{placement:r="left",...i}=e,a=rK[r]??{},o=nK();return t.createElement(iK,{ref:n,...i,__css:{...o.addon,...a}})}));fa((function(e,n){return t.createElement(aK,{ref:n,placement:"left",...e,className:ne("chakra-input__left-addon",e.className)})})).id="InputLeftAddon",fa((function(e,n){return t.createElement(aK,{ref:n,placement:"right",...e,className:ne("chakra-input__right-addon",e.className)})})).id="InputRightAddon";var oK=va("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),sK=fa((function(e,n){const{placement:r="left",...i}=e,a=nK(),o=a.field,s={["left"===r?"insetStart":"insetEnd"]:"0",width:(null==o?void 0:o.height)??(null==o?void 0:o.h),height:(null==o?void 0:o.height)??(null==o?void 0:o.h),fontSize:null==o?void 0:o.fontSize,...a.element};return t.createElement(oK,{ref:n,__css:s,...i})}));sK.id="InputElement",fa((function(e,n){const{className:r,...i}=e,a=ne("chakra-input__left-element",r);return t.createElement(sK,{ref:n,placement:"left",className:a,...i})})).id="InputLeftElement",fa((function(e,n){const{className:r,...i}=e,a=ne("chakra-input__right-element",r);return t.createElement(sK,{ref:n,placement:"right",className:a,...i})})).id="InputRightElement";const lK=function({showEditIcon:e}){const{isEditing:t,getSubmitButtonProps:n,getCancelButtonProps:r,getEditButtonProps:i}=function(){const{isEditing:e,getEditButtonProps:t,getCancelButtonProps:n,getSubmitButtonProps:r}=Y$();return{isEditing:e,getEditButtonProps:t,getCancelButtonProps:n,getSubmitButtonProps:r}}();return t?(0,sj.jsxs)(Ry,{justifyContent:"center",size:"sm",children:[(0,sj.jsx)(Py,{icon:(0,sj.jsx)(cW,{}),...n()}),(0,sj.jsx)(Py,{icon:(0,sj.jsx)(sW,{}),...r()})]}):e?(0,sj.jsx)(Py,{size:"sm",mx:2,icon:(0,sj.jsx)(aW,{}),...i()}):""},cK=function({value:e,name:t,form:n,onSubmit:r}){return(0,sj.jsx)(e_,{children:(0,sj.jsxs)(J$,{as:ly,submitOnBlur:!0,defaultValue:e,align:"center",width:"auto",cursor:"pointer",justify:"center",onSubmit:e=>{n.setFieldValue(`${t}`,e),r()},onCancel:e=>{n.setFieldValue(`${t}`,e)},children:[(0,sj.jsx)(Q$,{}),(0,sj.jsx)(eK,{textAlign:"center",as:K$,id:"name",name:t,type:"text",variant:"filled"}),(0,sj.jsx)(lK,{})]})})};function uK({satellite:e,index:t,satIndex:n,setSatIndex:r,form:i,remove:a}){return(0,sj.jsxs)(my,{as:ly,p:1,justify:"space-around",align:"center",borderRadius:5,layerStyle:t===n?"selected":"",onClick:()=>r(t),children:[(0,sj.jsx)(cK,{value:e.name,name:`satellites[${t}].name`,form:i,onSubmit:()=>r(t)}),(0,sj.jsx)(Cy,{type:"button",className:"secondary",onClick:e=>{e.stopPropagation(),t===n?r((()=>t>0?t-1:0)):t<n&&r((e=>e-1)),a(t)},children:(0,sj.jsx)(lW,{})})]},e.id)}const dK=function({formik:e,satIndex:t,setSatIndex:n}){return(0,sj.jsxs)(by,{children:[(0,sj.jsx)("h2",{align:"center",children:"Satellites"}),(0,sj.jsx)(P$,{value:e,children:(0,sj.jsx)(j$,{name:"satellites",children:e=>{const{push:r,remove:i,form:a}=e,{values:o}=a;return(0,sj.jsxs)(sj.Fragment,{children:[(0,sj.jsx)(py,{width:"80%",maxHeight:"20rem",overflowY:"auto",children:o.satellites.length>0&&o.satellites.map(((e,r)=>(0,sj.jsx)(uK,{satellite:e,index:r,satIndex:t,setSatIndex:n,form:a,remove:i},e.id)))}),(0,sj.jsx)(Cy,{m:5,onClick:()=>{r({...$q,name:`Satellite ${o.satellites.length+1}`,id:_x()}),n(o.satellites.length)},children:(0,sj.jsx)(rW,{})})]})}})})]})};var hK=["h","minH","height","minHeight"],fK=fa(((e,n)=>{const r=ma("Textarea",e),{className:i,rows:a,...o}=Wi(e),s=n_(o),l=a?k(r,hK):r;return t.createElement(va.textarea,{ref:n,rows:a,...s,className:ne("chakra-textarea",i),__css:l})}));function pK(e){return parseFloat(e.toString().replace(/[^\w.-]+/g,""))}function mK(e,t){return Math.max(Te(t),Te(e))}function gK(e,t,n){const r=pK(e);if(Number.isNaN(r))return;const i=mK(r,t);return Ce(r,n??i)}var vK=e=>t.createElement(Ec,{viewBox:"0 0 24 24",...e},t.createElement("path",{fill:"currentColor",d:"M21,5H3C2.621,5,2.275,5.214,2.105,5.553C1.937,5.892,1.973,6.297,2.2,6.6l9,12 c0.188,0.252,0.485,0.4,0.8,0.4s0.611-0.148,0.8-0.4l9-12c0.228-0.303,0.264-0.708,0.095-1.047C21.725,5.214,21.379,5,21,5z"})),yK=e=>t.createElement(Ec,{viewBox:"0 0 24 24",...e},t.createElement("path",{fill:"currentColor",d:"M12.8,5.4c-0.377-0.504-1.223-0.504-1.6,0l-9,12c-0.228,0.303-0.264,0.708-0.095,1.047 C2.275,18.786,2.621,19,3,19h18c0.379,0,0.725-0.214,0.895-0.553c0.169-0.339,0.133-0.744-0.095-1.047L12.8,5.4z"}));function bK(e,n,r,i){(0,t.useEffect)((()=>{if(!e.current||!i)return;const t=J(e.current),a=Array.isArray(n)?n:[n],o=new t.MutationObserver((e=>{for(const t of e)"attributes"===t.type&&t.attributeName&&a.includes(t.attributeName)&&r(t)}));return o.observe(e.current,{attributes:!0,attributeFilter:a}),()=>o.disconnect()}))}function xK(e,n){const[r,i]=(0,t.useState)(!1),[a,o]=(0,t.useState)(null),[s,l]=(0,t.useState)(!0),c=(0,t.useRef)(null),u=()=>clearTimeout(c.current);!function(r,i){const o=tt((()=>{"increment"===a&&e(),"decrement"===a&&n()}));(0,t.useEffect)((()=>{let e=null;return null!==i&&(e=window.setInterval((()=>o()),i)),()=>{e&&window.clearInterval(e)}}),[i,o])}(0,r?50:null);const d=(0,t.useCallback)((()=>{s&&e(),c.current=setTimeout((()=>{l(!1),i(!0),o("increment")}),300)}),[e,s]),h=(0,t.useCallback)((()=>{s&&n(),c.current=setTimeout((()=>{l(!1),i(!0),o("decrement")}),300)}),[n,s]),f=(0,t.useCallback)((()=>{l(!0),i(!1),u()}),[]);return ht(u),{up:d,down:h,stop:f,isSpinning:r}}var _K=/^[Ee0-9+\-.]$/;function wK(e){return _K.test(e)}var[MK,SK]=cr({name:"NumberInputStylesContext",errorMessage:"useNumberInputStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<NumberInput />\" "}),[AK,EK]=cr({name:"NumberInputContext",errorMessage:"useNumberInputContext: `context` is undefined. Seems you forgot to wrap number-input's components within <NumberInput />"}),CK=fa((function(e,n){const r=ga("NumberInput",e),i=r_(Wi(e)),{htmlProps:a,...o}=function(e={}){const{focusInputOnChange:n=!0,clampValueOnBlur:r=!0,keepWithinRange:i=!0,min:a=Ae,max:o=Ee,step:s=1,isReadOnly:l,isDisabled:c,isRequired:u,isInvalid:d,pattern:h="[0-9]*(.[0-9]+)?",inputMode:f="decimal",allowMouseWheel:p,id:m,onChange:g,precision:v,name:y,"aria-describedby":b,"aria-label":x,"aria-labelledby":_,onFocus:w,onBlur:M,onInvalid:S,getAriaValueText:A,isValidCharacter:E,format:C,parse:T,...R}=e,L=tt(w),D=tt(M),I=tt(S),k=tt(E??wK),B=tt(A),F=function(e={}){const{onChange:n,precision:r,defaultValue:i,value:a,step:o=1,min:s=Ae,max:l=Ee,keepWithinRange:c=!0}=e,u=tt(n),[d,h]=(0,t.useState)((()=>null==i?"":gK(i,o,r)??"")),[f,p]=it(a,d),m=mK(pK(p),o),g=r??m,v=(0,t.useCallback)((e=>{e!==p&&(f||h(e.toString()),null==u||u(e.toString(),pK(e)))}),[u,f,p]),y=(0,t.useCallback)((e=>{let t=e;return c&&(t=De(t,s,l)),Ce(t,g)}),[g,c,l,s]),b=(0,t.useCallback)(((e=o)=>{let t;t=""===p?pK(e):pK(p)+e,t=y(t),v(t)}),[y,o,v,p]),x=(0,t.useCallback)(((e=o)=>{let t;t=""===p?pK(-e):pK(p)-e,t=y(t),v(t)}),[y,o,v,p]),_=(0,t.useCallback)((()=>{let e;e=null==i?"":gK(i,o,r)??s,v(e)}),[i,r,o,v,s]),w=(0,t.useCallback)((e=>{const t=gK(e,o,g)??s;v(t)}),[g,o,v,s]),M=pK(p);return{isOutOfRange:M>l||M<s,isAtMax:M===l,isAtMin:M===s,precision:g,value:p,valueAsNumber:M,update:v,reset:_,increment:b,decrement:x,clamp:y,cast:w,setValue:h}}(e),{update:N,increment:O,decrement:z}=F,[U,H]=rt(),G=!(l||c),V=(0,t.useRef)(null),j=(0,t.useRef)(null),W=(0,t.useRef)(null),X=(0,t.useRef)(null),q=(0,t.useCallback)((e=>e.split("").filter(k).join("")),[k]),Y=(0,t.useCallback)((e=>(null==T?void 0:T(e))??e),[T]),Z=(0,t.useCallback)((e=>((null==C?void 0:C(e))??e).toString()),[C]);ct((()=>{(F.valueAsNumber>o||F.valueAsNumber<a)&&(null==I||I("rangeOverflow",Z(F.value),F.valueAsNumber))}),[F.valueAsNumber,F.value,Z,I]),et((()=>{if(V.current&&V.current.value!=F.value){const e=Y(V.current.value);F.setValue(q(e))}}),[Y,q]);const J=(0,t.useCallback)(((e=s)=>{G&&O(e)}),[O,G,s]),K=(0,t.useCallback)(((e=s)=>{G&&z(e)}),[z,G,s]),Q=xK(J,K);bK(W,"disabled",Q.stop,Q.isSpinning),bK(X,"disabled",Q.stop,Q.isSpinning);const ee=(0,t.useCallback)((e=>{if(e.nativeEvent.isComposing)return;const t=Y(e.currentTarget.value);N(q(t)),j.current={start:e.currentTarget.selectionStart,end:e.currentTarget.selectionEnd}}),[N,q,Y]),ne=(0,t.useCallback)((e=>{var t;null==L||L(e),j.current&&(e.target.selectionStart=j.current.start??(null==(t=e.currentTarget.value)?void 0:t.length),e.currentTarget.selectionEnd=j.current.end??e.currentTarget.selectionStart)}),[L]),re=(0,t.useCallback)((e=>{if(e.nativeEvent.isComposing)return;(function(e,t){if(null==e.key)return!0;const n=e.ctrlKey||e.altKey||e.metaKey;return!(1===e.key.length&&!n)||t(e.key)})(e,k)||e.preventDefault();const t=ie(e)*s,n={ArrowUp:()=>J(t),ArrowDown:()=>K(t),Home:()=>N(a),End:()=>N(o)}[ae(e)];n&&(e.preventDefault(),n(e))}),[k,s,J,K,N,a,o]),ie=e=>{let t=1;return(e.metaKey||e.ctrlKey)&&(t=.1),e.shiftKey&&(t=10),t},oe=(0,t.useMemo)((()=>{const e=null==B?void 0:B(F.value);return P(e)?F.value.toString()||void 0:e}),[F.value,B]),se=(0,t.useCallback)((()=>{let e=F.value;""!==e&&(F.valueAsNumber<a&&(e=a),F.valueAsNumber>o&&(e=o),F.cast(e))}),[F,o,a]),le=(0,t.useCallback)((()=>{H.off(),r&&se()}),[r,H,se]),ce=(0,t.useCallback)((()=>{n&&_e(V.current,{nextTick:!0})}),[n]),ue=(0,t.useCallback)((e=>{e.preventDefault(),Q.up(),ce()}),[ce,Q]),de=(0,t.useCallback)((e=>{e.preventDefault(),Q.down(),ce()}),[ce,Q]);nt("wheel",(e=>{const t=$(V.current).activeElement===V.current;if(!p||!t)return;e.preventDefault();const n=ie(e)*s,r=Math.sign(e.deltaY);-1===r?J(n):1===r&&K(n)}),V.current,{passive:!1});const he=(0,t.useCallback)(((e={},t=null)=>{const n=c||i&&F.isAtMax;return{...e,ref:lr(t,W),role:"button",tabIndex:-1,onPointerDown:fe(e.onPointerDown,(e=>{n||ue(e)})),onPointerLeave:fe(e.onPointerLeave,Q.stop),onPointerUp:fe(e.onPointerUp,Q.stop),disabled:n,"aria-disabled":te(n)}}),[F.isAtMax,i,ue,Q.stop,c]),pe=(0,t.useCallback)(((e={},t=null)=>{const n=c||i&&F.isAtMin;return{...e,ref:lr(t,X),role:"button",tabIndex:-1,onPointerDown:fe(e.onPointerDown,(e=>{n||de(e)})),onPointerLeave:fe(e.onPointerLeave,Q.stop),onPointerUp:fe(e.onPointerUp,Q.stop),disabled:n,"aria-disabled":te(n)}}),[F.isAtMin,i,de,Q.stop,c]),me=(0,t.useCallback)(((e={},t=null)=>({name:y,inputMode:f,type:"text",pattern:h,"aria-labelledby":_,"aria-label":x,"aria-describedby":b,id:m,disabled:c,...e,readOnly:e.readOnly??l,"aria-readonly":e.readOnly??l,"aria-required":e.required??u,required:e.required??u,ref:lr(V,t),value:Z(F.value),role:"spinbutton","aria-valuemin":a,"aria-valuemax":o,"aria-valuenow":Number.isNaN(F.valueAsNumber)?void 0:F.valueAsNumber,"aria-invalid":te(d??F.isOutOfRange),"aria-valuetext":oe,autoComplete:"off",autoCorrect:"off",onChange:fe(e.onChange,ee),onKeyDown:fe(e.onKeyDown,re),onFocus:fe(e.onFocus,ne,H.on),onBlur:fe(e.onBlur,D,le)})),[y,f,h,_,x,Z,b,m,c,u,l,d,F.value,F.valueAsNumber,F.isOutOfRange,a,o,oe,ee,re,ne,H.on,D,le]);return{value:Z(F.value),valueAsNumber:F.valueAsNumber,isFocused:U,isDisabled:c,isReadOnly:l,getIncrementButtonProps:he,getDecrementButtonProps:pe,getInputProps:me,htmlProps:R}}(i),s=(0,t.useMemo)((()=>o),[o]);return t.createElement(AK,{value:s},t.createElement(MK,{value:r},t.createElement(va.div,{...a,ref:n,className:ne("chakra-numberinput",e.className),__css:{position:"relative",zIndex:0,...r.root}})))})),TK=fa((function(e,n){const r=SK();return t.createElement(va.div,{"aria-hidden":!0,ref:n,...e,__css:{display:"flex",flexDirection:"column",position:"absolute",top:"0",insetEnd:"0px",margin:"1px",height:"calc(100% - 2px)",zIndex:1,...r.stepperGroup}})})),RK=fa((function(e,n){const{getInputProps:r}=EK(),i=r(e,n),a=SK();return t.createElement(va.input,{...i,className:ne("chakra-numberinput__field",e.className),__css:{width:"100%",...a.field}})})),PK=va("div",{baseStyle:{display:"flex",justifyContent:"center",alignItems:"center",flex:1,transitionProperty:"common",transitionDuration:"normal",userSelect:"none",cursor:"pointer",lineHeight:"normal"}}),LK=fa((function(e,n){const r=SK(),{getDecrementButtonProps:i}=EK(),a=i(e,n);return t.createElement(PK,{...a,__css:r.stepper},e.children??t.createElement(vK,null))})),DK=fa((function(e,n){const{getIncrementButtonProps:r}=EK(),i=r(e,n),a=SK();return t.createElement(PK,{...i,__css:a.stepper},e.children??t.createElement(yK,null))}));const IK=function({value:e,min:t,max:n,label:r,name:i,units:a,step:o,formik:s}){const l=E$(s.errors,i);return(0,sj.jsxs)(e_,{maxWidth:"40%",p:5,isInvalid:l,as:ly,direction:"column",align:"start",children:[(0,sj.jsx)(s_,{htmlFor:`${i}`,children:r}),(0,sj.jsxs)(ly,{gap:1,align:"center",children:[(0,sj.jsxs)(CK,{id:i,name:`${i}`,onChange:e=>{s.setFieldValue(`${i}`,e)},value:e,step:o,min:t,max:n,flex:3,children:[(0,sj.jsx)(RK,{}),(0,sj.jsxs)(TK,{children:[(0,sj.jsx)(DK,{}),(0,sj.jsx)(LK,{})]})]}),(0,sj.jsx)(xy,{flex:1,align:"left",children:a})]}),(0,sj.jsx)(o_,{children:l})]})},kK=[{id:"meanMotionDot",step:1e-6,label:"1st Derivative of Mean Motion",min:-1,max:1,units:(0,sj.jsxs)("span",{children:["revs day",(0,sj.jsx)("sup",{children:"-2"})]})},{id:"bstar",step:1e-4,label:"BSTAR",min:-2,max:2,units:(0,sj.jsxs)("span",{children:["m",(0,sj.jsx)("sup",{children:"-1"})]})},{id:"inclination",step:.01,label:"Inclination",min:0,max:360,units:"°"},{id:"rightAscension",step:.01,label:"Right Ascension",min:0,max:360,units:"°"},{id:"eccentricity",step:.001,label:"Eccentricity",min:0,max:1,units:"°"},{id:"perigee",step:.001,label:"Perigee",min:0,max:360,units:"°"},{id:"meanAnomaly",step:.01,label:"Mean Anomaly",min:0,max:360,units:"°"},{id:"meanMotion",step:.01,label:"Mean Motion",min:0,max:16,units:(0,sj.jsxs)("span",{children:["revs day",(0,sj.jsx)("sup",{children:"-1"})]})}];function BK({formik:e,satIndex:t,constellations:n}){const r=n=>{n.preventDefault();const{tles:r}=(0,wx.parseTLEs)(e.values.satellites[t].orbit.tle)[0],i=(0,wx.twoline2satrec)(r.tle1,r.tle2),a={epoch:i.epochdatetimelocal,meanMotionDot:i.ndottle,bstar:i.bstar,inclination:i.inclotle,rightAscension:i.nodeotle,eccentricity:i.ecco,perigee:i.argpotle,meanAnomaly:i.motle,meanMotion:i.notle,tle:""};Object.entries(a).forEach((n=>{e.setFieldValue(`satellites[${t}].orbit.[${n[0]}]`,n[1])}))};return(0,sj.jsxs)(sj.Fragment,{children:[(0,sj.jsxs)(ly,{justify:"space-around",wrap:"wrap",children:[(0,sj.jsxs)(e_,{width:"65%",children:[(0,sj.jsx)(s_,{htmlFor:`satellites[${t}].orbit.epoch`,children:"Epoch"}),(0,sj.jsx)(eK,{id:"epoch",name:`satellites[${t}].orbit.epoch`,type:"datetime-local",variant:"filled",onChange:e.handleChange,value:e.values.satellites[t].orbit.epoch}),e.errors.epoch?(0,sj.jsx)(o_,{children:e.errors.orbit.epoch}):(0,sj.jsx)(t_,{})]}),kK.map((n=>(0,sj.jsx)(IK,{value:e.values.satellites[t].orbit[n.id],step:n.step,name:`satellites[${t}].orbit[${n.id}]`,units:n.units,formik:e,label:n.label,min:n.min,max:n.max},n.id)))]}),(0,sj.jsxs)(cY,{p:10,minWidth:"50%",maxWidth:"80%",align:"center",children:[(0,sj.jsxs)(dY,{children:[(0,sj.jsx)(uY,{children:"Choose"}),(0,sj.jsx)(uY,{children:"Paste TLE"})]}),(0,sj.jsxs)(fY,{children:[(0,sj.jsx)(hY,{pt:10,children:(0,sj.jsxs)(ly,{wrap:"wrap",justify:"space-around",children:[(0,sj.jsxs)(e_,{width:"40%",children:[(0,sj.jsx)(s_,{htmlFor:`satellites[${t}].orbit.constellation`,children:"Constellation"}),(0,sj.jsx)(u_,{name:`satellites[${t}].orbit.constellation`,value:e.values.satellites[t].orbit.constellation,onChange:e.handleChange,children:n.map((e=>(0,sj.jsx)("option",{value:e.name,children:e.name},e.name)))})]}),(0,sj.jsxs)(e_,{width:"40%",children:[(0,sj.jsx)(s_,{htmlFor:`satellites[${t}].orbit.tle`,children:"Satellite"}),(0,sj.jsx)(u_,{name:`satellites[${t}].orbit.tle`,value:e.values.satellites[t].orbit.tle,onChange:e.handleChange,children:n.find((n=>n.name===e.values.satellites[t].orbit.constellation)).tles.map((e=>(0,sj.jsx)("option",{value:`${e.name}\n${e.tles.tle1}\n${e.tles.tle2}`,children:e.name},e.name)))})]}),(0,sj.jsx)(Cy,{onClick:r,m:3,children:"Extract"})]})}),(0,sj.jsxs)(hY,{pt:10,children:[(0,sj.jsxs)(e_,{width:"90%",children:[(0,sj.jsx)(s_,{htmlFor:`satellites[${t}].orbit.tle`,children:"TLE Input"}),(0,sj.jsx)(fK,{id:"tle",name:`satellites[${t}].orbit.tle`,onChange:e.handleChange,value:e.values.satellites[t].orbit.tle,placeholder:"Enter TLE here"}),(0,sj.jsx)(o_,{children:e.errors.tle})]}),(0,sj.jsx)(Cy,{onClick:r,m:3,children:"Extract"})]})]})]})]})}const FK=[{id:"pvVoltage",step:.1,label:"Voltage",min:0,units:"V"},{id:"currentDensity",step:.1,label:"Current Density",min:0,units:(0,sj.jsxs)("span",{children:["Am",(0,sj.jsx)("sup",{children:"-2"})]})},{id:"area",step:.001,label:"Area",min:0,units:(0,sj.jsxs)("span",{children:["m",(0,sj.jsx)("sup",{children:"2"})]})}],NK=function({satIndex:e,formik:t}){return(0,sj.jsxs)(sj.Fragment,{children:[(0,sj.jsx)("h3",{children:"Photovoltaic"}),(0,sj.jsx)(ly,{wrap:"wrap",justify:"space-around",mb:10,children:FK.map((n=>(0,sj.jsx)(IK,{value:t.values.satellites[e].power[n.id],step:n.step,name:`satellites[${e}].power[${n.id}]`,units:n.units,formik:t,label:n.label,min:n.min,max:n.max},n.id)))}),(0,sj.jsx)("h3",{children:"Battery"}),(0,sj.jsx)(ly,{wrap:"wrap",justify:"space-around",children:[{id:"batteryVoltage",step:.1,label:"Voltage",min:0,units:"V"},{id:"capacity",step:.01,label:"Capacity",min:0,units:"Ah"},{id:"powerStoringConsumption",step:.1,label:"Power storing consumption",min:0,units:"W"}].map((n=>(0,sj.jsx)(IK,{value:t.values.satellites[e].power[n.id],step:n.step,name:`satellites[${e}].power[${n.id}]`,units:n.units,formik:t,label:n.label,min:n.min,max:n.max},n.id)))})]})};var OK={ease:[.25,.1,.25,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1],easeInOut:[.4,0,.2,1]},zK={position:{left:0,top:0,bottom:0,width:"100%"},enter:{x:0,y:0},exit:{x:"-100%",y:0}},UK={position:{right:0,top:0,bottom:0,width:"100%"},enter:{x:0,y:0},exit:{x:"100%",y:0}},HK={position:{top:0,left:0,right:0,maxWidth:"100vw"},enter:{x:0,y:0},exit:{x:0,y:"-100%"}},GK={position:{bottom:0,left:0,right:0,maxWidth:"100vw"},enter:{x:0,y:0},exit:{x:0,y:"100%"}};function VK(e){switch((null==e?void 0:e.direction)??"right"){case"right":default:return UK;case"left":return zK;case"bottom":return GK;case"top":return HK}}var jK={enter:{duration:.2,ease:OK.easeOut},exit:{duration:.1,ease:OK.easeIn}},WK=(e,t)=>({...e,delay:"number"==typeof t?t:null==t?void 0:t.enter}),XK=(e,t)=>({...e,delay:"number"==typeof t?t:null==t?void 0:t.exit}),qK=e=>null!=e&&parseInt(e.toString(),10)>0,YK={exit:{height:{duration:.2,ease:OK.ease},opacity:{duration:.3,ease:OK.ease}},enter:{height:{duration:.3,ease:OK.ease},opacity:{duration:.4,ease:OK.ease}}},ZK={exit:({animateOpacity:e,startingHeight:t,transition:n,transitionEnd:r,delay:i})=>({...e&&{opacity:qK(t)?1:0},height:t,transitionEnd:null==r?void 0:r.exit,transition:(null==n?void 0:n.exit)??XK(YK.exit,i)}),enter:({animateOpacity:e,endingHeight:t,transition:n,transitionEnd:r,delay:i})=>({...e&&{opacity:1},height:t,transitionEnd:null==r?void 0:r.enter,transition:(null==n?void 0:n.enter)??WK(YK.enter,i)})},JK=(0,t.forwardRef)(((e,n)=>{const{in:r,unmountOnExit:i,animateOpacity:o=!0,startingHeight:s=0,endingHeight:l="auto",style:c,className:u,transition:d,transitionEnd:h,...f}=e,[p,m]=(0,t.useState)(!1);(0,t.useEffect)((()=>{const e=setTimeout((()=>{m(!0)}));return()=>clearTimeout(e)}),[]),ve({condition:Boolean(s>0&&i),message:"startingHeight and unmountOnExit are mutually exclusive. You can't use them together"});const g=parseFloat(s.toString())>0,v={startingHeight:s,endingHeight:l,animateOpacity:o,transition:p?d:{enter:{duration:0}},transitionEnd:a()(h,{exit:i?void 0:{display:g?"block":"none"}})},y=!i||r,b=r||i?"enter":"exit";return t.createElement(Tu,{initial:!1,custom:v},y&&t.createElement(Wv.div,{ref:n,...f,className:ne("chakra-collapse",u),style:{overflow:"hidden",display:"block",...c},custom:v,variants:ZK,initial:!!i&&"exit",animate:b,exit:"exit"}))})),$K={enter:({transition:e,transitionEnd:t,delay:n}={})=>({opacity:1,transition:(null==e?void 0:e.enter)??WK(jK.enter,n),transitionEnd:null==t?void 0:t.enter}),exit:({transition:e,transitionEnd:t,delay:n}={})=>({opacity:0,transition:(null==e?void 0:e.exit)??XK(jK.exit,n),transitionEnd:null==t?void 0:t.exit})},KK={initial:"exit",animate:"enter",exit:"exit",variants:$K};(0,t.forwardRef)((function(e,n){const{unmountOnExit:r,in:i,className:a,transition:o,transitionEnd:s,delay:l,...c}=e,u=i||r?"enter":"exit",d=!r||i&&r,h={transition:o,transitionEnd:s,delay:l};return t.createElement(Tu,{custom:h},d&&t.createElement(Wv.div,{ref:n,className:ne("chakra-fade",a),custom:h,...KK,animate:u,...c}))}));var QK={exit:({reverse:e,initialScale:t,transition:n,transitionEnd:r,delay:i})=>({opacity:0,...e?{scale:t,transitionEnd:null==r?void 0:r.exit}:{transitionEnd:{scale:t,...null==r?void 0:r.exit}},transition:(null==n?void 0:n.exit)??XK(jK.exit,i)}),enter:({transitionEnd:e,transition:t,delay:n})=>({opacity:1,scale:1,transition:(null==t?void 0:t.enter)??WK(jK.enter,n),transitionEnd:null==e?void 0:e.enter})},eQ={initial:"exit",animate:"enter",exit:"exit",variants:QK};(0,t.forwardRef)((function(e,n){const{unmountOnExit:r,in:i,reverse:a=!0,initialScale:o=.95,className:s,transition:l,transitionEnd:c,delay:u,...d}=e,h=!r||i&&r,f=i||r?"enter":"exit",p={initialScale:o,reverse:a,transition:l,transitionEnd:c,delay:u};return t.createElement(Tu,{custom:p},h&&t.createElement(Wv.div,{ref:n,className:ne("chakra-offset-slide",s),...eQ,animate:f,custom:p,...d}))}));var tQ={exit:{duration:.15,ease:OK.easeInOut},enter:{type:"spring",damping:25,stiffness:180}},nQ={exit:({direction:e,transition:t,transitionEnd:n,delay:r})=>{const{exit:i}=VK({direction:e});return{...i,transition:(null==t?void 0:t.exit)??XK(tQ.exit,r),transitionEnd:null==n?void 0:n.exit}},enter:({direction:e,transitionEnd:t,transition:n,delay:r})=>{const{enter:i}=VK({direction:e});return{...i,transition:(null==n?void 0:n.enter)??WK(tQ.enter,r),transitionEnd:null==t?void 0:t.enter}}},rQ=(0,t.forwardRef)((function(e,n){const{direction:r="right",style:i,unmountOnExit:a,in:o,className:s,transition:l,transitionEnd:c,delay:u,...d}=e,h=VK({direction:r}),f=Object.assign({position:"fixed"},h.position,i),p=!a||o&&a,m=o||a?"enter":"exit",g={transitionEnd:c,transition:l,direction:r,delay:u};return t.createElement(Tu,{custom:g},p&&t.createElement(Wv.div,{...d,ref:n,initial:"exit",className:ne("chakra-slide",s),animate:m,exit:"exit",custom:g,variants:nQ,style:f}))})),iQ={initial:({offsetX:e,offsetY:t,transition:n,transitionEnd:r,delay:i})=>({opacity:0,x:e,y:t,transition:(null==n?void 0:n.exit)??XK(jK.exit,i),transitionEnd:null==r?void 0:r.exit}),enter:({transition:e,transitionEnd:t,delay:n})=>({opacity:1,x:0,y:0,transition:(null==e?void 0:e.enter)??WK(jK.enter,n),transitionEnd:null==t?void 0:t.enter}),exit:({offsetY:e,offsetX:t,transition:n,transitionEnd:r,reverse:i,delay:a})=>{const o={x:t,y:e};return{opacity:0,transition:(null==n?void 0:n.exit)??XK(jK.exit,a),...i?{...o,transitionEnd:null==r?void 0:r.exit}:{transitionEnd:{...o,...null==r?void 0:r.exit}}}}},aQ={initial:"initial",animate:"enter",exit:"exit",variants:iQ};(0,t.forwardRef)((function(e,n){const{unmountOnExit:r,in:i,reverse:a=!0,className:o,offsetX:s=0,offsetY:l=8,transition:c,transitionEnd:u,delay:d,...h}=e,f=!r||i&&r,p=i||r?"enter":"exit",m={offsetX:s,offsetY:l,reverse:a,transition:c,transitionEnd:u,delay:d};return t.createElement(Tu,{custom:m},f&&t.createElement(Wv.div,{ref:n,className:ne("chakra-offset-slide",o),custom:m,...aQ,animate:p,...h}))}));var[oQ,sQ]=cr({name:"AccordionStylesContext",errorMessage:"useAccordionStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Accordion />\" "}),[lQ,cQ]=cr({name:"AccordionItemContext",errorMessage:"useAccordionItemContext: `context` is undefined. Seems you forgot to wrap the accordion item parts in `<AccordionItem />` "}),[uQ,dQ,hQ,fQ]=yW();var[pQ,mQ]=cr({name:"AccordionContext",errorMessage:"useAccordionContext: `context` is undefined. Seems you forgot to wrap the accordion components in `<Accordion />`"});var gQ=fa((function({children:e,reduceMotion:n,...r},i){const a=ga("Accordion",r),o=Wi(r),{htmlProps:s,descendants:l,...c}=function(e){const{onChange:n,defaultIndex:r,index:i,allowMultiple:a,allowToggle:o,...s}=e;!function(e){const t=e.index||e.defaultIndex,n=!C(t)&&!A(t)&&e.allowMultiple;ve({condition:!!n,message:`If 'allowMultiple' is passed, then 'index' or 'defaultIndex' must be an array. You passed: ${typeof t},`})}(e),function(e){ve({condition:!(!e.allowMultiple||!e.allowToggle),message:"If 'allowMultiple' is passed, 'allowToggle' will be ignored. Either remove 'allowToggle' or 'allowMultiple' depending on whether you want multiple accordions visible or not"})}(e);const l=hQ(),[c,u]=(0,t.useState)(-1);ht((()=>{u(-1)}));const[d,h]=at({value:i,defaultValue:()=>a?r??[]:r??-1,onChange:n});return{index:d,setIndex:h,htmlProps:s,getAccordionItemProps:e=>{let t=!1;return null!==e&&(t=A(d)?d.includes(e):d===e),{isOpen:t,onChange:t=>{if(null!==e)if(a&&A(d)){const n=t?M(d,e):function(e,t){return e.filter((e=>e!==t))}(d,e);h(n)}else t?h(e):o&&h(-1)}}},focusedIndex:c,setFocusedIndex:u,descendants:l}}(o),u=(0,t.useMemo)((()=>({...c,reduceMotion:!!n})),[c,n]);return t.createElement(uQ,{value:l},t.createElement(pQ,{value:u},t.createElement(oQ,{value:a},t.createElement(va.div,{ref:i,...s,className:ne("chakra-accordion",r.className),__css:a.root},e))))})),vQ=fa((function(e,n){const{getButtonProps:r}=cQ(),i=r(e,n),a={display:"flex",alignItems:"center",width:"100%",outline:0,...sQ().button};return t.createElement(va.button,{...i,className:ne("chakra-accordion__button",e.className),__css:a})}));function yQ(e){const{isOpen:n,isDisabled:r}=cQ(),{reduceMotion:i}=mQ(),a=ne("chakra-accordion__icon",e.className),o={opacity:r?.4:1,transform:n?"rotate(-180deg)":void 0,transition:i?void 0:"transform 0.2s",transformOrigin:"center",...sQ().icon};return t.createElement(Ec,{viewBox:"0 0 24 24","aria-hidden":!0,className:a,__css:o,...e},t.createElement("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}))}var bQ=fa((function(e,n){const{children:r,className:i}=e,{htmlProps:a,...o}=function(e){const{isDisabled:n,isFocusable:r,id:i,...a}=e,{getAccordionItemProps:o,setFocusedIndex:s}=mQ(),l=(0,t.useRef)(null),[c,u]=st(i,"accordion-button","accordion-panel");!function(e){ve({condition:!(!e.isFocusable||e.isDisabled),message:"Using only 'isFocusable', this prop is reserved for situations where you pass 'isDisabled' but you still want the element to receive focus (A11y). Either remove it or pass 'isDisabled' as well.\n    "})}(e);const{register:d,index:h,descendants:f}=fQ({disabled:n&&!r}),{isOpen:p,onChange:m}=o(-1===h?null:h);!function(e){ve({condition:e.isOpen&&!!e.isDisabled,message:"Cannot open a disabled accordion item"})}({isOpen:p,isDisabled:n});const g=(0,t.useCallback)((()=>{null==m||m(!p),s(h)}),[h,s,p,m]),v=(0,t.useCallback)((e=>{const t={ArrowDown:()=>{const e=f.nextEnabled(h);e&&_e(e.node)},ArrowUp:()=>{const e=f.prevEnabled(h);e&&_e(e.node)},Home:()=>{const e=f.firstEnabled();e&&_e(e.node)},End:()=>{const e=f.lastEnabled();e&&_e(e.node)}},n=t[ae(e)];n&&(e.preventDefault(),n(e))}),[f,h]),y=(0,t.useCallback)((()=>{s(h)}),[s,h]),b=(0,t.useCallback)(((e={},t=null)=>({...e,type:"button",ref:lr(d,l,t),id:c,disabled:!!n,"aria-expanded":!!p,"aria-controls":u,onClick:fe(e.onClick,g),onFocus:fe(e.onFocus,y),onKeyDown:fe(e.onKeyDown,v)})),[c,n,p,g,y,v,u,d]),x=(0,t.useCallback)(((e={},t=null)=>({...e,ref:t,role:"region",id:u,"aria-labelledby":c,hidden:!p})),[c,p,u]);return{isOpen:p,isDisabled:n,isFocusable:r,onOpen:()=>{null==m||m(!0)},onClose:()=>{null==m||m(!1)},getButtonProps:b,getPanelProps:x,htmlProps:a}}(e),s={...sQ().container,overflowAnchor:"none"},l=(0,t.useMemo)((()=>o),[o]);return t.createElement(lQ,{value:l},t.createElement(va.div,{ref:n,...a,className:ne("chakra-accordion__item",i),__css:s},he(r,{isExpanded:!!o.isOpen,isDisabled:!!o.isDisabled})))})),xQ=fa((function(e,n){const{reduceMotion:r}=mQ(),{getPanelProps:i,isOpen:a}=cQ(),o=i(e,n),s=ne("chakra-accordion__panel",e.className),l=sQ();r||delete o.hidden;const c=t.createElement(va.div,{...o,__css:l.panel,className:s});return r?c:t.createElement(JK,{in:a},c)}));const _Q=[{id:"consumption",step:.1,label:"Consumption",min:0,units:"W"},{id:"priority",step:1,min:1,label:"Priority"}],wQ=[{id:"cycles",steps:.1,label:"Cycles per orbit",min:0,units:"cycles"},{id:"duration",steps:1,label:"Cycle duration",min:0,units:"s"}],MQ=function({satIndex:e,formik:t}){return(0,sj.jsx)(gQ,{maxHeight:"75vh",overflowY:"auto",width:"100%",children:(0,sj.jsx)(P$,{value:t,children:(0,sj.jsx)(j$,{name:`satellites[${e}].duties`,children:t=>{const{push:n,remove:r,form:i}=t,{values:a}=i,o=a.satellites[e],s=o.duties.map(((t,n)=>{const a=[..._Q];return"cyclical"===t.type&&a.push(...wQ),(0,sj.jsxs)(bQ,{width:"100%",children:[(0,sj.jsx)(vQ,{children:(0,sj.jsxs)(e_,{as:ly,children:[(0,sj.jsxs)(J$,{as:ly,align:"center",justify:"center",width:"100%",cursor:"pointer",onChange:t=>{i.setFieldValue(`satellites[${e}].duties[${n}].name`,t)},value:t.name,children:[(0,sj.jsx)(Q$,{}),(0,sj.jsx)(eK,{as:K$,id:"name",name:`satellites[${e}].duties[${n}].name`,type:"text",variant:"filled",maxWidth:"80%"}),(0,sj.jsx)(lK,{})]}),(0,sj.jsx)(yQ,{})]})}),(0,sj.jsxs)(xQ,{children:[(0,sj.jsxs)(ly,{wrap:"wrap",justify:"space-around",children:[(0,sj.jsxs)(e_,{width:"65%",children:[(0,sj.jsx)(s_,{htmlFor:`satellites[${e}].duties[${n}].type`,children:"Type"}),(0,sj.jsx)(u_,{name:`satellites[${e}].duties[${n}].type`,onChange:i.handleChange,value:t.type,children:(0,sj.jsx)("option",{value:"cyclical",children:"Cyclical"})})]}),a.map((r=>(0,sj.jsx)(IK,{value:t[r.id],step:r.step,name:`satellites[${e}].duties[${n}][${r.id}]`,units:r.units,formik:i,label:r.label},r.id)))]}),(0,sj.jsx)(Cy,{m:5,onClick:()=>{r(n)},children:"Remove"})]})]},`${o.id}${n}`)}));return(0,sj.jsxs)(sj.Fragment,{children:[s,(0,sj.jsx)(Cy,{m:5,onClick:e=>{e.preventDefault(),n({...Jq,name:`Duty ${o.duties.length+1}`,priority:o.duties.length+1})},children:(0,sj.jsx)(rW,{})})]})}})})})};var SQ="data-focus-lock",AQ="data-focus-lock-disabled";function EQ(e,n){return r=n||null,i=function(t){return e.forEach((function(e){return function(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}(e,t)}))},a=(0,t.useState)((function(){return{value:r,callback:i,facade:{get current(){return a.value},set current(e){var t=a.value;t!==e&&(a.value=e,a.callback(e,t))}}}}))[0],a.callback=i,a.facade;var r,i,a}var CQ={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},TQ=function(e){var n=e.children;return t.createElement(t.Fragment,null,t.createElement("div",{key:"guard-first","data-focus-guard":!0,"data-focus-auto-guard":!0,style:CQ}),n,n&&t.createElement("div",{key:"guard-last","data-focus-guard":!0,"data-focus-auto-guard":!0,style:CQ}))};function RQ(e){return e}function PQ(e,t){void 0===t&&(t=RQ);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var i=t(e,r);return n.push(i),function(){n=n.filter((function(e){return e!==i}))}},assignSyncMedium:function(e){for(r=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){r=!0;var t=[];if(n.length){var i=n;n=[],i.forEach(e),t=n}var a=function(){var n=t;t=[],n.forEach(e)},o=function(){return Promise.resolve().then(a)};o(),n={push:function(e){t.push(e),o()},filter:function(e){return t=t.filter(e),n}}}};return i}function LQ(e,t){return void 0===t&&(t=RQ),PQ(e,t)}function DQ(e){void 0===e&&(e={});var t=PQ(null);return t.options=qc({async:!0,ssr:!1},e),t}TQ.propTypes={},TQ.defaultProps={children:null};var IQ=LQ({},(function(e){return{target:e.target,currentTarget:e.currentTarget}})),kQ=LQ(),BQ=LQ(),FQ=DQ({async:!0}),NQ=[],OQ=t.forwardRef((function(e,n){var r,i=t.useState(),a=i[0],o=i[1],s=t.useRef(),l=t.useRef(!1),c=t.useRef(null),u=e.children,d=e.disabled,h=e.noFocusGuards,f=e.persistentFocus,p=e.crossFrame,m=e.autoFocus,g=(e.allowTextSelection,e.group),v=e.className,y=e.whiteList,b=e.hasPositiveIndices,x=e.shards,_=void 0===x?NQ:x,w=e.as,M=void 0===w?"div":w,S=e.lockProps,A=void 0===S?{}:S,E=e.sideCar,C=e.returnFocus,T=e.focusOptions,R=e.onActivation,P=e.onDeactivation,L=t.useState({})[0],D=t.useCallback((function(){c.current=c.current||document&&document.activeElement,s.current&&R&&R(s.current),l.current=!0}),[R]),I=t.useCallback((function(){l.current=!1,P&&P(s.current)}),[P]);(0,t.useEffect)((function(){d||(c.current=null)}),[]);var k=t.useCallback((function(e){var t=c.current;if(t&&t.focus){var n="function"==typeof C?C(t):C;if(n){var r="object"==typeof n?n:void 0;c.current=null,e?Promise.resolve().then((function(){return t.focus(r)})):t.focus(r)}}}),[C]),B=t.useCallback((function(e){l.current&&IQ.useMedium(e)}),[]),F=kQ.useMedium,N=t.useCallback((function(e){s.current!==e&&(s.current=e,o(e))}),[]),O=In(((r={})[AQ]=d&&"disabled",r[SQ]=g,r),A),z=!0!==h,U=z&&"tail"!==h,H=EQ([n,N]);return t.createElement(t.Fragment,null,z&&[t.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:d?-1:0,style:CQ}),b?t.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:d?-1:1,style:CQ}):null],!d&&t.createElement(E,{id:L,sideCar:FQ,observed:a,disabled:d,persistentFocus:f,crossFrame:p,autoFocus:m,whiteList:y,shards:_,onActivation:D,onDeactivation:I,returnFocus:k,focusOptions:T}),t.createElement(M,In({ref:H},O,{className:v,onBlur:F,onFocus:B}),u),U&&t.createElement("div",{"data-focus-guard":!0,tabIndex:d?-1:0,style:CQ}))}));OQ.propTypes={},OQ.defaultProps={children:void 0,disabled:!1,returnFocus:!1,focusOptions:void 0,noFocusGuards:!1,autoFocus:!0,persistentFocus:!1,crossFrame:!0,hasPositiveIndices:void 0,allowTextSelection:void 0,group:void 0,className:void 0,whiteList:void 0,shards:void 0,as:"div",lockProps:{},onActivation:void 0,onDeactivation:void 0};const zQ=OQ;function UQ(e,t){return UQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},UQ(e,t)}function HQ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var GQ=function(e){for(var t=Array(e.length),n=0;n<e.length;++n)t[n]=e[n];return t},VQ=function(e){return Array.isArray(e)?e:[e]},jQ=function(e){return e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?e.parentNode.host:e.parentNode},WQ=function(e){return e===document||e&&e.nodeType===Node.DOCUMENT_NODE},XQ=function(e,t){var n=e.get(t);if(void 0!==n)return n;var r=function(e,t){return!e||WQ(e)||!function(e){if(e.nodeType!==Node.ELEMENT_NODE)return!1;var t=window.getComputedStyle(e,null);return!(!t||!t.getPropertyValue||"none"!==t.getPropertyValue("display")&&"hidden"!==t.getPropertyValue("visibility"))}(e)&&t(jQ(e))}(t,XQ.bind(void 0,e));return e.set(t,r),r},qQ=function(e,t){var n=e.get(t);if(void 0!==n)return n;var r=function(e,t){return!(e&&!WQ(e))||!!$Q(e)&&t(jQ(e))}(t,qQ.bind(void 0,e));return e.set(t,r),r},YQ=function(e){return e.dataset},ZQ=function(e){return"INPUT"===e.tagName},JQ=function(e){return ZQ(e)&&"radio"===e.type},$Q=function(e){var t=e.getAttribute("data-no-autofocus");return![!0,"true",""].includes(t)},KQ=function(e){var t;return Boolean(e&&(null===(t=YQ(e))||void 0===t?void 0:t.focusGuard))},QQ=function(e){return!KQ(e)},e0=function(e){return Boolean(e)},t0=function(e,t){var n=e.tabIndex-t.tabIndex,r=e.index-t.index;if(n){if(!e.tabIndex)return 1;if(!t.tabIndex)return-1}return n||r},n0=function(e,t,n){return GQ(e).map((function(e,t){return{node:e,index:t,tabIndex:n&&-1===e.tabIndex?(e.dataset||{}).focusGuard?0:-1:e.tabIndex}})).filter((function(e){return!t||e.tabIndex>=0})).sort(t0)},r0=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"].join(","),i0="".concat(r0,", [data-focus-guard]"),a0=function(e,t){var n;return GQ((null===(n=e.shadowRoot)||void 0===n?void 0:n.children)||e.children).reduce((function(e,n){return e.concat(n.matches(t?i0:r0)?[n]:[],a0(n))}),[])},o0=function(e,t){return e.reduce((function(e,n){return e.concat(a0(n,t),n.parentNode?GQ(n.parentNode.querySelectorAll(r0)).filter((function(e){return e===n})):[])}),[])},s0=function(e,t){return GQ(e).filter((function(e){return XQ(t,e)})).filter((function(e){return function(e){return!((ZQ(e)||function(e){return"BUTTON"===e.tagName}(e))&&("hidden"===e.type||e.disabled))}(e)}))},l0=function(e,t){return void 0===t&&(t=new Map),GQ(e).filter((function(e){return qQ(t,e)}))},c0=function(e,t,n){return n0(s0(o0(e,n),t),!0,n)},u0=function(e,t){return n0(s0(o0(e),t),!1)},d0=function(e,t){return(e.shadowRoot?d0(e.shadowRoot,t):Object.getPrototypeOf(e).contains.call(e,t))||GQ(e.children).some((function(e){return d0(e,t)}))},h0=function(e){return e.activeElement?e.activeElement.shadowRoot?h0(e.activeElement.shadowRoot):e.activeElement:void 0},f0=function(){return document.activeElement?document.activeElement.shadowRoot?h0(document.activeElement.shadowRoot):document.activeElement:void 0},p0=function(e){return e.parentNode?p0(e.parentNode):e},m0=function(e){return VQ(e).filter(Boolean).reduce((function(e,t){var n=t.getAttribute(SQ);return e.push.apply(e,n?function(e){for(var t=new Set,n=e.length,r=0;r<n;r+=1)for(var i=r+1;i<n;i+=1){var a=e[r].compareDocumentPosition(e[i]);(a&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&t.add(i),(a&Node.DOCUMENT_POSITION_CONTAINS)>0&&t.add(r)}return e.filter((function(e,n){return!t.has(n)}))}(GQ(p0(t).querySelectorAll("[".concat(SQ,'="').concat(n,'"]:not([').concat(AQ,'="disabled"])')))):[t]),e}),[])},g0=function(e){var t=document&&f0();return!(!t||t.dataset&&t.dataset.focusGuard)&&m0(e).some((function(e){return d0(e,t)||function(e){return Boolean(GQ(e.querySelectorAll("iframe")).some((function(e){return e===document.activeElement})))}(e)}))},v0=function(e,t){return JQ(e)&&e.name?function(e,t){return t.filter(JQ).filter((function(t){return t.name===e.name})).filter((function(e){return e.checked}))[0]||e}(e,t):e},y0=function(e){return e[0]&&e.length>1?v0(e[0],e):e[0]},b0=function(e,t){return e.length>1?e.indexOf(v0(e[t],e)):t},x0="NEW_FOCUS",_0=function(e,t){return void 0===t&&(t=[]),t.push(e),e.parentNode&&_0(e.parentNode.host||e.parentNode,t),t},w0=function(e,t){for(var n=_0(e),r=_0(t),i=0;i<n.length;i+=1){var a=n[i];if(r.indexOf(a)>=0)return a}return!1},M0=function(e,t,n){var r=VQ(e),i=VQ(t),a=r[0],o=!1;return i.filter(Boolean).forEach((function(e){o=w0(o||e,e)||o,n.filter(Boolean).forEach((function(e){var t=w0(a,e);t&&(o=!o||d0(t,o)?t:w0(t,o))}))})),o},S0=function(e,t){var n=document&&f0(),r=m0(e).filter(QQ),i=M0(n||e,e,r),a=new Map,o=u0(r,a),s=c0(r,a).filter((function(e){var t=e.node;return QQ(t)}));if(s[0]||(s=o)[0]){var l,c,u,d,h=u0([i],a).map((function(e){return e.node})),f=(l=h,c=s,u=new Map,c.forEach((function(e){return u.set(e.node,e)})),l.map((function(e){return u.get(e)})).filter(e0)),p=f.map((function(e){return e.node})),m=function(e,t,n,r){var i,a,o=e.length,s=e[0],l=e[o-1],c=KQ(n);if(!(n&&e.indexOf(n)>=0)){var u=void 0!==n?t.indexOf(n):-1,d=r?t.indexOf(r):u,h=r?e.indexOf(r):-1,f=u-d,p=t.indexOf(s),m=t.indexOf(l),g=(i=t,a=new Set,i.forEach((function(e){return a.add(v0(e,i))})),i.filter((function(e){return a.has(e)}))),v=(void 0!==n?g.indexOf(n):-1)-(r?g.indexOf(r):u),y=b0(e,0),b=b0(e,o-1);return-1===u||-1===h?x0:!f&&h>=0?h:u<=p&&c&&Math.abs(f)>1?b:u>=m&&c&&Math.abs(f)>1?y:f&&Math.abs(v)>1?h:u<=p?b:u>m?y:f?Math.abs(f)>1?h:(o+h+f)%o:void 0}}(p,h,n,t);if(m===x0){var g=l0(o.map((function(e){return e.node}))).filter((d=function(e,t){return e.reduce((function(e,n){return e.concat(function(e,t){return s0((n=e.querySelectorAll("[".concat("data-autofocus-inside","]")),GQ(n).map((function(e){return o0([e])})).reduce((function(e,t){return e.concat(t)}),[])),t);var n}(n,t))}),[])}(r,a),function(e){var t;return e.autofocus||!!(null===(t=YQ(e))||void 0===t?void 0:t.autofocus)||d.indexOf(e)>=0}));return{node:g&&g.length?y0(g):y0(l0(p))}}return void 0===m?m:f[m]}},A0=0,E0=!1;const C0=function(e,t,n){void 0===n&&(n={});var r,i,a=S0(e,t);if(!E0&&a){if(A0>2)return console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),E0=!0,void setTimeout((function(){E0=!1}),1);A0++,r=a.node,i=n.focusOptions,"focus"in r&&r.focus(i),"contentWindow"in r&&r.contentWindow&&r.contentWindow.focus(),A0--}};function T0(e){var t=window.setImmediate;void 0!==t?t(e):setTimeout(e,1)}var R0=null,P0=null,L0=null,D0=!1,I0=function(){return!0};function k0(e,t,n,r){var i=null,a=e;do{var o=r[a];if(o.guard)o.node.dataset.focusAutoGuard&&(i=o);else{if(!o.lockItem)break;if(a!==e)return;i=null}}while((a+=n)!==t);i&&(i.node.tabIndex=0)}var B0=function(e){return e&&"current"in e?e.current:e},F0=function e(t,n,r){return n&&(n.host===t&&(!n.activeElement||r.contains(n.activeElement))||n.parentNode&&e(t,n.parentNode,r))},N0=function(){var e,t,n,r,i,a,o,s=!1;if(R0){var l=R0,c=l.observed,u=l.persistentFocus,d=l.autoFocus,h=l.shards,f=l.crossFrame,p=l.focusOptions,m=c||L0&&L0.portaledElement,g=document&&document.activeElement;if(m){var v=[m].concat(h.map(B0).filter(Boolean));if(g&&!function(e){return(R0.whiteList||I0)(e)}(g)||(u||(f?Boolean(D0):"meanwhile"===D0)||!function(){return document&&document.activeElement===document.body||!!(e=document&&f0())&&GQ(document.querySelectorAll("[".concat("data-no-focus-lock","]"))).some((function(t){return d0(t,e)}));var e}()||!P0&&d)&&(m&&!(g0(v)||g&&function(e,t){return t.some((function(t){return F0(e,t,t)}))}(g,v)||(e=g,L0&&L0.portaledElement===e))&&(document&&!P0&&g&&!d?(g.blur&&g.blur(),document.body.focus()):(s=C0(v,P0,{focusOptions:p}),L0={})),D0=!1,P0=document&&document.activeElement),document){var y=document&&document.activeElement,b=(n=m0(t=v).filter(QQ),r=M0(t,t,n),i=new Map,a=c0([r],i,!0),o=c0(n,i).filter((function(e){var t=e.node;return QQ(t)})).map((function(e){return e.node})),a.map((function(e){var t=e.node;return{node:t,index:e.index,lockItem:o.indexOf(t)>=0,guard:KQ(t)}}))),x=b.map((function(e){return e.node})).indexOf(y);x>-1&&(b.filter((function(e){var t=e.guard,n=e.node;return t&&n.dataset.focusAutoGuard})).forEach((function(e){return e.node.removeAttribute("tabIndex")})),k0(x,b.length,1,b),k0(x,-1,-1,b))}}}return s},O0=function(e){N0()&&e&&(e.stopPropagation(),e.preventDefault())},z0=function(){return T0(N0)},U0=function(){D0="just",setTimeout((function(){D0="meanwhile"}),0)};IQ.assignSyncMedium((function(e){var t=e.target,n=e.currentTarget;n.contains(t)||(L0={observerNode:n,portaledElement:t})})),kQ.assignMedium(z0),BQ.assignMedium((function(e){return e({moveFocusInside:C0,focusInside:g0})}));const H0=(G0=function(e){return e.filter((function(e){return!e.disabled}))},V0=function(e){var t=e.slice(-1)[0];t&&!R0&&(document.addEventListener("focusin",O0),document.addEventListener("focusout",z0),window.addEventListener("blur",U0));var n=R0,r=n&&t&&t.id===n.id;R0=t,n&&!r&&(n.onDeactivation(),e.filter((function(e){return e.id===n.id})).length||n.returnFocus(!t)),t?(P0=null,r&&n.observed===t.observed||t.onActivation(),N0(),T0(N0)):(document.removeEventListener("focusin",O0),document.removeEventListener("focusout",z0),window.removeEventListener("blur",U0),P0=null)},function(e){var n,r=[];function i(){n=G0(r.map((function(e){return e.props}))),V0(n)}var a=function(a){var o,s;function l(){return a.apply(this,arguments)||this}s=a,(o=l).prototype=Object.create(s.prototype),o.prototype.constructor=o,UQ(o,s),l.peek=function(){return n};var c=l.prototype;return c.componentDidMount=function(){r.push(this),i()},c.componentDidUpdate=function(){i()},c.componentWillUnmount=function(){var e=r.indexOf(this);r.splice(e,1),i()},c.render=function(){return t.createElement(e,this.props)},l}(t.PureComponent);return HQ(a,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(e)+")"),a})((function(){return null}));var G0,V0,j0=t.forwardRef((function(e,n){return t.createElement(zQ,In({sideCar:H0,ref:n},e))})),W0=zQ.propTypes||{};W0.sideCar,function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n])}(W0,["sideCar"]),j0.propTypes={};const X0=j0;var q0=e=>{const{initialFocusRef:n,finalFocusRef:r,contentRef:i,restoreFocus:a,children:o,isDisabled:s,autoFocus:l,persistentFocus:c,lockFocusAcrossFrames:u}=e,d=(0,t.useCallback)((()=>{(null==n?void 0:n.current)?n.current.focus():(null==i?void 0:i.current)&&0===function(e){const t=Array.from(e.querySelectorAll(de));return t.unshift(e),t.filter((e=>ue(e)&&(e=>e.offsetWidth>0&&e.offsetHeight>0)(e)))}(i.current).length&&_e(i.current,{nextTick:!0})}),[n,i]),h=(0,t.useCallback)((()=>{var e;null==(e=null==r?void 0:r.current)||e.focus()}),[r]),f=a&&!r;return t.createElement(X0,{crossFrame:u,persistentFocus:c,autoFocus:l,disabled:s,onActivation:d,onDeactivation:h,returnFocus:f},o)},Y0="right-scroll-bar-position",Z0="width-before-scroll-bar",J0=DQ(),$0=function(){},K0=t.forwardRef((function(e,n){var r=t.useRef(null),i=t.useState({onScrollCapture:$0,onWheelCapture:$0,onTouchMoveCapture:$0}),a=i[0],o=i[1],s=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,f=e.sideCar,p=e.noIsolation,m=e.inert,g=e.allowPinchZoom,v=e.as,y=void 0===v?"div":v,b=Yc(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),x=f,_=EQ([r,n]),w=qc(qc({},b),a);return t.createElement(t.Fragment,null,d&&t.createElement(x,{sideCar:J0,removeScrollBar:u,shards:h,noIsolation:p,inert:m,setCallbacks:o,allowPinchZoom:!!g,lockRef:r}),s?t.cloneElement(t.Children.only(l),qc(qc({},w),{ref:_})):t.createElement(y,qc({},w,{className:c,ref:_}),l))}));K0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},K0.classNames={fullWidth:Z0,zeroRight:Y0};var Q0=function(e){var n=e.sideCar,r=Yc(e,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=n.read();if(!i)throw new Error("Sidecar medium not found");return t.createElement(i,qc({},r))};Q0.isSideCarExport=!0;var e1=function(){var e=0,t=null;return{add:function(n){var r;0==e&&(t=function(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=i.nc;return t&&e.setAttribute("nonce",t),e}())&&(function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}(t,n),r=t,(document.head||document.getElementsByTagName("head")[0]).appendChild(r)),e++},remove:function(){!--e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},t1=function(){var e,n=(e=e1(),function(n,r){t.useEffect((function(){return e.add(n),function(){e.remove()}}),[n&&r])});return function(e){var t=e.styles,r=e.dynamic;return n(t,r),null}},n1={left:0,top:0,right:0,gap:0},r1=function(e){return parseInt(e||"",10)||0},i1=t1(),a1=function(e,t,n,r){var i=e.left,a=e.top,o=e.right,s=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(s,"px ").concat(r,";\n  }\n  body {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(i,"px;\n    padding-top: ").concat(a,"px;\n    padding-right: ").concat(o,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(s,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(Y0," {\n    right: ").concat(s,"px ").concat(r,";\n  }\n  \n  .").concat(Z0," {\n    margin-right: ").concat(s,"px ").concat(r,";\n  }\n  \n  .").concat(Y0," .").concat(Y0," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(Z0," .").concat(Z0," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(s,"px;\n  }\n")},o1=function(e){var n=e.noRelative,r=e.noImportant,i=e.gapMode,a=void 0===i?"margin":i,o=t.useMemo((function(){return function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return n1;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],i=t["padding"===e?"paddingRight":"marginRight"];return[r1(n),r1(r),r1(i)]}(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}}(a)}),[a]);return t.createElement(i1,{styles:a1(o,!n,a,r?"":"!important")})},s1=!1;if("undefined"!=typeof window)try{var l1=Object.defineProperty({},"passive",{get:function(){return s1=!0,!0}});window.addEventListener("test",l1,l1),window.removeEventListener("test",l1,l1)}catch(e){s1=!1}var c1=!!s1&&{passive:!1},u1=function(e,t){var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===n[t])},d1=function(e,t){var n=t;do{if("undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot&&(n=n.host),h1(e,n)){var r=f1(e,n);if(r[1]>r[2])return!0}n=n.parentNode}while(n&&n!==document.body);return!1},h1=function(e,t){return"v"===e?function(e){return u1(e,"overflowY")}(t):function(e){return u1(e,"overflowX")}(t)},f1=function(e,t){return"v"===e?function(e){return[e.scrollTop,e.scrollHeight,e.clientHeight]}(t):function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t)},p1=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},m1=function(e){return[e.deltaX,e.deltaY]},g1=function(e){return e&&"current"in e?e.current:e},v1=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},y1=0,b1=[];const x1=(_1=function(e){var n=t.useRef([]),r=t.useRef([0,0]),i=t.useRef(),a=t.useState(y1++)[0],o=t.useState((function(){return t1()}))[0],s=t.useRef(e);t.useEffect((function(){s.current=e}),[e]),t.useEffect((function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var t=Jc([e.lockRef.current],(e.shards||[]).map(g1),!0).filter(Boolean);return t.forEach((function(e){return e.classList.add("allow-interactivity-".concat(a))})),function(){document.body.classList.remove("block-interactivity-".concat(a)),t.forEach((function(e){return e.classList.remove("allow-interactivity-".concat(a))}))}}}),[e.inert,e.lockRef.current,e.shards]);var l=t.useCallback((function(e,t){if("touches"in e&&2===e.touches.length)return!s.current.allowPinchZoom;var n,a=p1(e),o=r.current,l="deltaX"in e?e.deltaX:o[0]-a[0],c="deltaY"in e?e.deltaY:o[1]-a[1],u=e.target,d=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===d&&"range"===u.type)return!1;var h=d1(d,u);if(!h)return!0;if(h?n=d:(n="v"===d?"h":"v",h=d1(d,u)),!h)return!1;if(!i.current&&"changedTouches"in e&&(l||c)&&(i.current=n),!n)return!0;var f=i.current||n;return function(e,t,n,r,i){var a=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),o=a*r,s=n.target,l=t.contains(s),c=!1,u=o>0,d=0,h=0;do{var f=f1(e,s),p=f[0],m=f[1]-f[2]-a*p;(p||m)&&h1(e,s)&&(d+=m,h+=p),s=s.parentNode}while(!l&&s!==document.body||l&&(t.contains(s)||t===s));return(u&&(0===d||!1)||!u&&(0===h||!1))&&(c=!0),c}(f,t,e,"h"===f?l:c)}),[]),c=t.useCallback((function(e){var t=e;if(b1.length&&b1[b1.length-1]===o){var r="deltaY"in t?m1(t):p1(t),i=n.current.filter((function(e){return e.name===t.type&&e.target===t.target&&(n=e.delta,i=r,n[0]===i[0]&&n[1]===i[1]);var n,i}))[0];if(i&&i.should)t.cancelable&&t.preventDefault();else if(!i){var a=(s.current.shards||[]).map(g1).filter(Boolean).filter((function(e){return e.contains(t.target)}));(a.length>0?l(t,a[0]):!s.current.noIsolation)&&t.cancelable&&t.preventDefault()}}}),[]),u=t.useCallback((function(e,t,r,i){var a={name:e,delta:t,target:r,should:i};n.current.push(a),setTimeout((function(){n.current=n.current.filter((function(e){return e!==a}))}),1)}),[]),d=t.useCallback((function(e){r.current=p1(e),i.current=void 0}),[]),h=t.useCallback((function(t){u(t.type,m1(t),t.target,l(t,e.lockRef.current))}),[]),f=t.useCallback((function(t){u(t.type,p1(t),t.target,l(t,e.lockRef.current))}),[]);t.useEffect((function(){return b1.push(o),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,c1),document.addEventListener("touchmove",c,c1),document.addEventListener("touchstart",d,c1),function(){b1=b1.filter((function(e){return e!==o})),document.removeEventListener("wheel",c,c1),document.removeEventListener("touchmove",c,c1),document.removeEventListener("touchstart",d,c1)}}),[]);var p=e.removeScrollBar,m=e.inert;return t.createElement(t.Fragment,null,m?t.createElement(o,{styles:v1(a)}):null,p?t.createElement(o1,{gapMode:"margin"}):null)},J0.useMedium(_1),Q0);var _1,w1=t.forwardRef((function(e,n){return t.createElement(K0,qc({},e,{ref:n,sideCar:x1}))}));w1.classNames=K0.classNames;const M1=w1;var S1=new WeakMap,A1=new WeakMap,E1={},C1=0,T1={slideInBottom:{...aQ,custom:{offsetY:16,reverse:!0}},slideInRight:{...aQ,custom:{offsetX:16,reverse:!0}},scale:{...eQ,custom:{initialScale:.95,reverse:!0}},none:{}},R1=va(Wv.section),P1=(0,t.forwardRef)(((e,n)=>{const{preset:r,...i}=e,a=T1[r];return t.createElement(R1,{ref:n,...a,...i})})),L1=new class{modals;constructor(){this.modals=[]}add(e){this.modals.push(e)}remove(e){this.modals=this.modals.filter((t=>t!==e))}isTopModal(e){return this.modals[this.modals.length-1]===e}};function D1(e){const{isOpen:n,onClose:r,id:i,closeOnOverlayClick:a=!0,closeOnEsc:o=!0,useInert:s=!0,onOverlayClick:l,onEsc:c}=e,u=(0,t.useRef)(null),d=(0,t.useRef)(null),[h,f,p]=st(i,"chakra-modal","chakra-modal--header","chakra-modal--body");!function(e,n){const r=e.current;(0,t.useEffect)((()=>{if(e.current&&n)return function(e,t,n){void 0===t&&(t=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e)),void 0===n&&(n="data-aria-hidden");var r=Array.isArray(e)?e:[e];E1[n]||(E1[n]=new WeakMap);var i=E1[n],a=[],o=new Set,s=function(e){e&&!o.has(e)&&(o.add(e),s(e.parentNode))};r.forEach(s);var l=function(e){!e||r.indexOf(e)>=0||Array.prototype.forEach.call(e.children,(function(e){if(o.has(e))l(e);else{var t=e.getAttribute("aria-hidden"),r=null!==t&&"false"!==t,s=(S1.get(e)||0)+1,c=(i.get(e)||0)+1;S1.set(e,s),i.set(e,c),a.push(e),1===s&&r&&A1.set(e,!0),1===c&&e.setAttribute(n,"true"),r||e.setAttribute("aria-hidden","true")}}))};return l(t),o.clear(),C1++,function(){a.forEach((function(e){var t=S1.get(e)-1,r=i.get(e)-1;S1.set(e,t),i.set(e,r),t||(A1.has(e)||e.removeAttribute("aria-hidden"),A1.delete(e)),r||e.removeAttribute(n)})),--C1||(S1=new WeakMap,S1=new WeakMap,A1=new WeakMap,E1={})}}(e.current)}),[n,e,r])}(u,n&&s),function(e,n){(0,t.useEffect)((()=>(n&&L1.add(e),()=>{L1.remove(e)})),[n,e])}(u,n);const m=(0,t.useRef)(null),g=(0,t.useCallback)((e=>{m.current=e.target}),[]),v=(0,t.useCallback)((e=>{"Escape"===e.key&&(e.stopPropagation(),o&&(null==r||r()),null==c||c())}),[o,r,c]),[y,b]=(0,t.useState)(!1),[x,_]=(0,t.useState)(!1),w=(0,t.useCallback)(((e={},t=null)=>({role:"dialog",...e,ref:lr(t,u),id:h,tabIndex:-1,"aria-modal":!0,"aria-labelledby":y?f:void 0,"aria-describedby":x?p:void 0,onClick:fe(e.onClick,(e=>e.stopPropagation()))})),[p,x,h,f,y]),M=(0,t.useCallback)((e=>{e.stopPropagation(),m.current===e.target&&L1.isTopModal(u)&&(a&&(null==r||r()),null==l||l())}),[r,a,l]),S=(0,t.useCallback)(((e={},t=null)=>({...e,ref:lr(t,d),onClick:fe(e.onClick,M),onKeyDown:fe(e.onKeyDown,v),onMouseDown:fe(e.onMouseDown,g)})),[v,g,M]);return{isOpen:n,onClose:r,headerId:f,bodyId:p,setBodyMounted:_,setHeaderMounted:b,dialogRef:u,overlayRef:d,getDialogProps:w,getDialogContainerProps:S}}var[I1,k1]=cr({name:"ModalStylesContext",errorMessage:"useModalStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Modal />\" "}),[B1,F1]=cr({strict:!0,name:"ModalContext",errorMessage:"useModalContext: `context` is undefined. Seems you forgot to wrap modal components in `<Modal />`"}),N1=e=>{const{portalProps:n,children:r,autoFocus:i,trapFocus:a,initialFocusRef:o,finalFocusRef:s,returnFocusOnClose:l,blockScrollOnMount:c,allowPinchZoom:u,preserveScrollBarGap:d,motionPreset:h,lockFocusAcrossFrames:f,onCloseComplete:p}=e,m=ga("Modal",e),g={...D1(e),autoFocus:i,trapFocus:a,initialFocusRef:o,finalFocusRef:s,returnFocusOnClose:l,blockScrollOnMount:c,allowPinchZoom:u,preserveScrollBarGap:d,motionPreset:h,lockFocusAcrossFrames:f};return t.createElement(B1,{value:g},t.createElement(I1,{value:m},t.createElement(Tu,{onExitComplete:p},g.isOpen&&t.createElement(_r,{...n},r))))};N1.defaultProps={lockFocusAcrossFrames:!0,returnFocusOnClose:!0,scrollBehavior:"outside",trapFocus:!0,autoFocus:!0,blockScrollOnMount:!0,allowPinchZoom:!1,motionPreset:"scale"};var O1=va(Wv.div),z1=fa(((e,n)=>{const{className:r,children:i,containerProps:a,...o}=e,{getDialogProps:s,getDialogContainerProps:l}=F1(),c=s(o,n),u=l(a),d=ne("chakra-modal__content",r),h=k1(),f={display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0,...h.dialog},p={display:"flex",width:"100vw",height:"100vh","@supports(height: -webkit-fill-available)":{height:"-webkit-fill-available"},position:"fixed",left:0,top:0,...h.dialogContainer},{motionPreset:m}=F1();return t.createElement(U1,null,t.createElement(va.div,{...u,className:"chakra-modal__content-container",tabIndex:-1,__css:p},t.createElement(P1,{preset:m,className:d,...c,__css:f},i)))}));function U1(e){const{autoFocus:n,trapFocus:r,dialogRef:i,initialFocusRef:a,blockScrollOnMount:o,allowPinchZoom:s,finalFocusRef:l,returnFocusOnClose:c,preserveScrollBarGap:u,lockFocusAcrossFrames:d}=F1(),[h,f]=Ru();return(0,t.useEffect)((()=>{!h&&f&&setTimeout(f)}),[h,f]),t.createElement(q0,{autoFocus:n,isDisabled:!r,initialFocusRef:a,finalFocusRef:l,restoreFocus:c,contentRef:i,lockFocusAcrossFrames:d},t.createElement(M1,{removeScrollBar:!u,allowPinchZoom:s,enabled:o,forwardProps:!0},e.children))}var H1=fa(((e,n)=>{const{className:r,transition:i,...a}=e,o=ne("chakra-modal__overlay",r),s={pos:"fixed",left:"0",top:"0",w:"100vw",h:"100vh",...k1().overlay},{motionPreset:l}=F1(),c="none"===l?{}:KK;return t.createElement(O1,{...c,__css:s,ref:n,className:o,...a})})),G1=fa(((e,n)=>{const{className:r,...i}=e,{headerId:a,setHeaderMounted:o}=F1();(0,t.useEffect)((()=>(o(!0),()=>o(!1))),[o]);const s=ne("chakra-modal__header",r),l={flex:0,...k1().header};return t.createElement(va.header,{ref:n,className:s,id:a,...i,__css:l})})),V1=fa(((e,n)=>{const{className:r,...i}=e,{bodyId:a,setBodyMounted:o}=F1();(0,t.useEffect)((()=>(o(!0),()=>o(!1))),[o]);const s=ne("chakra-modal__body",r),l=k1();return t.createElement(va.div,{ref:n,className:s,id:a,...i,__css:l.body})})),j1=fa(((e,n)=>{const{className:r,...i}=e,a=ne("chakra-modal__footer",r),o={display:"flex",alignItems:"center",justifyContent:"flex-end",...k1().footer};return t.createElement(va.footer,{ref:n,...i,__css:o,className:a})})),W1=fa(((e,n)=>{const{onClick:r,className:i,...a}=e,{onClose:o}=F1(),s=ne("chakra-modal__close-btn",i),l=k1();return t.createElement(jc,{ref:n,__css:l.closeButton,className:s,onClick:fe(r,(e=>{e.stopPropagation(),o()})),...a})}));fa(((e,n)=>t.createElement(z1,{ref:n,role:"alertdialog",...e})));var[X1,q1]=cr(),Y1=va(rQ);fa(((e,n)=>{const{className:r,children:i,...a}=e,{getDialogProps:o,getDialogContainerProps:s,isOpen:l}=F1(),c=o(a,n),u=s(),d=ne("chakra-modal__content",r),h=k1(),f={display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0,...h.dialog},p={display:"flex",width:"100vw",height:"100vh",position:"fixed",left:0,top:0,...h.dialogContainer},{placement:m}=q1();return t.createElement(va.div,{...u,className:"chakra-modal__content-container",__css:p},t.createElement(U1,null,t.createElement(Y1,{direction:m,in:l,className:d,...c,__css:f},i)))}));const Z1=[{id:"inclination",step:1,label:"Inclination",min:0,max:36,units:"°"},{id:"rightAscension",step:.01,label:"Right Ascension",min:0,max:36,units:"°"},{id:"eccentricity",step:.001,label:"Eccentricity",min:-.1,max:.1,units:"°"},{id:"perigee",step:.001,label:"Perigee",min:0,max:36,units:"°"},{id:"meanAnomaly",step:.01,label:"Mean Anomaly",min:0,max:36,units:"°"},{id:"meanMotion",step:.01,label:"Mean Motion",min:0,max:.5,units:(0,sj.jsxs)("span",{children:["revs day",(0,sj.jsx)("sup",{children:"-1"})]})}],J1=function({formik:e}){const{isOpen:t,onOpen:n,onClose:r}=lt();return(0,sj.jsxs)(sj.Fragment,{children:[(0,sj.jsxs)(Cy,{onClick:n,children:[(0,sj.jsx)(iW,{mx:2}),"Power"]}),(0,sj.jsxs)(N1,{isOpen:t,onClose:r,size:"xl",children:[(0,sj.jsx)(H1,{backdropFilter:"blur(10px)"}),(0,sj.jsxs)(z1,{bg:"background.100",width:"80vw",children:[(0,sj.jsx)(G1,{align:"center",children:"Configure Space Power"}),(0,sj.jsx)(W1,{}),(0,sj.jsxs)(V1,{width:"100%",children:[(0,sj.jsx)(oy,{children:(0,sj.jsx)(IK,{value:e.values.spacePowers,name:"spacePowers",formik:e,label:"Number of power satellites",min:0,max:10})}),(0,sj.jsx)("h3",{align:"center",children:"Offsets"}),(0,sj.jsx)(ly,{justify:"center",direction:"row",wrap:"wrap",width:"100%",children:Z1.map((t=>(0,sj.jsx)(IK,{value:e.values.offsets[`${t.id}`],step:t.step,name:`offsets[${t.id}]`,units:t.units,formik:e,label:t.label,min:t.min,max:t.max},t.id)))})]}),(0,sj.jsx)(j1,{children:(0,sj.jsx)(Cy,{colorScheme:"blue",mr:3,onClick:r,children:"Close"})})]})]})]})},$1={OneWeb:"https://celestrak.org/NORAD/elements/gp.php?GROUP=oneweb&FORMAT=tle",Starlink:"https://celestrak.org/NORAD/elements/gp.php?GROUP=starlink&FORMAT=tle",Orbcomm:"https://celestrak.org/NORAD/elements/gp.php?GROUP=orbcomm&FORMAT=tle",Galileo:"https://celestrak.org/NORAD/elements/gp.php?GROUP=galileo&FORMAT=tle",Geosynchronous:"https://celestrak.org/NORAD/elements/gp.php?GROUP=geo&FORMAT=tle"},K1=function({shouldDisplay:e}){const[n,r]=(0,t.useState)(0),[i,a]=(0,t.useState)(),o=Yx((e=>e.initializeMission));(0,t.useEffect)((()=>{a(function(e){const t=[];return Object.entries(e).forEach((([e,n])=>{(0,wx.loadTLEs)((0,wx.getCorsFreeUrl)(n)).then((n=>{t.push({name:e,tles:n})}))})),t}($1))}),[]);const s=B$({initialValues:Kq,validationSchema:jx,validateOnChange:!1,validateOnBlur:!0,onSubmit:async e=>{s.setSubmitting(!0),await new Promise(((t,n)=>{setTimeout((()=>{try{o(e),s.setStatus("")}catch(e){s.setStatus(e.message),n()}t()}),500)}))}});return e?(0,sj.jsxs)(sj.Fragment,{children:[(0,sj.jsx)(dy,{area:"select",children:(0,sj.jsxs)("form",{onSubmit:s.handleSubmit,children:[(0,sj.jsx)(dK,{formik:s,satIndex:n,setSatIndex:r}),s.values.satellites.length>0?(0,sj.jsxs)(sj.Fragment,{children:[(0,sj.jsxs)(oy,{children:[(0,sj.jsx)(J1,{formik:s}),(0,sj.jsx)(Cy,{m:5,type:"submit",disabled:s.isSubmitting,children:s.isSubmitting?(0,sj.jsx)(Dc,{}):"Generate Mission"})]}),(0,sj.jsx)(oy,{children:(0,sj.jsx)(xy,{color:"red",width:"50%",align:"center",children:s.status})})]}):""]})}),(0,sj.jsx)(dy,{area:"parameters",children:s.values.satellites.length>0&&n>=0?(0,sj.jsx)(oy,{children:(0,sj.jsxs)(cY,{p:10,minWidth:"50%",maxWidth:"80%",align:"center",children:[(0,sj.jsxs)(dY,{children:[(0,sj.jsx)(uY,{children:"Orbit"}),(0,sj.jsx)(uY,{children:"Power"}),(0,sj.jsx)(uY,{children:"Duty"})]}),(0,sj.jsxs)(fY,{children:[(0,sj.jsx)(hY,{pt:10,children:(0,sj.jsx)(BK,{satIndex:n,formik:s,constellations:i})}),(0,sj.jsx)(hY,{pt:10,children:(0,sj.jsx)(NK,{satIndex:n,formik:s})}),(0,sj.jsx)(hY,{pt:10,children:(0,sj.jsx)(MQ,{satIndex:n,formik:s})})]})]})}):(0,sj.jsx)(ly,{height:"100%",justify:"center",align:"center",children:(0,sj.jsx)("h2",{children:"Add satellite to begin..."})})})]}):""},Q1=HO(["white","grey","rgba(255,255,255,0.2)"]),e2=function(){var e=jH,t=VH,n=null,r=_H(0),i=_H(DH),a=_H(0);function o(o){var s,l,c,u,d,h=(o=GH(o)).length,f=0,p=new Array(h),m=new Array(h),g=+r.apply(this,arguments),v=Math.min(DH,Math.max(-DH,i.apply(this,arguments)-g)),y=Math.min(Math.abs(v)/h,a.apply(this,arguments)),b=y*(v<0?-1:1);for(s=0;s<h;++s)(d=m[p[s]=s]=+e(o[s],s,o))>0&&(f+=d);for(null!=t?p.sort((function(e,n){return t(m[e],m[n])})):null!=n&&p.sort((function(e,t){return n(o[e],o[t])})),s=0,c=f?(v-h*b)/f:0;s<h;++s,g=u)l=p[s],u=g+((d=m[l])>0?d*c:0)+b,m[l]={data:o[l],index:s,value:d,startAngle:g,endAngle:u,padAngle:y};return m}return o.value=function(t){return arguments.length?(e="function"==typeof t?t:_H(+t),o):e},o.sortValues=function(e){return arguments.length?(t=e,n=null,o):t},o.sort=function(e){return arguments.length?(n=e,t=null,o):n},o.startAngle=function(e){return arguments.length?(r="function"==typeof e?e:_H(+e),o):r},o.endAngle=function(e){return arguments.length?(i="function"==typeof e?e:_H(+e),o):i},o.padAngle=function(e){return arguments.length?(a="function"==typeof e?e:_H(+e),o):a},o}().value((e=>e.value)).startAngle(-Math.PI/2.2).endAngle(Math.PI/2.2).sort(null);function t2({height:e,selected:n}){const r=(0,t.useRef)(qx.getState().frame);(0,t.useEffect)((()=>{qx.subscribe((e=>{r.current=e.frame}))}),[]);const i=(0,t.useRef)(),a=()=>{i.current=[{id:2,value:100*n.performance.chargeStateNoBeams[r.current],color:n.performance.chargeStateNoBeams[r.current]>.33?"white":"red"},{id:1,value:100*(n.performance.chargeState[r.current]-n.performance.chargeStateNoBeams[r.current]),color:"grey"},{id:3,value:100-100*n.performance.chargeState[r.current],color:"lightgrey"}]},o=function(){var e=BH,t=FH,n=_H(0),r=null,i=NH,a=OH,o=zH,s=null;function l(){var l,c,u=+e.apply(this,arguments),d=+t.apply(this,arguments),h=i.apply(this,arguments)-LH,f=a.apply(this,arguments)-LH,p=wH(f-h),m=f>h;if(s||(s=l=xH()),d<u&&(c=d,d=u,u=c),d>RH)if(p>DH-RH)s.moveTo(d*SH(h),d*CH(h)),s.arc(0,0,d,h,f,!m),u>RH&&(s.moveTo(u*SH(f),u*CH(f)),s.arc(0,0,u,f,h,m));else{var g,v,y=h,b=f,x=h,_=f,w=p,M=p,S=o.apply(this,arguments)/2,A=S>RH&&(r?+r.apply(this,arguments):TH(u*u+d*d)),E=EH(wH(d-u)/2,+n.apply(this,arguments)),C=E,T=E;if(A>RH){var R=kH(A/u*CH(S)),P=kH(A/d*CH(S));(w-=2*R)>RH?(x+=R*=m?1:-1,_-=R):(w=0,x=_=(h+f)/2),(M-=2*P)>RH?(y+=P*=m?1:-1,b-=P):(M=0,y=b=(h+f)/2)}var L=d*SH(y),D=d*CH(y),I=u*SH(_),k=u*CH(_);if(E>RH){var B,F=d*SH(b),N=d*CH(b),O=u*SH(x),z=u*CH(x);if(p<PH&&(B=UH(L,D,O,z,F,N,I,k))){var U=L-B[0],H=D-B[1],G=F-B[0],V=N-B[1],j=1/CH(IH((U*G+H*V)/(TH(U*U+H*H)*TH(G*G+V*V)))/2),W=TH(B[0]*B[0]+B[1]*B[1]);C=EH(E,(u-W)/(j-1)),T=EH(E,(d-W)/(j+1))}}M>RH?T>RH?(g=HH(O,z,L,D,d,T,m),v=HH(F,N,I,k,d,T,m),s.moveTo(g.cx+g.x01,g.cy+g.y01),T<E?s.arc(g.cx,g.cy,T,MH(g.y01,g.x01),MH(v.y01,v.x01),!m):(s.arc(g.cx,g.cy,T,MH(g.y01,g.x01),MH(g.y11,g.x11),!m),s.arc(0,0,d,MH(g.cy+g.y11,g.cx+g.x11),MH(v.cy+v.y11,v.cx+v.x11),!m),s.arc(v.cx,v.cy,T,MH(v.y11,v.x11),MH(v.y01,v.x01),!m))):(s.moveTo(L,D),s.arc(0,0,d,y,b,!m)):s.moveTo(L,D),u>RH&&w>RH?C>RH?(g=HH(I,k,F,N,u,-C,m),v=HH(L,D,O,z,u,-C,m),s.lineTo(g.cx+g.x01,g.cy+g.y01),C<E?s.arc(g.cx,g.cy,C,MH(g.y01,g.x01),MH(v.y01,v.x01),!m):(s.arc(g.cx,g.cy,C,MH(g.y01,g.x01),MH(g.y11,g.x11),!m),s.arc(0,0,u,MH(g.cy+g.y11,g.cx+g.x11),MH(v.cy+v.y11,v.cx+v.x11),m),s.arc(v.cx,v.cy,C,MH(v.y11,v.x11),MH(v.y01,v.x01),!m))):s.arc(0,0,u,_,x,m):s.lineTo(I,k)}else s.moveTo(0,0);if(s.closePath(),l)return s=null,l+""||null}return l.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-PH/2;return[SH(r)*n,CH(r)*n]},l.innerRadius=function(t){return arguments.length?(e="function"==typeof t?t:_H(+t),l):e},l.outerRadius=function(e){return arguments.length?(t="function"==typeof e?e:_H(+e),l):t},l.cornerRadius=function(e){return arguments.length?(n="function"==typeof e?e:_H(+e),l):n},l.padRadius=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:_H(+e),l):r},l.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:_H(+e),l):i},l.endAngle=function(e){return arguments.length?(a="function"==typeof e?e:_H(+e),l):a},l.padAngle=function(e){return arguments.length?(o="function"==typeof e?e:_H(+e),l):o},l.context=function(e){return arguments.length?(s=null==e?null:e,l):s},l}().innerRadius(e/2-20).outerRadius(e/3-10),s=(0,t.useRef)(),l=()=>{const e=fH.select(s.current).selectAll("g.arc").data(e2(i.current));e.exit().remove(),e.enter().append("g").attr("class","arc").append("path").merge(e.select("path.arc")).attr("class","arc").attr("d",o).attr("fill",((e,t)=>Q1(e)))};OF((()=>{s.current&&(a(),l())}));const c=(0,t.useCallback)((e=>{s.current=e,a(),l(i.current)}));return(0,sj.jsx)("svg",{width:e,height:e/2,children:(0,sj.jsx)("g",{ref:c,transform:`translate(${e/2} ${e/2})`})})}var n2=i(9089),r2={};function i2(e){return e.charAt(0).toUpperCase()+e.slice(1)}r2.styleTagTransform=Gy(),r2.setAttributes=Oy(),r2.insert=Fy().bind(null,"head"),r2.domAPI=ky(),r2.insertStyleElement=Uy(),Dy()(n2.Z,r2),n2.Z&&n2.Z.locals&&n2.Z.locals;const a2=[{key:"netCurrent",label:"Net Current",shouldArrows:!0,getValue:(e,t)=>t.params.load.powerProfiles[t.performance.sources[e]][t.performance.currentDuties[e]],formatValue:e=>`${e.toFixed(2)}A`,getHelpText:(e,t)=>i2(t.performance.sources[e])},{key:"consumption",label:"Consumption",shouldArrows:!1,getValue:(e,t)=>t.params.load.duties[t.performance.currentDuties[e]].consumption,formatValue:e=>`${e}W`,getHelpText:(e,t)=>`${i2(t.params.load.duties[t.performance.currentDuties[e]].name)}`},{key:"chargeState",label:"",shouldArrows:!1,getValue:(e,t)=>100*t.performance.chargeState[e],formatValue:e=>`${e.toPrecision(3)}%`,getHelpText:()=>"w/o Space Power",getHelpNumber:(e,t)=>`${(100*t.performance.chargeStateNoBeams[e]).toPrecision(3)}% `}],o2=function({shouldDisplay:e}){const{satellites:n,toggleLabel:r,toggleAllLabels:i,attachCamera:a,detachCamera:o,cameraTarget:s,satelliteOptions:l}=Yx((e=>({satellites:e.mission.satellites,toggleLabel:e.toggleLabel,toggleAllLabels:e.toggleAllLabels,satelliteOptions:e.satelliteOptions,attachCamera:e.attachCamera,detachCamera:e.detachCamera,cameraTarget:e.cameraTarget})),Zy),[c,u]=(0,t.useState)(n.customers[0]);(0,t.useEffect)((()=>{u((()=>n.customers[0]))}),[n]);const d=(0,t.useRef)(qx.getState().frame);(0,t.useEffect)((()=>{qx.subscribe((e=>{e.frame-10>d.current&&(d.current=e.frame)}))}),[]);const h=(0,t.useRef)(new Map),f=(0,t.useCallback)((e=>{if(!e)return;const t=a2.find((t=>t.key===e.id));h.current.set(t.key,{...t,ref:e})}),[]);if(OF((()=>{h.current.forEach((e=>{if(!e.ref)return;const t=fH.select(e.ref);if("fleet"===c.name&&"chargeState"!==e.key)return void(t.classed("hide")||fH.select(e.ref).classed("hide",!0));t.classed("hide")&&fH.select(e.ref).classed("hide",!1);const n=e.getValue(d.current,c);if(t.selectAll(".chakra-stat__number").select("span").text(e.formatValue(n)),t.selectAll(".chakra-stat__help-text").select(".help-text").text(e.getHelpText(d.current,c)),e.getHelpNumber&&t.selectAll(".chakra-stat__help-text").select(".help-number").text(e.getHelpNumber(d.current,c)),e.shouldArrows){const e=t.select(".chakra-stat__help-text").select(".up-arrow"),r=t.select(".chakra-stat__help-text").select(".down-arrow");n>0?(e.attr("visibility","visible"),e.style("position","relative"),r.attr("visibility","hidden"),r.style("position","absolute")):(e.attr("visibility","hidden"),e.style("position","absolute"),r.attr("visibility","visible"),r.style("position","relative"))}}))})),n)return(0,sj.jsx)(dy,{area:"2 / 1 / 3 / 3",zIndex:99,display:e?"block":"none",children:(0,sj.jsxs)(ly,{height:"100%",justify:"space-between","align-items":"center",children:[(0,sj.jsxs)(oy,{flex:1,children:[(0,sj.jsx)(iy,{px:2,children:(0,sj.jsxs)(u_,{onChange:e=>{const t=e.target.value;u("fleet"===t?()=>n.fleet:()=>n.customers.find((e=>e.id===t)))},children:[n.customers.map((e=>(0,sj.jsx)("option",{value:e.id,children:e.name},e.id))),(0,sj.jsx)("option",{value:"fleet",children:"Fleet"})]})}),"fleet"!==c.name?(0,sj.jsxs)(Ry,{children:[(0,sj.jsx)(Cy,{onClick:()=>{r(c.id)},children:l.get(c.id).showLabel?"Hide Label":"Show Label"}),(0,sj.jsx)(Cy,{onClick:()=>{s.id===c.id?o():a(c.id)},children:s.id===c.id?"Detach Camera":"Attach Camera"})]}):(0,sj.jsx)(Cy,{onClick:()=>{i(!1)},children:"Hide All Labels"})]}),(0,sj.jsx)(iy,{height:"100%",flex:1,children:(0,sj.jsx)(oy,{children:(0,sj.jsxs)(Kj,{align:"center",ref:f,id:"chargeState",children:[(0,sj.jsx)(Xj,{children:"Charge"}),(0,sj.jsx)(t2,{height:200,selected:c,styles:{position:"absolute"}}),(0,sj.jsx)(Yj,{textStyle:"number",children:(0,sj.jsx)("span",{})}),(0,sj.jsxs)(qj,{width:"100%",children:[(0,sj.jsx)(xy,{as:"span",textStyle:"number",className:"help-number"}),(0,sj.jsx)("span",{className:"help-text"})]})]})})}),(0,sj.jsx)(oy,{flex:1,children:(0,sj.jsx)(iy,{children:(0,sj.jsx)(Qj,{children:a2.slice(0,2).map((e=>(0,sj.jsxs)(Kj,{width:"30ch",id:e.key,ref:f,children:[(0,sj.jsx)(Xj,{children:e.label}),(0,sj.jsx)(Yj,{textStyle:"number",children:(0,sj.jsx)("span",{})}),(0,sj.jsxs)(qj,{children:[e.shouldArrows?(0,sj.jsxs)(sj.Fragment,{children:[(0,sj.jsx)($j,{type:"increase",className:"up-arrow hide"}),(0,sj.jsx)($j,{type:"decrease",className:"down-arrow hide"})]}):"",(0,sj.jsx)("span",{className:"help-text"})]})]},e.key)))})})})]})})},s2=function(...e){let t=[...e],n=e[e.length-1];return function(e){return!!T(e)&&Mc.every((t=>Object.prototype.hasOwnProperty.call(e,t)))}(n)&&t.length>1?t=t.slice(0,t.length-1):n=Sc,ye(...t.map((e=>t=>E(e)?e(t):function(...e){return a()({},...e,ry)}(t,e))))(n)}({config:{useSystemColorMode:!1,initialColorMode:"dark"},styles:{global:e=>({body:{bg:So("white","#110916")(e),fontFamily:"'Barlow', sans-serif"},h1:{fontSize:"2rem",fontWeight:"bold"},h2:{fontSize:"1.5rem",fontWeight:"bold",padding:"2rem"},h3:{fontSize:"1.25rem",fontWeight:"bold",padding:"1.5rem"},h4:{fontSize:"1rem",fontWeight:"bold",padding:"0.5rem"}})},fonts:{fonts:{heading:"'Arial', sans-serif",body:"'Barlow', sans-serif"}},layerStyles:{selected:{bg:"rgba(255,255,255,0.1)"}},textStyles:{number:{fontFamily:'"Azeret Mono", monospace'}},components:{FormControl:{baseStyle:{width:"auto"}},Modal:{sizes:{xl:{dialog:{height:"auto",minWidth:"50vw"}}}}},colors:{background:{100:"hsl(276.9,41.9%,20%)",200:"hsl(276.9,41.9%,10%)",300:"hsl(276.9,41.9%,6.1%)"}}}),l2=s2,c2=function(){const e=Yx((e=>e.setView));return(0,sj.jsx)(dy,{area:"views",children:(0,sj.jsx)(oy,{children:(0,sj.jsxs)(Ry,{onClick:e,children:[(0,sj.jsx)(Cy,{value:"mission",children:"Mission Planner"}),(0,sj.jsx)(Cy,{value:"performance",children:"Performance View"})]})})})};var u2=i(296),d2=i.n(u2);function h2(e){let{debounce:n,scroll:r,polyfill:i,offsetSize:a}=void 0===e?{debounce:0,scroll:!1,offsetSize:!1}:e;const o=i||("undefined"==typeof window?class{}:window.ResizeObserver);if(!o)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,l]=(0,t.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),c=(0,t.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s}),u=n?"number"==typeof n?n:n.scroll:null,d=n?"number"==typeof n?n:n.resize:null,h=(0,t.useRef)(!1);(0,t.useEffect)((()=>(h.current=!0,()=>{h.current=!1})));const[f,p,m]=(0,t.useMemo)((()=>{const e=()=>{if(!c.current.element)return;const{left:e,top:t,width:n,height:r,bottom:i,right:o,x:s,y:u}=c.current.element.getBoundingClientRect(),d={left:e,top:t,width:n,height:r,bottom:i,right:o,x:s,y:u};c.current.element instanceof HTMLElement&&a&&(d.height=c.current.element.offsetHeight,d.width=c.current.element.offsetWidth),Object.freeze(d),h.current&&!m2(c.current.lastBounds,d)&&l(c.current.lastBounds=d)};return[e,d?d2()(e,d):e,u?d2()(e,u):e]}),[l,a,u,d]);function g(){c.current.scrollContainers&&(c.current.scrollContainers.forEach((e=>e.removeEventListener("scroll",m,!0))),c.current.scrollContainers=null),c.current.resizeObserver&&(c.current.resizeObserver.disconnect(),c.current.resizeObserver=null)}function v(){c.current.element&&(c.current.resizeObserver=new o(m),c.current.resizeObserver.observe(c.current.element),r&&c.current.scrollContainers&&c.current.scrollContainers.forEach((e=>e.addEventListener("scroll",m,{capture:!0,passive:!0}))))}var y,b,x;return y=m,b=Boolean(r),(0,t.useEffect)((()=>{if(b){const e=y;return window.addEventListener("scroll",e,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",e,!0)}}}),[y,b]),x=p,(0,t.useEffect)((()=>{const e=x;return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[x]),(0,t.useEffect)((()=>{g(),v()}),[r,m,p]),(0,t.useEffect)((()=>g),[]),[e=>{e&&e!==c.current.element&&(g(),c.current.element=e,c.current.scrollContainers=f2(e),v())},s,f]}function f2(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(e);return[n,r,i].some((e=>"auto"===e||"scroll"===e))&&t.push(e),[...t,...f2(e.parentElement)]}const p2=["x","y","top","bottom","left","right","width","height"],m2=(e,t)=>p2.every((n=>e[n]===t[n])),g2={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function v2(e){const{handlePointer:t}=function(e){const t=new gA;function n(e){return e.filter((e=>["Move","Over","Enter","Out","Leave"].some((t=>{var n;return null==(n=e.__r3f)?void 0:n.handlers["onPointer"+t]}))))}function r(t){const{internal:n}=e.getState();Array.from(n.hovered.values()).forEach((e=>{if(!t.length||!t.find((t=>t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId))){const r=e.eventObject.__r3f,i=null==r?void 0:r.handlers;if(n.hovered.delete(CF(e)),null!=r&&r.eventCount){const n={...e,intersections:t};null==i.onPointerOut||i.onPointerOut(n),null==i.onPointerLeave||i.onPointerLeave(n)}}}))}function i(e,t){t.forEach((t=>{var n;return null==(n=t.__r3f)||null==n.handlers.onPointerMissed?void 0:n.handlers.onPointerMissed(e)}))}return{handlePointer:a=>{switch(a){case"onPointerLeave":case"onPointerCancel":return()=>r([]);case"onLostPointerCapture":return t=>{const{internal:n}=e.getState();"pointerId"in t&&!n.capturedMap.has(t.pointerId)&&(n.capturedMap.delete(t.pointerId),r([]))}}return o=>{const{onPointerMissed:s,internal:l}=e.getState();l.lastEvent.current=o;const c="onPointerMove"===a,u="onClick"===a||"onContextMenu"===a||"onDoubleClick"===a,d=function(t,n){const r=e.getState(),i=new Set,a=[],o=n?n(r.internal.interaction):r.internal.interaction;o.forEach((e=>{const t=mF(e);t&&(t.raycaster.camera=void 0)})),r.previousRoot||null==r.events.compute||r.events.compute(t,r);let s=o.flatMap((e=>{const n=mF(e);return n&&n.events.enabled&&null!==n.raycaster.camera?(void 0===n.raycaster.camera&&(null==n.events.compute||n.events.compute(t,n,null==(r=n.previousRoot)?void 0:r.getState()),void 0===n.raycaster.camera&&(n.raycaster.camera=null)),n.raycaster.camera?n.raycaster.intersectObject(e,!0):[]):[];var r})).sort(((e,t)=>{const n=mF(e.object),r=mF(t.object);return n&&r?r.events.priority-n.events.priority||e.distance-t.distance:0})).filter((e=>{const t=CF(e);return!i.has(t)&&(i.add(t),!0)}));r.events.filter&&(s=r.events.filter(s,r));for(const e of s){let t=e.object;for(;t;){var l;null!=(l=t.__r3f)&&l.eventCount&&a.push({...e,eventObject:t}),t=t.parent}}if("pointerId"in t&&r.internal.capturedMap.has(t.pointerId))for(let e of r.internal.capturedMap.get(t.pointerId).values())a.push(e.intersection);return a}(o,c?n:void 0),h=u?function(t){const{internal:n}=e.getState(),r=t.offsetX-n.initialClick[0],i=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(r*r+i*i))}(o):0;"onPointerDown"===a&&(l.initialClick=[o.offsetX,o.offsetY],l.initialHits=d.map((e=>e.eventObject))),u&&!d.length&&h<=2&&(i(o,l.interaction),s&&s(o)),c&&r(d),function(n,i,a,o){const{raycaster:s,pointer:l,camera:c,internal:u}=e.getState();if(n.length){const e=t.set(l.x,l.y,0).unproject(c),d={stopped:!1};for(const t of n){const h=e=>{var n,r;return null!=(n=null==(r=u.capturedMap.get(e))?void 0:r.has(t.eventObject))&&n},f=e=>{const n={intersection:t,target:i.target};u.capturedMap.has(e)?u.capturedMap.get(e).set(t.eventObject,n):u.capturedMap.set(e,new Map([[t.eventObject,n]])),i.target.setPointerCapture(e)},p=e=>{const n=u.capturedMap.get(e);n&&TF(u.capturedMap,t.eventObject,n,e)};let m={};for(let e in i){let t=i[e];"function"!=typeof t&&(m[e]=t)}let g={...t,...m,pointer:l,intersections:n,stopped:d.stopped,delta:a,unprojectedPoint:e,ray:s.ray,camera:c,stopPropagation:()=>{const e="pointerId"in i&&u.capturedMap.get(i.pointerId);(!e||e.has(t.eventObject))&&(g.stopped=d.stopped=!0,u.hovered.size&&Array.from(u.hovered.values()).find((e=>e.eventObject===t.eventObject)))&&r([...n.slice(0,n.indexOf(t)),t])},target:{hasPointerCapture:h,setPointerCapture:f,releasePointerCapture:p},currentTarget:{hasPointerCapture:h,setPointerCapture:f,releasePointerCapture:p},nativeEvent:i};if(o(g),!0===d.stopped)break}}}(d,o,h,(e=>{const t=e.eventObject,n=t.__r3f,r=null==n?void 0:n.handlers;if(null!=n&&n.eventCount)if(c){if(r.onPointerOver||r.onPointerEnter||r.onPointerOut||r.onPointerLeave){const t=CF(e),n=l.hovered.get(t);n?n.stopped&&e.stopPropagation():(l.hovered.set(t,e),null==r.onPointerOver||r.onPointerOver(e),null==r.onPointerEnter||r.onPointerEnter(e))}null==r.onPointerMove||r.onPointerMove(e)}else{const n=r[a];n?u&&!l.initialHits.includes(t)||(i(o,l.interaction.filter((e=>!l.initialHits.includes(e)))),n(e)):u&&l.initialHits.includes(t)&&i(o,l.interaction.filter((e=>!l.initialHits.includes(e))))}}))}}}}(e);return{priority:1,enabled:!0,compute(e,t,n){t.pointer.set(e.offsetX/t.size.width*2-1,-e.offsetY/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(g2).reduce(((e,n)=>({...e,[n]:t(n)})),{}),connect:t=>{var n;const{set:r,events:i}=e.getState();null==i.disconnect||i.disconnect(),r((e=>({events:{...e.events,connected:t}}))),Object.entries(null!=(n=i.handlers)?n:[]).forEach((([e,n])=>{const[r,i]=g2[e];t.addEventListener(r,n,{passive:i})}))},disconnect:()=>{const{set:t,events:n}=e.getState();var r;n.connected&&(Object.entries(null!=(r=n.handlers)?r:[]).forEach((([e,t])=>{if(n&&n.connected instanceof HTMLElement){const[r]=g2[e];n.connected.removeEventListener(r,t)}})),t((e=>({events:{...e.events,connected:void 0}}))))}}}const y2=t.forwardRef((function({children:n,fallback:r,resize:i,style:a,gl:o,events:s=v2,shadows:l,linear:c,flat:u,legacy:d,orthographic:h,frameloop:f,dpr:p,performance:m,raycaster:g,camera:v,onPointerMissed:y,onCreated:b,...x},_){t.useMemo((()=>PF(e)),[]);const[w,M]=h2({scroll:!0,debounce:{scroll:50,resize:0},...i}),S=t.useRef(null),A=t.useRef(null),[E,C]=t.useState(null);t.useImperativeHandle(_,(()=>S.current));const T=uF(y),[R,P]=t.useState(!1),[L,D]=t.useState(!1);if(R)throw R;if(L)throw L;const I=t.useRef(null);return M.width>0&&M.height>0&&E&&(I.current||(I.current=tN(E)),I.current.configure({gl:o,events:s,shadows:l,linear:c,flat:u,legacy:d,orthographic:h,frameloop:f,dpr:p,performance:m,raycaster:g,camera:v,size:M,onPointerMissed:(...e)=>null==T.current?void 0:T.current(...e),onCreated:e=>{null==e.events.connect||e.events.connect(A.current),null==b||b(e)}}),I.current.render(t.createElement(hF,{set:D},t.createElement(t.Suspense,{fallback:t.createElement(dF,{set:P})},n)))),cF((()=>{C(S.current)}),[]),t.useEffect((()=>{if(E)return()=>rN(E)}),[E]),t.createElement("div",In({ref:A,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",...a}},x),t.createElement("div",{ref:w,style:{width:"100%",height:"100%"}},t.createElement("canvas",{ref:S,style:{display:"block"}},r)))})),b2=new tA;function x2({canvasSize:e,scene:n,index:r,children:i,frames:a,rect:o,track:s}){const l=jF((e=>e.get)),c=jF((e=>e.camera)),u=jF((e=>e.scene)),d=jF((e=>e.setEvents));let h=0;return WF((t=>{var r,l;if((a===1/0||h<=a)&&(o.current=null==(r=s.current)?void 0:r.getBoundingClientRect(),h++),o.current){const{left:r,right:a,top:s,bottom:d,width:h,height:f}=o.current,p=d<0||s>e.height||a<0||r>e.width,m=e.height-d,g=h/f;if((l=c)&&l.isOrthographicCamera?c.left===h/-2&&c.right===h/2&&c.top===f/2&&c.bottom===f/-2||(Object.assign(c,{left:h/-2,right:h/2,top:f/2,bottom:f/-2}),c.updateProjectionMatrix()):c.aspect!==g&&(c.aspect=g,c.updateProjectionMatrix()),t.gl.setViewport(r,m,h,f),t.gl.setScissor(r,m,h,f),t.gl.setScissorTest(!0),p)return t.gl.getClearColor(b2),t.gl.setClearColor(b2,t.gl.getClearAlpha()),void t.gl.clear(!0,!0);t.gl.render(i?u:n,c)}}),r),t.useEffect((()=>{const e=l().events.connected;return d({connected:s.current}),()=>d({connected:e})}),[]),t.createElement(t.Fragment,null,i)}const _2=({track:e,index:n=1,frames:r=1/0,children:i})=>{const a=t.useRef(null),{size:o,scene:s}=jF(),[l]=t.useState((()=>new bP)),c=t.useCallback(((t,n)=>{if(e.current&&t.target===e.current){const{width:e,height:r,left:i,top:o}=a.current,s=t.clientX-i,l=t.clientY-o;n.pointer.set(s/e*2-1,-l/r*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)}}),[a]),[u,d]=t.useReducer((()=>!0),!1);return t.useEffect((()=>{var t;a.current=null==(t=e.current)?void 0:t.getBoundingClientRect(),d()}),[]),u&&function(e,n,r){return t.createElement(iN,{key:n.uuid,children:e,container:n,state:r})}(t.createElement(x2,{canvasSize:o,frames:r,scene:s,track:e,rect:a,index:n},i),l,{events:{compute:c,priority:n},size:{width:a.current.width,height:a.current.height}})},w2=(0,t.createContext)(null);function M2({iterations:e=10,ms:n=250,threshold:r=.75,step:i=.1,factor:a=.5,flipflops:o=1/0,bounds:s=(e=>e>100?[60,100]:[40,60]),onIncline:l,onDecline:c,onChange:u,onFallback:d,children:h}){const f=Math.pow(10,0),[p,m]=(0,t.useState)((()=>({fps:0,index:0,factor:a,flipped:0,refreshrate:0,fallback:!1,frames:[],averages:[],subscriptions:new Map,subscribe:e=>{const t=Symbol();return p.subscriptions.set(t,e.current),()=>{p.subscriptions.delete(t)}}})));let g=0;return WF((()=>{const{frames:t,averages:a}=p;if(!p.fallback&&a.length<e){t.push(performance.now());const h=t[t.length-1]-t[0];if(h>=n){if(p.fps=Math.round(t.length/h*1e3*f)/f,p.refreshrate=Math.max(p.refreshrate,p.fps),a[p.index++%e]=p.fps,a.length===e){const[t,n]=s(p.refreshrate),h=a.filter((e=>e>=n)),f=a.filter((e=>e<t));h.length>e*r&&(p.factor=Math.min(1,p.factor+i),p.flipped++,l&&l(p),p.subscriptions.forEach((e=>e.onIncline&&e.onIncline(p)))),f.length>e*r&&(p.factor=Math.max(0,p.factor-i),p.flipped++,c&&c(p),p.subscriptions.forEach((e=>e.onDecline&&e.onDecline(p)))),g!==p.factor&&(g=p.factor,u&&u(p),p.subscriptions.forEach((e=>e.onChange&&e.onChange(p)))),p.flipped>o&&!p.fallback&&(p.fallback=!0,d&&d(p),p.subscriptions.forEach((e=>e.onFallback&&e.onFallback(p)))),p.averages=[]}p.frames=[]}}})),t.createElement(w2.Provider,{value:p},h)}class S2 extends MC{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:"\n      uniform float time;\n      attribute float size;\n      varying vec3 vColor;\n      void main() {\n        vColor = color;\n        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);\n        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(mvPosition.x + 2.0 * time + 100.0));\n        gl_Position = projectionMatrix * mvPosition;\n      }",fragmentShader:"\n      uniform sampler2D pointTexture;\n      uniform float fade;\n      varying vec3 vColor;\n      void main() {\n        float opacity = 1.0;\n        if (fade == 1.0) {\n          float d = distance(gl_PointCoord, vec2(0.5, 0.5));\n          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));\n        }\n        gl_FragColor = vec4(vColor, opacity);\n\n        #include <tonemapping_fragment>\n\t      #include <encodings_fragment>\n      }"})}}const A2=e=>(new gA).setFromSpherical(new tB(e,Math.acos(1-2*Math.random()),2*Math.random()*Math.PI)),E2=t.forwardRef((({radius:e=100,depth:n=50,count:r=5e3,saturation:i=0,factor:a=4,fade:o=!1,speed:s=1},l)=>{const c=t.useRef(),[u,d,h]=t.useMemo((()=>{const t=[],o=[],s=Array.from({length:r},(()=>(.5+.5*Math.random())*a)),l=new tA;let c=e+n;const u=n/r;for(let e=0;e<r;e++)c-=u*Math.random(),t.push(...A2(c).toArray()),l.setHSL(e/r,i,.9),o.push(l.r,l.g,l.b);return[new Float32Array(t),new Float32Array(o),new Float32Array(s)]}),[r,n,a,e,i]);WF((e=>c.current&&(c.current.uniforms.time.value=e.clock.getElapsedTime()*s)));const[f]=t.useState((()=>new S2));return t.createElement("points",{ref:l},t.createElement("bufferGeometry",null,t.createElement("bufferAttribute",{attach:"attributes-position",args:[u,3]}),t.createElement("bufferAttribute",{attach:"attributes-color",args:[d,3]}),t.createElement("bufferAttribute",{attach:"attributes-size",args:[h,1]})),t.createElement("primitive",{ref:c,object:f,attach:"material",blending:D_,"uniforms-fade-value":o,transparent:!0,vertexColors:!0}))})),C2=function(){const e=(0,t.useCallback)((e=>{qx.setState({frame:e})}),[]),{isPaused:n,speed:r}=Yx((e=>({isPaused:e.isPaused,speed:e.speed})),Zy),i=(0,t.useRef)(0);WF((({clock:t},a)=>{if(!n){let t=i.current+Math.round(Mx.FRAMES*(1e3*a*Mx.MIN_SPEED*r/Mx.SIM_LENGTH));t>=Mx.FRAMES&&(t=0),t!==i.current&&(i.current=t,e(t))}}));const{clock:a}=jF();return(0,t.useEffect)((()=>{!0===n&&a.stop(),a.start()}),[n]),null},T2={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class R2{constructor(e,t,n){const r=this;let i,a=!1,o=0,s=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){s++,!1===a&&void 0!==r.onStart&&r.onStart(e,o,s),a=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,s),o===s&&(a=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}const P2=new R2;class L2{constructor(e){this.manager=void 0!==e?e:P2,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}function D2(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;class I2 extends L2{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,a=T2.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;const o=D2("img");function s(){c(),T2.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){c(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function c(){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1)}return o.addEventListener("load",s,!1),o.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o}}const k2=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function B2(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(k2[255&e]+k2[e>>8&255]+k2[e>>16&255]+k2[e>>24&255]+"-"+k2[255&t]+k2[t>>8&255]+"-"+k2[t>>16&15|64]+k2[t>>24&255]+"-"+k2[63&n|128]+k2[n>>8&255]+"-"+k2[n>>16&255]+k2[n>>24&255]+k2[255&r]+k2[r>>8&255]+k2[r>>16&255]+k2[r>>24&255]).toLowerCase()}Math.PI,Math.PI;class F2{constructor(e=0,t=0){F2.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class N2{constructor(){N2.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,r,i,a,o,s,l){const c=this.elements;return c[0]=e,c[1]=r,c[2]=o,c[3]=t,c[4]=i,c[5]=s,c[6]=n,c[7]=a,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[3],s=n[6],l=n[1],c=n[4],u=n[7],d=n[2],h=n[5],f=n[8],p=r[0],m=r[3],g=r[6],v=r[1],y=r[4],b=r[7],x=r[2],_=r[5],w=r[8];return i[0]=a*p+o*v+s*x,i[3]=a*m+o*y+s*_,i[6]=a*g+o*b+s*w,i[1]=l*p+c*v+u*x,i[4]=l*m+c*y+u*_,i[7]=l*g+c*b+u*w,i[2]=d*p+h*v+f*x,i[5]=d*m+h*y+f*_,i[8]=d*g+h*b+f*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8];return t*a*c-t*o*l-n*i*c+n*o*s+r*i*l-r*a*s}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=c*a-o*l,d=o*s-c*i,h=l*i-a*s,f=t*u+n*d+r*h;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);const p=1/f;return e[0]=u*p,e[1]=(r*l-c*n)*p,e[2]=(o*n-r*a)*p,e[3]=d*p,e[4]=(c*t-r*s)*p,e[5]=(r*i-o*t)*p,e[6]=h*p,e[7]=(n*s-l*t)*p,e[8]=(a*t-n*i)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,a,o){const s=Math.cos(i),l=Math.sin(i);return this.set(n*s,n*l,-n*(s*a+l*o)+a+e,-r*l,r*s,-r*(-l*a+s*o)+o+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],a=r[3],o=r[6],s=r[1],l=r[4],c=r[7];return r[0]=t*i+n*s,r[3]=t*a+n*l,r[6]=t*o+n*c,r[1]=-n*i+t*s,r[4]=-n*a+t*l,r[7]=-n*o+t*c,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function O2(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}let z2;class U2{constructor(e=null){this.isSource=!0,this.uuid=B2(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(H2(r[t].image)):e.push(H2(r[t]))}else e=H2(r);n.url=e}return t||(e.images[this.uuid]=n),n}}function H2(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?class{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===z2&&(z2=D2("canvas")),z2.width=e.width,z2.height=e.height;const n=z2.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=z2}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=D2("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let e=0;e<i.length;e++)i[e]=255*O2(i[e]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*O2(t[e]/255)):t[e]=O2(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let G2=0;class V2 extends class{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}{constructor(e=V2.DEFAULT_IMAGE,t=V2.DEFAULT_MAPPING,n=1001,r=1001,i=1006,a=1008,o=1023,s=1009,l=1,c=3e3){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:G2++}),this.uuid=B2(),this.name="",this.source=new U2(e),this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=a,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=s,this.offset=new F2(0,0),this.repeat=new F2(1,1),this.center=new F2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new N2,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case 1001:e.x=e.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case 1001:e.y=e.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}V2.DEFAULT_IMAGE=null,V2.DEFAULT_MAPPING=300;class j2 extends L2{constructor(e){super(e)}load(e,t,n,r){const i=new V2,a=new I2(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}const W2=i.p+"assets/1156fe1d14e10444eb47.jpg",X2=i.p+"assets/c6a4c44bb1719fc3dfc4.jpg",q2=function(){const e=(0,t.useRef)(),n=qF(j2,W2),r=qF(j2,X2);(0,t.useLayoutEffect)((()=>{r.minFilter=Sw,r.magFilter=Sw}),[r]),(0,t.useLayoutEffect)((()=>{n.wrapS=_w,n.offset.x=.5}),[n]);const i=(0,t.useRef)(qx.getState().frame);(0,t.useEffect)((()=>{qx.subscribe((e=>{i.current=e.frame}))}),[]);const a=Yx((e=>e.mission.earth));return WF((()=>{e.current.rotation.y=a[i.current]})),(0,sj.jsxs)("mesh",{ref:e,rotation:[0,a[0],0],position:[0,0,0],children:[(0,sj.jsx)("sphereGeometry",{attach:"geometry",args:[1,64,64]}),(0,sj.jsx)("meshToonMaterial",{attach:"material",map:n,gradientMap:r})]})};i(6150);const Y2=function(){const e=(0,t.useRef)(),n=(0,t.useRef)(qx.getState().frame);(0,t.useEffect)((()=>{qx.subscribe((e=>{n.current=e.frame}))}),[]);const r=Yx((e=>e.mission.sun));return WF((({clock:t})=>{e.current.position.x=r.x[n.current],e.current.position.y=r.y[n.current],e.current.position.z=r.z[n.current]})),(0,sj.jsx)("group",{ref:e,children:(0,sj.jsx)("directionalLight",{color:16777215,intensity:.5,position:[r.x[0],r.y[0],r.z[0]]})})},Z2=(e,t)=>(e%t+t)%t;class J2 extends ES{constructor(e,t){super(),HQ(this,"object",void 0),HQ(this,"domElement",void 0),HQ(this,"enabled",!0),HQ(this,"target",new gA),HQ(this,"minDistance",0),HQ(this,"maxDistance",1/0),HQ(this,"minZoom",0),HQ(this,"maxZoom",1/0),HQ(this,"minPolarAngle",0),HQ(this,"maxPolarAngle",Math.PI),HQ(this,"minAzimuthAngle",-1/0),HQ(this,"maxAzimuthAngle",1/0),HQ(this,"enableDamping",!1),HQ(this,"dampingFactor",.05),HQ(this,"enableZoom",!0),HQ(this,"zoomSpeed",1),HQ(this,"enableRotate",!0),HQ(this,"rotateSpeed",1),HQ(this,"enablePan",!0),HQ(this,"panSpeed",1),HQ(this,"screenSpacePanning",!0),HQ(this,"keyPanSpeed",7),HQ(this,"autoRotate",!1),HQ(this,"autoRotateSpeed",2),HQ(this,"reverseOrbit",!1),HQ(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),HQ(this,"mouseButtons",{LEFT:m_.ROTATE,MIDDLE:m_.DOLLY,RIGHT:m_.PAN}),HQ(this,"touches",{ONE:g_.ROTATE,TWO:g_.DOLLY_PAN}),HQ(this,"target0",void 0),HQ(this,"position0",void 0),HQ(this,"zoom0",void 0),HQ(this,"_domElementKeyEvents",null),HQ(this,"getPolarAngle",void 0),HQ(this,"getAzimuthalAngle",void 0),HQ(this,"setPolarAngle",void 0),HQ(this,"setAzimuthalAngle",void 0),HQ(this,"getDistance",void 0),HQ(this,"listenToKeyEvents",void 0),HQ(this,"saveState",void 0),HQ(this,"reset",void 0),HQ(this,"update",void 0),HQ(this,"connect",void 0),HQ(this,"dispose",void 0),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof AC?this.object.zoom:1,this.getPolarAngle=()=>c.phi,this.getAzimuthalAngle=()=>c.theta,this.setPolarAngle=e=>{let t=Z2(e,2*Math.PI),r=c.phi;r<0&&(r+=2*Math.PI),t<0&&(t+=2*Math.PI);let i=Math.abs(t-r);2*Math.PI-i<i&&(t<r?t+=2*Math.PI:r+=2*Math.PI),u.phi=t-r,n.update()},this.setAzimuthalAngle=e=>{let t=Z2(e,2*Math.PI),r=c.theta;r<0&&(r+=2*Math.PI),t<0&&(t+=2*Math.PI);let i=Math.abs(t-r);2*Math.PI-i<i&&(t<r?t+=2*Math.PI:r+=2*Math.PI),u.theta=t-r,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=e=>{e.addEventListener("keydown",X),this._domElementKeyEvents=e},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object instanceof AC?n.object.zoom:1},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object instanceof AC&&(n.object.zoom=n.zoom0,n.object.updateProjectionMatrix()),n.dispatchEvent(r),n.update(),s=o.NONE},this.update=(()=>{const t=new gA,i=(new mA).setFromUnitVectors(e.up,new gA(0,1,0)),a=i.clone().invert(),p=new gA,m=new mA,g=2*Math.PI;return function(){const e=n.object.position;t.copy(e).sub(n.target),t.applyQuaternion(i),c.setFromVector3(t),n.autoRotate&&s===o.NONE&&E(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(c.theta+=u.theta*n.dampingFactor,c.phi+=u.phi*n.dampingFactor):(c.theta+=u.theta,c.phi+=u.phi);let v=n.minAzimuthAngle,y=n.maxAzimuthAngle;return isFinite(v)&&isFinite(y)&&(v<-Math.PI?v+=g:v>Math.PI&&(v-=g),y<-Math.PI?y+=g:y>Math.PI&&(y-=g),c.theta=v<=y?Math.max(v,Math.min(y,c.theta)):c.theta>(v+y)/2?Math.max(v,c.theta):Math.min(y,c.theta)),c.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,c.phi)),c.makeSafe(),c.radius*=d,c.radius=Math.max(n.minDistance,Math.min(n.maxDistance,c.radius)),!0===n.enableDamping?n.target.addScaledVector(h,n.dampingFactor):n.target.add(h),t.setFromSpherical(c),t.applyQuaternion(a),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(u.theta*=1-n.dampingFactor,u.phi*=1-n.dampingFactor,h.multiplyScalar(1-n.dampingFactor)):(u.set(0,0,0),h.set(0,0,0)),d=1,!!(f||p.distanceToSquared(n.object.position)>l||8*(1-m.dot(n.object.quaternion))>l)&&(n.dispatchEvent(r),p.copy(n.object.position),m.copy(n.object.quaternion),f=!1,!0)}})(),this.connect=e=>{e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),n.domElement=e,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",q),n.domElement.addEventListener("pointerdown",H),n.domElement.addEventListener("pointercancel",j),n.domElement.addEventListener("wheel",W)},this.dispose=()=>{var e,t,r,i,a,o;null===(e=n.domElement)||void 0===e||e.removeEventListener("contextmenu",q),null===(t=n.domElement)||void 0===t||t.removeEventListener("pointerdown",H),null===(r=n.domElement)||void 0===r||r.removeEventListener("pointercancel",j),null===(i=n.domElement)||void 0===i||i.removeEventListener("wheel",W),null===(a=n.domElement)||void 0===a||a.ownerDocument.removeEventListener("pointermove",G),null===(o=n.domElement)||void 0===o||o.ownerDocument.removeEventListener("pointerup",V),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",X)};const n=this,r={type:"change"},i={type:"start"},a={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=o.NONE;const l=1e-6,c=new tB,u=new tB;let d=1;const h=new gA;let f=!1;const p=new zS,m=new zS,g=new zS,v=new zS,y=new zS,b=new zS,x=new zS,_=new zS,w=new zS,M=[],S={};function A(){return Math.pow(.95,n.zoomSpeed)}function E(e){n.reverseOrbit?u.theta+=e:u.theta-=e}function C(e){n.reverseOrbit?u.phi+=e:u.phi-=e}const T=(()=>{const e=new gA;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),h.add(e)}})(),R=(()=>{const e=new gA;return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),h.add(e)}})(),P=(()=>{const e=new gA;return function(t,r){const i=n.domElement;if(i&&n.object instanceof AC&&n.object.isPerspectiveCamera){const a=n.object.position;e.copy(a).sub(n.target);let o=e.length();o*=Math.tan(n.object.fov/2*Math.PI/180),T(2*t*o/i.clientHeight,n.object.matrix),R(2*r*o/i.clientHeight,n.object.matrix)}else i&&n.object instanceof ZC&&n.object.isOrthographicCamera?(T(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),R(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function L(e){n.object instanceof AC&&n.object.isPerspectiveCamera?d/=e:n.object instanceof ZC&&n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function D(e){n.object instanceof AC&&n.object.isPerspectiveCamera?d*=e:n.object instanceof ZC&&n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function I(e){p.set(e.clientX,e.clientY)}function k(e){v.set(e.clientX,e.clientY)}function B(){if(1==M.length)p.set(M[0].pageX,M[0].pageY);else{const e=.5*(M[0].pageX+M[1].pageX),t=.5*(M[0].pageY+M[1].pageY);p.set(e,t)}}function F(){if(1==M.length)v.set(M[0].pageX,M[0].pageY);else{const e=.5*(M[0].pageX+M[1].pageX),t=.5*(M[0].pageY+M[1].pageY);v.set(e,t)}}function N(){const e=M[0].pageX-M[1].pageX,t=M[0].pageY-M[1].pageY,n=Math.sqrt(e*e+t*t);x.set(0,n)}function O(e){if(1==M.length)m.set(e.pageX,e.pageY);else{const t=J(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);m.set(n,r)}g.subVectors(m,p).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(E(2*Math.PI*g.x/t.clientHeight),C(2*Math.PI*g.y/t.clientHeight)),p.copy(m)}function z(e){if(1==M.length)y.set(e.pageX,e.pageY);else{const t=J(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);y.set(n,r)}b.subVectors(y,v).multiplyScalar(n.panSpeed),P(b.x,b.y),v.copy(y)}function U(e){const t=J(e),r=e.pageX-t.x,i=e.pageY-t.y,a=Math.sqrt(r*r+i*i);_.set(0,a),w.set(0,Math.pow(_.y/x.y,n.zoomSpeed)),L(w.y),x.copy(_)}function H(e){var t,r;!1!==n.enabled&&(0===M.length&&(null===(t=n.domElement)||void 0===t||t.ownerDocument.addEventListener("pointermove",G),null===(r=n.domElement)||void 0===r||r.ownerDocument.addEventListener("pointerup",V)),function(e){M.push(e)}(e),"touch"===e.pointerType?function(e){switch(Z(e),M.length){case 1:switch(n.touches.ONE){case g_.ROTATE:if(!1===n.enableRotate)return;B(),s=o.TOUCH_ROTATE;break;case g_.PAN:if(!1===n.enablePan)return;F(),s=o.TOUCH_PAN;break;default:s=o.NONE}break;case 2:switch(n.touches.TWO){case g_.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&N(),n.enablePan&&F(),s=o.TOUCH_DOLLY_PAN;break;case g_.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&N(),n.enableRotate&&B(),s=o.TOUCH_DOLLY_ROTATE;break;default:s=o.NONE}break;default:s=o.NONE}s!==o.NONE&&n.dispatchEvent(i)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case m_.DOLLY:if(!1===n.enableZoom)return;!function(e){x.set(e.clientX,e.clientY)}(e),s=o.DOLLY;break;case m_.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;k(e),s=o.PAN}else{if(!1===n.enableRotate)return;I(e),s=o.ROTATE}break;case m_.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;I(e),s=o.ROTATE}else{if(!1===n.enablePan)return;k(e),s=o.PAN}break;default:s=o.NONE}s!==o.NONE&&n.dispatchEvent(i)}(e))}function G(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch(Z(e),s){case o.TOUCH_ROTATE:if(!1===n.enableRotate)return;O(e),n.update();break;case o.TOUCH_PAN:if(!1===n.enablePan)return;z(e),n.update();break;case o.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&U(e),n.enablePan&&z(e)}(e),n.update();break;case o.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&U(e),n.enableRotate&&O(e)}(e),n.update();break;default:s=o.NONE}}(e):function(e){if(!1!==n.enabled)switch(s){case o.ROTATE:if(!1===n.enableRotate)return;!function(e){m.set(e.clientX,e.clientY),g.subVectors(m,p).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(E(2*Math.PI*g.x/t.clientHeight),C(2*Math.PI*g.y/t.clientHeight)),p.copy(m),n.update()}(e);break;case o.DOLLY:if(!1===n.enableZoom)return;!function(e){_.set(e.clientX,e.clientY),w.subVectors(_,x),w.y>0?L(A()):w.y<0&&D(A()),x.copy(_),n.update()}(e);break;case o.PAN:if(!1===n.enablePan)return;!function(e){y.set(e.clientX,e.clientY),b.subVectors(y,v).multiplyScalar(n.panSpeed),P(b.x,b.y),v.copy(y),n.update()}(e)}}(e))}function V(e){var t,r,i;Y(e),0===M.length&&(null===(t=n.domElement)||void 0===t||t.releasePointerCapture(e.pointerId),null===(r=n.domElement)||void 0===r||r.ownerDocument.removeEventListener("pointermove",G),null===(i=n.domElement)||void 0===i||i.ownerDocument.removeEventListener("pointerup",V)),n.dispatchEvent(a),s=o.NONE}function j(e){Y(e)}function W(e){!1===n.enabled||!1===n.enableZoom||s!==o.NONE&&s!==o.ROTATE||(e.preventDefault(),n.dispatchEvent(i),function(e){e.deltaY<0?D(A()):e.deltaY>0&&L(A()),n.update()}(e),n.dispatchEvent(a))}function X(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:P(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:P(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:P(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:P(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function q(e){!1!==n.enabled&&e.preventDefault()}function Y(e){delete S[e.pointerId];for(let t=0;t<M.length;t++)if(M[t].pointerId==e.pointerId)return void M.splice(t,1)}function Z(e){let t=S[e.pointerId];void 0===t&&(t=new zS,S[e.pointerId]=t),t.set(e.pageX,e.pageY)}function J(e){const t=e.pointerId===M[0].pointerId?M[1]:M[0];return S[t.pointerId]}void 0!==t&&this.connect(t),this.update()}}const $2=t.forwardRef((({makeDefault:e,camera:n,regress:r,domElement:i,enableDamping:a=!0,onChange:o,onStart:s,onEnd:l,...c},u)=>{const d=jF((e=>e.invalidate)),h=jF((e=>e.camera)),f=jF((e=>e.gl)),p=jF((e=>e.events)),m=jF((e=>e.set)),g=jF((e=>e.get)),v=jF((e=>e.performance)),y=n||h,b=i||p.connected||f.domElement,x=t.useMemo((()=>new J2(y)),[y]);return WF((()=>{x.enabled&&x.update()}),-1),t.useEffect((()=>(x.connect(b),()=>{x.dispose()})),[b,r,x,d]),t.useEffect((()=>{const e=e=>{d(),r&&v.regress(),o&&o(e)};return x.addEventListener("change",e),s&&x.addEventListener("start",s),l&&x.addEventListener("end",l),()=>{s&&x.removeEventListener("start",s),l&&x.removeEventListener("end",l),x.removeEventListener("change",e)}}),[o,s,l,x,d]),t.useEffect((()=>{if(e){const e=g().controls;return m({controls:x}),()=>m({controls:e})}}),[e,x]),t.createElement("primitive",In({ref:u,object:x,enableDamping:a},c))}));function K2(){const e=(0,t.useRef)(),{camera:n}=jF();(0,t.useLayoutEffect)((()=>{n.position.z=4}),[n]);const r=Yx((e=>e.cameraTarget));(0,t.useEffect)((()=>{e.current.maxDistance=10,e.current.minDistance=2}),[e]);const i=(0,t.useRef)(new gA(0,0,0)),a=(0,t.useRef)(new tB);return(0,t.useEffect)((()=>{r.lock||"earth"===r.name?e.current.target=i.current:e.current.target=r.ref.position}),[r]),WF((({clock:t},n)=>{r.ref&&r.lock&&(a.current.setFromVector3(r.ref.position),e.current.setAzimuthalAngle(a.current.theta),e.current.setPolarAngle(a.current.phi))})),(0,sj.jsx)($2,{makeDefault:!0,enableZoom:!0,enableRotate:"earth"===r.name||!r.lock,enablePan:!1,ref:e})}const Q2=new WeakMap;class e3 extends RI{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,r){const i=new DI(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,(e=>{const n={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(e,n).then(t).catch(r)}),n,r)}decodeDracoFile(e,t,n,r){const i={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,i).then(t)}decodeGeometry(e,t){for(const e in t.attributeTypes){const n=t.attributeTypes[e];void 0!==n.BYTES_PER_ELEMENT&&(t.attributeTypes[e]=n.name)}const n=JSON.stringify(t);if(Q2.has(e)){const t=Q2.get(e);if(t.key===n)return t.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const i=this.workerNextTaskID++,a=e.byteLength,o=this._getWorker(i,a).then((n=>(r=n,new Promise(((n,a)=>{r._callbacks[i]={resolve:n,reject:a},r.postMessage({type:"decode",id:i,taskConfig:t,buffer:e},[e])}))))).then((e=>this._createGeometry(e.geometry)));return o.catch((()=>!0)).then((()=>{r&&i&&this._releaseTask(r,i)})),Q2.set(e,{key:n,promise:o}),o}_createGeometry(e){const t=new QE;e.index&&t.setIndex(new BE(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const r=e.attributes[n],i=r.name,a=r.array,o=r.itemSize;t.setAttribute(i,new BE(a,o))}return t}_loadLibrary(e,t){const n=new DI(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise(((t,r)=>{n.load(e,t,void 0,r)}))}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then((t=>{const n=t[0];e||(this.decoderConfig.wasmBinary=t[1]);const r=t3.toString(),i=["/* draco decoder */",n,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([i]))})),this.decoderPending}_getWorker(e,t){return this._initDecoder().then((()=>{if(this.workerPool.length<this.workerLimit){const e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){const n=t.data;switch(n.type){case"decode":e._callbacks[n.id].resolve(n);break;case"error":e._callbacks[n.id].reject(n);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+n.type+'"')}},this.workerPool.push(e)}else this.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n}))}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map((e=>e._taskLoad)))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function t3(){let e,t;function n(e,t,n,r,i,a){const o=a.num_components(),s=n.num_points()*o,l=s*i.BYTES_PER_ELEMENT,c=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,i),u=e._malloc(l);t.GetAttributeDataArrayForAllPoints(n,a,c,l,u);const d=new i(e.HEAPF32.buffer,u,s).slice();return e._free(u),{name:r,array:d,itemSize:o}}onmessage=function(r){const i=r.data;switch(i.type){case"init":e=i.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":const r=i.buffer,a=i.taskConfig;t.then((e=>{const t=e.draco,o=new t.Decoder,s=new t.DecoderBuffer;s.Init(new Int8Array(r),r.byteLength);try{const e=function(e,t,r,i){const a=i.attributeIDs,o=i.attributeTypes;let s,l;const c=t.GetEncodedGeometryType(r);if(c===e.TRIANGULAR_MESH)s=new e.Mesh,l=t.DecodeBufferToMesh(r,s);else{if(c!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");s=new e.PointCloud,l=t.DecodeBufferToPointCloud(r,s)}if(!l.ok()||0===s.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+l.error_msg());const u={index:null,attributes:[]};for(const r in a){const l=self[o[r]];let c,d;if(i.useUniqueIDs)d=a[r],c=t.GetAttributeByUniqueId(s,d);else{if(d=t.GetAttributeId(s,e[a[r]]),-1===d)continue;c=t.GetAttribute(s,d)}u.attributes.push(n(e,t,s,r,l,c))}return c===e.TRIANGULAR_MESH&&(u.index=function(e,t,n){const r=3*n.num_faces(),i=4*r,a=e._malloc(i);t.GetTrianglesUInt32Array(n,i,a);const o=new Uint32Array(e.HEAPF32.buffer,a,r).slice();return e._free(a),{array:o,itemSize:1}}(e,t,s)),e.destroy(s),u}(t,o,s,a),r=e.attributes.map((e=>e.array.buffer));e.index&&r.push(e.index.array.buffer),self.postMessage({type:"decode",id:i.id,geometry:e},r)}catch(e){console.error(e),self.postMessage({type:"error",id:i.id,error:e.message})}finally{t.destroy(s),t.destroy(o)}}))}}}let n3;class r3 extends RI{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new l3(e)})),this.register((function(e){return new p3(e)})),this.register((function(e){return new m3(e)})),this.register((function(e){return new c3(e)})),this.register((function(e){return new u3(e)})),this.register((function(e){return new d3(e)})),this.register((function(e){return new h3(e)})),this.register((function(e){return new f3(e)})),this.register((function(e){return new o3(e)})),this.register((function(e){return new g3(e)}))}load(e,t,n,r){const i=this;let a;a=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:ak.extractUrlBase(e),this.manager.itemStart(e);const o=function(t){r?r(t):console.error(t),i.manager.itemError(e),i.manager.itemEnd(e)},s=new DI(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{i.parse(n,a,(function(n){t(n),i.manager.itemEnd(e)}),o)}catch(e){o(e)}}),n,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let i;const a={},o={};if("string"==typeof e)i=e;else if(ak.decodeText(new Uint8Array(e,0,4))===v3){try{a[a3.KHR_BINARY_GLTF]=new y3(e)}catch(e){return void(r&&r(e))}i=a[a3.KHR_BINARY_GLTF].content}else i=ak.decodeText(new Uint8Array(e));const s=JSON.parse(i);if(void 0===s.asset||s.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new U3(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let e=0;e<this.pluginCallbacks.length;e++){const t=this.pluginCallbacks[e](l);o[t.name]=t,a[t.name]=!0}if(s.extensionsUsed)for(let e=0;e<s.extensionsUsed.length;++e){const t=s.extensionsUsed[e],n=s.extensionsRequired||[];switch(t){case a3.KHR_MATERIALS_UNLIT:a[t]=new s3;break;case a3.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:a[t]=new w3;break;case a3.KHR_DRACO_MESH_COMPRESSION:a[t]=new b3(s,this.dracoLoader);break;case a3.KHR_TEXTURE_TRANSFORM:a[t]=new x3;break;case a3.KHR_MESH_QUANTIZATION:a[t]=new M3;break;default:n.indexOf(t)>=0&&void 0===o[t]&&console.warn('THREE.GLTFLoader: Unknown extension "'+t+'".')}}l.setExtensions(a),l.setPlugins(o),l.parse(n,r)}parseAsync(e,t){const n=this;return new Promise((function(r,i){n.parse(e,t,r,i)}))}}function i3(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const a3={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class o3{constructor(e){this.parser=e,this.name=a3.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const r=t[n];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const i=t.json,a=((i.extensions&&i.extensions[this.name]||{}).lights||[])[e];let o;const s=new tA(16777215);void 0!==a.color&&s.fromArray(a.color);const l=void 0!==a.range?a.range:0;switch(a.type){case"directional":o=new QI(s),o.target.position.set(0,0,-1),o.add(o.target);break;case"point":o=new $I(s),o.distance=l;break;case"spot":o=new XI(s),o.distance=l,a.spot=a.spot||{},a.spot.innerConeAngle=void 0!==a.spot.innerConeAngle?a.spot.innerConeAngle:0,a.spot.outerConeAngle=void 0!==a.spot.outerConeAngle?a.spot.outerConeAngle:Math.PI/4,o.angle=a.spot.outerConeAngle,o.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,o.target.position.set(0,0,-1),o.add(o.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return o.position.set(0,0,0),o.decay=2,void 0!==a.intensity&&(o.intensity=a.intensity),o.name=t.createUniqueName(a.name||"light_"+e),r=Promise.resolve(o),t.cache.add(n,r),r}createNodeAttachment(e){const t=this,n=this.parser,r=n.json.nodes[e],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then((function(e){return n._getNodeRef(t.cache,i,e)}))}}class s3{constructor(){this.name=a3.KHR_MATERIALS_UNLIT}getMaterialType(){return DE}extendParams(e,t,n){const r=[];e.color=new tA(1,1,1),e.opacity=1;const i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){const t=i.baseColorFactor;e.color.fromArray(t),e.opacity=t[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(e,"map",i.baseColorTexture))}return Promise.all(r)}}class l3{constructor(e){this.parser=e,this.name=a3.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?KD:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],a=r.extensions[this.name];if(void 0!==a.clearcoatFactor&&(t.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&i.push(n.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&i.push(n.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(i.push(n.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){const e=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new zS(e,e)}return Promise.all(i)}}class c3{constructor(e){this.parser=e,this.name=a3.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?KD:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[];t.sheenColor=new tA(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=r.extensions[this.name];return void 0!==a.sheenColorFactor&&t.sheenColor.fromArray(a.sheenColorFactor),void 0!==a.sheenRoughnessFactor&&(t.sheenRoughness=a.sheenRoughnessFactor),void 0!==a.sheenColorTexture&&i.push(n.assignTexture(t,"sheenColorMap",a.sheenColorTexture)),void 0!==a.sheenRoughnessTexture&&i.push(n.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(i)}}class u3{constructor(e){this.parser=e,this.name=a3.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?KD:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],a=r.extensions[this.name];return void 0!==a.transmissionFactor&&(t.transmission=a.transmissionFactor),void 0!==a.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(i)}}class d3{constructor(e){this.parser=e,this.name=a3.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?KD:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],a=r.extensions[this.name];t.thickness=void 0!==a.thicknessFactor?a.thicknessFactor:0,void 0!==a.thicknessTexture&&i.push(n.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||0;const o=a.attenuationColor||[1,1,1];return t.attenuationColor=new tA(o[0],o[1],o[2]),Promise.all(i)}}class h3{constructor(e){this.parser=e,this.name=a3.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?KD:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}class f3{constructor(e){this.parser=e,this.name=a3.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?KD:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],a=r.extensions[this.name];t.specularIntensity=void 0!==a.specularFactor?a.specularFactor:1,void 0!==a.specularTexture&&i.push(n.assignTexture(t,"specularIntensityMap",a.specularTexture));const o=a.specularColorFactor||[1,1,1];return t.specularColor=new tA(o[0],o[1],o[2]),void 0!==a.specularColorTexture&&i.push(n.assignTexture(t,"specularColorMap",a.specularColorTexture).then((function(e){e.encoding=jM}))),Promise.all(i)}}class p3{constructor(e){this.parser=e,this.name=a3.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const i=r.extensions[this.name],a=n.images[i.source],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,a,o)}}class m3{constructor(e){this.parser=e,this.name=a3.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;const a=i.extensions[t],o=r.images[a.source];let s=n.textureLoader;if(o.uri){const e=n.options.manager.getHandler(o.uri);null!==e&&(s=e)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,o,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class g3{constructor(e){this.name=a3.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],r=this.parser.getDependency("buffer",e.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([r,i.ready]).then((function(t){const n=e.byteOffset||0,r=e.byteLength||0,a=e.count,o=e.byteStride,s=new ArrayBuffer(a*o),l=new Uint8Array(t[0],n,r);return i.decodeGltfBuffer(new Uint8Array(s),a,o,l,e.mode,e.filter),s}))}return null}}const v3="glTF";class y3{constructor(e){this.name=a3.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:ak.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==v3)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,r=new DataView(e,12);let i=0;for(;i<n;){const t=r.getUint32(i,!0);i+=4;const n=r.getUint32(i,!0);if(i+=4,1313821514===n){const n=new Uint8Array(e,12+i,t);this.content=ak.decodeText(n)}else if(5130562===n){const n=12+i;this.body=e.slice(n,n+t)}i+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class b3{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=a3.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},s={},l={};for(const e in a){const t=L3[e]||e.toLowerCase();o[t]=a[e]}for(const t in e.attributes){const r=L3[t]||t.toLowerCase();if(void 0!==a[t]){const i=n.accessors[e.attributes[t]],a=C3[i.componentType];l[r]=a,s[r]=!0===i.normalized}}return t.getDependency("bufferView",i).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(const t in e.attributes){const n=e.attributes[t],r=s[t];void 0!==r&&(n.normalized=r)}t(e)}),o,l)}))}))}}class x3{constructor(){this.name=a3.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class _3 extends $D{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),i=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),a=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),o={specular:{value:(new tA).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=o,this.onBeforeCompile=function(e){for(const t in o)e.uniforms[t]=o[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",i).replace("#include <lights_physical_fragment>",a)},Object.defineProperties(this,{specular:{get:function(){return o.specular.value},set:function(e){o.specular.value=e}},specularMap:{get:function(){return o.specularMap.value},set:function(e){o.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return o.glossiness.value},set:function(e){o.glossiness.value=e}},glossinessMap:{get:function(){return o.glossinessMap.value},set:function(e){o.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class w3{constructor(){this.name=a3.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return _3}extendParams(e,t,n){const r=t.extensions[this.name];e.color=new tA(1,1,1),e.opacity=1;const i=[];if(Array.isArray(r.diffuseFactor)){const t=r.diffuseFactor;e.color.fromArray(t),e.opacity=t[3]}if(void 0!==r.diffuseTexture&&i.push(n.assignTexture(e,"map",r.diffuseTexture)),e.emissive=new tA(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new tA(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){const t=r.specularGlossinessTexture;i.push(n.assignTexture(e,"glossinessMap",t)),i.push(n.assignTexture(e,"specularMap",t))}return Promise.all(i)}createMaterial(e){const t=new _3(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=qM,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}class M3{constructor(){this.name=a3.KHR_MESH_QUANTIZATION}}class S3 extends hI{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r;for(let e=0;e!==r;e++)t[e]=n[i+e];return t}}S3.prototype.beforeStart_=S3.prototype.copySampleValue_,S3.prototype.afterEnd_=S3.prototype.copySampleValue_,S3.prototype.interpolate_=function(e,t,n,r){const i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=2*o,l=3*o,c=r-t,u=(n-t)/c,d=u*u,h=d*u,f=e*l,p=f-l,m=-2*h+3*d,g=h-d,v=1-m,y=g-d+u;for(let e=0;e!==o;e++){const t=a[p+e+o],n=a[p+e+s]*c,r=a[f+e+o],l=a[f+e]*c;i[e]=v*t+y*n+m*r+g*l}return i};const A3=new mA;class E3 extends S3{interpolate_(e,t,n,r){const i=super.interpolate_(e,t,n,r);return A3.fromArray(i).normalize().toArray(i),i}}const C3={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},T3={9728:Sw,9729:Rw,9984:Aw,9985:Pw,9986:Cw,9987:Dw},R3={33071:ww,33648:Mw,10497:_w},P3={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},L3={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},D3={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},I3={CUBICSPLINE:void 0,LINEAR:IM,STEP:DM};function k3(e,t,n){for(const r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function B3(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function F3(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,r=n.length;t<r;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function N3(e){const t=e.extensions&&e.extensions[a3.KHR_DRACO_MESH_COMPRESSION];let n;return n=t?"draco:"+t.bufferView+":"+t.indices+":"+O3(t.attributes):e.indices+":"+O3(e.attributes)+":"+e.mode,n}function O3(e){let t="";const n=Object.keys(e).sort();for(let r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function z3(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class U3{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new i3,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},"undefined"!=typeof createImageBitmap&&!1===/Firefox|^((?!chrome|android).)*safari/i.test(navigator.userAgent)?this.textureLoader=new hk(this.options.manager):this.textureLoader=new OI(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new DI(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){const a={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};k3(i,a,r),B3(a,r),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(a)}))).then((function(){e(a)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let n=0,r=t.length;n<r;n++){const r=t[n].joints;for(let t=0,n=r.length;t<n;t++)e[r[t]].isBone=!0}for(let t=0,r=e.length;t<r;t++){const r=e[t];void 0!==r.mesh&&(this._addNodeRef(this.meshCache,r.mesh),void 0!==r.skin&&(n[r.mesh].isSkinnedMesh=!0)),void 0!==r.camera&&this._addNodeRef(this.cameraCache,r.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),i=(e,t)=>{const n=this.associations.get(e);null!=n&&this.associations.set(t,n);for(const[n,r]of e.children.entries())i(r,t.children[n])};return i(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const i=e(t[r]);i&&n.push(i)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[a3.KHR_BINARY_GLTF].body);const r=this.options;return new Promise((function(e,i){n.load(ak.resolveURL(t.uri,r.path),e,void 0,(function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);const i=[];return void 0!==r.bufferView?i.push(this.getDependency("bufferView",r.bufferView)):i.push(null),void 0!==r.sparse&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then((function(e){const i=e[0],a=P3[r.type],o=C3[r.componentType],s=o.BYTES_PER_ELEMENT,l=s*a,c=r.byteOffset||0,u=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,d=!0===r.normalized;let h,f;if(u&&u!==l){const e=Math.floor(c/u),n="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+e+":"+r.count;let l=t.cache.get(n);l||(h=new o(i,e*u,r.count*u/s),l=new xP(h,u/s),t.cache.add(n,l)),f=new wP(l,a,c%u/s,d)}else h=null===i?new o(r.count*a):new o(i,c,r.count*a),f=new BE(h,a,d);if(void 0!==r.sparse){const t=P3.SCALAR,n=C3[r.sparse.indices.componentType],s=r.sparse.indices.byteOffset||0,l=r.sparse.values.byteOffset||0,c=new n(e[1],s,r.sparse.count*t),u=new o(e[2],l,r.sparse.count*a);null!==i&&(f=new BE(f.array.slice(),f.itemSize,f.normalized));for(let e=0,t=c.length;e<t;e++){const t=c[e];if(f.setX(t,u[e*a]),a>=2&&f.setY(t,u[e*a+1]),a>=3&&f.setZ(t,u[e*a+2]),a>=4&&f.setW(t,u[e*a+3]),a>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return f}))}loadTexture(e){const t=this.json,n=this.options,r=t.textures[e],i=t.images[r.source];let a=this.textureLoader;if(i.uri){const e=n.manager.getHandler(i.uri);null!==e&&(a=e)}return this.loadTextureImage(e,i,a)}loadTextureImage(e,t,n){const r=this,i=this.json,a=this.options,o=i.textures[e],s=(t.uri||t.bufferView)+":"+o.sampler;if(this.textureCache[s])return this.textureCache[s];const l=self.URL||self.webkitURL;let c=t.uri||"",u=!1;if(void 0!==t.bufferView)c=r.getDependency("bufferView",t.bufferView).then((function(e){u=!0;const n=new Blob([e],{type:t.mimeType});return c=l.createObjectURL(n),c}));else if(void 0===t.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(c).then((function(e){return new Promise((function(t,r){let i=t;!0===n.isImageBitmapLoader&&(i=function(e){const n=new sA(e);n.needsUpdate=!0,t(n)}),n.load(ak.resolveURL(e,a.path),i,void 0,r)}))})).then((function(t){!0===u&&l.revokeObjectURL(c),t.flipY=!1,o.name&&(t.name=o.name);const n=(i.samplers||{})[o.sampler]||{};return t.magFilter=T3[n.magFilter]||Rw,t.minFilter=T3[n.minFilter]||Dw,t.wrapS=R3[n.wrapS]||_w,t.wrapT=R3[n.wrapT]||_w,r.associations.set(t,{textures:e}),t})).catch((function(){return console.error("THREE.GLTFLoader: Couldn't load texture",c),null}));return this.textureCache[s]=d,d}assignTexture(e,t,n){const r=this;return this.getDependency("texture",n.index).then((function(i){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===t&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),r.extensions[a3.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[a3.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=r.associations.get(i);i=r.extensions[a3.KHR_TEXTURE_TRANSFORM].extendTexture(i,e),r.associations.set(i,t)}}return e[t]=i,i}))}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=void 0===t.attributes.tangent,i=void 0!==t.attributes.color,a=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new gL,LE.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new aL,LE.prototype.copy.call(t,n),t.color.copy(n.color),this.cache.add(e,t)),n=t}if(r||i||a){let e="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(e+="specular-glossiness:"),r&&(e+="derivative-tangents:"),i&&(e+="vertex-colors:"),a&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),i&&(t.vertexColors=!0),a&&(t.flatShading=!0),r&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=n}getMaterialType(){return $D}loadMaterial(e){const t=this,n=this.json,r=this.extensions,i=n.materials[e];let a;const o={},s=i.extensions||{},l=[];if(s[a3.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const e=r[a3.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];a=e.getMaterialType(),l.push(e.extendParams(o,i,t))}else if(s[a3.KHR_MATERIALS_UNLIT]){const e=r[a3.KHR_MATERIALS_UNLIT];a=e.getMaterialType(),l.push(e.extendParams(o,i,t))}else{const n=i.pbrMetallicRoughness||{};if(o.color=new tA(1,1,1),o.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;o.color.fromArray(e),o.opacity=e[3]}void 0!==n.baseColorTexture&&l.push(t.assignTexture(o,"map",n.baseColorTexture)),o.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,o.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(l.push(t.assignTexture(o,"metalnessMap",n.metallicRoughnessTexture)),l.push(t.assignTexture(o,"roughnessMap",n.metallicRoughnessTexture))),a=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),l.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,o)}))))}!0===i.doubleSided&&(o.side=C_);const c=i.alphaMode||"OPAQUE";if("BLEND"===c?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,"MASK"===c&&(o.alphaTest=void 0!==i.alphaCutoff?i.alphaCutoff:.5)),void 0!==i.normalTexture&&a!==DE&&(l.push(t.assignTexture(o,"normalMap",i.normalTexture)),o.normalScale=new zS(1,1),void 0!==i.normalTexture.scale)){const e=i.normalTexture.scale;o.normalScale.set(e,e)}return void 0!==i.occlusionTexture&&a!==DE&&(l.push(t.assignTexture(o,"aoMap",i.occlusionTexture)),void 0!==i.occlusionTexture.strength&&(o.aoMapIntensity=i.occlusionTexture.strength)),void 0!==i.emissiveFactor&&a!==DE&&(o.emissive=(new tA).fromArray(i.emissiveFactor)),void 0!==i.emissiveTexture&&a!==DE&&l.push(t.assignTexture(o,"emissiveMap",i.emissiveTexture)),Promise.all(l).then((function(){let n;return n=a===_3?r[a3.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(o):new a(o),i.name&&(n.name=i.name),n.map&&(n.map.encoding=jM),n.emissiveMap&&(n.emissiveMap.encoding=jM),B3(n,i),t.associations.set(n,{materials:e}),i.extensions&&k3(r,n,i),n}))}createUniqueName(e){const t=Gk.sanitizeNodeName(e||"");let n=t;for(let e=1;this.nodeNamesUsed[n];++e)n=t+"_"+e;return this.nodeNamesUsed[n]=!0,n}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function i(e){return n[a3.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return G3(n,e,t)}))}const a=[];for(let n=0,o=e.length;n<o;n++){const o=e[n],s=N3(o),l=r[s];if(l)a.push(l.promise);else{let e;e=o.extensions&&o.extensions[a3.KHR_DRACO_MESH_COMPRESSION]?i(o):G3(new QE,o,t),r[s]={primitive:o,promise:e},a.push(e)}}return Promise.all(a)}loadMesh(e){const t=this,n=this.json,r=this.extensions,i=n.meshes[e],a=i.primitives,o=[];for(let e=0,t=a.length;e<t;e++){const t=void 0===a[e].material?(void 0===(s=this.cache).DefaultMaterial&&(s.DefaultMaterial=new $D({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:A_})),s.DefaultMaterial):this.getDependency("material",a[e].material);o.push(t)}var s;return o.push(t.loadGeometries(a)),Promise.all(o).then((function(n){const o=n.slice(0,n.length-1),s=n[n.length-1],l=[];for(let n=0,c=s.length;n<c;n++){const c=s[n],u=a[n];let d;const h=o[n];if(4===u.mode||5===u.mode||6===u.mode||void 0===u.mode)d=!0===i.isSkinnedMesh?new qP(c,h):new vC(c,h),!0!==d.isSkinnedMesh||d.geometry.attributes.skinWeight.normalized||d.normalizeSkinWeights(),5===u.mode?d.geometry=V3(d.geometry,HM):6===u.mode&&(d.geometry=V3(d.geometry,GM));else if(1===u.mode)d=new pL(c,h);else if(3===u.mode)d=new dL(c,h);else if(2===u.mode)d=new mL(c,h);else{if(0!==u.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+u.mode);d=new _L(c,h)}Object.keys(d.geometry.morphAttributes).length>0&&F3(d,i),d.name=t.createUniqueName(i.name||"mesh_"+e),B3(d,i),u.extensions&&k3(r,d,u),t.assignFinalMaterial(d),l.push(d)}for(let n=0,r=l.length;n<r;n++)t.associations.set(l[n],{meshes:e,primitives:n});if(1===l.length)return l[0];const c=new lP;t.associations.set(c,{meshes:e});for(let e=0,t=l.length;e<t;e++)c.add(l[e]);return c}))}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new AC(OS.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new ZC(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),B3(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))}loadAnimation(e){const t=this.json.animations[e],n=[],r=[],i=[],a=[],o=[];for(let e=0,s=t.channels.length;e<s;e++){const s=t.channels[e],l=t.samplers[s.sampler],c=s.target,u=void 0!==c.node?c.node:c.id,d=void 0!==t.parameters?t.parameters[l.input]:l.input,h=void 0!==t.parameters?t.parameters[l.output]:l.output;n.push(this.getDependency("node",u)),r.push(this.getDependency("accessor",d)),i.push(this.getDependency("accessor",h)),a.push(l),o.push(c)}return Promise.all([Promise.all(n),Promise.all(r),Promise.all(i),Promise.all(a),Promise.all(o)]).then((function(n){const r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],l=[];for(let e=0,t=r.length;e<t;e++){const t=r[e],n=i[e],c=a[e],u=o[e],d=s[e];if(void 0===t)continue;let h;switch(t.updateMatrix(),t.matrixAutoUpdate=!0,D3[d.path]){case D3.weights:h=bI;break;case D3.rotation:h=_I;break;default:h=MI}const f=t.name?t.name:t.uuid,p=void 0!==u.interpolation?I3[u.interpolation]:IM,m=[];D3[d.path]===D3.weights?t.traverse((function(e){e.morphTargetInfluences&&m.push(e.name?e.name:e.uuid)})):m.push(f);let g=c.array;if(c.normalized){const e=z3(g.constructor),t=new Float32Array(g.length);for(let n=0,r=g.length;n<r;n++)t[n]=g[n]*e;g=t}for(let e=0,t=m.length;e<t;e++){const t=new h(m[e]+"."+D3[d.path],n.array,g,p);"CUBICSPLINE"===u.interpolation&&(t.createInterpolant=function(e){return new(this instanceof _I?E3:S3)(this.times,this.values,this.getValueSize()/3,e)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(t)}}const c=t.name?t.name:"animation_"+e;return new SI(c,void 0,l)}))}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(e){const t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse((function(e){if(e.isMesh)for(let t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]})),t}))}loadNode(e){const t=this.json,n=this.extensions,r=this,i=t.nodes[e],a=i.name?r.createUniqueName(i.name):"";return function(){const t=[],n=r._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return n&&t.push(n),void 0!==i.camera&&t.push(r.getDependency("camera",i.camera).then((function(e){return r._getNodeRef(r.cameraCache,i.camera,e)}))),r._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)}().then((function(t){let o;if(o=!0===i.isBone?new YP:t.length>1?new lP:1===t.length?t[0]:new yE,o!==t[0])for(let e=0,n=t.length;e<n;e++)o.add(t[e]);if(i.name&&(o.userData.name=i.name,o.name=a),B3(o,i),i.extensions&&k3(n,o,i),void 0!==i.matrix){const e=new qA;e.fromArray(i.matrix),o.applyMatrix4(e)}else void 0!==i.translation&&o.position.fromArray(i.translation),void 0!==i.rotation&&o.quaternion.fromArray(i.rotation),void 0!==i.scale&&o.scale.fromArray(i.scale);return r.associations.has(o)||r.associations.set(o,{}),r.associations.get(o).nodes=e,o}))}loadScene(e){const t=this.json,n=this.extensions,r=this.json.scenes[e],i=this,a=new lP;r.name&&(a.name=i.createUniqueName(r.name)),B3(a,r),r.extensions&&k3(n,a,r);const o=r.nodes||[],s=[];for(let e=0,n=o.length;e<n;e++)s.push(H3(o[e],a,t,i));return Promise.all(s).then((function(){return i.associations=(e=>{const t=new Map;for(const[e,n]of i.associations)(e instanceof LE||e instanceof sA)&&t.set(e,n);return e.traverse((e=>{const n=i.associations.get(e);null!=n&&t.set(e,n)})),t})(a),a}))}}function H3(e,t,n,r){const i=n.nodes[e];return r.getDependency("node",e).then((function(e){if(void 0===i.skin)return e;let t;return r.getDependency("skin",i.skin).then((function(e){t=e;const n=[];for(let e=0,i=t.joints.length;e<i;e++)n.push(r.getDependency("node",t.joints[e]));return Promise.all(n)})).then((function(n){return e.traverse((function(e){if(!e.isMesh)return;const r=[],i=[];for(let e=0,a=n.length;e<a;e++){const a=n[e];if(a){r.push(a);const n=new qA;void 0!==t.inverseBindMatrices&&n.fromArray(t.inverseBindMatrices.array,16*e),i.push(n)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[e])}e.bind(new KP(r,i),e.matrixWorld)})),e}))})).then((function(e){t.add(e);const a=[];if(i.children){const t=i.children;for(let i=0,o=t.length;i<o;i++){const o=t[i];a.push(H3(o,e,n,r))}}return Promise.all(a)}))}function G3(e,t,n){const r=t.attributes,i=[];function a(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(const t in r){const n=L3[t]||t.toLowerCase();n in e.attributes||i.push(a(r[t],n))}if(void 0!==t.indices&&!e.index){const r=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));i.push(r)}return B3(e,t),function(e,t,n){const r=t.attributes,i=new bA;if(void 0===r.POSITION)return;{const e=n.json.accessors[r.POSITION],t=e.min,a=e.max;if(void 0===t||void 0===a)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(i.set(new gA(t[0],t[1],t[2]),new gA(a[0],a[1],a[2])),e.normalized){const t=z3(C3[e.componentType]);i.min.multiplyScalar(t),i.max.multiplyScalar(t)}}const a=t.targets;if(void 0!==a){const e=new gA,t=new gA;for(let r=0,i=a.length;r<i;r++){const i=a[r];if(void 0!==i.POSITION){const r=n.json.accessors[i.POSITION],a=r.min,o=r.max;if(void 0!==a&&void 0!==o){if(t.setX(Math.max(Math.abs(a[0]),Math.abs(o[0]))),t.setY(Math.max(Math.abs(a[1]),Math.abs(o[1]))),t.setZ(Math.max(Math.abs(a[2]),Math.abs(o[2]))),r.normalized){const e=z3(C3[r.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(e)}e.boundingBox=i;const o=new OA;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,e.boundingSphere=o}(e,t,n),Promise.all(i).then((function(){return void 0!==t.targets?function(e,t,n){let r=!1,i=!1;for(let e=0,n=t.length;e<n;e++){const n=t[e];if(void 0!==n.POSITION&&(r=!0),void 0!==n.NORMAL&&(i=!0),r&&i)break}if(!r&&!i)return Promise.resolve(e);const a=[],o=[];for(let s=0,l=t.length;s<l;s++){const l=t[s];if(r){const t=void 0!==l.POSITION?n.getDependency("accessor",l.POSITION):e.attributes.position;a.push(t)}if(i){const t=void 0!==l.NORMAL?n.getDependency("accessor",l.NORMAL):e.attributes.normal;o.push(t)}}return Promise.all([Promise.all(a),Promise.all(o)]).then((function(t){const n=t[0],a=t[1];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=a),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}function V3(e,t){let n=e.getIndex();if(null===n){const t=[],r=e.getAttribute("position");if(void 0===r)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<r.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const r=n.count-2,i=[];if(t===GM)for(let e=1;e<=r;e++)i.push(n.getX(0)),i.push(n.getX(e)),i.push(n.getX(e+1));else for(let e=0;e<r;e++)e%2==0?(i.push(n.getX(e)),i.push(n.getX(e+1)),i.push(n.getX(e+2))):(i.push(n.getX(e+2)),i.push(n.getX(e+1)),i.push(n.getX(e)));i.length/3!==r&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const a=e.clone();return a.setIndex(i),a}let j3=null;function W3(e,t,n){return r=>{n&&n(r),e&&(j3||(j3=new e3),j3.setDecoderPath("string"==typeof e?e:"https://www.gstatic.com/draco/versioned/decoders/1.4.3/"),r.setDRACOLoader(j3)),t&&r.setMeshoptDecoder((()=>{if(n3)return n3;const e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if("object"!=typeof WebAssembly)return{supported:!1};let n,r="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB";WebAssembly.validate(e)&&(r="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB");const i=WebAssembly.instantiate(function(e){const n=new Uint8Array(e.length);for(let t=0;t<e.length;++t){const r=e.charCodeAt(t);n[t]=r>96?r-71:r>64?r-65:r>47?r+4:r>46?63:62}let r=0;for(let i=0;i<e.length;++i)n[r++]=n[i]<60?t[n[i]]:64*(n[i]-60)+n[++i];return n.buffer.slice(0,r)}(r),{}).then((e=>{n=e.instance,n.exports.__wasm_call_ctors()}));function a(e,t,r,i,a,o){const s=n.exports.sbrk,l=r+3&-4,c=s(l*i),u=s(a.length),d=new Uint8Array(n.exports.memory.buffer);d.set(a,u);const h=e(c,r,i,u,a.length);if(0===h&&o&&o(c,l,i),t.set(d.subarray(c,c+r*i)),s(c-s(0)),0!==h)throw new Error(`Malformed buffer data: ${h}`)}const o={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},s={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return n3={ready:i,supported:!0,decodeVertexBuffer(e,t,r,i,s){a(n.exports.meshopt_decodeVertexBuffer,e,t,r,i,n.exports[o[s]])},decodeIndexBuffer(e,t,r,i){a(n.exports.meshopt_decodeIndexBuffer,e,t,r,i)},decodeIndexSequence(e,t,r,i){a(n.exports.meshopt_decodeIndexSequence,e,t,r,i)},decodeGltfBuffer(e,t,r,i,l,c){a(n.exports[s[l]],e,t,r,i,n.exports[o[c]])}},n3})())}}function X3(e,t=!0,n=!0,r){return qF(r3,e,W3(t,n,r))}X3.preload=(e,t=!0,n=!0,r)=>qF.preload(r3,e,W3(t,n,r)),X3.clear=e=>qF.clear(r3,e);const q3=function(e){return function(t){e.forEach((function(e){"function"==typeof e?e(t):null!=e&&(e.current=t)}))}};var Y3=i(5697),Z3=i.n(Y3);Z3().func.isRequired,Z3().arrayOf(Z3().oneOfType([Z3().element,Z3().func])).isRequired;const J3=new qA,$3=new qA,K3=[],Q3=new vC;class e5 extends lP{constructor(){super(),this.color=new tA("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var e;return null==(e=this.instance.current)?void 0:e.geometry}raycast(e,t){const n=this.instance.current;if(!n)return;if(!n.geometry||!n.material)return;Q3.geometry=n.geometry;const r=n.matrixWorld;let i=n.userData.instances.indexOf(this.instanceKey);if(!(-1===i||i>n.count)){n.getMatrixAt(i,J3),$3.multiplyMatrices(r,J3),Q3.matrixWorld=$3,Q3.raycast(e,K3);for(let e=0,n=K3.length;e<n;e++){const n=K3[e];n.instanceId=i,n.object=this,t.push(n)}K3.length=0}}}let t5,n5;const r5=t.createContext(null),i5=new qA,a5=new qA,o5=new qA;new tA;const s5=new gA,l5=new mA,c5=new gA,u5=t.forwardRef((({context:e,children:n,...r},i)=>{t.useMemo((()=>PF({Position:e5})),[]);const a=t.useRef(),{subscribe:o,getParent:s}=t.useContext(e||r5);return t.useLayoutEffect((()=>o(a)),[]),t.createElement("position",In({instance:s(),instanceKey:a,ref:q3([i,a])},r),n)})),d5=t.forwardRef((({children:e,range:n,limit:r=1e3,frames:i=1/0,...a},o)=>{const[{context:s,instance:l}]=t.useState((()=>{const e=t.createContext(null);return{context:e,instance:t.forwardRef(((n,r)=>t.createElement(u5,In({context:e},n,{ref:r}))))}})),c=t.useRef(null),[u,d]=t.useState([]),[[h,f]]=t.useState((()=>{const e=new Float32Array(16*r);for(t5=0;t5<r;t5++)o5.identity().toArray(e,16*t5);return[e,new Float32Array([...new Array(3*r)].map((()=>1)))]}));t.useEffect((()=>{c.current.instanceMatrix.needsUpdate=!0}));let p=0,m=0;WF((()=>{if(i===1/0||p<i){for(c.current.updateMatrix(),c.current.updateMatrixWorld(),i5.copy(c.current.matrixWorld).invert(),m=Math.min(r,void 0!==n?n:r,u.length),c.current.count=m,c.current.instanceMatrix.updateRange.count=16*m,c.current.instanceColor.updateRange.count=3*m,t5=0;t5<u.length;t5++)n5=u[t5].current,n5.matrixWorld.decompose(s5,l5,c5),a5.compose(s5,l5,c5).premultiply(i5),a5.toArray(h,16*t5),c.current.instanceMatrix.needsUpdate=!0,n5.color.toArray(f,3*t5),c.current.instanceColor.needsUpdate=!0;p++}}));const g=t.useMemo((()=>({getParent:()=>c,subscribe:e=>(d((t=>[...t,e])),()=>d((t=>t.filter((t=>t.current!==e.current)))))})),[]);return t.createElement("instancedMesh",In({userData:{instances:u},matrixAutoUpdate:!1,ref:q3([o,c]),args:[null,null,0],raycast:()=>null},a),t.createElement("instancedBufferAttribute",{attach:"instanceMatrix",count:h.length/16,array:h,itemSize:16,usage:mS}),t.createElement("instancedBufferAttribute",{attach:"instanceColor",count:f.length/3,array:f,itemSize:3,usage:mS}),"function"==typeof e?t.createElement(s.Provider,{value:g},e(l)):t.createElement(r5.Provider,{value:g},e))})),h5=i.p+"assets/a8ff8cdd5673af8ebb34.glb",f5=function({beam:e,spacePower:n,customer:r}){const i=(0,t.useRef)(),a=(0,t.useRef)(new yE),o=(0,t.useRef)(),s=(0,t.useRef)(),l=(0,t.useRef)();(0,t.useEffect)((()=>{o.current=new sA(function(){const e=document.createElement("canvas"),t=e.getContext("2d");e.width=1,e.height=1;const n=t.createLinearGradient(0,0,e.width,e.height);return n.addColorStop(0,"rgba(  0,  0,  0,0.1)"),n.addColorStop(.4,"rgba(160,160,160,0.3)"),n.addColorStop(.5,"rgba(255,255,255,0.5)"),n.addColorStop(.6,"rgba(160,160,160,0.3)"),n.addColorStop(1,"rgba(  0,  0,  0,0.1)"),t.fillStyle=n,t.fillRect(0,0,e.width,e.height),e}()),o.current.needsUpdate=!0,s.current=new DE({map:o.current,blending:D_,color:4474026,side:C_,depthWrite:!1,transparent:!1}),l.current=((e,t)=>{const n=new zC(1,.01),r=[];for(let e=0;e<4;e++){const i=new vC(n,t);i.translateX(.5),i.rotation.x=e/4*Math.PI,i.rotateX(-Math.PI/2),r.push(i)}return r})(0,s.current),l.current.forEach((e=>a.current.add(e)))}),[]);const c=(0,t.useRef)(qx.getState().frame);return(0,t.useEffect)((()=>{qx.subscribe((e=>{c.current=e.frame}))}),[]),WF((()=>{e.activated[c.current]?(0===i.current.children.length&&(i.current.children=l.current),i.current.position.x=n.positions.x[c.current],i.current.position.y=n.positions.y[c.current],i.current.position.z=n.positions.z[c.current],i.current.lookAt(r.positions.x[c.current],r.positions.y[c.current],r.positions.z[c.current]),i.current.rotateY(-Math.PI/2),i.current.scale.set(e.distances[c.current],1,1)):i.current.children&&(i.current.children=[])})),(0,sj.jsx)("primitive",{object:a.current,position:[0,0,0],ref:i})},p5=new gA,m5=new gA,g5=new gA;function v5(e,t,n){const r=p5.setFromMatrixPosition(e.matrixWorld);r.project(t);const i=n.width/2,a=n.height/2;return[r.x*i+i,-r.y*a+a]}const y5=e=>Math.abs(e)<1e-10?0:e;function b5(e,t,n=""){let r="matrix3d(";for(let n=0;16!==n;n++)r+=y5(t[n]*e.elements[n])+(15!==n?",":")");return n+r}const x5=(_5=[1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1],e=>b5(e,_5));var _5;const w5=t.forwardRef((({children:e,eps:n=.001,style:r,className:i,prepend:a,center:o,fullscreen:s,portal:l,distanceFactor:c,sprite:u=!1,transform:d=!1,occlude:h,onOcclude:f,zIndexRange:p=[16777271,0],calculatePosition:m=v5,as:g="div",wrapperClass:v,pointerEvents:y="auto",...b},x)=>{var _;const w=jF((({gl:e})=>e)),M=jF((({camera:e})=>e)),S=jF((({scene:e})=>e)),A=jF((({size:e})=>e)),E=jF((({raycaster:e})=>e)),[C]=t.useState((()=>document.createElement(g))),T=t.useRef(),R=t.useRef(null),P=t.useRef(0),L=t.useRef([0,0]),D=t.useRef(null),I=t.useRef(null),k=null!==(_=null==l?void 0:l.current)&&void 0!==_?_:w.domElement.parentNode;t.useLayoutEffect((()=>{if(R.current){const e=T.current=Pt.s(C);if(S.updateMatrixWorld(),d)C.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const e=m(R.current,M,A);C.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${e[0]}px,${e[1]}px,0);transform-origin:0 0;`}return k&&(a?k.prepend(C):k.appendChild(C)),()=>{k&&k.removeChild(C),e.unmount()}}}),[k,d]),t.useLayoutEffect((()=>{v&&(C.className=v)}),[v]);const B=t.useMemo((()=>d?{position:"absolute",top:0,left:0,width:A.width,height:A.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:o?"translate3d(-50%,-50%,0)":"none",...s&&{top:-A.height/2,left:-A.width/2,width:A.width,height:A.height},...r}),[r,o,s,A,d]),F=t.useMemo((()=>({position:"absolute",pointerEvents:y})),[y]);t.useLayoutEffect((()=>{var n,a;d?null==(n=T.current)||n.render(t.createElement("div",{ref:D,style:B},t.createElement("div",{ref:I,style:F},t.createElement("div",{ref:x,className:i,style:r,children:e})))):null==(a=T.current)||a.render(t.createElement("div",{ref:x,style:B,className:i,children:e}))}));const N=t.useRef(!0);return WF((()=>{if(R.current){M.updateMatrixWorld(),R.current.updateWorldMatrix(!0,!1);const e=d?L.current:m(R.current,M,A);if(d||Math.abs(P.current-M.zoom)>n||Math.abs(L.current[0]-e[0])>n||Math.abs(L.current[1]-e[1])>n){const t=function(e,t){const n=p5.setFromMatrixPosition(e.matrixWorld),r=m5.setFromMatrixPosition(t.matrixWorld),i=n.sub(r),a=t.getWorldDirection(g5);return i.angleTo(a)>Math.PI/2}(R.current,M);let n=!1;"boolean"==typeof h?!0===h&&(n=[S]):Array.isArray(h)&&(n=h.map((e=>e.current)));const r=N.current;if(n){const e=function(e,t,n,r){const i=p5.setFromMatrixPosition(e.matrixWorld),a=i.clone();a.project(t),n.setFromCamera(a,t);const o=n.intersectObjects(r,!0);if(o.length){const e=o[0].distance;return i.distanceTo(n.ray.origin)<e}return!0}(R.current,M,E,n);N.current=e&&!t}else N.current=!t;if(r!==N.current&&(f?f(!N.current):C.style.display=N.current?"block":"none"),C.style.zIndex=`${function(e,t,n){if(t instanceof AC||t instanceof ZC){const r=p5.setFromMatrixPosition(e.matrixWorld),i=m5.setFromMatrixPosition(t.matrixWorld),a=r.distanceTo(i),o=(n[1]-n[0])/(t.far-t.near),s=n[1]-o*t.far;return Math.round(o*a+s)}}(R.current,M,p)}`,d){const[e,t]=[A.width/2,A.height/2],n=M.projectionMatrix.elements[5]*t,{isOrthographicCamera:r,top:i,left:a,bottom:o,right:s}=M,l=x5(M.matrixWorldInverse),d=r?`scale(${n})translate(${y5(-(s+a)/2)}px,${y5((i+o)/2)}px)`:`translateZ(${n}px)`;let h=R.current.matrixWorld;u&&(h=M.matrixWorldInverse.clone().transpose().copyPosition(h).scale(R.current.scale),h.elements[3]=h.elements[7]=h.elements[11]=0,h.elements[15]=1),C.style.width=A.width+"px",C.style.height=A.height+"px",C.style.perspective=r?"":`${n}px`,D.current&&I.current&&(D.current.style.transform=`${d}${l}translate(${e}px,${t}px)`,I.current.style.transform=((e,t)=>b5(e,(e=>[1/e,1/e,1/e,1,-1/e,-1/e,-1/e,-1,1/e,1/e,1/e,1,1,1,1,1])(t),"translate(-50%,-50%)"))(h,1/((c||10)/400)))}else{const t=void 0===c?1:function(e,t){if(t instanceof ZC)return t.zoom;if(t instanceof AC){const n=p5.setFromMatrixPosition(e.matrixWorld),r=m5.setFromMatrixPosition(t.matrixWorld),i=t.fov*Math.PI/180,a=n.distanceTo(r);return 1/(2*Math.tan(i/2)*a)}return 1}(R.current,M)*c;C.style.transform=`translate3d(${e[0]}px,${e[1]}px,0) scale(${t})`}L.current=e,P.current=M.zoom}}})),t.createElement("group",In({},b,{ref:R}))})),M5=new gA(0,0,0),S5=function({satellite:e}){const{storeRef:n,toggleLabel:r,satelliteOptions:i}=Yx((t=>({storeRef:t.storeRef,toggleLabel:t.toggleLabel,satelliteOptions:t.satelliteOptions.get(e.id)})),Zy),a=(0,t.useRef)(),o=(0,t.useCallback)((t=>{null!==t&&(n(e.id,t),a.current=t)}),[]),s=(0,t.useRef)(qx.getState().frame);return(0,t.useEffect)((()=>{qx.subscribe((e=>{s.current=e.frame}))}),[]),WF((({clock:t},n)=>{a.current.position.x=e.positions.x[s.current],a.current.position.y=e.positions.y[s.current],a.current.position.z=e.positions.z[s.current],M5.clone().sub(a.current.position),a.current.lookAt(M5)})),(0,sj.jsx)(u5,{ref:o,scale:.01,color:i.color||"red",up:[0,0,1],children:i.showLabel?(0,sj.jsx)(w5,{style:{fontFamily:"sans-serif",color:"white",fontSize:"1rem",width:"100ch",height:"2rem"},children:(0,sj.jsx)("p",{children:e.name})}):""})},A5=function(){const e=X3(h5);(0,t.useLayoutEffect)((()=>{e.nodes.Satellite.geometry.rotateY(3*Math.PI/2)}),[e]);const{customers:n,spacePowers:r,beams:i}=Yx((e=>({customers:e.mission.satellites.customers,spacePowers:e.mission.satellites.spacePowers,beams:e.mission.beams})),Zy),a=qF(OI,X2);return(0,sj.jsxs)(sj.Fragment,{children:[(0,sj.jsxs)(d5,{geometry:e.nodes.Satellite.geometry,children:[(0,sj.jsx)("meshToonMaterial",{gradientMap:a}),r.map((e=>(0,sj.jsx)(S5,{satellite:e},e.id))),n.map((e=>(0,sj.jsx)(S5,{satellite:e},e.id)))]}),i.map((e=>(0,sj.jsx)(f5,{beam:e,customer:n.find((t=>t.id===e.customerId)),spacePower:r.find((t=>t.id===e.spacePowerId))},e.id)))]})},E5=function(){const e=(0,t.useRef)(),n=(0,t.useRef)(),r=Yx((e=>e.isPaused)),[i,a]=(0,t.useState)(1);return(0,sj.jsx)(dy,{area:"1 / 1 / 4 / 3",children:(0,sj.jsxs)("div",{ref:n,style:{width:"100%",height:"100%",position:"relative"},children:[(0,sj.jsx)("div",{ref:e,style:{width:"100%",height:"100%",display:"inline-block",zIndex:0}}),(0,sj.jsx)(y2,{className:"canvas",onCreated:e=>{console.log("created"),e.events.connect(n.current)},mode:"concurrent",style:{pointerEvents:"none",position:"fixed",top:"0px",left:"0px"},dpr:i,children:(0,sj.jsx)(_2,{track:e,children:(0,sj.jsxs)(t.Suspense,{children:[(0,sj.jsx)(M2,{onChange:({factor:e})=>a((.5+1.5*e).toFixed(1))}),(0,sj.jsx)(K2,{}),(0,sj.jsx)(C2,{}),(0,sj.jsx)(E2,{radius:100,depth:50,count:5e3,factor:4,saturation:1,fade:!0,speed:r?0:1}),(0,sj.jsx)(Y2,{}),(0,sj.jsx)(q2,{}),(0,sj.jsx)(A5,{})]})})})]})})},C5=function(){const{view:e,setView:n,initializeMission:r,mission:i}=Yx((e=>({view:e.view,setView:e.setView,initializeMission:e.initializeMission,mission:e.mission})),Zy),[a,o]=(0,t.useState)(!1);return console.log(i),(0,t.useEffect)((()=>{a&&r(Kq)}),[a]),(0,t.useEffect)((()=>{o(!0)}),[]),(0,sj.jsx)(ny,{theme:l2,children:(0,sj.jsxs)(cy,{minHeight:"100vh",width:"100%",templateRows:e.templateRows,templateColumns:e.templateColumns,templateAreas:e.templateAreas,children:[(0,sj.jsx)(dy,{area:e.headerArea,display:"simulation"===e.name?"":"none",zIndex:99,children:(0,sj.jsxs)(cy,{h:"100%",templateColumns:"1fr 1fr 1fr",templateRows:"1fr 2fr",templateAreas:'". . ."\n               "views title controls"',children:[(0,sj.jsx)(c2,{}),(0,sj.jsx)(dy,{area:"title",children:(0,sj.jsx)(oy,{children:(0,sj.jsx)("h1",{children:"Space Power Simulator (beta)"})})}),(0,sj.jsx)(dy,{area:"controls",children:i?(0,sj.jsx)(Zq,{times:i.time,satellites:i.satellites}):""})]})}),(0,sj.jsx)(dy,{position:"relative",area:e.simulationArea,children:(0,sj.jsxs)(cy,{h:"100%",templateColumns:"1fr 0.125fr",templateRows:"2fr 0.5fr 0.125fr",children:[i?(0,sj.jsxs)(sj.Fragment,{children:[(0,sj.jsx)(E5,{}),(0,sj.jsx)(o2,{shouldDisplay:"simulation"===e.name})]}):(0,sj.jsx)(Dc,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}),"mission"===e.name||"performance"===e.name?(0,sj.jsx)(dy,{area:"3 / 2 / 4 / 3",children:(0,sj.jsx)(Cy,{value:"simulation",onClick:n,children:"Return"})}):""]})}),(0,sj.jsx)(K1,{shouldDisplay:"mission"===e.name}),i?(0,sj.jsx)(nW,{}):"",(0,sj.jsx)(dy,{area:e.footerArea,children:"Footer"})]})})};(0,Pt.s)(document.getElementById("root")).render((0,sj.jsxs)(sj.Fragment,{children:[(0,sj.jsx)(Rt,{initialColorMode:l2.config.initialColorMode}),(0,sj.jsx)(C5,{})]}))})()})();
//# sourceMappingURL=bundle.js.map