(()=>{"use strict";var e,t,n={12618:(e,t,n)=>{n.d(t,{F4:()=>d,oW:()=>m});var r=n(63310),o=n(42003),i=n(31575),a=n(80949),s=n(55287),c=n(434);(0,r.e)({});const u=o.Ry().shape({name:o.Z_().min(2,"Too Short!").max(50,"Too Long!").trim(),color:o.Z_().trim().matches(/^#([0-9a-f]{3}|[0-9a-f]{6})$/i),orbit:o.Ry().shape({tle:o.Z_(),list:o.Z_(),meanMotionDot:o.Rx().min(-1,"Must be more than -1").max(1,"Must be less than 1").required("meanMotionDot is required"),bstar:o.Rx().min(-2,"Must be between -2 and 2").max(2,"Must be between -2 and 2").required("bstar is required"),inclination:o.Rx().min(0,"Must be 0-360°").max(360,"Must be 0-360°").required("inclination is required"),rightAscension:o.Rx().min(0,"Must be 0-360°").max(360,"Must be 0-360°").required("right ascension is required"),eccentricity:o.Rx().min(0,"Must be between 0 and 1").max(1,"Must be between 0 and 1").required("eccentricity is required"),perigee:o.Rx().min(0,"Must be 0-360°").max(360,"Must be 0-360°").required("perigee is required"),meanAnomaly:o.Rx().min(0,"Must be 0-360°").max(360,"Must be 0-360°").required("mean anomaly is required"),meanMotion:o.Rx().min(0,"Must be greater than 0").max(16,"Must be less than 16").required("mean motion is required")}),power:o.Ry().shape({pv:o.Ry().shape({voltage:o.Rx().min(0,"Must be positive").required("pv voltage is required"),currentDensity:o.Rx().min(0,"Must be positive").required("pv current density is required"),area:o.Rx().min(0,"Must be greater than 0").required("pv area is required"),powerStoringConsumption:o.Rx().min(0,"Must be greater than 0").required("Power storing consumption is required"),preset:o.Z_().oneOf(["small","medium","large","custom"])}),battery:o.Ry().shape({voltage:o.Rx().min(0,"Must be positive").required("battery voltage is required"),capacity:o.Rx().min(0,"Must be greater than 0").required("battery capacity is required"),preset:o.Z_().oneOf(["small","medium","large","custom"])})}),duties:o.IX().of(o.Ry().shape({type:o.Z_().oneOf(["cyclical"]).required("Type is required"),name:o.Z_().min(2,"Too Short!").max(30,"Too Long!").required("required!"),priority:o.Rx().integer().min(1).required("Priority is required"),consumption:o.Rx().min(0,"Must be positive").required("Consumption is required"),duration:o.Rx().min(0,"Must be positive").when("type",{is:"cyclical",then:o.Rx().required("Duration is required")}),cycles:o.Rx().min(0,"Must be positive").when("type",{is:"cyclical",then:o.Rx().required("Cycles is required")})}))}),l=(o.Ry().shape({constellations:o.IX().of(o.Ry().shape({name:o.Z_().min(2,"Too Short!").max(50,"Too Long!").trim(),list:o.Z_(),payload:u,satelliteCount:o.Rx().min(0).required("Satellite count is required"),satellites:o.IX().of(u),spacePowersCount:o.Rx().integer().min(0,"Must be an integer greater than or equal to 0"),spacePowerIndices:o.IX().of(o.Rx().min(0)),offsets:o.Ry().shape({inclination:o.Rx().min(0,"Must be 0-36°").max(36,"Must be 0-36°").required("inclination is required"),rightAscension:o.Rx().min(0,"Must be 0-36°").max(36,"Must be 0-36°").required("right ascension is required"),eccentricity:o.Rx().min(0,"Must be between 0 and 1").max(1,"Must be between 0 and 1").required("eccentricity is required"),perigee:o.Rx().min(0,"Must be 0-36°").max(36,"Must be 0-36°").required("perigee is required"),meanAnomaly:o.Rx().min(0,"Must be 0-360°").max(360,"Must be 0-360°").required("mean anomaly is required"),meanMotion:o.Rx().min(0,"Must be greater than 0").max(16,"Must be less than 16").required("mean motion is required")})}))}),(e,t,n)=>{const r=(0,i.nf)({...e.orbit,epoch:new Date(e.orbit.epoch)}),o=(0,i.YX)(r.tle1,r.tle2),a=(0,c.TJ)(o.epochdate,t,n);return[a,(0,c.im)(a),(0,c.U8)(a)]}),p=(e,t,n)=>{const r=[];return e.forEach((e=>{e.satellites.forEach((t=>{r.push((0,s.s4)(t,e.id))}))})),r.forEach((e=>{e.positions=(0,c.VG)(e.params,t),e.performance={currentDuties:(0,c.qL)(e.params.load.duties,t),isEclipsed:(0,c.HE)(e,n,t)}})),r},m=e=>{const t=[];return e.forEach((e=>{let n;n=e.spacePowerIndices?e.spacePowerIndices:(0,s.X_)(e.spacePowersCount,e.satellites.length);const r=(0,s.mA)(e.satellites.length,n),o=(0,s.rl)(e.offsets,r);e.satellites.forEach(((n,r)=>{if(o[r])return o[r].forEach((o=>{t.push((0,s.Iq)(`Space Power ${r+1}`,n.orbit,o,e))}))}))})),t},d=(e,t=a.FT,n=a.yX)=>{const[r,o,i]=l(e.constellations[0].satellites[0],t,n);return{time:r,constellations:(s=e.constellations,s.map((e=>({...e,satellites:e.satellites.map((e=>e.id))})))),satellites:{customers:p(e.constellations,r,o)},sun:o,earth:i};var s}},49781:(e,t,n)=>{n.d(t,{Z:()=>u});var r=n(63310),o=n(44612),i=n(17932),a=n(80949),s=n(12618);(0,r.e)({});const c=()=>[16*Math.random(),16*Math.random(),16*Math.random(),16*Math.random(),1*Math.random(),.1*Math.random()],u=async function*(e){const t=e.constellations[0],r=t.optimization.generations,u=t.optimization.population,l=(0,s.F4)(e,a.FT,a.yX/120),p=(0,i.Kg)((async()=>{const e=await(0,i.Cs)(new i.Cc(new URL(n.p+n.u(582),n.b)));return e.initialize(l),e}),t.optimization.threads),m=e=>{const n={inclination:e[0],rightAscension:e[1],perigee:e[2],meanAnomaly:e[3],meanMotion:e[4],eccentricity:e[5]};try{(0,s.oW)([{...t,offsets:n,spacePowerIndices:e.slice(6)}])}catch(e){throw new Error("Orbital propagation failed")}},d=async()=>{let e=c(),n=!1;for(;!n;)try{m(e),n=!0}catch(t){e=c()}const r=Array.from({length:t.spacePowersCount},(()=>Math.floor(Math.random()*t.satellites.length)));return e.push(...r),e},h=e=>{const n=2*(Math.random()-.5)*3,r=2*(Math.random()-.5)*.1,o=Math.floor((Math.random()-.5)*t.satellites.length),i=Math.floor(Math.random()*e.length);let a;const s=[...e];return i<5?(a=s[i]+n,a>360||a<0?s[i]-=n:s[i]=a):5===i?(a=s[i]+r,a>1||a<0?s[i]-=r:s[i]=a):i>5&&(a=s[i]+o,a>=t.satellites.length||a<0?s[i]-=o:s[i]=a),s},b=[];for(let e=0;e<u;e++)b.push(d());const y=async function*(e,t,n){let r,o=0;await e.seed();for(let n=0;n<=t;n++){console.count("gen"),await e.estimate();const t=e.best()[0];r=e.best(),o+=1,yield{best:r,generations:o},console.log(`${t.entity} - ${t.fitness}`),await e.breed()}return{best:r,generations:o}}(new o.Genetic({mutationFunction:async e=>{let t=h([...e]),n=!1;for(;!n;)try{m(t),n=!0}catch(n){t=h([...e])}return t},fitnessFunction:async e=>{const n={inclination:e[0],rightAscension:e[1],perigee:e[2],meanAnomaly:e[3],meanMotion:e[4],eccentricity:e[5]},r=e.slice(6),o={constellations:[{...t,offsets:n,spacePowerIndices:r}]},i=p.queue((e=>e.calculate(o)));return{fitness:await i}},randomFunction:d,populationSize:u,fittestNSurvives:1,select1:o.Select.Fittest,select2:o.Select.Tournament3,mutateProbablity:1,deduplicate:()=>!0}),r);let g,f=!1;for(;!f&&(g=await y.next(),f=g.done,!f);)yield g;console.log(g);const x=g.value.best[0].entity;return{done:!0,value:{...g.value,offsets:{inclination:x[0],rightAscension:x[1],perigee:x[2],meanAnomaly:x[3],meanMotion:x[4],eccentricity:x[5]},indices:x.slice(6)}}}},55287:(e,t,n)=>{n.d(t,{Iq:()=>p,X_:()=>m,mA:()=>d,rl:()=>h,s4:()=>l});var r=n(63310),o=n(72045),i=n(31575),a=n(80949);(0,r.e)({});const s={sunOnly:{name:"sun",efficiency:1},beamOnly:{name:"beam",efficiency:1},sunAndBeam:{name:"sun and beam",efficiency:1.5},eclipsed:{name:"eclipsed",efficiency:0}},c={power:{pv:{voltage:4.7,currentDensity:170.5,area:.0128,powerStoringConsumption:1.2},battery:{voltage:3.6,capacity:1.125}},duties:[{name:"beaming",duration:null,cycles:null,consumption:3.2,type:"space power"}]};function u(e,t,n){const r=Number(e.cycles),o=1e3*Number(e.duration),i=(t-o*r)/r,s=Math.floor(a.FT/t*r);return Array.from({length:s},((e,t)=>{const r=n.valueOf()+i*(t+1)+o*t;return{start:r,end:r+o}}))}function l(e,t,n=!0){const r=(0,i.nf)({...e.orbit,epoch:new Date(e.orbit.epoch)}),o=(0,i.YX)(r.tle1,r.tle2);try{(0,i.ku)({orbit:o},new Date)}catch(t){const r=`Unable to propagate orbital parameters for ${e.orbit.tle}. ${n?"\nPlease try different values or choose a TLE.":"\nPlease try different offsets in the power configuration menu."}`;throw new Error(r)}o.period=2*Math.PI*60*1e3/o.no;const a={sources:s,voltage:e.power.pv.voltage,currentDensity:e.power.pv.currentDensity,area:e.power.pv.area},c={voltage:e.power.battery.voltage,capacity:e.power.battery.capacity},l=e.duties.map((e=>({name:e.name,type:e.type,priority:e.priority,consumption:Number(e.consumption),duration:1e3*Number(e.duration)||null,cycles:Number(e.cycles)||null,intervals:"cyclical"===e.type?u(e,o.period,o.epochdate):null})));l.unshift({name:"Power storing",type:"power storing",consumption:e.power.pv.powerStoringConsumption});const p=function(e,t,n){const{area:r,voltage:o,currentDensity:i}=e,a=[];return Object.entries(e.sources).forEach((e=>{const s=i*e[1].efficiency*r*o,c=[];t.forEach((e=>{const t=(s-e.consumption)/n.voltage;c.push(t)})),a[e[1].name]=c})),a}(a,l,c);return{name:e.name,color:e.color,constellation:t,id:e.id,params:{orbit:o,battery:c,pv:a,load:{powerProfiles:p,duties:l}},isCustomer:n}}function p(e,t,n,r){const i={...t};return Object.entries(n).forEach((e=>{i[e[0]]=t[e[0]]+Number(e[1])})),l({...c,name:e,color:r.spacePowerColor,id:(0,o.Z)(),orbit:i},r.id,!1)}function m(e,t){const n=t/e;return Array.from({length:e},((e,t)=>Math.floor(n*t)))}function d(e,t){return Array.from({length:e},((e,n)=>t.filter((e=>Number(e)===n)).length))}function h(e,t){return t.map((t=>{if(0===t)return null;if(1===t)return[e];if(t>1){let n=0;return Array.from({length:t},((t,r)=>{r%2==0&&(n+=1);const o={};return Object.entries(e).forEach((e=>{o[e[0]]=e[1]*n*(-1)**r})),o}))}}))}},434:(e,t,n)=>{n.d(t,{HE:()=>l,TJ:()=>a,U8:()=>u,VG:()=>s,im:()=>c,qL:()=>p});var r=n(63310),o=(n(76150),n(31575)),i=n(40549);function a(e,t,n){const r=e.getTime(),o=t/n;return Array.from({length:n},((e,t)=>r+t*o))}function s(e,t){const n=[],r=[],i=[];return t.forEach((t=>{const a=(0,o.ku)(e,new Date(t));n.push(a.x),r.push(a.y),i.push(a.z)})),{x:n,y:r,z:i}}function c(e){const t=[],n=[],r=[];return e.forEach((e=>{const i=(0,o.F4)(new Date(e));t.push(i.x),n.push(i.y),r.push(i.z)})),{x:t,y:n,z:r}}function u(e){return e.map((e=>(0,o.E1)(e)))}function l(e,t,n){return n.map(((n,r)=>{const o={x:e.positions.x[r],y:e.positions.y[r],z:e.positions.z[r]},a={x:t.x[r],y:t.y[r],z:t.z[r]};return(0,i.Wb)(o,a)}))}function p(e,t){return t.map((t=>{let n=0;return e.forEach(((r,o)=>{"power storing"!==r.type&&r.intervals.forEach((i=>{t>=i.start&&t<=i.end&&(0===n||r.priority<e[n].priority)&&(n=o)}))})),n}))}n(80949),(0,r.e)({})},52554:(e,t,n)=>{var r=n(63310),o=n(2263),i=n(79103),a=n(49781);(0,r.e)({}),(0,i.Jj)({optimize(e){const t=(0,a.Z)(e);return new o.y((async e=>{let n={done:!1,value:null};for(;!n.done;)n=await t.next(),console.log(n),e.next(n.value);e.complete()}))}})},31575:(e,t,n)=>{n.d(t,{E1:()=>m,F4:()=>p,YX:()=>u,ku:()=>l,nf:()=>c});var r=n(63310),o=n(76150),i=n(95793),a=n(75931),s=n(72946);function c(e){const{epoch:t,meanMotionDot:n,bstar:r,inclination:o,rightAscension:i,eccentricity:a,perigee:s,meanAnomaly:c,meanMotion:u}=e;let l=String(t.getYear());l>100&&(l=l.substring(1));let p=(m=t,(Date.UTC(m.getFullYear(),m.getMonth(),m.getDate())-Date.UTC(m.getFullYear(),0,0))/24/60/60/1e3);var m;p<100&&(p=`0${p}`);const d=String((t.getHours()/24+t.getMinutes()/1440+t.getSeconds()/86400).toFixed(8)).substring(1);let h=String(Number(n).toFixed(8)).substring(1);n<0&&(h=`-${h.substring(1)}`),n>=0&&(h=` ${h}`);let b=String(Number(r).toExponential(5)).split(".").join("").substring(0,6);r>=0&&(b=` ${b.substring(0,5)}`);let y=0;y=0!==Number(r)?Math.ceil(Math.log10(Math.abs(r))):"+0";const g=`1 00000C 00000A   ${l}${p}${d} ${h}  00000-0 ${b}${y} 0  0000`,f=String(Number(o).toFixed(4)),x=String(Number(i).toFixed(4)),M=String(Number(a).toFixed(8)).substring(2,9);let w=String(Number(s).toFixed(4));s<100&&(w=` ${w}`);const v=String(Number(c).toFixed(4)),q=String(Number(u).toPrecision(9));return{tle1:g,tle2:`2 00000 ${f.padStart(8)} ${x.padStart(8)} ${M} ${w.padStart(8)} ${v} ${q.padStart(13)}    00`}}function u(e,t){const n=1440/(2*o.pi);let r=0;const s={error:0};s.satnum=e.substring(2,7),s.epochyr=parseInt(e.substring(18,20),10),s.epochdays=parseFloat(e.substring(20,32)),s.ndot=parseFloat(e.substring(33,43)),s.nddot=parseFloat(`.${parseInt(e.substring(44,50),10)}E${e.substring(50,52)}`),s.bstar=parseFloat(`${e.substring(53,54)}.${parseInt(e.substring(54,59),10)}E${e.substring(59,61)}`),s.inclo=parseFloat(t.substring(8,16)),s.nodeo=parseFloat(t.substring(17,25)),s.ecco=parseFloat(`.${t.substring(26,33)}`),s.argpo=parseFloat(t.substring(34,42)),s.mo=parseFloat(t.substring(43,51)),s.no=parseFloat(t.substring(52,63)),s.notle=s.no,s.no/=n,s.a=(s.no*o.tumin)**(-2/3),s.ndottle=s.ndot,s.ndot/=1440*n,s.nddot/=1440*n*1440,s.inclotle=s.inclo,s.inclo*=o.deg2rad,s.nodeotle=s.nodeo,s.nodeo*=o.deg2rad,s.argpotle=s.argpo,s.argpo*=o.deg2rad,s.motle=s.mo,s.mo*=o.deg2rad,s.alta=s.a*(1+s.ecco)-1,s.altp=s.a*(1-s.ecco)-1,r=s.epochyr<57?s.epochyr+2e3:s.epochyr+1900;const c=(0,i.days2mdhms)(r,s.epochdays),{mon:u,day:l,hr:p,minute:m,sec:d}=c;return s.jdsatepoch=(0,i.jday)(r,u,l,p,m,d),s.epochdate=new Date(r,u,l,p,m,d),s.epochdatetimelocal=new Date(s.epochdate.getTime()-6e4*s.epochdate.getTimezoneOffset()).toISOString().substring(0,19),(0,a.Z)(s,{opsmode:"i",satn:s.satnum,epoch:s.jdsatepoch-2433281.5,xbstar:s.bstar,xecco:s.ecco,xargpo:s.argpo,xinclo:s.inclo,xmo:s.mo,xno:s.no,xnodeo:s.nodeo}),s}function l(e,t){const n=function(e,t){return{x:(n=s.a0(e.orbit,t).position).x/o.earthRadius,y:n.z/o.earthRadius,z:-n.y/o.earthRadius};var n}(e,t);return{x:n.x,y:n.y,z:n.z}}function p(e){const t=e.getTime()/864e5+2440587-2451545;let n=4.89495042+.0172027923937*t;n>2*Math.PI&&(n-=2*Math.PI);let r=6.240040768+.0172019703436*t;r>2*Math.PI&&(r-=2*Math.PI);const i=n+.033423055*Math.sin(r)+.0003490659*Math.sin(r),a=1.00014-.01671*Math.cos(r)-14e-5*Math.cos(2*r)*(149597870.7/o.earthRadius),s=.40907027-6.981317008e-9*t,c=a*Math.sin(s)*Math.sin(i);return{x:a*Math.cos(i),y:c,z:-a*Math.cos(s)*Math.sin(i)}}function m(e){const t=e/864e5+2440587-2451545;return 2*Math.PI*(.779057273264+1.002737811911355*t)}(0,r.e)({})},80949:(e,t,n)=>{n.d(t,{FT:()=>r,yX:()=>o}),(0,n(63310).e)({});const r=1728e5,o=r*(.12/600)},40549:(e,t,n)=>{n.d(t,{Wb:()=>p});var r=n(63310),o=n(76150),i=n(99477);(0,r.e)({});const a=new i.Vector3(0,0,0),s=new i.Vector3,c=new i.Vector3,u=new i.Vector3,l=new i.Vector3;function p(e,t){s.fromArray([t.x,t.y,t.z]),c.fromArray([e.x,e.y,e.z]),u.subVectors(a,s),l.subVectors(c,a);const n=u.angleTo(l),r=s.distanceTo(a),i=s.distanceTo(c);return!(n>Math.atan2(o.earthRadius,r)||i<r)}}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var i=r[e]={id:e,loaded:!1,exports:{}};return n[e].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}o.m=n,o.x=()=>{var e=o.O(void 0,[546,869,752,105],(()=>o(52554)));return o.O(e)},e=[],o.O=(t,n,r,i)=>{if(!n){var a=1/0;for(l=0;l<e.length;l++){for(var[n,r,i]=e[l],s=!0,c=0;c<n.length;c++)(!1&i||a>=i)&&Object.keys(o.O).every((e=>o.O[e](n[c])))?n.splice(c--,1):(s=!1,i<a&&(a=i));if(s){e.splice(l--,1);var u=r();void 0!==u&&(t=u)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[n,r,i]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((t,n)=>(o.f[n](e,t),t)),[])),o.u=e=>e+".bundle.js",o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),o.p="/",(()=>{o.b=self.location+"";var e={554:1};o.f.i=(t,n)=>{e[t]||importScripts(o.p+o.u(t))};var t=self.webpackChunk=self.webpackChunk||[],n=t.push.bind(t);t.push=t=>{var[r,i,a]=t;for(var s in i)o.o(i,s)&&(o.m[s]=i[s]);for(a&&a(o);r.length;)e[r.pop()]=1;n(t)}})(),t=o.x,o.x=()=>Promise.all([546,869,752,105].map(o.e,o)).then(t),o.x()})();
//# sourceMappingURL=554.bundle.js.map