"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[121],{55287:(e,t,n)=>{n.d(t,{Iq:()=>l,X_:()=>m,mA:()=>d,rl:()=>f,s4:()=>p});var r=n(63310),o=n(72045),a=n(31575),s=n(80949);(0,r.e)({});const i={sunOnly:{name:"sun",efficiency:1},beamOnly:{name:"beam",efficiency:1},sunAndBeam:{name:"sun and beam",efficiency:1.5},eclipsed:{name:"eclipsed",efficiency:0}},c={power:{pv:{voltage:4.7,currentDensity:170.5,area:.0128,powerStoringConsumption:1.2},battery:{voltage:3.6,capacity:1.125}},duties:[{name:"beaming",duration:null,cycles:null,consumption:3.2,type:"space power"}]};function u(e,t,n){const r=Number(e.cycles),o=1e3*Number(e.duration),a=(t-o*r)/r,i=Math.floor(s.FT/t*r);return Array.from({length:i},((e,t)=>{const r=n.valueOf()+a*(t+1)+o*t;return{start:r,end:r+o}}))}function p(e,t,n=!0){const r=(0,a.nf)({...e.orbit,epoch:new Date(e.orbit.epoch)}),o=(0,a.YX)(r.tle1,r.tle2);try{(0,a.ku)({orbit:o},new Date)}catch(t){const r=`Unable to propagate orbital parameters for ${e.orbit.tle}. ${n?"\nPlease try different values or choose a TLE.":"\nPlease try different offsets in the power configuration menu."}`;throw new Error(r)}o.period=2*Math.PI*60*1e3/o.no;const s={sources:i,voltage:e.power.pv.voltage,currentDensity:e.power.pv.currentDensity,area:e.power.pv.area},c={voltage:e.power.battery.voltage,capacity:e.power.battery.capacity},p=e.duties.map((e=>({name:e.name,type:e.type,priority:e.priority,consumption:Number(e.consumption),duration:1e3*Number(e.duration)||null,cycles:Number(e.cycles)||null,intervals:"cyclical"===e.type?u(e,o.period,o.epochdate):null})));p.unshift({name:"Power storing",type:"power storing",consumption:e.power.pv.powerStoringConsumption});const l=function(e,t,n){const{area:r,voltage:o,currentDensity:a}=e,s=[];return Object.entries(e.sources).forEach((e=>{const i=a*e[1].efficiency*r*o,c=[];t.forEach((e=>{const t=(i-e.consumption)/n.voltage;c.push(t)})),s[e[1].name]=c})),s}(s,p,c);return{name:e.name,color:e.color,constellation:t,id:e.id,params:{orbit:o,battery:c,pv:s,load:{powerProfiles:l,duties:p}},isCustomer:n}}function l(e,t,n,r){const a={...t};return Object.entries(n).forEach((e=>{a[e[0]]=t[e[0]]+Number(e[1])})),p({...c,name:e,color:"#28d659",id:(0,o.Z)(),orbit:a},r,!1)}function m(e,t){const n=t/e;return Array.from({length:e},((e,t)=>Math.floor(n*t)))}function d(e,t){return Array.from({length:e},((e,n)=>t.filter((e=>e===n)).length))}function f(e,t){return t.map((t=>{if(0===t)return null;if(1===t)return[e];if(t>1){let n=0;return Array.from({length:t},((t,r)=>{r%2==0&&(n+=1);const o={};return Object.entries(e).forEach((e=>{o[e[0]]=e[1]*n*(-1)**r})),o}))}}))}},434:(e,t,n)=>{n.d(t,{HE:()=>d,Kg:()=>y,O0:()=>h,TJ:()=>u,U8:()=>m,VG:()=>p,e6:()=>b,im:()=>l,mV:()=>w,qL:()=>f,rR:()=>x,x2:()=>g});var r=n(63310),o=n(72045),a=n(76150),s=n(31575),i=n(40549),c=n(80949);function u(e,t,n){const r=e.getTime(),o=t/n;return Array.from({length:n},((e,t)=>r+t*o))}function p(e,t){const n=[],r=[],o=[];return t.forEach((t=>{const a=(0,s.ku)(e,new Date(t));n.push(a.x),r.push(a.y),o.push(a.z)})),{x:n,y:r,z:o}}function l(e){const t=[],n=[],r=[];return e.forEach((e=>{const o=(0,s.F4)(new Date(e));t.push(o.x),n.push(o.y),r.push(o.z)})),{x:t,y:n,z:r}}function m(e){return e.map((e=>(0,s.E1)(e)))}function d(e,t,n){return n.map(((n,r)=>{const o={x:e.positions.x[r],y:e.positions.y[r],z:e.positions.z[r]},a={x:t.x[r],y:t.y[r],z:t.z[r]};return(0,i.Wb)(o,a)}))}function f(e,t){return t.map((t=>{let n=0;return e.forEach(((r,o)=>{"power storing"!==r.type&&r.intervals.forEach((a=>{t>=a.start&&t<=a.end&&(0===n||r.priority<e[n].priority)&&(n=o)}))})),n}))}function g(e,t,n){return t.map((t=>{const r=`${e.name} - ${t.name}`,i=n.map(((n,r)=>{const o={x:e.positions.x[r],y:e.positions.y[r],z:e.positions.z[r]},a={x:t.positions.x[r],y:t.positions.y[r],z:t.positions.z[r]};return(0,s.Sp)(o,a)})),u=i.map((e=>e*a.earthRadius<c.R1));return{name:r,distances:i,activated:u,customerId:t.id,spacePowerId:e.id,id:(0,o.Z)()}}))}function h(e,t){return t.map(((t,n)=>e.reduce(((e,t)=>t.activated[n]||e),!1)?1:0))}function b(e,t,n){return n.map(((n,r)=>function(e,t,n){let r;r=!!t&&t.filter((t=>t.customerId===e.id)).reduce(((e,t)=>t.activated[n]||e),!1);const o=!e.performance.isEclipsed[n];return!o&&r?"beam":o&&r?"sun and beam":o||r?o&&!r?"sun":void 0:"eclipsed"}(e,t,r)))}function y(e,t,n=!0){const r=c.FT/36e5/t.length;let o=1;return t.map(((t,a)=>{let s=e.performance.sources[a];return!1===n&&("sun and beam"===s&&(s="sun"),"beam"===s&&(s="eclipsed")),o=(0,i._u)(e.params,e.performance.currentDuties[a],s,o,r),o>1?1:o<0?0:o}))}function x(e){let t=0;const n=e.performance.sources.reduce(((t,n,r)=>{const o=e.performance.currentDuties[r];return(0,i.TZ)(e.params,n,o)+t}),0),r=e.performance.sources.reduce(((t,n,r)=>{const o=e.performance.currentDuties[r],a=(0,i.TZ)(e.params,n,o);return a<0?a+t:t}),0),o=e.performance.sources.reduce(((n,r,o)=>{const a=e.performance.currentDuties[o];let s=r;return"sun and beam"===r?(s="sun",t+=1):"beam"===r&&(t+=1,s="eclipsed"),(0,i.TZ)(e.params,s,a)+n}),0),a=e.performance.sources.length,s=c.FT/36e5/a,u=Math.abs(r*s),p=(n-o)*s;return t=t/a*c.FT/6e4,[u,p,t]}function w(e){return[e.performance.chargeState.reduce(((e,t)=>t<e?t:e),1),e.performance.chargeStateNoBeams.reduce(((e,t)=>t<e?t:e),1)]}(0,r.e)({})},31575:(e,t,n)=>{n.d(t,{E1:()=>m,F4:()=>l,Sp:()=>d,YX:()=>u,ku:()=>p,nf:()=>c});var r=n(63310),o=n(76150),a=n(95793),s=n(75931),i=n(72946);function c(e){const{epoch:t,meanMotionDot:n,bstar:r,inclination:o,rightAscension:a,eccentricity:s,perigee:i,meanAnomaly:c,meanMotion:u}=e;let p=String(t.getYear());p>100&&(p=p.substring(1));let l=(m=t,(Date.UTC(m.getFullYear(),m.getMonth(),m.getDate())-Date.UTC(m.getFullYear(),0,0))/24/60/60/1e3);var m;l<100&&(l=`0${l}`);const d=String((t.getHours()/24+t.getMinutes()/1440+t.getSeconds()/86400).toFixed(8)).substring(1);let f=String(Number(n).toFixed(8)).substring(1);n<0&&(f=`-${f.substring(1)}`),n>=0&&(f=` ${f}`);let g=String(Number(r).toExponential(5)).split(".").join("").substring(0,6);r>=0&&(g=` ${g.substring(0,5)}`);let h=0;h=0!==Number(r)?Math.ceil(Math.log10(Math.abs(r))):"+0";const b=`1 00000C 00000A   ${p}${l}${d} ${f}  00000-0 ${g}${h} 0  0000`,y=String(Number(o).toFixed(4)),x=String(Number(a).toFixed(4)),w=String(Number(s).toFixed(8)).substring(2,9);let v=String(Number(i).toFixed(4));i<100&&(v=` ${v}`);const M=String(Number(c).toFixed(4)),$=String(Number(u).toPrecision(9));return{tle1:b,tle2:`2 00000 ${y.padStart(8)} ${x.padStart(8)} ${w} ${v.padStart(8)} ${M} ${$.padStart(13)}    00`}}function u(e,t){const n=1440/(2*o.pi);let r=0;const i={error:0};i.satnum=e.substring(2,7),i.epochyr=parseInt(e.substring(18,20),10),i.epochdays=parseFloat(e.substring(20,32)),i.ndot=parseFloat(e.substring(33,43)),i.nddot=parseFloat(`.${parseInt(e.substring(44,50),10)}E${e.substring(50,52)}`),i.bstar=parseFloat(`${e.substring(53,54)}.${parseInt(e.substring(54,59),10)}E${e.substring(59,61)}`),i.inclo=parseFloat(t.substring(8,16)),i.nodeo=parseFloat(t.substring(17,25)),i.ecco=parseFloat(`.${t.substring(26,33)}`),i.argpo=parseFloat(t.substring(34,42)),i.mo=parseFloat(t.substring(43,51)),i.no=parseFloat(t.substring(52,63)),i.notle=i.no,i.no/=n,i.a=(i.no*o.tumin)**(-2/3),i.ndottle=i.ndot,i.ndot/=1440*n,i.nddot/=1440*n*1440,i.inclotle=i.inclo,i.inclo*=o.deg2rad,i.nodeotle=i.nodeo,i.nodeo*=o.deg2rad,i.argpotle=i.argpo,i.argpo*=o.deg2rad,i.motle=i.mo,i.mo*=o.deg2rad,i.alta=i.a*(1+i.ecco)-1,i.altp=i.a*(1-i.ecco)-1,r=i.epochyr<57?i.epochyr+2e3:i.epochyr+1900;const c=(0,a.days2mdhms)(r,i.epochdays),{mon:u,day:p,hr:l,minute:m,sec:d}=c;return i.jdsatepoch=(0,a.jday)(r,u,p,l,m,d),i.epochdate=new Date(r,u,p,l,m,d),i.epochdatetimelocal=new Date(i.epochdate.getTime()-6e4*i.epochdate.getTimezoneOffset()).toISOString().substring(0,19),(0,s.Z)(i,{opsmode:"i",satn:i.satnum,epoch:i.jdsatepoch-2433281.5,xbstar:i.bstar,xecco:i.ecco,xargpo:i.argpo,xinclo:i.inclo,xmo:i.mo,xno:i.no,xnodeo:i.nodeo}),i}function p(e,t){const n=function(e,t){return{x:(n=i.a0(e.orbit,t).position).x/o.earthRadius,y:n.z/o.earthRadius,z:-n.y/o.earthRadius};var n}(e,t);return{x:n.x,y:n.y,z:n.z}}function l(e){const t=e.getTime()/864e5+2440587-2451545;let n=4.89495042+.0172027923937*t;n>2*Math.PI&&(n-=2*Math.PI);let r=6.240040768+.0172019703436*t;r>2*Math.PI&&(r-=2*Math.PI);const a=n+.033423055*Math.sin(r)+.0003490659*Math.sin(r),s=1.00014-.01671*Math.cos(r)-14e-5*Math.cos(2*r)*(149597870.7/o.earthRadius),i=.40907027-6.981317008e-9*t,c=s*Math.sin(i)*Math.sin(a);return{x:s*Math.cos(a),y:c,z:-s*Math.cos(i)*Math.sin(a)}}function m(e){const t=e/864e5+2440587-2451545;return 2*Math.PI*(.779057273264+1.002737811911355*t)}function d(e,t){const n=e.x-t.x,r=e.y-t.y,o=e.z-t.z;return Math.sqrt(n*n+r*r+o*o)}(0,r.e)({})},40549:(e,t,n)=>{n.d(t,{TZ:()=>m,Wb:()=>l,_u:()=>d});var r=n(63310),o=n(76150),a=n(99477);(0,r.e)({});const s=new a.Vector3(0,0,0),i=new a.Vector3,c=new a.Vector3,u=new a.Vector3,p=new a.Vector3;function l(e,t){i.fromArray([t.x,t.y,t.z]),c.fromArray([e.x,e.y,e.z]),u.subVectors(s,i),p.subVectors(c,s);const n=u.angleTo(p),r=i.distanceTo(s),a=i.distanceTo(c);return!(n>Math.atan2(o.earthRadius,r)||a<r)}function m(e,t,n){return e.load.powerProfiles[t][n]}function d(e,t,n,r,o){const a=m(e,n,t),{capacity:s}=e.battery;return r>=1&&a>=0?1:r<=0&&a<=0?0:(r*s+o*a)/s}}}]);
//# sourceMappingURL=121.bundle.js.map