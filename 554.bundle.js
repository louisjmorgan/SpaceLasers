(()=>{"use strict";var e,t,r={12618:(e,t,r)=>{r.d(t,{F4:()=>d,oW:()=>m});var n=r(63310),o=r(42003),i=r(31575),a=r(80949),s=r(55287),c=r(434);(0,n.e)({});const u=o.Ry().shape({name:o.Z_().min(2,"Too Short!").max(50,"Too Long!").trim(),color:o.Z_().trim().matches(/^#([0-9a-f]{3}|[0-9a-f]{6})$/i),orbit:o.Ry().shape({tle:o.Z_(),list:o.Z_(),meanMotionDot:o.Rx().min(-1,"Must be more than -1").max(1,"Must be less than 1").required("meanMotionDot is required"),bstar:o.Rx().min(-2,"Must be between -2 and 2").max(2,"Must be between -2 and 2").required("bstar is required"),inclination:o.Rx().min(0,"Must be 0-360°").max(360,"Must be 0-360°").required("inclination is required"),rightAscension:o.Rx().min(0,"Must be 0-360°").max(360,"Must be 0-360°").required("right ascension is required"),eccentricity:o.Rx().min(0,"Must be between 0 and 1").max(1,"Must be between 0 and 1").required("eccentricity is required"),perigee:o.Rx().min(0,"Must be 0-360°").max(360,"Must be 0-360°").required("perigee is required"),meanAnomaly:o.Rx().min(0,"Must be 0-360°").max(360,"Must be 0-360°").required("mean anomaly is required"),meanMotion:o.Rx().min(0,"Must be greater than 0").max(16,"Must be less than 16").required("mean motion is required")}),power:o.Ry().shape({pv:o.Ry().shape({voltage:o.Rx().min(0,"Must be positive").required("pv voltage is required"),currentDensity:o.Rx().min(0,"Must be positive").required("pv current density is required"),area:o.Rx().min(0,"Must be greater than 0").required("pv area is required"),powerStoringConsumption:o.Rx().min(0,"Must be greater than 0").required("Power storing consumption is required"),preset:o.Z_().oneOf(["small","medium","large","custom"])}),battery:o.Ry().shape({voltage:o.Rx().min(0,"Must be positive").required("battery voltage is required"),capacity:o.Rx().min(0,"Must be greater than 0").required("battery capacity is required"),preset:o.Z_().oneOf(["small","medium","large","custom"])})}),duties:o.IX().of(o.Ry().shape({type:o.Z_().oneOf(["cyclical"]).required("Type is required"),name:o.Z_().min(2,"Too Short!").max(30,"Too Long!").required("required!"),priority:o.Rx().integer().min(1).required("Priority is required"),consumption:o.Rx().min(0,"Must be positive").required("Consumption is required"),duration:o.Rx().min(0,"Must be positive").when("type",{is:"cyclical",then:o.Rx().required("Duration is required")}),cycles:o.Rx().min(0,"Must be positive").when("type",{is:"cyclical",then:o.Rx().required("Cycles is required")})}))}),l=(o.Ry().shape({constellations:o.IX().of(o.Ry().shape({name:o.Z_().min(2,"Too Short!").max(50,"Too Long!").trim(),list:o.Z_(),payload:u,satelliteCount:o.Rx().min(0).required("Satellite count is required"),satellites:o.IX().of(u),spacePowersCount:o.Rx().integer().min(0,"Must be an integer greater than or equal to 0"),spacePowerIndices:o.IX().of(o.Rx().min(0)),offsets:o.Ry().shape({inclination:o.Rx().min(0,"Must be 0-36°").max(36,"Must be 0-36°").required("inclination is required"),rightAscension:o.Rx().min(0,"Must be 0-36°").max(36,"Must be 0-36°").required("right ascension is required"),eccentricity:o.Rx().min(0,"Must be between 0 and 1").max(1,"Must be between 0 and 1").required("eccentricity is required"),perigee:o.Rx().min(0,"Must be 0-36°").max(36,"Must be 0-36°").required("perigee is required"),meanAnomaly:o.Rx().min(0,"Must be 0-360°").max(360,"Must be 0-360°").required("mean anomaly is required"),meanMotion:o.Rx().min(0,"Must be greater than 0").max(16,"Must be less than 16").required("mean motion is required")})}))}),(e,t,r)=>{const n=(0,i.nf)({...e.orbit,epoch:new Date(e.orbit.epoch)}),o=(0,i.YX)(n.tle1,n.tle2),a=(0,c.TJ)(o.epochdate,t,r);return[a,(0,c.im)(a),(0,c.U8)(a)]}),p=(e,t,r)=>{const n=[];return e.forEach((e=>{e.satellites.forEach((t=>{n.push((0,s.s4)(t,e.id))}))})),n.forEach((e=>{e.positions=(0,c.VG)(e.params,t),e.performance={currentDuties:(0,c.qL)(e.params.load.duties,t),isEclipsed:(0,c.HE)(e,r,t)}})),n},m=e=>{const t=[];return e.forEach((e=>{let r;r=e.spacePowerIndices?e.spacePowerIndices:(0,s.X_)(e.spacePowersCount,e.satellites.length);const n=(0,s.mA)(e.satellites.length,r),o=(0,s.rl)(e.offsets,n);e.satellites.forEach(((r,n)=>{if(o[n])return o[n].forEach((o=>{t.push((0,s.Iq)(`Space Power ${n+1}`,r.orbit,o,e))}))}))})),t},d=(e,t=a.FT,r=a.yX)=>{const[n,o,i]=l(e.constellations[0].satellites[0],t,r);return{time:n,constellations:(s=e.constellations,s.map((e=>({...e,satellites:e.satellites.map((e=>e.id))})))),satellites:{customers:p(e.constellations,n,o)},sun:o,earth:i};var s}},49781:(e,t,r)=>{r.d(t,{Z:()=>u});var n=r(63310),o=r(44612),i=r(17932),a=r(80949),s=r(12618);(0,n.e)({});const c=()=>[16*Math.random(),16*Math.random(),16*Math.random(),16*Math.random(),1*Math.random(),.1*Math.random()],u=async function*(e){const t=e.constellations[0],n=t.optimization.generations,u=t.optimization.population,l=(0,s.F4)(e,a.FT,a.yX/120),p=(0,i.Kg)((async()=>{const e=await(0,i.Cs)(new i.Cc(new URL(r.p+r.u(582),r.b)));return e.initialize(l),e}),t.optimization.threads),m=e=>{const r={inclination:e[0],rightAscension:e[1],perigee:e[2],meanAnomaly:e[3],meanMotion:e[4],eccentricity:e[5]};try{(0,s.oW)([{...t,offsets:r,spacePowerIndices:e.slice(6)}])}catch(e){throw new Error("Orbital propagation failed")}},d=async()=>{let e=c(),r=!1;for(;!r;)try{m(e),r=!0}catch(t){e=c()}const n=Array.from({length:t.spacePowersCount},(()=>Math.floor(Math.random()*t.satellites.length)));return e.push(...n),e},h=e=>{const r=2*(Math.random()-.5)*3,n=2*(Math.random()-.5)*.1,o=Math.floor((Math.random()-.5)*t.satellites.length),i=Math.floor(Math.random()*e.length);let a;const s=[...e];return i<5?(a=s[i]+r,a>360||a<0?s[i]-=r:s[i]=a):5===i?(a=s[i]+n,a>1||a<0?s[i]-=n:s[i]=a):i>5&&(a=s[i]+o,a>=t.satellites.length||a<0?s[i]-=o:s[i]=a),s},b=[];for(let e=0;e<u;e++)b.push(d());const g=async function*(e,t,r){let n,o=0;await e.seed();for(let r=0;r<=t;r++){console.count("gen"),await e.estimate();const t=e.best()[0];n=e.best(),o+=1,yield{best:n,generations:o},console.log(`${t.entity} - ${t.fitness}`),await e.breed()}return{best:n,generations:o}}(new o.Genetic({mutationFunction:async e=>{let t=h([...e]),r=!1;for(;!r;)try{m(t),r=!0}catch(r){t=h([...e])}return t},fitnessFunction:async e=>{const r={inclination:e[0],rightAscension:e[1],perigee:e[2],meanAnomaly:e[3],meanMotion:e[4],eccentricity:e[5]},n=e.slice(6),o={constellations:[{...t,offsets:r,spacePowerIndices:n}]},i=p.queue((e=>e.calculate(o)));return{fitness:await i}},randomFunction:d,populationSize:u,fittestNSurvives:1,select1:o.Select.Fittest,select2:o.Select.Tournament3,mutateProbablity:1,deduplicate:()=>!0}),n);let y,f=!1;for(;!f&&(y=await g.next(),f=y.done,!f);)yield y;console.log(y);const x=y.value.best[0].entity;return{done:!0,value:{...y.value,offsets:{inclination:x[0],rightAscension:x[1],perigee:x[2],meanAnomaly:x[3],meanMotion:x[4],eccentricity:x[5]},indices:x.slice(6)}}}},55287:(e,t,r)=>{r.d(t,{Iq:()=>p,X_:()=>m,mA:()=>d,rl:()=>h,s4:()=>l});var n=r(63310),o=r(72045),i=r(31575),a=r(80949);(0,n.e)({});const s={sunOnly:{name:"sun",efficiency:1},beamOnly:{name:"beam",efficiency:1},sunAndBeam:{name:"sun and beam",efficiency:1.5},eclipsed:{name:"eclipsed",efficiency:0}},c={power:{pv:{voltage:4.7,currentDensity:170.5,area:.0128,powerStoringConsumption:1.2},battery:{voltage:3.6,capacity:1.125}},duties:[{name:"beaming",duration:null,cycles:null,consumption:3.2,type:"space power"}]};function u(e,t,r){const n=Number(e.cycles),o=1e3*Number(e.duration),i=(t-o*n)/n,s=Math.floor(a.FT/t*n);return Array.from({length:s},((e,t)=>{const n=r.valueOf()+i*(t+1)+o*t;return{start:n,end:n+o}}))}function l(e,t,r=!0){const n=(0,i.nf)({...e.orbit,epoch:new Date(e.orbit.epoch)}),o=(0,i.YX)(n.tle1,n.tle2);try{(0,i.ku)({orbit:o},new Date)}catch(t){const n=`Unable to propagate orbital parameters for ${e.orbit.tle}. ${r?"\nPlease try different values or choose a TLE.":"\nPlease try different offsets in the power configuration menu."}`;throw new Error(n)}o.period=2*Math.PI*60*1e3/o.no;const a={sources:s,voltage:e.power.pv.voltage,currentDensity:e.power.pv.currentDensity,area:e.power.pv.area},c={voltage:e.power.battery.voltage,capacity:e.power.battery.capacity},l=e.duties.map((e=>({name:e.name,type:e.type,priority:e.priority,consumption:Number(e.consumption),duration:1e3*Number(e.duration)||null,cycles:Number(e.cycles)||null,intervals:"cyclical"===e.type?u(e,o.period,o.epochdate):null})));l.unshift({name:"Power storing",type:"power storing",consumption:e.power.pv.powerStoringConsumption});const p=function(e,t,r){const{area:n,voltage:o,currentDensity:i}=e,a=[];return Object.entries(e.sources).forEach((e=>{const s=i*e[1].efficiency*n*o,c=[];t.forEach((e=>{const t=(s-e.consumption)/r.voltage;c.push(t)})),a[e[1].name]=c})),a}(a,l,c);return{name:e.name,color:e.color,constellation:t,id:e.id,params:{orbit:o,battery:c,pv:a,load:{powerProfiles:p,duties:l}},isCustomer:r}}function p(e,t,r,n){const i={...t};return Object.entries(r).forEach((e=>{i[e[0]]=t[e[0]]+Number(e[1])})),l({...c,name:e,color:n.spacePowerColor,id:(0,o.Z)(),orbit:i},n.id,!1)}function m(e,t){const r=t/e;return Array.from({length:e},((e,t)=>Math.floor(r*t)))}function d(e,t){return Array.from({length:e},((e,r)=>t.filter((e=>Number(e)===r)).length))}function h(e,t){return t.map((t=>{if(0===t)return null;if(1===t)return[e];if(t>1){let r=0;return Array.from({length:t},((t,n)=>{n%2==0&&(r+=1);const o={};return Object.entries(e).forEach((e=>{o[e[0]]=e[1]*r*(-1)**n})),o}))}}))}},434:(e,t,r)=>{r.d(t,{HE:()=>l,TJ:()=>a,U8:()=>u,VG:()=>s,im:()=>c,qL:()=>p});var n=r(63310),o=(r(76150),r(31575)),i=r(40549);function a(e,t,r){const n=e.getTime(),o=t/r;return Array.from({length:r},((e,t)=>n+t*o))}function s(e,t){const r=[],n=[],i=[];return t.forEach((t=>{const a=(0,o.ku)(e,new Date(t));r.push(a.x),n.push(a.y),i.push(a.z)})),{x:r,y:n,z:i}}function c(e){const t=[],r=[],n=[];return e.forEach((e=>{const i=(0,o.F4)(new Date(e));t.push(i.x),r.push(i.y),n.push(i.z)})),{x:t,y:r,z:n}}function u(e){return e.map((e=>(0,o.E1)(e)))}function l(e,t,r){return r.map(((r,n)=>{const o={x:e.positions.x[n],y:e.positions.y[n],z:e.positions.z[n]},a={x:t.x[n],y:t.y[n],z:t.z[n]};return(0,i.Wb)(o,a)}))}function p(e,t){return t.map((t=>{let r=0;return e.forEach(((n,o)=>{"power storing"!==n.type&&n.intervals.forEach((i=>{t>=i.start&&t<=i.end&&(0===r||n.priority<e[r].priority)&&(r=o)}))})),r}))}r(80949),(0,n.e)({})},52554:(e,t,r)=>{var n=r(63310),o=r(2263),i=r(79103),a=r(49781);(0,n.e)({}),(0,i.Jj)({optimize(e){const t=(0,a.Z)(e);return new o.y((async e=>{let r={done:!1,value:null};for(;!r.done;)r=await t.next(),console.log(r),e.next(r.value);e.complete()}))}})},31575:(e,t,r)=>{r.d(t,{E1:()=>m,F4:()=>p,YX:()=>u,ku:()=>l,nf:()=>c});var n=r(63310),o=r(76150),i=r(95793),a=r(75931),s=r(72946);function c(e){const{epoch:t,meanMotionDot:r,bstar:n,inclination:o,rightAscension:i,eccentricity:a,perigee:s,meanAnomaly:c,meanMotion:u}=e;let l=String(t.getYear());l>100&&(l=l.substring(1));let p=(m=t,(Date.UTC(m.getFullYear(),m.getMonth(),m.getDate())-Date.UTC(m.getFullYear(),0,0))/24/60/60/1e3);var m;p<100&&(p=`0${p}`);const d=String((t.getHours()/24+t.getMinutes()/1440+t.getSeconds()/86400).toFixed(8)).substring(1);let h=String(Number(r).toFixed(8)).substring(1);r<0&&(h=`-${h.substring(1)}`),r>=0&&(h=` ${h}`);let b=String(Number(n).toExponential(5)).split(".").join("").substring(0,6);n>=0&&(b=` ${b.substring(0,5)}`);let g=0;g=0!==Number(n)?Math.ceil(Math.log10(Math.abs(n))):"+0";const y=`1 00000C 00000A   ${l}${p}${d} ${h}  00000-0 ${b}${g} 0  0000`,f=String(Number(o).toFixed(4)),x=String(Number(i).toFixed(4)),M=String(Number(a).toFixed(8)).substring(2,9);let w=String(Number(s).toFixed(4));s<100&&(w=` ${w}`);const v=String(Number(c).toFixed(4)),q=String(Number(u).toPrecision(9));return{tle1:y,tle2:`2 00000 ${f.padStart(8)} ${x.padStart(8)} ${M} ${w.padStart(8)} ${v} ${q.padStart(13)}    00`}}function u(e,t){const r=1440/(2*o.pi);let n=0;const s={error:0};s.satnum=e.substring(2,7),s.epochyr=parseInt(e.substring(18,20),10),s.epochdays=parseFloat(e.substring(20,32)),s.ndot=parseFloat(e.substring(33,43)),s.nddot=parseFloat(`.${parseInt(e.substring(44,50),10)}E${e.substring(50,52)}`),s.bstar=parseFloat(`${e.substring(53,54)}.${parseInt(e.substring(54,59),10)}E${e.substring(59,61)}`),s.inclo=parseFloat(t.substring(8,16)),s.nodeo=parseFloat(t.substring(17,25)),s.ecco=parseFloat(`.${t.substring(26,33)}`),s.argpo=parseFloat(t.substring(34,42)),s.mo=parseFloat(t.substring(43,51)),s.no=parseFloat(t.substring(52,63)),s.notle=s.no,s.no/=r,s.a=(s.no*o.tumin)**(-2/3),s.ndottle=s.ndot,s.ndot/=1440*r,s.nddot/=1440*r*1440,s.inclotle=s.inclo,s.inclo*=o.deg2rad,s.nodeotle=s.nodeo,s.nodeo*=o.deg2rad,s.argpotle=s.argpo,s.argpo*=o.deg2rad,s.motle=s.mo,s.mo*=o.deg2rad,s.alta=s.a*(1+s.ecco)-1,s.altp=s.a*(1-s.ecco)-1,n=s.epochyr<57?s.epochyr+2e3:s.epochyr+1900;const c=(0,i.days2mdhms)(n,s.epochdays),{mon:u,day:l,hr:p,minute:m,sec:d}=c;return s.jdsatepoch=(0,i.jday)(n,u,l,p,m,d),s.epochdate=new Date(n,u,l,p,m,d),s.epochdatetimelocal=new Date(s.epochdate.getTime()-6e4*s.epochdate.getTimezoneOffset()).toISOString().substring(0,19),(0,a.Z)(s,{opsmode:"i",satn:s.satnum,epoch:s.jdsatepoch-2433281.5,xbstar:s.bstar,xecco:s.ecco,xargpo:s.argpo,xinclo:s.inclo,xmo:s.mo,xno:s.no,xnodeo:s.nodeo}),s}function l(e,t){const r=function(e,t){return{x:(r=s.a0(e.orbit,t).position).x/o.earthRadius,y:r.z/o.earthRadius,z:-r.y/o.earthRadius};var r}(e,t);return{x:r.x,y:r.y,z:r.z}}function p(e){const t=e.getTime()/864e5+2440587-2451545;let r=4.89495042+.0172027923937*t;r>2*Math.PI&&(r-=2*Math.PI);let n=6.240040768+.0172019703436*t;n>2*Math.PI&&(n-=2*Math.PI);const i=r+.033423055*Math.sin(n)+.0003490659*Math.sin(n),a=1.00014-.01671*Math.cos(n)-14e-5*Math.cos(2*n)*(149597870.7/o.earthRadius),s=.40907027-6.981317008e-9*t,c=a*Math.sin(s)*Math.sin(i);return{x:a*Math.cos(i),y:c,z:-a*Math.cos(s)*Math.sin(i)}}function m(e){const t=e/864e5+2440587-2451545;return 2*Math.PI*(.779057273264+1.002737811911355*t)}(0,n.e)({})},80949:(e,t,r)=>{r.d(t,{FT:()=>n,yX:()=>o}),(0,r(63310).e)({});const n=1728e5,o=n*(.12/600)},40549:(e,t,r)=>{r.d(t,{Wb:()=>p});var n=r(63310),o=r(76150),i=r(99477);(0,n.e)({});const a=new i.Vector3(0,0,0),s=new i.Vector3,c=new i.Vector3,u=new i.Vector3,l=new i.Vector3;function p(e,t){s.fromArray([t.x,t.y,t.z]),c.fromArray([e.x,e.y,e.z]),u.subVectors(a,s),l.subVectors(c,a);const r=u.angleTo(l),n=s.distanceTo(a),i=s.distanceTo(c);return!(r>Math.atan2(o.earthRadius,n)||i<n)}}},n={};function o(e){var t=n[e];if(void 0!==t)return t.exports;var i=n[e]={id:e,loaded:!1,exports:{}};return r[e].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}o.m=r,o.x=()=>{var e=o.O(void 0,[546,869,752,105],(()=>o(52554)));return o.O(e)},e=[],o.O=(t,r,n,i)=>{if(!r){var a=1/0;for(l=0;l<e.length;l++){for(var[r,n,i]=e[l],s=!0,c=0;c<r.length;c++)(!1&i||a>=i)&&Object.keys(o.O).every((e=>o.O[e](r[c])))?r.splice(c--,1):(s=!1,i<a&&(a=i));if(s){e.splice(l--,1);var u=n();void 0!==u&&(t=u)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[r,n,i]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((t,r)=>(o.f[r](e,t),t)),[])),o.u=e=>e+".bundle.js",o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{o.b=self.location+"";var e={554:1};o.f.i=(t,r)=>{e[t]||importScripts(o.p+o.u(t))};var t=self.webpackChunk=self.webpackChunk||[],r=t.push.bind(t);t.push=t=>{var[n,i,a]=t;for(var s in i)o.o(i,s)&&(o.m[s]=i[s]);for(a&&a(o);n.length;)e[n.pop()]=1;r(t)}})(),t=o.x,o.x=()=>Promise.all([546,869,752,105].map(o.e,o)).then(t),o.x()})();
//# sourceMappingURL=554.bundle.js.map