(()=>{"use strict";var e,r,t={12618:(e,r,t)=>{t.d(r,{$D:()=>p,SV:()=>m,f6:()=>l,gw:()=>d,lu:()=>h,xN:()=>c});var s=t(63310),i=t(42003),a=t(31575),n=(t(80949),t(55287)),o=t(434);(0,s.e)({});const u=i.Ry().shape({name:i.Z_().min(2,"Too Short!").max(50,"Too Long!").trim(),color:i.Z_().trim().matches(/^#([0-9a-f]{3}|[0-9a-f]{6})$/i),orbit:i.Ry().shape({tle:i.Z_(),list:i.Z_(),meanMotionDot:i.Rx().min(-1,"Must be more than -1").max(1,"Must be less than 1").required("meanMotionDot is required"),bstar:i.Rx().min(-2,"Must be between -2 and 2").max(2,"Must be between -2 and 2").required("bstar is required"),inclination:i.Rx().min(0,"Must be 0-360°").max(360,"Must be 0-360°").required("inclination is required"),rightAscension:i.Rx().min(0,"Must be 0-360°").max(360,"Must be 0-360°").required("right ascension is required"),eccentricity:i.Rx().min(0,"Must be between 0 and 1").max(1,"Must be between 0 and 1").required("eccentricity is required"),perigee:i.Rx().min(0,"Must be 0-360°").max(360,"Must be 0-360°").required("perigee is required"),meanAnomaly:i.Rx().min(0,"Must be 0-360°").max(360,"Must be 0-360°").required("mean anomaly is required"),meanMotion:i.Rx().min(0,"Must be greater than 0").max(16,"Must be less than 16").required("mean motion is required")}),power:i.Ry().shape({pv:i.Ry().shape({voltage:i.Rx().min(0,"Must be positive").required("pv voltage is required"),currentDensity:i.Rx().min(0,"Must be positive").required("pv current density is required"),area:i.Rx().min(0,"Must be greater than 0").required("pv area is required"),powerStoringConsumption:i.Rx().min(0,"Must be greater than 0").required("Power storing consumption is required"),preset:i.Z_().oneOf(["small","medium","large","custom"])}),battery:i.Ry().shape({voltage:i.Rx().min(0,"Must be positive").required("battery voltage is required"),capacity:i.Rx().min(0,"Must be greater than 0").required("battery capacity is required"),preset:i.Z_().oneOf(["small","medium","large","custom"])})}),duties:i.IX().of(i.Ry().shape({type:i.Z_().oneOf(["cyclical"]).required("Type is required"),name:i.Z_().min(2,"Too Short!").max(30,"Too Long!").required("required!"),priority:i.Rx().integer().min(1).required("Priority is required"),consumption:i.Rx().min(0,"Must be positive").required("Consumption is required"),duration:i.Rx().min(0,"Must be positive").when("type",{is:"cyclical",then:i.Rx().required("Duration is required")}),cycles:i.Rx().min(0,"Must be positive").when("type",{is:"cyclical",then:i.Rx().required("Cycles is required")})}))}),c=(i.Ry().shape({constellations:i.IX().of(i.Ry().shape({name:i.Z_().min(2,"Too Short!").max(50,"Too Long!").trim(),list:i.Z_(),payload:u,satelliteCount:i.Rx().min(0).required("Satellite count is required"),satellites:i.IX().of(u),spacePowersCount:i.Rx().integer().min(0,"Must be an integer greater than or equal to 0"),spacePowerIndices:i.IX().of(i.Rx().min(0)),offsets:i.Ry().shape({inclination:i.Rx().min(0,"Must be 0-36°").max(36,"Must be 0-36°").required("inclination is required"),rightAscension:i.Rx().min(0,"Must be 0-36°").max(36,"Must be 0-36°").required("right ascension is required"),eccentricity:i.Rx().min(0,"Must be between 0 and 1").max(1,"Must be between 0 and 1").required("eccentricity is required"),perigee:i.Rx().min(0,"Must be 0-36°").max(36,"Must be 0-36°").required("perigee is required"),meanAnomaly:i.Rx().min(0,"Must be 0-360°").max(360,"Must be 0-360°").required("mean anomaly is required"),meanMotion:i.Rx().min(0,"Must be greater than 0").max(16,"Must be less than 16").required("mean motion is required")})}))}),(e,r,t)=>{const s=(0,a.nf)({...e.orbit,epoch:new Date(e.orbit.epoch)}),i=(0,a.YX)(s.tle1,s.tle2),n=(0,o.TJ)(i.epochdate,r,t);return[n,(0,o.im)(n),(0,o.U8)(n)]}),m=e=>e.map((e=>({name:e.name,id:e.id,color:e.color,satellites:e.satellites.map((e=>e.id))}))),l=(e,r,t)=>{const s=[];return e.forEach((e=>{e.satellites.forEach((r=>{s.push((0,n.s4)(r,e.id))}))})),s.forEach((e=>{e.positions=(0,o.VG)(e.params,r),e.performance={currentDuties:(0,o.qL)(e.params.load.duties,r),isEclipsed:(0,o.HE)(e,t,r)}})),s},d=(e,r,t,s)=>{const i=(e=>{const r=[];return e.forEach((e=>{let t;t=e.spacePowerIndices?e.spacePowerIndices:(0,n.X_)(e.spacePowersCount,e.satellites.length);const s=(0,n.mA)(e.satellites.length,t),i=(0,n.rl)(e.offsets,s);e.satellites.forEach(((t,s)=>{if(i[s])return i[s].forEach((i=>{r.push((0,n.Iq)(`Space Power ${s+1}`,t.orbit,i,e.id))}))}))})),r})(t),a=[];return i.forEach((t=>{t.positions=(0,o.VG)(t.params,e);const i=(0,o.x2)(t,s.filter((e=>e.constellation===t.constellation)),e);t.performance={currentDuties:(0,o.O0)(i,e),isEclipsed:(0,o.HE)(t,r,e)},t.performance.sources=(0,o.e6)(t,i,e),t.performance.chargeState=(0,o.Kg)(t,e),a.push(...i)})),[i,a]},p=(e,r,t)=>{e.forEach((e=>{e.performance.sources=(0,o.e6)(e,t,r),e.performance={...e.performance,chargeState:(0,o.Kg)(e,r),chargeStateNoBeams:(0,o.Kg)(e,r,!1)};const[s,i,a]=(0,o.rR)(e),[n,u]=(0,o.mV)(e);e.summary={totalDischarge:s,dischargeSaved:i,timeCharged:a,lowestChargeStateBeams:n,lowestChargeStateNoBeams:u}}))},h=(e,r,t,s)=>r.map((r=>{const i=r.satellites.map((e=>t.find((r=>r.id===e))));return{...r,isCustomer:!0,spacePowers:s.filter((e=>e.constellation===r.id)).map((e=>e.id)),performance:{chargeState:e.map(((e,r)=>i.reduce(((e,t)=>e+t.performance.chargeState[r]),0)/t.length)),chargeStateNoBeams:e.map(((e,r)=>i.reduce(((e,t)=>e+t.performance.chargeStateNoBeams[r]),0)/t.length))},summary:{dischargeSaved:i.reduce(((e,r)=>e+r.summary.dischargeSaved),0),timeCharged:i.reduce(((e,r)=>e+r.summary.timeCharged),0),lowestChargeStateBeams:i.reduce(((e,r)=>{const t=r.summary.lowestChargeStateBeams;return e<t?e:t}),i[0].summary.lowestChargeStateBeams),lowestChargeStateNoBeams:i.reduce(((e,r)=>{const t=r.summary.lowestChargeStateNoBeams;return e<t?e:t}),i[0].summary.lowestChargeStateNoBeams)}}}))},65955:(e,r,t)=>{var s=t(63310),i=t(80949),a=t(12618);(0,s.e)({}),onmessage=function(e){const{req:r}=e.data;postMessage({done:!1,message:"Simulating celestial bodies"});const[t,s,n]=(0,a.xN)(r.constellations[0].satellites[0],i.FT,i.yX);postMessage({done:!1,message:"Initializing constellations"});let o=(0,a.SV)(r.constellations);const u=(0,a.f6)(r.constellations,t,s);postMessage({done:!1,message:"Initializing space power"});const[c,m]=(0,a.gw)(t,s,r.constellations,u,r.offsets);postMessage({done:!1,message:"Simulating power systems"}),(0,a.$D)(u,t,m),o=(0,a.lu)(t,o,u,c),postMessage({done:!0,mission:{success:!0,time:t,satellites:{customers:u,spacePowers:c},constellations:o,beams:m,sun:s,earth:n}})}},80949:(e,r,t)=>{t.d(r,{FT:()=>s,R1:()=>i,yX:()=>a}),(0,t(63310).e)({});const s=1728e5,i=1e3,a=s*(.12/600)}},s={};function i(e){var r=s[e];if(void 0!==r)return r.exports;var a=s[e]={id:e,loaded:!1,exports:{}};return t[e](a,a.exports,i),a.loaded=!0,a.exports}i.m=t,i.x=()=>{var e=i.O(void 0,[212,121],(()=>i(65955)));return i.O(e)},e=[],i.O=(r,t,s,a)=>{if(!t){var n=1/0;for(m=0;m<e.length;m++){for(var[t,s,a]=e[m],o=!0,u=0;u<t.length;u++)(!1&a||n>=a)&&Object.keys(i.O).every((e=>i.O[e](t[u])))?t.splice(u--,1):(o=!1,a<n&&(n=a));if(o){e.splice(m--,1);var c=s();void 0!==c&&(r=c)}}return r}a=a||0;for(var m=e.length;m>0&&e[m-1][2]>a;m--)e[m]=e[m-1];e[m]=[t,s,a]},i.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return i.d(r,{a:r}),r},i.d=(e,r)=>{for(var t in r)i.o(r,t)&&!i.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((r,t)=>(i.f[t](e,r),r)),[])),i.u=e=>e+".bundle.js",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var r=i.g.document;if(!e&&r&&(r.currentScript&&(e=r.currentScript.src),!e)){var t=r.getElementsByTagName("script");t.length&&(e=t[t.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{var e={955:1,222:1};i.f.i=(r,t)=>{e[r]||importScripts(i.p+i.u(r))};var r=self.webpackChunk=self.webpackChunk||[],t=r.push.bind(r);r.push=r=>{var[s,a,n]=r;for(var o in a)i.o(a,o)&&(i.m[o]=a[o]);for(n&&n(i);s.length;)e[s.pop()]=1;t(r)}})(),r=i.x,i.x=()=>Promise.all([i.e(212),i.e(121)]).then(r),i.x()})();
//# sourceMappingURL=955.bundle.js.map