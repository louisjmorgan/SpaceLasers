/*! For license information please see 955.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[955],{12618:(e,t,r)=>{r.d(t,{$D:()=>d,SV:()=>m,f6:()=>p,gw:()=>l,lu:()=>g,xN:()=>u});var n=r(63310),s=r(42003),a=r(31575),o=(r(80949),r(55287)),i=r(434);(0,n.e)({});const c=s.Ry().shape({name:s.Z_().min(2,"Too Short!").max(50,"Too Long!").trim(),color:s.Z_().trim().matches(/^#([0-9a-f]{3}|[0-9a-f]{6})$/i),orbit:s.Ry().shape({tle:s.Z_(),list:s.Z_(),meanMotionDot:s.Rx().min(-1,"Must be more than -1").max(1,"Must be less than 1").required("meanMotionDot is required"),bstar:s.Rx().min(-2,"Must be between -2 and 2").max(2,"Must be between -2 and 2").required("bstar is required"),inclination:s.Rx().min(0,"Must be 0-360°").max(360,"Must be 0-360°").required("inclination is required"),rightAscension:s.Rx().min(0,"Must be 0-360°").max(360,"Must be 0-360°").required("right ascension is required"),eccentricity:s.Rx().min(0,"Must be between 0 and 1").max(1,"Must be between 0 and 1").required("eccentricity is required"),perigee:s.Rx().min(0,"Must be 0-360°").max(360,"Must be 0-360°").required("perigee is required"),meanAnomaly:s.Rx().min(0,"Must be 0-360°").max(360,"Must be 0-360°").required("mean anomaly is required"),meanMotion:s.Rx().min(0,"Must be greater than 0").max(16,"Must be less than 16").required("mean motion is required")}),power:s.Ry().shape({pv:s.Ry().shape({voltage:s.Rx().min(0,"Must be positive").required("pv voltage is required"),currentDensity:s.Rx().min(0,"Must be positive").required("pv current density is required"),area:s.Rx().min(0,"Must be greater than 0").required("pv area is required"),powerStoringConsumption:s.Rx().min(0,"Must be greater than 0").required("Power storing consumption is required"),preset:s.Z_().oneOf(["small","medium","large","custom"])}),battery:s.Ry().shape({voltage:s.Rx().min(0,"Must be positive").required("battery voltage is required"),capacity:s.Rx().min(0,"Must be greater than 0").required("battery capacity is required"),preset:s.Z_().oneOf(["small","medium","large","custom"])})}),duties:s.IX().of(s.Ry().shape({type:s.Z_().oneOf(["cyclical"]).required("Type is required"),name:s.Z_().min(2,"Too Short!").max(30,"Too Long!").required("required!"),priority:s.Rx().integer().min(1).required("Priority is required"),consumption:s.Rx().min(0,"Must be positive").required("Consumption is required"),duration:s.Rx().min(0,"Must be positive").when("type",{is:"cyclical",then:s.Rx().required("Duration is required")}),cycles:s.Rx().min(0,"Must be positive").when("type",{is:"cyclical",then:s.Rx().required("Cycles is required")})}))}),u=(s.Ry().shape({constellations:s.IX().of(s.Ry().shape({name:s.Z_().min(2,"Too Short!").max(50,"Too Long!").trim(),list:s.Z_(),payload:c,satelliteCount:s.Rx().min(0).required("Satellite count is required"),satellites:s.IX().of(c),spacePowersCount:s.Rx().integer().min(0,"Must be an integer greater than or equal to 0"),spacePowerIndices:s.IX().of(s.Rx().min(0)),offsets:s.Ry().shape({inclination:s.Rx().min(0,"Must be 0-36°").max(36,"Must be 0-36°").required("inclination is required"),rightAscension:s.Rx().min(0,"Must be 0-36°").max(36,"Must be 0-36°").required("right ascension is required"),eccentricity:s.Rx().min(0,"Must be between 0 and 1").max(1,"Must be between 0 and 1").required("eccentricity is required"),perigee:s.Rx().min(0,"Must be 0-36°").max(36,"Must be 0-36°").required("perigee is required"),meanAnomaly:s.Rx().min(0,"Must be 0-360°").max(360,"Must be 0-360°").required("mean anomaly is required"),meanMotion:s.Rx().min(0,"Must be greater than 0").max(16,"Must be less than 16").required("mean motion is required")})}))}),(e,t,r)=>{const n=(0,a.nf)({...e.orbit,epoch:new Date(e.orbit.epoch)}),s=(0,a.YX)(n.tle1,n.tle2),o=(0,i.TJ)(s.epochdate,t,r);return[o,(0,i.im)(o),(0,i.U8)(o)]}),m=e=>e.map((e=>({...e,satellites:e.satellites.map((e=>e.id))}))),p=(e,t,r)=>{const n=[];return e.forEach((e=>{e.satellites.forEach((t=>{n.push((0,o.s4)(t,e.id))}))})),n.forEach((e=>{e.positions=(0,i.VG)(e.params,t),e.performance={currentDuties:(0,i.qL)(e.params.load.duties,t),isEclipsed:(0,i.HE)(e,r,t)}})),n},l=(e,t,r,n)=>{const s=(e=>{const t=[];return e.forEach((e=>{let r;r=e.spacePowerIndices?e.spacePowerIndices:(0,o.X_)(e.spacePowersCount,e.satellites.length);const n=(0,o.mA)(e.satellites.length,r),s=(0,o.rl)(e.offsets,n);e.satellites.forEach(((r,n)=>{if(s[n])return s[n].forEach((s=>{t.push((0,o.Iq)(`Space Power ${n+1}`,r.orbit,s,e))}))}))})),t})(r),a=[];return s.forEach((r=>{r.positions=(0,i.VG)(r.params,e);const s=(0,i.x2)(r,n.filter((e=>e.constellation===r.constellation)),e);r.performance={currentDuties:(0,i.O0)(s,e),isEclipsed:(0,i.HE)(r,t,e)},r.performance.sources=(0,i.e6)(r,s,e),r.performance.chargeState=(0,i.Kg)(r,e),a.push(...s)})),[s,a]},d=(e,t,r)=>{e.forEach((e=>{e.performance.sources=(0,i.e6)(e,r,t),e.performance={...e.performance,chargeState:(0,i.Kg)(e,t),chargeStateNoBeams:(0,i.Kg)(e,t,!1)};const[n,s,a]=(0,i.rR)(e),[o,c]=(0,i.mV)(e);e.summary={totalDischarge:n,dischargeSaved:s,timeCharged:a,lowestChargeStateBeams:o,lowestChargeStateNoBeams:c}}))},g=(e,t,r,n)=>t.map((t=>{const s=t.satellites.map((e=>r.find((t=>t.id===e))));return{...t,isCustomer:!0,spacePowers:n.filter((e=>e.constellation===t.id)).map((e=>e.id)),performance:{chargeState:e.map(((e,t)=>s.reduce(((e,r)=>e+r.performance.chargeState[t]),0)/r.length)),chargeStateNoBeams:e.map(((e,t)=>s.reduce(((e,r)=>e+r.performance.chargeStateNoBeams[t]),0)/r.length))},summary:{dischargeSaved:s.reduce(((e,t)=>e+t.summary.dischargeSaved),0),timeCharged:s.reduce(((e,t)=>e+t.summary.timeCharged),0),lowestChargeStateBeams:s.reduce(((e,t)=>{const r=t.summary.lowestChargeStateBeams;return e<r?e:r}),s[0].summary.lowestChargeStateBeams),lowestChargeStateNoBeams:s.reduce(((e,t)=>{const r=t.summary.lowestChargeStateNoBeams;return e<r?e:r}),s[0].summary.lowestChargeStateNoBeams)}}}))},55287:(e,t,r)=>{r.d(t,{Iq:()=>p,X_:()=>l,mA:()=>d,rl:()=>g,s4:()=>m});var n=r(63310),s=r(72045),a=r(31575),o=r(80949);(0,n.e)({});const i={sunOnly:{name:"sun",efficiency:1},beamOnly:{name:"beam",efficiency:1},sunAndBeam:{name:"sun and beam",efficiency:1.5},eclipsed:{name:"eclipsed",efficiency:0}},c={power:{pv:{voltage:4.7,currentDensity:170.5,area:.0128,powerStoringConsumption:1.2},battery:{voltage:3.6,capacity:1.125}},duties:[{name:"beaming",duration:null,cycles:null,consumption:3.2,type:"space power"}]};function u(e,t,r){const n=Number(e.cycles),s=1e3*Number(e.duration),a=(t-s*n)/n,i=Math.floor(o.FT/t*n);return Array.from({length:i},((e,t)=>{const n=r.valueOf()+a*(t+1)+s*t;return{start:n,end:n+s}}))}function m(e,t,r=!0){const n=(0,a.nf)({...e.orbit,epoch:new Date(e.orbit.epoch)}),s=(0,a.YX)(n.tle1,n.tle2);try{(0,a.ku)({orbit:s},new Date)}catch(t){const n=`Unable to propagate orbital parameters for ${e.orbit.tle}. ${r?"\nPlease try different values or choose a TLE.":"\nPlease try different offsets in the power configuration menu."}`;throw new Error(n)}s.period=2*Math.PI*60*1e3/s.no;const o={sources:i,voltage:e.power.pv.voltage,currentDensity:e.power.pv.currentDensity,area:e.power.pv.area},c={voltage:e.power.battery.voltage,capacity:e.power.battery.capacity},m=e.duties.map((e=>({name:e.name,type:e.type,priority:e.priority,consumption:Number(e.consumption),duration:1e3*Number(e.duration)||null,cycles:Number(e.cycles)||null,intervals:"cyclical"===e.type?u(e,s.period,s.epochdate):null})));m.unshift({name:"Power storing",type:"power storing",consumption:e.power.pv.powerStoringConsumption});const p=function(e,t,r){const{area:n,voltage:s,currentDensity:a}=e,o=[];return Object.entries(e.sources).forEach((e=>{const i=a*e[1].efficiency*n*s,c=[];t.forEach((e=>{const t=(i-e.consumption)/r.voltage;c.push(t)})),o[e[1].name]=c})),o}(o,m,c);return{name:e.name,color:e.color,constellation:t,id:e.id,params:{orbit:s,battery:c,pv:o,load:{powerProfiles:p,duties:m}},isCustomer:r}}function p(e,t,r,n){const a={...t};return Object.entries(r).forEach((e=>{a[e[0]]=t[e[0]]+Number(e[1])})),m({...c,name:e,color:n.spacePowerColor,id:(0,s.Z)(),orbit:a},n.id,!1)}function l(e,t){const r=t/e;return Array.from({length:e},((e,t)=>Math.floor(r*t)))}function d(e,t){return Array.from({length:e},((e,r)=>t.filter((e=>e===r)).length))}function g(e,t){return t.map((t=>{if(0===t)return null;if(1===t)return[e];if(t>1){let r=0;return Array.from({length:t},((t,n)=>{n%2==0&&(r+=1);const s={};return Object.entries(e).forEach((e=>{s[e[0]]=e[1]*r*(-1)**n})),s}))}}))}},434:(e,t,r)=>{r.d(t,{HE:()=>d,Kg:()=>y,O0:()=>f,TJ:()=>u,U8:()=>l,VG:()=>m,e6:()=>b,im:()=>p,mV:()=>M,qL:()=>g,rR:()=>x,x2:()=>h});var n=r(63310),s=r(72045),a=r(76150),o=r(31575),i=r(40549),c=r(80949);function u(e,t,r){const n=e.getTime(),s=t/r;return Array.from({length:r},((e,t)=>n+t*s))}function m(e,t){const r=[],n=[],s=[];return t.forEach((t=>{const a=(0,o.ku)(e,new Date(t));r.push(a.x),n.push(a.y),s.push(a.z)})),{x:r,y:n,z:s}}function p(e){const t=[],r=[],n=[];return e.forEach((e=>{const s=(0,o.F4)(new Date(e));t.push(s.x),r.push(s.y),n.push(s.z)})),{x:t,y:r,z:n}}function l(e){return e.map((e=>(0,o.E1)(e)))}function d(e,t,r){return r.map(((r,n)=>{const s={x:e.positions.x[n],y:e.positions.y[n],z:e.positions.z[n]},a={x:t.x[n],y:t.y[n],z:t.z[n]};return(0,i.Wb)(s,a)}))}function g(e,t){return t.map((t=>{let r=0;return e.forEach(((n,s)=>{"power storing"!==n.type&&n.intervals.forEach((a=>{t>=a.start&&t<=a.end&&(0===r||n.priority<e[r].priority)&&(r=s)}))})),r}))}function h(e,t,r){return t.map((t=>{const n=`${e.name} - ${t.name}`,i=r.map(((r,n)=>{const s={x:e.positions.x[n],y:e.positions.y[n],z:e.positions.z[n]},a={x:t.positions.x[n],y:t.positions.y[n],z:t.positions.z[n]};return(0,o.Sp)(s,a)})),u=i.map((e=>e*a.earthRadius<c.R1));return{name:n,distances:i,activated:u,customerId:t.id,spacePowerId:e.id,id:(0,s.Z)()}}))}function f(e,t){return t.map(((t,r)=>e.reduce(((e,t)=>t.activated[r]||e),!1)?1:0))}function b(e,t,r){return r.map(((r,n)=>function(e,t,r){let n;n=!!t&&t.filter((t=>t.customerId===e.id)).reduce(((e,t)=>t.activated[r]||e),!1);const s=!e.performance.isEclipsed[r];return!s&&n?"beam":s&&n?"sun and beam":s||n?s&&!n?"sun":void 0:"eclipsed"}(e,t,n)))}function y(e,t,r=!0){const n=c.FT/36e5/t.length;let s=1;return t.map(((t,a)=>{let o=e.performance.sources[a];return!1===r&&("sun and beam"===o&&(o="sun"),"beam"===o&&(o="eclipsed")),s=(0,i._u)(e.params,e.performance.currentDuties[a],o,s,n),s>1?1:s<0?0:s}))}function x(e){let t=0;const r=e.performance.sources.reduce(((t,r,n)=>{const s=e.performance.currentDuties[n];return(0,i.TZ)(e.params,r,s)+t}),0),n=e.performance.sources.reduce(((t,r,n)=>{const s=e.performance.currentDuties[n],a=(0,i.TZ)(e.params,r,s);return a<0?a+t:t}),0),s=e.performance.sources.reduce(((r,n,s)=>{const a=e.performance.currentDuties[s];let o=n;return"sun and beam"===n?(o="sun",t+=1):"beam"===n&&(t+=1,o="eclipsed"),(0,i.TZ)(e.params,o,a)+r}),0),a=e.performance.sources.length,o=c.FT/36e5/a,u=Math.abs(n*o),m=(r-s)*o;return t=t/a*c.FT/6e4,[u,m,t]}function M(e){return[e.performance.chargeState.reduce(((e,t)=>t<e?t:e),1),e.performance.chargeStateNoBeams.reduce(((e,t)=>t<e?t:e),1)]}(0,n.e)({})},65955:(e,t,r)=>{var n=r(63310),s=r(80949),a=r(12618);(0,n.e)({}),onmessage=function(e){const{req:t}=e.data;postMessage({done:!1,message:"Simulating celestial bodies"});const[r,n,o]=(0,a.xN)(t.constellations[0].satellites[0],s.FT,s.yX);postMessage({done:!1,message:"Initializing constellations"});let i=(0,a.SV)(t.constellations);const c=(0,a.f6)(t.constellations,r,n);postMessage({done:!1,message:"Initializing space power"});const[u,m]=(0,a.gw)(r,n,t.constellations,c,t.offsets);postMessage({done:!1,message:"Simulating power systems"}),(0,a.$D)(c,r,m),i=(0,a.lu)(r,i,c,u),postMessage({done:!0,mission:{success:!0,time:r,satellites:{customers:c,spacePowers:u},constellations:i,beams:m,sun:n,earth:o}})}},31575:(e,t,r)=>{r.d(t,{E1:()=>l,F4:()=>p,Sp:()=>d,YX:()=>u,ku:()=>m,nf:()=>c});var n=r(63310),s=r(76150),a=r(95793),o=r(75931),i=r(72946);function c(e){const{epoch:t,meanMotionDot:r,bstar:n,inclination:s,rightAscension:a,eccentricity:o,perigee:i,meanAnomaly:c,meanMotion:u}=e;let m=String(t.getYear());m>100&&(m=m.substring(1));let p=(l=t,(Date.UTC(l.getFullYear(),l.getMonth(),l.getDate())-Date.UTC(l.getFullYear(),0,0))/24/60/60/1e3);var l;p<100&&(p=`0${p}`);const d=String((t.getHours()/24+t.getMinutes()/1440+t.getSeconds()/86400).toFixed(8)).substring(1);let g=String(Number(r).toFixed(8)).substring(1);r<0&&(g=`-${g.substring(1)}`),r>=0&&(g=` ${g}`);let h=String(Number(n).toExponential(5)).split(".").join("").substring(0,6);n>=0&&(h=` ${h.substring(0,5)}`);let f=0;f=0!==Number(n)?Math.ceil(Math.log10(Math.abs(n))):"+0";const b=`1 00000C 00000A   ${m}${p}${d} ${g}  00000-0 ${h}${f} 0  0000`,y=String(Number(s).toFixed(4)),x=String(Number(a).toFixed(4)),M=String(Number(o).toFixed(8)).substring(2,9);let w=String(Number(i).toFixed(4));i<100&&(w=` ${w}`);const q=String(Number(c).toFixed(4)),v=String(Number(u).toPrecision(9));return{tle1:b,tle2:`2 00000 ${y.padStart(8)} ${x.padStart(8)} ${M} ${w.padStart(8)} ${q} ${v.padStart(13)}    00`}}function u(e,t){const r=1440/(2*s.pi);let n=0;const i={error:0};i.satnum=e.substring(2,7),i.epochyr=parseInt(e.substring(18,20),10),i.epochdays=parseFloat(e.substring(20,32)),i.ndot=parseFloat(e.substring(33,43)),i.nddot=parseFloat(`.${parseInt(e.substring(44,50),10)}E${e.substring(50,52)}`),i.bstar=parseFloat(`${e.substring(53,54)}.${parseInt(e.substring(54,59),10)}E${e.substring(59,61)}`),i.inclo=parseFloat(t.substring(8,16)),i.nodeo=parseFloat(t.substring(17,25)),i.ecco=parseFloat(`.${t.substring(26,33)}`),i.argpo=parseFloat(t.substring(34,42)),i.mo=parseFloat(t.substring(43,51)),i.no=parseFloat(t.substring(52,63)),i.notle=i.no,i.no/=r,i.a=(i.no*s.tumin)**(-2/3),i.ndottle=i.ndot,i.ndot/=1440*r,i.nddot/=1440*r*1440,i.inclotle=i.inclo,i.inclo*=s.deg2rad,i.nodeotle=i.nodeo,i.nodeo*=s.deg2rad,i.argpotle=i.argpo,i.argpo*=s.deg2rad,i.motle=i.mo,i.mo*=s.deg2rad,i.alta=i.a*(1+i.ecco)-1,i.altp=i.a*(1-i.ecco)-1,n=i.epochyr<57?i.epochyr+2e3:i.epochyr+1900;const c=(0,a.days2mdhms)(n,i.epochdays),{mon:u,day:m,hr:p,minute:l,sec:d}=c;return i.jdsatepoch=(0,a.jday)(n,u,m,p,l,d),i.epochdate=new Date(n,u,m,p,l,d),i.epochdatetimelocal=new Date(i.epochdate.getTime()-6e4*i.epochdate.getTimezoneOffset()).toISOString().substring(0,19),(0,o.Z)(i,{opsmode:"i",satn:i.satnum,epoch:i.jdsatepoch-2433281.5,xbstar:i.bstar,xecco:i.ecco,xargpo:i.argpo,xinclo:i.inclo,xmo:i.mo,xno:i.no,xnodeo:i.nodeo}),i}function m(e,t){const r=function(e,t){return{x:(r=i.a0(e.orbit,t).position).x/s.earthRadius,y:r.z/s.earthRadius,z:-r.y/s.earthRadius};var r}(e,t);return{x:r.x,y:r.y,z:r.z}}function p(e){const t=e.getTime()/864e5+2440587-2451545;let r=4.89495042+.0172027923937*t;r>2*Math.PI&&(r-=2*Math.PI);let n=6.240040768+.0172019703436*t;n>2*Math.PI&&(n-=2*Math.PI);const a=r+.033423055*Math.sin(n)+.0003490659*Math.sin(n),o=1.00014-.01671*Math.cos(n)-14e-5*Math.cos(2*n)*(149597870.7/s.earthRadius),i=.40907027-6.981317008e-9*t,c=o*Math.sin(i)*Math.sin(a);return{x:o*Math.cos(a),y:c,z:-o*Math.cos(i)*Math.sin(a)}}function l(e){const t=e/864e5+2440587-2451545;return 2*Math.PI*(.779057273264+1.002737811911355*t)}function d(e,t){const r=e.x-t.x,n=e.y-t.y,s=e.z-t.z;return Math.sqrt(r*r+n*n+s*s)}(0,n.e)({})},80949:(e,t,r)=>{r.d(t,{FT:()=>n,R1:()=>s,yX:()=>a}),(0,r(63310).e)({});const n=1728e5,s=1e3,a=n*(.12/600)},40549:(e,t,r)=>{r.d(t,{TZ:()=>l,Wb:()=>p,_u:()=>d});var n=r(63310),s=r(76150),a=r(99477);(0,n.e)({});const o=new a.Vector3(0,0,0),i=new a.Vector3,c=new a.Vector3,u=new a.Vector3,m=new a.Vector3;function p(e,t){i.fromArray([t.x,t.y,t.z]),c.fromArray([e.x,e.y,e.z]),u.subVectors(o,i),m.subVectors(c,o);const r=u.angleTo(m),n=i.distanceTo(o),a=i.distanceTo(c);return!(r>Math.atan2(s.earthRadius,n)||a<n)}function l(e,t,r){return e.load.powerProfiles[t][r]}function d(e,t,r,n,s){const a=l(e,r,t),{capacity:o}=e.battery;return n>=1&&a>=0?1:n<=0&&a<=0?0:(n*o+s*a)/o}},76150:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.x2o3=t.j3oj2=t.j4=t.j3=t.j2=t.tumin=t.vkmpersec=t.xke=t.earthRadius=t.mu=t.minutesPerDay=t.rad2deg=t.deg2rad=t.twoPi=t.pi=void 0;var r=Math.PI;t.pi=r;var n=2*r;t.twoPi=n;var s=r/180;t.deg2rad=s;var a=180/r;t.rad2deg=a,t.minutesPerDay=1440;t.mu=398600.5;var o=6378.137;t.earthRadius=o;var i=60/Math.sqrt(650944.0944816993);t.xke=i;var c=o*i/60;t.vkmpersec=c;var u=1/i;t.tumin=u;t.j2=.00108262998905;t.j3=-253215306e-14,t.j4=-161098761e-14,t.j3oj2=-.0023388905587420003,t.x2o3=2/3}}]);
//# sourceMappingURL=955.bundle.js.map